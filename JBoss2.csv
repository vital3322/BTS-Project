Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Log Work,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Causality),Outward issue link (Causality),Outward issue link (Causality),Outward issue link (Causality),Outward issue link (Cloners),Outward issue link (Cloners (old)),Outward issue link (Dependency),Outward issue link (Dependency),Outward issue link (Duplicate),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Outward issue link (Sequence),Outward issue link (Superset),Outward issue link (Superset),Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Affects),Custom field (Affects),Custom field (Bugzilla References),Custom field (Bugzilla References),Custom field (Bugzilla References),Custom field (Bugzilla References),Custom field (Bugzilla References),Custom field (Bugzilla Update),Custom field (CDW blocker),Custom field (CDW devel_ack),Custom field (CDW docs_ack),Custom field (CDW exception),Custom field (CDW pm_ack),Custom field (CDW qa_ack),Custom field (CDW release),Custom field (Epic Link),Custom field (Estimated Difficulty),Custom field (Forum Reference),Custom field (Forum Reference),Custom field (Forum Reference),Custom field (Git Pull Request),Custom field (Git Pull Request),Custom field (Git Pull Request),Custom field (Git Pull Request),Custom field (Help Desk Ticket Reference),Custom field (Involved),Custom field (Number of attachments),Custom field (Number of comments),Custom field (Parent Link),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Release Notes Text),Custom field (Security Sensitive Issue),Custom field (SourceForge Reference),Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (Target Release),Custom field (Team),Custom field (Tester),Custom field (Workaround),Custom field (Workaround Description),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
wildfly-openssl - wfssl.dll is not automatically loaded on Windows,WFCORE-2056,12664143,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,swd847,swd847,swd847,28/Nov/16 5:12 PM,28/Nov/16 6:02 PM,29/Nov/16 3:41 PM,,,,,,,,,,Security,Server,,,,0,wilfly-openssl,,,,,"It seems that libraries to support OpenSSL via {{wildfly-openssl}} does not bind automatically under the Windows right now.

When I am on Linux, to setup OpenSSL, all I need to do is to have installed OpenSSL on my machine or provide path to my custom OpenSSL libs via ""org.wildfly.openssl.path"" property. Then I start EAP, set up ""openssl.TLS"" provider and I am ready to go.

On windows although this seems to be a little bit complicated. When I start EAP with path to my OpenSSL libraries (JBCS OpenSSL) and set up ""openssl.TLS"" provider, after reload operation I get following error message:
{code}
2016-11-28 12:27:44,512 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.server.controller.management.security_realm.ApplicationRealm.ssl-context: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.ApplicationRealm.ssl-context: WFLYDM0018: Unable to start service
        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:108)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1963)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1896)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: openssl.TLS, provider: openssl, class: org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLSContextSpi)
        at java.security.Provider$Service.newInstance(Unknown Source)
        at sun.security.jca.GetInstance.getInstance(Unknown Source)
        at sun.security.jca.GetInstance.getInstance(Unknown Source)
        at javax.net.ssl.SSLContext.getInstance(Unknown Source)
        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:97)
        ... 5 more
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
        at org.wildfly.openssl.SSL.init(SSL.java:81)
        at org.wildfly.openssl.OpenSSLContextSPI.<init>(OpenSSLContextSPI.java:119)
        at org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLSContextSpi.<init>(OpenSSLContextSPI.java:427)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        ... 10 more
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.wildfly.openssl.SSL.init(SSL.java:76)
        ... 16 more
Caused by: java.lang.UnsatisfiedLinkError: no wfssl in java.library.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at org.wildfly.openssl.SSL$LibraryLoader.load(SSL.java:188)
        ... 21 more
{code}
It seems that ""wfssl"" library that serves to search and bind OpenSSL libs does not load automatically although it is already present as a module in EAP. When I specify also {{org.wildfly.openssl.libwfssl.path}} property with path to the {{wfssl.dll}} file in the EAP modules, then OpenSSL is successfully initialized during the EAP startup and https requests from clients seems to be working too.

My expectation here is that when ""wfssl.dll"" library is present as a module in EAP on Windows, it is loaded automatically and user does not have to specify its location.","Windows 8.1 Pro, 64b
OpenSSL taken from JBCS 2.4.6 (OpenSSL 1.0.1e)",,,,,,,,,,,,,,,JBEAP-7530,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0b0fz:,9223372036854775807,,,,"# download and unzip EAP
# download and unzip JBCS 2.4.6 for Windows with OpenSSL binaries
# modify {{standalone.conf.ps1}} appending to JAVA_OPTS {{-Dorg.wildfly.openssl.path=<path_to_the_openssl_libs>}}
# start EAP {{standalone.ps1}} and see error in server.log
# stop EAP
# modify {{stadnalone.conf.ps1}} appending to JAVA_OPTS also {{-Dorg.wildfly.openssl.libwfssl.path=<path_to_the_wfssl_dll>}}
# start EAP {{standalone.ps1}}, OpenSSL is initialized correctly now and HTTPS requests to server are working",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Direct end user mods of a slave-HC-managed domain server's config are possible if included in a composite op,WFCORE-2055,12664120,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,brian.stansberry,brian.stansberry,28/Nov/16 1:03 PM,28/Nov/16 8:28 PM,29/Nov/16 3:50 PM,,,,,,,,,,,,,,,0,,,,,,"Once WFCORE-2053 is fixed, CoreResourceManagementTestCase.testCannotInvokeManagedSlaveServerOperationsInDomainComposite will fail. This test involves doing two ops in a composite, with the composite addressed to the domain root, while the steps are addressed to a subsystem on an individual server, where the server is managed by a slave HC. The first op is a read, the second is a write.

The op should fail as the write is not allowed.

Test is currently only passing because the WFCORE-2053 problem is producing false positives.",,,,,,,,,,,,WFCORE-1214,,,,,,,,,WFCORE-2053,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1993,,,,,,0.0,1.0,,1|i0b0av:,9223372036854775807,,,,,,,,,,,"28/Nov/16 7:49 PM;brian.stansberry;The WFCORE-1214 fix causes WFCORE-2055 by dropping headers from steps in a composite op, resulting in the domain server not recognizing that a local write was initiated by the caller rather than by the HC.",,,,,,,,,,,,,,,,,,,,,,,,,,
CoreResourceManagementTestCase tests of composites are broken,WFCORE-2053,12664116,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,brian.stansberry,brian.stansberry,28/Nov/16 12:43 PM,28/Nov/16 8:19 PM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,Test Suite,,,,0,,,,,,"CoreResourceManagementTestCase was broken when it was moved from full to core. A number of tests are testing adds of /host=x/server=y/subsystem=io/worker=default:add but these tests are bogus:

1) The worker already exists in the profile used by the DC.
2) The params passed to the add op are bogus (leftovers from the 'full' test that tested the threads subsystem.

The tests are primarily checking for failures but these issues mean they can be falsely passing; passing due to failures unrelated to what the test is checking.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1993,,,,,,0.0,0.0,,1|i0b09z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bogus README.txt,WFCORE-2052,12664108,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jason.greene,brian.stansberry,brian.stansberry,28/Nov/16 11:58 AM,28/Nov/16 11:58 AM,29/Nov/16 3:50 PM,,,,,,,,,,Server,,,,,0,,,,,,"The README.txt file is wrong:

1) It says WildFly 10. Wrong for core, and wrong #.
2) Talks about javaee.

Probably this file should move to full and a simple variant for core should be written.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0b08f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Redirection (<, <<) do not work in CLI",WFCORE-2049,12663997,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,jdenise,jdenise,jdenise,28/Nov/16 7:59 AM,28/Nov/16 8:45 AM,29/Nov/16 3:50 PM,,,,,,,,,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-7510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1988,,,,,,0.0,0.0,,1|i0azn3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CommandTimeoutHandlerTestCase fails on Windows 2008R2,WFCORE-2047,12663930,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jdenise,jdenise,jdenise,28/Nov/16 3:37 AM,28/Nov/16 3:49 AM,29/Nov/16 3:50 PM,,,,,,,,,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-6925,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1987,,,,,,0.0,0.0,,1|i0az9z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
KeyManager synchronization issue when using IBM JDK,WFCORE-2046,12663846,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,dlofthouse,jcacek,jcacek,25/Nov/16 10:20 AM,29/Nov/16 3:19 AM,29/Nov/16 3:50 PM,,,,,,,,,,Security,,,,,0,,,,,,"We hit a {{KeyManagerFactory}} related synchronization issue in {{org.jboss.as.domain.management.security.AbstractKeyManagerService.createKeyManagers(boolean)}} method on IBM JDK. The issue occurs if there are more security realms with SSL identities in EAP and they have keystores with different passwords.

As the ApplicationRealm (in EAP 7.1) has preconfigured ssl identity configuration, the risk customers will hit this when they add their own security realm with a ssl identity is big. The frequency we hit this issue is more than 10% cases on our machines.

Our debugging suggests the problem is located in IBM JDK implementation of {{javax.net.ssl.KeyManagerFactorySpi}} (class {{com.ibm.jsse2.ae$a}}).
The workflow:
# user calls {{keyManagerFactory.init(keyStore, keystorePassword)}} which invokes {{com.ibm.jsse2.ae$a.engineInit(Keystore keyStore, char[] password)}}
# the password (from the second method parameter) is stored into static field {{com.ibm.jsse2.ae.d}} and in the next step the field is used as parameter for creating new object {{new com.ibm.jsse2.aw(keyStore, d)}}
# the previous step is not synchronized and when more threads call {{keyManagerFactory.init()}} with different passwords, wrong password may be used for retrieving a key from keystore.

*Possible workaround*
We could workaround this issue on EAP side (until it's fixed in the JDK) by synchronizing {{keyManagerFactory.init()}} call in {{AbstractKeyManagerService.createKeyManagers(boolean)}} when IBM JDK is used.
",,,,,,,,,,,,,,,,JBEAP-7523,,,,,,,,,,,29/Nov/16 3:18 AM;jcacek;test-app-ibm-jdk-keymanager-sync.zip;https://issues.jboss.org/secure/attachment/12413497/test-app-ibm-jdk-keymanager-sync.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|i0ayrz:,9223372036854775807,,,,"We've prepared a byteman script which shows what happens when we hit the problem. It's not a reproducer, it just adds debug messages into the server log.

# Install byteman and IBM JDK
# store attached script into {{/tmp/ibmKeyManagerFactory.btm}}
# generate keystore {{/tmp/test.keystore}}
{code}
keytool -genkey -alias test -keystore /tmp/test.keystore -dname ""CN=test"" -storepass wildfly -keypass wildfly
{code}
# start EAP
# use JBoss CLI to add a new security realm with the generated keystore
{code}
/core-service=management/security-realm=JBossTest:add
/core-service=management/security-realm=JBossTest/server-identity=ssl:add(keystore-path=/tmp/test.keystore, keystore-password=wildfly, alias=test)
{code}
# stop EAP
# configure byteman for EAP - add following (with correct byteman path) at the end of {{bin/standalone.conf}}:
{code}
BYTEMAN_HOME=""$HOME/tools/byteman""
JAVA_OPTS=""$JAVA_OPTS -Dorg.jboss.byteman.transform.all -javaagent:${BYTEMAN_HOME}/lib/byteman.jar=script:/tmp/ibmKeyManagerFactory.btm,boot:${BYTEMAN_HOME}/lib/byteman.jar,listener:true""
{code}
# start EAP (until you see the exception in server log repeat stop and start again) - don't forget to use IBM JDK

When we hit the issue, the {{server.log}} contains something like:
{code}
2016-11-25 14:44:52,877 INFO  [stdout] (MSC service thread 1-5) Incoming KeyStore password password
2016-11-25 14:44:52,879 INFO  [stdout] (MSC service thread 1-4) Incoming KeyStore password changeit
2016-11-25 14:44:52,882 INFO  [stdout] (MSC service thread 1-4) Used KeyStore password changeit
2016-11-25 14:44:52,883 INFO  [stdout] (MSC service thread 1-5) Used KeyStore password changeit
2016-11-25 14:44:52,891 INFO  [stdout] (MSC service thread 1-7) Incoming KeyStore password changeit
2016-11-25 14:44:52,892 INFO  [stdout] (MSC service thread 1-7) Used KeyStore password changeit
2016-11-25 14:44:52,891 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.server.controller.management.security_realm.ApplicationRealm.key-manager: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.ApplicationRealm.key-manager: WFLYDM0018: Unable to start service
        at org.jboss.as.domain.management.security.AbstractKeyManagerService.start(AbstractKeyManagerService.java:85)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1963)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1896)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.lang.Thread.run(Thread.java:785)
Caused by: java.security.UnrecoverableKeyException: Cannot recover key
        at com.ibm.crypto.provider.x.recover(Unknown Source)
        at com.ibm.crypto.provider.JavaKeyStore.engineGetKey(Unknown Source)
        at java.security.KeyStore.getKey(KeyStore.java:1034)
        at com.ibm.jsse2.aw.<init>(aw.java:146)
        at com.ibm.jsse2.ae$a.engineInit(ae$a.java:4)
        at javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:19)
        at org.jboss.as.domain.management.security.AbstractKeyManagerService.createKeyManagers(AbstractKeyManagerService.java:130)
        at org.jboss.as.domain.management.security.AbstractKeyManagerService.start(AbstractKeyManagerService.java:83)
        ... 5 more
{code}",,,,,,,29/Nov/16 3:19 AM;jcacek;I've added a simple reproducer (JUnit test).,,,,,,,,,,,,,,,,,,,,,,,,,,
Enabling RBAC breaks WildFly,WFCORE-2035,12663287,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,iweiss,iweiss,iweiss,23/Nov/16 7:18 AM,29/Nov/16 2:11 AM,29/Nov/16 3:50 PM,,,,,,,,,,JMX,Security,,,,0,,,,,,Enabling RBAC and reload leads to a lot of exceptions in server log in both standalone and domain mode. See attached server log.,,,,,,,,,,,,,,,,JBEAP-7439,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0avef:,9223372036854775807,,,,"# Start WildFly
# Enable RBAC: {{/core-service=management/access=authorization:write-attribute(name=provider, value=rbac)}}
# {{reload}}",,,,,,,23/Nov/16 7:23 AM;brian.stansberry;Please check with [~dlofthouse]. My guess is this relates to the elytron-related change in how in-vm calls are handled with RBAC.,,,,,,,,,,,,,,,,,,,,,,,,,,
Resource description should not contain javadoc style links,WFCORE-2034,12658899,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,luck3y,msvehla,msvehla,02/Nov/16 8:18 AM,22/Nov/16 7:01 PM,29/Nov/16 3:50 PM,22/Nov/16 7:01 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,user_experience,,,,,"Description of the attribute {{date-format}} in

{code}
/core-service=management/access=audit/json-formatter=json-formatter
{code}

has following description:

{panel}
The date format to use as understood by \{@link java.text.SimpleDateFormat}. Will be ignored if include-date=\""false\"".
{panel}

The description string shouldn't contain javadoc style &#64;link ",,,,,,,,,,,,,,,,JBEAP-6807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1977,,,,,,0.0,2.0,,1|i0a65z:,9223372036854775807,,,,"See

{code}
/core-service=management/access=audit/json-formatter=json-formatter
:read-resource-description
{code}",,,,,,,"08/Nov/16 10:54 AM;brian.stansberry;Please use component ""Domain Management"" for management model issues not specific to a subsystem. Yes, it's a very intuitive component name. :)","22/Nov/16 7:01 PM;brian.stansberry;Also, please file kernel issues like this in WFCORE.",,,,,,,,,,,,,,,,,,,,,,,,,
CLI provides confusing error if an attribute does not exist,WFCORE-2033,12663187,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,,swd847,swd847,22/Nov/16 4:26 PM,23/Nov/16 1:12 PM,29/Nov/16 3:50 PM,23/Nov/16 1:12 PM,,,,,,,,,CLI,,,,,0,,,,,,"If a CLI operation contains an attribute that does not exist the resulting error message is not very informative:

[standalone@localhost:9990 /] :reload(adminonly=true)
Failed to handle ':reload(adminonly=true)': java.lang.IllegalArgumentException

The error message should inform the user that the attribute they specified was incorrect.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0ausv:,9223372036854775807,,,,,,,,,,,"23/Nov/16 1:12 PM;jdenise;Hi, this seems to be the bug WFCORE-1982 that has been recently fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,
Update description of security-realm in management interfaces,WFCORE-2031,12662985,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dlofthouse,olukas,olukas,22/Nov/16 3:24 AM,29/Nov/16 3:31 PM,29/Nov/16 3:50 PM,,,,,,,,3.0.0.Alpha14,,Security,,,,,0,user_experience,,,,,"Description of security-realm attribute in HTTP (and native) management interfaces says:
""The security realm to use for the HTTP management interface."" or ""The security realm to use for the native management interface.""

However Elytron also uses security-realms. Description of mentioned about attribute should include information that it uses *legacy* security realm (not Elytron). Without word ""legacy"" it can be confusing since two different types of security-realm currently occur in configuration. ",,,,,,,,,,,,,,,,JBEAP-7436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0atmf:,9223372036854775807,,,,,,,,,,,"22/Nov/16 1:41 PM;dlofthouse;More than this, all the attributes on the management interfaces that relate to legacy security realms should be deprecated.
",,,,,,,,,,,,,,,,,,,,,,,,,,
sasl-authentication-factory should be valid in combination with security-realm in native management interface in CLI,WFCORE-2030,12662840,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,dlofthouse,olukas,olukas,21/Nov/16 10:50 AM,29/Nov/16 3:31 PM,29/Nov/16 3:50 PM,,,,,,,,3.0.0.Alpha14,,Security,,,,,0,,,,,,"I am not able to add native management interface with both {{sasl-authentication-factory}} and {{security-realm}} attributes. According to comments in EAP7-545 Analysis document [1] setting both of them is valid configuration. However CLI consider this combination as invalid (when running server with standalone-elytron.xml):
{code}
/core-service=management/management-interface=native-interface:add(sasl-authentication-factory=application-sasl-authentication,security-realm=ApplicationRealm,socket-binding=management-http)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0105: sasl-authentication-factory is invalid in combination with security-realm"",
    ""rolled-back"" => true
}
{code}",,,,,,,,,,,,,,,,JBEAP-7429,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0asrj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It is not possible to set Elytron for native management interface,WFCORE-2029,12662822,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,dlofthouse,olukas,olukas,21/Nov/16 10:23 AM,29/Nov/16 3:31 PM,29/Nov/16 3:50 PM,,,,,,,,3.0.0.Alpha14,,Security,,,,,0,,,,,,"I am not able to correctly configure native management interface to use Elytron. 

I am adding some binding for native interface:
{code}
/socket-binding-group=standard-sockets/socket-binding=native:add(port=9999)
{code}
And then adding native management interface which uses Elytron sasl-authentication-factory ({{application-sasl-authentication}} is predefined in standalone-elytron.xml):
{code}
/core-service=management/management-interface=native-interface:add(sasl-authentication-factory=application-sasl-authentication,socket-binding=native)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {
        ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.security.sasl-authentication-factory""],
        ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.security.sasl-authentication-factory]""]
    },
    ""rolled-back"" => true
}
{code}
Following exception occurs in server log:
{code}
ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""management-interface"" => ""native-interface"")
]) - failure description: {
    ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.security.sasl-authentication-factory""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.security.sasl-authentication-factory]""]
}
INFO  [org.jboss.as.controller] (management-handler-thread - 2) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service org.wildfly.security.sasl-authentication-factory (missing) dependents: [service jboss.remoting.server.management]
{code}

The same exception is thrown when I am trying to set SSL through Elytron {{ssl-context}} attribute in management native-interface.",,,,,,,,,,,,,,,,JBEAP-7424,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0asnr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Option server_config should be a file name not a path as stated by command help,WFCORE-2027,12662958,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,21/Nov/16 7:36 PM,21/Nov/16 7:37 PM,29/Nov/16 3:50 PM,,,,,,,,,,CLI,Domain Management,,,,0,,,,,,"embed-server --help, says the server_config should be the name of the file and not a path, you can set a path relative to the standalone/configuration that can be in any place inside the server ../../../ it does load the file you set there but then fails to change any properties as it does in the default standalone under jboss_home/standalone/config",,,,,,,,,,,,,,,,JBEAP-6366,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0atgf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"source-port is wrongly offsetted when configured to 0, i.e. ephemeral port; results in ""Permission denied (Bind failed)""",WFCORE-2026,12662892,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,rhusar,rhusar,rhusar,21/Nov/16 2:24 PM,22/Nov/16 6:58 PM,29/Nov/16 3:50 PM,22/Nov/16 6:58 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Server,,,,,0,,,,,,"There is a discrepancy between how 0 is handled.

XSD
{noformat}
        <xs:attribute name=""source-port"" type=""xs:positiveInteger"" use=""optional"">
{noformat}
doesn't allow 0.

MODEL
{noformat}
            .setAllowExpression(true).setValidator(new IntRangeValidator(0, 65535, true, true))
{noformat}
allows 0.

IMPLEMENTATION

{noformat}
    public Integer getAbsoluteSourcePort() {
        if (this.sourcePort == null) {
            return null;
        }
        if (this.fixedSourcePort) {
            return this.sourcePort;
        }
        final int portOffset = this.socketBindingManager.getPortOffset();
        return this.sourcePort + portOffset;
    }
{noformat}
doesn't treat 0 at all, tests for null value only.


Example to reproduce e.g. with modcluster integration in core:

{noformat}
[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=proxy1:add(port=9090,host=127.0.0.1,source-port=0
{
    ""outcome"" => ""success"",
    ""response-headers"" => {""process-state"" => ""reload-required""}
}
[standalone@localhost:9990 /] /subsystem=modcluster/mod-cluster-config=configuration:write-attribute(name=proxies,value=[proxy1])
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
[standalone@localhost:9990 /] :reload
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}
{noformat}

Starting server with 
{noformat}
-Djboss.socket.binding.port-offset=100
{noformat}

yields

{noformat}
20:15:40,471 ERROR [org.jboss.modcluster] (UndertowEventHandlerAdapter - 1) MODCLUSTER000043: Failed to send INFO command to localhost/127.0.0.1:9090: Permission denied (Bind failed)
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1975,,,,,,0.0,1.0,,1|i0at2f:,9223372036854775807,,,,,,,,,,,21/Nov/16 3:00 PM;rhusar;This is also affecting messaging org.wildfly.extension.messaging.activemq.ActiveMQServerService#start.,,,,,,,,,,,,,,,,,,,,,,,,,,
(7.0.z) Log viewer does not show any log file for rpm installation,WFCORE-2023,12662672,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,baranowb,baranowb,21/Nov/16 5:30 AM,29/Nov/16 3:31 PM,29/Nov/16 3:50 PM,,,,,,,,3.0.0.Alpha14,,Logging,,,,,0,,,,,,"I'm running a fresh RHEL7.3 server subscribed to the current jboss eap7 repository [1] using the rpm package. [2]

[1] subscription-manager repos --enable=jb-eap-7-for-rhel-RHEL_VERSION-server-rpms
[2] https://access.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/installation-guide/#rpm_installation",,,,,,,,,,,,,,,,WFCORE-1976,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1940,,,,,,0.0,0.0,,1|i0art3:,9223372036854775807,,,,"- Removed the group: # yum groupremove jboss-eap7
- Removed remaining eap7* rpms: # yum remove ea
- Deleted the directories with remaining config files: /etc/opt/rh/eap7 and /var/opt/rh/eap7
- Reinstalled the group: # yum groupinstall jboss-eap7
- Started the service in standalone mode.
- Created an admin user with EAP_HOME/bin/add-user.sh script.

The behaviour is the same no log files in management console.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can not invoke read-resource-description on multi target address with a resource named server.,WFCORE-2022,12662649,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jmesnil,jmesnil,jmesnil,21/Nov/16 4:29 AM,21/Nov/16 5:36 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha12,,,,,,,,Domain Management,,,,,0,,,,,,"To reproduce, invoke:

{noformat}
/subsystem=undertow/server=*/http-listener=*:read-resource-description
{
    ""outcome"" => ""failed"",
    ""result"" => [],
    ""failure-description"" => ""WFLYCTL0030: No resource definition is registered for address [
    (\""subsystem\"" => \""undertow\""),
    (\""server\"" => \""*\"")
]"",
    ""rolled-back"" => true
}
{noformat}

The address is valid but the operation fails at org.jboss.as.controller.operations.global.GlobalOperationHandlers.RegistrationAddressResolver#executeMultiTargetChildren when checking the condition:

{noformat}
 if (path.getKey().equals(RUNNING_SERVER) && path.isWildcard() && newRemaining.size() > 0)
{noformat}

The check was added for WFCORE-948 but makes any multi target operation with a server resource fails (such as Undertow server or messaging-activemq server resources).
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1972,,,,,,0.0,1.0,,1|i0arof:,9223372036854775807,,,,,,,,,,,21/Nov/16 5:36 AM;jmesnil;PR for master branch,,,,,,,,,,,,,,,,,,,,,,,,,,
"""ls /socket-binding-group=*"" should print proper error message",WFCORE-2021,12662631,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,soul2zimate,soul2zimate,soul2zimate,21/Nov/16 3:50 AM,21/Nov/16 4:54 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha12,,,,,,,,CLI,,,,,0,,,,,,"""ls /socket-binding-group=*"" should print proper error message. Similar operation ""ls /subsystem=*"" print good error message.

{noformat}
[standalone@localhost:9990 /] ls /subsystem=*
{""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0030: No resource definition is registered for address [(\""subsystem\"" => \""*\"")]""}}
[standalone@localhost:9990 /] ls /socket-binding-group=*
Exception for ls /socket-binding-group=*: java.lang.IllegalArgumentException
[standalone@localhost:9990 /]
{noformat}",,,,,,,,,,,,,,,,JBEAP-6953,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1971,,,,,,0.0,1.0,,1|i0arkn:,9223372036854775807,,,,,,,,,,,"21/Nov/16 4:53 AM;soul2zimate;IllegalArgumentException is due to resource result conversion ""resourceResult.asPropertyList();"" fails in [LsHandler.java|https://github.com/wildfly/wildfly-core/blob/master/cli/src/main/java/org/jboss/as/cli/handlers/LsHandler.java]
result below can not and should not be convert to list: 
{noformat}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""step-1"" => {
            ""outcome"" => ""success"",
            ""result"" => [
                ""local-destination-outbound-socket-binding"",
                ""remote-destination-outbound-socket-binding"",
                ""socket-binding""
            ]
        },
        ""step-2"" => {
            ""outcome"" => ""success"",
            ""result"" => [{
                ""address"" => [(""socket-binding-group"" => ""standard-sockets"")],
                ""outcome"" => ""success"",
                ""result"" => {
                    ""default-interface"" => ""public"",
                    ""name"" => ""standard-sockets"",
                    ""port-offset"" => expression ""${jboss.socket.binding.port-offset:0}"",
                    ""local-destination-outbound-socket-binding"" => undefined,
                    ""remote-destination-outbound-socket-binding"" => {""mail-smtp"" => undefined},
                    ""socket-binding"" => {
                        ""management-http"" => undefined,
                        ""management-https"" => undefined,
                        ""ajp"" => undefined,
                        ""http"" => undefined,
                        ""https"" => undefined,
                        ""txn-recovery-environment"" => undefined,
                        ""txn-status-manager"" => undefined
                    }
                }
            }]
        }
    }
}
{noformat}

The error message can be more informative by providing command parameter.

But it's not like failure description of command: ls /subsystem=* . which fails due to _registry_ is null in [ReadChildrenTypesHandler.java|https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/ReadChildrenTypesHandler.java] since there is no ""concrete"" resource inside that address.",,,,,,,,,,,,,,,,,,,,,,,,,,
embed-server does not start with standalone-elytron.xml,WFCORE-2017,12661613,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,mchoma,mchoma,15/Nov/16 2:40 AM,22/Nov/16 6:55 PM,29/Nov/16 3:50 PM,22/Nov/16 6:55 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,CLI,Security,,,,0,,,,,,"I am unable to start embed-server with standalone-elytron.xml 
1){{./jboss-cli.sh}}
2) {{embed-server --std-out=echo -c=standalone-elytron.xml}}
3) server is missing org.wildfly.security.security-domain.ManagementDomain, which is however registered in elytron subsystem.

Starting {{./standalone.sh -c=standalone-elytron.xml}} works fine.

Full log:
{code}
[mchoma@localhost bin]$ ./jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server --std-out=echo -c=standalone-elytron.xml
08:15:40,801 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.6.0.Beta3
08:15:40,845 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.7.Final-redhat-1
08:15:40,916 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: JBoss EAP 7.1.0.Alpha1 (WildFly Core 3.0.0.Alpha12-redhat-1) starting
08:15:41,088 INFO  [org.jboss.as.domain.management] (MSC service thread 1-5) WFLYDM0136: Registered OpenSSL provider
08:15:41,804 INFO  [org.wildfly.security] (Controller Boot Thread) ELY00001: WildFly Elytron version 1.1.0.Beta13
08:15:41,805 INFO  [org.wildfly.extension.elytron] (Controller Boot Thread) WFLYELY00001: Activating Elytron Subsystem Elytron Version=1.1.0.Beta13, Subsystem Version=1.0.0.Alpha13
08:15:41,811 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'security-realm' in the resource at address '/subsystem=undertow/server=default-server/https-listener=https' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
08:15:41,859 INFO  [org.jboss.as.patching] (MSC service thread 1-6) WFLYPAT0050: JBoss EAP cumulative patch ID is: base, one-off patches include: none
08:15:42,024 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""access"" => ""identity"")
]) - failure description: {
    ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.security.security-domain.ManagementDomain""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""org.wildfly.management.identity is missing [org.wildfly.security.security-domain.ManagementDomain]""]
}
08:16:19,546 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: JBoss EAP 7.1.0.Alpha1 (WildFly Core 3.0.0.Alpha12-redhat-1) stopped in 3ms
Cannot start embedded server: WFLYEMB0021: Cannot start embedded process: java.lang.InterruptedException
[disconnected /] 
{code}
",,,,,,,,,,,,,,,,JBEAP-7276,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1969,,,,,,0.0,1.0,,1|i0aly7:,9223372036854775807,,,,,,,,,,,"18/Nov/16 2:04 PM;dlofthouse;Looks fairly trivial, just need to correct the requiresRuntime for the AccessIdentityResourceDefinition add handler.",,,,,,,,,,,,,,,,,,,,,,,,,,
"Change sasl-authentication-factor for management auth works after reload, but not after server restart",WFCORE-2016,12662507,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dlofthouse,zrhoads,zrhoads,18/Nov/16 11:21 AM,18/Nov/16 11:22 AM,29/Nov/16 3:50 PM,,,,,,,,,,,,,,,0,,,,,,"I can successfully configure a new sasl-authentication-factory and assign it to the management interface:

{code}
/subsystem=elytron/filesystem-realm=exampleFsRealm:add(path=fs-realm-users,relative-to=jboss.server.config.dir)
/subsystem=elytron/filesystem-realm=exampleFsRealm/identity=user1:add()
/subsystem=elytron/filesystem-realm=exampleFsRealm/identity=user1:set-password(clear={password=""password123""})
/subsystem=elytron/filesystem-realm=exampleFsRealm/identity=user1:add-attribute(name=Roles, value=[""Admin"",""Guest""])
/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)
/subsystem=elytron/security-domain=exampleFsSD:add(realms=[{realm=exampleFsRealm,role-decoder=from-roles-attribute}],default-realm=exampleFsRealm,permission-mapper=login-permission-mapper)

/subsystem=elytron/sasl-authentication-factory=example-sasl-auth:add(sasl-server-factory=configured,security-domain=exampleFsSD,mechanism-configurations=[{mechanism-name=DIGEST-MD5,mechanism-realm-configurations=[{realm-name=exampleSaslRealm}]}])

/core-service=management/management-interface=http-interface:write-attribute(name=http-upgrade.sasl-authentication-factory, value=example-sasl-auth)

reload
{code}

after reload, i am forced to re-authenticate and it succeeds:
{code}
[standalone@localhost:9990 /] reload
Authenticating against security realm: exampleSaslRealm
Username: user1
Password:
[standalone@localhost:9990 /]
{code}

Once i restart the server though and try to connect, i get a timeout:

{code}
$ ./jboss-cli.sh -c
Failed to connect to the controller: The controller is not available at localhost:9990: java.net.ConnectException: WFLYPRT0023: Could not connect to remote+http://localhost:9990. The connection timed out: WFLYPRT0023: Could not connect to remote+http://localhost:9990. The connection timed out
{code}

It also fails if i force no local auth:

{code}
$ ./jboss-cli.sh -c --no-local-auth
Failed to connect to the controller: The controller is not available at localhost:9990: java.net.ConnectException: WFLYPRT0023: Could not connect to remote+http://localhost:9990. The connection timed out: WFLYPRT0023: Could not connect to remote+http://localhost:9990. The connection timed out
{code}/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0aqsn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI is unable to connect to WildFly management interfaces with undefined security-realm,WFCORE-2015,12662454,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,mkopecky,mkopecky,18/Nov/16 8:31 AM,18/Nov/16 12:01 PM,29/Nov/16 3:50 PM,18/Nov/16 12:01 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,CLI,Domain Management,Security,,,0,,,,,,"*Description of problem:*
CLI is unable to connect to EAP with undefined security-realm

This is regression against EAP 7.0.0, 6.4.0 and 7.1.0.DR7.

*How reproducible:*
Always

*Steps to Reproduce:*
# /core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)
# reload

*Actual results:*
{noformat}
[mkopecky@dhcp-10-40-4-180 bin]$ ./jboss-cli.sh -c
[standalone@localhost:9990 /] /core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
[standalone@localhost:9990 /] reload
Interrupted while pausing before reconnecting.: sleep interrupted
[disconnected /] 
[mkopecky@dhcp-10-40-4-180 bin]$ ./jboss-cli.sh -c
Failed to connect to the controller: Unable to authenticate against controller at localhost:9990: Authentication failed: none of the mechanisms presented by the server are supported
[mkopecky@dhcp-10-40-4-180 bin]$ 
{noformat}",,,,,,,,,,,,,,,,JBEAP-7398,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1966,,,,,,0.0,0.0,,1|i0aqh3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to access http management interface secured by legacy ldap realm,WFCORE-2013,12662338,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,mchoma,mchoma,18/Nov/16 4:47 AM,18/Nov/16 12:03 PM,29/Nov/16 3:50 PM,18/Nov/16 12:03 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Security,,,,,0,,,,,,"When http management interface is secured with legacy security realm using ldap, user is not prompted to provide credentials as should be in case of BASIC http authentication mechanism. Instead {{403}} http status is returned directly.

Users won't be able to migrate their current (6.4, 7.0) configuration to 7.1 without change.",,,,,,,,,,,,,,,,JBEAP-7393,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1965,,,,,,0.0,0.0,,1|i0aq7r:,9223372036854775807,,,,"1) Start server
{code}
./standalone.sh
{code}
2) Configure server with CLI
{code}
/core-service=management/ldap-connection=ldapConnection:add(url=""ldap://localhost:10389"", search-credential=""secret"", search-dn=""uid=admin,ou=system"")
/core-service=management/security-realm=ldap-realm:add()
/core-service=management/security-realm=ldap-realm/authentication=ldap:add(connection=ldapConnection, base-dn=""ou=People,dc=jboss,dc=org"", username-attribute=uid)
/core-service=management/management-interface=http-interface:write-attribute(name=security-realm, value=ldap-realm)
reload
{code}
3) Access http://localhost:9990/management?operation=attribute&name=server-state in browser
4) Instead of {{401}} status code and authentication dialog box, {{403}} is return as response, so user have no chance to provide credentials.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Management SSL Configuration always requires Security Realm,WFCORE-2009,12662280,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,zrhoads,zrhoads,17/Nov/16 3:50 PM,22/Nov/16 6:53 PM,29/Nov/16 3:50 PM,22/Nov/16 6:53 PM,,,,,,,3.0.0.Alpha13,,,,,,,0,,,,,,"When configuring SSL/TLS for the management interfaces, you need to specify an (ssl-context or security-realm) and secure-socket-binding. When using ssl-context and secure-socket-binding, it fails with:

{code}
""WFLYCTL0380: Attribute 'security-realm' needs to be set or passed before attribute 'secure-socket-binding' can be correctly set""
{code}

failing operations:


{code:java}
batch

/subsystem=elytron/key-store=httpsKS:add(path=keystore.jks,relative-to=jboss.server.config.dir,credential-reference={clear-text=secret},type=JKS)

/subsystem=elytron/key-managers=httpsKM:add(key-store=httpsKS,algorithm=""SunX509"",credential-reference={clear-text=secret})

/subsystem=elytron/server-ssl-context=httpsSSC:add(key-managers=httpsKM,protocols=[""TLSv1.1""])

/core-service=management/management-interface=http-interface:write-attribute(name=ssl-context, value=httpsSSC)

/core-service=management/management-interface=http-interface:write-attribute(name=secure-socket-binding, value=management-https)

run-batch

reload
{code}


Oddly, this will pass (specifying BOTH ssl-context and security-realm):


{code:java}
batch

/subsystem=elytron/key-store=httpsKS:add(path=keystore.jks,relative-to=jboss.server.config.dir,credential-reference={clear-text=secret},type=JKS)

/subsystem=elytron/key-managers=httpsKM:add(key-store=httpsKS,algorithm=""SunX509"",credential-reference={clear-text=secret})

/subsystem=elytron/server-ssl-context=httpsSSC:add(key-managers=httpsKM,protocols=[""TLSv1.1""])

/core-service=management/management-interface=http-interface:write-attribute(name=ssl-context, value=httpsSSC)

/core-service=management/management-interface=http-interface:write-attribute(name=security-realm, value=ManagementDomain)

/core-service=management/management-interface=http-interface:write-attribute(name=secure-socket-binding, value=management-https)

run-batch

reload
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1968,,,,,,0.0,0.0,,1|i0apv3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to use path in input-stream-index argument in /core-service=patching:patch,WFCORE-2008,12662228,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,17/Nov/16 9:07 AM,18/Nov/16 2:40 PM,29/Nov/16 3:50 PM,18/Nov/16 2:40 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Patching ,,,,,0,,,,,,"File system paths should be allowed as arguments for
/core-service=patching:patch(input-stream-index=)",,,,,,,,,,,,,,,,JBEAP-7116,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1963,,,,,,0.0,0.0,,1|i0apl3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
standalone.sh fails to backup gc.log.#.current file silently.,WFCORE-2007,12662225,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,gaol,gaol,gaol,17/Nov/16 8:54 AM,17/Nov/16 9:40 AM,29/Nov/16 3:50 PM,,,,,,,,,,Scripts,,,,,0,downstream_dependency,,,,,"gc.log.*.current enclosed with double quotes in the following line (line 265) in standalone.sh is not evaluated as a wildcard by bash,
{code:java}
mv ""$JBOSS_LOG_DIR/gc.log.*.current"" ""$JBOSS_LOG_DIR/backupgc.log.current"" >/dev/null 2>&1
{code}
therefore standalone.sh fails to move an existing gc.log.<number>.current file to backupgc.log.current silently.","* Red Hat Enterprise Linux
* This problem occurs on JBoss EAP 7.0.0.GA and later, but does not occur on EAP 6.4.x.",,,,,,,,,,,,,,,JBEAP-6967,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1962,,,,,,0.0,0.0,,1|i0apkf:,9223372036854775807,,,,"# Get rid of "">/dev/null"" from line 265 in standalone.sh.
# Run standalone.sh for creating $JBOSS_LOG_DIR/gc.log.0.current file. Please ignore ""No such file or directory"" message (*1) printed out to the console at this time.
# Stop the server by Ctrl-C.
# Run standalone.sh again. The message (*1) will still be printed out to the console. The error (*1) at this time should not occur.

Error message (*1)
{code:java}
mv: cannot stat `/path/to/standalone/log/gc.log.*.current': No such file or directory
{code}
",,,,,Workaround Exists,"Modify line 265 in standalone.sh as below:

{code:java}
265c265
<         mv ""$JBOSS_LOG_DIR/gc.log.*.current"" ""$JBOSS_LOG_DIR/backupgc.log.current"" >/dev/null 2>&1
---
>         mv ""$JBOSS_LOG_DIR""/gc.log.*.current ""$JBOSS_LOG_DIR/backupgc.log.current"" >/dev/null 2>&1
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,
PatchMerger should copy specific module slot when merging content instead of all the slots,WFCORE-2006,12662223,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,17/Nov/16 8:37 AM,17/Nov/16 5:28 PM,29/Nov/16 3:50 PM,17/Nov/16 5:28 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Patching ,,,,,0,,,,,,PatchMerger when merging content modification for a module copies all of the module slots instead of the one actually modified. This may lead to undesired content overwrite.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1961,,,,,,0.0,0.0,,1|i0apjz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tab completion don't work in deploy operation if '~' is used,WFCORE-2005,12662197,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jdenise,jdenise,jdenise,17/Nov/16 5:41 AM,18/Nov/16 1:07 PM,29/Nov/16 3:50 PM,,,,,,,,,,CLI,,,,,0,,,,,,"Completion doesn't work properly for:
- ~XXX
- quoted paths
- paths that contain escaped white spaces
",,,,,,,,,,,,,,,,JBEAP-7077,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1967,,,,,,0.0,0.0,,1|i0apef:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI don't use ""~"" character correctly in --file attribute",WFCORE-2002,12662126,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,16/Nov/16 12:56 PM,18/Nov/16 2:39 PM,29/Nov/16 3:50 PM,18/Nov/16 2:39 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,"All file options are impacted --file and --properties
",,,,,,,,,,,,,,,,JBEAP-7069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1960,,,,,,0.0,0.0,,1|i0aoz3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Custom NameService by sun.net.spi.nameservice.provider.n doesn't work on WildFly,WFCORE-1998,12655844,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,osamu.nagano,osamu.nagano,osamu.nagano,20/Oct/16 5:05 AM,22/Nov/16 2:12 PM,29/Nov/16 3:50 PM,19/Nov/16 8:09 AM,2.2.0.Final,,,,,,3.0.0.Alpha13,,Modules,,,,,0,downstream_dependency,,,,,"System property {{sun.net.spi.nameservice.provider.<n>}} allows a user to customize a NameService. It works on a standalone java, which is using JBoss Modules, if {{services=""import""}} is added on sun.jdk module dependency and the sun.jdk module has the following additional dependencies.

{code}
                <path name=""sun/net/spi/nameservice""/>
                <path name=""sun/net/spi/nameservice/dns""/>
{code}

Though it doesn't work as a web application which has the same module path and the same dependency in jboss-deployment-structure.xml.",,,,,,,,,,,,,,,,,,,,,,,,,,,20/Oct/16 5:03 AM;osamu.nagano;nameserviceProviderTest.zip;https://issues.jboss.org/secure/attachment/12410920/nameserviceProviderTest.zip,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1955,,,,,,1.0,6.0,,1|i09vaf:,9223372036854775807,,,,"Run the test.sh which is a standalone module application.
{code}
$ unzip nameserviceProviderTest.zip;
$ cd nameserviceProviderTest
$ JBOSS_HOME=~/java/wildfly-10.1.0.Final ./test.sh
17:53:58,131 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
*** MyNameService.lookupAllHostAddr called
{code}
""{{*** MyNameService.lookupAllHostAddr called}}"" is printed in stdout if the custom NameService has been enabled.

On WildFly, define a system property in standalone.conf:
{code}
   JAVA_OPTS=""$JAVA_OPTS -Dsun.net.spi.nameservice.provider.1=dns,MyNameService""
{code}
And prepend the new module path in standalone.sh:
{code}
    JBOSS_MODULEPATH=""/path/to/nameserviceProviderTest/modules:$JBOSS_HOME/modules""
{code}
Then deploy the testweb.war in the archive and access {{http://localhost:8080/testweb/test.jsp}}. The message is not printed in stdout.",,,,,,,"01/Nov/16 11:17 AM;dmlloyd;If someone wants to give a patch to add those two paths, it would be accepted.  But this API isn't really supported by us in any capacity, and furthermore, it is being removed from Java in Java 9.  I suspect that you may have to use the boot classpath to make the provider work, but I'm not 100% sure.  It may use TCCL in which case a module may work.","16/Nov/16 12:31 AM;osamu.nagano;I found the TCCL is ModuleClassLoader of ""org.jboss.as.server:main"". The name service class is loaded at boot time in an MSC thread. So jboss-deployment-structure.xml is not required but these 2 modules need to be modified.

{code:title=$JBOSS_HOME/modules/**/org/jboss/as/server/main/module.xml}
  <module name=""sun.jdk"" services=""export"" export=""true""/>
{code}

{code:title=$JBOSS_HOME/modules/**/sun/jdk/main/module.xml}
  <resource-root path=""your_impl.jar""/>
  ...
  <path name=""sun/net/spi/nameservice""/>
  <path name=""sun/net/spi/nameservice/dns""/>
{code}","16/Nov/16 12:44 AM;jaikiran;{quote}
 I suspect that you may have to use the boot classpath to make the provider work, but I'm not 100% sure. It may use TCCL in which case a module may work.
{quote}

A while back someone had asked a similar question on how to get this working and when I had checked the code, I did notice it was using TCCL. More details about that here https://developer.jboss.org/message/962941#962941
",16/Nov/16 2:09 AM;osamu.nagano;Changed the project to WFCORE and sent a pull request. Also added a comment to the discussion.,21/Nov/16 8:26 AM;jira-bugzilla-migration;Petr Jurak <pjurak@redhat.com> changed the Status of [bug 1395543|https://bugzilla.redhat.com/show_bug.cgi?id=1395543] from ASSIGNED to POST,22/Nov/16 2:12 PM;jira-bugzilla-migration;Osamu Nagano <onagano@redhat.com> changed the Status of [bug 1395543|https://bugzilla.redhat.com/show_bug.cgi?id=1395543] from ASSIGNED to POST,,,,,,,,,,,,,,,,,,,,,
NPE when non-existent attribute name is used for list-add operation,WFCORE-1997,12661943,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,15/Nov/16 10:11 PM,17/Nov/16 5:26 PM,29/Nov/16 3:50 PM,17/Nov/16 5:26 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"When I use non-existent attribute name for 'list-add' operation, I get following NPE in server.log:
{code}
12:44:24,150 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 10) WFLYCTL0013: Operation (""list-add"") failed - address: ([
    (""subsystem"" => ""undertow""),
    (""server"" => ""default-server""),
    (""https-listener"" => ""https"")
]): java.lang.NullPointerException
	at org.jboss.as.controller.operations.global.AbstractCollectionHandler.execute(AbstractCollectionHandler.java:92)
	at org.jboss.as.controller.operations.global.ListOperations$ListAddHandler.execute(ListOperations.java:108)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:921)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:664)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:383)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1364)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:416)
	at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:237)
	at org.wildfly.security.auth.client.PeerIdentity.runAsAll(PeerIdentity.java:431)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:206)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:237)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:217)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:137)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:161)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.wildfly.security.auth.client.PeerIdentity.runAsAll(PeerIdentity.java:464)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:225)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:185)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

Yeah - I understand that it is my fault that I provided bad command. But still, server should not respond with NPE. Ideally it should told me that provided list attribute does not exist for particular element and should finish operation with error.",,,,,,,,,,,,,,,,JBEAP-7110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1954,,,,,,0.0,1.0,,1|i0anvj:,9223372036854775807,,,,"# unzip EAP
# {{./bin/standalone.sh}}
# {{./bin/jboss-cli.sh -c}}
# e.g.: {{/subsystem=undertow/server=default-server/https-listener=https:list-add(name=non-existent)}}
# see NPE log in server.log",,,,,,,15/Nov/16 10:17 PM;soul2zimate;AbstractCollectionHandler.execute() incorrectly assumes that it defines AttributeAccess during resource definition. I think it's there for later comparison with ModelType.LIST inside updateModel().,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractRemoveStepHandler can endlessly loop if a child doesn't remove,WFCORE-1996,12661940,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,15/Nov/16 9:40 PM,17/Nov/16 5:25 PM,29/Nov/16 3:50 PM,17/Nov/16 5:25 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"See PR for WFLY-2640 for an example of a resource that doesn't get removed by a remove call.

In a situation like that, the AbstractRemoveStepHandler performRemove logic will never remove the resource, because it always finds it has the child. So it will just loop trying to remove the child and then calling itself again.

Possible solution is for AbstractRemoveStepHandler to have its own AttachmentKey<Set<PathAddress>> and before adding itself in a step, it adds its address to the set. Then if performRemove finds itself in the set it knows it's already tried to remove children and just removes itself.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1953,,,,,,0.0,0.0,,1|i0anuv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logging MBean not available in platform-mbean core service,WFCORE-1993,12661867,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,pjelinek,brian.stansberry,15/Nov/16 11:36 AM,22/Nov/16 6:51 PM,29/Nov/16 3:50 PM,22/Nov/16 6:51 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"{code}
/core-service=platform-mbean:read-resource-description 
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""description"" => ""Provides the management interface for monitoring and management of the Java virtual machine as well as the operating system on which the Java virtual machine is running. Exposes the JDK-provided JMX MBeans in the java.lang, java.nio and java.util.logging JMX domains."", ...
{code}
but java.util.logging JMX domain is not available in this service.
Not exposing those mbeans is deliberate, so change the description.",,,,,,,,,,,,,,,,JBEAP-7014,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1949,,,,,,0.0,1.0,,1|i0anf3:,9223372036854775807,,,,,,,,pjelinek,,,15/Nov/16 11:43 AM;brian.stansberry;See AS7-2185 for more on why these mbeans are not exposed.,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI inconsistently parse {} in another object as UNDEFINED,WFCORE-1992,12661808,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,honza889,honza889,15/Nov/16 9:35 AM,17/Nov/16 5:27 PM,29/Nov/16 3:50 PM,17/Nov/16 5:27 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,"CLI interprets {} as blank object in resource attribute (correct), but as UNDEFINED in object attribute. (in model parameter of *performRuntime* of ADD operation)

{code:java}
/subsystem=elytron/properties-realm=realm:add(users-properties={path=$SOME_PATH},groups-properties={})
=> groups-properties = OBJECT {}
{code}

{code:java}
/subsystem=elytron/ldap-realm=ldap-realm8:add(dir-context=local-ldap,identity-mapping={rdn-identifier=uid,otp-credential-mapper={}})
=> otp-credential-mapper=UNDEFINED
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1958,,,,,,0.0,1.0,,1|i0an2f:,9223372036854775807,,,,see WFLY-7437,,,,,,,"16/Nov/16 4:53 AM;jdenise;That is a bug in the custom parser that is in use for non DMR syntax. identity-mapping={rdn-identifier=uid,otp-credential-mapper={}} is not DMR although groups-properties={} is DMR.
",,,,,,,,,,,,,,,,,,,,,,,,,,
DomainSlaveHandler is improperly manipulating operation during transformation,WFCORE-1989,12661743,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,15/Nov/16 7:15 AM,15/Nov/16 5:40 PM,29/Nov/16 3:50 PM,15/Nov/16 5:40 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"DomainSlaveHandler takes the 'operation' model node passed in as a param and for each host it will call performs transformation on it. Problem is those transformations are all being performed on the same model node, not on host-specific clones of it. So the transformation for the second host is working on the result of the first host, etc.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0amnz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
/host-exclude=XX:add(management-minor-version=1) produces java.lang.IllegalArgumentException,WFCORE-1988,12661735,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,Takis,Takis,Takis,15/Nov/16 6:41 AM,15/Nov/16 5:39 PM,29/Nov/16 3:50 PM,15/Nov/16 5:39 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"{code:java}
/host-exclude=XX:add(management-minor-version=2)
{code}
produces
{code:java}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException""},
    ""rolled-back"" => true
}
{code}
which is not sufficient

operation description:
{code:java}
/host-exclude=XX:read-operation-description(name=add)

...
            ""management-major-version"" => {
                ""type"" => INT,
                ""description"" => ""The major version of the kernel management API that is supported by slaves that should be affected by this configuration."",
                ""expressions-allowed"" => false,
                ""required"" => false,
                ""nillable"" => true,
                ""alternatives"" => [""host-release""],
                ""requires"" => [""management-minor-version""]
            },
            ""management-micro-version"" => {
                ""type"" => INT,
                ""description"" => ""The micro version of the kernel management API that is supported by slaves that should be affected by this configuration. If not defined, this configuration applies to all releases of the given major/minor version, excluding any for which a different configuration with a micro version also specified is present."",
                ""expressions-allowed"" => false,
                ""required"" => false,
                ""nillable"" => true,
                ""alternatives"" => [""host-release""],
                ""requires"" => [
                    ""management-major-version"",
                    ""management-minor-version""
                ]
            },
            ""management-minor-version"" => {
                ""type"" => INT,
                ""description"" => ""The minor version of the kernel management API that is supported by slaves that should be affected by this configuration."",
                ""expressions-allowed"" => false,
                ""required"" => false,
                ""nillable"" => true,
                ""alternatives"" => [""host-release""]
            }

{code}

Proposed solution:
make management-minor-version require management-major-version
",,,,,,,,,,,,,,,,JBEAP-7113,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1945,,,,,,0.0,0.0,,1|i0ammf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to define specific worker when using http-upgrade,WFCORE-1987,12661633,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dmlloyd,rhatlapa,rhatlapa,15/Nov/16 3:51 AM,29/Nov/16 8:57 AM,29/Nov/16 3:50 PM,,,,,,,,,,Remoting,,,,,0,downstream_dependency,,,,,"In EAP 7.0.0, there was possible to define different worker for Undertow listener and Remoting.
Now it is not possible and results in \[1\].
The need for having the same XNIO worker used for both Remoting endpoint and Undertow listener used for the http-upgrade should be exposed when doing the configuration changes, either it should be allowed or proper warning shown (at least having it documented in both descriptions and in documentation, including the migration guide), for user to know that such configuration can result in not working remoting calls.

Note, this change in behaviour was introduced when upgrading to XNIO 3.4.0.Final. This might seem as backward compatibility issue from customer as his original configuration working with EAP 7.0.0 will stop working.

\[1\]
{noformat}
08:57:12,014 ERROR [org.xnio.listener] (xxx I/O-4) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)
	at io.undertow.server.protocol.http.HttpReadListener.exchangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at Automaticio.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkChannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)

08:57:16,995 ERROR [org.xnio.listener] (xxx I/O-2) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)
	at io.undertow.server.protocol.http.HttpReadListener.exchangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkC08:57:12,014 ERROR [org.xnio.listener] (xxx I/O-4) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)08:57:12,014 ERROR [org.xnio.listener] (xxx I/O-4) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)
	at io.undertow.server.protocol.http.HttpReadListener.exchangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkChannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)

08:57:16,995 ERROR [org.xnio.listener] (xxx I/O-2) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)
	at io.undertow.server.protocol.http.HttpReadListener.exchangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkChannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)


	at io.undertow.server.protocol.http.HttpReadListener.exchangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkChannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelAutomaticAutomaticListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)

08:57:16,995 ERROR [org.xnio.listener] (xxx I/O-2) XNIO001007: A channel event listener threw an exception: java.lang.IllegalArgumentException: JBREM000211: Invalid XNIO worker; the worker must match the Remoting Endpoint worker
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:196)
	at org.jboss.remoting3.remote.HttpUpgradeConnectionProvider$ConnectionAdaptorImpl.accept(HttpUpgradeConnectionProvider.java:184)Automatic
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:179)
	at org.jboss.as.remoting.RemotingHttpUpgradeService$1.handleEvent(RemotingHttpUpgradeService.java:176)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at io.undertow.server.handlers.ChannelUpgradeHandler$1.handleUpgrade(ChannelUpgradeHandler.java:79)
	at io.undertow.server.protocol.http.HttpReadListener.excAutomatichangeComplete(HttpReadListener.java:372)
	at io.undertow.server.protocol.http.HttpServerConnection.exchangeComplete(HttpServerConnection.java:232)
	at io.undertow.server.HttpServerExchange.invokeExchangeCompleteListeners(HttpServerExchange.java:1247)
	at io.undertow.server.HttpServerExchange.terminateResponse(HttpServerExchange.java:1524)
	at io.undertow.server.Connectors.terminateResponse(Connectors.java:100)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:197)
	at io.undertow.server.protocol.http.HttpTransferEncoding$3.handleEvent(HttpTransferEncoding.java:195)
	at io.undertow.conduits.HeadStreamSinkConduit.exitFlush(HeadStreamSinkConduit.java:192)
	at io.undertow.conduits.HeadStreamSinkConduit.flush(HeadStreamSinkConduit.java:133)
	at org.xnio.conduits.ConduitStreamSinkChannel.flush(ConduitStreamSinkChannel.java:162)
	at io.undertow.channels.DetachableStreamSinkChannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListeAutomaticner(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)

hannel.flush(DetachableStreamSinkChannel.java:119)
	at io.undertow.server.HttpServerExchange.closeAndFlushResponse(HttpServerExchange.java:1673)
	at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1651)
	at io.undertow.server.handlers.ChannelUpgradeHandler.handleRequest(ChannelUpgradeHandler.java:205)
	at io.undertow.server.protocol.http2.Http2UpgradeHandler.handleRequest(Http2UpgradeHandler.java:95)
	at io.undertow.server.handlers.DisallowedMethodsHandler.handleRequest(DisallowedMethodsHandler.java:61)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:243)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:134)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:148)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:92)
	at io.undertow.server.protocol.http.HttpOpenListener.handleEvent(HttpOpenListener.java:51)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:291)
	at org.xnio.ChannelListeners$10.handleEvent(ChannelListeners.java:286)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.nio.QueuedNioTcpServer$1.run(QueuedNioTcpServer.java:129)
	at org.xnio.nio.WorkerThread.safeRun(WorkerThread.java:588)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:468)

{noformat}",,,,,,,,,,,,,,,,JBEAP-7284,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0am27:,9223372036854775807,,,,"# create new worker under io subsystem
# change worker for http-listener
# deploy application containing remote ejb
# remotely invoke the ejb using ejb client.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
:read-resource-description operation should consistently order resources by alphabet,WFCORE-1985,12661577,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,mjurc,brian.stansberry,14/Nov/16 6:25 PM,15/Nov/16 9:54 AM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"While {{:read-resource-description}} returns an ordered list of resources with their descriptions for most resources, some resources do not return result consistent with this (resources ordered by alphabet).

Affected resources:
* {{/subsystem=iiop-openjdk:read-resource-description()}} returns unordered list of resources and their descriptions, while {{/subsystem=iiop-openjdk:read-resource()}} returns ordered list",,,,,,,,,,,,,,,,JBEAP-6861,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,7.0,,1|i0alqf:,9223372036854775807,,,,,,,,,,,"14/Nov/16 6:27 PM;brian.stansberry;My assumption here is this is a simple matter of ordering in the RRD handler. If that's wrong, let me know.","14/Nov/16 7:53 PM;luck3y;This appears to be due to AttributeDefinition::NameAndGroup sorting by group name, then attribute using compareTo().

For the IIOP config in particular, there are several different groups returned, ""as-context"", ""initializers"", ""tcp"" etc.

I'm not 100% certain these groups are correct in this case (they look fine to me though.) Should these all be in the IIOP group or something like that, or do we need to think about how NameAndGroup orders?","14/Nov/16 8:12 PM;brian.stansberry;Ok, let's leave this alone for now. NameAndGroup sorting is reasonable. It's a conscious grouping of related items. It's also consistent with how read-resource orders.","14/Nov/16 8:23 PM;luck3y;Well, I'm not sure exactly about ""consistent"" here, so just to be clear:

{{
[standalone@localhost:9990 /] /subsystem=iiop-openjdk:read-resource()

        ""add-component-via-interceptor"" => true,
        ""auth-method"" => ""username_password"",
        ""caller-propagation"" => ""none"",
        ""client-requires"" => ""None"",
        ""client-supports"" => ""MutualAuth"",
        ""confidentiality"" => ""none"",
        ""detect-misordering"" => ""none"",
        ""detect-replay"" => ""none"",
        ""export-corbaloc"" => true,
        ""giop-version"" => ""1.2"",
        ""high-water-mark"" => undefined,
        ""integrity"" => ""none"",
        ""number-to-reclaim"" => undefined,
        ""persistent-server-id"" => ""1"",
        ""properties"" => undefined,
        ""realm"" => undefined,
        ""required"" => false,
        ""root-context"" => ""JBoss/Naming/root"",
        ""security"" => ""identity"",
        ""security-domain"" => undefined,
        ""server-requires"" => ""None"",
        ""server-supports"" => ""MutualAuth"",
        ""socket-binding"" => ""iiop"",
        ""ssl-socket-binding"" => ""iiop-ssl"",
        ""support-ssl"" => false,
        ""transactions"" => ""spec"",
        ""trust-in-client"" => ""none"",
        ""trust-in-target"" => ""none""

[standalone@localhost:9990 /] /subsystem=iiop-openjdk:read-resource-description()
(snip for brevity)
""auth-method""
""realm""
""required""
""security"" 
""transactions""
""export-corbaloc""
""root-context""
""giop-version""
""persistent-server-id""
""socket-binding""
etc...
}}

Perhaps read-resource has an issue with NameAndGroup ordering, if the group-name one is correct?","14/Nov/16 8:50 PM;brian.stansberry;Interesting. NameAndGroup has two constructors, one that takes an AttributeDefinition, one that doesn't. The AD one incorporates the group if the AD has one. The constructor with the AD is not used, and only the name is used, if no AD is available. But I don't see why the AD would be available in the r-r-d case and not in the r-r case.","14/Nov/16 8:55 PM;luck3y;I guess the question is, do we want group-name for RRD here, or do we want group-name for RR vs what seems to be currently name? RR is using NameAndGroup, but I think it might be reordering the results into a TreeMap based just on name (I haven't looked at that super closely yet.)","15/Nov/16 9:54 AM;brian.stansberry;I prefer the sort simply by name, excluding group. But, we need to understand why we are getting the sorting we are seeing and then discuss what might change if we adjust things. Perhaps there is something about iiop that causes group to not matter to the r-r sorting, but it does matter elsewhere. We need to understand that.",,,,,,,,,,,,,,,,,,,,
Root cause of failing parsing should be used as failure description,WFCORE-1983,12661539,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,jdenise,jdenise,14/Nov/16 1:56 PM,16/Nov/16 9:41 AM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"It happens that the CLI does a custom parsing of the value in case ModelNode.fromString fails (whatever the exception).
The issue is that the custom parsing doesn't follow the ModelNode parsing syntax and parse everything as String. So the resulting ModelNode that is serialised and sent to the server has been transformed.

I am surprised that we don't have more of such failures. For example, when numbers are located inside custom complex structure such as: {mynumber=9999} that will be sent as an OBJECT containing a STRING although the valid DMR syntax {""my number""=>999} would be sent as an OBJECT containing an INT.

Some server side subsystems are smart enough to call into asXXX methods and not check the type?



",,,,,,,,,,,,,,,,JBEAP-6915,,,,,WFCORE-1992,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|i0alhz:,9223372036854775807,,,,,,,,,,,"14/Nov/16 2:09 PM;brian.stansberry;I'm not sure from the description what is getting sent to the server.

If it is:

{code}
{""mynumber""=>""9999""}
{code}

instead of: 

{code}
{""mynumber""=>9999}
{code}

then yes, the server will almost certainly deal with that kind of type conversion properly. The server knows the desired type of the field and will attempt simple conversion to move from what the client provides to what is specified.","15/Nov/16 4:20 AM;jdenise;Yes, a STRING instead of an INT. 
In the reported issue (JBEAP-6915), the write-attribute doesn't try to convert to a number but check for the right type and fails. So it seems that some operations are smart enough to adapt to the received value, others (such as write-attribute) expect the exact type.
",16/Nov/16 5:31 AM;jdenise;Another invalid conversion done by the custom parser.,"16/Nov/16 5:42 AM;jdenise;I have looked at the server side handling of arguments for the read-resource (ReadResourceHandler).
When the numbers or String are in range, aproper adaptation is made on the server side.
:read-resource(recursive-depth=""9""), :read-resource(recursive-depth=9L), :read-resource(recursive-depth=9.4), are property converted from STRING/LONG/DOUBLE to INT.

With an out of range value (:read-resource(recursive-depth=999999999999)). The cli converts the out of range depth to STRING and send the request.

The conversion to INT fails and the exception is swallowed in ModelTypeValidator.matches.

The server side should keep a reference to the last thrown exception and throw that instead of the generic type mismatch.



","16/Nov/16 9:41 AM;brian.stansberry;[~jdenise] Thanks for digging into this!

Please use ""Domain Management"" as the component for any server side management issues, unless the are subsystem-specific and there is a component for the subsystem, in which case you use that.
",,,,,,,,,,,,,,,,,,,,,,
CLI operations produce java.lang.IllegalArgumentException upon inputting wrong parameters,WFCORE-1982,12661484,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,14/Nov/16 11:21 AM,18/Nov/16 2:34 PM,29/Nov/16 3:50 PM,18/Nov/16 2:34 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-7068,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1942,,,,,,0.0,0.0,,1|i0al7b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Many deprecation warnings in wf-core code,WFCORE-1981,12661406,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ctomc,rsvoboda,rsvoboda,14/Nov/16 8:27 AM,14/Nov/16 11:14 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha12,,,,,,,,,,,,,0,,,,,,"There are many deprecation (281 atm) warnings in wf-core code.
List of detected deprecations attached.

updated summary {{mvn -fn clean install -Dmaven.test.skip=true -Dmaven.compiler.showDeprecation=true | tee ~/Downloads/wildfly-core-build-log.txt}}:
{code}
grep deprecated wildfly-core-build-log.txt | cut -d] -f3 | sort | uniq -c | sort -n -r
     92  org.jboss.as.controller.access.Caller in org.jboss.as.controller.access has been deprecated
     33  org.jboss.msc.service.ServiceListener in org.jboss.msc.service has been deprecated
     25  SimpleResourceDefinition(org.jboss.as.controller.PathElement,org.jboss.as.controller.descriptions.ResourceDescriptionResolver,org.jboss.as.controller.OperationStepHandler,org.jboss.as.controller.OperationStepHandler,org.jboss.as.controller.registry.OperationEntry.Flag,org.jboss.as.controller.registry.OperationEntry.Flag) in org.jboss.as.controller.SimpleResourceDefinition has been deprecated
     23  org.jboss.as.controller.CurrentOperationIdHolder in org.jboss.as.controller has been deprecated
     17  org.xnio.Pool in org.xnio has been deprecated
     16  org.jboss.as.server.mgmt.domain.ExtensibleHttpManagement in org.jboss.as.server.mgmt.domain has been deprecated
     16  org.jboss.as.server.ExternalManagementRequestExecutor in org.jboss.as.server has been deprecated
     12  org.jboss.as.controller.ServiceVerificationHandler in org.jboss.as.controller has been deprecated
     11  OPTIONAL in org.jboss.msc.service.ServiceBuilder.DependencyType has been deprecated
     10  org.xnio.ByteBufferSlicePool in org.xnio has been deprecated
      6  builder(org.jboss.as.controller.PersistentResourceDefinition) in org.jboss.as.controller.PersistentResourceXMLDescription has been deprecated
      5  SERVICE_NAME in org.wildfly.extension.requestcontroller.RequestController has been deprecated
      5  org.jboss.as.server.operations.ServerRestartRequiredHandler in org.jboss.as.server.operations has been deprecated
      5  org.jboss.as.domain.http.server.security.RealmIdentityManager in org.jboss.as.domain.http.server.security has been deprecated
      4  removePropertyChangeListener(java.beans.PropertyChangeListener) in org.jboss.as.controller.ControlledProcessStateService has been deprecated
      4  org.jboss.as.controller.extension.ExtensionContextSupplement in org.jboss.as.controller.extension has been deprecated
      4  addPropertyChangeListener(java.beans.PropertyChangeListener) in org.jboss.as.controller.ControlledProcessStateService has been deprecated
      4  AbstractControllerService(org.jboss.as.controller.ProcessType,org.jboss.as.controller.RunningModeControl,org.jboss.as.controller.persistence.ConfigurationPersister,org.jboss.as.controller.ControlledProcessState,org.jboss.as.controller.ResourceDefinition,org.jboss.as.controller.OperationStepHandler,org.jboss.as.controller.ExpressionResolver) in org.jboss.as.controller.AbstractControllerService has been deprecated
      3  transformOperation(org.jboss.as.controller.ModelVersion,org.jboss.dmr.ModelNode,org.jboss.as.controller.transform.TransformerOperationAttachment) in org.jboss.as.subsystem.test.KernelServices has been deprecated
      3  IMPLEMENTATION_VENDOR_ID in java.util.jar.Attributes.Name has been deprecated
      3  getCurrentState() in org.jboss.as.controller.ControlledProcessStateService has been deprecated
      3  executeAndGrabTransformerAttachment(org.jboss.dmr.ModelNode) in org.jboss.as.subsystem.test.KernelServices has been deprecated
      3  deserialize(javax.management.ObjectName,byte[
      3  deserialize(java.lang.String,javax.management.ObjectName,byte[
      3  deserialize(java.lang.String,byte[
      2  SimpleOperationDefinition(java.lang.String,org.jboss.as.controller.descriptions.ResourceDescriptionResolver,org.jboss.as.controller.descriptions.ResourceDescriptionResolver,org.jboss.as.controller.registry.OperationEntry.EntryType,java.util.EnumSet<org.jboss.as.controller.registry.OperationEntry.Flag>,org.jboss.dmr.ModelType,org.jboss.dmr.ModelType,boolean,org.jboss.as.controller.DeprecationData,org.jboss.as.controller.AttributeDefinition[
      2  SERVICE_NAME in org.jboss.as.server.ExternalManagementRequestExecutor has been deprecated
      2  perLoggingDeploymentIgnored(java.lang.String,java.lang.String,java.lang.String) in org.jboss.as.logging.logging.LoggingLogger has been deprecated
      2  perDeploymentPropertyDeprecated(java.lang.String,java.lang.String) in org.jboss.as.logging.logging.LoggingLogger has been deprecated
      2  OUTBOUND_SOCKET_BINDING_BASE_SERVICE_NAME in org.jboss.as.network.OutboundSocketBinding has been deprecated
      2  org.jboss.as.protocol.mgmt.ManagementRequestContext.MultipleResponseAsyncTask in org.jboss.as.protocol.mgmt.ManagementRequestContext has been deprecated
      2  OperationFailedException(org.jboss.dmr.ModelNode) in org.jboss.as.controller.OperationFailedException has been deprecated
      2  IMPLEMENTATION_URL in java.util.jar.Attributes.Name has been deprecated
      2  getDefaultControllerPort() in org.jboss.as.cli.CommandContext has been deprecated
      2  getDefaultControllerHost() in org.jboss.as.cli.CommandContext has been deprecated
      2  getCaller() in org.jboss.as.controller.OperationContext has been deprecated
      2  ExtensionRegistry(org.jboss.as.controller.ProcessType,org.jboss.as.controller.RunningModeControl) in org.jboss.as.controller.extension.ExtensionRegistry has been deprecated
      2  DOMAIN_EXECUTION_KEY in org.jboss.as.controller.CompositeOperationHandler has been deprecated
      2  createVault(java.lang.String,java.util.Map<java.lang.String,java.lang.Object>) in org.jboss.as.server.services.security.AbstractVaultReader has been deprecated
      2  connectController(java.lang.String,int) in org.jboss.as.cli.CommandContext has been deprecated
      2  builder(org.jboss.as.controller.PersistentResourceDefinition,java.lang.String) in org.jboss.as.controller.PersistentResourceXMLDescription has been deprecated
      2  AbstractControllerService(org.jboss.as.controller.ProcessType,org.jboss.as.controller.RunningModeControl,org.jboss.as.controller.persistence.ConfigurationPersister,org.jboss.as.controller.ControlledProcessState,org.jboss.as.controller.ResourceDefinition,org.jboss.as.controller.OperationStepHandler,org.jboss.as.controller.ExpressionResolver,org.jboss.as.controller.audit.ManagedAuditLogger,org.jboss.as.controller.access.management.DelegatingConfigurableAuthorizer) in org.jboss.as.controller.AbstractControllerService has been deprecated
      2  AbstractControllerService(org.jboss.as.controller.ProcessType,org.jboss.as.controller.RunningModeControl,org.jboss.as.controller.persistence.ConfigurationPersister,org.jboss.as.controller.ControlledProcessState,org.jboss.as.controller.descriptions.DescriptionProvider,org.jboss.as.controller.OperationStepHandler,org.jboss.as.controller.ExpressionResolver) in org.jboss.as.controller.AbstractControllerService has been deprecated
      1  setXmlName(java.lang.String) in org.jboss.as.controller.PropertiesAttributeDefinition.Builder has been deprecated
      1  setWrapperElement(java.lang.String) in org.jboss.as.controller.PropertiesAttributeDefinition.Builder has been deprecated
      1  setRuntimeOnly(boolean) in org.jboss.as.controller.registry.ManagementResourceRegistration has been deprecated
      1  RUNTIME_NAME in org.jboss.as.server.deployment.Attachments has been deprecated
      1  registerModelTransformers(org.jboss.as.controller.ModelVersionRange,org.jboss.as.controller.transform.ResourceTransformer,org.jboss.as.controller.transform.OperationTransformer,boolean) in org.jboss.as.controller.SubsystemRegistration has been deprecated
      1  registerModelTransformers(org.jboss.as.controller.ModelVersionRange,org.jboss.as.controller.transform.ResourceTransformer) in org.jboss.as.controller.SubsystemRegistration has been deprecated
      1  registerModelTransformers(org.jboss.as.controller.ModelVersionRange,org.jboss.as.controller.transform.CombinedTransformer) in org.jboss.as.controller.SubsystemRegistration has been deprecated
      1  PROCESS_STATE in org.jboss.as.server.controller.descriptions.ServerDescriptionConstants has been deprecated
      1  org.wildfly.core.embedded.ServerStartException in org.wildfly.core.embedded has been deprecated
      1  ManagedDMRContentTypeResource(org.jboss.as.controller.PathElement,java.lang.String,byte[
      1  JBOSS_BINDING_NAME in org.jboss.as.network.SocketBinding has been deprecated
      1  isRegisterTransformers() in org.jboss.as.controller.ExtensionContext has been deprecated
      1  installConnectorServicesForNetworkInterfaceBinding(org.jboss.msc.service.ServiceTarget,org.jboss.msc.service.ServiceName,java.lang.String,org.jboss.msc.service.ServiceName,int,org.xnio.OptionMap,org.jboss.msc.service.ServiceName,org.jboss.msc.service.ServiceName,org.jboss.msc.service.ServiceName) in org.jboss.as.remoting.RemotingServices has been deprecated
      1  HttpOpenListener(org.xnio.Pool<java.nio.ByteBuffer>) in io.undertow.server.protocol.http.HttpOpenListener has been deprecated
      1  getDeploymentSubsystemModel(java.lang.String) in org.jboss.as.server.deployment.DeploymentUnit has been deprecated
      1  executeReadOnlyOperation(org.jboss.dmr.ModelNode,org.jboss.as.controller.registry.Resource,org.jboss.as.controller.ModelController.OperationTransactionControl,org.jboss.as.controller.OperationStepHandler) in org.jboss.as.controller.AbstractControllerService has been deprecated
      1  executeReadOnlyOperation(org.jboss.dmr.ModelNode,org.jboss.as.controller.ModelController.OperationTransactionControl,org.jboss.as.controller.OperationStepHandler) in org.jboss.as.controller.AbstractControllerService has been deprecated
      1  enableTransformerAttachmentGrabber() in org.jboss.as.subsystem.test.KernelServicesBuilder has been deprecated
      1  currentAccessAuditContext() in org.jboss.as.controller.AccessAuditContext has been deprecated
      1  createDeploymentSubModel(java.lang.String,org.jboss.as.controller.PathElement) in org.jboss.as.server.deployment.DeploymentUnit has been deprecated
      1  createDeploymentSubModel(java.lang.String,org.jboss.as.controller.PathAddress,org.jboss.as.controller.registry.Resource) in org.jboss.as.server.deployment.DeploymentUnit has been deprecated
      1  createDeploymentSubModel(java.lang.String,org.jboss.as.controller.PathAddress) in org.jboss.as.server.deployment.DeploymentUnit has been deprecated
      1  buildAndRegister(org.jboss.as.controller.SubsystemRegistration,org.jboss.as.controller.ModelVersion[
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,14/Nov/16 8:25 AM;rsvoboda;wf-core-deprecated-log.txt;https://issues.jboss.org/secure/attachment/12412620/wf-core-deprecated-log.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,4.0,,1|i0akqn:,9223372036854775807,,,,,,,,,,,"14/Nov/16 10:12 AM;brian.stansberry;I do not particularly like this kind of issue for WildFly Core. It encourages broad based changes affecting random areas.

Any changes made for this must come in discrete chunks, one PR per chunk, with only conceptually related changes in any one chunk. Any wide ranging PRs will be rejected.

This JIRA must not be used as justification for eliminating deprecated classes/methods (and thus eliminating required use of them, e.g. in wrapper classes.) Any such change will be rejected. If some deprecated class/method should be eliminated it needs to be done under a separate issue.

Until the JDK provides something like @Experimental/@Unstable that functions like @Deprecated it is not a goal to eliminate all deprecated API usage in core. We sometimes use @Deprecated as a means to trigger user awareness that some APIs may change.

","14/Nov/16 11:03 AM;rsvoboda;OK, [~ctomc] can you please pick urgent things from the list so we re-purpose this jira or you can close it as rejected.
Is it fine with you [~brian.stansberry] ?",14/Nov/16 11:05 AM;rsvoboda; re-purpose or split into more ... ,14/Nov/16 11:14 AM;brian.stansberry;Using this for removing unnecessary use of deprecated APIs is fine. My comment about doing the work in separate chunks is just an instruction to Tomaz about how to handle that.,,,,,,,,,,,,,,,,,,,,,,,
Property file passed via CLI does not resolve expressions with relative path value in vault attributes,WFCORE-1980,12661239,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,14/Nov/16 6:38 AM,17/Nov/16 5:18 PM,29/Nov/16 3:50 PM,17/Nov/16 5:18 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,CLI,,,,,3,,,,,,"Property file passed via CLI with --properties option does not resolve expressions in EAP 7, where in EAP 6 it works fine. ",,,,,,,,,,,,,,,,JBEAP-7092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1944,,,,,,0.0,2.0,,1|i0ajqv:,9223372036854775807,,,,"*Observation in EAP6:*
  
  Set <resolve-parameter-values>true</resolve-parameter-values> in jboss-cli.xml and execute cli script like ./jboss-cli.sh -c --file=../../cli/vault.cli --properties=../../cli/vault.properties and every expressions mentioned in vault.properties got resolved during execution. 

Output:
{noformat}
[sidde@sidde configuration]$ ../../bin/jboss-cli.sh -c --file=../../cli/vault.cli --properties=../../cli/vault.properties 
{""outcome"" => ""success""}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""code"" => undefined,
        ""module"" => undefined,
        ""vault-options"" => {
            ""KEYSTORE_URL"" => expression ""${jboss.server.config.dir}/vault/vault.keystore"",
            ""KEYSTORE_PASSWORD"" => ""MASK-20z/5hRIeZClI0h6Wztl9Z"",
            ""KEYSTORE_ALIAS"" => ""vault"",
            ""SALT"" => ""12345678"",
            ""ITERATION_COUNT"" => ""50"",
            ""ENC_FILE_DIR"" => expression ""${jboss.server.config.dir}/vault/""
        }
    }
}
{noformat}

*Observation in EAP7:*

  Tried to execute the same in EAP7 by doing the same changes in jboss-cli.xml but while executing cli in same fashion, received below error

{noformat}
[sidde@sidde bin]$ ./jboss-cli.sh -c --file=../cli/vault.cli --properties=../cli/vault.properties 
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0211: Cannot resolve expression '${vault.keystore.url}'"",
    ""rolled-back"" => true
}
{noformat}

*Below are the files for reference*

* vault.cli:
{noformat}
/core-service=vault:add( \
    vault-options=[ \
        (""KEYSTORE_URL"" => ""${vault.keystore.url}""), \
        (""KEYSTORE_PASSWORD"" => ""${vault.keystore.password}""), \
        (""KEYSTORE_ALIAS"" => ""${vault.keystore.alias}""), \
        (""SALT"" => ""${vault.salt}""), \
        (""ITERATION_COUNT"" => ""${vault.iteration}""), \
        (""ENC_FILE_DIR"" => ""${vault.encfiledir}"") \
    ] \
)

/core-service=vault:read-resource(recursive=true)
{noformat}

* vault.properties:
{noformat}
vault.keystore.url=${jboss.server.config.dir}/vault/vault.keystore
vault.keystore.password=MASK-20z/5hRIeZClI0h6Wztl9Z
vault.keystore.alias=vault
vault.salt=12345678
vault.iteration=50
vault.encfiledir=${jboss.server.config.dir}/vault/
{noformat}",,,,,Workaround Exists,"Load the properties during startup (standalone.sh -P vault.properties) and execute the cli, which will give successful execution and internally resolves the expressions. However we will not able to view the actual value through cli, it will show the expressions only, where in EAP6 these expressions are replaced by actual value from property file after execution.

{noformat}
[sidde@sidde bin]$ ./jboss-cli.sh -c --file=../cli/vault.cli
{""outcome"" => ""success""}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""code"" => undefined,
        ""module"" => undefined,
        ""vault-options"" => {
            ""KEYSTORE_URL"" => expression ""${vault.keystore.url}"",
            ""KEYSTORE_PASSWORD"" => expression ""${vault.keystore.password}"",
            ""KEYSTORE_ALIAS"" => expression ""${vault.keystore.alias}"",
            ""SALT"" => expression ""${vault.salt}"",
            ""ITERATION_COUNT"" => expression ""${vault.iteration}"",
            ""ENC_FILE_DIR"" => expression ""${vault.encfiledir}""
        }
    }
}
{noformat}","15/Nov/16 3:44 AM;soul2zimate;{noformat}
As the example uses vault.keystore.url=${jboss.server.config.dir}/vault/vault.keystore in vault.properties.

CLIExpressionResolver tries to recursively resolve expression ${vault.keystore.url} in command
/core-service=vault:add(vault-options=[(""KEYSTORE_URL"" => ""${vault.keystore.url}""), ... ...

When it finds ${jboss.server.config.dir}/vault/vault.keystore in which jboss.server.config.dir can NOT be found in system properties in CLI side.
But it is a legal property in server side. 
Method resolveOrOriginal therefore catches UnresolvedExpressionException and returns the original value ${vault.keystore.url} for KEYSTORE_URL which causes the error.
{noformat}","15/Nov/16 10:48 AM;brian.stansberry;I don't think the workaround should be included here, as it doesn't look like true workaround. And it confused me from the main issue. :)

Having to use server side properties instead of client side is analogous to just not using properties at all. It means the user was unable to control the value in the process where they want to control it. So I don't think it counts as a workaround.",,,,,,,,,,,,,,,,,,,,,,,,,
Wildfly-openssl is missing 32 bits variant.,WFCORE-1979,12661213,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,swd847,rhatlapa,rhatlapa,14/Nov/16 5:08 AM,14/Nov/16 11:38 AM,29/Nov/16 3:50 PM,,,,,,,,,,Security,Server,,,,0,wildfly-openssl,,,,,"There is missing wildfly-openssl build for 32 bits variants resulting in this exception:
{noformat}
   11:33:40,914 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""security-realm"" => ""ApplicationRealm"")
]) - failure description: {
    ""WFLYCTL0080: Failed services"" => {""jboss.server.controller.management.security_realm.ApplicationRealm.ssl-context"" => ""org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.ApplicationRealm.ssl-context: WFLYDM0018: Unable to start service
    Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: openssl.TLS, provider: openssl, class: org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLSContextSpi)
    Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    Caused by: java.lang.reflect.InvocationTargetException
    Caused by: java.lang.UnsatisfiedLinkError: no wfssl in java.library.path""},
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.server.controller.management.security_realm.ApplicationRealm.ssl-context""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined,
    ""WFLYCTL0288: One or more services were unable to start due to one or more indirect dependencies not being available."" => {
        ""Services that were unable to start:"" => [""jboss.server.controller.management.security_realm.ApplicationRealm""],
        ""Services that may be the cause:"" => [""jboss.remoting.remotingConnectorInfoService.http-remoting-connector""]
    }
}
{noformat}",,,,,,,,,,,,,,,,JBEAP-7098,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0ajlb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded Server ignores system properties when starting.,WFCORE-1977,12661076,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,11/Nov/16 6:13 PM,23/Nov/16 9:32 PM,29/Nov/16 3:50 PM,23/Nov/16 9:32 PM,,,,,,,3.0.0.Alpha13,,,,,,,0,downstream_dependency,,,,,"Currently, using jboss-cli.sh with (for example) -Djboss.server.base.dir=/foo/bar, then starting an embedded server ignores the specified base dir.

This should be used in the same way as standalone currently does, as should the rest of the commonly passed properties (log.dir etc etc).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0airj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log viewer does not show any log file for rpm installation,WFCORE-1976,12661064,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,11/Nov/16 3:44 PM,21/Nov/16 5:30 AM,29/Nov/16 3:50 PM,15/Nov/16 5:36 PM,,,,,,,3.0.0.Alpha13,,Logging,,,,,0,,,,,,"I'm running a fresh RHEL7.3 server subscribed to the current jboss eap7 repository [1] using the rpm package. [2]

[1] subscription-manager repos --enable=jb-eap-7-for-rhel-RHEL_VERSION-server-rpms
[2] https://access.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/installation-guide/#rpm_installation",,,,,,,,,,,,,,,,JBEAP-7086,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1940,,,,,,0.0,1.0,,1|i0aiov:,9223372036854775807,,,,"- Removed the group: # yum groupremove jboss-eap7
- Removed remaining eap7* rpms: # yum remove ea
- Deleted the directories with remaining config files: /etc/opt/rh/eap7 and /var/opt/rh/eap7
- Reinstalled the group: # yum groupinstall jboss-eap7
- Started the service in standalone mode.
- Created an admin user with EAP_HOME/bin/add-user.sh script.

The behaviour is the same no log files in management console.",,,,,,,11/Nov/16 3:46 PM;jamezp;Symbolic links were not being followed. Setting the file walker to follow symbolic links will fix this issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
EmbeddedProcessFactory does not accept module pathes with multiple directories,WFCORE-1975,12661059,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,stoty2,stoty2,stoty2,11/Nov/16 3:22 PM,17/Nov/16 5:18 PM,29/Nov/16 3:50 PM,17/Nov/16 5:18 PM,3.0.0.Alpha12,,,,,,3.0.0.Alpha13,,Server,,,,,0,,,,,,"The {{modulePath}} parameters passed to the {{org.wildfly.core.embedded.EmbeddedProcessFactory}} methods are are rejected if they they are actual paths with multiple directories. Only single directory names are accepted.

This is inconsistent with the normal operation of the server, with the naming of the parameter, as well as with the semantics of the {{module.path}} system property that it ultimately sets.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1939,,,,,,0.0,1.0,,1|i0ainr:,9223372036854775807,,,,"1. Call org.wildfly.core.embedded.EmbeddedProcessFactory.createStandaloneServer(String jbossHomePath, String modulePath, String... systemPackages)
with the following parameters:
EmbeddedProcessFactory.createStandaloneServer(""/jboss/home/dir/"", ""/jboss/home/dir/modules:/external/module/dir"")

2. Get exception",,,,,,,"11/Nov/16 3:45 PM;stoty2;The attached PR fixes the bug, and allows for setting multiple directory paths, just like the normal wildfly startup.",,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistency in resource description ,WFCORE-1974,12660892,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Won't Fix,brian.stansberry,rhatlapa,rhatlapa,11/Nov/16 5:01 AM,23/Nov/16 2:58 PM,29/Nov/16 3:50 PM,23/Nov/16 2:58 PM,,,,,,,,,Domain Management,,,,,0,user_experience,,,,,"The description format is inconsistent in relation to starting with camel case and in relation to ending with full stop. This should be ideally consistent.

There are some inconsistencies noted with Undertow subsystem that I've noted, still the issue is general:
# Start with uppercase/lowercase >>""description"" => ""*_+enables+_* x-for ... ""<< {noformat}""proxy-address-forwarding"" => {
                ""type"" => BOOLEAN,
                ""description"" => ""enables x-forwarded-host and similar headers and set a remote ip address and hostname"",
                ""expressions-allowed"" => true,
                ""nillable"" => true,
                ""default"" => false,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""resource-services""
{noformat} vs {noformat}""url-charset"" => {
                ""type"" => STRING,
                ""description"" => ""URL charset"",
                ""expressions-allowed"" => true,
                ""nillable"" => true,
                ""default"" => ""UTF-8"",
                ""min-length"" => 1L,
                ""max-length"" => 2147483647L,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""{noformat}
# End with dot/no dot {noformat}""url-charset"" => {
                ""type"" => STRING,
                ""description"" => ""URL charset"",
                ""expressions-allowed"" => true,
                ""nillable"" => true,
                ""default"" => ""UTF-8"",
                ""min-length"" => 1L,
                ""max-length"" => 2147483647L,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""{noformat} vs {noformat}""receive-buffer"" => {
                ""type"" => INT,
                ""description"" => ""The receive buffer size, in bytes."",
                ""expressions-allowed"" => true,
                ""nillable"" => true,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""{noformat}
 ",,,,,,,,,,,,,,,,JBEAP-6917,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0ahnz:,9223372036854775807,,,,,,,,,,,"23/Nov/16 2:58 PM;brian.stansberry;I'm rejecting this just to be honest. We're never going to devote resources to making this 'full stop' thing consistent so I'm not going to pretend otherwise.

Upstream patches fixing stuff like the ""enables"" are welcome. No need for a WFCORE JIRA; a PR is fine.",,,,,,,,,,,,,,,,,,,,,,,,,,
Command auto-completition does not work properly when start typing param value with parenthesis,WFCORE-1971,12660519,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,thofman,thofman,thofman,09/Nov/16 12:46 PM,11/Nov/16 7:16 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha12,,,,,,,,CLI,,,,,0,,,,,,"Autocompletition of command in CLI does not work properly when starts writing quotes {{""}} right after equal sign {{=}} and then pressing {{<TAB>}}.

I write
{{/subsystem=transactions/log-store=""}}
and then press {{TAB}}
the autocompletion finishes the name but replaces the fist letter for the existing quotes. That leads to have command like
{{/subsystem=transactions/log-store=""og-store}}
which is obviously invalid as {{""og-store}} does not exists.",,,,,,,,,,,,,,,,JBEAP-6872,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1929,,,,,,0.0,0.0,,1|i0afin:,9223372036854775807,,,,"Write
{{/subsystem=transactions/log-store=""<TAB>}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move aesh dependency to 0.66.13,WFCORE-1970,12660466,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,09/Nov/16 9:21 AM,15/Nov/16 5:28 PM,29/Nov/16 3:50 PM,15/Nov/16 5:27 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1928,,,,,,0.0,0.0,,1|i0af73:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JBoss CLI authentication ctrl+c results in errors,WFCORE-1969,12660455,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,09/Nov/16 9:02 AM,15/Nov/16 5:31 PM,29/Nov/16 3:50 PM,15/Nov/16 5:31 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-7015,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0af4v:,9223372036854775807,,,,,,,,,,,11/Nov/16 5:30 AM;dlofthouse;I have also seen issues recently in this area with Ctrl+D,,,,,,,,,,,,,,,,,,,,,,,,,,
write-attribute does not support tab completion for values of type Object or List,WFCORE-1968,12660357,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,09/Nov/16 3:51 AM,17/Nov/16 5:12 PM,29/Nov/16 3:50 PM,17/Nov/16 5:12 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-6867,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1927,,,,,,0.0,0.0,,1|i0aejj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Not evaluated HTML tags in help text when adding new Paths,WFCORE-1967,12660355,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,mstefank,mstefank,mstefank,09/Nov/16 3:41 AM,15/Nov/16 5:22 PM,29/Nov/16 3:50 PM,15/Nov/16 5:22 PM,,,,,,,3.0.0.Alpha13,,,,,,,0,,,,,,There are some HTML tags in help text when adding new path. I think these should be either removed at all or should be made working so the text is formatted properly.,,,,,,,,,,,,,,,,JBEAP-6348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1925,,,,,,0.0,0.0,,1|i0aej3:,9223372036854775807,,,,"# Login to web console
# Go to 'Configuration' tab
# Select 'Paths'
# click on 'View' button
# click on 'Add' button to add new path
# click on 'Need help?' button
# see that HTML tags in the text are not evaluated anyhow",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tab completion suggest all attributes for operations specific for list or map,WFCORE-1961,12660240,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,08/Nov/16 11:46 AM,19/Nov/16 8:07 AM,29/Nov/16 3:50 PM,19/Nov/16 8:07 AM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,JBEAP-6865,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1920,,,,,,0.0,0.0,,1|i0adyv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get rid of attributes of type LIST of PROPERTY; use OBJECT of STRING,WFCORE-1960,12660236,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,brian.stansberry,brian.stansberry,08/Nov/16 11:32 AM,08/Nov/16 11:34 AM,29/Nov/16 3:50 PM,,,,,,,,3.0.0.Beta1,,Domain Management,,,,,0,,,,,,"A read-resource-description output of a standalone-full-ha.xml server (see attached) shows a couple attributes that are of type LIST, value-type PROPERTY. (Just text search for PROPERTY.) We should convert those to OBJECT, value-type STRING. Both represent a resource address. An object of string is equivalent to a LinkedHashMap<String, String>, with ordering based on insertion. So such a description is fine for a path address attribute. 

I'd like to get rid of the notion of PROPERTY in our spec definition of how to describe attributes, parameters and value-types (https://docs.jboss.org/author/display/WFLY/Description+of+the+Management+Model) so removing the only usage of it will help.

We should still accept PROPERTY as inputs when we can do conversion to the defined type. This is all about tightening up the spec to remove the not-really-necessary PROPERTY concept.",,,,,,,,,,,,,,,,,,,,,,,,,,,08/Nov/16 11:34 AM;brian.stansberry;rrd.txt;https://issues.jboss.org/secure/attachment/12412321/rrd.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,0.0,,1|i0ady7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploying an empty managed exploded deployment to server group in domain fails,WFCORE-1959,12660235,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,08/Nov/16 11:28 AM,08/Nov/16 8:18 PM,29/Nov/16 3:50 PM,08/Nov/16 8:18 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Deploying an empty exploded deployment created on domain controller fails with the following:
{code}    [domain@localhost:9990 /] /deployment=empty-deployment.jar:add(content=[{empty=true}])
    {
        ""outcome"" => ""success"",
        ""result"" => undefined,
        ""server-groups"" => undefined
    }
    [domain@localhost:9990 /] /server-group=main-server-group/deployment=empty-deployment.jar:add()              
    {
        ""outcome"" => ""failed"",
        ""result"" => undefined,
        ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {""main-server-group"" => {""host"" => {""master"" => {
            ""server-one"" => ""WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]"",
            ""server-two"" => ""WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]""
        }}}}}},
        ""rolled-back"" => true,
        ""server-groups"" => {""main-server-group"" => {""host"" => {""master"" => {
            ""server-one"" => {""response"" => {
                ""outcome"" => ""failed"",
                ""failure-description"" => ""WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]"",
                ""rolled-back"" => true
            }},
            ""server-two"" => {""response"" => {
                ""outcome"" => ""failed"",
                ""failure-description"" => ""WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]"",
                ""rolled-back"" => true
            }}
        }}}}
    }
{code}",,,,,,,,,,,,,,,,JBEAP-6977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1919,,,,,,0.0,0.0,,1|i0adxz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unclear error message after cloning non-existing profile to new profile,WFCORE-1957,12660210,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,mkopecky,brian.stansberry,08/Nov/16 10:20 AM,15/Nov/16 5:24 PM,29/Nov/16 3:50 PM,15/Nov/16 5:24 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"Unclear error message after cloning non-existing profile to new profile.
{noformat}
[domain@localhost:9990 /] /profile=non-existing-profile:clone(to-profile=whatever)
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""server-groups"" => undefined,
    ""rolled-back"" => true
}
[domain@localhost:9990 /] 
{noformat}
There should be something like this on output:
{{Profile 'non-existing-profile' doesn't exist.}}",,,,,,,,,,,,,,,,JBEAP-6937,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1926,,,,,,0.0,0.0,,1|i0adsf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Elytron allow-resource-service-restart=true handling,WFCORE-1953,12660048,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,mchoma,mchoma,08/Nov/16 3:16 AM,08/Nov/16 3:19 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha11,,,,,,,,Domain Management,,,,,0,,,,,,"Elytron can not handle {{allow-resource-service-restart=true}} header properly on many places. 

For example if I try to update http-authentication-factory with {{allow-resource-service-restart=true}} header, I get 
{code}
[standalone@localhost:9990 /] /subsystem=elytron/http-authentication-factory=application-http-authentication:write-attribute(name=http-server-mechanism-factory, value=global){allow-resource-service-restart=true} 
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.UnsupportedOperationException"",
    ""rolled-back"" => true
}
{code}

And exception in server log

{code:title=server.log}
11:22:20,312 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""http-authentication-factory"" => ""application-http-authentication"")
]): java.lang.UnsupportedOperationException
	at org.jboss.as.controller.RestartParentWriteAttributeHandler.recreateParentService(RestartParentWriteAttributeHandler.java:145)
	at org.jboss.as.controller.RestartParentWriteAttributeHandler.recreateParentService(RestartParentWriteAttributeHandler.java:126)
	at org.jboss.as.controller.RestartParentWriteAttributeHandler.applyUpdateToRuntime(RestartParentWriteAttributeHandler.java:72)
	at org.jboss.as.controller.AbstractWriteAttributeHandler$1.execute(AbstractWriteAttributeHandler.java:104)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

Similar behaviour can be seen in:
* {{kerberos-security-factory}}
* {{filesystem-realm}}
* {{constant-principal-decoder}}

On the other hand I don't see this issue in {{security-domain}}

Possible solutions:
* restart services 
** possibility of reload big part of server anyway; either management part or application part
* live updates 
** if resource would accept runtime updates resource won't need to reload 
** most user friendly, most work
** tracked as own issue JBEAP-6961",,,,,,,,,,,,,,,,JBEAP-6939,,,,,WFLY-7512,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0actj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose content repository read-content as a GET operation,WFCORE-1951,12659937,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,07/Nov/16 12:52 PM,07/Nov/16 3:35 PM,29/Nov/16 3:50 PM,07/Nov/16 3:35 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,Allows the use of the GET method to obtain the binary stream to a content in the content repository.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1914,,,,,,0.0,0.0,,1|i0ac5r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typos in /subsystem=logging resource descriptions,WFCORE-1949,12659874,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,Takis,Takis,Takis,07/Nov/16 10:00 AM,07/Nov/16 1:41 PM,29/Nov/16 3:50 PM,07/Nov/16 1:41 PM,,,,,,,3.0.0.Alpha12,,CLI,Logging,,,,0,,,,,,"{code}""logging-profile"" => {
                ""description"" => ""A profile that can be assigned to a deployment for it's logging configuration."",{code}
The description should instead read {quote}A profile that can be assigned to a deployment for its logging configuration.{quote}
{code}""use-parent-handlers"" => {
                            ""type"" => BOOLEAN,
                            ""description"" => ""Specifies whether or not this logger should send its output to it's parent Logger."",{code}
The description should instead read {quote}Specifies whether or not this logger should send its output to its parent Logger.{quote}",,,,,,,,,,,,,,,,JBEAP-6910,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1911,,,,,,0.0,0.0,,1|i0absn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DomainSuspendResumeTestCase#testSuspendResumeDomainLevel fails intermittently on IPv6,WFCORE-1947,12659674,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,swd847,swd847,swd847,06/Nov/16 8:26 PM,07/Nov/16 1:38 PM,29/Nov/16 3:50 PM,07/Nov/16 1:38 PM,,,,,,,3.0.0.Alpha12,,Test Suite,,,,,0,,,,,,"*Description of problem:*
DomainSuspendResumeTestCase#testSuspendResumeDomainLevel from WF-core fails intermittently on IPv6

*How reproducible:*
1%

*Actual results:*
Stack trace:
{noformat}
java.util.concurrent.ExecutionException: java.io.IOException: java.util.concurrent.ExecutionException: java.io.IOException: HTTP Status 503 Response: null
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at org.jboss.as.test.integration.domain.suspendresume.DomainSuspendResumeTestCase.testSuspendResumeDomainLevel(DomainSuspendResumeTestCase.java:117)
Caused by: java.io.IOException: java.util.concurrent.ExecutionException: java.io.IOException: HTTP Status 503 Response: null
	at org.jboss.as.test.integration.common.HttpRequest.execute(HttpRequest.java:60)
	at org.jboss.as.test.integration.common.HttpRequest.get(HttpRequest.java:81)
	at org.jboss.as.test.integration.domain.suspendresume.DomainSuspendResumeTestCase$1.call(DomainSuspendResumeTestCase.java:106)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.util.concurrent.ExecutionException: java.io.IOException: HTTP Status 503 Response: null
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:206)
	at org.jboss.as.test.integration.common.HttpRequest.execute(HttpRequest.java:51)
	at org.jboss.as.test.integration.common.HttpRequest.get(HttpRequest.java:81)
	at org.jboss.as.test.integration.domain.suspendresume.DomainSuspendResumeTestCase$1.call(DomainSuspendResumeTestCase.java:106)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.io.IOException: HTTP Status 503 Response: null
	at org.jboss.as.test.integration.common.HttpRequest.processResponse(HttpRequest.java:156)
	at org.jboss.as.test.integration.common.HttpRequest.access$000(HttpRequest.java:45)
	at org.jboss.as.test.integration.common.HttpRequest$1.call(HttpRequest.java:78)
	at org.jboss.as.test.integration.common.HttpRequest$1.call(HttpRequest.java:73)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}
Standard Output:
{noformat}
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:35,818 INFO  [org.jboss.as.domain.controller] (management task-1) WFLYHC0026: Unregistered remote slave host ""slave""&amp#27;[0m
&amp#27;[0m14:09:38,851 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1
&amp#27;[0m&amp#27;[0m14:09:39,158 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process 'Host Controller'
&amp#27;[0m[Host Controller] &amp#27;[0m14:09:40,482 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:41,037 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:41,190 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,240 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,258 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,282 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,554 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,707 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.21.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:43,914 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) WFLYRMT0001: Listening on [2620:52:0:105f::ffff:200]:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m14:09:43,985 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-2) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m14:09:45,397 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-one&amp#27;[0m
&amp#27;[0m14:09:45,493 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:main-one'
&amp#27;[0m[Server:main-one] &amp#27;[0m14:09:46,953 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1&amp#27;[0m
[Server:main-one] &amp#27;[0m&amp#27;[0m14:09:47,552 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Server:main-one] &amp#27;[0m&amp#27;[0m14:09:47,737 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" starting&amp#27;[0m
[Server:main-one] &amp#27;[0m&amp#27;[0m14:09:47,879 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:main-one] &amp#27;[0m&amp#27;[0m14:09:47,891 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:main-one] &amp#27;[0m&amp#27;[0m14:09:48,007 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:49,228 INFO  [org.jboss.as.host.controller] (management task-2) WFLYHC0021: Server [Server:main-one] connected using connection [Channel ID 2b048cd4 (inbound) of Remoting connection 0a683b93 to /2620:52:0:105f:0:0:ffff:200:50459 of endpoint ""master:MANAGEMENT"" <6718116b>]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:49,353 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-one&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:49,408 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[2620:52:0:105f::ffff:200]:9990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:49,408 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://[2620:52:0:105f::ffff:200]:9990&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:49,409 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" (Host Controller) started in 9990ms - Started 52 of 52 services (13 services are lazy, passive or on-demand)&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
[Server:main-one] &amp#27;[0m14:09:50,792 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 11) WFLYIO001: Worker 'default' has auto-configured to 2 core threads with 16 task threads based on your 1 available processors&amp#27;[0m
[Server:main-one] 14:09:50,958 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
[Server:main-one] 14:09:51,358 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" started in 5543ms - Started 50 of 67 services (24 services are lazy, passive or on-demand)
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 13764 ms
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 14018 ms
&amp#27;[0m14:09:52,775 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1
&amp#27;[0m&amp#27;[0m14:09:53,056 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process 'Host Controller'
&amp#27;[0m[Host Controller] &amp#27;[0m14:09:54,298 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:54,746 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:54,871 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,339 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,362 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,373 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (19990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,496 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,580 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:56,757 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) WFLYRMT0001: Listening on [2620:52:0:105f::ffff:200]:19999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:58,934 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 10) WFLYHC0019: Registered remote slave host ""slave"", WildFly 3.0.0.Alpha5-redhat-2 ""Kenny""&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:58,941 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0148: Connected to master host controller at remote://[2620:52:0:105f::ffff:200]:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:09:59,060 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-three&amp#27;[0m
&amp#27;[0m14:09:59,142 INFO  [org.jboss.as.process.Server:main-three.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:main-three'
&amp#27;[0m[Server:main-three] &amp#27;[0m14:10:00,843 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1&amp#27;[0m
[Server:main-three] &amp#27;[0m&amp#27;[0m14:10:01,463 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Server:main-three] &amp#27;[0m&amp#27;[0m14:10:01,673 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" starting&amp#27;[0m
[Server:main-three] &amp#27;[0m&amp#27;[0m14:10:01,845 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:main-three] &amp#27;[0m&amp#27;[0m14:10:01,864 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:main-three] &amp#27;[0m&amp#27;[0m14:10:01,964 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:03,372 INFO  [org.jboss.as.host.controller] (management task-4) WFLYHC0021: Server [Server:main-three] connected using connection [Channel ID 67d9a29d (inbound) of Remoting connection 11386b99 to /2620:52:0:105f:0:0:ffff:200:34339 of endpoint ""slave:MANAGEMENT"" <45f90c18>]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:03,505 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server other-two&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:03,526 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-three&amp#27;[0m
&amp#27;[0m14:10:03,562 INFO  [org.jboss.as.process.Server:other-two.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:other-two'
&amp#27;[0m[Server:main-three] &amp#27;[0m14:10:05,151 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker 'default' has auto-configured to 2 core threads with 16 task threads based on your 1 available processors&amp#27;[0m
[Server:main-three] 14:10:05,423 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
[Server:main-three] 14:10:06,009 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" started in 6591ms - Started 51 of 68 services (25 services are lazy, passive or on-demand)
[Server:other-two] &amp#27;[0m14:10:07,481 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1&amp#27;[0m
[Server:other-two] &amp#27;[0m&amp#27;[0m14:10:08,387 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Server:other-two] &amp#27;[0m&amp#27;[0m14:10:08,715 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" starting&amp#27;[0m
[Server:other-two] &amp#27;[0m&amp#27;[0m14:10:08,969 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:other-two] &amp#27;[0m&amp#27;[0m14:10:08,985 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.4.0.Final-redhat-1&amp#27;[0m
[Server:other-two] &amp#27;[0m&amp#27;[0m14:10:09,147 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.21.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:10,832 INFO  [org.jboss.as.host.controller] (management task-7) WFLYHC0021: Server [Server:other-two] connected using connection [Channel ID 44ad4059 (inbound) of Remoting connection 0c272340 to /2620:52:0:105f:0:0:ffff:200:58012 of endpoint ""slave:MANAGEMENT"" <45f90c18>]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:10,867 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[2620:52:0:105f::ffff:200]:19990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:10,868 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:10,868 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" (Host Controller) started in 17586ms - Started 51 of 52 services (15 services are lazy, passive or on-demand)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:10,879 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server other-two&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
[Server:other-two] &amp#27;[0m14:10:13,104 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker 'default' has auto-configured to 2 core threads with 16 task threads based on your 1 available processors&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
[Server:other-two] 14:10:13,514 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
[Server:other-two] 14:10:14,207 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha5-redhat-2 ""Kenny"" started in 9383ms - Started 51 of 68 services (25 services are lazy, passive or on-demand)
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 22719 ms
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 22983 ms
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:14,934 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6/d202e32a/testsuite/domain/target/domains/DomainSuspendResumeTestCase/master/data/content/d0/14932745e22c9365392d6248c6743b23679935/content&amp#27;[0m
[Server:main-three] 14:10:15,936 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of ""web-suspend.jar"" (runtime-name: ""web-suspend.jar"")
[Server:main-one] 14:10:16,058 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of ""web-suspend.jar"" (runtime-name: ""web-suspend.jar"")
[Server:main-three] 14:10:16,486 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.controller:main"") which may be changed or removed in future versions without notice.
[Server:main-three] 14:10:16,487 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.server:main"") which may be changed or removed in future versions without notice.
[Server:main-three] 14:10:16,487 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.wildfly.extension.request-controller:main"") which may be changed or removed in future versions without notice.
[Server:main-three] 14:10:16,487 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.network:main"") which may be changed or removed in future versions without notice.
[Server:main-one] 14:10:16,567 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.controller:main"") which may be changed or removed in future versions without notice.
[Server:main-one] 14:10:16,568 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.server:main"") which may be changed or removed in future versions without notice.
[Server:main-one] 14:10:16,568 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.wildfly.extension.request-controller:main"") which may be changed or removed in future versions without notice.
[Server:main-one] 14:10:16,569 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment ""deployment.web-suspend.jar"" is using a private module (""org.jboss.as.network:main"") which may be changed or removed in future versions without notice.
[Server:main-three] 14:10:17,387 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 6) WFLYSRV0010: Deployed ""web-suspend.jar"" (runtime-name : ""web-suspend.jar"")
[Server:main-one] 14:10:17,438 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 16) WFLYSRV0010: Deployed ""web-suspend.jar"" (runtime-name : ""web-suspend.jar"")
[Server:main-one] 14:10:18,788 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 16) WFLYSRV0236: Suspending server with no timeout.
[Server:main-three] 14:10:18,930 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 6) WFLYSRV0236: Suspending server with no timeout.
[Server:main-one] 14:10:18,936 INFO  [stdout] (XNIO-1 task-1) Attempting 1 HttpServerExchange{ GET /web-suspend request {Accept=[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2], Via=[1.1 proxy-01.mw.lab.eng.bos.redhat.com (squid/3.1.10)], Connection=[keep-alive], Cache-Control=[max-age=259200], X-Forwarded-For=[2620:52:0:105f::ffff:203], User-Agent=[Java/1.8.0_71], Host=[[2620:52:0:105f::ffff:200]:8080]} response {}}
[Server:other-two] 14:10:18,966 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 12) WFLYSRV0236: Suspending server with no timeout.
[Server:main-one] 14:10:18,990 INFO  [stdout] (XNIO-1 I/O-1) Rejected 1 HttpServerExchange{ GET /web-suspend request {Accept=[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2], Via=[1.1 proxy-01.mw.lab.eng.bos.redhat.com (squid/3.1.10)], Connection=[keep-alive], Cache-Control=[max-age=259200], X-Forwarded-For=[2620:52:0:105f::ffff:203], User-Agent=[Java/1.8.0_71], Host=[[2620:52:0:105f::ffff:200]:8080]} response {}}
[Server:main-one] 14:10:19,077 INFO  [stdout] (XNIO-1 task-3) Skipping request 2 HttpServerExchange{ GET /web-suspend request {Accept=[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2], Via=[1.1 proxy-01.mw.lab.eng.bos.redhat.com (squid/3.1.10)], Connection=[keep-alive], Cache-Control=[max-age=259200], X-Forwarded-For=[2620:52:0:105f::ffff:203], User-Agent=[Java/1.8.0_71], Host=[[2620:52:0:105f::ffff:200]:8080]} response {}}
[Server:main-one] 14:10:19,140 INFO  [stdout] (XNIO-1 task-4) Skipping request 3 HttpServerExchange{ GET /web-suspend request {Accept=[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2], Via=[1.1 proxy-01.mw.lab.eng.bos.redhat.com (squid/3.1.10)], Connection=[keep-alive], Cache-Control=[max-age=259200], X-Forwarded-For=[2620:52:0:105f::ffff:203], User-Agent=[Java/1.8.0_71], Host=[[2620:52:0:105f::ffff:200]:8080]} response {}}
[Server:main-three] 14:10:19,552 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment web-suspend.jar (runtime-name: web-suspend.jar) in 133ms
[Server:main-one] 14:10:19,565 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment web-suspend.jar (runtime-name: web-suspend.jar) in 179ms
[Server:main-one] 14:10:19,676 WARN  [org.jboss.as.controller] (ServerService Thread Pool -- 16) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
[Server:main-one] 14:10:19,688 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 16) WFLYDR0002: Content removed from location /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6/d202e32a/testsuite/domain/target/domains/DomainSuspendResumeTestCase/master/servers/main-one/data/content/d0/14932745e22c9365392d6248c6743b23679935/content
[Server:main-three] 14:10:19,699 WARN  [org.jboss.as.controller] (ServerService Thread Pool -- 6) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
[Server:main-three] 14:10:19,709 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 6) WFLYDR0002: Content removed from location /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6/d202e32a/testsuite/domain/target/domains/DomainSuspendResumeTestCase/slave/data/servers/main-three/content/d0/14932745e22c9365392d6248c6743b23679935/content
[Server:main-three] 14:10:19,782 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 6) WFLYSRV0009: Undeployed ""web-suspend.jar"" (runtime-name: ""web-suspend.jar"")
[Server:main-one] 14:10:19,689 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 16) WFLYSRV0009: Undeployed ""web-suspend.jar"" (runtime-name: ""web-suspend.jar"")
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:19,875 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 4) WFLYDR0002: Content removed from location /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6/d202e32a/testsuite/domain/target/domains/DomainSuspendResumeTestCase/slave/data/content/d0/14932745e22c9365392d6248c6743b23679935/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m14:10:19,890 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6/d202e32a/testsuite/domain/target/domains/DomainSuspendResumeTestCase/master/data/content/d0/14932745e22c9365392d6248c6743b23679935/content&amp#27;[0m
{noformat}

*Expected results:*
No error.

*Additional info:*
* [jenkins job run|https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-rhel-ipv6/42/jdk=openjdk1.8_local,label_exp=RHEL7-ipv6/testReport/]
",,,,,,,,,,,,,,,,JBEAP-5739,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0aalb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing description what happends to request when max-requests attribute is set in request-controller subsystem in CLI,WFCORE-1946,12659673,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Optional,Done,swd847,swd847,swd847,06/Nov/16 7:23 PM,07/Nov/16 1:37 PM,29/Nov/16 3:50 PM,07/Nov/16 1:37 PM,,,,,,,3.0.0.Alpha12,,,,,,,0,,,,,,Current description for {{max-requests}} attribute in request-controller subsystem: “The maximum number of all types of requests that can be running in a server at a time” – What will happen if there will be more requests? Will they wait in queue or they will be dropped. It is not clear from description.,,,,,,,,,,,,,,,,JBEAP-6605,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0aal3:,9223372036854775807,,,,,,,,jkasik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change Wildfly OpenSSL native packaging,WFCORE-1945,12659661,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,06/Nov/16 6:55 PM,07/Nov/16 1:36 PM,29/Nov/16 3:50 PM,07/Nov/16 1:36 PM,,,,,,,3.0.0.Alpha12,,,,,,,0,,,,,,The binaries should not be packaged in the jar archive,,,,,,,,,,,,,,,,JBEAP-6929,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0aaif:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove the 'urn:jboss:domain:remoting:5.0' schame and corresponding model versions.,WFCORE-1943,12659638,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,dlofthouse,dlofthouse,06/Nov/16 8:59 AM,07/Nov/16 1:34 PM,29/Nov/16 3:50 PM,07/Nov/16 1:34 PM,,,,,,,3.0.0.Alpha12,,Remoting,,,,,0,affects_elytron,,,,,"When working on the management models we first need to check the last final release so that we can identify if we do need to increment the versions or not.

I had already added a clean version 4 ready for ongoing development.

Also on a related point it would be better if we can add the new version in one commit and then make changes in a subsequent commit - this way we can use various git tools to see the changes made otherwise the first set of changes are never visible.",,,,,,,,,,,,WFCORE-296,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1905,,,,,,0.0,0.0,,1|i0aadr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unneeded part of failure-description is printed in CLI for Elytron subsystem,WFCORE-1937,12659467,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,olukas,olukas,04/Nov/16 8:04 AM,04/Nov/16 8:05 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha11,,,,,,,,Security,Server,,,,0,user_experience,,,,,"For some part of Elytron subsystem some unneeded part of message is printed in failure-description - messages with prefix {{WFLYCTL0412}} and {{WFLYCTL0180}} should not be part of failure-description since they are unneeded and confusing for this kind of failures (see example).

Example:
Adding permission, but non existing module is used:
{code}
/subsystem=elytron/simple-permission-mapper=mapper:add(permission-mappings=[{permissions=[{action=read,class-name=org.wildfly.security.auth.permission.LoginPermission,target-name=someName,module=some.nonexist.module}]}])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {
        ""WFLYCTL0080: Failed services"" => {""org.wildfly.security.permission-mapper.mapper"" => ""org.jboss.msc.service.StartException in service org.wildfly.security.permission-mapper.mapper: org.jboss.modules.ModuleNotFoundException: some.nonexist.module:main
    Caused by: org.jboss.modules.ModuleNotFoundException: some.nonexist.module:main""},
        ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.security.permission-mapper.mapper""],
        ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined
    },
    ""rolled-back"" => true
}
{code}

Base on comment [1] we are assigning this Jira to Brian. Could you please clarify whether WildFly Core or Elytron subsystem are responsible for printing this message to failure-description?

[1] https://issues.jboss.org/browse/JBEAP-6886?focusedCommentId=13317330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13317330",,,,,,,,,,,,,,,,JBEAP-6909,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0a9i7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Value of parameters ""restart-required"" for fixed-*port attributes does not match reality for socket-binding and *-destination-outbound-socket-binding in CLI",WFCORE-1936,12659431,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,okotek,okotek,04/Nov/16 6:57 AM,07/Nov/16 1:40 PM,29/Nov/16 3:50 PM,07/Nov/16 1:40 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,user_experience,,,,,"{{fixed-port}} attribute of {{socket-binding}} and {{fixed-source-port}} attributes of {{*-destination-outbound-socket-binding}} define in its description that there is not necessary to do {{reload}} or {{restart}} for any of them. But reality is different. If you tries to change such attributes you are informed that {{reload}} is necessary.

The attributes are defined as {{""restart-required"" => ""no-services""}}, see {{/socket-binding-group=standard-sockets:read-resource-description(recursive=true)}}",,,,,,,,,,,,,,,,JBEAP-6904,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1910,,,,,,0.0,0.0,,1|i0a9bb:,9223372036854775807,,,,"Run CLI
* {{/socket-binding-group=standard-sockets/socket-binding=http:write-attribute(name=fixed-port,value=true)}}
* {{/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=mail-smtp:write-attribute(name=fixed-source-port,value=true)}}",,,,okotek,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Management model does not validate input values in interface section,WFCORE-1932,12659307,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,soul2zimate,soul2zimate,soul2zimate,03/Nov/16 10:47 PM,04/Nov/16 2:11 AM,29/Nov/16 3:50 PM,,3.0.0.Alpha11,,,,,,,,Domain Management,,,,,0,,,,,,"Management model does not validate input values for attributes in {{/interface}} section.

bq. Attribute indicating that part of the selection criteria for choosing an IP address for this interface should be whether or it the address fits in the given subnet definition. Value is a network IP address and the number of bits in the address' network prefix, written in ""slash notation""; e.g. ""192.168.0.0/16"". An 'undefined' value means this attribute is not relevant to the IP address selection.
In the description of {{subnet-match}} attribute it is clearly defined the format of input value. However the following command does not fail. 

{code}
/interface=public:write-attribute(name=subnet-match,value=""wrong-input"")
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{code}

bq. Attribute indicating that part of the selection criteria for choosing an IP address for this interface should be whether or not the address matches the given value. Value is either an IP address in IPv6 or IPv4 dotted decimal notation, or a hostname that can be resolved to an IP address. An 'undefined' value means this attribute is not relevant to the IP address selection.
There are also attributes which accept inet addresses - namely inet-address, loopback-address. Validation for these attributes is not performed either.

{code}
/interface=public:write-attribute(name=inet-address,value=""wrong-input"")
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1901,,,,,,0.0,0.0,,1|i0a8kv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extra commas in descriptions of *-outbound-socket-binding CLI resources,WFCORE-1931,12658857,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,soul2zimate,okotek,okotek,02/Nov/16 7:29 AM,15/Nov/16 5:38 PM,29/Nov/16 3:50 PM,15/Nov/16 5:38 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha13,,Server,,,,,0,user_experience,,,,,"There are extra commas in descriptions of children resources of _socket-binding-group_ CLI resource (_local-destination-outbound-socket-binding_ and _remote-destination-outbound-socket-binding_).

E.g., there is ""Configuration information for a, local destination, outbound socket binding."", there should be ""Configuration information for a local destination outbound socket binding.""",,,,,,,,,,,,,,,,JBEAP-6800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1899,https://github.com/wildfly/wildfly-core/pull/1941,,,,,0.0,3.0,,1|i0a5wn:,9223372036854775807,,,,Run CLI {{/socket-binding-group=standard-sockets:read-resource-description}},,,,okotek,,,03/Nov/16 10:26 AM;brian.stansberry;This is a WFCORE issue.,"14/Nov/16 6:48 AM;okotek;For the both local and remote destination outbound socket binding, there is still extra comma in 3.0.0.Alpha12. E.g. _""Configuration information for a local destination, outbound socket binding.""_ -> _""Configuration information for a local destination outbound socket binding.""_
",14/Nov/16 7:01 AM;soul2zimate;sorry for missing the second one. I opened a new PR for it. ,,,,,,,,,,,,,,,,,,,,,,,,
"Value of parameter ""restart-required"" for configuration attributes does not match reality for lots of subsystem in CLI",WFCORE-1930,12659302,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,swd847,swd847,swd847,03/Nov/16 8:22 PM,07/Nov/16 10:39 AM,29/Nov/16 3:50 PM,,,,,,,,,,,,,,,0,,,,,,"11:19:42,688 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 8) Attribute properties of resource /subsystem=iiop-openjdk is not marked as reload required
11:19:42,690 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute statistics-enabled of resource /subsystem=undertow is not marked as reload required
11:19:42,690 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute default-security-domain of resource /subsystem=undertow is not marked as reload required
11:19:42,690 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute buffer-size of resource /subsystem=undertow/buffer-cache=* is not marked as reload required
11:19:42,691 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute buffers-per-region of resource /subsystem=undertow/buffer-cache=* is not marked as reload required
11:19:42,691 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute max-regions of resource /subsystem=undertow/buffer-cache=* is not marked as reload required
11:19:42,691 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute default-host of resource /subsystem=undertow/server=* is not marked as reload required
11:19:42,691 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute servlet-container of resource /subsystem=undertow/server=* is not marked as reload required
11:19:42,691 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute task-keepalive of resource /subsystem=io/worker=* is not marked as reload required
11:19:42,692 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute task-max-threads of resource /subsystem=io/worker=* is not marked as reload required
11:19:42,692 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute io-threads of resource /subsystem=io/worker=* is not marked as reload required
11:19:42,692 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute stack-size of resource /subsystem=io/worker=* is not marked as reload required
11:19:42,692 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute buffer-size of resource /subsystem=io/buffer-pool=* is not marked as reload required
11:19:42,693 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute buffers-per-slice of resource /subsystem=io/buffer-pool=* is not marked as reload required
11:19:42,693 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 18) Attribute direct-buffers of resource /subsystem=io/buffer-pool=* is not marked as reload required
11:19:42,705 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute send-buffer-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute receive-buffer-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute buffer-region-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute transmit-window-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute receive-window-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-outbound-channels of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,706 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-inbound-channels of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,707 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute authorize-id of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,707 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute auth-realm of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,707 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute authentication-retries of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,707 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-outbound-messages of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,708 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-inbound-messages of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,708 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute heartbeat-interval of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,708 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-inbound-message-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,708 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute max-outbound-message-size of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,708 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute server-name of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,709 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 2) Attribute sasl-protocol of resource /subsystem=remoting/configuration=endpoint is not marked as reload required
11:19:42,711 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute default-web-module of resource /subsystem=undertow/server=*/host=* is not marked as reload required
11:19:42,712 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute default-response-code of resource /subsystem=undertow/server=*/host=* is not marked as reload required
11:19:42,712 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute disable-console-redirect of resource /subsystem=undertow/server=*/host=* is not marked as reload required
11:19:42,712 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute handler of resource /subsystem=undertow/server=*/host=*/location=* is not marked as reload required
11:19:42,713 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute predicate of resource /subsystem=undertow/server=*/host=*/location=*/filter-ref=* is not marked as reload required
11:19:42,713 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute priority of resource /subsystem=undertow/server=*/host=*/location=*/filter-ref=* is not marked as reload required
11:19:42,713 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute pattern of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,713 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute prefix of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,738 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute suffix of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,740 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute rotate of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,740 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute directory of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,740 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute use-server-log of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,741 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute relative-to of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,741 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute extended of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,742 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute predicate of resource /subsystem=undertow/server=*/host=*/setting=access-log is not marked as reload required
11:19:42,742 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute predicate of resource /subsystem=undertow/server=*/host=*/filter-ref=* is not marked as reload required
11:19:42,742 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute priority of resource /subsystem=undertow/server=*/host=*/filter-ref=* is not marked as reload required
11:19:42,742 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute domain of resource /subsystem=undertow/server=*/host=*/setting=single-sign-on is not marked as reload required
11:19:42,743 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute path of resource /subsystem=undertow/server=*/host=*/setting=single-sign-on is not marked as reload required
11:19:42,743 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute http-only of resource /subsystem=undertow/server=*/host=*/setting=single-sign-on is not marked as reload required
11:19:42,744 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute secure of resource /subsystem=undertow/server=*/host=*/setting=single-sign-on is not marked as reload required
11:19:42,744 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute cookie-name of resource /subsystem=undertow/server=*/host=*/setting=single-sign-on is not marked as reload required
11:19:42,746 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute path of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,747 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute cache-buffer-size of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,747 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute cache-buffers of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,747 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute directory-listing of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,747 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute follow-symlink of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,748 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute case-sensitive of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,748 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute safe-symlink-paths of resource /subsystem=undertow/configuration=handler/file=* is not marked as reload required
11:19:42,752 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute connections-per-thread of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,752 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute session-cookie-names of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,752 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute problem-server-retry of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,752 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute request-queue-size of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,753 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute max-request-time of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,753 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute cached-connections-per-thread of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,753 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute connection-idle-timeout of resource /subsystem=undertow/configuration=handler/reverse-proxy=* is not marked as reload required
11:19:42,753 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute scheme of resource /subsystem=undertow/configuration=handler/reverse-proxy=*/host=* is not marked as reload required
11:19:42,754 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute instance-id of resource /subsystem=undertow/configuration=handler/reverse-proxy=*/host=* is not marked as reload required
11:19:42,754 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute path of resource /subsystem=undertow/configuration=handler/reverse-proxy=*/host=* is not marked as reload required
11:19:42,776 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute max-concurrent-requests of resource /subsystem=undertow/configuration=filter/request-limit=* is not marked as reload required
11:19:42,776 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute queue-size of resource /subsystem=undertow/configuration=filter/request-limit=* is not marked as reload required
11:19:42,781 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute header-name of resource /subsystem=undertow/configuration=filter/response-header=* is not marked as reload required
11:19:42,781 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute header-value of resource /subsystem=undertow/configuration=filter/response-header=* is not marked as reload required
11:19:42,782 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute code of resource /subsystem=undertow/configuration=filter/error-page=* is not marked as reload required
11:19:42,782 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute path of resource /subsystem=undertow/configuration=filter/error-page=* is not marked as reload required
11:19:42,782 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute class-name of resource /subsystem=undertow/configuration=filter/custom-filter=* is not marked as reload required
11:19:42,782 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute module of resource /subsystem=undertow/configuration=filter/custom-filter=* is not marked as reload required
11:19:42,783 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute parameters of resource /subsystem=undertow/configuration=filter/custom-filter=* is not marked as reload required
11:19:42,783 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute management-socket-binding of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,783 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute advertise-socket-binding of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,783 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute security-key of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,783 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute advertise-protocol of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute advertise-path of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute advertise-frequency of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute health-check-interval of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute broken-node-timeout of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute worker of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,784 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute max-request-time of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,785 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute management-access-predicate of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,785 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute connections-per-thread of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,785 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute cached-connections-per-thread of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,785 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute connection-idle-timeout of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,785 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute request-queue-size of resource /subsystem=undertow/configuration=filter/mod-cluster=* is not marked as reload required
11:19:42,826 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 4) Attribute require-bean-descriptor of resource /subsystem=weld is not marked as reload required
11:19:42,826 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 4) Attribute non-portable-mode of resource /subsystem=weld is not marked as reload required
11:19:42,827 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 4) Attribute development-mode of resource /subsystem=weld is not marked as reload required
11:19:42,855 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute entries of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute auto-group of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute block-on-acknowledge of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute block-on-durable-send of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute block-on-non-durable-send of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute cache-large-message-client of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,856 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute call-failover-timeout of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute call-timeout of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute client-failure-check-period of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute client-id of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute compress-large-messages of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute confirmation-window-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute connection-load-balancing-policy-class-name of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,857 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute connection-ttl of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute consumer-max-rate of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute consumer-window-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute dups-ok-batch-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute factory-type of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute failover-on-initial-connection of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,858 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute group-id of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute ha of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute initial-connect-attempts of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute initial-message-packet-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute max-retry-interval of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute min-large-message-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,859 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute pre-acknowledge of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute producer-max-rate of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute producer-window-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute reconnect-attempts of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute retry-interval of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute retry-interval-multiplier of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,860 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute scheduled-thread-pool-max-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,861 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute expression of resource /subsystem=undertow/configuration=filter/expression-filter=* is not marked as reload required
11:19:42,878 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute module of resource /subsystem=undertow/configuration=filter/expression-filter=* is not marked as reload required
11:19:42,878 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute thread-pool-max-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,878 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute transaction-batch-size of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,878 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute target of resource /subsystem=undertow/configuration=filter/rewrite=* is not marked as reload required
11:19:42,878 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute use-global-pools of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,879 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute redirect of resource /subsystem=undertow/configuration=filter/rewrite=* is not marked as reload required
11:19:42,879 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 7) Attribute discovery-group of resource /subsystem=messaging-activemq/server=*/legacy-connection-factory=* is not marked as reload required
11:19:42,879 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute http-authentication-factory of resource /subsystem=undertow/application-security-domain=* is not marked as reload required
11:19:42,879 ERROR [org.jboss.as.controller] (ServerService Thread Pool -- 16) Attribute override-deployment-config of resource /subsystem=undertow/application-security-domain=* is not marked as reload required",,,,,,,,,,,,,,,,WFLY-7470,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0a8jz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
:validate-operation operation produces unclear failure message; pollutes server log with exceptions,WFCORE-1928,12659113,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,mjurc,kabirkhan,03/Nov/16 6:08 AM,08/Nov/16 8:15 PM,29/Nov/16 3:50 PM,08/Nov/16 8:15 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,CLI,Domain Management,,,,0,,,,,,"Operation {{:validate-operation}} produces {{java.util.NoSuchElementException}} when no parameter is passed to it, polluting the server log with warning with stack trace.
{{jboss-cli}}:
{code}[standalone@localhost:9990 /] :validate-operation                                                  
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.util.NoSuchElementException: No child 'value' exists"",
    ""rolled-back"" => true
}
{code}
{code}08:58:13,409 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 17) WFLYCTL0013: Operation (""validate-operation"") failed - address: ([]): java.util.NoSuchElementException: No child 'value' exists
	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:387)
	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:302)
	at org.jboss.dmr.ModelNode.require(ModelNode.java:875)
	at org.jboss.as.controller.operations.common.ValidateOperationHandler.execute(ValidateOperationHandler.java:91)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}
Upon passing this operation an illegal parameter, {{java.lang.IllegalArgumentException}} is produced instead of well formed failure message.
{{jboss-cli}}:
{code}[standalone@localhost:9990 /] :validate-operation(value=nonsense)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException"",
    ""rolled-back"" => true
}
{code}
{{server.log}}:
{code}09:01:10,367 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 19) WFLYCTL0013: Operation (""validate-operation"") failed - address: ([]): java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.getChild(ModelValue.java:115)
	at org.jboss.dmr.ModelNode.get(ModelNode.java:861)
	at org.jboss.as.controller.operations.common.ValidateOperationHandler.execute(ValidateOperationHandler.java:92)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}
This usage, however, does not pollute the server log with warning with stack trace:
{{jboss-cli}}:
{code}[standalone@localhost:9990 /] :validate-operation(value={""nonsense"" => ""nonsense""})
Failed to handle ':validate-operation(value={""nonsense"" => ""nonsense""})': java.lang.IllegalArgumentException
{code}",,,,,,,,,,,,,,,,JBEAP-6846,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1894,,,,,,0.0,1.0,,1|i0a7fz:,9223372036854775807,,,,,,,,,,,03/Nov/16 10:43 AM;kabirkhan;Duplicates WFCORE-1926,,,,,,,,,,,,,,,,,,,,,,,,,,
There is inconsistency in Elyton mapped-regex-realm-mapper model between DMR and XSD.,WFCORE-1927,12659107,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,hsvabek,hsvabek,03/Nov/16 5:48 AM,03/Nov/16 11:38 AM,29/Nov/16 3:50 PM,03/Nov/16 11:38 AM,,,,,,,,,Security,,,,,0,,,,,,"There is inconsistency in Elyton mapped-regex-realm-mapper model between DMR and XSD.

There is mappedRegexRealmMapperType with ""realm-mapping"" element in XSD [1] but
in DMR is ""realm-map"" attribute.
Base on this are wrong information in XSD about ""from"", ""to"" attributes

These inconsistencies should be unified.

[1] https://github.com/wildfly-security/elytron-subsystem/blob/580569d17cb6c3b1e823a2149b156c36d186f0dd/src/main/resources/schema/wildfly-elytron_1_0.xsd#L1994",,,,,,,,,,,,,,,,JBEAP-6847,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0a7en:,9223372036854775807,,,,,,,,,,,"03/Nov/16 6:24 AM;hsvabek;This issue is OK, I missed mapping from DMR to XML.",,,,,,,,,,,,,,,,,,,,,,,,,,
:validate-address operation produces unclear failure message; pollutes server log with exceptions,WFCORE-1926,12659071,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,mjurc,brian.stansberry,02/Nov/16 5:05 PM,08/Nov/16 8:12 PM,29/Nov/16 3:50 PM,08/Nov/16 8:12 PM,,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Operation {{:validate-address}} produces IllegalArgumentException with wrong parameters instead of well formed failure description:
{{jboss-cli}}:
{code}[standalone@localhost:9990 /] :validate-address(value=nonsense)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException"",
    ""rolled-back"" => true
}
{code}
{{server.log}}:
{code}13:14:39,102 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 15) WFLYCTL0013: Operation (""validate-address"") failed - address: ([]): java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.asList(ModelValue.java:143)
	at org.jboss.dmr.ModelNode.asList(ModelNode.java:1389)
	at org.jboss.as.controller.PathAddress.pathAddress(PathAddress.java:72)
	at org.jboss.as.controller.operations.common.ValidateAddressOperationHandler.execute(ValidateAddressOperationHandler.java:77)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}
{{jboss-cli}}:
{code}[standalone@localhost:9990 /] :validate-address(value=(nonsense))
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException"",
    ""rolled-back"" => true
}
{code}
{{server.log}}:
{code}13:16:25,040 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 17) WFLYCTL0013: Operation (""validate-address"") failed - address: ([]): java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.asList(ModelValue.java:143)
	at org.jboss.dmr.ModelNode.asList(ModelNode.java:1389)
	at org.jboss.as.controller.PathAddress.pathAddress(PathAddress.java:72)
	at org.jboss.as.controller.operations.common.ValidateAddressOperationHandler.execute(ValidateAddressOperationHandler.java:77)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}
However, the following erroneous input does not pollute server.log with warning:
{code}[standalone@localhost:9990 /] :validate-address(value={""nonsense""=>""nonsense""})
Failed to handle ':validate-address(value={""nonsense""=>""nonsense""})': java.lang.IllegalArgumentException
{code}",,,,,,,,,,,,,,,,JBEAP-6809,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1893,,,,,,0.0,0.0,,1|i0a77r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use a subsystem to manage configuration changes in the future,WFCORE-1922,12658909,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,02/Nov/16 8:57 AM,18/Nov/16 11:58 AM,29/Nov/16 3:50 PM,18/Nov/16 11:58 AM,3.0.0.Alpha11,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"Currently configuration-changes are managed as a part of the 'kernel' of WildFly Core. Moving this feature to a proper subsystem is more appropriate  as it would provide a nice way to deploy on managed servers according to a profile instead of a host.
Making this subsystem host-enabled we could also just configure it at a host level.",,,,,,,,,,,,,,,,,,WFCORE-1827,,,,,,WFCORE-1642,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1932,,,,,,0.0,0.0,,1|i0a687:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Problem with capability-reference to resource whose name is number with ZERO(s) prefix.,WFCORE-1921,12658877,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ctomc,hsvabek,hsvabek,02/Nov/16 7:55 AM,02/Nov/16 10:57 AM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Problem with resources which name contains only NUMBERS.
Particularly the number which beginning with ZERO(s).

*Scenario*
* I have resources which name contains only numbers with ZERO(s) prefix
* I want set capability-reference to it
* e.g. /subsystem=elytron/aggregate-role-mapper001=aggregateRoleMapper:add(role-mappers=[001,111])

*Actual result*
{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0369: Required capabilities are not available:
    org.wildfly.security.role-mapper.1; There are no known registration points which can provide this capability."",
    ""rolled-back"" => true
}
{code}

*Expected result*
{code}
Success
{code}


*NOTE*
In my opinion is this global problem.
I tried it with another subsystem and problem is there too. 
{code}
/subsystem=datasources/data-source=001:add(connection-url=""url"", jndi-name=""java:jboss/datasources/001"", driver-name=h2)
/subsystem=infinispan/cache-container=server/local-cache=default/store=string-jdbc:add(data-source=001)
{code}",,,,,,,,,,,,,,,,JBEAP-6806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i0a613:,9223372036854775807,,,,"* run EAP server
./bin/standalone.sh
* run CLI
./bin/jboss-cli.sh -c
if applicaple add Elytron extension and Elytron subsystem and reload server
/extension=org.wildfly.extension.elytron:add()
/subsystem=elytron:add()
reload
* /subsystem=elytron/add-prefix-role-mapper=001:add(prefix=prefix001)
* /subsystem=elytron/add-prefix-role-mapper=111:add(prefix=prefix002)
* */subsystem=elytron/aggregate-role-mapper=aggregateRoleMapper001:add(role-mappers=[001,111])*
",,,,,,,"02/Nov/16 10:02 AM;brian.stansberry;I'm changing the component as the reproducer steps show nothing related to the client. [~ctomc], please correct the component and assignee on the linked JBEAP as well. The fact that datasources also show a problem leads me to pick Domain Management instead of the security subsystem component.

BTW, in the reproducer steps ""/subsystem=elytron/aggregate-role-mapper001=aggregateRoleMapper"" looks like a typo, with the 001 in the address element key rather than the value. I assume the problem is still reproducible with that corrected though, as the failure message is unrelated to a bad resource address and the datasource example also given doesn't have that problem.","02/Nov/16 10:57 AM;hsvabek;[~brian.stansberry] Yes, it was typo. I corrected it. Of course it is reproducible with correct command.",,,,,,,,,,,,,,,,,,,,,,,,,
"Tab completion for LIST attribute is broken, it doesn't add end bracket ""]"".",WFCORE-1920,12658856,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,hsvabek,hsvabek,02/Nov/16 7:29 AM,03/Nov/16 4:39 PM,29/Nov/16 3:50 PM,03/Nov/16 4:39 PM,,,,,,,3.0.0.Alpha12,,CLI,,,,,0,,,,,,"Tab completion for LIST attribute is broken, it doesn't add end bracket ""]"".

I process this CLI command
{code}
/subsystem=elytron/aggregate-role-mapper=aggregateRoleMapper:add(role-mappers=[prefMapper001,prefMapper002<TAB>
{code}

*Actual result*
{code}
/subsystem=elytron/aggregate-role-mapper=aggregateRoleMapper:add(role-mappers=[prefMapper001,prefMapper002)

{code}

*Expected result*
{code}
/subsystem=elytron/aggregate-role-mapper=aggregateRoleMapper:add(role-mappers=[prefMapper001,prefMapper002])
{code}",,,,,,,,,,,,,,,,JBEAP-6802,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1895,,,,,,0.0,1.0,,1|i0a5wf:,9223372036854775807,,,,"* run EAP server
./bin/standalone.sh
* run CLI
./bin/jboss-cli.sh -c
if applicaple add Elytron extension and Elytron subsystem and reload server
/extension=org.wildfly.extension.elytron:add()
/subsystem=elytron:add()
reload
* /subsystem=elytron/add-prefix-role-mapper=prefMapper001:add(prefix=prefix001)
* /subsystem=elytron/add-prefix-role-mapper=prefMapper002:add(prefix=prefix002)
* */subsystem=elytron/aggregate-role-mapper=aggregateRoleMapper:add(role-mappers=[prefMapper001,prefMapper002<TAB>*

",,,,,,,"03/Nov/16 7:51 AM;jdenise;Hi,
this list is special in the fact that it is a list of capabilities reference. We need to fix this issue and enhance completion:
- to only propose what the user has not already typed. 
- to close the list if all capabilities are already there.
- to add list separator after a valid capability being entered and some more capabilities could be added.
- to close the list if no capabilities are present.
",,,,,,,,,,,,,,,,,,,,,,,,,,
CLI client freezes for removed management realm,WFCORE-1919,12658846,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,02/Nov/16 7:21 AM,02/Nov/16 5:29 PM,29/Nov/16 3:50 PM,02/Nov/16 5:29 PM,,,,,,,3.0.0.Alpha12,,,,,,,0,,,,,,"*Steps to Reproduce:*
# ./standalone.sh
# ./jboss-cli.sh -c
# /core-service=management/security-realm=ManagementRealm/authentication=local:remove
# reload
# <Ctrl+C>

The client is already connected, Management realm is removed, client is reloaded. 
The user is prompted for UserName (local-auth has been disabled).
Ctrl-C is typed.
During Ctrl-C handling, the client is closed although it is ""reconnecting"" and has kept a lock. This lock is required to close the client. Lock that will never been released.

",,,,,,,,,,,,,,,,JBEAP-6768,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1891,,,,,,0.0,0.0,,1|i0a5u7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
re-enable quote parsing,WFCORE-1918,12658611,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,hisanobu.okuda,hisanobu.okuda,01/Nov/16 10:59 PM,15/Nov/16 5:27 PM,29/Nov/16 3:50 PM,15/Nov/16 5:27 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,"The fix for WFCORE-1804 was committed [here|https://github.com/wildfly/wildfly-core/commit/027bfe959988b25e45771491e494ca61c19a986b#diff-c929deeb25b1e0886f6c256907ea7c44].
It has a side-effect that it disables quote parsing. Now the [another fix|https://github.com/aeshell/aesh/commit/0e8aa5cf514d5af81b16f7741c92a6547f4be0a1] which does not have the side-effect was committed in [aesh|https://github.com/aeshell/aesh]. The following line in the [previous fix|ttps://github.com/wildfly/wildfly-core/commit/027bfe959988b25e45771491e494ca61c19a986b#diff-c929deeb25b1e0886f6c256907ea7c44] should be removed, when the new aesh version is released (0.66.11 or 12?).

??cli/src/main/java/org/jboss/as/cli/impl/CommandContextImpl.java:495??
{code}
        settings.parsingQuotes(false);
{code}",,,,,,,,,,,,,,,,,,,,,WFCORE-1970,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1928,,,,,,0.0,5.0,,1|i0a5i7:,9223372036854775807,,,,,,,,,,,"02/Nov/16 12:05 PM;jdenise;Hi,
do you have an example of a regression caused by WFCORE-1804?
Thanks.
JF","04/Nov/16 8:22 AM;hisanobu.okuda;Hi,
In EAP7, jboss-cli shows the sub prompt ""> "" for an open quote, 
{code}
[standalone@localhost:9990 /] /system-property=foo2:add(value=""vvv
> 
{code}
But the latest wildfly-core does not.
Our customer strongly disagree with it and insist that the behavior should be same as EAP7.","04/Nov/16 8:38 AM;jdenise;So it seems that we have a conflict in behaviour between 6.4 and 7.0
In 6.4: 
[standalone@localhost:9990 /] /system-property=foo2:add(value=""vvv
[standalone@localhost:9990 /]
in 7.0:
[standalone@localhost:9990 /] /system-property=foo2:add(value=""vvv
>
in latest core we are back to 6.4 behaviourbyy fixing WFCORE-1804

[~mkopecky], 
didn't we catch this change of behavior for 7.0?

","04/Nov/16 8:46 AM;jdenise;Perhaps that the fix for WFCORE-1804 should be done for comment only.

We should not parse "" when in comments ==> 6.4 behaviour.
We should parse them if not in comments ==> 7.0 behaviour.

[~mkopecky], seems that would fix JBEAP-6037","07/Nov/16 4:46 AM;mkopecky;[~jdenise]: In my point of view, this is good solution:
# parse ' and "" and display the '>' prompt if ' or "" are not escaped (\' or \"") and if ' and "" are not closed
# Do not parse the ' and "" when they are located in comment (a line that starts with #) ",,,,,,,,,,,,,,,,,,,,,,
ParseUtils.parseAttributeValue should not fail due to DMR type conversions,WFCORE-1915,12658181,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,31/Oct/16 3:24 PM,04/Nov/16 6:18 PM,29/Nov/16 3:50 PM,04/Nov/16 6:18 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"The task of ParseUtils.parseAttributeValue is to convert a string into a ModelNode. The type of the ModelNode is not particularly important, as later code will do type conversion. And, it is *not* the job of this method to do validation; there is other code that does that. So, the type conversion this method does should not be allowed to produce failures. Continuing to try the conversion is ok, although not required, but if a conversion can't succeed the pre-conversion ModelType.STRING node should be returned.",,,,,,,,,,,,,,,,,,,,,,,,,JBEAP-6668,JBEAP-6667,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1888,,,,,,0.0,0.0,,1|i0a41b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test default CLI assignee,WFCORE-1914,12658149,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,,jdenise,jdenise,31/Oct/16 11:37 AM,17/Nov/16 3:44 AM,29/Nov/16 3:50 PM,17/Nov/16 3:44 AM,,,,,,,,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0a3vr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tab completion causes NUL characters ('\0') to be injected...sometimes,WFCORE-1909,12657551,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,jdenise,dmlloyd,dmlloyd,27/Oct/16 10:16 AM,15/Nov/16 5:27 PM,29/Nov/16 3:50 PM,15/Nov/16 5:27 PM,,,,,,,3.0.0.Alpha13,,CLI,,,,,0,,,,,,"I noticed while testing my subsystem that sometimes using tab-complete on an attribute causes NUL ('\0') characters to be injected into the input.  These characters are invisible on the screen but cause XML marshalling to fail as that character is forbidden.

My ""less"" output of .jboss-cli-history looks something like this:
{noformat}
embed-server --std-out=echo
cd subsystem=discovery
./static-provider=test:add(services=[{uri=^@^@""local"", abstract-type=""ejb"", abstract-type-authority=""jboss""}])
./static-provider=test4:add(services=[{uri=""local"", abstract-type=""ejb"", abstract-type-authority=""jboss""}])
{noformat}

In the first ""test:add"" case I used tab-completion; in the second ""test4:add"" case I typed it out by hand.  The ""^@"" are in inverse video in less, indicating a NUL character.",,,,,,,,,,,,AESH-424,WFCORE-1970,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1928,,,,,,0.0,7.0,,1|i0a1vj:,9223372036854775807,,,,,,,,,,,"28/Oct/16 4:40 AM;jdenise;David,
is completion proposing you something for the uri property value? It would help to know the completion sequence.
I guess that the services argument is ruled by a value type and the completion adds automatically for you =[{
Then you are proposed a the list of properties of services, you type part of uri, then TAB ""="" is added automatically then you press TAB multiple time (twice it seems).

Is that the steps you have followed?

Thanks.
JF","28/Oct/16 5:17 AM;jdenise;It would also help to have a dump of the services valueType:
./static-provider=test:read-operation-description(name=add
","28/Oct/16 8:05 AM;dmlloyd;Honestly I just tab without even thinking about it so I'm not sure what the exact sequence is but I think I had done:
* Type ...add(
* Tab
* Tab gives ...add(services=[{
* Tab
* Tab gives ...add(services=[{uri=
* Tab
* Tab
* Tab... etc.","28/Oct/16 8:22 AM;jdenise;Thank you for your time,
in case you have some more free cycles,...
As soon as you use tab you get the '\0' right? Whatever the operation?
What about /deployment=toto:add(content=[{url=<TAB>

Any chance to get the services value-type? Perhaps we have strange values there.

Thanks.
JF","28/Oct/16 8:52 AM;dmlloyd;I'm not certain when the invalid characters actually appear.  I assume it must be after I tab, but that's really a guess (there's no visual on-screen indicator that the character is there, at least not on my terminal).","28/Oct/16 8:53 AM;dmlloyd;Here's all the service code at the time that I hit the issue:

https://github.com/wildfly/wildfly-core/pull/1866/commits/9c648ddae228082b36fe6bbb56e55209cf141a91","31/Oct/16 6:00 AM;jdenise;Hi David,
thank-you for the additional information. I ran your branch, the value-type is a simple String, nothing special there. I checked CLI code, no way to internally inject this character,

I found an explanation to what you are experiencing. It could be that, as our IDE are offering completion with the combination of ""Ctrl- space"" (at least NetBeans and Eclipse), you typed at some point this combination to complete the CLI as you are used to do in your IDE. In the terminal Ctrl-space means '\0' character...

I was able to reproduce the problem. Type 'Ctrl space', nothing is displayed in the CLI console although '\0' has been stored.

I am going to see if we can filter out (or make them visible) these characters at the Aesh level. Aesh sees all characters and has the choice to keep them or not.",,,,,,,,,,,,,,,,,,,,
Tab completion suggest writing attribute which has access type metric and is not writable,WFCORE-1908,12658019,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,31/Oct/16 4:13 AM,02/Nov/16 5:27 PM,29/Nov/16 3:50 PM,02/Nov/16 5:27 PM,3.0.0.Alpha11,,,,,,3.0.0.Alpha12,,CLI,,,,,0,,,,,,"CLI tab completion suggests attributes that are not writable and their access-type is {{metric}}
Example {code}
/subsystem=messaging-activemq/server=default/jms-queue=DLQ:write-attribute(name=<TAB>
consumer-count  delivering-count  entries  legacy-entries  message-count  messages-added  scheduled-count  
{code}

From executing {{:read-resource-description}} we can see, attributes consumer-count, delivering-count, message-count, messages-added, scheduled-count are of type metric.

On attempt to write metric attribute, for example message-count, non writable error is printed {code}
[standalone@localhost:9990 jms-queue=q] :write-attribute(name=message-count, value=5)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0048: Attribute message-count is not writable"",
    ""rolled-back"" => true
}
{code}

CLI should not suggest writing attributes that are not writable.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1887,,,,,,0.0,0.0,,1|i0a33z:,9223372036854775807,,,,"Start EAP in standalone-full-ha profile {code} sh standalone.sh -c standalone-full-ha.xml {code}
Connect with CLI and navigate to jms-queue on messaging subsystem {code} cd subsystem=messaging-activemq/server=default/jms-queue=DLQ
{code}
Try to write attribute and as a name, attributes of type metric are also suggested. {code} :write-attribute(name=
consumer-count  delivering-count  entries  legacy-entries  message-count  messages-added  scheduled-count  
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"standalone.bat is unable to start from directory ""jboss(eap)"" on Windows",WFCORE-1906,12657794,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ctomc,ctomc,ctomc,28/Oct/16 10:32 AM,28/Oct/16 4:51 PM,29/Nov/16 3:50 PM,28/Oct/16 4:51 PM,3.0.0.Alpha10,,,,,,3.0.0.Alpha11,,Scripts,,,,,0,,,,,,"standalone.bat is unable to start from directory ""jboss(eap)"" on Windows

This is regression against EAP 7.1.0.DR3.

Actual results:
{noformat}
C:\Users\Administrator\playground\7.1.0.DR5\jboss(eap)\bin>standalone.bat
Calling ""C:\Users\Administrator\playground\7.1.0.DR5\jboss(eap)\bin\standalone.conf.bat""
""JAVA_OPTS already set in environment; overriding default settings with values: -Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:Me
taspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman""
""GC_LOG set in environment to true""
Setting JAVA property to ""C:\jdk1.8.0_45\bin\java""
\standalone\log\gc.log"" -XX:-TraceClassUnloading -Dprogram.name=standalone.bat -Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:Met
aspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman"" was unexpe
cted at this time.
C:\Users\Administrator\playground\7.1.0.DR5\jboss(eap)\bin>
{noformat}",,,,,,,,,,,,,,,,JBEAP-6182,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1886,,,,,,0.0,0.0,,1|i0a2lz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
windows service (service.bat) failed to install if the value of /serviceuser has a white space inside,WFCORE-1905,12656819,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,bmaxwell,bmaxwell,25/Oct/16 8:51 PM,28/Oct/16 4:50 PM,29/Nov/16 3:50 PM,28/Oct/16 4:50 PM,,,,,,,3.0.0.Alpha11,,Scripts,,,,,0,,,,,,"When using ""service.bat install /serviceuser ..."" command to install window service, if the account name behind /serviceuser has a whit space inside like "".\JBoss User"", it will failed to install windows service.

Run command: service.bat install /serviceuser "".\JBoss User"" /servicepass ""change it"" /startup /debug

When starting it, an error window poped up:
{code}
Windows could not start the JBossEAP6 on Local Computer.
For more information, review the System Event Log. 
If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code1.
{code}

Additional info:
Possible fix is editing ""service.bat"" and add double quotation marks on %SERVICE_USER% 

From 
{code}
set RUNAS=--ServiceUser=%SERVICE_USER% --ServicePassword=%SERVICE_PASS%
{code}

to
{code}
set RUNAS=--ServiceUser=""%SERVICE_USER%"" --ServicePassword=""%SERVICE_PASS%""
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1886,,,,,,0.0,0.0,,1|i09zu7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Slaves receiving an exception during registration hang and don't exit,WFCORE-1903,12657786,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,luck3y,luck3y,luck3y,28/Oct/16 10:05 AM,28/Oct/16 10:15 AM,29/Nov/16 3:50 PM,28/Oct/16 10:14 AM,,,,,,,,,Domain Management,,,,,0,,,,,,Existing PR here: https://github.com/wildfly/wildfly-core/pull/1881,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0a2k7:,9223372036854775807,,,,,,,,,,,"28/Oct/16 10:15 AM;luck3y;Accidently tested against wrong branch, so not really a bug. ",,,,,,,,,,,,,,,,,,,,,,,,,,
Deployment operation browse-content(archive=true) does not return archives in archived deployments,WFCORE-1896,12657045,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mjurc,mjurc,26/Oct/16 5:44 AM,07/Nov/16 3:31 PM,29/Nov/16 3:50 PM,07/Nov/16 3:31 PM,3.0.0.Alpha10,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Deployment operation browse-content(archive=true) does not return archives in archived deployments:
{code}[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content()
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""jboss-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63190L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12256L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.xml"",
            ""directory"" => false,
            ""file-size"" => 5582L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.properties"",
            ""directory"" => false,
            ""file-size"" => 143L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/"",
            ""directory"" => true
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/"",
            ""directory"" => true
        },
        {
            ""path"" => ""META-INF/maven/"",
            ""directory"" => true
        },
        {
            ""path"" => ""META-INF/MANIFEST.MF"",
            ""directory"" => false,
            ""file-size"" => 130L
        },
        {
            ""path"" => ""META-INF/application.xml"",
            ""directory"" => false,
            ""file-size"" => 802L
        },
        {
            ""path"" => ""META-INF/kitchensink-ear-quickstart-ds.xml"",
            ""directory"" => false,
            ""file-size"" => 1955L
        },
        {
            ""path"" => ""META-INF/"",
            ""directory"" => true
        }
    ]
}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content(archive=true)
{""outcome"" => ""success""}
{code}
It works correctly with exploded deployments:
{code}[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:undeploy
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:explode
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:deploy
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content(archive=true)
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""jboss-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63190L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12256L
        }
    ]
}
{code}",,,,,,,,,,,,,,,,JBEAP-6632,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1912,,,,,,0.0,0.0,,1|i0a02v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wildfly-10.0.0.Final deployment crash,WFCORE-1890,12613656,Bug,Reopened,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,jason.morgan,jason.morgan,06/Apr/16 5:23 PM,24/Oct/16 10:54 AM,29/Nov/16 3:50 PM,,2.2.0.Final,,,,,,,,Deployment Scanner,,,,,2,,,,,,"Having a war in the deployment directory and then ""replacing"" a deployment through the web console causes the server to crash without any logging on restart",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,16.0,,1|i0337r:,9223372036854775807,,,,"put a war in the deployment directory
start up wildfly
log in to the web console, you should see the war there
""replace"" the war with an updated one (I have not tried a war of the same version)
the web console responds with ""success""
restart the server and It will fail to start with nothing in the logs.  ",,,,,,,"19/Oct/16 3:26 PM;mp4783;We are experiencing similar behavior using WildFly 10.0.0 with Camunda BPM 7.5.3-ee.  I wish I could help with this, but I think the only resolution is to deploy using only one method and don't mix deployments place manually in the deployment directory with those deployed through the console GUI, command line interface, or management API interface.","19/Oct/16 3:31 PM;ctomc;Does this still happen on 10.1.0? As there was quite some fixes in this area
","19/Oct/16 4:00 PM;mp4783;I've no idea because we use a distribution of WildFly that is packaged with the Camunda distribution.  That said, there's probably nothing stopping us from using a separate WildFly distribution other than dependencies that Camunda resolves for us in the distribution package.  

I don't know if they're planning to bump the version.","19/Oct/16 4:08 PM;ctomc;you can manually install camuda into 10.1, see docs on how to do that https://docs.camunda.org/manual/7.5/installation/full/jboss/manual/",19/Oct/16 4:24 PM;lafr;Next version of Camunda will we packaged with Wildfly 10.1. See https://app.camunda.com/jira/browse/CAM-6790.,"19/Oct/16 5:15 PM;mp4783;The Camunda fix is for 7.6, which is still in Alpha testing.  I'll see about doing a manual setup. And get back to you.

I'm not sure this condition is consistently reproducible, unless someone has a specific sequence of steps to cause it.  Examination of the logs showed nothing more than the new deployment being rejected because a similar deployment was already registered.  Even switching version numbers didn't help.  However, I'm not sure what circumstances are required to reproduce the server crash.","20/Oct/16 1:46 AM;jaikiran;{quote}
Examination of the logs showed nothing more than the new deployment being rejected because a similar deployment was already registered.
{quote}

Can you paste that log message(s) here? Or better still, upload the server.log file?
","20/Oct/16 2:09 PM;mp4783;I tried Camunda 7.6.0-alpha5-ee with the associated WildFly 10.1.0 instance.  Deployed my process and tested it.  I then incremented the version (0.0.2-SNAPSHOT) of the workflow (in the Maven pom file), built it, and then attempted to ADD it to the WildFly server as new deployment. 

If failed and corrupted the existing 0.0.1-SNAPSHOT version.  Only after removing the 0.0.1-SNAPSHOT (now corrupted) version of the process could I then deploy the 0.0.2-SNAPSHOT deployment.  I should note that I changed nothing except the version number in the Maven pom file.

This means that we cannot deploy an updated workflow

{{2016-10-20 17:54:57,764 INFO  [org.camunda.bpm.container.impl.jboss.deployment.processor.ProcessApplicationProcessor] (MSC service thread 1-8) Detected user-provided @ProcessApplication component with name 'com.att.gcs.bizops.cop.core.template.messagehandler.PrintCounterApplication'.
2016-10-20 17:54:57,942 INFO  [org.camunda.bpm.container.impl.jboss.service.ProcessApplicationDeploymentService] (ServerService Thread Pool -- 81) Deployment summary for process archive 'PrintCounter' of process application 'PrintCounter':

        printCounter1.bpmn
        printCounter1.png

2016-10-20 17:54:57,942 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 78) WFLYUT0021: Registered web context: /PrintCounter-0.0.2-SNAPSHOT
2016-10-20 17:54:58,004 INFO  [org.camunda.bpm.application] (ServerService Thread Pool -- 81) ENGINE-07021 ProcessApplication 'PrintCounter' registered for DB deployments [f0da6a2a-96ed-11e6-8fed-0050568b3e38]. Will execute process definitions

        printCounter1[version: 1, id: printCounter1:1:f0ec6b8d-96ed-11e6-8fed-0050568b3e38]
Deployment does not provide any case definitions.
2016-10-20 17:54:58,007 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC000001: Failed to start service org.camunda.bpm.platform.process-application-module.""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main"".START: org.jboss.msc.service.StartException in service org.camunda.bpm.platform.process-application-module.""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main"".START: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered
        at org.camunda.bpm.container.impl.jboss.service.ProcessApplicationStartService.start(ProcessApplicationStartService.java:162)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered
        at org.jboss.msc.service.ServiceRegistrationImpl.setInstance(ServiceRegistrationImpl.java:158)
        at org.jboss.msc.service.ServiceControllerImpl.startInstallation(ServiceControllerImpl.java:235)
        at org.jboss.msc.service.ServiceContainerImpl.install(ServiceContainerImpl.java:768)
        at org.jboss.msc.service.ServiceTargetImpl.install(ServiceTargetImpl.java:223)
        at org.jboss.msc.service.ServiceControllerImpl$ChildServiceTarget.install(ServiceControllerImpl.java:2401)
        at org.jboss.msc.service.ServiceBuilderImpl.install(ServiceBuilderImpl.java:317)
        at org.camunda.bpm.container.impl.jboss.service.ProcessApplicationStartService.start(ProcessApplicationStartService.java:156)
        ... 5 more

2016-10-20 17:54:58,010 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 7) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""PrintCounter-0.0.2-SNAPSHOT.war"")]) - failure description: {
    ""WFLYCTL0080: Failed services"" => {""org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START"" => ""org.jboss.msc.service.StartException in service org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered
    Caused by: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered""},
    ""WFLYCTL0412: Required services that are not installed:"" => [""org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined
}
2016-10-20 17:54:58,013 ERROR [org.jboss.as.server] (External Management Request Threads -- 7) WFLYSRV0021: Deploy of deployment ""PrintCounter-0.0.2-SNAPSHOT.war"" was rolled back with the following failure message:
{
    ""WFLYCTL0080: Failed services"" => {""org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START"" => ""org.jboss.msc.service.StartException in service org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered
    Caused by: org.jboss.msc.service.DuplicateServiceException: Service org.camunda.bpm.platform.process-application.PrintCounter is already registered""},
    ""WFLYCTL0412: Required services that are not installed:"" => [""org.camunda.bpm.platform.process-application-module.\""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main\"".START""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined
}
2016-10-20 17:54:58,025 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 78) WFLYUT0022: Unregistered web context: /PrintCounter-0.0.2-SNAPSHOT
2016-10-20 17:54:58,073 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment PrintCounter-0.0.2-SNAPSHOT.war (runtime-name: PrintCounter-0.0.2-SNAPSHOT.war) in 59ms
2016-10-20 17:54:58,075 INFO  [org.jboss.as.controller] (External Management Request Threads -- 7) WFLYCTL0183: Service status report
WFLYCTL0186:   Services which failed to start:      service org.camunda.bpm.platform.process-application-module.""deployment.PrintCounter-0.0.2-SNAPSHOT.war:main"".START


*This is what an attempt to start the process after the failed deployment looked like:*

2016-10-20 17:59:04,510 ERROR [org.camunda.bpm.engine.context] (default task-142) ENGINE-16006 BPMN Stack Trace:
        ServiceTask_1 (activity-execute, ProcessInstance[e386486d-96ee-11e6-8fed-0050568b3e38])
        ServiceTask_1
          ^
          |
        StartEvent_1

2016-10-20 17:59:04,512 ERROR [org.camunda.bpm.engine.context] (default task-142) ENGINE-16004 Exception while closing command context: ENGINE-09008 Exception while instantiating class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]: org.camunda.bpm.engine.ProcessEngineException: ENGINE-09008 Exception while instantiating class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.camunda.bpm.engine.impl.util.EngineUtilLogger.exceptionWhileInstantiatingClass(EngineUtilLogger.java:78)
        at org.camunda.bpm.engine.impl.util.ClassDelegateUtil.instantiateDelegate(ClassDelegateUtil.java:50)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior.getActivityBehaviorInstance(ClassDelegateActivityBehavior.java:109)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior$1.call(ClassDelegateActivityBehavior.java:65)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior$1.call(ClassDelegateActivityBehavior.java:62)
        at org.camunda.bpm.engine.impl.bpmn.behavior.AbstractBpmnActivityBehavior.executeWithErrorPropagation(AbstractBpmnActivityBehavior.java:107)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior.execute(ClassDelegateActivityBehavior.java:62)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationActivityExecute.execute(PvmAtomicOperationActivityExecute.java:41)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationActivityExecute.execute(PvmAtomicOperationActivityExecute.java:26)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionNotifyListenerStart.eventNotificationsCompleted(PvmAtomicOperationTransitionNotifyListenerStart.java:56)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionNotifyListenerStart.eventNotificationsCompleted(PvmAtomicOperationTransitionNotifyListenerStart.java:26)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:65)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionCreateScope.scopeCreated(PvmAtomicOperationTransitionCreateScope.java:34)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationCreateScope.execute(PvmAtomicOperationCreateScope.java:49)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationCreateScope.execute(PvmAtomicOperationCreateScope.java:23)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:112)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.PvmExecutionImpl.start(PvmExecutionImpl.java:231)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.start(ExecutionEntity.java:433)
        at org.camunda.bpm.engine.impl.cmd.StartProcessInstanceCmd.execute(StartProcessInstanceCmd.java:55)
        at org.camunda.bpm.engine.impl.cmd.StartProcessInstanceCmd.execute(StartProcessInstanceCmd.java:31)
        at org.camunda.bpm.engine.impl.interceptor.CommandExecutorImpl.execute(CommandExecutorImpl.java:24)
        at org.camunda.bpm.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:104)
        at org.camunda.bpm.engine.impl.interceptor.JtaTransactionInterceptor.execute(JtaTransactionInterceptor.java:58)
        at org.camunda.bpm.engine.impl.interceptor.ProcessApplicationContextInterceptor.execute(ProcessApplicationContextInterceptor.java:66)
        at org.camunda.bpm.engine.impl.interceptor.LogInterceptor.execute(LogInterceptor.java:30)
        at org.camunda.bpm.engine.impl.ProcessInstantiationBuilderImpl.executeWithVariablesInReturn(ProcessInstantiationBuilderImpl.java:156)
        at org.camunda.bpm.engine.rest.sub.repository.impl.ProcessDefinitionResourceImpl.startProcessInstanceAtActivities(ProcessDefinitionResourceImpl.java:159)
        at org.camunda.bpm.engine.rest.sub.repository.impl.ProcessDefinitionResourceImpl.startProcessInstance(ProcessDefinitionResourceImpl.java:109)
        at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:139)
        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:295)
        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:249)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:138)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:107)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:133)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:101)
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:402)
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:209)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:221)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
        at org.camunda.bpm.engine.rest.filter.CacheControlFilter.doFilter(CacheControlFilter.java:41)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)
        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:805)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.camunda.bpm.engine.ClassLoadingException: ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.camunda.bpm.engine.impl.util.EngineUtilLogger.classLoadingException(EngineUtilLogger.java:135)
        at org.camunda.bpm.engine.impl.util.ReflectUtil.loadClass(ReflectUtil.java:107)
        at org.camunda.bpm.engine.impl.util.ClassDelegateUtil.instantiateDelegate(ClassDelegateUtil.java:42)
        ... 125 more
Caused by: java.lang.ClassNotFoundException: com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:348)
        at org.camunda.bpm.engine.impl.util.ReflectUtil.loadClass(ReflectUtil.java:84)
        ... 126 more

2016-10-20 17:59:04,524 WARNING [ExceptionHandler] (default task-142) org.camunda.bpm.engine.rest.exception.RestException: Cannot instantiate process definition printCounter1:1:f0ec6b8d-96ed-11e6-8fed-0050568b3e38: ENGINE-09008 Exception while instantiating class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.camunda.bpm.engine.rest.sub.repository.impl.ProcessDefinitionResourceImpl.startProcessInstance(ProcessDefinitionResourceImpl.java:115)
        at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:139)
        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:295)
        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:249)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:138)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:107)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:133)
        at org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:101)
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:402)
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:209)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:221)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
        at org.camunda.bpm.engine.rest.filter.CacheControlFilter.doFilter(CacheControlFilter.java:41)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)
        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)
        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:805)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.camunda.bpm.engine.ProcessEngineException: ENGINE-09008 Exception while instantiating class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.camunda.bpm.engine.impl.util.EngineUtilLogger.exceptionWhileInstantiatingClass(EngineUtilLogger.java:78)
        at org.camunda.bpm.engine.impl.util.ClassDelegateUtil.instantiateDelegate(ClassDelegateUtil.java:50)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior.getActivityBehaviorInstance(ClassDelegateActivityBehavior.java:109)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior$1.call(ClassDelegateActivityBehavior.java:65)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior$1.call(ClassDelegateActivityBehavior.java:62)
        at org.camunda.bpm.engine.impl.bpmn.behavior.AbstractBpmnActivityBehavior.executeWithErrorPropagation(AbstractBpmnActivityBehavior.java:107)
        at org.camunda.bpm.engine.impl.bpmn.behavior.ClassDelegateActivityBehavior.execute(ClassDelegateActivityBehavior.java:62)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationActivityExecute.execute(PvmAtomicOperationActivityExecute.java:41)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationActivityExecute.execute(PvmAtomicOperationActivityExecute.java:26)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionNotifyListenerStart.eventNotificationsCompleted(PvmAtomicOperationTransitionNotifyListenerStart.java:56)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionNotifyListenerStart.eventNotificationsCompleted(PvmAtomicOperationTransitionNotifyListenerStart.java:26)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:65)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:69)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:619)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperationSync(ExecutionEntity.java:594)
        at org.camunda.bpm.engine.impl.core.operation.AbstractEventAtomicOperation.execute(AbstractEventAtomicOperation.java:58)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:104)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationTransitionCreateScope.scopeCreated(PvmAtomicOperationTransitionCreateScope.java:34)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationCreateScope.execute(PvmAtomicOperationCreateScope.java:49)
        at org.camunda.bpm.engine.impl.pvm.runtime.operation.PvmAtomicOperationCreateScope.execute(PvmAtomicOperationCreateScope.java:23)
        at org.camunda.bpm.engine.impl.interceptor.AtomicOperationInvocation.execute(AtomicOperationInvocation.java:88)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.invokeNext(CommandInvocationContext.java:125)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performNext(CommandInvocationContext.java:112)
        at org.camunda.bpm.engine.impl.interceptor.CommandInvocationContext.performOperation(CommandInvocationContext.java:79)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:608)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.performOperation(ExecutionEntity.java:584)
        at org.camunda.bpm.engine.impl.pvm.runtime.PvmExecutionImpl.start(PvmExecutionImpl.java:231)
        at org.camunda.bpm.engine.impl.persistence.entity.ExecutionEntity.start(ExecutionEntity.java:433)
        at org.camunda.bpm.engine.impl.cmd.StartProcessInstanceCmd.execute(StartProcessInstanceCmd.java:55)
        at org.camunda.bpm.engine.impl.cmd.StartProcessInstanceCmd.execute(StartProcessInstanceCmd.java:31)
        at org.camunda.bpm.engine.impl.interceptor.CommandExecutorImpl.execute(CommandExecutorImpl.java:24)
        at org.camunda.bpm.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:104)
        at org.camunda.bpm.engine.impl.interceptor.JtaTransactionInterceptor.execute(JtaTransactionInterceptor.java:58)
        at org.camunda.bpm.engine.impl.interceptor.ProcessApplicationContextInterceptor.execute(ProcessApplicationContextInterceptor.java:66)
        at org.camunda.bpm.engine.impl.interceptor.LogInterceptor.execute(LogInterceptor.java:30)
        at org.camunda.bpm.engine.impl.ProcessInstantiationBuilderImpl.executeWithVariablesInReturn(ProcessInstantiationBuilderImpl.java:156)
        at org.camunda.bpm.engine.rest.sub.repository.impl.ProcessDefinitionResourceImpl.startProcessInstanceAtActivities(ProcessDefinitionResourceImpl.java:159)
        at org.camunda.bpm.engine.rest.sub.repository.impl.ProcessDefinitionResourceImpl.startProcessInstance(ProcessDefinitionResourceImpl.java:109)
        ... 58 more
Caused by: org.camunda.bpm.engine.ClassLoadingException: ENGINE-09017 Cannot load class 'com.att.gcs.bizops.cop.core.template.messagehandler.printCounter': com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.camunda.bpm.engine.impl.util.EngineUtilLogger.classLoadingException(EngineUtilLogger.java:135)
        at org.camunda.bpm.engine.impl.util.ReflectUtil.loadClass(ReflectUtil.java:107)
        at org.camunda.bpm.engine.impl.util.ClassDelegateUtil.instantiateDelegate(ClassDelegateUtil.java:42)
        ... 125 more
Caused by: java.lang.ClassNotFoundException: com.att.gcs.bizops.cop.core.template.messagehandler.printCounter from [Module ""deployment.camunda-engine-rest-7.6.0-alpha5-ee.war:main"" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:348)
        at org.camunda.bpm.engine.impl.util.ReflectUtil.loadClass(ReflectUtil.java:84)
        ... 126 more

}}","21/Oct/16 4:27 AM;ctomc;Well, this stacktrace doesn't point to problem in WildFly deployment code but more into camuda integration with wildfly","21/Oct/16 4:29 AM;ctomc;Evaluation of the issue points to external components.
Problem that existed in 10.0 appears that it is fixed in 10.1.
I am closing this issue as out of date","21/Oct/16 8:05 AM;mp4783;You may be correct here.  We've been trying multiple versions of WildFly and Camunda.  The problem appears in all combinations, though I cannot say this definitively as we have not conducted a formalized series of tests.  We may be forced to spend a day or more doing these tests to prove there is, in fact, an issue.

Thank you for taking the time to review these posts.","21/Oct/16 12:12 PM;jason.morgan;I've just tested this with wildfly10.1.0, the issue still crashes but at least you get logs this time.  I do not use camuda and apparently this ticket was hijacked by people that do.  My issue comes from using wildfly only, with a war.  

Reproduce the steps to see the issue.

Here is a paste of the error in the logs that 10.1.0 shows (and 10.0.0 didn't), this is AFTER ""replacing"" the war through the webconsole and then rebooting the server.

11:09:26,144 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""landscape-1609.1.1.war"")]) - failure description: ""WFLYCTL0212: Duplicate resource [(\""deployment\"" => \""landscape-1609.1.1.war\"")]""
11:09:26,150 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.

","21/Oct/16 12:13 PM;jason.morgan;To clarify, I'm replacing a war that was FIRST loaded through the deployment directory.  The steps to reproduce are listed","21/Oct/16 12:16 PM;jason.morgan;Removing the war from the deployment directory after a crash does let the server start back up.  The problem is that wildfly thinks it has 2 versions of the same war loaded, one through deployment and one through the web console (which gets saved to a hashed directory).  Replacing the war through the webconsole reports success but really doesn't work on reboot.  Instead, this either shouldn't be an option for a war deployed through the deployment directory or it should actually remove the war in the deployment.","21/Oct/16 12:30 PM;mp4783;Jason,

My apologies for hijacking this issue.  I hope it does not interfere with you getting the answers you need.

Michael","21/Oct/16 12:35 PM;jason.morgan;No apology needed.  I didn't mean to make that sound like I was upset in any way.  I just wanted [~ctomc] to know that the problem is with wildfly itself and not anything else.  

And no, I know what the problem is and I have disabled the deployment directory for my servers so that it doesn't happen on accident.  It is something that needs to be addressed so that someone else doesn't experience the problem",,,,,,,,,,,
HTTP management response caching is broken,WFCORE-1888,12656228,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,21/Oct/16 4:59 PM,04/Nov/16 6:20 PM,29/Nov/16 3:50 PM,04/Nov/16 6:20 PM,,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,The HTTP handling for the management API supports caching of read-resource-description and read-operation-description responses. But the ETag calculation used in support of this is broken. It was written to calculate an MD5 hash of the toString() representation of a DMR response but the object being hashed got changed to an OperationResponse. The toString() representation of that is unique for each request.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1889,,,,,,0.0,0.0,,1|i09xjz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding ldap-realm in Elytron sometimes register capability even if add operation failed,WFCORE-1886,12653713,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,olukas,olukas,07/Oct/16 2:31 AM,24/Oct/16 5:31 PM,29/Nov/16 3:50 PM,24/Oct/16 5:31 PM,,,,,,,3.0.0.Alpha11,,Domain Management,Security,,,,0,,,,,,"In case when adding Elytron ldap-realm capability through CLI takes some time (e.g. 5 seconds) then this capability is registered in context even if command failed (e.g. because some required attribute is missing). Then when command is fixed it cannot be added since capability was already registered. Server has to be reloaded to unregister this non-exist capability. See 'Steps to Reproduce' for more detail.

I am able to simulate this behavior with ldap-realm from Elytron. However I am not sure whether this issue can be related to whole Elytron subsystem or whole Domain Model.

Exception in server log:
{code}
ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""ldap-realm"" => ""ldap"")
]): java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.security.security-realm.ldap' is already registered in context 'global'.
	at org.jboss.as.controller.CapabilityRegistry.registerCapability(CapabilityRegistry.java:158)
	at org.jboss.as.controller.OperationContextImpl.registerCapability(OperationContextImpl.java:1449)
	at org.jboss.as.controller.OperationContextImpl.registerCapability(OperationContextImpl.java:1441)
	at org.jboss.as.controller.AbstractAddStepHandler.recordCapabilitiesAndRequirements(AbstractAddStepHandler.java:274)
	at org.jboss.as.controller.AbstractAddStepHandler.execute(AbstractAddStepHandler.java:146)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,JBEAP-6328,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i09jpr:,9223372036854775807,,,,"1) Start server in debug mode.
2) Use [jdb|http://docs.oracle.com/javase/8/docs/technotes/tools/windows/jdb.html] command line utility from JDK for slowing command execution:
{code}
jdb -attach 8787
{code}
and add breakpoint:
{code}
stop in org.wildfly.extension.elytron.LdapRealmDefinition$RealmAddHandler.configureIdentityMapping(org.jboss.as.controller.OperationContext,org.jboss.dmr.ModelNode,org.wildfly.security.auth.realm.ldap.LdapSecurityRealmBuilder)
{code}
3) Open CLI and run following commands.
Firstly add dir-context, because it is needed for adding ldap-realm:
{code}
/subsystem=elytron/dir-context=dir:add(url=localhost)
{code}
Then add ldap-realm with missing required attribute rdn-identifier:
{code}
/subsystem=elytron/ldap-realm=ldap:add(dir-context=dir,identity-mapping={user-password-mapper={verifiable=true,writable=true}})
{code}
Breakpoint in {{jdb}} is hit, wait 5second and then run command {{cont}} in {{jdb}}. Output in CLI is:
{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0155: rdn-identifier may not be null"",
    ""rolled-back"" => true
}
{code}
4) Fix CLI command and execute it:
{code}
/subsystem=elytron/ldap-realm=ldap:add(dir-context=dir,identity-mapping={rdn-identifier=1,user-password-mapper={verifiable=true,writable=true}})
{code}
It fail with description says that capability is already registered:
{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.security.security-realm.ldap' is already registered in context 'global'."",
    ""rolled-back"" => true
}
{code}
5) Reload server and run fixed command again, it will finish successfully:
{code}
reload
/subsystem=elytron/ldap-realm=ldap:add(dir-context=dir,identity-mapping={rdn-identifier=1,user-password-mapper={verifiable=true,writable=true}})
{""outcome"" => ""success""}
{code}",,,,,,,"20/Oct/16 5:26 PM;brian.stansberry;[~ctomc] This sounds like the thing [~ehugonnet] was talking about on HipChat a few days ago, where he observed the deployment scanner background task triggering incorrect publication of capability changes. I figure the reason the delay is important in the reproducer steps above is because the scanner runs during that time.

Did you guys figure out anything about this?","20/Oct/16 8:36 PM;brian.stansberry;I think https://github.com/wildfly/wildfly-core/compare/master...bstansberry:WFCORE-1886 is probably the solution to this.

I don't think the reproducer steps work any more though. I don't see why that op would even get to the point of registering a capability since the attribute validation should fail before then.

In any case the fix for this needs a multi-threaded reproducer test in CapabilityRegistryTestCase.","21/Oct/16 9:23 AM;ctomc;[~brian.stansberry] Your fix looks good, it is something similar I had in mind for fixing it.
To have the whole chain concurrent not just few parts as we have now.

Test itself might be bit trickier to write.",,,,,,,,,,,,,,,,,,,,,,,,
Content completion does not work for deployment-info --headers,WFCORE-1876,12655595,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jdenise,baranowb,baranowb,19/Oct/16 12:35 AM,28/Oct/16 4:46 PM,29/Nov/16 3:50 PM,28/Oct/16 4:46 PM,,,,,,,3.0.0.Alpha11,,CLI,,,,,0,,,,,,"[standalone@localhost:9990 /] deployment-info --headers       
[standalone@localhost:9990 /] deployment-info --headers=<TAB><TAB>

this does not kick in, should be:
[standalone@localhost:9990 /] deployment-info --headers={ 
after first <TAB>",,,,,,,,,,,,,,,,,,,,,JBEAP-5710,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1882,,,,,,0.0,0.0,,1|i09tu7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Logstash TCP-Input throws ""Bad record MAC"" when trying to connect with WildFly over SSL/TLS",WFCORE-1875,12655496,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,pkleindienst,pkleindienst,18/Oct/16 9:32 AM,24/Oct/16 2:08 PM,29/Nov/16 3:50 PM,,,,,,,,,,Logging,,,,,0,jboss,logging,ssl,,,"I use the jboss-logmanger-ext library for transfering log records to Logstash over a secure socket. For that purpose, my Logstash TCP-Input config authenticates with WildFly by means of a self-signed certificate. However, some time after SSL handshake has started, the following exception is thrown:

{code:java}
LogManager error of type FLUSH_FAILURE: Error on flush
java.net.SocketException: Socket is closed
	at sun.security.ssl.SSLSocketImpl.getOutputStream(SSLSocketImpl.java:2240)
	at org.jboss.logmanager.handlers.TcpOutputStream.flush(TcpOutputStream.java:210)
	at org.jboss.logmanager.handlers.UninterruptibleOutputStream.flush(UninterruptibleOutputStream.java:110)
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:297)
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at org.jboss.logmanager.ext.handlers.SocketHandler.safeFlush(SocketHandler.java:340)
	at org.jboss.logmanager.ext.handlers.SocketHandler.flush(SocketHandler.java:169)
	at org.jboss.logmanager.ExtHandler.doPublish(ExtHandler.java:104)
	at org.jboss.logmanager.ext.handlers.SocketHandler.doPublish(SocketHandler.java:159)
	at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:76)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:314)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)
	at org.jboss.logmanager.Logger.logRaw(Logger.java:850)
	at org.jboss.logmanager.Logger.log(Logger.java:596)
	at org.jboss.stdio.AbstractLoggingWriter.write(AbstractLoggingWriter.java:71)
	at org.jboss.stdio.WriterOutputStream.finish(WriterOutputStream.java:143)
	at org.jboss.stdio.WriterOutputStream.flush(WriterOutputStream.java:164)
	at java.io.PrintStream.write(PrintStream.java:482)
	at org.jboss.stdio.StdioContext$DelegatingPrintStream.write(StdioContext.java:264)
	at java.io.PrintStream.write(PrintStream.java:480)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
	at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:104)
	at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:185)
	at java.io.PrintStream.newLine(PrintStream.java:546)
	at java.io.PrintStream.println(PrintStream.java:696)
	at sun.misc.HexDumpEncoder.encodeLineSuffix(HexDumpEncoder.java:116)
	at sun.misc.CharacterEncoder.encodeBuffer(CharacterEncoder.java:297)
	at sun.security.ssl.CipherBox.encrypt(CipherBox.java:306)
	at sun.security.ssl.OutputRecord.encrypt(OutputRecord.java:264)
	at sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:859)
	at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:847)
	at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)
	at org.jboss.logmanager.handlers.TcpOutputStream.write(TcpOutputStream.java:182)
	at org.jboss.logmanager.handlers.UninterruptibleOutputStream.write(UninterruptibleOutputStream.java:84)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at org.jboss.logmanager.ext.handlers.SocketHandler.safeFlush(SocketHandler.java:340)
	at org.jboss.logmanager.ext.handlers.SocketHandler.flush(SocketHandler.java:169)
	at org.jboss.logmanager.ExtHandler.doPublish(ExtHandler.java:104)
	at org.jboss.logmanager.ext.handlers.SocketHandler.doPublish(SocketHandler.java:159)
	at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:76)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:314)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)
	at org.jboss.logmanager.Logger.logRaw(Logger.java:850)
	at org.jboss.logmanager.Logger.log(Logger.java:802)
	at org.jboss.logging.JBossLogManagerLogger.doLogf(JBossLogManagerLogger.java:53)
	at org.jboss.logging.Logger.logf(Logger.java:2398)
	at org.jboss.msc.service.ServiceLogger_$logger.greeting(ServiceLogger_$logger.java:65)
	at org.jboss.msc.service.ServiceContainerImpl.<clinit>(ServiceContainerImpl.java:93)
	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:258)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:214)
{code}
    
On the Logstash side, the following error message appears in the logs:
{code}
:message=>""An error occurred. Closing connection"", :exception=>#<IOError: bad record MAC>
{code}

Afterwards, WildFly hangs forever without deploying my webapp or doing anything else. Before that happens, the handshake goes through these phases:

* *** ClientHello, TLSv1.2
* *** ServerHello, TLSv1.2
* %% Initialized:  [Session-1, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256]
* Found trusted certificate
* *** ECDH ServerKeyExchange
* *** ServerHelloDone
* *** ECDHClientKeyExchange
* SESSION KEYGEN:
* CONNECTION KEYGEN:
* *** Finished
   
When disabling SSL both on WildFly and Logstash side, everything works fine.



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Compatibility/Configuration,,,,,,,,,,,,,,,,,http://stackoverflow.com/questions/39206921/logstash-wildfly10-ssl-broken-for-tcp-input,,,,,,,,,0.0,1.0,,1|i09t93:,9223372036854775807,,,,"# Created self-signed Logstash cert with OpenSSL:
{code}
   openssl req -x509 -newkey rsa:4096 -keyout logstash_ssl.key -out logstash_ssl.crt -nodes -days 365
{code}
# Configured Logstash TCP input to use generated cert and key:
{code}
input {
  tcp {
    port => 12202
    codec => ""json""
    ssl_enable => true
    ssl_cert => ""/path/to/logstash_ssl.crt""
    ssl_key => ""/path/to/logstash_ssl.key""
    ssl_verify => false 
  }
}
{code}
# Imported cert into a new truststore:
{code}
   keytool -import -alias mycert -file mycert.cer -keystore logstashTruststore 
{code}
# Added jboss-logmanager-ext to modules
# Configured SocketHandler in standalone.xml as follows (formatter config is omitted):
{code}
    <custom-handler name=""LOGSTASH"" class=""org.jboss.logmanager.ext.handlers.SocketHandler"" module=""log.logmanager-ext"">
	   <level name=""DEBUG""/>
	   <formatter>
		  <named-formatter name=""LOGSTASH-FORMATTER""/>
	   </formatter>
	    <properties>
                 <property name=""hostname"" value=""192.168.144.101""/>
		 <property name=""port"" value=""12202""/>
		 <property name=""protocol"" value=""SSL_TCP""/>
	      </properties>
      </custom-handler>
{code}
# Added truststore path as well as password to VM options:
{code}
   -Djavax.net.ssl.trustStore=/path/to/logstashTruststore
   -Djavax.net.ssl.trustStorePassword=""mypassword""
{code}
# related versions:
   * JDK 1.8.0_11 and 1.8.0_101
   * WildFly 10.1.0 and 10.0.0
   * Logstash 2.1.3 (same behavior with latest Logstash 5.0)",,,,,,,24/Oct/16 2:08 PM;jamezp;This is more than likely an issue with the {{SocketHandler}} in the log manager. I'll leave this issue open here for now until I get have a more detailed look at it.,,,,,,,,,,,,,,,,,,,,,,,,,,
HTTP2 / ALPN does not work when using wildfly-openssl,WFCORE-1874,12655577,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,18/Oct/16 4:33 PM,20/Oct/16 2:23 PM,29/Nov/16 3:50 PM,20/Oct/16 2:23 PM,,,,,,,3.0.0.Alpha10,,Security,Server,,,,0,wildfly-openssl,,,,,"wildfly-openssl version used: {{1.0.0.Alpha1}}.

I have a problem to use HTTP2 on EAP when using OpenSSL implementation based on the wildfly-openssl project. When I use standard 'TLS' protocol, HTTP2 works just fine (using Chrome as a client). But when I switch to 'openssl.TLS', client uses HTTP/1.1 and never upgrade to HTTP2.

What I do:
# start EAP
# perform request to: https://localhost:8443   ----- HTTP2 is used here
# {{/core-service=management/security-realm=ApplicationRealm/server-identity=ssl:write-attribute(name=protocol,value=openssl.TLS)}}
# reload
# perform request to: https://localhost:8443   ----- HTTP/1.1 is used here

I tried to check in Wireshark. When I compared Client and Server Hello packets, I can see that in both cases the Client Hello packets contains TLS ALPN extension part with offered protocols h2 and http/1.1. Although Server Hello packets differs. When 'TLS' is used, then Server Hello packet contains ALPN extension with chosen protocol of 'h2'. But when 'openssl.TLS' is used, I can see that appropriate Server Hello packet does not contain ALPN extension part at all, which I presume leads that HTTP/1.1 protocol is used for further communication.

Not sure whether it is related somehow, I can also see that different types of ciphers are used - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 in case of 'TLS' and TLS_RSA_WITH_AES_128_GCM_SHA256 in case of 'openssl.TLS'.

My openssl version is: {{1.0.2j-fips}}

Not sure whether there must be performed some extra configuration to make HTTP2/ALPN work when using openssl implementation.",,,,,,,,,,,,,,,,JBEAP-6473,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09tq7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TEST,WFCORE-1873,12655492,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,,jdenise,jdenise,18/Oct/16 9:10 AM,18/Oct/16 9:10 AM,29/Nov/16 3:50 PM,18/Oct/16 9:10 AM,,,,,,,,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09t87:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deploy/undeploy archive and attachments issue,WFCORE-1872,12655476,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jdenise,jdenise,jdenise,18/Oct/16 8:25 AM,18/Oct/16 8:25 AM,29/Nov/16 3:50 PM,,,,,,,,,,,,,,,0,,,,,,"When an archive is used to deploy/undeploy, an internal batch is created. All commands/operations located in the CLI archive script file are then added to the batch. The attachments associated to this internal batch are not taken into account. 
When deploy/undeploy archive is executed, these attachments should be added to the executed operation.
When deploy/undeploy archive are added to a batch, the files attached by commands/operations located in the CLI script should be attached to the parent batch.

I also noticed that deploy <file> called in a batch context doesn't make use of attachment. It reads the file content and inline it in the request content. This does create a duplication of logic (execution and batch are handled differently). 

NB: Fixing this issue in current WildFly CLI would be quite complex. It has been fixed in the CLI.next project. Files are now all the time attached, deploy/undeploy archive attachments are properly handled.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09t4n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractDeploymentChainStep should fail if executed post-boot,WFCORE-1871,12655378,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,brian.stansberry,brian.stansberry,17/Oct/16 5:23 PM,17/Oct/16 7:03 PM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"AbstractDeploymentChainStep is intended to be called from AbstractBoottimeAddStepHandler or a functional equivalent that only calls it during boot. But WFLY-7300 and https://github.com/wildfly/wildfly/pull/9264 show that usage pattern is not being followed. So we should enforce it and fail if called post-boot.

As a nice-to-have, instead of always failing the impl could check the OperationDefinition for the currently executing operation and if it reports that reload is required, then AbstractDeploymentChainStep can do the reload-required stuff currently done by AbstractBoottimeAddStepHandler. If the definition doesn't report reload-required, then the definition is wrong and the usage is wrong, so we should fail.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09sjr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
:add operations implemented using AbstractBoottimeAddStepHandler should report that reload is required in the read-operation-description output,WFCORE-1870,12655372,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,kabirkhan,kabirkhan,17/Oct/16 4:08 PM,17/Oct/16 7:03 PM,29/Nov/16 3:50 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"As discussed on https://github.com/wildfly/wildfly/pull/9264

CRITICAL POINT: Solving this generically can have the effect of changing the management API of many, many subsystems. It doesn't actually change their behavior though.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09sif:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When unregistering a resource in the MMR, if the address targets an alias then we should just 'ignore' the unregistering of the submodel",WFCORE-1869,12655333,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,17/Oct/16 11:15 AM,20/Oct/16 2:22 PM,29/Nov/16 3:50 PM,20/Oct/16 2:22 PM,3.0.0.Alpha9,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"When unregistering the submodel of a resource, if it targets an alias with children the operation will fail like this:
java.lang.IllegalArgumentException: WFLYCTL0277: An alias is already registered at location '/subsystem=infinispan/cache-container=*/distributed-cache=*/file-store=FILE_STORE': java.lang.IllegalArgumentException: WFLYCTL0277: An alias is already registered at location '/subsystem=infinispan/cache-container=*/distributed-cache=*/file-store=FILE_STORE'
        at org.jboss.as.controller.registry.AliasResourceRegistration.alreadyRegistered(AliasResourceRegistration.java:291)
        at org.jboss.as.controller.registry.AliasResourceRegistration.unregisterSubModel(AliasResourceRegistration.java:123)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
        at org.jboss.as.controller.extension.ExtensionRegistry.removeExtension(ExtensionRegistry.java:341)

We should ignore the removal of the children of an alias resource registration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09s9r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"wrong parse of double quote in `\\""` ",WFCORE-1868,12655227,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,hisanobu.okuda,hisanobu.okuda,17/Oct/16 6:31 AM,09/Nov/16 5:42 AM,29/Nov/16 3:50 PM,27/Oct/16 4:25 AM,,,,,,,,,CLI,,,,,1,,,,,,"jboss-cli does not parse command line if command line contains {code}\\""{code}

When a command is 
{code}/system-property=foo4:add(value=""vvv\\""){code}
it shows the sub-prompt '> ' like:

{code}
[standalone@localhost:9990 /] /system-property=foo4:add(value=""vvv\\"")
> 
{code}",JBoss EAP 7.0.0,,,,,,,,,,,,,,,JBEAP-7008,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,21.0,,1|i09rnb:,9223372036854775807,,,,"Run cli command {code}/system-property=foo4:add(value=""vvv\\""){code} in jboss-cli.",,,,,,,"17/Oct/16 6:36 AM;hisanobu.okuda;In org.jboss.aesh.parser.Parser.doesStringContainOpenQuote(), if a back-slash is ahead of the second double quote, it wrongly returns true even if a back-slash is escaped with another back-slash.
{code}
521     public static boolean doesStringContainOpenQuote(String text) {
522         boolean doubleQuote = false;
523         boolean singleQuote = false;
524         for (int i = 0; i < text.length(); i++) {
525             if (text.charAt(i) == SINGLE_QUOTE) {
526                 if (!doubleQuote &&
527                         (i == 0 || (i > 0 && !(text.charAt(i - 1) == BACK_SLASH))))
528                     singleQuote = !singleQuote;
529             }
530             else if (text.charAt(i) == DOUBLE_QUOTE) {
531                 if (!singleQuote &&
532                         (i == 0 || (i > 0 && !(text.charAt(i - 1) == BACK_SLASH))))
533                     doubleQuote = !doubleQuote;
534             }
535         }
536         return doubleQuote || singleQuote;
537     }
{code}","18/Oct/16 5:40 AM;jdenise;Hi Brian,

it doesn't seem that Jira sets my name as the default assignee for CLI 
issues. Any action on my side?

JF.




",20/Oct/16 5:26 AM;hisanobu.okuda;PR https://github.com/aeshell/aesh/pull/236,"20/Oct/16 3:37 PM;jdenise;Hi,
using latest WFCore jboss-cli, I can't reproduce this issue.
Do you agree that the issue should occur with :

[standalone@localhost:9990 /] /system-property=foo4:add(value=""vvv\\"")


My latest changes is:
commit 7e5f9200ce0b57aa8c17d2b3bdf4579653158430
Author: Jean-Francois Denise <jfdenise@gmail.com>
Date:   Thu Oct 20 09:52:34 2016 +0200

    Fix for WFCORE-1878. Use * to identify all disabled deployments.
","20/Oct/16 11:16 PM;hisanobu.okuda;As I mentioned in my PR comment, 
---
@jfdenise I confirmed the issue is not reproduced in wildfly-core 3.0.0.x of https://github.com/jfdenise/wildfly-core/tree/WFCORE-1878. However, I'd like to merge this, because:

*    EAP7.0.x is still based on wildfly-core 2.0.x and not guaranteed to move to wildfly-core 3.0.
*    this fix is good for other aesh application.
*    this is harmless to wildfly-core 3.0.","21/Oct/16 3:55 AM;jdenise;Hi,
your fix is in aesh. In order for 2.0.x to benefit from this fix you will need to upgrade 2.0.x to latest Aesh release. is it something that you plan to do? What is the ash release bundled with WFCore 2.0.x?

","21/Oct/16 4:47 AM;hisanobu.okuda;Jean-Francios, EAP7.0.2 uses Aesh 0.66.4. I will request to upgrade it to >0.66.10 in the next CP.","21/Oct/16 4:50 AM;jdenise;Hi, so you should perhaps try (perhaps you already did it?) with 0.66.11 today and see if the problem is still there. Some fixes have been added to Aesh since 0.66.4.
","21/Oct/16 5:10 AM;hisanobu.okuda;Jean-Francois, EAP 7.0.2 replacing aesh jar with the fix (in the branch 0.66.+.double_backslash of https://github.com/hokuda/aesh) resolves the issue.","21/Oct/16 5:35 AM;jdenise;And without the fix, just upgrade to 0.66.+ branch?
",21/Oct/16 5:38 AM;hisanobu.okuda;The issue was reproduced.,21/Oct/16 5:39 AM;jdenise;So something is hiding the problem in latest wf-core. That is strange.,"21/Oct/16 7:57 AM;hisanobu.okuda;Jean-Francois, I found that the latest wildfly-core 3.0.x blows it off to find open quote setting false to org.jboss.aesh.parser.Parser.setParsingQuotes().

{code}
[hokuda@dhcp-193-78 01719672_eap7_jboss-cli]$ rljdb -attach localhost:8787
/usr/local/bin/rlwrap -H ./rljdb.history -l ./rljdb.log -w 10 -pRED -C jdbxxx -b ' .' -z /home/hokuda/bin/rljdb_filter jdb -attach localhost:8787
Set uncaught java.lang.Throwable
Set deferred uncaught java.lang.Throwable
Initializing jdb ...
> 
VM Started: No frames on the current call stack

Found ./rljdb.breakpoint
main[1] run
> Set deferred breakpoint org.jboss.aesh.parser.Parser.setParsingQuotes(boolean)
Set deferred breakpoint org.jboss.aesh.parser.Parser.doesStringContainOpenQuote(java.lang.String)

Breakpoint hit: ""thread=main"", org.jboss.aesh.parser.Parser.setParsingQuotes(), line=790 bci=0

main[1] where
  [1] org.jboss.aesh.parser.Parser.setParsingQuotes (Parser.java:790)
  [2] org.jboss.aesh.console.Console.init (Console.java:162)
  [3] org.jboss.aesh.console.Console.<init> (Console.java:118)
  [4] org.jboss.as.cli.impl.Console$Factory.getConsole (Console.java:123)
  [5] org.jboss.as.cli.impl.Console$Factory.getConsole (Console.java:116)
  [6] org.jboss.as.cli.impl.CommandContextImpl.initBasicConsole (CommandContextImpl.java:413)
  [7] org.jboss.as.cli.impl.CommandContextImpl.<init> (CommandContextImpl.java:381)
  [8] org.jboss.as.cli.impl.CommandContextFactoryImpl.newCommandContext (CommandContextFactoryImpl.java:157)
  [9] org.jboss.as.cli.impl.CliLauncher.initCommandContext (CliLauncher.java:305)
  [10] org.jboss.as.cli.impl.CliLauncher.main (CliLauncher.java:285)
  [11] org.jboss.as.cli.CommandLineMain.main (CommandLineMain.java:45)
  [12] sun.reflect.NativeMethodAccessorImpl.invoke0 (native method)
  [13] sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
  [14] sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
  [15] java.lang.reflect.Method.invoke (Method.java:498)
  [16] org.jboss.modules.Module.run (Module.java:336)
  [17] org.jboss.modules.Main.main (Main.java:520)
main[1] locals
Method arguments:
parsingQuotes = false
Local variables:
{code}

If parsingQuotes == false, org.jboss.aesh.parser.Parser.doesStringContainOpenQuote() does nothing.

{code}
  public static boolean doesStringContainOpenQuote(String text)
  {
    if (!parsingQuotes) {
      return false;
    }
{code}

[https://github.com/wildfly/wildfly-core/commit/027bfe959988b25e45771491e494ca61c19a986b#diff-c929deeb25b1e0886f6c256907ea7c44] introduced disabling parsing quotes in cli/src/main/java/org/jboss/as/cli/impl/CommandContextImpl.java:

{code}
+        settings.parsingQuotes(false);
{code}

The above line should be removed, and the fix should be applied.","21/Oct/16 8:18 AM;jdenise;Yes, we have disabled quotes parsing due to https://issues.jboss.org/browse/WFCORE-1804
It was breaking some 6.4 scripts redirected to the console.
These scripts contains comments without escaped single quote. So Aesh had a wrong behaviour,
",21/Oct/16 9:44 AM;hisanobu.okuda;Does quotes parsing stay disabled for future?,"21/Oct/16 10:02 AM;jdenise;In the current CLI, we should have the control on what is or is not parsed (operators, escaping). If we delegate this parsing to Aesh we can encounter regressions (that WFCORE-1804 has shown).
So I would say so. ","24/Oct/16 9:28 AM;hisanobu.okuda;Jean-Francois, Could you please clarify what is wrong in the fix?","24/Oct/16 9:34 AM;jdenise;Hi Hisanobu,
I wanted to understand why we had no issue with the latest upstream project. If Stale (he is the owner of Aesh) accept your fix, I have no problem with it.
JF
","24/Oct/16 10:32 PM;hisanobu.okuda;Jean-Francois, could you please ask Stale to review my pr?","25/Oct/16 1:39 PM;jdenise;Hi Hisanobu,
I have commented on your PR saying that we had understood the issue and that I was Ok with this fix being merged.
Regards.
JF
","27/Oct/16 4:25 AM;jdenise;The issue has been fixed in Aesh 0.66.+ branch, 0.66.12-SNAPSHOT.",,,,,,
Whitespaces are not removed from dependencies in module add command,WFCORE-1864,12654599,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,spyrkob,spyrkob,13/Oct/16 5:12 AM,07/Nov/16 12:08 PM,29/Nov/16 3:50 PM,26/Oct/16 4:18 PM,3.0.0.Alpha9,,,,,,3.0.0.Alpha11,,CLI,,,,,0,,,,,,"Running 
{{module add --name=foo.bar --resources=foo.jar --dependencies=[org.a, org.b ]}}

will result in following dependencies in module.xml
{{
...
    <dependencies>
        <module name=""org.a""/>
        <module name="" org.b ""/>
    </dependencies>
...
}}

The module name in dependencies should be stripped of leading and trailing whitespaces.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1858,,,,,,0.0,0.0,,1|i09oi7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[QE] 7.1.0 Server hanging on HP-UX when reload is initiated quickly after server was sending large amount of data,WFCORE-1862,12654153,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,dmlloyd,rhatlapa,rhatlapa,11/Oct/16 5:22 AM,02/Nov/16 10:36 PM,29/Nov/16 3:51 PM,,2.2.0.Final,,,,,,,,Server,,,,,0,,,,,,"Originally reported for EAP 7.0.3.CP.CR2, still this issue is valid also for WildFly 10.1.0.Final

Upgrade to XNIO 3.4.0.Final causes regression resulting in server hanging during reload on HP-UX in situation when servlet was sending more than 4 GB of data and suddenly reload operation is called. The reload operation doesn't finish.

The deployment sending the data is according to log stopped, still there is visible running thread in awaitWritable \[1\].

Note: If I use older version of XNIO => replacing XNIO 3.4.0.Final with XNIO 3.3.6.Final, it works just fine.

Attaching eap.jstack (thread dump when arquillian tries to stop the server after reload operation timed out) and duringReload.jstack (thread dump when reload is called and it is waited for server to be reloaded) 


\[1\]
{noformat}
""default task-1"" #786 prio=5 os_prio=-179 tid=0x00c18000 nid=796 lwp_id=8999064 runnable [0x27cc0000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.DevPollArrayWrapper.poll0(Native Method)
	at sun.nio.ch.DevPollArrayWrapper.poll(DevPollArrayWrapper.java:223)
	at sun.nio.ch.DevPollSelectorImpl.doSelect(DevPollSelectorImpl.java:84)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)
	- locked <0x6c393e50> (a sun.nio.ch.Util$2)
	- locked <0x6c393e40> (a java.util.Collections$UnmodifiableSet)
	- locked <0x6c393d40> (a sun.nio.ch.DevPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:101)
	at org.xnio.nio.SelectorUtils.await(SelectorUtils.java:46)
	at org.xnio.nio.NioSocketConduit.awaitWritable(NioSocketConduit.java:233)
	at org.xnio.conduits.AbstractSinkConduit.awaitWritable(AbstractSinkConduit.java:66)
	at org.xnio.conduits.AbstractSinkConduit.awaitWritable(AbstractSinkConduit.java:66)
	at io.undertow.conduits.ChunkedStreamSinkConduit.awaitWritable(ChunkedStreamSinkConduit.java:361)
	at org.xnio.conduits.ConduitStreamSinkChannel.awaitWritable(ConduitStreamSinkChannel.java:134)
	at io.undertow.channels.DetachableStreamSinkChannel.awaitWritable(DetachableStreamSinkChannel.java:87)
	at io.undertow.server.HttpServerExchange$WriteDispatchChannel.awaitWritable(HttpServerExchange.java:1951)
	at org.xnio.channels.Channels.writeBlocking(Channels.java:154)
	at io.undertow.servlet.spec.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:184)
	at io.undertow.servlet.spec.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:128)
	at org.jboss.qa.management.web.resources.DataSenderServlet.doGet(DataSenderServlet.java:33)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.MetricsHandler.handleRequest(MetricsHandler.java:62)
	at io.undertow.servlet.core.MetricsChainHandler.handleRequest(MetricsChainHandler.java:59)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:285)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:264)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:175)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:802)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}","Noticed only on HP-UX ia64 with java version ""1.8.0.04-hp-ux""",,,,,,,,,,,XNIO-275,,,,JBEAP-6298,,,,,,,,,,,11/Oct/16 5:22 AM;rhatlapa;connector-metrics.war;https://issues.jboss.org/secure/attachment/12410514/connector-metrics.war,11/Oct/16 5:22 AM;rhatlapa;duringReload.jstack;https://issues.jboss.org/secure/attachment/12410515/duringReload.jstack,11/Oct/16 5:22 AM;rhatlapa;eap.jstack;https://issues.jboss.org/secure/attachment/12410516/eap.jstack,,,,,,,,,,,+,,,,,,,,,,,,,,,,,,3.0,1.0,,1|i09m47:,9223372036854775807,,,,,,,,rhatlapa,,,"02/Nov/16 10:35 PM;gaol;Should we resolve this Jira since the upgrade of xnio to 3.4.1.Final has been done in WildFly core?

See: https://github.com/wildfly/wildfly-core/pull/1874/files#diff-600376dffeb79835ede4a0b285078036R124",,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid operation shouldn't be completed at all,WFCORE-1857,12653804,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,07/Oct/16 8:48 AM,20/Oct/16 2:19 PM,29/Nov/16 3:51 PM,20/Oct/16 2:19 PM,,,,,,,3.0.0.Alpha10,,CLI,,,,,0,,,,,,"When an operation doesn't exist, the character ')' is added by completion although nothing should be proposed.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1852,,,,,,0.0,1.0,,1|i09k9b:,9223372036854775807,,,,,,,,,,,"07/Oct/16 8:49 AM;jdenise;The elytron subsystem is not present in JBEAP-6143 although the operation is completed.
",,,,,,,,,,,,,,,,,,,,,,,,,,
Completion for variable value is not appropriate,WFCORE-1856,12653455,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jdenise,jdenise,jdenise,05/Oct/16 12:25 PM,05/Oct/16 12:25 PM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,"For example: set x=b<TAB> ==> A command is proposed. 
Command and operation completion should only be proposed when we want the value of the variable to be evaluated:  set value=`:read-attribute(name=release-version)`",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09i7j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Possible NPE on controller service start,WFCORE-1855,12653404,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,dmlloyd,dmlloyd,05/Oct/16 9:36 AM,26/Oct/16 11:53 AM,29/Nov/16 3:51 PM,,,,,,,,,,,,,,,0,,,,,,"In {{org.jboss.as.controller.AbstractControllerService}}, the {{start}} method starts up a background thread which performs a certain amount of the boot process.  Before this thread is started, a volatile field {{controller}} is initialized with the controller reported by the {{start()}} method.

Inside this thread, some work is performed, and at the end of a certain amount of work, the {{finishBoot()}} method is invoked.  This method calls {{controller.finishBoot()}}, referencing the field that was set in the {{start()}} method.

The problem arises when the service itself is stopped before the boot thread completes.  This causes the {{controller}} field to be nulled out, resulting in an NPE.

I think we need to look at:
* Why are we using a background thread for this?
* Why are we _not_ using the asynchronous startup feature?

I think we must do one of these two things in order to make this code ""safe"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,0.0,2.0,,1|i09hwn:,9223372036854775807,,,,,,,,,,,"05/Oct/16 10:08 AM;brian.stansberry;Neither of those two approaches will work. Everything depends on the AbstractControllerService being started.

Conceivably the boot thread stuff could be refactored out into a separate service that depends on the AbstractControllerService. It would need some analysis to look into any gotchas. I believe this has been this way since quite early in AS 7.0 so I'm not sure if it's this way for a real good reason or if it was just a result of inexperience.","05/Oct/16 11:08 AM;brian.stansberry;A simple workaround is to expose the controller via the BootContext and switch all uses of it by the boot thread to that. That's largely equivalent to passing it into a new dependent service via injection. If instead we created a new service and injected the controller, once that new service's start() was called and it got a ref to the controller it would use it until completion of start(). Trying to stop the AbstractControllerService would not result in the execution of start() terminating.

A separate service would be better as it would ensure the AbstractControllerService could not stop while the boot service was starting. That could have unintended side effects though, e.g. ServiceContainer not terminating resulting in the shutdown hook not returning.",,,,,,,,,,,,,,,,,,,,,,,,,
Wrong result on :browse-content(depth>0) on archived deployments deployed by deployment scanner,WFCORE-1854,12653381,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,ehugonnet,mjurc,mjurc,05/Oct/16 8:27 AM,06/Oct/16 5:01 AM,29/Nov/16 3:51 PM,06/Oct/16 5:00 AM,3.0.0.Alpha9,,,,,,,,Domain Management,,,,,0,,,,,,"With archived deployment deployed by deployment scanner, the {{/deployment=jboss-kitchensink-ear.ear:browse-content(depth=1)}} command returns the following result:
{code}{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""META-INF/"",
            ""directory"" => true
        },
        {
            ""path"" => ""META-INF/MANIFEST.MF"",
            ""directory"" => false,
            ""file-size"" => 130L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63190L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12256L
        },
        {
            ""path"" => ""META-INF/application.xml"",
            ""directory"" => false,
            ""file-size"" => 802L
        },
        {
            ""path"" => ""META-INF/kitchensink-ear-quickstart-ds.xml"",
            ""directory"" => false,
            ""file-size"" => 1955L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.xml"",
            ""directory"" => false,
            ""file-size"" => 5582L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.properties"",
            ""directory"" => false,
            ""file-size"" => 143L
        }
    ]
}
{code}
WFCORE-1851 does not fix this.",,,,,,,,,,,,,,,,JBEAP-6304,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i09hrj:,9223372036854775807,,,,,,,,,,,"05/Oct/16 10:16 AM;ehugonnet;I don't reproduce it on upstream master (with the fix for WFCORE-1851) :


{code:java}
[standalone@localhost:9990 /] /deployment=wildfly-kitchensink-ear.ear:read-resource(include-runtime)     
{                                                                                                                                                                                                                                                                                                
    ""outcome"" => ""success"",                                                                                                                                                                                                                                                                      
    ""result"" => {                                                                                                                                                                                                                                                                                
        ""content"" => [{""hash"" => bytes {                                                                                                                                                                                                                                                         
            0x3e, 0x04, 0x34, 0xd7, 0xd4, 0x5f, 0x5a, 0x92,                                                                                                                                                                                                                                      
            0xd4, 0x1a, 0x81, 0x96, 0x67, 0xdb, 0x53, 0x4f,                                                                                                                                                                                                                                      
            0x8f, 0xdb, 0xf6, 0x31                                                                                                                                                                                                                                                               
        }}],                                                                                                                                                                                                                                                                                     
        ""disabled-time"" => 1475676768425L,                                                                                                                                                                                                                                                       
        ""disabled-timestamp"" => ""2016-10-05 16:12:48,425 CEST"",                                                                                                                                                                                                                                  
        ""enabled"" => false,                                                                                                                                                                                                                                                                      
        ""enabled-time"" => 1475676724207L,                                                                                                                                                                                                                                                        
        ""enabled-timestamp"" => ""2016-10-05 16:12:04,207 CEST"",                                                                                                                                                                                                                                   
        ""managed"" => true,                                                                                                                                                                                                                                                                       
        ""name"" => ""wildfly-kitchensink-ear.ear"",                                                                                                                                                                                                                                                 
        ""owner"" => [                                                                                                                                                                                                                                                                             
            (""subsystem"" => ""deployment-scanner""),                                                                                                                                                                                                                                               
            (""scanner"" => ""default"")                                                                                                                                                                                                                                                             
        ],                                                                                                                                                                                                                                                                                       
        ""persistent"" => false,
        ""runtime-name"" => ""wildfly-kitchensink-ear.ear"",
        ""status"" => ""STOPPED"",
        ""subdeployment"" => undefined,
        ""subsystem"" => undefined
    }
}

deployment=wildfly-kitchensink-ear.ear:browse-content(depth=1)
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""META-INF/"",
            ""directory"" => true
        },
        {
            ""path"" => ""wildfly-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63332L
        },
        {
            ""path"" => ""wildfly-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12128L
        }
    ]

{code}

",06/Oct/16 5:01 AM;ehugonnet;Fixed by WFCORE-1851,,,,,,,,,,,,,,,,,,,,,,,,,
Ctrl-C could lead to alias not being persisted,WFCORE-1853,12653316,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jdenise,jdenise,jdenise,05/Oct/16 4:22 AM,03/Nov/16 4:07 AM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,"The bug WFCORE-1729 has revealed it. It seems to only occur on Windows.
I think that a small windows exists (possibly in Aesh) that makes the shutdown hook to not be properly invoked.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i09hdz:,9223372036854775807,,,,,,,,,,,"03/Nov/16 4:07 AM;mschvarc;Once this issue is fixed, please un-ignore the following test case: 
{code:java}
org.jboss.as.test.integration.management.cli.CliAliasTestCase#testAliasPersistenceCtrlC()
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,
Logging configuration service for dynamic deployment resources uses wrong service name for deployments,WFCORE-1852,12653239,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,jamezp,jamezp,04/Oct/16 3:25 PM,29/Nov/16 3:30 PM,29/Nov/16 3:51 PM,,,,,,,,,,Logging,,,,,0,,,,,,"Ideally if the use of a service can be removed that would be best. What's needed is a way to associate a deployments resource with a {{LogContextConfiguration}}. One option is to use a custom resource that the OSH can get the {{LogContextConfiguration}} from. This is already done for the child resources. See the {{LoggingDeploymentResources}}. The OSH can cast the resource and just get the configuration.

{quote}
[12:08 PM] Brian Stansberry: @jperkins this doesn't look right: https://github.com/wildfly/wildfly-core/blob/master/logging/src/main/java/org/jboss/as/logging/deplo...
[12:09 PM] Brian Stansberry: AFAICT it is using the management name of a deployment to create an MSC ServiceName
[12:10 PM] James R Perkins: @BrianStansberry Hmm. ...yeah. Let me look at why I was doing that.
[12:13 PM] James R Perkins: @BrianStansberry Yes that's what it's doing which thinking about it does seem wrong. Essentially it's trying to figure out which service to use for a dynamic resource on the /deployment=some.war/subsystem=logging/configuration=whatever
[12:14 PM] Brian Stansberry: you need to use the runtime-name attribute of the deployment
[12:14 PM] James R Perkins: Really it's kind of a bad use case for a service.
[12:14 PM] Brian Stansberry: I guess subdeployment has one too, although it's redundant
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09gxb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent behaviour with browse-content(depth=1) operation between archived and exploded deployments,WFCORE-1851,12653148,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mjurc,brian.stansberry,04/Oct/16 8:28 AM,05/Oct/16 8:09 AM,29/Nov/16 3:51 PM,04/Oct/16 4:01 PM,3.0.0.Alpha9,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"{{/deployment=jboss-kitchensink-ear.ear:browse-content(depth=1)}} operation returns inconsistent result depending on whether the deployment is exploded or not. Deployment attached.
Archived:
{code}{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""jboss-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63190L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12256L
        },
        {
            ""path"" => ""META-INF/"",
            ""directory"" => true
        }
    ]
}
{code}
Exploded:
{code}{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""path"" => ""META-INF/"",
            ""directory"" => true
        },
        {
            ""path"" => ""META-INF/MANIFEST.MF"",
            ""directory"" => false,
            ""file-size"" => 130L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-web.war"",
            ""directory"" => false,
            ""file-size"" => 63190L
        },
        {
            ""path"" => ""jboss-kitchensink-ear-ejb.jar"",
            ""directory"" => false,
            ""file-size"" => 12256L
        },
        {
            ""path"" => ""META-INF/application.xml"",
            ""directory"" => false,
            ""file-size"" => 802L
        },
        {
            ""path"" => ""META-INF/kitchensink-ear-quickstart-ds.xml"",
            ""directory"" => false,
            ""file-size"" => 1955L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.xml"",
            ""directory"" => false,
            ""file-size"" => 5582L
        },
        {
            ""path"" => ""META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.properties"",
            ""directory"" => false,
            ""file-size"" => 143L
        }
    ]
}
{code}",,,,,,,,,,,,,,,,JBEAP-6293,,,,,,,,,,,04/Oct/16 8:28 AM;brian.stansberry;jboss-kitchensink-ear.ear;https://issues.jboss.org/secure/attachment/12410298/jboss-kitchensink-ear.ear,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1847,,,,,,1.0,0.0,,1|i09gdz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Domain server process' main thread can terminate without triggering process exit,WFCORE-1848,12653043,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,03/Oct/16 3:26 PM,12/Oct/16 6:09 PM,29/Nov/16 3:51 PM,03/Oct/16 8:08 PM,,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"If a thread completes the DomainServerMain main(String[] args) method, the process must exit. Currently that may not occur, as this stack trace reported while manually checking the WFCORE-1844 fix showed:

{code}
 
[Server:server-one] 14:15:39,022 ERROR [stderr] (main) Exception in thread ""main"" java.lang.OutOfMemoryError: unable to create new native thread
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at java.lang.Thread.start0(Native Method)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at java.lang.Thread.start(Thread.java:714)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at org.jboss.threads.JBossThread.start(JBossThread.java:342)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:950)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1368)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at org.jboss.as.server.mgmt.domain.HostControllerConnection.asyncReconnect(HostControllerConnection.java:165)
[Server:server-one] 14:15:39,023 ERROR [stderr] (main) 	at org.jboss.as.server.mgmt.domain.HostControllerClient.reconnect(HostControllerClient.java:93)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at org.jboss.as.server.DomainServerMain.main(DomainServerMain.java:151)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at java.lang.reflect.Method.invoke(Method.java:498)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at org.jboss.modules.Module.run(Module.java:336)
[Server:server-one] 14:15:39,024 ERROR [stderr] (main) 	at org.jboss.modules.Main.main(Main.java:520)
{code}

If the process does not exit, it is no longer under the control of the PC or HC and the only thing they can do with it is kill it. So it should kill itself.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1845,,,,,,0.0,0.0,,1|i09fr3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PatchMerger overrides submodule's content merging the outer module,WFCORE-1847,12653014,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,03/Oct/16 10:23 AM,03/Oct/16 2:57 PM,29/Nov/16 3:51 PM,03/Oct/16 2:57 PM,3.0.0.Alpha9,,,,,,3.0.0.Alpha10,,Patching ,,,,,0,,,,,,"PatchMerger merges two CPs into one. In case the first CP includes updates for modules like org.outermodule and org.outermodule.innermodule. And the second CP including an update for org.outermodule.innermodule only, the merge may not happen correctly in case the modification for the innermodule will appear before the modification for the outermodule in the first CP.
The merger will copy the innermodule's content first and then override it copying the outermodule's content (including the previous version of the innermodule).",,,,,,,,,,,,,,,,JBEAP-6240,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1844,,,,,,0.0,0.0,,1|i09fkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WFLYSRV0153 error after attempting to explode archived subdeployments of archived deployments,WFCORE-1846,12652938,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,03/Oct/16 4:28 AM,03/Oct/16 2:55 PM,29/Nov/16 3:51 PM,03/Oct/16 2:55 PM,3.0.0.Alpha9,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"In archived deployments with archived subdeployments, the {{explode}} operation with {{path}} parameter defined to point at archived subdeployment causes the removal of whole deployment from the content repository. 
This operation is illegal, but the server should produce formed warning message with operation failing gracefully instead of throwing stack trace in this case.
server.log:
{code}09:05:07,664 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 29) WFLYUT0022: Unregistered web context: /subdeployment-test-web
09:05:07,701 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 2) WFLYCLINF0003: Stopped client-mappings cache from ejb container
09:05:07,719 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0208: Stopped subdeployment (runtime-name: subdeployment-test-ejb.jar) in 65ms
09:05:07,719 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0208: Stopped subdeployment (runtime-name: subdeployment-test-web.war) in 66ms
09:05:07,722 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment subdeployment-test.ear (runtime-name: subdeployment-test.ear) in 69ms
09:05:07,732 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed ""subdeployment-test.ear"" (runtime-name: ""subdeployment-test.ear"")
09:05:07,754 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0002: Content removed from location /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/content/13/5a0425d908539149b62eb99b63710c67b13466/content
09:05:07,762 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) WFLYSRV0027: Starting deployment of ""subdeployment-test.ear"" (runtime-name: ""subdeployment-test.ear"")
[0m[31m09:05:07,763 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.deployment.unit.""subdeployment-test.ear"".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit.""subdeployment-test.ear"".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment ""subdeployment-test.ear""
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:154)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1963)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1896)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content
	at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:95)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:147)
	... 5 more
Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)
	at java.io.FileInputStream.open0(Native Method)
	at java.io.FileInputStream.open(FileInputStream.java:195)
	at java.io.FileInputStream.<init>(FileInputStream.java:138)
	at org.jboss.vfs.spi.RootFileSystem.openInputStream(RootFileSystem.java:51)
	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:318)
	at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:533)
	at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:108)
	at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:91)
	... 6 more

[0m[31m09:05:07,765 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""deploy"") failed - address: ((""deployment"" => ""subdeployment-test.ear"")) - failure description: {
    ""WFLYCTL0080: Failed services"" => {""jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE"" => ""org.jboss.msc.service.StartException in service jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment \""subdeployment-test.ear\""
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content
    Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)""},
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined
}
09:05:07,767 ERROR [org.jboss.as.server] (management-handler-thread - 3) WFLYSRV0021: Deploy of deployment ""subdeployment-test.ear"" was rolled back with the following failure message: 
{
    ""WFLYCTL0080: Failed services"" => {""jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE"" => ""org.jboss.msc.service.StartException in service jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment \""subdeployment-test.ear\""
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content
    Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)""},
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.deployment.unit.\""subdeployment-test.ear\"".STRUCTURE""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => undefined
}
09:05:07,768 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0028: Stopped deployment subdeployment-test.ear (runtime-name: subdeployment-test.ear) in 1ms
09:05:07,770 INFO  [org.jboss.as.controller] (management-handler-thread - 3) WFLYCTL0183: Service status report
WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit.""subdeployment-test.ear"".STRUCTURE{code}",,,,,,,,,,,,,,,,JBEAP-6273,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1843,,,,,,0.0,0.0,,1|i09f47:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logging subsystem scans the CWD on server boot,WFCORE-1845,12652897,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,brentdouglas,brentdouglas,30/Sep/16 6:54 PM,26/Oct/16 4:40 PM,29/Nov/16 3:51 PM,26/Oct/16 4:26 PM,2.0.10.Final,,,,,,3.0.0.Alpha11,,Logging,,,,,0,,,,,,"When booting the server from a directory where the subtree is large the server hangs for a long time. JStack shows that the logging subsystem is scanning the CWD.

Booting the server from the root dir of a maven parent project containing 2 subprojects, a swarm project and a small NPM subproject added 33s to the server boot time compared to stepping into the swarm project and booting it.

Stacktrace while the server is booting:

{noformat}
Thread 25859: (state = IN_NATIVE)
 - sun.nio.fs.UnixNativeDispatcher.lstat0(long, sun.nio.fs.UnixFileAttributes) @bci=0 (Compiled frame; information may be imprecise)
 - sun.nio.fs.UnixNativeDispatcher.lstat(sun.nio.fs.UnixPath, sun.nio.fs.UnixFileAttributes) @bci=10, line=300 (Compiled frame)
 - sun.nio.fs.UnixFileAttributes.get(sun.nio.fs.UnixPath, boolean) @bci=22, line=72 (Compiled frame)
 - sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes() @bci=15, line=52 (Compiled frame)
 - sun.nio.fs.UnixFileSystemProvider.readAttributes(java.nio.file.Path, java.lang.Class, java.nio.file.LinkOption[]) @bci=57, line=144 (Compiled frame)
 - java.nio.file.Files.readAttributes(java.nio.file.Path, java.lang.Class, java.nio.file.LinkOption[]) @bci=7, line=1737 (Compiled frame)
 - java.nio.file.FileTreeWalker.getAttributes(java.nio.file.Path, boolean) @bci=56, line=219 (Compiled frame)
 - java.nio.file.FileTreeWalker.visit(java.nio.file.Path, boolean, boolean) @bci=3, line=276 (Compiled frame)
 - java.nio.file.FileTreeWalker.next() @bci=134, line=372 (Compiled frame)
 - java.nio.file.Files.walkFileTree(java.nio.file.Path, java.util.Set, int, java.nio.file.FileVisitor) @bci=256, line=2706 (Compiled frame)
 - java.nio.file.Files.walkFileTree(java.nio.file.Path, java.nio.file.FileVisitor) @bci=9, line=2742 (Interpreted frame)
 - org.jboss.as.logging.LoggingResource.findFiles(java.lang.String, org.jboss.dmr.ModelNode, boolean) @bci=47, line=251 (Interpreted frame)
 - org.jboss.as.logging.LoggingResource.getChildrenNames(java.lang.String) @bci=37, line=157 (Interpreted frame)
 - org.jboss.as.logging.LoggingResource.getChildren(java.lang.String) @bci=11, line=171 (Interpreted frame)
 - org.jboss.as.controller.registry.AbstractModelResource$DelegateResource.getChildren(java.lang.String) @bci=5, line=362 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.PathAddress, org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=99, line=289 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=19, line=276 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int) @bci=5, line=262 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.PathAddress, org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=189, line=291 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=19, line=276 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int) @bci=5, line=262 (Interpreted frame)
 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource) @bci=2, line=250 (Interpreted frame)
 - org.jboss.as.controller.ModelControllerImpl.writeModel(org.jboss.as.controller.ModelControllerImpl$ManagementModelImpl, java.util.Set) @bci=19, line=769 (Interpreted frame)
 - org.jboss.as.controller.OperationContextImpl.createPersistenceResource() @bci=17, line=519 (Interpreted frame)
 - org.jboss.as.controller.AbstractOperationContext.executeDoneStage(org.jboss.dmr.ModelNode) @bci=22, line=708 (Interpreted frame)
 - org.jboss.as.controller.AbstractOperationContext.processStages() @bci=277, line=680 (Interpreted frame)
 - org.jboss.as.controller.AbstractOperationContext.executeOperation() @bci=27, line=370 (Interpreted frame)
 - org.jboss.as.controller.OperationContextImpl.executeOperation() @bci=20, line=1344 (Interpreted frame)
 - org.jboss.as.controller.ModelControllerImpl.boot(java.util.List, org.jboss.as.controller.client.OperationMessageHandler, org.jboss.as.controller.ModelController$OperationTransactionControl, boolean, org.jboss.as.controller.extension.MutableRootResourceRegistrationProvider, boolean, boolean) @bci=410, line=485 (Interpreted frame)
 - org.jboss.as.controller.AbstractControllerService.boot(java.util.List, boolean, boolean, org.jboss.as.controller.extension.MutableRootResourceRegistrationProvider) @bci=16, line=387 (Interpreted frame)
 - org.jboss.as.controller.AbstractControllerService.boot(java.util.List, boolean) @bci=7, line=349 (Interpreted frame)
 - org.jboss.as.server.ServerService.boot(java.util.List, boolean) @bci=22, line=392 (Interpreted frame)
 - org.jboss.as.server.ServerService.boot(org.jboss.as.controller.BootContext) @bci=907, line=365 (Interpreted frame)
 - org.jboss.as.controller.AbstractControllerService$1.run() @bci=12, line=299 (Interpreted frame)
 - java.lang.Thread.run() @bci=11, line=745 (Interpreted frame)
{noformat}
","OSX El Capitan, Oracle JDK 1.8.0_92 && 101, swarm 2016.8.1, WF 10.0.0.Final, WF-CORE 2.0.10.Final",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1870,https://github.com/wildfly/wildfly-core/pull/1880,,,,,0.0,2.0,,1|i09evz:,9223372036854775807,,,,,,,,,,,18/Oct/16 3:43 AM;heiko.braun;[~jamezp] Can yo give me an estimate for this? I have a bunch of other WF Core fixes and wonder if it's worth waiting for this.,19/Oct/16 12:49 PM;jamezp;[~heiko.braun] I looked at this a bit yesterday. I'll be talking to Brian more about it today. Hopefully by the end of the week or early next week we'll have something sorted out.,,,,,,,,,,,,,,,,,,,,,,,,,
RemoteProxyController can block indefinitely trying to cancel a timed out operation,WFCORE-1844,12652896,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,30/Sep/16 5:27 PM,12/Oct/16 6:09 PM,29/Nov/16 3:51 PM,03/Oct/16 8:08 PM,,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"Trying to execute management requests against a managed domain server that is unresponsive due to OOME results in threads on the HC in stuck permanently in a state like this:

{code}
""Host Controller Service Threads - 48"" #91 prio=5 os_prio=31 tid=0x00007fbbf0039800 nid=0x3d33 in Object.wait() [0x0000700003c42000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x00000007b64842d0> (a org.jboss.as.protocol.mgmt.ActiveOperationImpl)
	at java.lang.Object.wait(Object.java:502)
	at org.jboss.threads.AsyncFutureTask.awaitUninterruptibly(AsyncFutureTask.java:221)
	- locked <0x00000007b64842d0> (a org.jboss.as.protocol.mgmt.ActiveOperationImpl)
	at org.jboss.as.controller.client.impl.BasicDelegatingAsyncFuture.awaitUninterruptibly(BasicDelegatingAsyncFuture.java:57)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.awaitUninterruptibly(AbstractDelegatingAsyncFuture.java:35)
	at org.jboss.as.controller.client.impl.BasicDelegatingAsyncFuture.cancel(BasicDelegatingAsyncFuture.java:74)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.cancel(AbstractDelegatingAsyncFuture.java:35)
	at org.jboss.as.controller.remote.RemoteProxyController.execute(RemoteProxyController.java:173)
	at org.jboss.as.controller.TransformingProxyController$Factory$TransformingProxyControllerImpl.execute(TransformingProxyController.java:203)
	at org.jboss.as.controller.ProxyStepHandler.execute(ProxyStepHandler.java:170)
{code}

The RemoteProxyController code looks like this:

{code}
                long timeout = blockingTimeout.getProxyBlockingTimeout(targetAddress, this);
                prepared = queue.poll(timeout, TimeUnit.MILLISECONDS);
                if (prepared == null) {
                    blockingTimeout.proxyTimeoutDetected(targetAddress);
                    futureResult.cancel(true);
{code}

The problem is that ""cancel"" call will block, uninterruptibly, until the remote process responds to the cancel message. Which it won't do, as it's all messed up from the OOME condition.

Hopefully this can be simply fixed by converting that call to asyncCancel.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1845,,,,,,0.0,0.0,,1|i09evr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rejection-style transformer tests assume each operation generated by parser has distinct PathAddress,WFCORE-1836,12634897,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,rhusar,pferraro,pferraro,23/Jun/16 4:41 PM,31/Oct/16 11:50 AM,29/Nov/16 3:51 PM,31/Oct/16 11:50 AM,,,,,,,3.0.0.Alpha11,,Test Suite,,,,,0,,,,,,"For rejection-style transformer tests, the subsystem test framework stores expected rejected operations in a map keyed by PathAddress.  This is fine when the subsystem's parser only generates add operations.  However, if the parser generates an add operation as well as a a write-attribute operation, these 2 operations will have the same path address.  If we expect one of these operations to be rejected, but not the other, we end up with an unexpected rejection - and the test fails.
This is a little hard to explain in the abstract, so let me know if any of the above doesn't make sense.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1871,,,,,,0.0,8.0,,1|i06k8n:,9223372036854775807,,,,,,,,,,,"27/Sep/16 5:59 PM;brian.stansberry;[~kabirkhan] this one is WFCORE, right?",27/Sep/16 6:36 PM;kabirkhan;Yes,"28/Sep/16 11:30 AM;kabirkhan;[~pferraro] Are you talking about the recursive loop in checkFailedTransformedBootOperations, or in the FailedOperationTransformationConfig?",28/Sep/16 12:25 PM;pferraro;[~kabirkhan] I'm talking about the FailedOperationTransformationConfig.PathAddressConfigRegistry.,"28/Sep/16 12:41 PM;kabirkhan;[~pferraro] Does FailedOperationTransformationConfig.ChainedConfig help at all? There should be a few usages of that scattered around the subsystem tests. I'm afraid I don't remember off the top of my head if it will work for exactly this situation since it has been a while, but it was done to work around situations like this (at least vaguely similar situations!).","30/Sep/16 10:25 AM;pferraro;[~kabirkhan] Hmm - it might, but I doubt it. I'll try. If it works, I'll close this jira.","20/Oct/16 5:28 PM;rhusar;We can use chained config for this use case, opened WFLY-7362  to reenable the test case.","24/Oct/16 12:51 PM;rhusar;Actually, the issue still holds. What we need is different set of attribute checkers for the same path but different operations since there is and add and write-attribute ops at the same address. What I am doing in  WFLY-7362 still a workaround.",,,,,,,,,,,,,,,,,,,
Unexpected attribute error message doesn't list 'name' attribute.,WFCORE-1834,12652286,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,dlofthouse,dlofthouse,27/Sep/16 12:10 PM,28/Oct/16 10:20 PM,29/Nov/16 3:51 PM,28/Oct/16 10:20 PM,,,,,,,3.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"I have recently updated one of our resource definitions and missed updating one of the subsystem templates so currently have the following error reported: -

{noformat}
Message: WFLYCTL0376: Unexpected attribute 'security-domain' encountered. Valid attributes are: 'http-authentication-factory, override-deployment-config'
[Host Controller] 	at org.jboss.as.controller.parsing.ParseUtils.unexpectedAttribute(ParseUtils.java:128)
{noformat}

Previously my resource has been using the 'security-domain' attribute for it's name but now has been reverted to using 'name' for the name - in the above error message 'name' should have been listed as one of the valid attributes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1883,,,,,,0.0,1.0,,1|i09bgn:,9223372036854775807,,,,,,,,,,,"28/Sep/16 10:59 AM;ctomc;Name isn't technically an attribute, but name/anchor for resource.

But yes we should report that in error messages.",,,,,,,,,,,,,,,,,,,,,,,,,,
Missing doPrivileged sections in JBossSecurityClient,WFCORE-1832,12652231,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,,dlofthouse,jtymel,jtymel,27/Sep/16 9:28 AM,01/Nov/16 7:36 AM,29/Nov/16 3:51 PM,,,,,,,,,,Security,,,,,0,,,,,,"There is a regression introduced by recent PicketBox upgrade (part of [1]). With PicketBox 4.9.7[2] it is possible to run {{performSimpleLogin()}} and {{cleanUp()}} methods of {{JBossSecurityClient}} class with security manager enabled. However; running these methods with PicketBox 5.0.0.Alpha3[3] causes AccessControlException.

PicketBox 4.9.7 is in EAP 7.1.0.DR3, PicketBox 5.0.0.Alpha3 in EAP 7.1.0.DR4 and DR5 => regression against 7.1.0.DR3.

This issue was noticed in consequence of an investigation of failed tests in AS TS run with security manager.

Tests that fail on {{performSimpleLogin()}} method:
* org.jboss.as.test.integration.ee.concurrent.DefaultContextServiceTestCase#testTaskSubmit
* org.jboss.as.test.integration.ee.concurrent.DefaultManagedExecutorServiceTestCase#testTaskSubmit
* org.jboss.as.test.integration.ee.concurrent.DefaultManagedScheduledExecutorServiceTestCase#testTaskSubmit
* org.jboss.as.test.integration.ee.concurrent.DefaultManagedThreadFactoryTestCase#testTaskSubmit
* org.jboss.as.test.integration.ejb.security.RunAsPrincipalTestCase#testAnonymous
* org.jboss.as.test.integration.ejb.security.RunAsPrincipalTestCase#testJackInABox 
* org.jboss.as.test.integration.ejb.security.RunAsPrincipalTestCase#testSingletonPostconstructSecurity
* org.jboss.as.test.integration.ejb.security.RunAsPrincipalTestCase#testSingletonPostconstructSecurityNotPropagating
* org.jboss.as.test.integration.ejb.security.callerprincipal.GetCallerPrincipalTestCase#testMDBLifecycle
* org.jboss.as.test.integration.ejb.security.singleton.SingletonSecurityTestCase#testInvocationOnSecuredMethodWithCorrectRole
* org.jboss.as.test.integration.ejb.security.singleton.SingletonSecurityTestCase#testInvocationOnSecuredMethodWithInCorrectRole

{{./integration-tests.sh -DtestLogToFile=false -Dts.noSmoke -Dts.basic -Dtest=DefaultContextServiceTestCase -Dsecurity.manager}}

{code}
SEVERE [org.jboss.arquillian.protocol.jmx.JMXTestRunner] (pool-3-thread-1) Failed: org.jboss.as.test.integration.ee.concurrent.DefaultContextServiceTestCase.testTaskSubmit: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.lang.RuntimePermission"" ""org.jboss.security.getSecurityContext"")"" in code source ""(vfs:/content/DefaultContextServiceTestCase.war/WEB-INF/classes <no signer certificates>)"" of ""ModuleClassLoader for Module ""deployment.DefaultContextServiceTestCase.war:main"" from Service Module Loader"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:278)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:175)
	at org.jboss.security.SecurityContextAssociation.getSecurityContext(SecurityContextAssociation.java:145)
	at org.jboss.security.client.JBossSecurityClient.performSimpleLogin(JBossSecurityClient.java:77)
	at org.jboss.security.client.SecurityClient.login(SecurityClient.java:74)
	at org.jboss.as.test.integration.ee.concurrent.DefaultContextServiceTestCase.testTaskSubmit(DefaultContextServiceTestCase.java:55)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.jboss.arquillian.junit.Arquillian$8$1.invoke(Arquillian.java:370)
	at org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:116)
	at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
	at org.jboss.arquillian.container.test.impl.execution.ContainerTestExecuter.execute(ContainerTestExecuter.java:38)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:136)
	at org.jboss.arquillian.junit.Arquillian$8.evaluate(Arquillian.java:363)
	at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:245)
	at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:422)
	at org.jboss.arquillian.junit.Arquillian.access$200(Arquillian.java:54)
	at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:259)
	at org.jboss.arquillian.junit.Arquillian$7$1.invoke(Arquillian.java:315)
	at org.jboss.arquillian.container.test.impl.execution.BeforeLifecycleEventExecuter.on(BeforeLifecycleEventExecuter.java:35)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:116)
	at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.fireCustomLifecycle(EventTestRunnerAdaptor.java:159)
	at org.jboss.arquillian.junit.Arquillian$7.evaluate(Arquillian.java:311)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:204)
	at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:422)
	at org.jboss.arquillian.junit.Arquillian.access$200(Arquillian.java:54)
	at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:218)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:166)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.jboss.arquillian.junit.container.JUnitTestRunner.execute(JUnitTestRunner.java:66)
	at org.jboss.arquillian.protocol.jmx.JMXTestRunner.doRunTestMethod(JMXTestRunner.java:180)
	at org.jboss.as.arquillian.service.ArquillianService$ExtendedJMXTestRunner.doRunTestMethod(ArquillianService.java:243)
	at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethodInternal(JMXTestRunner.java:162)
	at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethod(JMXTestRunner.java:141)
	at org.jboss.as.arquillian.service.ArquillianService$ExtendedJMXTestRunner.runTestMethod(ArquillianService.java:219)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:275)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:112)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:46)
	at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
	at org.jboss.as.jmx.PluggableMBeanServerImpl$TcclMBeanServer.invoke(PluggableMBeanServerImpl.java:1503)
	at org.jboss.as.jmx.PluggableMBeanServerImpl.invoke(PluggableMBeanServerImpl.java:724)
	at org.jboss.as.jmx.BlockingNotificationMBeanServer.invoke(BlockingNotificationMBeanServer.java:168)
	at org.jboss.remotingjmx.protocol.v2.ServerProxy$InvokeHandler.handle(ServerProxy.java:950)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1$1.run(ServerCommon.java:153)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:75)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:70)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor.handleEvent(ServerInterceptorFactory.java:70)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1.run(ServerCommon.java:149)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

Tests failing on {{cleanUp()}} method:
* org.jboss.as.test.integration.ejb.servlet.ServletUnitTestCase#testEJBServlet
* org.jboss.as.test.integration.ejb.servlet.ServletUnitTestCase#testEJBServletEar

{{./integration-tests.sh -DtestLogToFile=false -Dts.noSmoke -Dts.basic -Dtest=ServletUnitTestCase -Dsecurity.manager}}

{code}
ERROR [org.jboss.as.test.integration.ejb.servlet.EJBServlet] (default task-1) java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.lang.RuntimePermission"" ""org.jboss.security.getSecurityContext"")"" in code source ""(vfs:/content/ejb3-servlet.war/WEB-INF/classes <no signer certificates>)"" of ""ModuleClassLoader for Module ""deployment.ejb3-servlet.war:main"" from Service Module Loader"")
15:07:52,122 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /ejb3-servlet/EJBServlet: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.lang.RuntimePermission"" ""org.jboss.security.setSecurityContext"")"" in code source ""(vfs:/content/ejb3-servlet.war/WEB-INF/classes <no signer certificates>)"" of ""ModuleClassLoader for Module ""deployment.ejb3-servlet.war:main"" from Service Module Loader"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:278)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:175)
	at org.jboss.security.SecurityContextAssociation.setSecurityContext(SecurityContextAssociation.java:124)
	at org.jboss.security.client.JBossSecurityClient.cleanUp(JBossSecurityClient.java:95)
	at org.jboss.security.client.SecurityClient.logout(SecurityClient.java:86)
	at org.jboss.as.test.integration.ejb.servlet.EJBServlet.processRequest(EJBServlet.java:75)
	at org.jboss.as.test.integration.ejb.servlet.EJBServlet.doGet(EJBServlet.java:84)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)
	at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
	at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1668)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1668)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1668)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1668)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$1$1.run(ServletInitialHandler.java:110)
	at java.security.AccessController.doPrivileged(Native Method)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:107)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:207)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:810)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

[1] https://github.com/wildfly/wildfly-core/pull/1764/files
[2] https://github.com/picketbox/picketbox/blob/v4.9.6.Final/security-jboss-sx/jbosssx/src/main/java/org/jboss/security/client/JBossSecurityClient.java
[3] https://github.com/picketbox/picketbox/blob/5.0.0.Alpha3/security-jboss-sx/jbosssx/src/main/java/org/jboss/security/client/JBossSecurityClient.java",,,,,,,,,,,,,,,,JBEAP-6226,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09b53:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow server to start in suspended mode,WFCORE-1829,12652101,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,27/Sep/16 12:29 AM,25/Nov/16 6:36 AM,29/Nov/16 3:51 PM,25/Nov/16 6:36 AM,,,,,,,3.0.0.Alpha13,,,,,,,0,,,,,,It should be possible to start the server in suspended mode. In addition to this as part of normal startup the server should be suspended until the MSC service container hits stability. This will fix a lot of the graceful startup issues that have been reported.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i09ad3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tab completion don't return inner attributes,WFCORE-1826,12651949,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,26/Sep/16 9:26 AM,28/Sep/16 2:32 PM,29/Nov/16 3:51 PM,28/Sep/16 2:32 PM,,,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"*Description of problem:*
Tab completion returns wrong values

*How reproducible:*
Always

*Steps to Reproduce:*
{noformat}
/extension=org.wildfly.extension.elytron:add
/subsystem=elytron:add
reload
/subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{permissions=[{class-name=""org.wildfly.security.auth.permission.LoginPermission""}],<TAB>
{noformat}

*Actual results:*
{noformat}
/subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{permissions=[{class-name=""org.wildfly.security.auth.permission.LoginPermission""}],{
{noformat}


*Expected results:*
{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{permissions=[{class-name=""org.wildfly.security.auth.permission.LoginPermission""}],
principals  roles  
[standalone@localhost:9990 /] /subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{permissions=[{class-name=""org.wildfly.security.auth.permission.LoginPermission""}],
{noformat}",,,,,,,,,,,,,,,,JBEAP-6044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1835,,,,,,0.0,0.0,,1|i099if:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tab completion throws IllegalArgumentException after two '{' characters and '=' character,WFCORE-1825,12651948,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,26/Sep/16 9:22 AM,28/Sep/16 2:31 PM,29/Nov/16 3:51 PM,28/Sep/16 2:31 PM,,,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"*Description of problem:*
This issue is similar like JBEAP-6043. Tab completion throws IllegalArgumentException after two '\{' characters and '=' character. Or tab completition returns unlimited count of ')' characters.

*How reproducible:*
Always

----

*1. Steps to Reproduce:*
{noformat}
Get fresh EAP.
./standalone.sh &
./jboss-cli.sh -c
/subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{roles=[{role<TAB><TAB><TAB><TAB><TAB><TAB><TAB><TAB><TAB><TAB>
{noformat}

*1. Actual results:*
{noformat}
/subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{roles=[{role))))))))))
{noformat}

----

*2. Steps to Reproduce:*
{noformat}
./standalone.sh -c standalone-elytron.xml &
./jboss-cli.sh -c
/subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{roles=[{role=<TAB>
{noformat}

*2. Actual results:*
* java.lang.IllegalArgumentException
* Details:
{noformat}
[mkopecky@dhcp-10-40-5-171 bin]$ ./jboss-cli.sh -c
[standalone@localhost:9990 /] /subsystem=elytron/simple-permission-mapper=login-permission-mapper2:add(permission-mappings=[{roles=[{role=Exception in thread ""Aesh Process Loop 30318020"" java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.getChild(ModelValue.java:115)
	at org.jboss.dmr.ModelNode.get(ModelNode.java:861)
	at org.jboss.as.cli.impl.ValueTypeCompleter$ValueTypeCallbackHandler.getCandidates(ValueTypeCompleter.java:475)
	at org.jboss.as.cli.impl.ValueTypeCompleter.complete(ValueTypeCompleter.java:321)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:254)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:74)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:137)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:64)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:143)
	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:155)
	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:427)
	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:165)
	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:773)
	at org.jboss.aesh.console.Console.execute(Console.java:733)
	at org.jboss.aesh.console.Console.access$900(Console.java:73)
	at org.jboss.aesh.console.Console$6.run(Console.java:642)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[mkopecky@dhcp-10-40-5-171 bin]$
{noformat}",,,,,,,,,,,,,,,,JBEAP-6143,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1835,,,,,,0.0,0.0,,1|i099i7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can not parse object list attributes that contains a complex attribute,WFCORE-1824,12651937,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jmesnil,jmesnil,26/Sep/16 8:30 AM,28/Sep/16 2:30 PM,29/Nov/16 3:51 PM,28/Sep/16 2:30 PM,3.0.0.Alpha8,,,,,,3.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"My resource defines an attribute which is a LIST of OBJECT that corresponds to a class (class name + module) and Properties that are passed to the created instance:

{noformat}
    private static final String CLASS = ""class"";
    private static final String MODULE = ""module"";
    public static final PropertiesAttributeDefinition PROPERTIES = new PropertiesAttributeDefinition.Builder(""properties"", true)
            .setAllowExpression(true)
            .build();

    public static final ObjectTypeAttributeDefinition PROCESS_STATE_LISTENER = ObjectTypeAttributeDefinition.Builder.of(""process-state-listener"",
            SimpleAttributeDefinitionBuilder.create(CLASS, ModelType.STRING, false)
                    .setAllowExpression(false)
                    .build(),
            SimpleAttributeDefinitionBuilder.create(MODULE, ModelType.STRING, false)
                    .setAllowExpression(false)
                    .build(),
            PROPERTIES)
            .setRestartAllServices()
            .setAllowNull(true)
            .build();
    public static final AttributeDefinition PROCESS_STATE_LISTENERS = ObjectListAttributeDefinition.Builder.of(""listeners"", PROCESS_STATE_LISTENER)
            .setAllowNull(false)
            .setRuntimeServiceNotRequired()
            .build();
{noformat}

I can create the resource from the CLI:

{noformat}
 /subsystem=core-management/service=process-state-listeners:add(listeners=[{class=org.foo.Listener, module=org.foo,, properties = {foo  = true, bar  = ${bar.prop:2}}}])
{""outcome"" => ""success""}
{noformat}

And the resource and its attribute is properly marshalled to the XML configuration:

{noformat}
            <process-state-listeners>
                <listeners>
                    <process-state-listener class=""org.foo.Listener"" module=""org.foo"">
                        <properties>
                            <property name=""foo"" value=""true""/>
                            <property name=""bar"" value=""${bar.prop:2}""/>
                        </properties>
                    </process-state-listener>
                </listeners>
            </process-state-listeners>
{noformat}

However the resource can not be parsed and it fails with the exception:

{noformat}
2016-09-27 14:57:35,285 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)
	at org.jboss.as.server.ServerService.boot(ServerService.java:355)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:303)
	at java.lang.Thread.run(Thread.java:745)
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[118,25]
Message: WFLYCTL0198: Unexpected element '{urn:jboss:domain:core-management:1.0}properties' encountered
	at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:89)
	at org.jboss.as.controller.parsing.ParseUtils.requireNoContent(ParseUtils.java:244)
	at org.jboss.as.controller.AttributeParser$5.parseElement(AttributeParser.java:197)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parseAttributes(PersistentResourceXMLDescription.java:208)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parseAttributeGroups(PersistentResourceXMLDescription.java:140)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:117)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:258)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:135)
	at org.wildfly.extension.management.CoreManagementSubsystemParser_1_0.readElement(CoreManagementSubsystemParser_1_0.java:77)
	at org.wildfly.extension.management.CoreManagementSubsystemParser_1_0.readElement(CoreManagementSubsystemParser_1_0.java:50)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69)
	at org.jboss.as.server.parsing.StandaloneXml_5.parseServerProfile(StandaloneXml_5.java:591)
	at org.jboss.as.server.parsing.StandaloneXml_5.readServerElement(StandaloneXml_5.java:245)
	at org.jboss.as.server.parsing.StandaloneXml_5.readElement(StandaloneXml_5.java:144)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:107)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:49)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)
	... 3 more
{noformat}

The code in org.jboss.as.controller.AttributeParser#parseElement:197 to parse a list of objects assumes that the object's value are all represented by XML attributes. In my case, that's not correct as the ""properties"" attribute is represented by XML elements.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1834,,,,,,0.0,1.0,,1|i099fr:,9223372036854775807,,,,,,,,,,,"26/Sep/16 10:12 AM;brian.stansberry;Tomaz, can you have a look?",,,,,,,,,,,,,,,,,,,,,,,,,,
ConnectDialog uses JDK internal sun.tools.jconsole.Utilities.ensureContrast,WFCORE-1823,12651929,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,baranowb,rsvoboda,rsvoboda,26/Sep/16 7:49 AM,16/Nov/16 3:28 AM,29/Nov/16 3:51 PM,,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"ConnectDialog uses sun.tools.jconsole.Utilities.ensureContrast JDK internal API (jdk.jconsole)

https://github.com/wildfly/wildfly-core/blob/master/cli/src/main/java/org/jboss/as/cli/gui/ConnectDialog.java#L155

ensureContrast logic could be ported to util method and dependency on JDK method removed
http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/sun/tools/jconsole/Utilities.java#Utilities.ensureContrast%28java.awt.Color%2Cjava.awt.Color%29",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1956,,,,,,0.0,0.0,,1|i099e7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failures in ModuleOpsCompletionTestCase,WFCORE-1821,12651846,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,ehugonnet,brian.stansberry,brian.stansberry,23/Sep/16 4:07 PM,26/Sep/16 1:34 PM,29/Nov/16 3:51 PM,26/Sep/16 1:34 PM,,,,,,,,,Test Suite,,,,,0,,,,,,"Failed tests: 
  ModuleOpsCompletionTestCase.testModuleAddCompletionSuggestions:56->testSuggestion:146->testSuggestion:153 expected:<[org, ibm, io, javax, org, sun]> but was:<[ibm, io, javax, org, sun]>

There's already a PR that's probably meant to fix this but it isn't passing CI. I'm going to @Ignore this test.",,,,,,,,,,,,,,,,,,,,WFCORE-1812,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i098wf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It's not possible to re-add extension ,WFCORE-1815,12651730,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,simkam,simkam,23/Sep/16 7:56 AM,28/Sep/16 2:34 PM,29/Nov/16 3:51 PM,28/Sep/16 2:34 PM,3.0.0.Alpha8,,,,,,3.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"{noformat}
[standalone@localhost:9990 /] /subsystem=ejb3:remove
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
[standalone@localhost:9990 /] reload
[standalone@localhost:9990 /] /extension=org.jboss.as.ejb3:remove
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /extension=org.jboss.as.ejb3:add   
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at '/deployment=*/subdeployment=*/subsystem=ejb3'"",
    ""rolled-back"" => true
}
{noformat}

{noformat}
13:46:48,278 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""add"") failed - address: ([(""extension"" => ""org.jboss.as.ejb3"")]): java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at '/deployment=*/subdeployment=*/subsystem=ejb3'
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:222)
        at org.jboss.as.controller.extension.ExtensionRegistry$DeploymentManagementResourceRegistration.registerSubModel(ExtensionRegistry.java:922)
        at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerDeploymentModel(ExtensionRegistry.java:700)
        at org.jboss.as.ejb3.subsystem.EJB3Extension.initialize(EJB3Extension.java:91)
        at org.jboss.as.controller.extension.ExtensionAddHandler.initializeExtension(ExtensionAddHandler.java:131)
        at org.jboss.as.controller.extension.ExtensionAddHandler.execute(ExtensionAddHandler.java:83)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:422)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}

the error with logging subsystem, I didn't try other subsystems

reload after extension:remove helps",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1836,,,,,,0.0,1.0,,1|i0989r:,9223372036854775807,,,,,,,,,Workaround Exists,reload after extension:remove,23/Sep/16 10:31 AM;ctomc;I think it is similar problem to what we had in WFCORE-1785,,,,,,,,,,,,,,,,,,,,,,,,,,
PeriodicSizeRotatingFileHandler's are always replaced during boot,WFCORE-1810,12651018,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,jamezp,Takis,Takis,20/Sep/16 9:06 AM,20/Sep/16 4:24 PM,29/Nov/16 3:51 PM,20/Sep/16 4:24 PM,,,,,,,2.0.0.CR6,,Logging,,,,,0,,,,,,A {{periodic-size-rotating-file-handler}} will be replaced during the subsystem add operation. This could be an issue with {{async-handler}}'s where the handler may see the old handler that was closed.,,,,,,,,,,,,,,,,WFCORE-1018,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1127,,,,,,0.0,2.0,,1|i094db:,9223372036854775807,,,,,,,,,,,20/Sep/16 11:32 AM;jamezp;[~panossot] Does this issue still exist? It looks like it was resolved in WFCORE-1018.,20/Sep/16 4:24 PM;Takis;Duplicate of WFCORE-1018,,,,,,,,,,,,,,,,,,,,,,,,,
JBoss CLI patch command doesn't honor custom configuration location,WFCORE-1809,12650999,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,aloubyansky,aloubyansky,20/Sep/16 7:54 AM,10/Nov/16 11:35 AM,29/Nov/16 3:51 PM,,3.0.0.Alpha8,,,,,,,,Patching ,,,,,0,,,,,,"Suppose we are using custom standalone directory(example: standalone_dev) and if we try to rollback applied CP patch, with ""--rest-configuration=true"" option, it always restore configuration files from default location(JBOSS_HOME/standalone) not from the ""standalone_dev"" directory. I can see same result when I try to rollback patch through management console and through JBoss CLI in connected mode. 
",,,,,,,,,,,,,,,,JBEAP-6023,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i094af:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI config (jboss-cli.xml) is trimming vault-options when it should pass them on as is,WFCORE-1807,12650622,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,19/Sep/16 2:56 AM,19/Sep/16 9:34 AM,29/Nov/16 3:51 PM,19/Sep/16 9:34 AM,3.0.0.Alpha8,,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"Vault option is calling trim which is causing issues with custom vault implementation.  
The implementation of the vault config parser in the normal EAP config (i.e. in standalone.xml) does not do this.

To provide more details why this is an issue, the custom impl is prepending a string to an executable command.  By trimming the command is being mangled:

        <vault code=""com.example.CommandVault"" module=""com.example"">
            <vault-option name=""prependToValue"" value=""perform_encryption.sh -value ""/>
            <vault-option name=""allowEmptyPassword"" value=""false""/>
        </vault>

",,,,,,,,,,,,,,,,JBEAP-5690,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0922n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in BasicOperationsUnitTestCase.testPathInfo,WFCORE-1805,12650548,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,16/Sep/16 2:36 PM,29/Sep/16 10:14 PM,29/Nov/16 3:51 PM,29/Sep/16 10:14 PM,3.0.0.Alpha7,,,,,,3.0.0.Alpha10,,Domain Management,Test Suite,,,,0,,,,,,"This test is failing intermittently. I'm going to @Ignore it.

This one should be a bit higher priority than the typical intermittent test failure as the stuff being tested is pretty new, so there's a higher chance this is a bug in the code instead of just a test issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i091nj:,9223372036854775807,,,,,,,,,,,29/Sep/16 9:44 PM;brian.stansberry;The PR is merged for Alpha9 but I'll leave this open until https://github.com/wildfly/wildfly-core/pull/1837 is in as well as that further hardens the test.,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI comments are not ended at the end of line,WFCORE-1804,12650454,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,aloubyansky,aloubyansky,16/Sep/16 7:21 AM,23/Sep/16 6:45 PM,29/Nov/16 3:51 PM,23/Sep/16 6:45 PM,,,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"*Description of problem:*
* CLI comments are not ended at the end of line, if it contains quotation marks or apostrophes.
* This is regression against EAP 6.4.x

*How reproducible:*
Always

*Steps to Reproduce + Actual results:*
{noformat}
[standalone@localhost:9990 /] # test ' test    
> 
{noformat}
{noformat}
[standalone@localhost:9990 /] # what "" what
> 
{noformat}

*Expected results:*
{noformat}
[standalone@localhost:9990 /] # test ' test    
[standalone@localhost:9990 /] 
{noformat}
{noformat}
[standalone@localhost:9990 /] # what "" what 
[standalone@localhost:9990 /] 
{noformat}",,,,,,,,,,,,,,,,JBEAP-6037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i0913b:,9223372036854775807,,,,,,,,,,,"16/Sep/16 7:22 AM;aloubyansky;Jeff, could you please investigate? Thanks!","16/Sep/16 8:13 AM;jdenise;This is an Aesh behavior. Aesh expects quotes and double quotes to be escaped: # test \"" <return> works fine.
",,,,,,,,,,,,,,,,,,,,,,,,,
CLI tests to modify history file located in user home directory,WFCORE-1803,12650441,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,16/Sep/16 5:15 AM,16/Sep/16 8:20 AM,29/Nov/16 3:51 PM,16/Sep/16 8:15 AM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"These tests must set the user.home var to Temporary Location.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1805,,,,,,0.0,0.0,,1|i0910f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Executing a read-attribute operation is allowed on non-existing resources with for attributes with defined read handlers,WFCORE-1800,12650368,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,jamezp,jamezp,15/Sep/16 12:08 PM,15/Sep/16 12:43 PM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"If an attribute defines an {{OperationStepHandler}} the global {{read-attribute}} operation will execute the handler regardless if the resource exists.

Here's an example that will successfully execute and return the name {{invalid}} for the {{name}} attribute even though the resource does not exist.
{code}
/path=invalid(name=name)
{code}

For attributes that use the default means of reading the attribute value the {{context.readResource(PathAddress.EMPTY_ADDRESS, false)}} is already invoked which will cause a failure. For attributes which define a custom read OSH the outcome is unpredictable as the existence of the resource is not validated before invoking the OSH.

The attached patch simply invokes the {{context.readResource(PathAddress.EMPTY_ADDRESS, false)}} before the invocation of the custom OSH.",,,,,,,,,,,,,,,,,,,,,WFCORE-1796,,,,,,15/Sep/16 12:09 PM;jamezp;WFCORE-1800.patch;https://issues.jboss.org/secure/attachment/12409614/WFCORE-1800.patch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|i090kf:,9223372036854775807,,,,,,,,,,,"15/Sep/16 12:22 PM;brian.stansberry;Background comment on this for anyone interested in it that I mentioned to James when we were discussing this:

[10:10 AM] Brian Stansberry: a kernel-wide fix just makes me nervous about unintentionally breaking something
[10:11 AM] James R Perkins: Okay. It made me a bit nervous too which is why I didn't submit a PR :)
[10:12 AM] Brian Stansberry: I think a long time ago we said that runtime-only resources still have to expose a Resource in the tree, but I believe that was still after a lot of subsystems were written

Basically a fix for this would likely further enforce the rule that a Resource must be present in the tree, which may break some old stuff. I think it's the right thing to do at some point anyway, but as part of it we need to recognize the potential for breakage and do some analysis of runtime-only resources to ensure they are done correctly.

TBH there may have been some other changes (e.g. in read-resource handling) that would have resulted in breakage if this rule wasn't being followed. But we should be cautious.",,,,,,,,,,,,,,,,,,,,,,,,,,
Property separator not appended after argument value if argument completer uses non-zero offset,WFCORE-1799,12650333,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,spyrkob,spyrkob,spyrkob,15/Sep/16 10:07 AM,23/Sep/16 6:40 PM,29/Nov/16 3:51 PM,23/Sep/16 6:40 PM,3.0.0.Alpha7,,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"For example:
module add --name=foo --dependencies=sun.scripting ==> space character is added at the end.
module add --name=foo --dependencies=sun.scripting,sun.jdk ==> Nothing happens, no space character added.
deployment-overlay add --name=foo --contents=foo=/some/file<TAB> ==> Nothing happens, no space character added.

This seems to be caused by a condition in  [OperationRequestCompleter|https://github.com/wildfly/wildfly-core/blob/bc4988960e9bd245318321a06ae3d001ec661bc5/cli/src/main/java/org/jboss/as/cli/operation/OperationRequestCompleter.java#L233] - if a suggested value is the same as current user input, ORC replaces the suggestion with a separator.
This only works if the offset returned by argument completer is 0 - if the completer provides only part of the value, this condition will never be triggered.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1806,,,,,,0.0,0.0,,1|i090dr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"LaunchType.SELF_CONTAINED doesn't cleanup the temporary ""wildfly-self-contained"" directory",WFCORE-1797,12650278,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,heiko.braun,heiko.braun,heiko.braun,15/Sep/16 5:15 AM,20/Oct/16 11:46 AM,29/Nov/16 3:51 PM,23/Sep/16 6:41 PM,,,,,,,2.2.1.CR1,3.0.0.Alpha9,Server,,,,,0,backport_2.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1814,,,,,,0.0,0.0,,1|i0901r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
read-attribute on non existing logger under /deployment throws NPE,WFCORE-1796,12650234,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jamezp,jamezp,jamezp,14/Sep/16 7:08 PM,15/Sep/16 9:50 PM,29/Nov/16 3:51 PM,15/Sep/16 9:50 PM,,,,,,,3.0.0.Alpha8,,Logging,,,,,0,,,,,,"{noformat}
[standalone@localhost:9990 /] /deployment=testwebapplication.war/subsystem=logging/configuration=default/logger=unknown:read-attribute(name=level
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
    ""rolled-back"" => true
}
{noformat}
Output:
{noformat}
17:11:30,742 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([
    (""deployment"" => ""testwebapplication.war""),
    (""subsystem"" => ""logging""),
    (""configuration"" => ""default""),
    (""logger"" => ""unknown"")
]): java.lang.NullPointerException
        at org.jboss.as.logging.deployments.resources.LoggerResourceDefinition$1.updateModel(LoggerResourceDefinition.java:77)
        at org.jboss.as.logging.deployments.resources.LoggerResourceDefinition$LoggerConfigurationReadStepHandler.updateModel(LoggerResourceDefinition.java:105)
        at org.jboss.as.logging.deployments.resources.LoggingConfigurationReadStepHandler.execute(LoggingConfigurationReadStepHandler.java:51)
        at org.jboss.as.controller.operations.global.ReadAttributeHandler.doExecuteInternal(ReadAttributeHandler.java:174)
        at org.jboss.as.controller.operations.global.ReadAttributeHandler.doExecute(ReadAttributeHandler.java:133)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractMultiTargetHandler.execute(GlobalOperationHandlers.java:230)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:951)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:694)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:389)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:422)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}

it should print some better error messsage, like: 
{noformat}
[standalone@localhost:9990 /] /subsystem=logging/logger=unknown:read-attribute(name=level
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0216: Management resource '[
    (\""subsystem\"" => \""logging\""),
    (\""logger\"" => \""unknown\"")
]' not found"",
    ""rolled-back"" => true
}
{noformat}",,,,,,,,,,,,,,,,JBEAP-5993,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1802,,,,,,0.0,0.0,,1|i08zs7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AttachmentHandler, handle invalid options and batch steps handling.",WFCORE-1794,12650168,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,14/Sep/16 9:28 AM,15/Sep/16 9:47 PM,29/Nov/16 3:51 PM,15/Sep/16 9:47 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"The step number is not incremented. This makes the attachment command to behave strangely. As described in EAP7-602.
The file and overwrite options should be rejected for display. As described in EAP7-602 too.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1798,,,,,,0.0,0.0,,1|i08zef:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add-content operation fails to overwrite existing content with overwrite=true set when passing content by file path,WFCORE-1793,12650082,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mjurc,mjurc,14/Sep/16 4:08 AM,20/Sep/16 5:22 PM,29/Nov/16 3:51 PM,20/Sep/16 5:22 PM,3.0.0.Alpha8,,,,,,3.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"Upon overwriting content in managed exploded deployments on wildfly-core, the following errors are produced:

{{CLI}}
{code}[standalone@localhost:9990 /] deploy /home/mjurc/testing/eap7-204/jboss-kitchensink-ear.ear
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:undeploy
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:explode
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:deploy
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}], overwrite=true)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}], overwrite=false)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment"",
    ""rolled-back"" => true
}{code}

{{Server}}
{code}09:41:36,029 WARN  [org.jboss.as.repository] (management-handler-thread - 5) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content7797527203290314566/content/test.txt
09:45:27,505 WARN  [org.jboss.as.repository] (management-handler-thread - 12) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content721393778736298367/content/test.txt
09:45:36,352 WARN  [org.jboss.as.repository] (management-handler-thread - 10) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content344811471223714239/content/test.txt{code}

This issue does not seem to arise when the content is passed to the server by input stream index.",,,,,,,,,,,,,,,,JBEAP-6001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i08ywn:,9223372036854775807,,,,,,,,,,,"15/Sep/16 9:26 AM;ehugonnet;path is not a valid parameter, fixing the operation definition","20/Sep/16 8:17 AM;ehugonnet;The issue was in 2 parts, looks like only the first was fixed by the PR",,,,,,,,,,,,,,,,,,,,,,,,,
Invalid value-type for some operation arguments,WFCORE-1790,12650021,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,jdenise,jdenise,13/Sep/16 11:44 AM,13/Sep/16 12:45 PM,29/Nov/16 3:51 PM,13/Sep/16 12:45 PM,,,,,,,,,Security,Server,,,,0,,,,,,"vault:add and authentication=<x>:add have arguments of type OBJECT with a value-type of STRING. The arguments passed to the operations are complex-type, so the value-type should be containing the complex type description.

Examples:
/core-service=vault:add(vault-options={KEYSTORE_PASSWORD=>MASK-20OB41ZkH8YzlPTICpKg5.,KEYSTORE_ALIAS=>jboss,SALT=>12345678,ITERATION_COUNT=>50,ENC_FILE_DIR=>/path/to/enc/file})
/subsystem=security/security-domain=test/authentication=classic:add(login-modules=[{code=UsersRoles,flag=required,module-options={usersProperties=$\{jboss.server.config.dir\}/users.properties,rolesProperties=$\{jboss.server.config.dir\}/roles.properties}}]

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|i08yjz:,9223372036854775807,,,,,,,,,,,"13/Sep/16 12:36 PM;brian.stansberry;An attribute of type OBJECT with a value-type of STRING is equivalent to a Map<String,String>. A Map has no predefined set of valid keys, so there is no full description of keys and values.

From https://docs.jboss.org/author/display/WFLY/Admin+Guide#AdminGuide-DescriptionofanAttribute

value-type – ModelType or complex structure – Only present if type is LIST or OBJECT. If all elements in the LIST or all the values of the OBJECT type are of the same type, this will be one of the ModelType enums BIG_DECIMAL, BIG_INTEGER, BOOLEAN, BYTES, DOUBLE, INT, LONG, STRING. Otherwise, value-type will detail the structure of the attribute value, enumerating the value's fields and the type of their value.

So, if the type of the ModelNode for the value-type description is ModelType.TYPE, then the attribute is a Map<String, X> where X is indicated by the enum value. If the type of the ModelNode for the value-type description is ModelType.OBJECT, then the keys in the object are the legal fields and the values are the description of the field.","13/Sep/16 12:38 PM;brian.stansberry;Generally Map<String, String> type attributes are discouraged because they can't be fully self-describing. But in some cases there's really no alternative, as the attribute is configuring some plugin point and we can't know in advance what options are supported by that plugin.","13/Sep/16 12:44 PM;jdenise;Oh, I missed the Map data structure... I will close the bug and will take a second look to my fix.","13/Sep/16 12:45 PM;jdenise;This is not a bug, but a valid data representation.",,,,,,,,,,,,,,,,,,,,,,,
PreparedResponseTestCase from wf-core-eap fails intermittently,WFCORE-1789,12650020,Bug,Reopened,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,ehugonnet,ehugonnet,13/Sep/16 11:42 AM,15/Nov/16 3:43 PM,29/Nov/16 3:51 PM,,3.0.0.Alpha7,,,,,,3.0.0.Alpha9,,Test Suite,,,,,0,,,,,,"*Description of problem:*
PreparedResponseTestCase from wf-core-eap fails intermittently with two different stack-trace

*How reproducible:*
2%

*Actual results: (1. issue)*
Stack Trace:
{noformat}
java.lang.AssertionError: null
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.wildfly.core.test.standalone.mgmt.PreparedResponseTestCase.reloadServer(PreparedResponseTestCase.java:113)
{noformat}

Standard Output:
{noformat}
&amp#27;[0m01:34:22,658 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment slow-stop.jar (runtime-name: slow-stop.jar) in 3025ms
&amp#27;[0m&amp#27;[0m01:34:22,701 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 3.0.0.Alpha4-redhat-1 ""Kenny"" stopped in 3071ms
&amp#27;[0m&amp#27;[0m01:34:22,710 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Core 3.0.0.Alpha4-redhat-1 ""Kenny"" starting
&amp#27;[0m&amp#27;[0m01:34:23,243 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
&amp#27;[0m&amp#27;[0m01:34:23,331 INFO  [org.jboss.as.patching] (MSC service thread 1-4) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
&amp#27;[0m&amp#27;[33m01:34:23,361 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-3) WFLYDM0111: Keystore /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel/19de6045/testsuite/manualmode/target/wildfly-core/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
&amp#27;[0m&amp#27;[33m01:34:23,355 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
&amp#27;[0m&amp#27;[0m01:34:23,367 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0027: Starting deployment of ""slow-stop.jar"" (runtime-name: ""slow-stop.jar"")
&amp#27;[0m&amp#27;[33m01:34:23,449 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.slow-stop.jar"" is using a private module (""org.jboss.as.controller:main"") which may be changed or removed in future versions without notice.
&amp#27;[0m&amp#27;[33m01:34:23,450 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.slow-stop.jar"" is using a private module (""org.jboss.as.server:main"") which may be changed or removed in future versions without notice.
&amp#27;[0m&amp#27;[33m01:34:23,452 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.slow-stop.jar"" is using a private module (""org.wildfly.extension.request-controller:main"") which may be changed or removed in future versions without notice.
&amp#27;[0m&amp#27;[33m01:34:23,453 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment ""deployment.slow-stop.jar"" is using a private module (""org.jboss.as.network:main"") which may be changed or removed in future versions without notice.
&amp#27;[0m&amp#27;[0m01:34:23,479 INFO  [org.wildfly.test.shutdown.SlowStopService] (MSC service thread 1-7) Started with a stop duration of 3000 ms
&amp#27;[0m&amp#27;[0m01:34:23,528 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed ""slow-stop.jar"" (runtime-name : ""slow-stop.jar"")
&amp#27;[0m
{noformat}

*Actual results: (2. issue)*
Stack Trace:
{noformat}
java.lang.RuntimeException: java.io.IOException: java.util.concurrent.CancellationException: Operation was cancelled
	at org.jboss.threads.AsyncFutureTask.operationCancelled(AsyncFutureTask.java:70)
	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:267)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.get(AbstractDelegatingAsyncFuture.java:57)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:75)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:234)
	at org.wildfly.core.test.standalone.mgmt.PreparedResponseTestCase.reloadServer(PreparedResponseTestCase.java:102)
{noformat}

Standard Output:
{noformat}
11:03:28,015 WARN  [org.jboss.as.protocol.connection] (Remoting ""management-client"" task-5) WFLYPRT0018: No such request (1) associated with channel Channel ID a37ddd63 (outbound) of Remoting connection 68823cff to /10.16.180.146:9990 of endpoint ""management-client"" <6645cf9f>
{noformat}

*Expected results:*
No errors

*Additional info:*
Links to jenkins results:
* https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Jobs/job/eap-7x-as-testsuite-test-core/40/RELEASE=7.x.0,jdk=java18_default,label_exp=eap-sustaining&&(RHEL6%7C%7CEAP-RHEL7)/testReport/
* https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-rhel/jdk=ibm1.8,label_exp=eap-sustaining&&RHEL6&&x86/49/testReport/
* https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-rhel-ipv6/jdk=ibm1.8,label_exp=RHEL7-ipv6/39/testReport/",,,,,,,,,,,,,,,,JBEAP-5566,,,,,,,,,,,15/Nov/16 12:36 PM;ehugonnet;firefox.desktop;https://issues.jboss.org/secure/attachment/12412761/firefox.desktop,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1833,,,,,,1.0,0.0,,1|i08yjr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Try to add resource with OBJECT type attribute cause IllegalArgumentException,WFCORE-1787,12649980,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,jdenise,hsvabek,hsvabek,13/Sep/16 9:43 AM,15/Sep/16 9:43 PM,29/Nov/16 3:51 PM,15/Sep/16 9:43 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"Try to add resource with OBJECT type attribute cause IllegalArgumentException.

*Actual result:*
CLI operation failed with IllegalArgumentException

*Expected results:*
Success CLI operation

*My investigation:*
In my opinion is problem caused by this PR to wildfly-core 
https://github.com/wildfly/wildfly-core/pull/1698/files#diff-835f377f8fa5ec22368d701a8412f282R1333

Look at lines 1333-1350 Util.java",,,,,,,,,,,,,,,,JBEAP-5987,,,,,WFCORE-1790,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1792,,,,,,0.0,3.0,,1|i08ybj:,9223372036854775807,,,,"* run EAP7.1.0.DR4
* connect to EAP over jboss-cli.sh
* process CLI command where is OBJECT type attribute

some examples of CLI commands
{code}
/core-service=vault:add(vault-options={KEYSTORE_PASSWORD=>MASK-20OB41ZkH8YzlPTICpKg5.,KEYSTORE_ALIAS=>jboss,SALT=>12345678,ITERATION_COUNT=>50,ENC_FILE_DIR=>/path/to/enc/file})
{code}

{code}
/subsystem=security/security-domain=test/authentication=classic:add(login-modules=[{code=UsersRoles,flag=required,module-options={usersProperties=$\{jboss.server.config.dir\}/users.properties,rolesProperties=$\{jboss.server.config.dir\}/roles.properties}}]
{code}",,,,,,,"13/Sep/16 10:51 AM;aloubyansky;Jeff, could you please have a look? Thanks.","13/Sep/16 11:46 AM;jdenise;We could say that the link is ""caused-by"" but the CLI should resist to this kind of description.
","13/Sep/16 11:50 AM;aloubyansky;Especially if it's a regression. Although bad descriptions should be forced to get fixed. Once they are fixed, the CLI should not be expected to accept them, perhaps, unless the validation is off.",,,,,,,,,,,,,,,,,,,,,,,,
SelfContainedContainer: Allow the ConfigurationPersisterFactory to be customised,WFCORE-1786,12649954,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,heiko.braun,heiko.braun,heiko.braun,13/Sep/16 8:10 AM,20/Oct/16 11:46 AM,29/Nov/16 3:51 PM,16/Sep/16 7:52 PM,,,,,,,2.2.1.CR1,3.0.0.Alpha8,Server,,,,,0,backport_2.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1797,,,,,,0.0,2.0,,1|i08y5z:,9223372036854775807,,,,,,,,,,,13/Sep/16 8:10 AM;heiko.braun;Needs a backport to 2.x,16/Sep/16 7:52 PM;brian.stansberry;If you send in the 2.x backport I'll add the 2.2.1 Fix Version once it's merged.,,,,,,,,,,,,,,,,,,,,,,,,,
Extension remove is not cleaning out provided capabilities,WFCORE-1785,12649744,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jtymel,jtymel,12/Sep/16 8:57 AM,15/Sep/16 9:48 PM,29/Nov/16 3:51 PM,15/Sep/16 9:48 PM,3.0.0.Alpha7,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,affects_elytron,,,,,"It is not possible to add Elytron extension that was previously removed. Everything works fine if the server is reloaded between steps 5 and 6, hence I assume that there is either 'reload required' state missing or Elytron extension is not removed properly.

Actual result:
{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.security.providers' is already registered in context 'global'."",
    ""rolled-back"" => true
}

{code}

{code}
ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""add"") failed - address: ([(""extension"" => ""org.wildfly.extension.elytron"")]): java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.security.providers' is already registered in context 'global'.
	at org.jboss.as.controller.CapabilityRegistry.lambda$registerPossibleCapability$0(CapabilityRegistry.java:518)
	at java.util.concurrent.ConcurrentHashMap.computeIfPresent(ConcurrentHashMap.java:1769)
	at org.jboss.as.controller.CapabilityRegistry.registerPossibleCapability(CapabilityRegistry.java:512)
	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerCapability(ConcreteResourceRegistration.java:669)
	at org.jboss.as.controller.SimpleResourceDefinition.registerCapabilities(SimpleResourceDefinition.java:368)
	at org.jboss.as.controller.registry.NodeSubregistry.registerChild(NodeSubregistry.java:108)
	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:226)
	at org.wildfly.extension.elytron.ElytronDefinition.registerChildren(ElytronDefinition.java:83)
	at org.jboss.as.controller.registry.NodeSubregistry.registerChild(NodeSubregistry.java:107)
	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:226)
	at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerSubsystemModel(ExtensionRegistry.java:694)
	at org.wildfly.extension.elytron.ElytronExtension.initialize(ElytronExtension.java:99)
	at org.jboss.as.controller.extension.ExtensionAddHandler.initializeExtension(ExtensionAddHandler.java:131)
	at org.jboss.as.controller.extension.ExtensionAddHandler.execute(ExtensionAddHandler.java:83)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:951)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:694)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:389)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

Expected result:
It is possible to add Elytron subsystem after its removal.",,,,,,,,,,,,,,,,JBEAP-5955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1800,,,,,,0.0,7.0,,1|i08wxr:,9223372036854775807,,,,"Step 1: Add Elytron extension
{{/extension=org.wildfly.extension.elytron:add()}}

Step 2: Add Elytron subsystem
{{/subsystem=elytron:add()}}

Step 3: Console says 'reload required' -> reload the server 
{{reload}}

Step 4: Remove Elytron subsystem
{{/subsystem=elytron:remove()}}

Step 5: Remove Elytron extension
{{/extension=org.wildfly.extension.elytron:remove()}}
Note: No 'reload required' warning is displayed

Step 6: Add Elytron extension
{{/extension=org.wildfly.extension.elytron:add()}}",,,,,,,"12/Sep/16 9:04 AM;dlofthouse;[~brian.stansberry] Not sure if we are missing something or if this is a general capabilities and requirements issue.  The bug report here is in terms of the error message on adding the subsystem back but I think the general issue should be that when an extension and subsystem are removed the capabilities it registered as possible capabilities should also be removed, that way admin clients are not going to get confused with possible impossible resources.","12/Sep/16 9:13 AM;brian.stansberry;[~dlofthouse] Agreed. Can you move this to WFCORE / Domain Management component if that's all you want done with it?

I'm in Monday morning processing email mode and haven't looked into the details of this scenario at all. Looks like this is a problem with the extension, which is good; cleanup on extension remove was probably missed. I know there was work done with doing cleanup on remove of a resource that registers an actual capability, but the possible capability thing is different.

OT -- re:

Step 4: Remove Elytron subsystem
/subsystem=elytron:remove()

[~jtymel] Is that operation resulting in reload-required?","12/Sep/16 9:17 AM;jtymel;[~brian.stansberry] No, output of Elytron subsystem removal is just 
{noformat}
{""outcome"" => ""success""}
{noformat}","12/Sep/16 9:31 AM;dlofthouse;Moved, I will keep an eye on this in case we need anything in the Elytron subsystem.","13/Sep/16 12:31 PM;michpetrov;[~brian.stansberry], for what it's worth similar error is thrown when you try to remove and add back EJB3 extension. As far as I can tell the problem is that the capabilities are registered for the extension's children (in this case [ProviderLoaderDefinition|https://github.com/wildfly-security/elytron-subsystem/blob/master/src/main/java/org/wildfly/extension/elytron/ProviderLoaderDefinition.java]) which don't seem to be processed when the extension is removed.","13/Sep/16 1:13 PM;brian.stansberry;Yes, this is a general problem with the extension remove handling, and is not specific to any particular extension.","15/Sep/16 10:05 AM;ctomc;Sent PR that properly implements removal of MRR so now we do recursive delete of all sub resources.
which also fixes this problem.",,,,,,,,,,,,,,,,,,,,
AttachmentHandler does not use the right directory when saving more than 1 file ,WFCORE-1784,12649729,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,12/Sep/16 8:23 AM,15/Sep/16 9:42 PM,29/Nov/16 3:51 PM,15/Sep/16 9:42 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"By mistake, the default directory is used for files when the file to save is renamed.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1790,,,,,,0.0,0.0,,1|i08wun:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI GUI throws exception when editing boolean attribute with expression,WFCORE-1783,12633475,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ihradek,mazz,mazz,17/Jun/16 9:44 AM,15/Sep/16 9:41 PM,29/Nov/16 3:51 PM,15/Sep/16 9:41 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"When in the CLI GUI, if you try to edit a boolean attribute whose current value is an expression then an exception is thrown and you can't edit it - the popup dialog is really small and blank.

See ""Steps to Reproduce"" for replication procedures.

Here's the exception:

java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.asBoolean(ModelValue.java:66)
	at org.jboss.dmr.ModelNode.asBoolean(ModelNode.java:262)
	at org.jboss.as.cli.gui.OperationDialog$RequestProp.setInputComponentValue(OperationDialog.java:428)
	at org.jboss.as.cli.gui.OperationDialog$RequestProp.<init>(OperationDialog.java:336)
	at org.jboss.as.cli.gui.OperationDialog.setProps(OperationDialog.java:157)
	at org.jboss.as.cli.gui.OperationDialog.<init>(OperationDialog.java:73)
	at org.jboss.as.cli.gui.OperationMenu$OperationAction.actionPerformed(OperationMenu.java:152)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
	at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
	at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
	at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
	at java.awt.Component.processMouseEvent(Component.java:6535)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6300)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4891)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4713)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2750)
	at java.awt.Component.dispatchEvent(Component.java:4713)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1789,,,,,,0.0,3.0,,1|i06bpj:,9223372036854775807,,,,"Replication procedures:

1) Start WildFly server, then start the CLI in GUI mode (jboss-cli.sh --gui)
2) Execute the following CLI command by hand (enter this in the text box at the top) to get the attribute to the value that causes the error:

/subsystem=undertow/:write-attribute(name=statistics-enabled,value=${myprop:false})

3) In the ""Command Builder"" tab's tree, traverse to that /subsystem=undertow tree item and expand it to see the ""statistics-enabled"" value - it should now be that ""${myprop:false}"" expression you just submitted.

4) Now try to edit that attribute (select the attribute, right-mouse, select ""write-attribute"")

Notice the tiny dialog box (barely visible). Resize it and notice it is completely empty but for the title bar.",,,,,,,"12/Sep/16 8:10 AM;ihradek;Hi,
I've made simple PR [1] to fix this.
Also note that boolean attributes, can be set only to true/false through modal dialog in GUI, however you can edit _cmd_ input in order to set it to some expression.

btw: I think this should be in WFCORE.
--
[1] https://github.com/wildfly/wildfly-core/pull/1789","12/Sep/16 8:48 AM;brian.stansberry;If an attribute allows expressions (which is declared in the read-resource-description metadata describing the attribute), the widget to edit it should be a text box not a check box.","12/Sep/16 10:11 AM;ihradek;[~brian.stansberry] - I've re-implemented PR, as you have suggested.",,,,,,,,,,,,,,,,,,,,,,,,
DomainModelControllerService is installing the management request handlers for DC-related requests for slaves using cached-dc,WFCORE-1781,12649611,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,brian.stansberry,brian.stansberry,10/Sep/16 3:40 PM,17/Oct/16 7:03 PM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"The DomainModelControllerService code block that parses a local domain.xml is also installing the service the allows the management interface to accept requests that uses the request headers meant for the master side slave->master intra-domain communications. This service should not be added in the slave using cached-dc case, but it is now.

It also shouldn't be added if the DC is running admin-only.

OTOH in all cases where it is not added, a different service should be added that will reject any slave registration requests that come in with the correct error codes that the slave knows how to parse. Currently that rejection is only happening for admin-only masters or slaves that are using cached-dc, which is not correct.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1788,,,,,,0.0,0.0,,1|i08w53:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Imprecise messages related to slave HC being unable to connect to master,WFCORE-1780,12649529,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,09/Sep/16 5:23 PM,20/Oct/16 2:10 PM,29/Nov/16 3:51 PM,20/Oct/16 2:10 PM,,,,,,,3.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"If a slave fails to connect to the master it logs ""Could not connect to master. Aborting. Error was: %s"" but since WFCORE-316 it no longer always aborts.

Plus when it does abort it uses the deprecated SystemExiter.exit method.

So we should change the first message to drop the bit about aborting and then if we do really abort pass an abort message to SystemExiter.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1787,,,,,,0.0,0.0,,1|i08w27:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI gui returns null for specific command with access-control parameter while console CLI returns valid result,WFCORE-1776,12649488,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,09/Sep/16 11:02 AM,12/Sep/16 2:57 PM,29/Nov/16 3:51 PM,12/Sep/16 2:57 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"I tried to click through CLI GUI, particullary interested in webservices subsystem.
I navigated through the tree into {{/subsystem=webservices/endpoint-config=*}}, right-click and chose {{ead-resource-description}}.

It generated this command, but after executing through GUI, it returns null:
{code}
/subsystem=webservices/endpoint-config=*/:read-resource-description(recursive=false,access-control=none)
null
{code}

The same command in console CLI return valid resut:
{code:java}
[standalone@localhost:9990 /] /subsystem=webservices/endpoint-config=*/:read-resource-description(recursive=false,access-control=none)
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""webservices""),
            (""endpoint-config"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => ""Webservice endpoint configuration"",
            ""attributes"" => {},
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {
                ""pre-handler-chain"" => {
                    ""description"" => ""Pre handler chain"",
                    ""model-description"" => undefined
                },
                ""post-handler-chain"" => {
                    ""description"" => ""Post handler chain"",
                    ""model-description"" => undefined
                },
                ""property"" => {
                    ""description"" => ""Configuration property"",
                    ""model-description"" => undefined
                }
            }
        }
    }]
}

{code}


The problem seems to be related to the {{access-control=none}} parameter, because without it both GUI and console return the same valid result

{code:java}
/subsystem=webservices/endpoint-config=*/:read-resource-description(recursive=false)
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""webservices""),
            (""endpoint-config"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => ""Webservice endpoint configuration"",
            ""attributes"" => {},
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {
                ""pre-handler-chain"" => {
                    ""description"" => ""Pre handler chain"",
                    ""model-description"" => undefined
                },
                ""post-handler-chain"" => {
                    ""description"" => ""Post handler chain"",
                    ""model-description"" => undefined
                },
                ""property"" => {
                    ""description"" => ""Configuration property"",
                    ""model-description"" => undefined
                }
            }
        }
    }]
}
{code}
",,,,,,,,,,,,,,,,JBEAP-4833,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1786,,,,,,0.0,0.0,,1|i08vtj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI command for enabling tracking configuration changes act differently when host is specifiend and when it is not,WFCORE-1775,12649405,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,brian.stansberry,istraka,istraka,09/Sep/16 4:21 AM,13/Sep/16 1:49 PM,29/Nov/16 3:51 PM,09/Sep/16 12:04 PM,,,,,,,,,Domain Management,,,,,0,,,,,,"If I execute 
{code}
/host=slave/core-service=management/service=configuration-changes:add(history-size=10)
{code}
on host controller, everything is fine. 
But, if 
{code}
/core-service=management/service=configuration-changes:add(history-size=10) 
{code}
is executed,

{code:json}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYDC0032: Operation add for address [
    (\""core-service\"" => \""management\""),
    (\""service\"" => \""configuration-changes\"")
] can only be handled by the master Domain Controller; this host is not the master Domain Controller"",
    ""rolled-back"" => true
}
{code}
is returned.
I have discussed this with [~ehugonnet], and it has not been decided whether this is correct behavior. For some reason it is trying to route the request to the DC.

This jira is supposed to start a discussion about this - is it a bug, or correct behavior?
IMHO results of these two commands should should be the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i08vbj:,9223372036854775807,,,,,,,,,,,09/Sep/16 12:04 PM;brian.stansberry;This is correct behavior. Connecting to a non-master HC and trying to invoke any write operation for a resource not in the /host=* tree should produce that error. Not producing that error is a bug.,13/Sep/16 1:49 PM;istraka;Thank you.,,,,,,,,,,,,,,,,,,,,,,,,,
/core-service=capability-registry:get-provider-points only returning a single provider point.,WFCORE-1772,12649331,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,dlofthouse,dlofthouse,08/Sep/16 11:43 AM,16/Sep/16 4:32 PM,29/Nov/16 3:51 PM,16/Sep/16 4:32 PM,,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,affects_elytron,,,,,"Running the following: -

{noformat}
[standalone@localhost:9990 /] /core-service=capability-registry:get-provider-points(name=org.wildfly.security.security-realm)
{
    ""outcome"" => ""success"",
    ""result"" => [""/subsystem=elytron/filesystem-realm=*""]
}
{noformat}

However there are other resources that can provide this capability e.g.

{noformat}
[standalone@localhost:9990 /] ./subsystem=elytron/properties-realm=*:read-resource-description
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""elytron""),
            (""properties-realm"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => ""A security realm definition backed by properties files."",
            ""capabilities"" => [{
                ""name"" => ""org.wildfly.security.security-realm"",
                ""dynamic"" => true
            }],
            ""attributes"" => {
                ""groups-attribute"" => {
                    ""type"" => STRING,
                    ""description"" => ""The name of the attribute in the returned AuthorizationIdentity that should contain the group membership information for the identity."",
                    ""expressions-allowed"" => true,
                    ""nillable"" => true,
                    ""default"" => ""groups"",
                    ""min-length"" => 1L,
                    ""max-length"" => 2147483647L,
                    ""access-type"" => ""read-write"",
                    ""storage"" => ""configuration"",
                    ""restart-required"" => ""resource-services""
                },
                ""groups-properties"" => {
                    ""type"" => OBJECT,
                    ""description"" => ""The properties file containing the users and their groups."",
                    ""expressions-allowed"" => false,
                    ""nillable"" => true,
                    ""value-type"" => {
                        ""path"" => {
                            ""type"" => STRING,
                            ""description"" => ""The path to the file containing the users and their groups."",
                            ""expressions-allowed"" => true,
                            ""nillable"" => true,
                            ""min-length"" => 1L,
                            ""max-length"" => 2147483647L
                        },
                        ""relative-to"" => {
                            ""type"" => STRING,
                            ""description"" => ""The pre-defined path the path is relative to."",
                            ""expressions-allowed"" => true,
                            ""nillable"" => true,
                            ""requires"" => [""path""],
                            ""min-length"" => 1L,
                            ""max-length"" => 2147483647L
                        }
                    },
                    ""access-type"" => ""read-write"",
                    ""storage"" => ""configuration"",
                    ""restart-required"" => ""resource-services""
                },
                ""plain-text"" => {
                    ""type"" => BOOLEAN,
                    ""description"" => ""Are the passwords store in plain text within the properties file?"",
                    ""expressions-allowed"" => true,
                    ""nillable"" => true,
                    ""default"" => false,
                    ""access-type"" => ""read-write"",
                    ""storage"" => ""configuration"",
                    ""restart-required"" => ""resource-services""
                },
                ""synchronized"" => {
                    ""type"" => STRING,
                    ""description"" => ""The time the properties files that back this realm were last loaded."",
                    ""expressions-allowed"" => false,
                    ""nillable"" => false,
                    ""min-length"" => 1L,
                    ""max-length"" => 2147483647L,
                    ""access-type"" => ""read-only"",
                    ""storage"" => ""runtime""
                },
                ""users-properties"" => {
                    ""type"" => OBJECT,
                    ""description"" => ""The properties file containing the users and their passwords."",
                    ""expressions-allowed"" => false,
                    ""nillable"" => false,
                    ""value-type"" => {
                        ""path"" => {
                            ""type"" => STRING,
                            ""description"" => ""The path to the file containing the users and their passwords."",
                            ""expressions-allowed"" => true,
                            ""nillable"" => true,
                            ""min-length"" => 1L,
                            ""max-length"" => 2147483647L
                        },
                        ""relative-to"" => {
                            ""type"" => STRING,
                            ""description"" => ""The pre-defined path the path is relative to."",
                            ""expressions-allowed"" => true,
                            ""nillable"" => true,
                            ""requires"" => [""path""],
                            ""min-length"" => 1L,
                            ""max-length"" => 2147483647L
                        }
                    },
                    ""access-type"" => ""read-write"",
                    ""storage"" => ""configuration"",
                    ""restart-required"" => ""resource-services""
                }
            },
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {}
        }
    }]
}

{noformat}

",This was reproduced using wildfly/master running the standalone-elytron.xml configuration.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i08uvz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI - Tab completion in composite operation throws IAE,WFCORE-1771,12649284,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,michpetrov,michpetrov,08/Sep/16 8:44 AM,16/Sep/16 7:58 PM,29/Nov/16 3:51 PM,09/Sep/16 9:49 AM,3.0.0.Alpha7,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"Getting an exception when trying to make a composite operation
{code}
[standalone@localhost:9990 /] :composite(steps=[{aException in thread ""Aesh Process Loop 1409160703"" java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.getKeys(ModelValue.java:139)
	at org.jboss.dmr.ModelNode.keys(ModelNode.java:1378)
	at org.jboss.as.cli.impl.ValueTypeCompleter$ValueTypeCallbackHandler.getCandidates(ValueTypeCompleter.java:502)
	at org.jboss.as.cli.impl.ValueTypeCompleter.complete(ValueTypeCompleter.java:332)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:254)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:74)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:134)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:143)
	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:155)
	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:423)
	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:165)
	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:773)
	at org.jboss.aesh.console.Console.execute(Console.java:733)
	at org.jboss.aesh.console.Console.access$900(Console.java:73)
	at org.jboss.aesh.console.Console$6.run(Console.java:642)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

Happens only for certain strings, e.g.
* {{:composite(steps=\[{a<TAB>}} fails
* {{:composite(steps=\[a<TAB>}} doesn't fail (suggests "","" or ""]"")
* {{:composite(steps=\[a=<TAB>}} fails",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1784,,,,,,0.0,1.0,,1|i08ulz:,9223372036854775807,,,,type {{:composite(steps=\[\{a}} and press Tab.,,,,,,,"08/Sep/16 8:47 AM;aloubyansky;Jeff, could you please look into this one? Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,
Wildfly 10.1.0.FINAL does not start as a windows service,WFCORE-1770,12649244,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Duplicate Issue,ctomc,arthurborsboom,arthurborsboom,08/Sep/16 4:44 AM,08/Sep/16 6:22 AM,29/Nov/16 3:51 PM,08/Sep/16 5:45 AM,,,,,,,3.0.0.Alpha6,,Scripts,,,,,0,,,,,,"The service.bat batch file to install Wildfly as a WIndows Service (still) contains a small error, preventing the service being added correctly.

This bug has been reported before and also has been reported as fixed. However the bug is still there. 

WFCORE-1719

The funny thing is that the batch file even describes in a REM statement that the line ""SET DESCRIPTION"" should not contain quotes. So, the fix is described, but just not applied. :)

Please remove the quotes in the next release.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i08udb:,9223372036854775807,,,,,,,,,,,08/Sep/16 5:45 AM;ctomc;fixed in WFCORE-1719,"08/Sep/16 6:22 AM;arthurborsboom;Hi Tom,

I see you have closed this bug report without a comment.
Does this mean that this is fixed?

When I download this file: http://download.jboss.org/wildfly/10.1.0.Final/wildfly-10.1.0.Final.zip
the file wildfly-10.1.0.Final/docs/contrib/scripts/service/service.bat

still contains these two lines

{code:title=wildfly-10.1.0.Final/docs/contrib/scripts/service/service.bat|borderStyle=solid}
rem NO quotes around the description here !
set DESCRIPTION=""WildFly Application Server""
{code}

which should be

{code:title=wildfly-10.1.0.Final/docs/contrib/scripts/service/service.bat|borderStyle=solid}
set DESCRIPTION=WildFly Application Server
{code}",,,,,,,,,,,,,,,,,,,,,,,,,
DomainRootDefinition.RolloutPlanValidator is throwing OFE when it should just be an assert,WFCORE-1769,12649210,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,07/Sep/16 4:09 PM,16/Sep/16 4:30 PM,29/Nov/16 3:51 PM,16/Sep/16 4:30 PM,,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"The ParameterValidator javadoc declares the 'value' parameter cannot be null, so a null param value should result in an AssertionError or an IAE. But RolloutPlanValidator is throwing an OFE. OFE should be used for user errors (i.e. invalid requests), not coding mistakes. The data passed to a validator is not under the control of the user; passing a null means a coding mistake.

The caller of a ParameterValidator is the kernel, not outside code, so we are not validating unknown inputs. So an assert is fine; no need for an IAE.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1783,,,,,,0.0,0.0,,1|i08u5z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"elytron module.xml, invalid package name in exclude",WFCORE-1768,12648867,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,mchoma,mchoma,06/Sep/16 4:07 AM,06/Sep/16 4:49 PM,29/Nov/16 3:51 PM,06/Sep/16 4:49 PM,,,,,,,3.0.0.Alpha8,,Security,,,,,0,,,,,,"in {noformat}./jboss-eap-7.1/modules/system/layers/base/org/wildfly/security/elytron/main/module.xml {noformat}
there is {noformat} <exclude path=""org/wildfly/wildfly/security/manager/_private""/>{noformat}, which is probably unnecessary.


{noformat}
<module xmlns=""urn:jboss:module:1.3"" name=""org.wildfly.security.elytron"">

    <exports>
        <exclude path=""org/wildfly/security/_private""/>
        <exclude path=""org/wildfly/wildfly/security/manager/_private""/>
    </exports>
{noformat}",,,,,,,,,,,,,,,,JBEAP-5877,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1779,,,,,,0.0,5.0,,1|i08s6f:,9223372036854775807,,,,,,,,,,,06/Sep/16 7:41 AM;dmlloyd;Why unnecessary?  We don't want to expose those packages as API.,"06/Sep/16 7:43 AM;mchoma;I didn't find package org/wildfly/wildfly/security/manager/_private , sorry for not mentioning that in description.",06/Sep/16 7:45 AM;dlofthouse;Looks like a typo - I will double check we exclude the correct ones.,"06/Sep/16 9:25 AM;dmlloyd;Ah yeah, I didn't notice the double wildfly.  Definitely a typo.",06/Sep/16 10:08 AM;dlofthouse;In addition to that one we actually have a couple more packages that are _private not listed.,,,,,,,,,,,,,,,,,,,,,,
Exception on tab completion when adding new JGroups stack,WFCORE-1767,12648873,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,aloubyansky,aloubyansky,06/Sep/16 4:36 AM,06/Sep/16 6:22 PM,29/Nov/16 3:51 PM,06/Sep/16 6:22 PM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"I just happened to catch the following exception:

{noformat}
[standalone@localhost:9990 /] /subsystem=jgroups/stack=anothertcp:add(transport={type=TCP,socket-binding=jgroups-tcp},protocols=[{Exception in thread ""Aesh Process Loop 1561063579"" java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.asType(ModelValue.java:147)
	at org.jboss.dmr.ModelNode.asType(ModelNode.java:321)
	at org.jboss.as.cli.impl.ValueTypeCompleter$ComplexInstance.isCompliantType(ValueTypeCompleter.java:239)
	at org.jboss.as.cli.impl.ValueTypeCompleter$Instance.getType(ValueTypeCompleter.java:103)
	at org.jboss.as.cli.impl.ValueTypeCompleter$ValueTypeCallbackHandler.getCandidates(ValueTypeCompleter.java:445)
	at org.jboss.as.cli.impl.ValueTypeCompleter.complete(ValueTypeCompleter.java:332)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:254)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:74)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:134)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:143)
	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:155)
	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:423)
	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:165)
	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:773)
	at org.jboss.aesh.console.Console.execute(Console.java:733)
	at org.jboss.aesh.console.Console.access$900(Console.java:73)
	at org.jboss.aesh.console.Console$6.run(Console.java:642)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}

when double tapping tab on the following:

{noformat}
[standalone@localhost:9990 /] /subsystem=jgroups/stack=anothertcp:add(transport={type=TCP,socket-binding=jgroups-tcp},protocols=[{
{noformat}

When trying a second time, it popped up again, so it is likely reproducible. Note that the server was started with:
{code}
./standalone -c standalone-ha.xml
{code}

The exception killed the CLI.",,,,,,,,,,,,,,,,JBEAP-5876,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1778,,,,,,0.0,0.0,,1|i08s7r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unclear NullPointerException if the deployment-scanner element is removed from the configuration,WFCORE-1765,12648795,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,wdfink,wdfink,05/Sep/16 12:22 PM,06/Sep/16 6:20 PM,29/Nov/16 3:51 PM,06/Sep/16 6:20 PM,2.0.10.Final,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"If the deployment scanner element is removed from the configuration of the standalone server a NullPointerException is logged which is unclear and difficult to find as the stack does not show any hint.

Config:
{xml}
        <subsystem xmlns=""urn:jboss:domain:deployment-scanner:2.0"">
            <!-- deployment-scanner path=""deployments"" relative-to=""jboss.server.base.dir"" scan-interval=""5000"" runtime-failure-causes-rollback=""${jboss.deployment.scanner.rollback.on.failure:false}""/ -->
        </subsystem>
{xml}

Log message:
ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 34) WFLYCTL0403: Unexpected failure during execution of the following operation(s): []: java.lang.NullPointerException
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)
	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)
	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1777,,,,,,0.0,1.0,,1|i08rrb:,9223372036854775807,,,,,,,,,,,06/Sep/16 10:41 AM;brian.stansberry;[~ehugonnet] If this isn't the scanner logic itself but is a kernel issue please change the component to Domain Management. Please also reassign the downstream JBEAP to yourself and fix the component. ,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing dependency should be triggering rollback of the deployment operation,WFCORE-1762,12648675,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,mstefank,mstefank,05/Sep/16 6:51 AM,05/Sep/16 7:13 AM,29/Nov/16 3:51 PM,,3.0.0.Alpha7,,,,,,,,,,,,,0,,,,,,"When removing a deployment that other deployments or resources depend on, it should not be possible to remove such deployment or at least to present this information to the user prior to the removal.

For example:

{code}INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0028: Stopped deployment postgresql-9.4.1208.jar (runtime-name: postgresql-9.4.1208.jar) in 61ms
INFO  [org.jboss.as.server] (ServerService Thread Pool -- 65) WFLYSRV0009: Undeployed ""postgresql-9.4.1208.jar"" (runtime-name: ""postgresql-9.4.1208.jar"")
INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 65) WFLYDR0002: Content removed from location /home/mjurc/testing/eap/7.0.0/jboss-eap-7.0/standalone/data/content/5c/7e80698b80a5045fe64daa67426051bbd16a56/content
INFO  [org.jboss.as.controller] (ServerService Thread Pool -- 65) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service jboss.jdbc-driver.postgresql-9_4_1208_jar (missing) dependents: [service jboss.driver-demander.java:/PostgresDS, service org.wildfly.data-source.PostgresDS] 
{code}

The monitoring is done by the ContainerStateMonitor class.",,,,,,,,,,,,,,,,JBEAP-5036,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i08r1j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Bogus ""alternative"" in server NativeManagementResourceDefinition.SOCKET_BINDING attribute definition",WFCORE-1761,12648521,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Sep/16 3:22 PM,16/Sep/16 4:27 PM,29/Nov/16 3:51 PM,16/Sep/16 4:27 PM,3.0.0.Alpha7,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,SOCKET_BINDING declares that INTERFACE is an alternative. There is no INTERFACE attribute allowed on this resource. Perhaps this is leftover cruft.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1773,,,,,,0.0,0.0,,1|i08q47:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WFLYCC0034: Closing leaked controller client,WFCORE-1758,12645151,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,mchoma,mchoma,29/Aug/16 3:19 AM,02/Sep/16 4:04 AM,29/Nov/16 3:51 PM,,,,,,,,,,,,,,,0,,,,,,"We are intermittently getting ""WFLYCC0034: Closing leaked controller client"" from RemotingModelControllerClient#finalize method.

I wonder, isn't implementation of RemotingModelControllerClient#finalize() method [1] example of dangerous ""safety net"" implementation discussed in presentation ""JVM finalize pitfalls"" [2] ?

*Reproducer:*
 1. using ibm java 1.8
2. setting <startup-timeout>1</startup-timeout>

[1] https://github.com/wildfly/wildfly-core/blob/master/controller-client/src/main/java/org/jboss/as/controller/client/impl/RemotingModelControllerClient.java#L147
[2] https://www.youtube.com/watch?v=UrGP6pfb0H8
[3]

{noformat}
05:54:10 Aug 16, 2016 5:54:10 AM org.jboss.as.controller.client.impl.RemotingModelControllerClient finalize
05:54:10 WARN: WFLYCC0034: Closing leaked controller client
05:54:10 WFLYCC0030: Allocation stack trace:
05:54:10 	at java.lang.Thread.getStackTrace(Thread.java:1552)
05:54:10 	at org.jboss.as.controller.client.impl.RemotingModelControllerClient.<init>(RemotingModelControllerClient.java:74)
05:54:10 	at org.jboss.as.controller.client.ModelControllerClient$Factory.create(ModelControllerClient.java:567)
05:54:10 	at org.wildfly.plugin.common.ManagementClient.<init>(ManagementClient.java:37)
05:54:10 	at org.wildfly.plugin.common.AbstractServerConnection.createClient(AbstractServerConnection.java:126)
05:54:10 	at org.wildfly.plugin.server.StartMojo.execute(StartMojo.java:269)
05:54:10 	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)
05:54:10 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
05:54:10 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
05:54:10 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
05:54:10 	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)
05:54:10 	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)
05:54:10 	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
05:54:10 	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)
05:54:10 	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:355)
05:54:10 	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:155)
05:54:10 	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)
05:54:10 	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:216)
05:54:10 	at org.apache.maven.cli.MavenCli.main(MavenCli.java:160)
05:54:10 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
05:54:10 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
05:54:10 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
05:54:10 	at java.lang.reflect.Method.invoke(Method.java:498)
05:54:10 	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
05:54:10 	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
05:54:10 	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
05:54:10 	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
{noformat}",,,,,,,,,,,,,,,,JBEAP-5654,,,,,,,,,,,31/Aug/16 1:55 AM;mchoma;server.log;https://issues.jboss.org/secure/attachment/12408916/server.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,11.0,,1|i086k7:,9223372036854775807,,,,"Reproducer:
 
1. using ibm java. In my case 
{noformat}
[mchoma@localhost tests-ldap-kerberos-eap7]$ java -version
java version ""1.8.0""
Java(TM) SE Runtime Environment (build pxa6480sr3fp10-20160720_02(SR3fp10))
IBM J9 VM (build 2.8, JRE 1.8.0 Linux amd64-64 Compressed References 20160719_312156 (JIT enabled, AOT enabled)
J9VM - R28_Java8_SR3_20160719_1144_B312156
JIT  - tr.r14.java_20160629_120284.01
GC   - R28_Java8_SR3_20160719_1144_B312156_CMPRSS
J9CL - 20160719_312156)
JCL - 20160719_01 based on Oracle jdk8u101-b13
{noformat}

2. setting <startup-timeout>1</startup-timeout>
{noformat}
                    <plugin>
                        <groupId>org.wildfly.plugins</groupId>
                        <artifactId>wildfly-maven-plugin</artifactId>
                        <version>${version.wildfly-maven-plugin}</version>
                        <executions>
                            <execution>
                                <id>add-native-interface-to-jboss</id>
                                <phase>process-test-sources</phase>
                                <goals>
                                    <goal>start</goal>
                                    <goal>execute-commands</goal>
                                    <goal>shutdown</goal>
                                </goals>
                                <configuration>
                                    <jbossHome>${jboss.home}</jbossHome>
                                    <startup-timeout>1</startup-timeout>
                                    <execute-commands>
                                        <scripts>
                                            <script>src/test/resources/add-native-interface.cli</script>
                                        </scripts>
                                    </execute-commands>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
{noformat}",,,,,,,"29/Aug/16 10:24 AM;brian.stansberry;Please provide full details on how/where you are seeing this. The issue description shows where the client was created, but the flaw is the code that isn't closing it. That looks to be the wildfly-maven plugin, but there is no 3.0.0.Alpha5 version of the wildfly-maven plugin.","29/Aug/16 10:25 AM;brian.stansberry;The CLI tool is not involved here, so I'm removing the CLI component, which is meant for issues in the CLI tool.",29/Aug/16 12:04 PM;jamezp;What version of the {{wildfly-maven-plugin}} are you seeing this issue with?,"30/Aug/16 5:24 AM;mchoma;Yes, I hit this exception using maven wildfly plugin in version 1.1.0.Alpha4  which use 1.0.1.Final of wildfly-controller-client which contains class org.jboss.as.controller.client.impl.RemotingModelControllerClient. 

Note, in downstream JIRA there is another occurence of this exception. In that case maven wildfly plugin is not used, but arquillian.
https://issues.jboss.org/browse/JBEAP-5654?focusedCommentId=13280029&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13280029

I don't think this JIRA belongs to wildfly maven plugin neither, as suspicious code is in org.jboss.as.controller.client.impl.RemotingModelControllerClient which is from wildfly-controller-client.jar , so probably wildfly-core project is best fit?","30/Aug/16 1:07 PM;jamezp;I don't think it's a good idea to eliminate that finalize method. It's there in case a consumer of the client forgets to close the client. Not having the finalize there could potentially lead to leaked connections if the consumer forgets to closet the client. I'd consider this a bug in the consumer, in this case the maven plugin, rather than WildFly Core.","31/Aug/16 2:04 AM;mchoma;I attached interesting part of build log. You can see there, that this exception was introduced with 
""Failed to execute goal org.wildfly.plugins:wildfly-maven-plugin:1.1.0.Alpha4:start (add-server-name-remoting) on project ldap-kerberos-eap-tests-eap7: The server failed to start: Managed server was not started within [60] s""

So probably question is if plugin is closing client properly on boot timeout?

Better than remove finalize safety net, is it possible/worth/safe to improve it in way Jason recommends in presentation? It means to ensure finalize() method isn't called in the middle of instance processing.","31/Aug/16 11:29 AM;jamezp;Yes I do believe there was a bug there. I've since removed the {{ManagementClient}} wrapper and it's likely this error won't happen in newer releases.

{{finalize()}} should definitely not be getting called in the middle of processing in this instance.",01/Sep/16 3:18 AM;mchoma;I can reproduce the issue untill 1.1.0.Alpha7. Since 1.1.0.Alpha8 issue doesn't occure. I guess this is the fix https://github.com/wildfly/wildfly-maven-plugin/commit/b2d024199306afb8787d33db99d27ddddb0ddbd1.,01/Sep/16 11:27 AM;jamezp;Yes that should have fixed it. The client is closed after all the command execution and deploying is done now. I'll leave this open for now in case we do decide something needs to be done in the actual finalizer. I will move it back to WFCORE if that's the case.,01/Sep/16 12:55 PM;jamezp;Moved back to WFCORE. While we won't fix this immediately I'm leaving the priority as Major as it is an issue. It will take some thought to not affect some other subclasses of the {{AbstractModelControllerClient}}. I've not seen or heard of issues other than misbehaving consumers of the client.,"02/Sep/16 3:56 AM;mchoma;I understand that it is very delicately piece of code. So most importantly potential change shouldn't break anything else. If you will decide, that finalize method can be enhanced, note, there are couple of others finalize() implementation with custom logic in wildfly core, which could be checked.

DeploymentPlanImpl
RemotingModelControllerClient
ConnectionImpl
MountHandle

Errors caused by implemented finalize() method occur probably very very rarely. So users probably can't reproduce it - hence doesn't report it.",,,,,,,,,,,,,,,,
Adding content to an exploded deployment with overwrite to false should fail if file already exists,WFCORE-1756,12647820,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,31/Aug/16 10:23 AM,01/Sep/16 8:11 AM,29/Nov/16 3:51 PM,01/Sep/16 8:11 AM,3.0.0.Alpha5,,,,,,3.0.0.Alpha7,,Domain Management,,,,,0,,,,,,If overwrite is set to false then adding the file should fail.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1770,,,,,,0.0,0.0,,1|i08mkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The deployment-overlay command fails to redeploy affected deployments,WFCORE-1752,12646995,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,ehugonnet,ehugonnet,31/Aug/16 5:08 AM,31/Aug/16 6:23 PM,29/Nov/16 3:51 PM,,3.0.0.Alpha5,,,,,,,,CLI,,,,,0,,,,,,The deployment-overlay command fails to redeploy affected deployments if the runtime-name isn't the same as the deployment name. Since affected deployment to be redeployed should be running the couple runtime-name + enabled == true should be used to define which deployments are affected instead of using the deployment name since the name used in overlay is the runtime-name,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/962268#962268,,,,,,,,,0.0,2.0,,1|i08hpb:,9223372036854775807,,,,,,,,,,,"31/Aug/16 10:22 AM;brian.stansberry;Is coupling to the runtime-name really the intended behavior? Or is that a bug? Or perhaps a design flaw?

I can see arguments both ways, so I'm curious what [~swd847] had in mind at the beginning.

Certainly the runtime-name needs to come into the picture in order to get the content into the running app; I'm asking here about the meaning of the ""name"" attribute in the deployment-overlay/deployment element.","31/Aug/16 6:23 PM;swd847;I think the overlay matching the runtime name is correct, and it is the CLI command that is wrong. There is an argument that could be made either way but IMHO mapping to the runtime name makes more sense and is the current behavior so any change would have backwards compatibility implications. ",,,,,,,,,,,,,,,,,,,,,,,,,
read-resource-description cannot handle segmented multi-target requests,WFCORE-1751,12646847,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,brian.stansberry,brian.stansberry,30/Aug/16 5:44 PM,30/Aug/16 6:41 PM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"This is really low priority; I'm just recording it as I discovered it while writing tests for WFCORE-1737.  Anyone looking at it should talk to me first.

This doesn't work:

{code}
/] /subsystem=[undertow,logging]/server=*:read-resource-description
Failed to get the list of the operation properties: ""WFLYCTL0030: No resource definition is registered for address [
    (""subsystem"" => ""[undertow,logging]""),
    (""server"" => ""*"")
]""
{code}

This does though, finding the subsystem=undertow registration:

{code}
/subsystem=*/server=*:read-resource-description
{code}

The read-resource op works for segmented multi-target requests as GlobalOperationHandlers.ModelAddressResolver has specific logic for it in executeMultiTargetChildren. GlobalOperationHandlers.RegistrationAddressResolver does not.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i08gtz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[2.2.x] WFLYCTL0357 warning upon undeploying any deployment,WFCORE-1750,12646839,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,lafr,lafr,lafr,30/Aug/16 4:04 PM,30/Aug/16 10:00 PM,29/Nov/16 3:51 PM,30/Aug/16 10:00 PM,2.2.0.Final,,,,,,2.2.1.CR1,,Server,,,,,0,,,,,,"EAP produces following warning upon undeployment:
{code}WARN  [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []{code}

The warning is produced for both managed and unmanaged deployments.",,,,,,,,,,,,,,,,WFCORE-1687,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/962171#962171,,,https://github.com/wildfly/wildfly-core/pull/1765,,,,,,0.0,1.0,,1|i08gs7:,9223372036854775807,,,,,,,,,,,"30/Aug/16 4:08 PM;lafr;WFCORE 2.x also has this problem.
See also https://developer.jboss.org/thread/272058.
",,,,,,,,,,,,,,,,,,,,,,,,,,
Warning during replacement of deployment,WFCORE-1749,12646210,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Duplicate Issue,ehugonnet,ehugonnet,ehugonnet,30/Aug/16 3:38 AM,30/Aug/16 3:51 AM,29/Nov/16 3:51 PM,30/Aug/16 3:51 AM,3.0.0.Alpha5,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"Using Wildfly 10.1.0-Final on Solaris SPARC with Oracle JDK 1.8.0.

I redeploy my war file by removing the old one from the deployments folder and copying the new one there afterwards.

Now I noticed that there is a new Warning I've not seen before.What does this mean? Anything I can do to avoid this message?

 

    26.08. 21:57:17,153 INFO  [org.wildfly.extension.undertow#unregisterDeployment] WFLYUT0022: Unregistered web context: /web-khs2l-sb2000-ipc  
    26.08. 21:57:18,905 INFO  [org.jboss.as.server.deployment#stop] WFLYSRV0028: Stopped deployment web-khs2l-sb2000-ipc.war (runtime-name: web-khs2l-sb2000-ipc.war) in 1823ms  
    26.08. 21:57:18,954 WARN  [org.jboss.as.controller#emitNotifications] WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []  
    26.08. 21:57:19,026 INFO  [org.jboss.as.repository#removeContent] WFLYDR0002: Content removed from location /mbi/tools/jboss/10.x/standalone/data/content/7d/6266579ef5b8536a785b022ce6c8a8afb914da/content  
    26.08. 21:57:19,039 INFO  [org.jboss.as.server#handleResult] WFLYSRV0009: Undeployed ""web-khs2l-sb2000-ipc.war"" (runtime-name: ""web-khs2l-sb2000-ipc.war"")  
    26.08. 21:57:24,662 INFO  [org.jboss.as.repository#addContent] WFLYDR0001: Content added at location /mbi/tools/jboss/10.x/standalone/data/content/6b/1ee023b17f99530fb636f733498ee00aa53a0f/content  
    26.08. 21:57:24,681 INFO  [org.jboss.as.server.deployment#start] WFLYSRV0027: Starting deployment of ""web-khs2l-sb2000-ipc.war"" (runtime-name: ""web-khs2l-sb2000-ipc.war"")  
    26.08. 21:57:36,941 INFO  [org.jboss.weld.deployer#deploy] WFLYWELD0003: Processing weld deployment web-khs2l-sb2000-ipc.war  
    26.08. 21:57:44,764 INFO  [org.richfaces.log.Webapp#registerServlet] Auto-registered servlet ResourceServlet with mapping '/org.richfaces.resources/*'  
    26.08. 21:57:44,857 INFO  [javax.enterprise.resource.webcontainer.jsf.config#contextInitialized] Initializing Mojarra 2.2.13.SP1 20160303-1204 for context '/web-khs2l-sb2000-ipc'  
    26.08. 21:57:56,225 INFO  [javax.enterprise.resource.webcontainer.jsf.config#<init>] Monitoring file:/export/home/mbi/tools/jboss/10.x/standalone/tmp/vfs/temp/tempb0d068cdfb7bb51a/content-9df5b4e4c6d919b7/WEB-INF/faces-config.xml for modifications  
    26.08. 21:57:56,239 INFO  [org.primefaces.webapp.PostConstructApplicationEventListener#processEvent] Running on PrimeFaces 6.0  
    26.08. 21:57:56,528 INFO  [org.richfaces.log.Cache#getCacheFactory] Selected fallback cache factory  
    26.08. 21:57:56,530 INFO  [org.richfaces.log.Cache#createCache] Creating LRUMap cache instance using parameters: {org.richfaces.enableControlSkinningClasses=false, org.richfaces.push.jms.enabled=true, javax.faces.PROJECT_STAGE=Development, org.richfaces.enableControlSkinning=false, org.jboss.weld.context.ignore.forward=false, com.sun.faces.displayConfiguration=false, javax.faces.VALIDATE_EMPTY_FIELDS=true, org.jboss.weld.context.ignore.include=false, javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL=true, javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE=true, com.sun.faces.enableMissingResourceLibraryDetection=true, org.jboss.jbossfaces.IS_CDI=true}  
    26.08. 21:57:56,552 INFO  [org.richfaces.log.Cache#createCache] Creating LRUMap cache instance of 512 items capacity  
    26.08. 21:57:56,576 INFO  [org.richfaces.log.Application#onStart] RichFaces Core by JBoss by Red Hat, version 4.5.17.Final  
    26.08. 21:57:56,592 INFO  [org.richfaces.log.Application#initializePushContext] Startup initialization of PushContext  
    26.08. 21:57:56,642 INFO  [org.wildfly.extension.undertow#registerDeployment] WFLYUT0021: Registered web context: /web-khs2l-sb2000-ipc  
    26.08. 21:57:56,717 INFO  [org.jboss.as.server#handleResult] WFLYSRV0010: Deployed ""web-khs2l-sb2000-ipc.war"" (runtime-name : ""web-khs2l-sb2000-ipc.war"")  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i08cyn:,9223372036854775807,,,,,,,,,,,30/Aug/16 3:45 AM;simkam;this looks like duplicate of WFCORE-1687,,,,,,,,,,,,,,,,,,,,,,,,,,
Failure in ContentRepositoryTest.testExplodeSubContent,WFCORE-1748,12646193,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,brian.stansberry,brian.stansberry,29/Aug/16 5:48 PM,31/Aug/16 2:52 PM,29/Nov/16 3:51 PM,31/Aug/16 2:52 PM,,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"Test fails for me locally 100%. AIUI, Emmanuel, you're aware of and are dealing with this; I'm just filing the JIRA so I can reference it in an @Ignore and proceed with builds.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i08cuv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add-user.sh script should have better help message,WFCORE-1747,12645107,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ivassile,ivassile,ivassile,26/Aug/16 3:12 PM,31/Aug/16 2:46 PM,29/Nov/16 3:51 PM,31/Aug/16 2:46 PM,,,,,,,3.0.0.Alpha6,,Domain Management,Scripts,,,,0,,,,,,"add-user.sh script should have better help message. There is no general description about this script. There is only list of attributes.
{code:bash}
./add-user.sh -h
{code}",,,,,,,,,,,,,,,,JBEAP-5759,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1760,,,,,,0.0,0.0,,1|i086av:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to force CLI to execute a low level command,WFCORE-1743,12645127,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,brian.stansberry,brian.stansberry,27/Aug/16 10:23 AM,31/Aug/16 5:57 PM,29/Nov/16 3:51 PM,31/Aug/16 5:57 PM,3.0.0.Alpha5,,,,,,3.0.0.Alpha6,,CLI,,,,,0,,,,,,"I cannot get this operation to execute, even if I set validate-operation-requests to false in jboss-cli.xml:

{code}
[standalone@embedded /] /subsystem=datasources/bogus=*:read-resource-description
Failed to get the list of the operation properties: ""WFLYCTL0030: No resource definition is registered for address [
    (""subsystem"" => ""datasources""),
    (""bogus"" => ""*"")
]""
{code}

It is important that the CLI allows users to send whatever low level ops they wish to the server if they turn off verification. The server validates requests itself, and in some cases can be coded to be lenient about things (e.g. to let previous 'wrong' things work.) We don't want the CLI to get in the way of that by doing client side validation that cannot be turned off.

Problem seems to be this in the Util class:

{code}
    public static ModelNode toOperationRequest(CommandContext ctx,
            ParsedCommandLine parsedLine, Attachments attachments)
            throws CommandFormatException {
        return toOperationRequest(ctx, parsedLine, attachments, true);
    }
{code}

That 'true' param results in the CLI trying to do a background read-operation-description and failing the op if unsuccessful.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1758,,,,,,0.0,3.0,,1|i086fb:,9223372036854775807,,,,,,,,,,,"27/Aug/16 10:27 AM;brian.stansberry;Another reason it's important that users can configure the CLI to be lenient about sending low level ops is it's very helpful to us server developers in analyzing server behavior. If we can't do this we'd have to write custom clients to experiment, which is impractical. I hit this issue while trying to investigate solutions to WFCORE-1737.","29/Aug/16 10:42 AM;aloubyansky;I see your point. The CLI, though, is not actually retrieving the description for validation purposes but to actually complete building the operation request since there are some usability features that require the description. Such as replacement of certain user-friendly parameter values with the values that actually should be sent. For example replacing file system paths with attached streams (user specifies file system paths as parameters while the CLI, according to the operation parameter descriptions, turns those into attachments).

I guess, in the CLI, in case the description could not be retrieved, instead of throwing an error, we could simply ignore it, do not replace anything and send the request as it was literally typed-in.","29/Aug/16 10:53 AM;brian.stansberry;Thanks for the explanation. I like the idea of ignoring  the error, at least if ""validate-operation-requests"" is set to false. That's a bit of a misuse of ""validate-operation-requests"" since this isn't actually validation. So reusing that flag to control both things is a tiny bit ugly. But to a degree it really is validation, since you'll go ahead and grab the description and that should only fail if the request is invalid.",,,,,,,,,,,,,,,,,,,,,,,,
read-content operation does not return the uuid of the stream as the operation result,WFCORE-1741,12644996,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,26/Aug/16 12:13 PM,08/Sep/16 8:00 AM,29/Nov/16 3:51 PM,08/Sep/16 8:00 AM,,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"See the tail end of the discussion on WFCORE-1726.

The rules around streams in responses are:

1) If the thing providing the stream is an attribute, the attribute value set by the read OperationStepHandler must be the uuid of the stream.
2) If the thing providing the stream is a custom operation like :read-content, the result value in the response must be the uuid of the stream or a complex result object one of whose fields is the uuid of the stream.

Metadata about streams is propagated to the client using a response-header. But since a particular request can result in more than one attached stream, the normal non-response-header part of the result for a step must provide the uuid of the stream set by that step. This allows the client to correlate the various streams with the steps that provided them.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1757,,,,,,0.0,0.0,,1|i085m7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI 'deployment-info --headers' throws errors in standalone mode,WFCORE-1739,12644705,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,baranowb,baranowb,baranowb,25/Aug/16 2:22 AM,23/Sep/16 6:39 PM,29/Nov/16 3:51 PM,23/Sep/16 6:39 PM,,,,,,,3.0.0.Alpha9,,,,,,,0,,,,,,"In standalone mode of jboss-cli, the command: 'deployment-info --headers' throws Java exceptions instead of a proper problem description.  

{code:bash}
[standalone@localhost:9990 /] deployment-info --headers       
Failed to perform operation: java.util.concurrent.ExecutionException: Operation failed: Operation failed: java.lang.IllegalArgumentException:null
{code}


Tab complete does not work beyond '--headers=' and starts working again after '\{' is typed. 
*Example*: 

{code:bash}
[standalone@localhost:9990 /] deployment-info --headers<TAB>=<TAB><TAB> 
Failed to handle 'deployment-info --headers=': newValue is null
[standalone@localhost:9990 /] deployment-info --headers={<TAB>
allow-resource-service-restart  rollback-on-runtime-failure     
blocking-timeout                rollout   
{code}


*Steps to reproduce*:

Standalone:
{code:bash}
[standalone@localhost:9990 /] deployment-info --headers       
Failed to perform operation: java.util.concurrent.ExecutionException: Operation failed: Operation failed: java.lang.IllegalArgumentException:null
[standalone@localhost:9990 /] deployment-info --headers=<TAB><TAB>
Failed to handle 'deployment-info --headers=': newValue is null
[standalone@localhost:9990 /] deployment-info --headers={}
NAME                         RUNTIME-NAME                 PERSISTENT ENABLED STATUS  
jboss-kitchensink-ml-ear.ear jboss-kitchensink-ml-ear.ear true       false   STOPPED 
jboss-kitchensink.war        jboss-kitchensink.war        true       false   STOPPED 
jboss-modules.jar            jboss-modules.jar            true       false   STOPPED 
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i083z3:,9223372036854775807,,,,,,,,,,,25/Aug/16 11:11 AM;brian.stansberry;This is a WFCORE issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
rrd on data-source=*/statistics=pool throws NPE,WFCORE-1737,12644843,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,claudio4j,claudio4j,25/Aug/16 2:51 PM,31/Aug/16 8:50 PM,29/Nov/16 3:51 PM,31/Aug/16 5:59 PM,,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"Run the following command in CLI it throws a NullPointerException
As it is a rrd it should not require a resolved wildcard

{code}
/subsystem=datasources/data-source=*/statistics=pool:read-resource-description
{code}

Results
{code}
{
    ""outcome"" => ""failed"",
    ""result"" => [],
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
    ""rolled-back"" => true
}
{code}

The exception throws at server.log
{code}
ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""resolve"") failed - address: ([]): java.lang.NullPointerException
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractAddressResolver.execute(GlobalOperationHandlers.java:422)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$RegistrationAddressResolver.executeSingleTargetChild(GlobalOperationHandlers.java:903)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractAddressResolver.execute(GlobalOperationHandlers.java:442)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$RegistrationAddressResolver.executeMultiTargetChildren(GlobalOperationHandlers.java:895)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractAddressResolver.execute(GlobalOperationHandlers.java:440)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$RegistrationAddressResolver.executeSingleTargetChild(GlobalOperationHandlers.java:903)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractAddressResolver.execute(GlobalOperationHandlers.java:442)
        at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractAddressResolver.execute(GlobalOperationHandlers.java:337)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:951)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:694)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:389)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:422)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}


This op works
{code}
/subsystem=datasources/data-source=*:read-resource-description
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1762,,,,,,0.0,3.0,,1|i084rr:,9223372036854775807,,,,,,,,,,,"25/Aug/16 3:38 PM;brian.stansberry;I moved this to core, as the NPE is definitely in kernel logic and poking around in how the DS subsystem responds to requests there's nothing that seems amiss there.","26/Aug/16 4:22 PM;brian.stansberry;This is all about the classic double meaning of the '*' character problem.

There is a ManagementResourceRegistration specifically for /subsystem=datasources/data-source=*. But it has no child for ""statistics=pool"". Which isn't handled correctly, hence the NPE.

But the '*' character can also mean, in the read-resource-description operation, ""look for MRRs whose address matches this pattern"", and that would also result in finding the override MRR for /subsystem=datasources/data-source=ExampleDS. And that one does have a child for ""statistics=pool"".

GlobalOperationHandlers$RegistrationAddressResolver needs to handle this scenario correctly. No NPE and find the matching MRR.","31/Aug/16 8:50 PM;brian.stansberry;This is fixed but note that if no DS is enabled, that operation will fail with a WFLYCTL0030. There is no ""statistics=pool"" registration if there's no enabled DS.",,,,,,,,,,,,,,,,,,,,,,,,
Missing https://github.com/wildfly/wildfly-capabilities entry for capability org.wildfly.request-controller,WFCORE-1736,12644850,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,25/Aug/16 3:33 PM,25/Aug/16 5:33 PM,29/Nov/16 3:51 PM,25/Aug/16 5:33 PM,,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,$subject says it all,,,,,,,,,,,,,,,,WFCORE-1735,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i084sn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing https://github.com/wildfly/wildfly-capabilities entry for capability org.wildfly.network.interface,WFCORE-1735,12644849,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,25/Aug/16 3:31 PM,25/Aug/16 5:33 PM,29/Nov/16 3:51 PM,25/Aug/16 5:33 PM,,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,$subject says it all,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i084sf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing https://github.com/wildfly/wildfly-capabilities entry for managed domain capabilities ,WFCORE-1734,12644848,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,25/Aug/16 3:26 PM,25/Aug/16 5:33 PM,29/Nov/16 3:51 PM,25/Aug/16 5:33 PM,,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"Missing are:

org.wildfly.domain.socket-binding-group
org.wildfly.domain.profile
org.wildfly.domain.server-group
org.wildfly.domain.server-config",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i084s7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SynchServerOperationHandler doesn't check ops for REQUIRE_RESTART properly,WFCORE-1733,12644818,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,25/Aug/16 11:49 AM,09/Sep/16 9:49 AM,29/Nov/16 3:51 PM,09/Sep/16 9:49 AM,,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"Currently, SyncServerStateOperationHandler makes a simple check to determine if the result of an op should put a server into restart-required. This should be fixed to check the AttributeDefinition for the target of a write-attribute for restart-required, and the OperationDefinition of all other ops.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i084mn:,9223372036854775807,,,,,,,,,,,"25/Aug/16 12:45 PM;brian.stansberry;Treat ""undefine-attribute"" the same as ""write-attribute"". We had some bug this year in this general area of logic where the op generation was generating ""undefine-attribute"" instead of ""write-attribute"" and the bug was that op didn't get handled properly.

It may be possible to limit added checks to addresses in the profile=* tree. That may not be worth it though.","25/Aug/16 12:48 PM;luck3y;Ah, good to know, thanks. I've added that one.",,,,,,,,,,,,,,,,,,,,,,,,,
Servlet does not have permissions to read parent resources when deployed in EAR,WFCORE-1732,12603656,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,istudens,hsvabek,hsvabek,12/Feb/16 2:56 AM,23/Nov/16 5:59 AM,29/Nov/16 3:51 PM,,,,,,,,,,Server,,,,,0,,,,,,"Servlet is provided with VFS mount points to be able to read resources from any library submodule packed in an EAR, but it does not have VirtualFilePermissions to do so when running with Security Manager enabled. This leads to the situation when the parent module corresponding to the EAR deployment does have VirtualFilePermissions to read resources from libraries packed in the deployment, but web submodules cannot reach them. Web submodules are provided only with permissions to its own resources like WEB-INF/classes etc. and they are missing the parent module permissions. See the following stack trace:

*Stacktrace*
{code}
ERROR [io.undertow.request] (default task-3) UT005023: Exception handling request to /deployment0/EarServlet: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""org.jboss.vfs.VirtualFilePermission"" ""/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-integ-rhel-secman/5d904ae0/testsuite/integration/basic/target/exploded_deployments/eardeployment2.ear/lib/lib.jar/jar-info.txt"" ""read"")"" in code source ""(vfs:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-integ-rhel-secman/5d904ae0/testsuite/integration/basic/target/exploded_deployments/eardeployment2.ear/deployment0.war/WEB-INF/classes <no signer certificates>)"" of ""null"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:273)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:175)
	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:253)
	at org.jboss.as.server.deployment.module.VFSResourceLoader$VFSEntryResource.openStream(VFSResourceLoader.java:327)
	at org.jboss.modules.Module.getResourceAsStream(Module.java:674)
	at org.jboss.modules.ModuleClassLoader.findResourceAsStream(ModuleClassLoader.java:546)
	at org.jboss.modules.ConcurrentClassLoader.getResourceAsStream(ConcurrentClassLoader.java:321)
	at org.jboss.as.test.integration.management.cli.EarServlet.doGet(EarServlet.java:19)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:284)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:263)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$1$1.run(ServletInitialHandler.java:180)
	at java.security.AccessController.doPrivileged(Native Method)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:177)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:793)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}",,,,,,,,,,,,,,,,JBEAP-3369,,JBVFS-204,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly/pull/8842,https://github.com/wildfly/wildfly-core/pull/1579,https://github.com/wildfly/wildfly-core/pull/1580,https://github.com/wildfly/wildfly-core/pull/1753,,,0.0,0.0,,1|i01fv3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Exception generated from command ""connection-info"" with embedded server",WFCORE-1731,12644700,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,dlofthouse,pkremens,pkremens,25/Aug/16 12:52 AM,15/Nov/16 5:32 PM,29/Nov/16 3:51 PM,15/Nov/16 5:32 PM,3.0.0.Alpha5,,,,,,3.0.0.Alpha13,,CLI,Domain Management,Security,,,0,,,,,,"I started the embedded server and tried to obtain the connection information. An exception occurred:
{code}
[standalone@embedded /] connection-info
13:14:59,095 ERROR [org.jboss.as.controller.management-operation] (AeshProcess: 32) WFLYCTL0013: Operation (""whoami"") failed - address: ([]): java.lang.IllegalArgumentException: newValue is null
        at org.jboss.dmr.ModelNode.set(ModelNode.java:499)
        at org.jboss.as.domain.management.security.WhoAmIOperation.execute(WhoAmIOperation.java:95)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:204)
        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:659)
        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:649)
        at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)
        at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.execute(ThreadContextsModelControllerClient.java:59)
        at org.jboss.as.cli.handlers.ConnectionInfoHandler.doHandle(ConnectionInfoHandler.java:74)
        at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
        at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:776)
        at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:799)
        at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:412)
        at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)

WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: newValue is null
Failed to handle 'connection-info': java.lang.NullPointerException
{code}","JBoss Admin Command-line Interface
JBOSS_HOME: C:\dev\jboss-eap-7.0.1
JBoss AS release: 2.1.6.Final-redhat-1 ""Kenny""
JBoss AS product: JBoss EAP 7.0.1.GA
JAVA_HOME: c:\java\jdk1.8.0_45
java.version: 1.8.0_45
java.vm.vendor: Oracle Corporation
java.vm.version: 25.45-b02
os.name: Windows 7
os.version: 6.1",,,,,,,,,,,,,,,JBEAP-5752,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1931,,,,,,0.0,3.0,,1|i083xz:,9223372036854775807,,,,"Commands:
embed-server --std-out=echo
connection-info",,,,,,,10/Nov/16 7:01 AM;dlofthouse;Now that our pull request has been merged to Core it would be a good time to review this one again and see if the error is still present.,"10/Nov/16 7:20 AM;iweiss;Now both, WildFly master and EAP 7.x branches show only:

{code}
[standalone@embedded /] connection-info
Exception for connection-info: java.lang.NullPointerException
{code}

I take this is the undesired behaviour but I don't know which behaviour we are trying to achieve. ","10/Nov/16 8:29 AM;dlofthouse;Yeah that is still a bug, I will take this issue and have a closer look.",,,,,,,,,,,,,,,,,,,,,,,,
Singleton service is not correctly being set in WILDFLY,WFCORE-1730,12644667,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,Takis,Takis,Takis,24/Aug/16 11:28 AM,04/Oct/16 12:17 PM,29/Nov/16 3:51 PM,26/Aug/16 3:54 AM,3.0.0.Alpha5,,,,,,,,Server,,,,,0,,,,,,"WILDFLY doesn't call ServiceLoader (META-INF/services/org.jboss.msc.service.ServiceActivator) when it is deployed in EAR/lib. The SingletonService (not a singleton EJB) is activated in the ServiceLoader so the SingletonService hasn't been activated from the first. It works as expected when deployed as an EJB (not in EAR/lib).

When the ServiceLoader is called, a message of ""HATimerService will be installed!"" is logged and the SingletonService will be activated.

$ fgrep -e HATimerService -e '[org.jboss.as.clustering.singleton]' domain/servers/server-one/log/server.log
12:14:52,373 INFO  [org.jboss.as.quickstarts.cluster.hasingleton.service.ejb.HATimerServiceActivator] (MSC service thread 1-7) HATimerService will be installed!
12:14:56,251 INFO  [org.jboss.as.clustering.singleton] (ServerService Thread Pool -- 54) JBAS010342: master:server-one/singleton elected as the singleton provider of the jboss.quickstart.ha.singleton.timer service
12:14:56,251 INFO  [org.jboss.as.clustering.singleton] (ServerService Thread Pool -- 54) JBAS010340: This node will now operate as the singleton provider of the jboss.quickstart.ha.singleton.timer service
12:14:56,268 INFO  [org.jboss.as.quickstarts.cluster.hasingleton.service.ejb.HATimerService] (MSC service thread 1-8) Start HASingleton timer service 'org.jboss.as.quickstarts.cluster.hasingleton.service.ejb.HATim
erService'
12:14:56,873 INFO  [org.jboss.as.clustering.singleton] (notification-thread-0) JBAS010342: master:server-one/singleton elected as the singleton provider of the jboss.quickstart.ha.singleton.timer service
",,,,,,,,,,,,,,,,JBEAP-5745,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1367793,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1317,,,,,,0.0,4.0,,1|i083qv:,9223372036854775807,,,,,,,,,,,26/Aug/16 3:53 AM;Takis;Closing as it is includes the same PR as WFCORE-1235.,22/Sep/16 6:21 AM;jira-bugzilla-migration;Vlado Pakan <vpakan@redhat.com> changed the Status of [bug 1367793|https://bugzilla.redhat.com/show_bug.cgi?id=1367793] from POST to MODIFIED,22/Sep/16 9:36 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1367793|https://bugzilla.redhat.com/show_bug.cgi?id=1367793] from MODIFIED to ON_QA,04/Oct/16 12:17 PM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1367793|https://bugzilla.redhat.com/show_bug.cgi?id=1367793] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failures in CLIAliasTestCase,WFCORE-1729,12644475,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,mschvarc,brian.stansberry,brian.stansberry,23/Aug/16 12:17 PM,20/Oct/16 2:12 PM,29/Nov/16 3:51 PM,20/Oct/16 2:12 PM,,,,,,,3.0.0.Alpha10,,CLI,Test Suite,,,,0,,,,,,"Test is failing about 5% of the time, although recently it seems like more. Failures are on Windows.

https://ci.wildfly.org/project.html?branch_WildFlyCore=__all_branches__&buildTypeId=&tab=testDetails&projectId=WildFlyCore&testNameId=6317148453350548512&itemsCount=50&order=TEST_STATUS_DESC&page=1",,,,,,,,,,,,WFCORE-1853,,,,JBEAP-5736,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1838,,,,,,0.0,1.0,,1|i082lb:,9223372036854775807,,,,,,,,,,,"25/Aug/16 10:22 AM;mschvarc;This issue seems to be caused by using CliProcessWrapper.ctrlCAndWaitForClose(). Investigating the reason why that does not save the alias file immediately. Using CliProcessWrapper.pushLineAndWaitForResults(""quit"") instead seems to have fixed the issue. I'm running the CLI testsuite under Windows in a loop (x25) daily to test stability before sending a pull request. 
[WFCORE-1729 Bugfix|https://github.com/mschvarc/wildfly-core/commit/5b1a96daa6fad69adf3e3cf02b1e1458e4c5f539#diff-c537a933943da6dac176fcb233a37c8fL183]
",,,,,,,,,,,,,,,,,,,,,,,,,,
standalone.bat is unable to start with specific debug port & gc logging doesn't log to file,WFCORE-1725,12644309,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ctomc,ctomc,ctomc,22/Aug/16 1:30 PM,23/Aug/16 5:45 PM,29/Nov/16 3:51 PM,23/Aug/16 5:45 PM,3.0.0.Alpha5,,,,,,3.0.0.Alpha6,,Scripts,,,,,0,,,,,,"* standalone.bat is unable to start on Windows with specific debug port
* priority of this jira is blocker because this is regression against 7.0.0.GA
* It may relates with JBEAP-5374 and JBEAP-5551 (CC: Petr Sakař)

{noformat}
C:\Users\Administrator\playground\7.1.0.DR3\jboss-eap-7.1\bin>standalone.bat --debug 7878
Calling ""C:\Users\Administrator\playground\7.1.0.DR3\jboss-eap-7.1\bin\standalone.conf.bat""
Setting JAVA property to ""C:\jdk1.8.0_45\bin\java""
""-Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djbo
ss.modules.system.pkgs=org.jboss.byteman -agentlib:jdwp=transport=dt_socket,address=""7878,server=y,suspend=n"" | findstr /I \-serve
r > nul
""-Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djbo
ss.modules.system.pkgs=org.jboss.byteman -agentlib:jdwp=transport=dt_socket,address=""7878,server=y,suspend=n"" | findstr /I ""\-verb
ose:gc"" > nul
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: ""C:\Users\Administrator\playground\7.1.0.DR3\jboss-eap-7.1""

  JAVA: ""C:\jdk1.8.0_45\bin\java""

  JAVA_OPTS: ""-verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogF
ileSize=3M -Xloggc: -XX:-TraceClassUnloading -Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:MetaspaceSize=96M -XX:MaxMetaspaceSiz
e=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -agentlib:jdwp=transport=dt_socket,address=""7
878,server=y,suspend=n""

===============================================================================

ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
ERROR: JDWP option syntax error: -agentlib:jdwp=transport=dt_socket,address=7878,server=y,suspend=n ^
The filename, directory name, or volume label syntax is incorrect.
{noformat}

",,,,,,,,,,,,,,,,JBEAP-5668,,,,,JBEAP-5374,JBEAP-5551,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i081m7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Resource.NoSuchResourceException managementResourceNotFound for native-interface and native-remoting-interface,WFCORE-1724,12644034,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,brian.stansberry,soul2zimate,soul2zimate,19/Aug/16 5:53 AM,22/Aug/16 4:34 AM,29/Nov/16 3:51 PM,22/Aug/16 4:34 AM,3.0.0.Alpha5,,,,,,,,Domain Management,,,,,0,,,,,,"management-interface {{native-interface}} and {{native-remoting-interface}} are listed under address:
/core-service=management/management-interface=                        
http-interface  native-interface  native-remoting-interface
But the read-resource operation causes Resource.NoSuchResourceException

{noformat}
[wangc@dhcp-128-40 DR]$ sh jboss-eap-7.1-DR3/bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server 
[standalone@embedded /] /core-service=management/management-interface=                              
http-interface  native-interface  native-remoting-interface  
[standalone@embedded /] /core-service=management/management-interface=native-interface:read-resource
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0216: Management resource '[
    (\""core-service\"" => \""management\""),
    (\""management-interface\"" => \""native-interface\"")
]' not found"",
    ""rolled-back"" => true
}
[standalone@embedded /] /core-service=management/management-interface=native-remoting-interface:read-resource
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0216: Management resource '[
    (\""core-service\"" => \""management\""),
    (\""management-interface\"" => \""native-remoting-interface\"")
]' not found"",
    ""rolled-back"" => true
}
{noformat}

It gives same error in standalone mode and ember-server mode since 7.1-DR2.
7.1-DR1 is fine when it's on Wildfly core 2.2.0.CR7",,,,,,,,,,,,,,,,JBEAP-5681,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i0802n:,9223372036854775807,,,,,,,,,,,"19/Aug/16 10:57 AM;brian.stansberry;Unless I'm missing something I don't believe this is a bug.

CLI tab completion can't know that after you do the completion of the address you intend to do a read-resource op. So it presents the complete set of possibly valid options, including ones the could be used for an :add operation. If you then try to read a non-existent resource you get the correct failure.","22/Aug/16 4:34 AM;soul2zimate;Yes, that explains it. The {{add}} operation works fine. 
Sorry for disturbing. Close this one.",,,,,,,,,,,,,,,,,,,,,,,,,
OperationRequestCompleter ignores CommandArgument#canAppearNext in choosing ValueCompleter when there's more then one indexed arguments,WFCORE-1723,12643897,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,spyrkob,spyrkob,spyrkob,18/Aug/16 10:20 AM,27/Oct/16 10:02 AM,29/Nov/16 3:51 PM,,3.0.0.Alpha5,,,,,,,,CLI,,,,,0,,,,,,"If there are two or more indexed CommandArguments that can be used to complete user entry at the same index, the first one will always be chosen - even if it clashes with previous arguments.

For example:
{{patch rollback ..<TAB>}}
produces a list of directories - this is because PatchHandler registers multiple CommandArguments with index 1 and in this case a completer for patch apply is the first one matched.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1748,,,,,,0.0,0.0,,1|hzu749:9x,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ConfigurationPersister problems in successfulBoot() should not be able to abort boot,WFCORE-1721,12643763,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,17/Aug/16 11:37 AM,17/Aug/16 2:23 PM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"This error (reported in a testsuite run) should not have the effect:

{code}
17:31:30,743 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0082: Failed to create backup copies of configuration file C:\BuildAgent\work\a31d203e70e89f90\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone.xml
    at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:514)
    at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.successfulBoot(BackupXmlConfigurationPersister.java:94)
    at org.jboss.as.controller.AbstractControllerService.finishBoot(AbstractControllerService.java:455)
    at org.jboss.as.server.ServerService.boot(ServerService.java:366)
    at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:302)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.nio.file.FileSystemException: C:\BuildAgent\work\a31d203e70e89f90\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone_xml_history\standalone.boot.xml: The process cannot access the file because it is being used by another process.

    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
    at sun.nio.fs.WindowsFileCopy.copy(WindowsFileCopy.java:165)
    at sun.nio.fs.WindowsFileSystemProvider.copy(WindowsFileSystemProvider.java:278)
    at java.nio.file.Files.copy(Files.java:1274)
    at org.jboss.as.controller.persistence.FilePersistenceUtils.copyFile(FilePersistenceUtils.java:78)
    at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:512)
    ... 5 more

17:31:30,744 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}

WFCORE-1501 dealt with a similar problem.

This needs a bit of caution, to ensure that we still fail boot on failures that are more substantial than problems creating the history folder stuff. Think about stuff like read-only-config cases where we need to make sure that a reload op will be able to function properly. That caveat probably should have been applied to my WFCORE-1501 work as well.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07ygv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wildfly 10.1.0.CR1 does not start as a windows service,WFCORE-1719,12643318,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,antonyudin,antonyudin,13/Aug/16 5:45 PM,15/Sep/16 5:52 PM,29/Nov/16 3:51 PM,16/Aug/16 10:44 AM,2.2.0.Final,,,,,,2.2.1.CR1,3.0.0.Alpha6,Scripts,,,,,0,,,,,,"Wildfly fails to start as a windows service.

Installation works fine:
{code}
.\service.bat install
Using the X86-64bit version of prunsrv

""C:\applications\wildfly-10.1.0.CR1-test\bin\service\amd64\wildfly-service"" install Wildfly  --DisplayName=WildFly --Description=""""WildFly Application Server"""" --LogLevel=INFO --LogPath=""C:\applications\wildfly-10.1.0.CR1-test\standalone\log"" --LogPrefix=service --StdOutput=auto --StdError=auto --StartMode=exe --Startup=manual --StartImage=cmd.exe --StartPath=""C:\applications\wildfly-10.1.0.CR1-test\bin"" ++StartParams=""/c#set#NOPAUSE=Y#&&#standalone.bat#-Djboss.server.base.dir=C:\applications\wildfly-10.1.0.CR1-test\standalone#--server-config=standalone.xml"" --StopMode=exe --StopImage=cmd.exe --StopPath=""C:\applications\wildfly-10.1.0.CR1-test\bin""  ++StopParams=""/c jboss-cli.bat --controller=localhost:9990 --connect  --command=:shutdown""
Service Wildfly installed
{code}

Windows reports this error:
{quote}
Windows could not start the Wildfly on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code1.
{quote}

{code}
Event log report:
The Wildfly service terminated with the following service-specific error: 
Incorrect function.
  <Event xmlns=""http://schemas.microsoft.com/win/2004/08/events/event"">
    <System>
        <Provider Name=""Service Control Manager"" Guid=""{555908d1-a6d7-4695-8e1e-26931d2012f4}"" EventSourceName=""Service Control Manager""/>
        <EventID Qualifiers=""49152"">7024</EventID>
        <Version>0</Version>
        <Level>2</Level>
        <Task>0</Task>
        <Opcode>0</Opcode>
        <Keywords>0x8080000000000000</Keywords>
        <TimeCreated SystemTime=""2016-08-13T21:40:42.402218400Z""/>
        <EventRecordID>196500</EventRecordID>
        <Correlation/>
        <Execution ProcessID=""668"" ThreadID=""10184""/>
        <Channel>System</Channel>
        <Computer>ITPC7.intra.rfgh.net</Computer>
        <Security/>
    </System>
    -
    <EventData>
        <Data Name=""param1"">Wildfly</Data>
        <Data Name=""param2"">%%1</Data>
        <Binary>570069006C00640066006C0079000000</Binary>
    </EventData>
</Event>
{code}
","Windows 8/Windows Server 2012
Oracle Java 8",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i07vwf:,9223372036854775807,,,,,,,,,Workaround Exists,"Workaround / fix is to open service.bat file
and locate 
{{set DESCRIPTION=""WildFly Application Server""}}
and replace it with

{{set DESCRIPTION=WildFly Application Server}}","17/Aug/16 8:47 AM;antonyudin;Removing the quotes around DESCRIPTION helps.
Thanks.","17/Aug/16 11:51 AM;antonyudin;I just found out that the service starts successfully after the DESCRIPTION fix, but it is impossible to stop the service. One have to kill java process to stop the service.
Could you please look at it?

There is nothing in the server.log file after attempting to stop the service.
And this is what is in the service.log
[2016-08-17 11:47:25] [info]  [ 6872] Commons Daemon procrun (1.0.15.0 64-bit) started
[2016-08-17 11:47:25] [info]  [ 6872] Running 'Wildfly' Service...
[2016-08-17 11:47:25] [info]  [ 9660] Starting service...
[2016-08-17 11:47:25] [info]  [ 9660] Service started in 7 ms.
[2016-08-17 11:48:46] [info]  [ 9636] Stopping service...

Windows reports the status of the service as ""Stopping"".

Thanks.
","30/Aug/16 9:05 AM;arthurborsboom;This bug seems still to exist in Wildfly 10.1.0-Final.

The quotes are still in:

docs/contrib/scripts/service/service.bat

Removing them *before* installing the service is the key to get it working.",,,,,,,,,,,,,,,,,,,,,,,,
Handlers within Audit Logger are not removed properly when Audit Logger is removed,WFCORE-1718,12643527,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jtymel,jtymel,16/Aug/16 5:49 AM,31/Aug/16 5:54 PM,29/Nov/16 3:51 PM,31/Aug/16 5:54 PM,3.0.0.Alpha5,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"If Audit Logger is removed, destination handlers (i.e. its child nodes) are not removed properly. They are not present in the config file. They seem to be not removed ""internally"" though. This leads to a couple of issues:

1. It is not possible to remove referenced File/Syslog handlers. If user tries to remove them the _NullPointerException_ is given as a result. Try following commands:
{{/core-service=management/access=audit/file-handler=file:remove()}}
{{/core-service=management/access=audit/syslog-handler=my-syslog-handler:remove()}}
Their output is:
{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
    ""rolled-back"" => true
}
{code}

2. AuditLog continues to send auditable events to previously referenced File/Syslog handlers.
* Create auditable event (e.g. {{/subsystem=logging/logger=com.arjuna:write-attribute(name=level,value=DEBUG)}})
* See log in the file (WILDFLY_HOME/standalone/data/audit-log.log)
* See log in the syslog (/var/log/messages)

",,,,,,,,,,,,,,,,JBEAP-5643,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i07x33:,9223372036854775807,,,,"1. Configure AuditLog to use both File and Syslog Handlers.
{code}
        <audit-log>
            <formatters>
                <json-formatter name=""json-formatter""/>
            </formatters>
            <handlers>
                <file-handler name=""file"" formatter=""json-formatter"" path=""audit-log.log"" relative-to=""jboss.server.data.dir""/>
                <syslog-handler name=""my-syslog-handler"" formatter=""json-formatter"">
                    <udp host=""localhost"" port=""514""/>
                </syslog-handler>
            </handlers>
            <logger log-boot=""true"" log-read-only=""false"" enabled=""true"">
                <handlers>
                    <handler name=""file""/>
                    <handler name=""my-syslog-handler""/>
                </handlers>
            </logger>
        </audit-log>
{code}

2. Start the server and remove Audit Logger
{{/core-service=management/access=audit/logger=audit-log:remove()}}

3. Add Audit Logger back (without handlers)
{{/core-service=management/access=audit/logger=audit-log:add(enabled=true, log-boot=true, log-read-only=false)}}
",,,,,,,"17/Aug/16 4:13 PM;brian.stansberry;This can be fixed by having AuditLogLoggerRemoveHandler extend AbstractRemoveStepHandler.

However, as part of doing this we need to review the use of AuditLogLoggerResourceDefinition.createHostServerDefinition. The only use I see of that, the same auditLogger instance is passed to it as is passed to AuditLogLoggerResourceDefinition.createDefinition. So the same logger gets passed to two resources, in one case with 'executeRuntime=true' and another time with 'executeRuntime=false'. In both cases the add handler performs at least some sort of modification of the auditLogger, with executeRuntime controlling exactly what. And in both cases the remove handler is modifying the audit logger. This just seems a bit odd. Intuitively I'd think the AuditLogLoggerResourceDefinition.createHostServerDefinition would not involve any runtime modification at all as the resource is just storing config data on the HC for its use in configuring a server.

[~kabirkhan] WDYT think about the last paragraph ^^^?","18/Aug/16 6:54 AM;kabirkhan;I think that sounds reasonable, the createHostServerDefinition should probably not do the runtime part.

I don't remember off the top of my head why the logger is shared...",,,,,,,,,,,,,,,,,,,,,,,,,
ExtensionXml incorrectly handles duplicate module names,WFCORE-1717,12643479,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,tcrawley,brian.stansberry,15/Aug/16 7:11 PM,15/Aug/16 7:11 PM,29/Nov/16 3:51 PM,,2.2.0.Final,3.0.0.Alpha5,,,,,3.0.0.CR1,,Domain Management,,,,,0,,,,,,"Toby Crawley reports:

- adding a duplicate extension under server > extensions causes an
   IllegalStateException that occurs when trying to generate the
   XMLStreamException
   (https://gist.github.com/tobias/59d155afe0c88e268b83cb75734353eb)

The problem happens because before the parser calls the invalidAttributeValue method to throw an exception, it has already consumed the element, preventing invalidAttributeValue working properly.

This should really be a custom exception that more clearly explains the problem, which is that the 'module' attribute value must be unique across the extension elements.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07wsv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JMX domains jboss.as and jboss.as.expr do not always correctly handle propertly list patters in queryMBeans and queryNames,WFCORE-1716,12643468,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,15/Aug/16 5:21 PM,02/Nov/16 8:33 AM,29/Nov/16 3:51 PM,24/Aug/16 5:54 PM,,,,,,,3.0.0.Alpha6,,JMX,,,,,0,,,,,,"The ObjectName filtering logic added for WFLY-3161 does not handle queryMBeans and queryNames correctly in some cases where the ObjectName param to the method is a property list pattern (i.e. one that includes a simple '*' at the end of the list of properties, meaning ""all other properties besides previous ones whose keys were specifically enumerated, match"".)

The problem occurs when the the ObjectName does specifically include some keys, and those keys don't correspond to the final elements of the related management resource's PathAddress. As the RootResourceIterator walks the management resource tree, ModelControllerMBeanHelper.ObjectNameMatchResourceAction will not identify the parent resources of children that should match as matching, with the result that the iterator will not descend into that part of the tree and the children will not be matched. For example, this query will return an empty set because the /socket-binding-group=standard-sockets parent will not be matched, preventing checks of the socket-binding-group children.

{code}
Set<ObjectInstance> instances = connection.queryMBeans(createObjectName(""jboss.as:socket-binding=*,*""), null);
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1367784,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1741,,,,,,0.0,3.0,,1|i07wrj:,9223372036854775807,,,,,,,,,,,14/Sep/16 9:49 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1367784|https://bugzilla.redhat.com/show_bug.cgi?id=1367784] from NEW to ASSIGNED,16/Sep/16 3:45 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1367784|https://bugzilla.redhat.com/show_bug.cgi?id=1367784] from ASSIGNED to POST,02/Nov/16 8:33 AM;jira-bugzilla-migration;Aurel Pintea <apintea@redhat.com> changed the Status of [bug 1367784|https://bugzilla.redhat.com/show_bug.cgi?id=1367784] from MODIFIED to ON_QA,,,,,,,,,,,,,,,,,,,,,,,,
HostProcessReloadHandler does not reset the HostRunningModeControl's restartMode,WFCORE-1715,12643462,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,yersan,yersan,brian.stansberry,15/Aug/16 3:04 PM,31/Aug/16 5:55 PM,29/Nov/16 3:51 PM,31/Aug/16 5:55 PM,2.2.0.Final,3.0.0.Alpha5,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"The ReloadContext created by HostProcessReloadHandler sets the HostRunningModeControl's restartMode but then it never gets restored to the default value. The doReload() method of the ReloadContext should restore it. This ensures the ServerInventoryService.stop() only uses the value set by HostProcessReloadHandler once, for that one reload.

A concern here is that ServerInventoryService only goes into its ""shutdownServers"" logic if the restartMode == RestartMode.SERVERS. Which, due to this bug, it will be following any HC reload. But if we restore the default value of restartMode, that is null, and null != RestartMode.SERVERS. So the """"shutdownServers"" logic will no longer kick in. But should it? Should the default value of restartMode be ""null""? Or should it be RestartMode.SERVERS? If we change the default from null, then the behavior when no reload has happened will change.

Basically we need to decide whether the ""shutdownServers"" logic should happen by default.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i07wq7:,9223372036854775807,,,,,,,,,,,"15/Aug/16 3:34 PM;brian.stansberry;Note that if we go into the ""shutdownServers"" logic we need to consider what the correct default timeout in the HostRunningModeControl should be. I believe zero is fine (shutdown immediately).","25/Aug/16 6:19 PM;yersan;I have arrived to these conclusions after taking a look to the code around this issue:

# It seems that the RestartMode has already a default value, created in the constructor of HostRunningModeControl. It's initialized to RestartMode.SERVERS in a single point: HostControllerEnvironment L298. Its setter is only invoked in HostProcessReloadHandler#reloadInitiated L145 so it seems that currently the default value used is RestartMode.SERVERS.
# The possible ""problem"" could be if the user executes a reload(restartServers=false), this operation will let the HostRunningModeControl.RestartMode equals to RestartMode.HC_ONLY because it's never reverted to its default RestartMode.SERVERS after reloading the HC. The consequence I have been able to see is a minor different order when shutdown operation is executed after HC reload:

Case 1: 
/host=master:reload(restart-servers=false)
/host=master:shutdown(restart=true)

Case 2:
/host=master:reload(restart-servers=true)
/host=master:shutdown(restart=true)

Shutdown op on case 1, servers are unregistered from the HC, the HC is stopped and at the end the servers are stopped.
Shutdown op on case 2, servers are unregistered from HC, servers are stopped and at the end the HC is stopped.

Whit the change in this issue, reverting RestartMode to its default after a HC reload, the sequence of actions of shutdown operation after a reload (with restart-servers true or false) will be the same and will be the sequences on case 2.

[~brian.stansberry] About the default timeout, yes, I can confirm that it will be by default is 0 (code about timeout is in WFCORE-1427) 
","25/Aug/16 6:35 PM;brian.stansberry;{code}
It seems that the RestartMode has already a default value, created in the constructor of HostRunningModeControl. It's initialized to RestartMode.SERVERS in a single point: HostControllerEnvironment L298.
{code}

Ah, good, I missed that the field is set in the constructor method. Some test fixtures set it to HC_ONLY, but the production code sets SERVERS.

{code}
Whit the change in this issue, reverting RestartMode to its default after a HC reload, the sequence of actions of shutdown operation after a reload (with restart-servers true or false) will be the same and will be the sequences on case 2.
{code}

That's good.  The case 2 sequence is better.

Thanks for the investigation.",,,,,,,,,,,,,,,,,,,,,,,,
Tab completion doesn't offer more options once prefix match some value,WFCORE-1714,12643341,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,pkremens,pkremens,15/Aug/16 4:26 AM,06/Sep/16 6:14 PM,29/Nov/16 3:51 PM,06/Sep/16 6:14 PM,3.0.0.Alpha5,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"Tab completion for CLI variables doesn't offer more values once the variable to be completed match some value.

*reproduce*
{noformat}
set foo=/subsystem=logging
set foobar=/subsystem=logging/console-handler=CONSOLE
{noformat}

*actual*
{noformat}
$foo<TAB>
/  :
{noformat}

*expected*
{noformat}
$foo<TAB>
/  :  foo  foobar
{noformat}",,,,,,,,,,,,,,,,JBEAP-5624,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1744,,,,,,0.0,1.0,,1|i07w1j:,9223372036854775807,,,,,,,,,,,"17/Aug/16 6:58 AM;soul2zimate;It does not complete because [CommandCompleter.java|https://github.com/wildfly/wildfly-core/blob/7408c80a8cf9c85116d1578e3f219cd5b93866a8/cli/src/main/java/org/jboss/as/cli/CommandCompleter.java#L95] is written to complete only if UnresolvedVariableException is caught while variable is not fully resolved. This is why {{$foo}} does not work, but {{$fo}} and {{$foob}} work fine

",,,,,,,,,,,,,,,,,,,,,,,,,,
CLIScriptSupportTestCase fails on pure-IPv6 machines,WFCORE-1712,12643056,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,mkopecky,brian.stansberry,11/Aug/16 3:35 PM,11/Aug/16 6:27 PM,29/Nov/16 3:51 PM,11/Aug/16 6:27 PM,,,,,,,3.0.0.Alpha5,,Test Suite,,,,,0,,,,,,"*Description of problem:*
org.jboss.as.test.manualmode.management.cli.CLIScriptSupportTestCase#testConnectStatus fails on pure-IPv6 machines

*How reproducible:*
100%

*Steps to Reproduce:*
# export PROXY_PARAMS=""-DproxySet=true -DproxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -DproxyPort=3128 -Dhttp.proxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -Dhttp.proxyPort=3128 -Dhttps.proxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -Dhttps.proxyPort=3128"" 
# mvn install -Dmaven.repo.local=$MAVEN_REPO_LOCAL -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIPV6_1 -Dipv6 $PROXY_PARAMS  -Dtest=CLIScriptSupportTestCase -Dts.manualmode -DfailIfNoTests=false

*Actual results:*
Stacktrace:
{noformat}java.lang.IllegalStateException: Unable to connect to controller.
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.xnio.nio.WorkerThread$ConnectHandle.handleReady(WorkerThread.java:319)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:559)
	at ...asynchronous invocation...(Unknown Source)
	at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:294)
	at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:276)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:393)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:381)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:83)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:114)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:257)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:71)
	at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:218)
	at org.jboss.as.cli.impl.CLIModelControllerClient.getOrCreateChannel(CLIModelControllerClient.java:179)
	at org.jboss.as.cli.impl.CLIModelControllerClient$3.getChannel(CLIModelControllerClient.java:138)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:147)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:122)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:75)
	at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:1157)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:1003)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:980)
	at org.jboss.as.cli.scriptsupport.CLI.doConnect(CLI.java:278)
	at org.jboss.as.cli.scriptsupport.CLI.connect(CLI.java:82)
	at org.jboss.as.test.manualmode.management.cli.CLIScriptSupportTestCase.testConnectStatus(CLIScriptSupportTestCase.java:87)

 Standard Output
 Standard Error
	5.6 sec
{noformat}

Test output:
{noformat}&amp#27;[0m09:15:56,815 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1
&amp#27;[0m&amp#27;[0m09:15:57,137 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
&amp#27;[0m&amp#27;[0m09:15:57,331 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" starting
&amp#27;[0m&amp#27;[33m09:16:00,230 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-3) WFLYDM0111: Keystore /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6-CLIScriptSupport/49bf0d07/testsuite/manualmode/target/wildfly-core/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
&amp#27;[0m&amp#27;[0m09:16:00,413 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" started in 3532ms - Started 37 of 46 services (17 services are lazy, passive or on-demand)
&amp#27;[0m09:16:00,477 INFO  [org.jboss.as.cli.CommandContext] (main) Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.
Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.
&amp#27;[0m09:16:00,699 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" stopped in 86ms
&amp#27;[0m&amp#27;[0m09:16:00,715 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" starting
&amp#27;[0m&amp#27;[0m09:16:00,943 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
&amp#27;[0m&amp#27;[0m09:16:01,083 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.6.Final-redhat-1
&amp#27;[0m&amp#27;[0m09:16:01,143 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.6.Final-redhat-1
&amp#27;[0m&amp#27;[33m09:16:01,438 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-3) WFLYDM0111: Keystore /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel-ipv6-CLIScriptSupport/49bf0d07/testsuite/manualmode/target/wildfly-core/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
&amp#27;[0m&amp#27;[0m09:16:01,505 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1
&amp#27;[0m&amp#27;[33m09:16:01,753 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
&amp#27;[0m&amp#27;[0m09:16:01,944 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
&amp#27;[0m&amp#27;[0m09:16:01,946 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
&amp#27;[0m&amp#27;[0m09:16:01,946 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" started in 1221ms - Started 59 of 62 services (20 services are lazy, passive or on-demand)
&amp#27;[0m&amp#27;[0m09:16:02,188 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Core 2.2.0.CR7-redhat-1 ""Kenny"" stopped in 55ms
{noformat}

*Expected results:*
No errors

*Additional info:*
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-testsuite-test-core-rhel-ipv6-CLIScriptSupport/",,,,,,,,,,,,,,,,JBEAP-5420,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1706,,,,,,0.0,0.0,,1|i07uwf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WFCORE-1106 work ignores fact that HostCapabilityScope exists,WFCORE-1710,12643030,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,11/Aug/16 12:39 PM,11/Aug/16 2:29 PM,29/Nov/16 3:51 PM,11/Aug/16 2:29 PM,3.0.0.Alpha4,,,,,,3.0.0.Alpha5,,Domain Management,,,,,0,,,,,,The WFCORE-1106 work for checking the runtime status of a capability assumes that only CapabilityScope.GLOBAL should be relevant when the check is performed. But this omits HostCapabilityScope which comes into play when host controller subsystems are used.,,,,,,,,,,,,WFCORE-1106,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1735,,,,,,0.0,0.0,,1|i07uqn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ReconnectSyslogServerTestCase from wf-core fails intermittently,WFCORE-1708,12642904,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,olukas,olukas,olukas,11/Aug/16 5:17 AM,01/Sep/16 8:09 AM,29/Nov/16 3:51 PM,01/Sep/16 8:09 AM,3.0.0.Alpha4,,,,,,3.0.0.Alpha7,,Test Suite,,,,,0,,,,,,"*Description of problem:*
ReconnectSyslogServerTestCase from wf-core fails intermittently.

*How reproducible:*
2%

*Actual results:*
Stacktrace:
{noformat}
java.lang.AssertionError: No message was logged into the TCP syslog after second syslog server restart
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertNotNull(Assert.java:712)
	at org.jboss.as.test.manualmode.logging.ReconnectSyslogServerTestCase.testReconnectSyslogServer(ReconnectSyslogServerTestCase.java:118)
{noformat}

Standard Output:
{noformat}
10:59:13,639 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: /qa/tools/opt/x86_64/jdk1.8.0_91/jre/bin/java -D[Standalone] -javaagent:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository/org/jboss/byteman/byteman/3.0.3/byteman-3.0.3.jar=port:9091,boot:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository/org/jboss/byteman/byteman/3.0.3/byteman-3.0.3.jar,sys:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/shared/target/wildfly-core-testsuite-shared-3.0.0.Alpha4-redhat-1.jar -Dorg.jboss.byteman.transform.all -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository -Xmx512m -XX:MaxMetaspaceSize=256m -Djboss.dist=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false -server -Dts.timeout.factor=100 -Djbossas.ts.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode -ea -Dorg.jboss.boot.log.file=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/log/server.log -Dlogging.configuration=file:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration/logging.properties -jar /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/jboss-modules.jar -mp /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/modules org.jboss.as.standalone -Djboss.home.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core -Djboss.server.base.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone -Djboss.server.log.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/log -Djboss.server.config.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration -c=standalone.xml -bmanagement=10.16.180.146 -Djboss.http.port=8080 -Djboss.bind.address=10.16.180.146 
10:59:13,849 INFO  [org.xnio] (main) XNIO version 3.4.0.Beta2
10:59:13,950 INFO  [org.xnio.nio] (main) XNIO NIO Implementation Version 3.4.0.Beta2
TransformListener() : accepting requests on localhost:9091
10:59:14,238 INFO  [org.jboss.remoting] (main) JBoss Remoting version 4.0.21.Final-redhat-1
&amp#27;[0m10:59:15,448 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1
&amp#27;[0m&amp#27;[0m10:59:16,071 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
&amp#27;[0m&amp#27;[0m10:59:16,385 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha4-redhat-1 ""Kenny"" starting
&amp#27;[0m&amp#27;[0m10:59:17,878 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
&amp#27;[0m&amp#27;[0m10:59:17,983 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Beta2
&amp#27;[0m&amp#27;[0m10:59:18,004 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Beta2
&amp#27;[0m&amp#27;[0m10:59:18,144 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
&amp#27;[0m&amp#27;[0m10:59:18,180 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1
&amp#27;[0m&amp#27;[33m10:59:18,208 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-1) WFLYDM0111: Keystore /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
&amp#27;[0m&amp#27;[33m10:59:18,352 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
&amp#27;[0m&amp#27;[0m10:59:18,924 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.180.146:9990/management
&amp#27;[0m&amp#27;[0m10:59:18,925 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.180.146:9990
&amp#27;[0m&amp#27;[0m10:59:18,925 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha4-redhat-1 ""Kenny"" started in 4551ms - Started 59 of 62 services (20 services are lazy, passive or on-demand)
&amp#27;[0m&amp#27;[0m10:59:19,841 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/data/content/b6/795345f1851ba393f4f56dcd0e08328efcc090/content
&amp#27;[0m&amp#27;[0m10:59:19,880 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of ""logging-test.jar"" (runtime-name: ""logging-test.jar"")
&amp#27;[0m&amp#27;[0m10:59:20,076 INFO  [org.wildfly.test.undertow.UndertowService] (MSC service thread 1-2) Started Undertow on 10.16.180.146:8080
&amp#27;[0m&amp#27;[0m10:59:20,131 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0010: Deployed ""logging-test.jar"" (runtime-name : ""logging-test.jar"")
&amp#27;[0m&amp#27;[0m10:59:27,185 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage
&amp#27;[0m10:59:27,739 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed
	at java.net.PlainDatagramSocketImpl.receive0(Native Method)
	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)
	at java.net.DatagramSocket.receive(DatagramSocket.java:812)
	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)
	at java.lang.Thread.run(Thread.java:745)

10:59:28,239 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)
	at java.lang.Thread.run(Thread.java:745)

10:59:28,241 WARN  [org.jboss.as.test.syslogserver.TCPSyslogSocketHandler] (Thread-6) IOException occurred: java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:170)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at org.jboss.as.test.syslogserver.TCPSyslogSocketHandler.run(TCPSyslogSocketHandler.java:73)
	at java.lang.Thread.run(Thread.java:745)

&amp#27;[0m10:59:28,255 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage
&amp#27;[0mLogManager error of type WRITE_FAILURE: Error writing to TCP stream
java.net.SocketException: Broken pipe
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at org.jboss.logmanager.handlers.TcpOutputStream.write(TcpOutputStream.java:182)
	at org.jboss.logmanager.handlers.TcpOutputStream.write(TcpOutputStream.java:173)
	at org.jboss.logmanager.handlers.SyslogHandler.sendMessage(SyslogHandler.java:579)
	at org.jboss.logmanager.handlers.SyslogHandler.doPublish(SyslogHandler.java:540)
	at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:76)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:314)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)
	at org.jboss.logmanager.Logger.logRaw(Logger.java:850)
	at org.jboss.logmanager.Logger.log(Logger.java:802)
	at org.jboss.logmanager.Logger.log(Logger.java:814)
	at org.jboss.logging.JBossLogManagerLogger.doLog(JBossLogManagerLogger.java:42)
	at org.jboss.logging.Logger.info(Logger.java:955)
	at org.jboss.as.test.manualmode.logging.LoggingServiceActivator$1.handleRequest(LoggingServiceActivator.java:50)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:233)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:131)
	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:57)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)
	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:565)
&amp#27;[0m10:59:28,263 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage
&amp#27;[0m&amp#27;[0m10:59:36,291 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage
&amp#27;[0m10:59:36,794 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed
	at java.net.PlainDatagramSocketImpl.receive0(Native Method)
	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)
	at java.net.DatagramSocket.receive(DatagramSocket.java:812)
	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)
	at java.lang.Thread.run(Thread.java:745)

10:59:37,295 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)
	at java.lang.Thread.run(Thread.java:745)

&amp#27;[0m10:59:37,298 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage
&amp#27;[0m&amp#27;[0m10:59:37,310 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage
&amp#27;[0m10:59:37,313 ERROR [org.jboss.as.test.syslogserver.Rfc5424SyslogEvent] (Thread-9) Can't parse priority
10:59:37,313 WARN  [org.jboss.as.test.syslogserver.TCPSyslogSocketHandler] (Thread-9) IOException occurred: java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:170)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at org.jboss.as.test.syslogserver.TCPSyslogSocketHandler.run(TCPSyslogSocketHandler.java:73)
	at java.lang.Thread.run(Thread.java:745)

&amp#27;[0m10:59:45,316 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage
&amp#27;[0m10:59:50,955 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed
	at java.net.PlainDatagramSocketImpl.receive0(Native Method)
	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)
	at java.net.DatagramSocket.receive(DatagramSocket.java:812)
	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)
	at java.lang.Thread.run(Thread.java:745)

10:59:51,456 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)
	at java.lang.Thread.run(Thread.java:745)

&amp#27;[0m10:59:51,517 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment logging-test.jar (runtime-name: logging-test.jar) in 17ms
&amp#27;[0m&amp#27;[33m10:59:51,525 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
&amp#27;[0m&amp#27;[0m10:59:51,527 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/data/content/b6/795345f1851ba393f4f56dcd0e08328efcc090/content
&amp#27;[0m&amp#27;[0m10:59:51,528 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed ""logging-test.jar"" (runtime-name: ""logging-test.jar"")
&amp#27;[0m&amp#27;[0m10:59:51,549 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0236: Suspending server with no timeout.
&amp#27;[0m&amp#27;[0m10:59:51,552 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
&amp#27;[0m&amp#27;[0m10:59:51,704 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 3.0.0.Alpha4-redhat-1 ""Kenny"" stopped in 97ms
&amp#27;[0m
{noformat}

Standard Error Output:
{noformat}
Exception in thread ""Thread-13"" java.lang.NullPointerException
	at org.wildfly.core.testrunner.Server.lambda$stop$0(Server.java:184)
	at java.lang.Thread.run(Thread.java:745)
{noformat}

*Expected results:*
No errors

*Additional info:*
Links to jenkins reports:
* https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Jobs/job/eap-7x-as-testsuite-test-core/40/testReport/
* https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-solaris/jdk=java18_default,label_exp=dev139-01-solaris10-sparc&&eap-sustaining&&solaris10&&sparc/41/testReport/",,,,,,,,,,,,,,,,JBEAP-5564,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1734,https://github.com/wildfly/wildfly-core/pull/1769,,,,,0.0,1.0,,1|i07u0n:,9223372036854775807,,,,,,,,,,,01/Sep/16 1:46 AM;olukas;Still fails on Solaris. See JBEAP-5564 for details.,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploying with force an unmanaged deployment makes it managed,WFCORE-1706,12642836,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,10/Aug/16 1:01 PM,11/Aug/16 11:40 AM,29/Nov/16 3:51 PM,11/Aug/16 11:40 AM,3.0.0.Alpha4,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"For an unmanaged deployment if you replace it using the CLI deploy command it becomes managed.
To reproduce:
{code:java}
deploy /home/ehsavoie/dev/wildfly/quickstart/kitchensink-ear/ear/target/wildfly-kitchensink-ear.ear --unmanaged
deploy /home/ehsavoie/dev/wildfly/quickstart/kitchensink-ear/ear/target/wildfly-kitchensink-ear.ear --unmanaged --force
{code}
After the second command the deployment is managed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1732,,,,,,0.0,1.0,,1|i07tlr:,9223372036854775807,,,,,,,,,,,10/Aug/16 1:02 PM;ehugonnet;The redeploy command created from the CLI passes the deployment content as a stream even if it there is the unmanaged flag thus making the new deployment managed.,,,,,,,,,,,,,,,,,,,,,,,,,,
"A system dependency path ""sun/security/provider/certpath"" is missing from wildfly's module.xml",WFCORE-1705,12642832,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dmlloyd,petervn1,petervn1,10/Aug/16 12:39 PM,17/Aug/16 4:17 PM,29/Nov/16 3:51 PM,,2.2.0.Final,,,,,,,,Modules,Server,,,,0,jboss,,,,,"There is a system dependency path ""sun/security/provider/certpath"" missing from modules\system\layers\base\sun\jdk\main\module.xml. This is causing class def not found exception when attempting to create an instance of a class from that namespace. The module contents (abbreviated) are shown below. Notice that the path to ""sun/security/provider/certpath"" is not listed in there:

{{<module xmlns=""urn:jboss:module:1.3"" name=""sun.jdk"">
    <resources>
        <!-- currently jboss modules has not way of importing services from
        classes.jar so we duplicate them here -->
        <resource-root path=""service-loader-resources""/>
    </resources>
    <dependencies>
        <module name=""sun.scripting"" export=""true""/>
        <system export=""true"">
            <paths>
...
                <path name=""sun/security/action""/>
                <path name=""sun/security/pkcs""/>
                <path name=""sun/security/x509""/>
                <path name=""sun/security""/>
                <path name=""sun/security/util""/>
                <path name=""sun/security/krb5""/>
                <path name=""sun/security/krb5/internal""/>
                <path name=""sun/security/pkcs11""/>
                <path name=""sun/security/provider""/>
...
            </paths>
            <exports>
                <include-set>
                    <path name=""META-INF/services""/>
                </include-set>
            </exports>
        </system>
    </dependencies>
</module>

}}Manually adding the missing system dependency path fixes the issue. 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07tkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the default protocol in connect command help message,WFCORE-1704,12642683,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,pkremens,pkremens,pkremens,10/Aug/16 2:39 AM,11/Aug/16 3:23 PM,29/Nov/16 3:51 PM,11/Aug/16 3:23 PM,3.0.0.Alpha4,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"Help message for connect command refers to old default protocol.
./cli/src/main/resources/help/connect.txt:  In this case, the default port will be 9990 and the default protocol will be http 
",,,,,,,,,,,,,,,,,,,,,JBEAP-4898,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1730,,,,,,0.0,0.0,,1|i07sp3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JVM resource handling of jvm-options should detect -D options and integrate with system-property logic,WFCORE-1703,12642495,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,orange-buffalo,orange-buffalo,09/Aug/16 1:56 AM,12/Aug/16 3:14 PM,29/Nov/16 3:51 PM,,2.2.0.Final,,,,,,,,Domain Management,,,,,0,,,,,,"It is not possible to set {{jboss.modules.system.pkgs}} property per server / server group in domain configuration. Even when the following configuration is added to {{host.xml}}:
{code:xml}
<server name=""server-one"" group=""main-server-group"">
  <jvm name=""default"">
    <jvm-options>
      <option value=""-Djboss.modules.system.pkgs=my.package""/>
...
{code}

It is overridden by configuration in {{domain.conf}}:

{noformat}
JAVA_OPTS=""$JAVA_OPTS -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS -Djava.awt.headless=true""
{noformat}

This is an issue for configuring third-party java agents per-server. A problem described in WFLY-895 adds to this. One should either add a whole bunch of things to _all_ jvms in domain in order to make agent work, or remove config from {{domain.conf}} to avoid overrides. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i07rl3:,9223372036854775807,,,,,,,,,Workaround Exists,"Working solution is to add the following for the server in {{host.xml}}:
{code:xml}
<server name=""server-one"" group=""main-server-group"">
  <system-properties>
    <property name=""jboss.modules.system.pkgs"" value=""my.package""/>
  </system-properties>
..
{code}","09/Aug/16 12:23 PM;brian.stansberry;Both the domain.xml server-group and host.xml server elements have ""system-properties"" child elements, which are the intended mechanism for setting system properties on the servers. Does using that mechanism take care of your issue?","10/Aug/16 2:10 AM;orange-buffalo;Thank you for your advice, Brian. It helped, properties defined via this mechanism are not overridden.

Just in case anyone else will face similar difficulties, working solution is to add the following for the server in {{host.xml}}:
{code:xml}
<server name=""server-one"" group=""main-server-group"">
  <system-properties>
    <property name=""jboss.modules.system.pkgs"" value=""my.package""/>
  </system-properties>
..
{code}","10/Aug/16 9:25 AM;brian.stansberry;Great; glad it works. I'll leave this open because even though the intended use is to use the system-properties configuration element, having the jvm option logic detect and deal with -D options is a valid improvement.",,,,,,,,,,,,,,,,,,,,,,,,
WF Core StringBytesLengthValidator should not use error message considering characters,WFCORE-1702,12642636,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,ochaloup,brian.stansberry,09/Aug/16 10:53 AM,11/Aug/16 11:39 AM,29/Nov/16 3:51 PM,11/Aug/16 11:39 AM,,,,,,,3.0.0.Alpha5,,Domain Management,,,,,0,,,,,,"Current implementation of class {{StringBytesLengthValidator}} which is used by {{TransactionSubsystemRootResourceDefinition}} for validation of {{node-identifier}} element prints error message in format

{code}
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[356,13]
Message: ""WFLYCTL0112: '' is an invalid value for parameter node-identifier. Values must have a maximum length of 23 characters""
{code}

but the validator does not count characters of the string but bytes of the string. Then could occur if some none-ascii character are part of the {{node id}} that the string has length smaller than {{23}} but the message says that it's bigger.",,,,,,,,,,,,,,,,JBEAP-5588,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1733,,,,,,0.0,1.0,,1|i07sf3:,9223372036854775807,,,,"Add the node identifier attribute under transaction subsystem and start the server. The identifier string length is 23 but serve won't be started. If system default encoding is {{UTF-8}}.

The identifier needs to be composed from characters e.g. {{U+10348}} as mentioned on wikipedia page https://en.wikipedia.org/wiki/UTF-8
_(jira does not support this character to be pasted directly here)_

{code}
<core-environment node-identifier="""">
{code}",,,,,,,09/Aug/16 10:55 AM;brian.stansberry;The fix for this is just a new error message method that say 'bytes' instead of 'characters'.,,,,,,,,,,,,,,,,,,,,,,,,,,
Inefficient usage of map iterators,WFCORE-1699,12642420,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,rsvoboda,rsvoboda,rsvoboda,08/Aug/16 8:45 AM,11/Aug/16 11:03 AM,29/Nov/16 3:51 PM,11/Aug/16 11:03 AM,3.0.0.Alpha4,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"Inefficient usage of map iterators

{code}
Map<String, CommandArgument> options = getDynamicOptions(ctx);
for (String k : options.keySet()) {
   args.add(options.get(k));
}
{code}
can be replaced with {{args.addAll(getDynamicOptions(ctx).values());}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1728,,,,,,0.0,0.0,,1|i07r4v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI shutdown command completion shouldn't propose headers ,WFCORE-1698,12642201,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,aloubyansky,jdenise,jdenise,05/Aug/16 11:32 AM,05/Aug/16 11:32 AM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,Implementation and help don't mention the headers. It shouldn't appear in completion.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07q3z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Not displaying all possibilities for FS completion breaks from the command,WFCORE-1697,12642100,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,pkremens,pkremens,05/Aug/16 1:48 AM,06/Sep/16 6:25 PM,29/Nov/16 3:51 PM,06/Sep/16 6:25 PM,3.0.0.Alpha4,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"Terminal gets cleared in case user select not to display all possibilities during FS completion.

*my use-case*
{noformat}
[disconnected /] module add --name=org.wildfly.extension.blocker-test 
--dependencies=org.jboss.staxmapper,org.jboss.as.controller,org.jboss.msc 
--resources=~/help/test-extension.jar --module-root-dir=../../../<TAB>  
Display all 103 possibilities? (y or n)<n>
[disconnected /] 
{noformat}
*reproduce*
_actual_
{noformat}
[disconnected /] patch apply /etc/<TAB>
Display all 299 possibilities? (y or n)<n>
[disconnected /]
{noformat}
_expected_
{noformat}
[disconnected /] patch apply /etc/<TAB>
Display all 299 possibilities? (y or n)<n>
[disconnected /] patch apply /etc/
{noformat}
",,,,,,,,,,,,,,,,JBEAP-5556,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i07pjr:,9223372036854775807,,,,,,,,,,,"31/Aug/16 6:35 AM;thofman;PRs: https://github.com/aeshell/aesh/pull/231, https://github.com/aeshell/aesh/pull/230",06/Sep/16 6:25 PM;brian.stansberry;Fixed via WFCORE-1753 aesh upgrade.,,,,,,,,,,,,,,,,,,,,,,,,,
Echo tab completion suggests variables without $ prefix,WFCORE-1695,12641871,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jdenise,mschvarc,mschvarc,04/Aug/16 4:59 AM,25/Oct/16 12:13 PM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,"*Description:*
echo command prints all variables in tab auto-complete even without typing $ prefix
This duplicates functionality of 'set' with no arguments. 

*Steps to reproduce*
{code:bash}
[disconnected /] set myvar1=value1
[disconnected /] set myvar2=value2
[disconnected /] set
myvar1=value1
myvar2=value2
{code}

*Actual*

{code:bash}
[disconnected /] echo <TAB>
--help  myvar1  myvar2   #should not suggest variables
[disconnected /] echo $<TAB>myvar<TAB> #expected, auto-completes with $prefix
myvar1  myvar2  
[disconnected /] echo myvar<TAB> #autocompletes variable without $prefix
myvar1  myvar2  
{code}

*Expected*

{code:bash}
[disconnected /] echo <TAB>
--help
[disconnected /] echo $<TAB>myvar<TAB>
myvar1  myvar2  
[disconnected /] echo myvar<TAB> #does not suggest anything
{code}


",,,,,,,,,,,,,,,,JBEAP-5545,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07om7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WFLYCTL0357 warning upon undeploying any deployment,WFCORE-1687,12641614,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,simkam,simkam,02/Aug/16 10:41 AM,30/Aug/16 4:04 PM,29/Nov/16 3:51 PM,15/Aug/16 11:57 AM,3.0.0.Alpha4,,,,,,3.0.0.Alpha6,,Server,,,,,0,,,,,,"EAP produces following warning upon undeployment:
{code}WARN  [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []{code}

The warning is produced for both managed and unmanaged deployments.",,,,,,,,,,,,WFCORE-1577,,,,JBEAP-5495,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/962171#962171,,,https://github.com/wildfly/wildfly-core/pull/1739,,,,,,0.0,1.0,,1|i07n67:,9223372036854775807,,,,,,,,,,,"09/Aug/16 2:21 AM;soul2zimate;After fix in WFCORE-1577,  in [DeploymentHandlerUtil.java|https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/DeploymentHandlerUtil.java#L327], it passed a new Notification with empty address {{resourceAddress}} to context.emit() which causes this warning in AbstractOperationContext.checkUndefinedNotification(); 
",,,,,,,,,,,,,,,,,,,,,,,,,,
Standalone server logs FATAL message on --help,WFCORE-1686,12641600,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jason.greene,pkremens,pkremens,02/Aug/16 9:18 AM,24/Aug/16 5:22 PM,29/Nov/16 3:51 PM,11/Aug/16 7:58 PM,3.0.0.Alpha4,,,,,,3.0.0.Alpha5,,Server,,,,,0,,,,,,"{noformat}
15:07:56,793 FATAL [org.jboss.as.server] (main) WFLYSRV0239: Aborting with exit code 1
{noformat}
appears at the end of help for standalone server.

*reproduce*
{noformat}
bash standalone.sh --help
{noformat}

The issues is a regression against 7.0.0",,,,,,,,,,,,WFCORE-1498,,,,JBEAP-5502,,,,,PRODMGT-1598,,,,,,02/Aug/16 11:16 PM;soul2zimate;WFCORE-1686.patch;https://issues.jboss.org/secure/attachment/12407891/WFCORE-1686.patch,,,,,,,,,,,,,+,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1731,,,,,,1.0,4.0,,1|i07n3b:,9223372036854775807,,,,,,,,,,,"02/Aug/16 11:27 PM;soul2zimate;Change made in WFCORE-1498
In this case, it's an intentional Aborting due to {{serverEnvironment}} is null in [Main.java|https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/Main.java] It's better to exit without logging the FATAL message into neither log nor console.
Hi [~brian.stansberry], Is this patch ok to you ? ","09/Aug/16 12:41 PM;brian.stansberry;That doesn't look right. An ExitLogger should not be calling System.exit(), it should only do logging.","09/Aug/16 12:57 PM;brian.stansberry;For a good fix for this we need to distinguish the true failure cases that cause determineEnvironment to return null from the non-failure cases like --help. That should probably be handled in determineEnvironment itself, which would mean changing its return type.

I wouldn't be surprised if a host controller has a similar problem, although I haven't investigated.",10/Aug/16 4:17 AM;soul2zimate; I linked a pull request based on suggestion above. thanks,,,,,,,,,,,,,,,,,,,,,,,
Empty lines between tab completion suggestions on Windows,WFCORE-1684,12641338,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,aloubyansky,pkremens,pkremens,01/Aug/16 4:26 AM,01/Aug/16 4:26 AM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,"I noticed that CLI put empty lines between lines with suggested values once the Windows terminal is set to maximal width. Issue appears *only of the CLI is connected to the EAP running in domain* mode.

*reproduce*
\- start EAP in domain mode
\- open a new terminal window, manually set the terminal width to maximal allowed value, but do not maximize the window
\- connect CLI to the running server and pres the Tab key
{noformat}
[domain@localhost:9990 /]
:                   clear               data-source         echo                if                  pwd                 reload              shutdown            unset

alias               command             deploy              echo-dmr            jdbc-driver-info    quit                rollout-plan        try                 version

batch               connect             deployment-info     help                ls                  read-attribute      run-batch           unalias             xa-data-source

cd                  connection-info     deployment-overlay  history             patch               read-operation      set                 undeploy
{noformat}
I was able to reproduce the issue on W2K8 and W2K12 servers.",,,,,,,,,,,,,,,,JBEAP-5477,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07lnj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Home and End keys doesn't work on Windows,WFCORE-1683,12641329,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,pkremens,pkremens,01/Aug/16 3:57 AM,07/Sep/16 11:45 AM,29/Nov/16 3:51 PM,07/Sep/16 11:45 AM,,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"Home and End keys doesn't work properly on Windows.

*actual*
{noformat}
[disconnected /] echo<HOME> test
[disconnected /] echoαG[] test
[disconnected /] echo<END> test
[disconnected /] echoαO[] test
{noformat}
*expected*
{noformat}
[disconnected /] echo<HOME> test
[disconnected /] []echo test
[disconnected /] echo<END> test
[disconnected /] echo test[]
{noformat}",,,,,,,,,,,,,,,,JBEAP-5475,,,,,AESH-387,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i07llj:,9223372036854775807,,,,,,,,,,,07/Sep/16 11:24 AM;pkremens;[~aloubyansky] This one can be closed (not sure whether I can/should change the state of upstream issues thus letting you know),"07/Sep/16 11:45 AM;aloubyansky;[~pkremens], thanks for confirming.

The bug has been fixed in Aesh 0.66.9. Current version used by the core is 0.66.10.",,,,,,,,,,,,,,,,,,,,,,,,,
Missleading tab completion for edit-batch-line command,WFCORE-1682,12641326,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,pkremens,pkremens,01/Aug/16 3:36 AM,01/Sep/16 8:59 AM,29/Nov/16 3:51 PM,01/Sep/16 8:59 AM,,,,,,,3.0.0.Alpha6,,CLI,,,,,0,,,,,,"Tab completion for edit-batch-list command suggest to use --line-number as a command option, but that is not how the command works.

*command usage*
{noformat}
[standalone@localhost:9990 /] batch 
[standalone@localhost:9990 / #] :read-resource
[standalone@localhost:9990 / #] list-batch 
#1 /:read-resource
[standalone@localhost:9990 / #] edit-batch-line 1 :read-attribute(name=launch-type)
#1 :read-attribute(name=launch-type)
[standalone@localhost:9990 / #] list-batch 
#1 :read-attribute(name=launch-type)
{noformat}
*actual*
{noformat}
[standalone@localhost:9990 / #] edit-batch-line <TAB>
[standalone@localhost:9990 / #] edit-batch-line --<TAB>
--help  --line-number
[standalone@localhost:9990 / #] edit-batch-line --line-number=1 :read-attribute(name=launch-type)
Failed to parse line number '--line-number=1': For input string: ""--line-number=1""
{noformat}
{{--line-number}} shouldn't be offered by tab completion for the command.
Misleading tab completion ends up with syntax error.
*expected*
{noformat}
[standalone@localhost:9990 / #] edit-batch-line <TAB>
--help
{noformat}

The issue is a regression against EAP 7.0.0 release.",,,,,,,,,,,,WFCORE-1487,JBEAP-5313,JBEAP-4270,JBEAP-5599,JBEAP-5473,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1720,,,,,,0.0,11.0,,1|i07lkv:,9223372036854775807,,,,,,,,,,,"01/Aug/16 7:54 AM;pkremens;Tab completion for {{if}} command is affected as well
{noformat}
[domain@10.16.179.18:9990 /] if  --<TAB>
--condition  --help
{noformat}
however {{--condition}} is a not valid argument for the command
{noformat}
ARGUMENTS

    --help        - prints this description.
    
    command_line  - CLI command or an operation whose response
                    should be evaluated to determine which
                    block of the if-else should be executed next;
    
    condition_expression  - an expression that evaluates the response
                            and based on which the next block of the
                            if-else control flow to be executed is chosen.
{noformat}","01/Aug/16 9:00 AM;jdenise;WFCORE-1487 was logged and fixed in order to change the behaviour of completion to expose unnamed internal property name. So what you are observing seems the new expected behaviour.
I also think that it is misleading.

","01/Aug/16 12:15 PM;jdenise;The core commands tha tare impacted by the change of behaviour:
connect command, --controller
edit-batch-line, --line-number
holdback-batch, --name
move-batch-line, --current and --new
remove-batch-line, --line
if, --condition
patch, --patch-id
","02/Aug/16 1:37 AM;pkremens;WFCORE-1487 fix works fine for some of the commands (connect, patch)
{noformat}
[disconnected /] connect --controller=127.0.0.1
[standalone@127.0.0.1:9990 /]
{noformat}
but is problematic for the rest of them (\*batch\*, if)
{noformat}
[standalone@127.0.0.1:9990 / #] move-batch-line --current=1 --new=2
Missing line number.
{noformat}","02/Aug/16 4:25 AM;jdenise;Petr,
this bug description mandates issue in completion. The completion seems to work properly right? Now a property name is proposed when there is no completer.
The problem seems at the command execution level do yo confirm?
","02/Aug/16 6:38 AM;jdenise;The side effects of WFCORE-1487 are actually in completion too. There is now a mismatch in the completion logic between indexed and named arguments. 
For example: edit-batch-line --line-number=1 :<TAB>
the completer for the line-number (null) is returned instead of the completer for the line.

- The documentation of the commands have not been updated to reflect that the arguments names can be used (look at connect help for example).","02/Aug/16 7:23 AM;pkremens;One more issue with completion I didn't notice before is that argument is suggested multiple times
{noformat}
[disconnected /] patch rollback --patch-id=my-custom-patch --p<TAB>                                      
--patch-id  --patch-stream=  --preserve= 
{noformat}","02/Aug/16 8:07 AM;jdenise;I would vote for reverting fix for WFCORE-1487 and try to find a way to help user dealing with this kind of argument (no completer and no name).
",02/Aug/16 8:44 AM;aloubyansky;We should revert WFCORE-1487 and JBEAP-4270. Apparently it introduces more problems than it fixes. There is a valid reason behind those issues but it seems they have to addressed differently.,31/Aug/16 8:55 PM;brian.stansberry;Did the revert resolve this?,"01/Sep/16 4:02 AM;jdenise;Yes, this problem has been fixed.
",,,,,,,,,,,,,,,,
Tab completion for echo-dmr command is broken,WFCORE-1680,12641250,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,pkremens,pkremens,29/Jul/16 8:34 AM,11/Aug/16 6:29 PM,29/Nov/16 3:51 PM,11/Aug/16 6:29 PM,,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"Tab completion for echo-dmr command doesn't work.

To reproduce, start the standalone server and connect with CLI
*actual 3.0.0.Alpha5-SNAPSHOT 77673c5*
{noformat}
[standalone@localhost:9990 /] echo-dmr /sub[TAB]
core-service  deployment  deployment-overlay  extension  interface  path  socket-binding-group  subsystem  system-property
[standalone@localhost:9990 /] echo-dmr /subsystem=log[TAB]
core-service  deployment  deployment-overlay  extension  interface  path  socket-binding-group  subsystem  system-property
{noformat}

*expected*
{noformat}
[standalone@localhost:9990 /] echo-dmr /sub[TAB]
[standalone@localhost:9990 /] echo-dmr /subsystem=
[standalone@localhost:9990 /] echo-dmr /subsystem=log[TAB]
[standalone@localhost:9990 /] echo-dmr /subsystem=logging
{noformat}

The issue is not reproducible with 2.2.0.CR7 (EAP 7.1.0.DR1).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1717,,,,,,0.0,2.0,,1|i07l4v:,9223372036854775807,,,,,,,,,,,"01/Aug/16 6:08 AM;jdenise;This is caused by WFCORE-1627. The cursor value is now used to extract the piece of line to complete. Some completers (such as EchoDMR one) provides 0 for the cursor value although buffer.length should be passed. I suspect that some other completers are affected. I will have to check the various calls to completers.
","01/Aug/16 9:10 AM;jdenise;Looking at the src code, it seems that deployment-overlay, echo-dmr, batch-edit-line, if commands are passing a cursor value of 0.
OperationRequestCompleter and CommandCompleter are possibly impacted too.

",,,,,,,,,,,,,,,,,,,,,,,,,
jconsole wildfly cli tab plugin not reacting to connect/disconnect button,WFCORE-1679,12641202,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,elguardian,elguardian,29/Jul/16 4:50 AM,12/Aug/16 3:13 PM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,JMX,,,,0,,,,,,"The current plugin does not reac to the connect/dissconnect button. causing an error in the next use case:

1) loing
2) show the jconsole tb
3) disconnect jconsole
4) connect jconsole again

try to execute anything jconsole tab plugin",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07kwf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
read-attribute --node is badly handled,WFCORE-1676,12640915,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,27/Jul/16 12:30 PM,11/Aug/16 6:27 PM,29/Nov/16 3:51 PM,11/Aug/16 6:27 PM,,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"read-attribute --node=interface=public namespaces should fail and fails
read-attribute namespaces --node=interface=public should fail and doesn't
read-attribute --node=interface=public init-address should succeed and succeeds
read-attribute init-address --node=interface=public should succeed and fails

This is due to some logic in place to retrieve the node value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1708,,,,,,0.0,0.0,,1|i07jaf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded server started non-modular use only first --jboss-home for FS paths,WFCORE-1675,12640738,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,luck3y,luck3y,luck3y,26/Jul/16 4:54 PM,27/Jul/16 2:31 PM,29/Nov/16 3:51 PM,27/Jul/16 2:31 PM,,,,,,,,,CLI,Domain Management,,,,0,,,,,,"First  --jboss-home value passed is always used to FS paths resolution. The issue affects embed-server started using jboss-cli-client.jar.

*reproduce*
start embed server using wf1, stop it, start another embed server using wf2
{noformat}
/home/workspace3
├── wf1
│   └── wildfly-10.0
└── wf2
    └── wildfly-10.0

$ pwd ; java -jar jboss-cli-client.jar 
[disconnected /] embed-server --jboss-home=~/workspace3/wf1/wildfly-10.0
[standalone@embedded /] stop-embedded-server 
[disconnected /] embed-server --jboss-home=~/workspace3/wf2/wildfly-10.0
{noformat}
*actual*
_wf1_ is used
{noformat}
...
                ""name"" => ""jboss.server.config.dir"",
                ""path"" => ""/home/workspace3/wf1/wildfly-10.0/standalone/configuration"",
...
{noformat}",,,,,,,,,,,,,,,,JBEAP-5382,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07ic7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
security-realms that defer to jaas cannot load login-modules from org.jboss.as.security ,WFCORE-1671,12634908,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gaol,dehort,dehort,23/Jun/16 5:55 PM,28/Jul/16 1:24 PM,29/Nov/16 3:51 PM,28/Jul/16 1:24 PM,,,,,,,3.0.0.Alpha4,,Security,Server,,,,0,downstream_dependency,,,,,"security-realms that defer to jaas cannot load login-modules from org.jboss.as.security.  The configuration looks like the following:

            <security-realm name=""ManagementRealm"">
                <authentication>
                    <jaas name=""jmx-console""/>
                </authentication>
                <authorization map-groups-to-roles=""false"">
                    <properties path=""mgmt-groups.properties"" relative-to=""jboss.server.config.dir""/>
                </authorization>
            </security-realm> 



                <security-domain name=""jmx-console"" cache-type=""default"">
                    <authentication>
                        <login-module code=""RealmUsersRoles"" flag=""required"">
                            <module-option name=""rolesProperties"" value=""file://${jboss.server.config.dir}/rolesmapping.properties""/>
                            <module-option name=""usersProperties"" value=""file://${jboss.server.config.dir}/rolesmapping.properties""/>
                        </login-module>
                    </authentication>
                </security-domain>


The following error is logged during the authentication attempt:

2016-06-23 11:17:27,680 DEBUG [org.jboss.security] (management task-1) PBOX00206: Login failure: javax.security.auth.login.LoginException: unable to find LoginModule class: org.jboss.as.security.RealmDirectLoginModule from [Module ""org.jboss.as.server:main"" from local module loader @42f30e0a (finder: local module finder @24273305 (roots: /home/dehort/dev/java/jboss-eap-7.0.0/modules,/home/dehort/dev/java/jboss-eap-7.0.0/modules/system/layers/base))]
	at javax.security.auth.login.LoginContext.invoke(LoginContext.java:794)
	at javax.security.auth.login.LoginContext.access$000(LoginContext.java:195)
	at javax.security.auth.login.LoginContext$4.run(LoginContext.java:682)
	at javax.security.auth.login.LoginContext$4.run(LoginContext.java:680)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
	at javax.security.auth.login.LoginContext.login(LoginContext.java:587)
	at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:406)
	at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:345)
	at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:323)
	at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:146)
	at org.jboss.as.security.service.SimpleSecurityManager.authenticate(SimpleSecurityManager.java:406)
	at org.jboss.as.security.service.SimpleSecurityManager.authenticate(SimpleSecurityManager.java:367)
	at org.jboss.as.security.service.SimpleSecurityManager.authenticate(SimpleSecurityManager.java:347)
	at org.jboss.as.domain.management.security.JaasCallbackHandler.handle(JaasCallbackHandler.java:174)
	at org.jboss.as.domain.management.security.SecurityRealmService$1.handle(SecurityRealmService.java:175)
	at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:162)
	at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:141)
	at io.undertow.security.impl.BasicAuthenticationMechanism.authenticate(BasicAuthenticationMechanism.java:161)
	at org.jboss.as.domain.http.server.security.AuthenticationMechanismWrapper.authenticate(AuthenticationMechanismWrapper.java:52)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:233)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:250)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:219)
	at io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:121)
	at io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:96)
	at io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:89)
	at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:50)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:792)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



",,,,,,,,,,,,,,,,,,,,,,,,WFLY-6886,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1704,,,,,,0.0,4.0,,1|i06kb3:,9223372036854775807,,,,,,,,,,,"22/Jul/16 3:37 PM;chris.dolphy;A workaround is to add `module=""org.jboss.as.domain""` to the login modules from org.jboss.as.domain.

<login-module code=""RealmDirect"" flag=""sufficient"" module=""org.jboss.as.security"">

However, this wasn't previously required in EAP 6 so restoring that functionality would be nice.
","26/Jul/16 6:31 AM;gaol;[~brian.stansberry] My plan is to add the dependency:{{<module name=""org.jboss.as.security"" optional=""true"" services=""import""/>}} in module: {{core-feature-pack/src/main/resources/modules/system/layers/base/org/jboss/as/server/main/module.xml}}.

The dependency was removed when fixing another Jira: WFCORE-114, do you see any problem if I add the dependency back?","26/Jul/16 12:19 PM;brian.stansberry;[~gaol] I think it should be ok. The one concern I have is there is some ServiceLoader stuff that looks like leftover cruft in full's security module. I don't believe it's needed, but I'm concerned that if we bring this module dependency back it may end up interfering somehow. So I've sent up a PR to remove it and will see if that breaks CI in some way:

https://github.com/wildfly/wildfly/pull/9067

If it's ok then I'll merge it and that change should be part of any backport of this to EAP.","27/Jul/16 12:09 AM;gaol;The result of above PR to full is green, so I opened the PR: https://github.com/wildfly/wildfly-core/pull/1704 for this to add the dependency back in core.",,,,,,,,,,,,,,,,,,,,,,,
SERVER_SSL constraint is not modifiable in a mixed domain,WFCORE-1669,12640536,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,brian.stansberry,brian.stansberry,25/Jul/16 10:34 AM,26/Jul/16 9:37 AM,29/Nov/16 3:51 PM,26/Jul/16 9:37 AM,,,,,,,2.2.0.CR9,3.0.0.Alpha4,Domain Management,,,,,0,,,,,,"This is related to WFCORE-1649; it's the specific case that led to the discovery of WFCORE-1649.

1649 is meant to track more general improvements; this one is for a specific fix for the SERVER_SSL issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i07h8f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
org.jboss.modules.ModuleNotFoundException when setting annotations=true in jboss-deployment-structure.xml,WFCORE-1668,12639986,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,bmaxwell,bmaxwell,20/Jul/16 8:47 PM,03/Nov/16 6:37 AM,29/Nov/16 3:51 PM,25/Jul/16 7:02 PM,,,,,,,3.0.0.Alpha4,,Server,,,,,0,,,,,,"{code}
helloWorld.ear 
 - helloWorld-ejb.jar
    - HelloBean - @Stateless EJB extends AbstractBean
 - lib 
  - helloWorld-api.jar
    - META-INF
      - jandex.idx
    - Hello - EJB interface
    - AbstractBean - abstract class which has @PostConstruct and implements Hello

helloWorld2.ear
 - helloWorld2-ejb.jar
   - HelloBean2 - @Startup @Singleton extends AbstractBean
 - META-INF
  - jboss-deployment-structure.xml depends on deployment.helloWorld.ear export=true annotations=true
{code}


To have HelloBean2 pickup the annotations on AbstractBean, jandex.idx was generate for the helloWorld-api.jar and then the j-d-s.xml file dependency has export=true so helloWorld2-ejb.jar sees the classes and annotations=true set to pull in the annotations.

When annotations is not set or annotations=false the helloWorld2.ear deploys (but the @PostConstruct is not run since annotations are not enabled).  When annotations=true is set, helloWorld2.ear fails to deploy with the exception below.

It looks like the annotations handling is possibly out of order as the j-d-s.xml dependency should ensure the deployment.helloWorld.ear module is there (which it does when annotations=false, but when true it seems the module is not ready)



{code}
19:44:44,659 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.deployment.unit.""helloWorld2.ear"".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit.""helloWorld2.ear"".PARSE: WFLYSRV0153: Failed to process phase PARSE of deployment ""helloWorld2.ear""
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:154)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: org.jboss.modules.ModuleNotFoundException: deployment.helloWorld.ear:main
	at org.jboss.as.server.deployment.annotation.CompositeIndexProcessor.deploy(CompositeIndexProcessor.java:91)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:147)
	... 5 more
Caused by: org.jboss.modules.ModuleNotFoundException: deployment.helloWorld.ear:main
	at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:223)
	at org.jboss.as.server.deployment.annotation.CompositeIndexProcessor.deploy(CompositeIndexProcessor.java:81)
	... 6 more
{code}",,,,,,,,,,,,,,,,JBEAP-5336,,,,,,,,,,,20/Jul/16 8:47 PM;bmaxwell;reproducer.zip;https://issues.jboss.org/secure/attachment/12407478/reproducer.zip,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1358556,,,,,Perform,,,,,,,,,,,,,,,,,,,1.0,5.0,,1|i07e3r:,9223372036854775807,,,,,,,,,,"A workaround is putting a jboss-all.xml in helloWorld2.ear/META-INF/ to make a blanket dependency on helloWorld.ear so that helloWorld2.ear is not started until after helloWorld.ear, but this should not be necessary:

{code}
<jboss umlns=""urn:jboss:1.0"">
  <jboss-deployment-dependencies xmlns=""urn:jboss:deployment-dependencies:1.0"">
    <dependency name=""helloWorld.ear"" />
  </jboss-deployment-dependencies>
</jboss>
{code}","21/Jul/16 8:54 AM;ctomc;So issue is that dependency between modules is not introduces only by defining jboss-module-structure.xml claspath deps?
That is somewhat known/expected behavior, that is why proper dependencies ware introduces with jboss-deployment-dependencies in jboss-all.xml","21/Jul/16 11:59 PM;bmaxwell;The issue is if I have framework.ear which contains say an AbstractBean , and app1.ear declares a dependency on framework.ear , then app1.ear can see AbstractBean, as the dependency is ensuring the classes are available.  But if you change the flag of the module dependency from annotations=false to annotations=true it logs an error that deployment.framework.ear module does not exist.  So it seems like since it works if it is not told to scan for annotations but then fails if told to look for annotations.","24/Jul/16 9:35 PM;swd847;The issue is that annotation processing happens much earlier in the deployment processing, so dependencies are not established yet. ",02/Sep/16 9:39 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1358556|https://bugzilla.redhat.com/show_bug.cgi?id=1358556] from ASSIGNED to POST,04/Oct/16 8:05 AM;jira-bugzilla-migration;Ivo Hradek <ihradek@redhat.com> changed the Status of [bug 1358556|https://bugzilla.redhat.com/show_bug.cgi?id=1358556] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
After a full-replace-deployment operation on a managed domain in a composite operation onf of the enabled timestamp is not updated,WFCORE-1667,12640349,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,jamezp,jamezp,23/Jul/16 12:49 AM,25/Jul/16 11:24 AM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"When executing a {{full-replace-deployment}} in a composite operation the deployment associated with the first step does not get it's {{enabled-time}} attribute updated. The second one always has an updated attribute.

I've created a test to show the odd behavior, https://github.com/wildfly/wildfly-core/commit/452e2149571c87ff4cfcdfbd78c39d9d994461b0. Note that if you change the order of the archive arguments on the redeploy you'll see the failure happens on the second deployment instead of the first.

Do note that this test may not be needed, but it was an easy way to show what the issue is.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i07ghj:,9223372036854775807,,,,See test commit https://github.com/wildfly/wildfly-core/commit/452e2149571c87ff4cfcdfbd78c39d9d994461b0,,,,,,,23/Jul/16 12:59 AM;jamezp;Also note the test may require a short sleep before the reads of the hash to ensure the deployment is complete. I've had it fail twice now with unmatched byte arrays.,,,,,,,,,,,,,,,,,,,,,,,,,,
Remoting deadlock in org.jboss.as.testsuite.integration.secman.subsystem.MinimumPermissionsTestCase,WFCORE-1660,12637869,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dmlloyd,brian.stansberry,brian.stansberry,06/Jul/16 9:41 PM,20/Jul/16 3:55 PM,29/Nov/16 3:51 PM,20/Jul/16 3:54 PM,2.2.0.CR8,,,,,,2.2.0.CR8,,,,,,,0,,,,,,"Hang in the WildFly full testsuite running a core 2.x-ignore test. No commits in 2.x-ignore that seem relevant. Both WildFly Core 2.x and master are using Remoting 4.0.21. Looking at the deadlock this appears to be a problem in remoting.

https://ci.wildfly.org/viewLog.html?buildTypeId=WF_WildFlyCore2xMasterIgnoreIntegration&buildId=20503

{code}
Found one Java-level deadlock:
=============================
""Remoting ""cli-client"" task-6"":
  waiting to lock monitor 0xbef755e0 (object 0xe60ca518, a java.lang.Object),
  which is held by ""main""
""main"":
  waiting to lock monitor 0xc6d1ea50 (object 0xe0fbcab8, a java.lang.Object),
  which is held by ""Remoting ""cli-client"" task-6""

Java stack information for the threads listed above:
===================================================
""Remoting ""cli-client"" task-6"":
	at org.jboss.remoting3.EndpointImpl$4.setResult(EndpointImpl.java:323)
	- waiting to lock <0xe60ca518> (a java.lang.Object)
	at org.jboss.remoting3.EndpointImpl$4.setResult(EndpointImpl.java:295)
	at org.xnio.IoUtils$ResultNotifier.handleDone(IoUtils.java:706)
	at org.xnio.IoUtils$ResultNotifier.handleDone(IoUtils.java:695)
	at org.xnio.IoFuture$HandlingNotifier.notify(IoFuture.java:208)
	at org.xnio.AbstractIoFuture$1.run(AbstractIoFuture.java:211)
	at org.xnio.IoUtils$2.execute(IoUtils.java:70)
	at org.xnio.AbstractIoFuture.runNotifier(AbstractIoFuture.java:354)
	at org.xnio.AbstractIoFuture.runAllNotifiers(AbstractIoFuture.java:233)
	at org.xnio.AbstractIoFuture.setResult(AbstractIoFuture.java:272)
	- locked <0xe0fbcab8> (a java.lang.Object)
	at org.xnio.FutureResult.setResult(FutureResult.java:79)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Authentication$2.run(ClientConnectionOpenListener.java:755)
	at org.jboss.remoting3.EndpointImpl$TrackingExecutor$1.run(EndpointImpl.java:731)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
""main"":
	at org.xnio.AbstractIoFuture.addCancelHandler(AbstractIoFuture.java:329)
	- waiting to lock <0xe0fbcab8> (a java.lang.Object)
	at org.xnio.FutureResult.addCancelHandler(FutureResult.java:69)
	at org.jboss.remoting3.remote.RemoteConnectionProvider.connect(RemoteConnectionProvider.java:211)
	at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:340)
	- locked <0xe60ca518> (a java.lang.Object)
	at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:276)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:393)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:381)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:83)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:114)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:257)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:71)
	- locked <0xe0fba058> (a org.jboss.as.protocol.ProtocolConnectionManager)
	at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:218)
	at org.jboss.as.cli.impl.CLIModelControllerClient.getOrCreateChannel(CLIModelControllerClient.java:179)
	- locked <0xddab9fe0> (a java.lang.Object)
	at org.jboss.as.cli.impl.CLIModelControllerClient$3.getChannel(CLIModelControllerClient.java:138)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:147)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:122)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:75)
	at org.jboss.as.cli.Util.validateRequest(Util.java:1147)
	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:72)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:753)
	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:163)
	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:187)
	at org.jboss.as.testsuite.integration.secman.subsystem.ReloadableCliTestBase.doCliOperation(ReloadableCliTestBase.java:46)
	at org.jboss.as.testsuite.integration.secman.subsystem.MinimumPermissionsTestCase.testFilePerm(MinimumPermissionsTestCase.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.jboss.arquillian.junit.Arquillian$8$1.invoke(Arquillian.java:370)
	at org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60)
	at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:116)
	at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
	at org.jboss.arquillian.container.test.impl.execution.ClientTestExecuter.execute(ClientTestExecuter.java:53)
	at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
	at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createTestContext(ContainerEventController.java:129)
	at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:92)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:130)
	at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:73)
	at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:136)
	at org.jboss.arquillian.junit.Arquillian$8.evaluate(Arquillian.java:363)
	at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:245)
	at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:422)
	at org.jboss.arquillian.junit.Arquillian.access$200(Arquillian.java:54)
	at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:259)
	at org.jboss.arquillian.junit.Arquillian$7$1.invoke(Arquillian.java:315)
	at org.jboss.arquillian.container.test.impl.execution.ClientBeforeAfterLifecycleEventExecuter.execute(ClientBeforeAfterLifecycleEventExecuter.java:99)
	at org.jboss.arquillian.container.test.impl.execution.ClientBeforeAfterLifecycleEventExecuter.on(ClientBeforeAfterLifecycleEventExecuter.java:72)
	at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
	at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
	at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createBeforeContext(ContainerEventController.java:124)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:92)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:130)
	at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:73)
	at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
	at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
	at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:116)
	at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.fireCustomLifecycle(EventTestRunnerAdaptor.java:159)
	at org.jboss.arquillian.junit.Arquillian$7.evaluate(Arquillian.java:311)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:204)
	at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:422)
	at org.jboss.arquillian.junit.Arquillian.access$200(Arquillian.java:54)
	at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:218)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:166)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:77)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:53)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:144)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

Found 1 deadlock.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i071ov:,9223372036854775807,,,,,,,,,,,14/Jul/16 1:04 PM;dmlloyd;This is definitely fixed in 5.x.  This is *probably* fixed in 4.1.x.  I'm looking into whether the fix is realistically backportable.,19/Jul/16 10:02 AM;dmlloyd;The Remoting 4.0.21 code relies on XNIO 3.4 for its lockless IoFuture.  I think WildFly Core 2.x needs to move to XNIO 3.4.,"20/Jul/16 3:53 PM;dmlloyd;Since the fix of this is/was to move wildfly-core to XNIO 3.4, I'm moving this back there again.",,,,,,,,,,,,,,,,,,,,,,,,
document missing commands examples,WFCORE-1659,12627146,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,,Done,jdenise,dhladky,dhladky,20/May/16 4:45 AM,20/Jul/16 10:27 AM,29/Nov/16 3:51 PM,20/Jul/16 10:27 AM,,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"Quoting https://engineering.redhat.com/rt/Ticket/Display.html?id=395596
{quote}
Hi,

I was looking for info and found this page
https://developer.jboss.org/wiki/CLINon-interactiveMode [Open URL]

which appears to have been edited some months ago by someone who removed
(?) all commands examples, leaving only the explaining text...

clicking the ""versions"" link show the examples removal...
https://developer.jboss.org/wiki/CLINon-interactiveMode/diff?secondVersionNumber=3 [Open URL]

is it ok or is this an obsolete page? Is there an updated version of
the page?

Thanks
-- 
*Marco*{quote}

I can see some examples there, however the quote tags reminds the page was probably migrated and the migration did not work well. 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|i05ahb:,9223372036854775807,,,,,,,,,,,20/May/16 9:26 AM;paul.robinson;[~dhladky] Can you explain the motivation for putting this in DEVELOPER?,23/May/16 4:09 AM;dhladky;It looks like incorrect migration to Awestruct to me. Feel free to move the ticket wherever  you see fit. ,24/May/16 9:05 AM;paul.robinson;It's not an Awestruct page though. This is why I am confused.,20/Jul/16 5:49 AM;paul.robinson;This issue refers  to some AS7 documentation. I'm not sure where the right place to move this issue to.,"20/Jul/16 10:00 AM;brian.stansberry;Thanks, Paul. I moved it to WFCORE which is where the CLI lives now.

[~jdenise] I have a vague recollection of scanning past a mail or something from you in the last couple days mentioning some corrupted doc. Was this it? If you've fixed it you can resolve this against Fix Version ""No Release"".","20/Jul/16 10:27 AM;jdenise;I added back the content, it was due to wrong formatting.",,,,,,,,,,,,,,,,,,,,,
JBEAP-2830 enhancements were not forward ported to upstream,WFCORE-1658,12639183,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,treblereel,brian.stansberry,brian.stansberry,18/Jul/16 12:47 AM,22/Jul/16 3:10 PM,29/Nov/16 3:51 PM,22/Jul/16 3:10 PM,,,,,,,3.0.0.Alpha4,,Logging,,,,,0,,,,,,"JBEAP-2830 includes changes to the logging subsystem's template.xml that EAP full relies upon. These were never forward ported to upstream, meaning that EAP builds can't consume core 2.2 or later.

I believe there's no problem applying the changes. EAP will use one of the supplements while WildFly will not.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i079db:,9223372036854775807,,,,,,,,,,,"20/Jul/16 9:29 AM;brian.stansberry;I don't think this supplement should be called ""full-ha"" as that's the name of the thing that uses it, not an identifying characteristic of the supplement itself. Which is a bit off, and is confusing in this case since in WildFly standalone-full-ha.xml doesn't actually use this supplement. Perhaps ""no-console""?",20/Jul/16 3:42 PM;brian.stansberry;I changed the Fix Version on this to 3 as this doesn't need to be in 2.2 and we don't want further changes to 2.2 at this stage.,,,,,,,,,,,,,,,,,,,,,,,,,
Confusing tab completion for adding a module dependencies,WFCORE-1657,12639038,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,spyrkob,spyrkob,15/Jul/16 7:51 AM,19/Sep/16 1:13 PM,29/Nov/16 3:51 PM,19/Sep/16 1:13 PM,2.2.0.CR7,3.0.0.Alpha3,,,,,3.0.0.Alpha9,,CLI,,,,,0,,,,,,"Using tab completion for adding a module dependencies with {{module add}} command could lead to invalid module.xml as CLI prompt user to use module name with ""system.layers.base"" prefix, which is not a part of module name.

*reproduce*
Add a new module via {{module add}} command, use tab-completion for dependencies
{noformat}
module add --name=<name> --resources=<path_to_jar> --dependencies=<TAB>
module add --name=<name> --resources=<path_to_jar> --dependencies=system.<TAB>
module add --name=<name> --resources=<path_to_jar> --dependencies=system.layers.<TAB>
module add --name=<name> --resources=<path_to_jar> --dependencies=system.layers.base.<TAB>
asm  ch  com  gnu  ibm  io  javaee  javax  net  nu  org  sun 
{noformat}
this way something like following is generated in module.xml file
{code:xml}
<dependencies>
    <module name=""system.layers.base.org.jboss.as.controller""/>
</dependencies>
{code}
however correct module name is {{org.jboss.as.controller}}

",,,,,,,,,,,,,,,,JBEAP-5163,,,,,MODULES-262,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1680,,,,,,0.0,0.0,,1|i078kf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log4j per logging deployment configuration errors are swallowed,WFCORE-1656,12638927,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,14/Jul/16 12:19 PM,14/Jul/16 12:19 PM,29/Nov/16 3:51 PM,,,,,,,,,,Logging,,,,,0,,,,,,Anything logged through log4j's {{org.apache.log4j.helpers.LogLog}} seems to be swallowed. This includes debug messages if log4j debugging is turned on as well as any warnings or errors found during configuration are not printed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i077w7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
verbose patch info should match in offline and online modes,WFCORE-1655,12638911,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,14/Jul/16 11:30 AM,25/Jul/16 7:04 PM,29/Nov/16 3:51 PM,25/Jul/16 7:04 PM,,,,,,,3.0.0.Alpha4,,CLI,Patching ,,,,0,,,,,,"When the CLI is connected to the controller, patch info reflects the outcome of read-resource operation. It could be basic info or extended (--verbose).
In the offline mode though, the only information available is the basic one. It is actually limited by the tool's API, which means it never meant to support --verbose.
This difference is not reflected in the help content of the command and simply looks like an inconsistent behavior of the same command depending on the connection status.

Another issue with the offline mode is that, the current version was not propagated to the CLI and would always read ""Unknown"" for the user.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1679,,,,,,0.0,0.0,,1|i077tb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
--keep-content is not taken into account when undeploying in domain mode,WFCORE-1651,12638731,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,13/Jul/16 12:15 PM,24/Aug/16 5:54 PM,29/Nov/16 3:51 PM,24/Aug/16 5:54 PM,,,,,,,3.0.0.Alpha6,,CLI,,,,,0,,,,,,"In domain mode, the --keep-content is not taken into account.
undeploy * --keep-content is identical as undeploy * The deployments are disabled and the references are removed from the server groups.

This should be changed to respect option semantic.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i076t3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Subsystem - connector resource description and schema file claim that more socket bindings can be used,WFCORE-1650,12638612,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,13/Jul/16 4:18 AM,13/Jul/16 7:59 PM,29/Nov/16 3:51 PM,13/Jul/16 7:59 PM,2.2.0.CR7,,,,,,3.0.0.Alpha4,,Remoting,,,,,0,,,,,,"Since the schema for Remoting subsystem says that multiple socket bindings should be allowed on a connector, I'm trying to create a connector like that and I couldn't get it to work.

I assume the correct syntax should be the one with {{[rjanik-sb1,rjanik-sb2]}} since the socket bindings are defined as {{xs:list}} in the schema file. Here's what I tried:

{code}
[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/socket-binding=rjanik-sb1:add(interface=public)
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/socket-binding=rjanik-sb2:add(interface=public)
{""outcome"" => ""success""}
standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""rjanik-sb1 rjanik-sb2"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: Invalid name character at offset 45"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""rjanik-sb1, rjanik-sb2"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: Invalid name character at offset 46"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""rjanik-sb1,rjanik-sb2"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.newcon is missing [org.wildfly.network.socket-binding.rjanik-sb1,rjanik-sb2]""]},
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""org.wildfly.network.socket-binding.rjanik-sb1,org.wildfly.network.socket-binding.rjanik-sb2"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.newcon is missing [org.wildfly.network.socket-binding.org.wildfly.network.socket-binding.rjanik-sb1,org.wildfly.network.socket-binding.rjanik-sb2]""]},
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""rjanik-sb1,org.wildfly.network.socket-binding.rjanik-sb2"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.newcon is missing [org.wildfly.network.socket-binding.rjanik-sb1,org.wildfly.network.socket-binding.rjanik-sb2]""]},
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=[rjanik-sb1,rjanik-sb2])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0097: Wrong type for socket-binding. Expected [STRING] but was LIST"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""[rjanik-sb1,rjanik-sb2]"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.newcon is missing [org.wildfly.network.socket-binding.[rjanik-sb1,rjanik-sb2]]""]},
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=""[rjanik-sb1],[rjanik-sb2]"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.newcon is missing [org.wildfly.network.socket-binding.[rjanik-sb1],[rjanik-sb2]]""]},
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=remoting/connector=newcon:add(socket-binding=[""rjanik-sb1"",""rjanik-sb2""])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0097: Wrong type for socket-binding. Expected [STRING] but was LIST"",
    ""rolled-back"" => true
}
{code}",,,,,,,,,,,,,,,,JBEAP-5044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0763r:,9223372036854775807,,,,,,,,rjanik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RBAC constraint config modifications will fail in a mixed domain if the modified constraint is not present in the legacy slave,WFCORE-1649,12638588,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,brian.stansberry,brian.stansberry,brian.stansberry,12/Jul/16 6:19 PM,25/Jul/16 10:34 AM,29/Nov/16 3:51 PM,,,,,,,,3.0.0.Beta1,,Domain Management,,,,,0,,,,,,"The management model for RBAC constraints is maintained using synthetic resources, with resources only existing for those items (SensitivityClassification and ApplicationClassification) that are registered in the current process. Operations that touch classifications unknown to that process will fail due to missing resource problems.

This is a big problem in the following scenarios:

1) Mixed domain, where legacy slaves do not know about newly introduced classifications.
2) Slimming scenarios where slaves are ignoring unrelated parts of the domain wide config and also don't have some extension installed, resulting in classifications registered by those extensions not being present.

A partial workaround to 1) is for the kernel to register transformers for newly introduced classifications (e.g. SERVER_SSL added in EAP 6.4.7 and EAP 7). But:

-- that doesn't help with problem 2)
-- only the kernel can register kernel transformers, so if extensions add new classifications there is no way for them to register the transformer.",,,,,,,,,,,,,,,,,,,,,WFCORE-1669,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i075yn:,9223372036854775807,,,,,,,,,,,"12/Jul/16 7:33 PM;ctomc;Maybe one option would be to go on with implementing ""dynamic transformers registration"" using service loader.
I have some prototype impl somewhere for subsystems work, but shouldn't be much more work to do the same for kernel transformers.
This would allow us to register transformers separately from kernel itself.",,,,,,,,,,,,,,,,,,,,,,,,,,
Default app-name value of Syslog handler in Audit Logging violates specification,WFCORE-1647,12638447,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,jtymel,jtymel,12/Jul/16 4:53 AM,14/Jul/16 11:23 AM,29/Nov/16 3:51 PM,12/Jul/16 9:35 PM,3.0.0.Alpha3,,,,,,2.2.0.CR8,3.0.0.Alpha4,Domain Management,,,,,0,,,,,,"According to syslog specification[1] {{app-name}} cannot contain space character ("" ""). However, the default value in WildFly Core 3.0.0.Alpha3 is {{WildFly Core}}. This results in the syslog server is not able to capture Process ID from which the message was sent.
E.g. following piece of information is captured {{WildFly[Core] (...)}} instead of {{WildFlyCore[795]}}

Suggestions for improvement:
Change default value {{WildFly Core}} to one without space character.
Also please consider addition of check whether {{app-name}} contains space character.

[1] https://tools.ietf.org/html/rfc5424#page-8",,,,,,,,,,,,,,,,JBEAP-5185,,,,WFCORE-172,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1672,,,,,,0.0,9.0,,1|i07547:,9223372036854775807,,,,"1. Configure Audit Logging to log into (local) rsyslog and start server
{code}
<audit-log>
            <formatters>
                <json-formatter name=""json-formatter""/>
            </formatters>
            <handlers>
                <file-handler name=""file"" formatter=""json-formatter"" path=""audit-log.log"" relative-to=""jboss.server.data.dir""/>
                <syslog-handler name=""syslog-handler"" formatter=""json-formatter"">
                    <udp host=""127.0.0.1"" port=""514""/>
                </syslog-handler>
            </handlers>
            <logger log-boot=""true"" log-read-only=""false"" enabled=""true"">
                <handlers>
                    <handler name=""file""/>
                    <handler name=""syslog-handler""/>
                </handlers>
            </logger>
</audit-log>
{code}

2. Look into /var/log/messages file
Note: the brackets must be escaped, JIRA doesn't allow me to stress it. Brackets {{[, ]}} used in {{grep}} command should be always preceded by a backslash
{{sudo grep  ""WildFly\[Core\]"" /var/log/messages}} - there should be a few occurrences
{{sudo grep  ""WildFlyCore\["" /var/log/messages}} - there should be no occurences

3. Stop server, change configuration to use {{app-name}} without space character and start it again
{code}
<audit-log>
            <formatters>
                <json-formatter name=""json-formatter""/>
            </formatters>
            <handlers>
                <file-handler name=""file"" formatter=""json-formatter"" path=""audit-log.log"" relative-to=""jboss.server.data.dir""/>
                <syslog-handler name=""syslog-handler"" formatter=""json-formatter"" app-name=""WildFlyCore"">
                    <udp host=""127.0.0.1"" port=""514""/>
                </syslog-handler>
            </handlers>
            <logger log-boot=""true"" log-read-only=""false"" enabled=""true"">
                <handlers>
                    <handler name=""file""/>
                    <handler name=""syslog-handler""/>
                </handlers>
            </logger>
</audit-log>
{code}

4. Look into /var/log/messages file again
Note: the brackets must be escaped, JIRA doesn't allow me to stress it. Bracket {{[}} used in {{grep}} command should be always preceded by a backslash
{{sudo grep  ""WildFlyCore\["" /var/log/messages}} - there should be a few occurrences (that contains PID) now",,,,,,,"12/Jul/16 5:48 AM;ctomc;You are positive this is still issue in version 3.0.0? As EAP7.0 uses 2.1.x versions.
Asking as issue like this was already reported and fixed some time ago. But it could be a regression","12/Jul/16 6:18 AM;jtymel;Ooops, you're right. I overlooked that I had been in incorrect folder when running the server (dist/target instead of build/target). In 3.0.0.Alpha3 is the default app-name {{WildFly}} so it works as expected.","12/Jul/16 1:26 PM;brian.stansberry;[~ctomc] Please confirm that no problem will exist if whatever drives this has a space (not just that it's ok with the current data.) If it's ok, please resolve, if not perhaps replacing space with underscore can work. Or just removing.","12/Jul/16 3:54 PM;luck3y;[~bstansberry] I've just patched this to replace any non-printing chars or a space with '_', I'll send up the PR. (I just noticed your additional comment after I grabbed the ticket.)","12/Jul/16 5:24 PM;jamezp;I don't see in the specification where it forbids white space in the app-name.

{quote}
6.2.5.  APP-NAME

   The APP-NAME field SHOULD identify the device or application that
   originated the message.  It is a string without further semantics.
   It is intended for filtering messages on a relay or collector.

   The NILVALUE MAY be used when the syslog application has no idea of
   its APP-NAME or cannot provide that information.  It may be that a
   device is unable to provide that information either because of a
   local policy decision, or because the information is not available,
   or not applicable, on the device.

   This field MAY be operator-assigned.
{quote}

Usually it would say if white space should not be used.","12/Jul/16 5:42 PM;luck3y;So in this case, the header is assembled with:

      HEADER          = PRI VERSION SP TIMESTAMP SP HOSTNAME
                        SP APP-NAME SP PROCID SP MSGID

So inclusion of spaces (or un-escaped spaces, but those would be annoying to grep on IMO), will put the next token into procid.",12/Jul/16 5:51 PM;jamezp;I think you're correct [~luck3y]. So ignore me this looks good.,"13/Jul/16 1:50 AM;jtymel;Specification says {{APP-NAME        = NILVALUE / 1*48PRINTUSASCII}}, i.e. {{-}} or {{string with (at maximum) 48 chars}}. These chars can be only printable excluding space character (and DEL) {{PRINTUSASCII    = %d33-126}}, space character has ASCII code {{32}} (DEL {{127}}).",14/Jul/16 11:23 AM;jamezp;I thanks [~jtymel]. I missed that definition at the bottom.,,,,,,,,,,,,,,,,,,
Missing whitespace indent in module command help message,WFCORE-1645,12638268,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,pkremens,pkremens,pkremens,11/Jul/16 2:32 AM,12/Jul/16 9:34 PM,29/Nov/16 3:51 PM,12/Jul/16 9:34 PM,,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"https://github.com/jfdenise/wildfly-core/blob/c023b0bd21d35d8f96c5d99fe4a2ecd24ed76bb3/cli/src/main/resources/help/module.txt#L42

Whitespace indent is missing for --module-root-dir and --name options
{noformat}
ARGUMENTS

--module-root-dir - (optional) The absolute file path to the server's modules 
                    directory. By default the module is added to (or removed from)
                    JBOSS_HOME/modules
 
--name          - (required) the name of the module to be added or removed.
                   NOTE: slot is not a part of the module name.

 --slot          - (optional) specifies a slot which should be created or
                   removed. If this argument is not specified, ""main"" slot is
                   assumed.
...
{noformat}",,,,,,,,,,,,,,,,,,,,,EAP7-519,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1670,,,,,,0.0,0.0,,1|i0741z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PersistenceResourceXmlDescription marshals attributes in the reverse order they are added,WFCORE-1644,12638233,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,08/Jul/16 2:43 PM,08/Jul/16 5:33 PM,29/Nov/16 3:51 PM,08/Jul/16 5:33 PM,2.0.0.Final,2.1.0.Final,2.2.0.CR5,3.0.0.Alpha3,,,2.2.0.CR6,3.0.0.Alpha4,Domain Management,,,,,0,,,,,,"This in marshalAttributes results in iterating over a reversed list:

{code}
//we sort attributes to make sure that attributes that marshall to elements are last
for (AttributeDefinition ad : attributes.stream().sorted((o1, o2) -> o1.getParser().isParseAsElement() ? 1 : -1).collect(Collectors.toList())) {
        {code}

The sorter returning -1 for all non-element attributes has that effect.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i073uf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix domain mode for configuration changes,WFCORE-1642,12638194,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,08/Jul/16 11:12 AM,02/Nov/16 8:58 AM,29/Nov/16 3:51 PM,31/Aug/16 9:03 PM,3.0.0.Alpha3,,,,,,3.0.0.Alpha6,,Domain Management,,,,,0,,,,,,The configuration changes feature is broken in domain mode: the propagation to managed servers / slaves HC doesn't work properly.  Once set it will fail on restarting the DC. So we need a clean refactoring of the feature to have a usable domain mode.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1688,,,,,,0.0,0.0,,1|i073m7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI, completion for more than one header is not working",WFCORE-1641,12638127,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,08/Jul/16 8:30 AM,29/Sep/16 6:05 AM,29/Nov/16 3:51 PM,29/Sep/16 6:05 AM,,,,,,,3.0.0.Alpha6,,CLI,,,,,0,,,,,,"This can't be fixed until https://issues.jboss.org/browse/AESH-386 is fixed.
",,,,,,,,,,,,,,,,,,AESH-386,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0736n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in DeploymentScannerUnitTestCase,WFCORE-1640,12638025,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,07/Jul/16 1:21 PM,25/Jul/16 7:02 PM,29/Nov/16 3:51 PM,25/Jul/16 7:02 PM,2.2.0.CR5,,,,,,3.0.0.Alpha4,,Deployment Scanner,Test Suite,,,,0,,,,,,"DeploymentScannerUnitTestCase.testStartup() has been failing intermittently since May:

https://ci.wildfly.org/project.html?projectId=WildFlyCore&buildTypeId=&tab=testDetails&testNameId=-2364482317512802563&order=TEST_STATUS_DESC&branch_WildFlyCore=__all_branches__&itemsCount=50

The May 4 failure is the first that was not associated with some large scale failure; i.e. is more likely to be relevant to the test itself.

I'll send up a PR to @Ignore this test.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1693,,,,,,0.0,2.0,,1|i072lb:,9223372036854775807,,,,,,,,,,,07/Jul/16 1:44 PM;ehugonnet;It seems to fail only on IPv6 Windows,25/Jul/16 1:29 PM;ehugonnet;This seems related to not closing the controller client when restarting the server.,,,,,,,,,,,,,,,,,,,,,,,,,
Causing the process to terminate before subsystems are processed prevents management depending on subsystem provided capabilities.,WFCORE-1639,12637901,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,dlofthouse,dlofthouse,07/Jul/16 5:30 AM,07/Jul/16 2:03 PM,29/Nov/16 3:51 PM,07/Jul/16 1:38 PM,,,,,,,3.0.0.Alpha4,,Domain Management,,,,,0,affects_elytron,,,,,"I am raising this immediately as a Blocker as the changes made for WFCORE-307 effectively prevent us from referencing Elytron supplied capabilities to secure the management interfaces.

https://github.com/wildfly/wildfly-core/commit/13d8f51b79c8b976ec7a5489c94f0e8a8bda998d

I think at this point it would be easier to revert WFCORE-307 and re-evaluate.

To provide consistency we have all been working along the path where Elytron can be configured using a subsystem and used in all modes of the server, this was even a big motivation for Kabir's work bringing subsystems to host controllers.

We could take the view that only subsystems can depend on subsystems but I think we would quickly reach the point where we discuss moving management into a subsystem which would immediately obsolete the changes for WFCORE-307 - this move is something that has been talked about a number of times already.

This will need discussion but as an alternative idea for the original issue reported in WFCORE-307, how about adding the ability to flag a select few capabilities as crtitical / core and those will always cause a failure in this first boot if their requirements are not satisfied.

Also I think WFCORE-307 may only be a partial solution, if we are really saying the server can only run if it is manageable there is still the possibility that at stage RUNTIME the services will fail to start.
",,,,,,,,,,,,WFCORE-307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1663,,,,,,0.0,4.0,,1|i071vr:,9223372036854775807,,,,,,,,,,,"07/Jul/16 6:55 AM;dlofthouse;For Elytron development we are temporarily reverting the original commit to get us back up and running again: -

https://github.com/wildfly-security-incubator/wildfly-core/tree/WFCORE-1639",07/Jul/16 9:02 AM;dmlloyd;I think we have good architectural reasons for reverting this behavior as well.  Treating subsystems and the primary model identically is a closer match to the future management model design.,07/Jul/16 9:22 AM;brian.stansberry;[~ehugonnet] FYI. Let's talk about this one on today's bluejeans.,07/Jul/16 2:03 PM;dlofthouse;I did also question on today's call if this could be solved by somehow executing all MODEL stage operations and only a subset of the RUNTIME operations - in retrospect I realise that will still leave us with the same problem as the subsystem supplied capabilities will not be available as the management interfaces come up.,,,,,,,,,,,,,,,,,,,,,,,
headers in Operation and Command are not properly completed,WFCORE-1637,12637857,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,06/Jul/16 3:33 PM,08/Jul/16 7:36 PM,29/Nov/16 3:51 PM,08/Jul/16 7:36 PM,,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"For example:
1) ls --headers {allow-resource-service-restart <TAB>
doesn't give you the '='

2) ls --headers {allow-resource-service-restart=true; <TAB>
list you the commands one can type...not at al an header.

3) NPE caused by  WFCORE-1617
ls --headers {allow-resource-service-restart=t<TAB> ==> NPE

Completion should properly complete each header.",,,,,,,,,,,,,,,,,,,,,AESH-386,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1666,,,,,,0.0,1.0,,1|i071m7:,9223372036854775807,,,,,,,,,,,"08/Jul/16 8:27 AM;jdenise;Item 2) can't be fixed due to Aesh current implementation: https://issues.jboss.org/browse/AESH-386
",,,,,,,,,,,,,,,,,,,,,,,,,,
--<description-property> are no more supported by ls command,WFCORE-1636,12637698,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,05/Jul/16 11:58 AM,20/Jul/16 9:10 PM,29/Nov/16 3:51 PM,20/Jul/16 9:10 PM,,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"- ls -l --storage will make the CLI to throw an exception. storage being not known by the Command runtime.
- Furthermore completion is not offered for these options.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1671,,,,,,0.0,0.0,,1|i070pz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write attribute on a new deployment scanner fails in batch,WFCORE-1635,12637531,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,05/Jul/16 3:04 AM,08/Jul/16 7:36 PM,29/Nov/16 3:51 PM,08/Jul/16 7:36 PM,3.0.0.Alpha3,,,,,,3.0.0.Alpha4,,Deployment Scanner,Domain Management,,,,0,,,,,,"Creating a new deployment-scanner and altering it's attribute fails if done in single batch. Running the commands without batch or running batch on CLI embed-server works fine.

*reproduce*
{noformat}
batch
/subsystem=deployment-scanner/scanner=scan:add(path=log, relative-to=""jboss.server.base.dir"", auto-deploy-exploded=false, scan-enabled=false)
/subsystem=deployment-scanner/scanner=scan:write-attribute(name=scan-interval, value=6000)
run-batch
{noformat}
fails with
{noformat}
08:09:19,076 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""subsystem"" => ""deployment-scanner""),
    (""scanner"" => ""scan"")
]): java.lang.IllegalStateException
	at org.jboss.as.server.deployment.scanner.DeploymentScannerService.getValue(DeploymentScannerService.java:234)
	at org.jboss.as.server.deployment.scanner.DeploymentScannerService.getValue(DeploymentScannerService.java:62)
	at org.jboss.msc.service.ServiceControllerImpl.getValue(ServiceControllerImpl.java:1158)
	at org.jboss.as.controller.OperationContextImpl$OperationContextServiceController.getValue(OperationContextImpl.java:2282)
	at org.jboss.as.server.deployment.scanner.AbstractWriteAttributeHandler.applyUpdateToRuntime(AbstractWriteAttributeHandler.java:58)
	at org.jboss.as.controller.AbstractWriteAttributeHandler$1.execute(AbstractWriteAttributeHandler.java:104)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:208)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:130)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:152)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:148)
	at java.security.AccessController.doPrivileged(AccessController.java:686)
	at javax.security.auth.Subject.doAs(Subject.java:569)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:148)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.lang.Thread.run(Thread.java:785)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}

using the embed server works
{noformat}
embed-server
batch
/subsystem=deployment-scanner/scanner=scan:add(path=log, relative-to=""jboss.server.base.dir"", auto-deploy-exploded=false, scan-enabled=false)
/subsystem=deployment-scanner/scanner=scan:write-attribute(name=scan-interval, value=6000)
run-batch
{noformat}

Setting only as minor as there is no real use case behind this (scan-interval can be set while adding a new scanner) - run into it quite accidentally. No regression against previous release.",,,,,,,,,,,,,,,,JBEAP-5134,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1662,,,,,,0.0,3.0,,1|i06zrr:,9223372036854775807,,,,,,,,,,,"05/Jul/16 3:44 AM;soul2zimate;In the batch circumstance, sometimes IllegalStateException happens because the new deployment service is not up yet when it tries to update scanners.

Here are two existing solutions:
1. Add same [waitForService() | https://github.com/wildfly/wildfly/blob/9de9217e0106da10c7d05228bcf0559c81b6042c/security/subsystem/src/main/java/org/jboss/as/security/SecurityDomainResourceDefinition.java#L202] method before controller.getValue(); But it's marked nasty workaround.
2. In case that new deployment scanner service is not up yet, return true to put the server in a reload-required state.
 ","06/Jul/16 10:20 AM;brian.stansberry;I think if controller.getValue() fails it can just ignore the failure. In the batch the Stage.MODEL handling of the write-attribute runs before the Stage.RUNTIME of the add, which means the Stage.RUNTIME of the add is using the correct value of the scan-interval attribute and there's no need for the Stage.RUNTIME of the write-attribute modify the service.",06/Jul/16 10:41 AM;brian.stansberry;Probably better than catching and ignoring an ISE though is wrapping logic in an if (controller.getState() == UP) { ... } block.,,,,,,,,,,,,,,,,,,,,,,,,
Wrong cursor position after deleting all characters in second line,WFCORE-1634,12637432,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,04/Jul/16 7:32 AM,28/Sep/16 1:47 PM,29/Nov/16 3:51 PM,28/Sep/16 1:47 PM,3.0.0.Alpha3,,,,,,3.0.0.Alpha8,,CLI,,,,,0,,,,,,"In CLI, when typing expression that stretches more then one line, and then deleting all characters in the last line (using backspace), cursor appears on wrong position on the previous line (should be on last column, but is on column before the last).

Further editing messes up the displayed expression, which doesn't reflect the real content of the buffer.

*Reproducing:*

* Terminal width is 80 characters.
* [] marks a cursor position.

Step 1. - I have expression spreading over two lines like this:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connection-
factory[]
{code}

Step 2. - Delete ""factory"" word using backspace:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connection-
[]
{code}

Step 3. - Another backspace:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connectio[n]
{code}

while expected is:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connection[]
{code}

Step 4. - Another backspace:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connecti[]n
{code}

while expected is:

{code}
[standalone@embedded /] /subsystem=datasources/data-source=ExampleDS/connectio[]
{code}","Fedora 24
Gnome Terminal 3.20
Bash 4.3.42",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/aeshell/aesh/pull/233,,,,,,0.0,1.0,,1|i06z6v:,9223372036854775807,,,,,,,,,,,28/Sep/16 1:47 PM;brian.stansberry;I'm resolving this based on the fact that the aesh PR was merged and is in the aesh release used in 3.0.0.Alpha8. Please re-open if there is further work involved.,,,,,,,,,,,,,,,,,,,,,,,,,,
Server processing request isn't stopped immediately but waits for request processing to finish,WFCORE-1632,12637378,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,gaol,gaol,gaol,03/Jul/16 10:53 PM,07/Jul/16 9:15 AM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,IO,Server,,,0,,,,,,"When stopping server which is processing request, it terminates the connection from the client but doesn't stop the request processing as such.

After debugging and searching when the issue appeared I've found out that the issue was introduced with this commit: [https://github.com/wildfly/wildfly-core/commit/7304c019705c5f7ec0378e1c51750432591f73d2]

Steps to reproduce:
1) start EAP server with deployed app from attachment
2) create request to long running application: {{curl -i http://127.0.0.1:8080/long-running-servlet/HeavyProcessing?duration=25000}}
3) stop server (you can do it even gracefully) using {{./jboss-cli.sh -c "":shutdown(timeout=1)""}}

See that server is stopped after 25 seconds since request from step 2 was issued, as that is duration of the request processing requested by param duration, instead of being terminated after 1 second.",,,,28800,28800,,0%,28800,28800,,,,,,,JBEAP-4409,,,,,,,,,,,,,,,,Release Notes,,,,,,,,,?,?,,?,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1654,,,,,,0.0,3.0,,1|i06yvj:,9223372036854775807,,,,,,7.backlog.GA,,,,,"06/Jul/16 10:02 AM;brian.stansberry;This is an interesting problem. The graceful shutdown timeout was meant to be a limit on how long the server would try and be graceful, but not a limit on how long it would take to stop once it stopped being graceful.

I don't think we should act as if it's a shutdown timeout, at least not without a formal RFE, as that's an open ended commitment. But, still, it's better if it can be closer to that.

I haven't looked closely at the link in the description, but I figure it's ultimately about using a shared thread pool that is depended upon but not controlled by the webserver instead of using one that the webserver itself shuts down.","07/Jul/16 2:46 AM;rhatlapa;The issue isn't with graceful shutdown as such, the issue is with server stopping. The server stopping hangs and waits for request processing to finish. If the server was doing some long time processing the only way to shut him down is by forcibly killing it instead of being just stopped in timely manner.

Note currently the processing which is done is completely pointless as there is no way to deliver the result in such case as the connection itself was destroyed. So there is done processing which is then thrown away.","07/Jul/16 9:15 AM;brian.stansberry;{code}
I haven't looked closely at the link in the description, but I figure it's ultimately about using a shared thread pool that is depended upon but not controlled by the webserver instead of using one that the webserver itself shuts down.{code}

This was wrong. The issue is the change results in the WorkerService MSC service not stopping until the task being handled by the worker task pool (i.e. the request) completes. The shutdown hook we install blocks until the MSC service container terminates, so this prevents that hook completing.",,,,,,,,,,,,,,,,,,,,,,,,
Ordered resources can fail in domain mode with ava.lang.AssertionError: Unknown operation undefine-attribute,WFCORE-1630,12636025,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,29/Jun/16 6:51 PM,30/Jun/16 10:25 AM,29/Nov/16 3:51 PM,29/Jun/16 6:53 PM,2.0.10.Final,,,,,,2.2.0.CR5,3.0.0.Alpha3,Domain Management,,,,,0,,,,,,"When running in domain mode and using indexed resources, applying of model in domain can fail with assertion error if assertions are enabled.

{noformat}
[Host Controller] 16:42:39,979 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 11) WFLYCTL0013: Operation (""apply-remote-domain-model"") failed - address: ([]): java.lang.AssertionError: Unknown operation undefine-attribute
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler$OrderedOperationsCollection.add(SyncModelOperationHandler.java:704)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.processAttributes(SyncModelOperationHandler.java:203)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.compareExistsInBothModels(SyncModelOperationHandler.java:443)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.processNonOrderedChildrenOfType(SyncModelOperationHandler.java:341)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.processChildren(SyncModelOperationHandler.java:229)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.compareExistsInBothModels(SyncModelOperationHandler.java:446)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.processNonOrderedChildrenOfType(SyncModelOperationHandler.java:341)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.processChildren(SyncModelOperationHandler.java:229)
[Host Controller] 	at org.jboss.as.domain.controller.operations.SyncModelOperationHandler.execute(SyncModelOperationHandler.java:155)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1329)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:400)
[Host Controller] 	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:409)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService.access$1000(DomainModelControllerService.java:179)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1255)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService.applyRemoteDomainModel(RemoteDomainConnectionService.java:575)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService.access$1100(RemoteDomainConnectionService.java:131)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService$2.applyDomainModel(RemoteDomainConnectionService.java:518)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection.applyDomainModel(RemoteDomainConnection.java:311)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection$RegisterSubsystemsRequest$1.execute(RemoteDomainConnection.java:454)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
{noformat}

This was observed in a failure of OrderedChildResourcesTestCase.

Failed tests:
  OrderedChildResourcesTestCase.testOrderedChildResources:124 expected:<{
    ""protocol"" => {
        ""MPING"" => undefined,
        ""MERGE3"" => undefined,
        ""FD_SOCK"" => undefined,
        ""FD"" => undefined,
        ""VERIFY_SUSPECT"" => undefined,
        ""pbcast.NAKACK2"" => undefined,
        ""UNICAST3"" => undefined,
        ""pbcast.STABLE"" => undefined,
        ""pbcast.GMS"" => undefined,
        ""MFC"" => undefined,
        ""FRAG2"" => undefined
    },
    ""relay"" => undefined,
    ""transport"" => {
        ""TRANSPORT"" => undefined,
        ""TCP"" => undefined
    }
}> but was:<{
    ""protocol"" => {
        ""MPING"" => undefined,
        ""MERGE3"" => undefined,
        ""FD_SOCK"" => undefined,
        ""VERIFY_SUSPECT"" => undefined,
        ""pbcast.NAKACK2"" => undefined,
        ""UNICAST3"" => undefined,
        ""pbcast.STABLE"" => undefined,
        ""pbcast.GMS"" => undefined,
        ""MFC"" => undefined,
        ""FRAG2"" => undefined
    },
    ""relay"" => undefined,
    ""transport"" => {
        ""TRANSPORT"" => undefined,
        ""TCP"" => undefined
    }
}>",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1644,https://github.com/wildfly/wildfly-core/pull/1608,,,,,0.0,1.0,,1|i06r0f:,9223372036854775807,,,,,,,,,,,30/Jun/16 10:25 AM;brian.stansberry;I updated the description to include some more text just in case it helps a searcher find this. The big issue here was that the logic to synchronize a slave HC after reconnecting to the master was generating undefine-attribute ops that were then not handled. Turning on assertions led to the failure being reported but the real failure was the operations were not handled.,,,,,,,,,,,,,,,,,,,,,,,,,,
Potential NullPointerException when registering the management console redirect service,WFCORE-1629,12636009,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gastaldi,gastaldi,gastaldi,29/Jun/16 6:18 PM,30/Jun/16 12:32 PM,29/Nov/16 3:51 PM,30/Jun/16 12:32 PM,2.0.10.Final,,,,,,2.2.0.CR5,3.0.0.Alpha3,Domain Management,,,,,0,,,,,,"While creating a WildFly Swarm Fraction that exposes the management console, I debugged ConsoleMode and found out that a NullPointerException is thrown in the {{findConsoleVersions}} methods. That's because the {{module.path}} returns {{null}} (as specified in the default value in this same method).

A simple null check is enough to fix it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1645,https://github.com/wildfly/wildfly-core/pull/1646,,,,,0.0,0.0,,1|i06qwv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI tab comple should reflect curent position of prompt,WFCORE-1627,12635841,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,29/Jun/16 5:32 AM,12/Jul/16 9:33 PM,29/Nov/16 3:51 PM,12/Jul/16 9:33 PM,3.0.0.Alpha2,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"CLI tab completion cannot be used in the middle of the command. Whole command is taken as a context, ignoring the current position of prompt. Auto-completed string is inserted to the current position of the prompt (no matter it can be placed in the middle of the command).

[] is used to show the current position of the prompt
*actual*
tab completion in the middle doesn't work
{noformat}
/subsystem=loggin[]<TAB>/root-logger=ROOT
/subsystem=loggin[]/root-logger=ROOT
{noformat}
tab completion with prompt in the middle
{noformat}
/subsystem=logging/[]<TAB>root-logger=R
/subsystem=logging/ROOT[]root-logger=R
{noformat}

*expected*
tab completion in the middle works
{noformat}
/subsystem=loggin[]<TAB>/root-logger=ROOT
/subsystem=logging[]/root-logger=ROOT
{noformat}

tab completion with prompt in the middle doesn't add anything unless it's a valid part of the command
{noformat}
/subsystem=logging/[]<TAB>root-logger=R
/subsystem=logging/[]root-logger=R
{noformat}",,,,,,,,,,,,,,,,JBEAP-4948,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,?,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1643,,,,,,0.0,0.0,,1|i06pxj:,9223372036854775807,,,,,,7.backlog.GA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operation description is not complete in :read-resource-description,WFCORE-1625,12635686,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmesnil,jmesnil,jmesnil,28/Jun/16 11:52 AM,30/Jun/16 6:43 PM,29/Nov/16 3:51 PM,30/Jun/16 6:43 PM,3.0.0.Alpha2,,,,,,3.0.0.Alpha3,,Domain Management,,,,,0,,,,,,"The ouput of :read-resource-description is missing some metadata for operations compared to :read-operation-description:


{noformat}
[domain@localhost:9990 /] /profile=default:read-resource-description(operations=true)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""description"" => ""A named set of subsystem configurations."",
        ...
        ""operations"" => {
            ...
            ""read-attribute-group-names"" => {
                ""operation-name"" => ""read-attribute-group-names"",
                ""description"" => ""Gets the names of all the attribute groups under the selected resource"",
                ""request-properties"" => {},
                ""reply-properties"" => {
                    ""type"" => LIST,
                    ""value-type"" => STRING
                }
            },
            ...
}
[domain@localhost:9990 /] /profile=default:read-operation-description(name=read-attribute-group-names)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""operation-name"" => ""read-attribute-group-names"",
        ""description"" => ""Gets the names of all the attribute groups under the selected resource"",
        ""request-properties"" => {},
        ""reply-properties"" => {
            ""type"" => LIST,
            ""value-type"" => STRING
        },
        ""read-only"" => true,
        ""runtime-only"" => true
    }
}
{noformat}

At least read-only and runtime-only metadata are missing (when they are set on the operation).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1648,,,,,,0.0,1.0,,1|i06ozz:,9223372036854775807,,,,,,,,,,,30/Jun/16 8:00 AM;jmesnil;PR for master branch,,,,,,,,,,,,,,,,,,,,,,,,,,
BoundedQueueThreadPoolResourceDefinition does not able to add additional check on the threads executor,WFCORE-1623,12635336,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gaol,gaol,gaol,27/Jun/16 5:29 AM,08/Jul/16 7:34 PM,29/Nov/16 3:51 PM,08/Jul/16 7:34 PM,,,,,,,3.0.0.Alpha4,,,,,,,0,,,,,,"When there is already a long-running thread pool for a work manager and you try to create another one:
{{/subsystem=jca/workmanager=default/long-running-threads=custom:add(max-threads=30, queue-length=30)}}
you only get an opaque error message:
{{""failure-description"" => ""WFLYCTL0086: Failed to persist configuration change: WFLYCTL0084: Failed to marshal configuration"",}} with a, also useless, {{java.lang.IllegalArgumentException}} in the server log.
It should be more obvious that the error is that you cannot create two long-running thread pools

To be able to check whether the {{long-running-threads/short-running-threads}} within one JCA workmanager is already defined when adding one, {{BoundedQueueThreadPoolResourceDefinition}} in {{threads}} subsystem needs to be extended to be able to check this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1641,,,,,,0.0,0.0,,1|i06mw7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Worker section in IO subsystem does not allow expressions for io-threads and  task-max-threads attributes,WFCORE-1622,12635302,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ctomc,umesh.kudale,umesh.kudale,27/Jun/16 1:29 AM,27/Jun/16 10:18 AM,29/Nov/16 3:51 PM,,1.0.2.Final,,,,,,,,IO,,,,,0,,,,,,"I want to dynamically configure following section in IO subsystem in standalone.xml of wildfly:

<worker name=""default"" io-threads=""100"" task-max-threads=""1000""/>

Here if I do something like:

<worker name=""default"" io-threads=""${my.io.threads:100}"" task-max-threads=""${my.task.max.threads:1000}""/>

And pass parameters as -Dmy.io.threads, -Dmy.task.max.threads while starting wildfly server, it's failing to parse standalone.xml with following exception:

_ERROR [org.jboss.as.server] (Controller Boot Thread) JBAS015956: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:112) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.server.ServerService.boot(ServerService.java:331) [wildfly-server-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:259) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_45] Caused by: java.lang.NumberFormatException: For input string: ""${my.io.threads:100}"" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) [rt.jar:1.8.0_45] at java.lang.Integer.parseInt(Integer.java:569) [rt.jar:1.8.0_45] at java.lang.Integer.parseInt(Integer.java:615) [rt.jar:1.8.0_45] at org.jboss.dmr.StringModelValue.asInt(StringModelValue.java:139) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final] at org.jboss.dmr.ModelNode.asInt(ModelNode.java:240) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final] at org.jboss.as.controller.AttributeParser.parse(AttributeParser.java:116) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.AttributeParser.parse(AttributeParser.java:82) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.AttributeParser$DiscardOldDefaultValueParser.parse(AttributeParser.java:177) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.AttributeParser.parseAndSetParameter(AttributeParser.java:61) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:83) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:135) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:107) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] at org.wildfly.extension.io.IOSubsystemParser_1_0.readElement(IOSubsystemParser_1_0.java:71) at org.wildfly.extension.io.IOSubsystemParser_1_0.readElement(IOSubsystemParser_1_0.java:41) at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final] at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] at org.jboss.as.server.parsing.StandaloneXml.parseServerProfile(StandaloneXml.java:1131) [wildfly-server-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.server.parsing.StandaloneXml.readServerElement_1_4(StandaloneXml.java:458) [wildfly-server-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:145) [wildfly-server-8.2.0.Final.jar:8.2.0.Final] at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:107) [wildfly-server-8.2.0.Final.jar:8.2.0.Final] at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final] at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:104) [wildfly-controller-8.2.0.Final.jar:8.2.0.Final] ... 3 more_

This section should allow expressions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/thread/271203,,,,,,,,,0.0,0.0,,1|i06mon:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bad artifact resolution in wildfly-logging module,WFCORE-1619,12635085,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Out of Date,ctomc,wolfc,wolfc,24/Jun/16 7:59 AM,23/Sep/16 11:18 AM,29/Nov/16 3:51 PM,23/Sep/16 11:18 AM,,,,,,,3.0.0.Alpha8,,Logging,Test Suite,,,,0,,,,,,"The test doesn't use project artifact resolution, but global artifact resolution. While the project hasn't been published yet.

{noformat}
Tests run: 14, Failures: 0, Errors: 6, Skipped: 3, Time elapsed: 21.024 sec <<< FAILURE! - in org.jboss.as.logging.LoggingSubsystemTestCase
testTransformersEAP620(org.jboss.as.logging.LoggingSubsystemTestCase)  Time elapsed: 8.508 sec  <<< ERROR!
java.lang.RuntimeException: org.eclipse.aether.resolution.ArtifactResolutionException: Could not find artifact org.wildfly.core:wildfly-subsystem-test-framework:jar:2.1.6.Final-redhat-SNAPSHOT in product-repository (https://maven.repository.redhat.com/nexus/content/groups/product-techpreview/)
	at org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:39)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:355)
	at org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:67)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$DirectExecutor.execute(BasicRepositoryConnector.java:581)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector.get(BasicRepositoryConnector.java:249)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:520)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:421)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)
	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:223)
	at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:294)
	at org.jboss.as.model.test.MavenUtil.createMavenGavURL(MavenUtil.java:138)
	at org.jboss.as.model.test.ChildFirstClassLoaderBuilder.addMavenResourceURL(ChildFirstClassLoaderBuilder.java:197)
	at org.jboss.as.subsystem.test.SubsystemTestDelegate$LegacyKernelServiceInitializerImpl.install(SubsystemTestDelegate.java:839)
	at org.jboss.as.subsystem.test.SubsystemTestDelegate$LegacyKernelServiceInitializerImpl.access$700(SubsystemTestDelegate.java:724)
	at org.jboss.as.subsystem.test.SubsystemTestDelegate$KernelServicesBuilderImpl.build(SubsystemTestDelegate.java:691)
	at org.jboss.as.logging.LoggingSubsystemTestCase.testEapTransformer(LoggingSubsystemTestCase.java:281)
	at org.jboss.as.logging.LoggingSubsystemTestCase.testTransformersEAP620(LoggingSubsystemTestCase.java:130)
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i06ldb:,9223372036854775807,,,,,,,,,,,"24/Jun/16 8:00 AM;wolfc;As a work-around you can use: mvn install
But that pollutes your cache.","22/Aug/16 7:31 AM;ctomc;What ware you using? just mvn test?

Tested locally and on few other machines, mvn package is enough, install is not needed.","23/Sep/16 11:18 AM;ctomc;I cannot reproduce this. If you can reproduce it with recent code, please reopen it.",,,,,,,,,,,,,,,,,,,,,,,,
Tab completion is doesn't work for cli variables and properties,WFCORE-1617,12634669,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,23/Jun/16 3:35 AM,06/Jul/16 9:42 PM,29/Nov/16 3:51 PM,06/Jul/16 9:42 PM,3.0.0.Alpha2,,,,,,3.0.0.Alpha4,,CLI,,,,,0,,,,,,"CLI tab completion doesn't work for CLI variables.

Add a CLI variable:
{noformat}
set myvar=/subsystem=datasources/data-source=ExampleDS
[standalone@embedded /] $myvar:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => {
...
{noformat}

Now try to use tab completion

*actual*
{noformat}
[standalone@embedded /] $myvar:read<TAB>
[standalone@embedded /] $myvar:readread-<TAB>
[standalone@embedded /] $myvar:readread-
'readread-' is not a valid operation name.
{noformat}

*expected*
{noformat}
[standalone@embedded /] $myvar:read<TAB>
[standalone@embedded /] $myvar:read-resource
{noformat}

",,,,,,,,,,,,,,,,JBEAP-4949,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1632,,,,,,0.0,1.0,,1|i06iwv:,9223372036854775807,,,,,,,,,,,"23/Jun/16 5:24 AM;soul2zimate;DefaultCallbackHandler sets ""lastChunkIndex"" during every necessary validation (validatedNodeType, validatedNodeName, validatedOperationName, etc) which is based on resolved value. This gives an incorrect offset value in case of variable or property substitution is applied.",,,,,,,,,,,,,,,,,,,,,,,,,,
ServerSuspendHandler tries to do step completion and rollback handling in a different thread,WFCORE-1616,12634167,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,brian.stansberry,brian.stansberry,22/Jun/16 3:28 PM,24/Jun/16 11:37 AM,29/Nov/16 3:51 PM,24/Jun/16 11:37 AM,,,,,,,2.2.0.CR4,3.0.0.Alpha3,Domain Management,,,,,0,,,,,,"ServerSuspendHandler is calling OperationContext.completeStep() and passing in a rollback handler from a org.jboss.as.server.suspend.OperationListener that may be invoked by a different thread. The OperationContext is not intended to be invoked from multiple threads in this way. 

3 things can happen with this setup:

1) There is no activity preventing suspend, so the suspend controller immediately calls back to the OperationListener on the thread that's handling the operation. So then things work fine.

2) There is something that prevents synchronous suspend (i.e. user activity) so then the OperationListener gets invoked later by another thread. The completeStep call registers a rollback handler that will never get called because the op is already done. No harm, no foul unless the operation rolled back.

3) Same as 2) but the OperationListener gets invoked later by another thread while the mgmt op is still executing and somehow something goes wrong, since AbstractOperationContext.Step is not written for concurrent modification.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1631,https://github.com/wildfly/wildfly-core/pull/1630,,,,,0.0,3.0,,1|i06ftz:,9223372036854775807,,,,,,,,,,,22/Jun/16 3:34 PM;brian.stansberry;https://github.com/bstansberry/wildfly-core/commit/f3ee7eea232c0517bf4be356fd65ed694833e231 adds the missing standard assert that AbstractOperationContext uses on other methods to ensure that only valid threads are invoking on it. This will cause the 2) and 3) cases from the JIRA description to fail. https://ci.wildfly.org/viewLog.html?buildId=19472&tab=buildResultsDiv&buildTypeId=WF_WildFlyCoreIntegrationExperiments is a test run that I expect to fail due to this.,"22/Jun/16 4:05 PM;brian.stansberry;[~swd847] I'm not sure what semantics you wanted here. Was it to have the management op block until suspend is done (however long that may be), and thus support rolling back regardless of how long suspend takes? Or was it to support rollback only for the 1) case, where the suspend is immediate?

Blocking sounds better, although potentially indefinite blocking with the management lock held is a concern.","22/Jun/16 5:53 PM;swd847;Blocking was definitely the intention, until shutdown the timeout param in this operation basically just means 'block until the server is suspended or this much time has elapsed' as there is no shutdown op that will be invoked once the operation is complete.
",,,,,,,,,,,,,,,,,,,,,,,,
CLI could stuck if SIGINT is send during authentication dialogue,WFCORE-1611,12633996,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,22/Jun/16 4:49 AM,28/Jun/16 6:23 AM,29/Nov/16 3:51 PM,28/Jun/16 6:23 AM,3.0.0.Alpha2,,,,,,3.0.0.Alpha3,,CLI,,,,,0,,,,,,"Interruption a CLI session with Ctrl+C during authentication dialogue could get CLI into unresponsive state.

*reproduce*
Either use a remote server, --no-local-auth cli script arg or remove a local element from ManagementRealm configuration
{code:diff}
         <security-realms>
             <security-realm name=""ManagementRealm"">
                 <authentication>
-                    <local default-user=""$local"" skip-group-loading=""true""/>
{code}
start a standalone server and launch a CLI
{noformat}
[pkremens@localhost] $ ./standalone.sh &
[pkremens@localhost] $ ./jboss-cli.sh
[disconnected /] connect
Authenticating against security realm: ManagementRealm
Username: <Press Ctrl+C here>
{noformat}
Could not connect message is printed, but process is not terminated and stuck at this point.
{noformat}
The controller is not available at localhost:9990: java.net.ConnectException: WFLYPRT0023: Could not connect to http-remoting://localhost:9990. The connection timed out: WFLYPRT0023: Could not connect to http-remoting://localhost:9990. The connection timed out
{noformat}

Only way to recover the terminal is to SIGKILL the CLI process.",,,,,,,,,,,,,,,,JBEAP-4954,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1627,,,,,,0.0,0.0,,1|i06etj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Removing children of security-realm always finishes with {""outcome"" => ""success""}",WFCORE-1607,12633459,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,olukas,olukas,17/Jun/16 8:23 AM,06/Jul/16 10:45 PM,29/Nov/16 3:51 PM,06/Jul/16 10:45 PM,2.0.10.Final,,,,,,2.2.0.CR6,3.0.0.Alpha4,Domain Management,,,,,0,,,,,,"Removing children of security-realm (e.g. authentication) always finishes with {""outcome"" => ""success""}. This happens even if type of children of security-realm does not exist in server configuration. It should rather finish with failure to indicate that nothing was removed.",,,,,,,,,,,,,,,,JBEAP-5072,,,,WFCORE-1523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1657,https://github.com/wildfly/wildfly-core/pull/1658,,,,,0.0,1.0,,1|i06bmf:,9223372036854775807,,,,"Start application server which does NOT include {{'/core-service=management/security-realm=ManagementRealm/authentication=ldap'}} and execute:
{code}
    ./jboss-cli.sh -c '/core-service=management/security-realm=ManagementRealm/authentication=ldap:remove()'
{code}
operation finishes with:
{code}
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{code}
even if authentication=ldap has not existed in configuration.",,,,,,,17/Jun/16 9:11 AM;dlofthouse;Management security realms are all a part of WildFly Core - please move these issues to the WFCORE project.,,,,,,,,,,,,,,,,,,,,,,,,,,
Server reload is needed for modified security-realm even if {allow-resource-service-restart=true} is used,WFCORE-1606,12633460,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,olukas,olukas,17/Jun/16 8:24 AM,26/Oct/16 12:09 PM,29/Nov/16 3:51 PM,,2.0.10.Final,,,,,,3.0.0.Beta1,,Domain Management,Security,,,,0,,,,,,"When security-realm, which is set as http-interface security-realm in management-interfaces, is modified and operation used {allow-resource-service-restart=true} header then server is NOT in reload-required state but modified security realm does not work correctly until server is manually reloaded.",,,,,,,,,,,,,,,,JBEAP-5073,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,7.0,,1|i06bmn:,9223372036854775807,,,,"Start application server with default configuration execute following CLI commands:
{code}
/core-service=management/ldap-connection=ldap-connection:add(search-dn=""uid=admin,ou=system"",search-credential=""secret"", url=""ldap://localhost:10389"")
/core-service=management/security-realm=ManagementRealm/authentication=properties:remove(){allow-resource-service-restart=true}
/core-service=management/security-realm=ManagementRealm/authentication=ldap:add(connection=""ldap-connection"",base-dn=""ou=People,dc=jboss,dc=org"",username-attribute=uid){allow-resource-service-restart=true}
{code}

When you execute CLI command
{code}
read-attribute server-state
{code}
you will see that server is not in state reload-required. However when you access Management Console then newly configured LDAP authentication is not taken into account until server is reloaded.",,,,,,,17/Jun/16 11:34 AM;brian.stansberry;Please move this to WFCORE.,"22/Jun/16 7:15 AM;iweiss;Am I wrong assuming the issue lies here, https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/SecurityRealmResourceDefinition.java#L65 ?","22/Jun/16 10:17 AM;brian.stansberry;[~iweiss] I don't believe so. Adding a security-realm should not require a reload, and AIUI here the issue is with modifying an existing security-realm.","23/Jun/16 3:54 AM;iweiss;[~brian.stansberry], OK. So looking at https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/LdapResourceDefinition.java#L47 and at https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/connections/ldap/LdapConnectionResourceDefinition.java#L104 seems to indicate that adding a LDAP connection and its resource should require a restart. Wrong again?","23/Jun/16 1:33 PM;brian.stansberry;[~iweiss] https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/PropertiesAuthenticationResourceDefinition.java#L57 is wrong. SecurityRealmChildRemoveHandler does not support the allow-resource-service-restart=true header.

I believe this is a common mistake in the uses of SecurityRealmParentRestartHandler; the first other one I checked had the same problem.","23/Jun/16 1:39 PM;brian.stansberry;When looking at this we should examine the possibility of actually supporting allow-resource-service-restart=true, as opposed to correcting the metadata. But this all ties in to the elytron migration as well, i.e. we shouldn't change the behavior of security-realm in a way that will be different from what the elytron subsystem stuff supports.","26/Oct/16 12:09 PM;brian.stansberry;Emmanuel, please have a look at this, starting off with discussing a bit with [~dlofthouse]. I'm quite fine with fixing this by simply correcting the metadata, and not actual supporting allow-resource-service-restart=true. We should only go beyond that if:

1) The elytron replacements for these legacy security-realm resources will support allow-resource-service-restart=true *in core 3.0.0  / WF 11*.

2) Darran is up for reviewing a patch to add the support.

Otherwise let's just fix the metadata.",,,,,,,,,,,,,,,,,,,,
Processing stucks for ~12 seconds when ManagementRealm is changed with {allow-resource-service-restart=true},WFCORE-1601,12633458,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,olukas,olukas,17/Jun/16 8:23 AM,16/Aug/16 6:18 PM,29/Nov/16 3:51 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"When any operation which changes configuration (add, remove, write-attribute...) is executed on any children of security-realm (e.g. authentication) with {allow-resource-service-restart=true} operation header, then processing stucks for ~12 seconds.

This happens only in case when changed security-realm is set as http-interface security-realm in management-interfaces.",,,,,,,,,,,,,,,,JBEAP-5071,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i06bm7:,9223372036854775807,,,,"Start application server and execute:
{code}
./jboss-cli.sh -c '/core-service=management/security-realm=ManagementRealm/authentication=properties:remove(){allow-resource-service-restart=true}'
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Echo commands without arguments doesn't print existing variables - update help message,WFCORE-1596,12632340,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,15/Jun/16 11:31 AM,17/Jun/16 5:12 PM,29/Nov/16 3:51 PM,17/Jun/16 5:12 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha2,,CLI,,,,,0,,,,,,"According to the help message:
{noformat}
   If the command is executed w/o arguments then the command will print
   all the existing variables with their values in the name=value format.
{noformat}

*actual*
{noformat}
[standalone@localhost:9990 /] set foo=bar
[standalone@localhost:9990 /] echo $foo
bar
[standalone@localhost:9990 /] echo

[standalone@localhost:9990 /]
{noformat}

*expected*
{noformat}
[standalone@localhost:9990 /] set foo=bar
[standalone@localhost:9990 /] echo $foo
bar
[standalone@localhost:9990 /] echo
foo=bar
[standalone@localhost:9990 /]
{noformat}

",,,,,,,,,,,,,,,,JBEAP-5043,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1614,,,,,,0.0,0.0,,1|i064sf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI doesn't autocomplete for unalias command,WFCORE-1595,12632065,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,15/Jun/16 6:10 AM,24/Jun/16 11:28 AM,29/Nov/16 3:51 PM,24/Jun/16 11:28 AM,3.0.0.Alpha1,,,,,,3.0.0.Alpha3,,CLI,,,,,0,downstream_dependency,,,,,"Tab completion for CLI unalias commend doesn't seem to work. CLI will suggest available option, but doesn't autocomplete.

*actual*
{noformat}
[standalone@localhost:9990 /] unalias read_<TAB>
  read_undertow  
[standalone@localhost:9990 /] unalias read_<TAB>
  read_undertow 
{noformat}

*expected*
{noformat}
[standalone@localhost:9990 /] unalias read_<TAB>
[standalone@localhost:9990 /] unalias read_undertow
{noformat}",,,,,,,,,,,,,,,,JBEAP-4939,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1612,,,,,,0.0,1.0,,1|i0633b:,9223372036854775807,,,,,,,,,,,"15/Jun/16 6:22 AM;soul2zimate;completion for alias and unalias have been achieved by AliasCompletion.java and AeshCompletionHandler.java. However, CLI also does its completion in OperationRequestCompleter.java which add the {{""""}} to candidates list. This fails the [else if check|https://github.com/aeshell/aesh/blob/0.66.8/src/main/java/org/jboss/aesh/console/AeshCompletionHandler.java#L163] in AeshCompletionHandler.java. Therefore, auto completion does not work and it shows one candidates in a new line. ",,,,,,,,,,,,,,,,,,,,,,,,,,
Update the default variable value in .jbossclirc file,WFCORE-1593,12631071,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,14/Jun/16 1:33 AM,20/Jun/16 7:20 PM,29/Nov/16 3:51 PM,20/Jun/16 7:20 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha3,,CLI,,,,,0,downstream_dependency,,,,,"$JBOSS_HOME/bin/.jbossclirc file can be used to set up CLI variables or to run a set of CLI commands at the beginning of every new CLI session. It contain a *commented out* CLI variable declaration part.

Although the _myvar_ is commented out by default, we should update it's value to some real working example to improve the quality of example (one user was already confused :) ).
{code:diff}
-# set myvar=/subsystem=datasources/data-source=myDS
+# set myvar=/subsystem=datasources/data-source=ExampleDS
{code}

",,,,,,,,,,,,,,,,JBEAP-4951,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1610,,,,,,0.0,0.0,,1|i05x13:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PropertiesFileLoader persists entries after deletion,WFCORE-1592,12631010,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,mbarkley,mbarkley,13/Jun/16 2:50 PM,29/Jul/16 5:06 AM,29/Nov/16 3:51 PM,28/Jul/16 12:56 PM,2.1.0.Final,2.2.0.CR1,2.2.0.CR2,3.0.0.Alpha1,,,2.2.0.Final,3.0.0.Alpha4,Domain Management,,,,,0,,,,,,"There is a bug in PropertiesFileLoader#persistProperties, specifically [here|https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/PropertiesFileLoader.java#L230-L238]. Because of the write call in the else block, properties are persisted to the file even after they have been deleted in memory.

[Here|https://github.com/psiroky/uberfire/blob/2811baeac64805646d3943a096e77cf56d5fdc26/uberfire-extensions/uberfire-security/uberfire-security-management/uberfire-security-management-wildfly/src/main/java/org/uberfire/ext/security/management/wildfly/properties/WildflyUserPropertiesManager.java#L221-L246] is a fixed implementation of persistProperties that we are using as a workaround.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1710,https://github.com/wildfly/wildfly-core/pull/1712,,,,,0.0,8.0,,1|i05wq7:,9223372036854775807,,,,,,,,,,,26/Jul/16 7:51 PM;brian.stansberry;[~luck3y] Can you evaluate the code in the description and the linked fix and if it's ok send up a PR? Thanks.,"27/Jul/16 6:53 PM;luck3y;I wrote some tests for this, and as [~mbarkley] says, sure enough removed entries are still persisted. I've removed the offending else, and everything still seems to be working :) Thanks [~mbarkley]!",28/Jul/16 4:29 PM;dlofthouse;It shouldn't be a problem but can we double check the add-user utility is working Ok with any changes.,28/Jul/16 4:49 PM;brian.stansberry;+1. If there are any issues we have time to correct them for 2.2.0.Final.,"28/Jul/16 5:15 PM;luck3y;Yep, I'll test this against full and make sure its still working.","28/Jul/16 5:27 PM;luck3y;add-user is working fine, as it only enables / disables users by commenting them out then resaving the file, so I think we're good there. I'll have a quick look in the console too for any user management.","28/Jul/16 9:21 PM;luck3y;I've checked the web console too, this doesn't appear to use this mechanism for adding users at all. So I think we're good to go.",29/Jul/16 5:06 AM;dlofthouse;No there is nothing in the console that touches the users.,,,,,,,,,,,,,,,,,,,
jboss-cli help message lacks --properties argument,WFCORE-1591,12630885,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,13/Jun/16 5:29 AM,21/Jun/16 11:04 AM,29/Nov/16 3:51 PM,21/Jun/16 11:04 AM,3.0.0.Alpha1,,,,,,3.0.0.Alpha3,,CLI,,,,,0,downstream_dependency,,,,,"--properties is not listed among valid jboss-cli arguments. Properties are used for CLI property substitution - https://access.stage.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/management-cli-guide/#property_substitution

{noformat}
[pkremens@localhost bin] $ ./jboss-cli.sh --help > help
[pkremens@localhost bin] $ grep -c properties help 
0
{noformat}
",,,,,,,,,,,,,,,,JBEAP-4976,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1607,,,,,,0.0,0.0,,1|i05w13:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Default parameter length validating ignores setMinSize(0),WFCORE-1590,12630827,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,dlofthouse,dlofthouse,12/Jun/16 10:18 AM,11/Aug/16 11:17 AM,29/Nov/16 3:51 PM,11/Aug/16 11:17 AM,3.0.0.Alpha1,,,,,,3.0.0.Alpha5,,Domain Management,,,,,0,affects_elytron,,,,,"With the following attribute definition: -

{code:java}
    static final SimpleAttributeDefinition REPLACEMENT = new SimpleAttributeDefinitionBuilder(ElytronDescriptionConstants.REPLACEMENT, ModelType.STRING, false)
        .setAllowExpression(true)
        .setMinSize(0)
        .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES)
        .build();
{code}

The following error is reported if an empty string is used as a parameter: -

{noformat}

[standalone@localhost:9990 /] ./subsystem=elytron/regex-name-rewriter=strip-realm:add(pattern=""@ELYTRON.ORG"", replacement="""", replace-all=true)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0113: '' is an invalid value for parameter replacement. Values must have a minimum length of 1 characters"",
    ""rolled-back"" => true
}
{noformat}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1678,,,,,,0.0,2.0,,1|i05vp3:,9223372036854775807,,,,,,,,,Workaround Exists,"Manually provide a StringLengthValidator: -


{code:java}
    static final SimpleAttributeDefinition REPLACEMENT = new SimpleAttributeDefinitionBuilder(ElytronDescriptionConstants.REPLACEMENT, ModelType.STRING, false)
        .setAllowExpression(true)
        .setValidator(new StringLengthValidator(0))
        .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES)
        .build();
{code}
","13/Jul/16 12:48 PM;brian.stansberry;This is a borderline RFE, as it's not clear how this functionality can consistently be provided. In the end the AD needs to call the user provided validator, and if that isn't configured correctly it will reject things regardless of how setMinSize()/setMaxSize() are set on the AD. For allowNull and allowExpressions we can get around that by not calling the provided validator for undefined or expression values but if there's a value we have to call the provided validator.

We can however improve things some by better handling cases where no validator is provided. I think that's your real goal here anyway. ","13/Jul/16 5:29 PM;brian.stansberry;I did a PR that just deals with default validators created by the AD for STRING and BYTES values. There's already some logic re: sizing in the AD builders for collection type attributes.

If the user provides the validator directly, then they have to configure the correct values and what they pass to the AD builder's setMin/MaxSize is not used in validation, only in production of read-resource-description output.",,,,,,,,,,,,,,,,,,,,,,,,,
Logging handler lost due to conflict handlers in logging.properties and standalone.xml,WFCORE-1585,12630269,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,tkimura,tkimura,08/Jun/16 10:37 PM,22/Jun/16 6:04 PM,29/Nov/16 3:51 PM,,2.0.10.Final,,,,,,,,Logging,,,,,0,,,,,,"Console logging doesn't work after logging subsystem init with the following configuration.

* logging.properties is configured with ASYNC with CONSOLE handlers.
* standalone.xml is configured with stock FILE and CONSOLE handlers.

Background of why there is a mismatch between logging.properties and standalone.xml, EAP image for OpenShift is configured with ASYNC with CONSOLE handlers by default. But users can customize standalone.xml and apply custom configuration based on the stock standalone.xml.

Expected result is logging configuration from standalone.xml is applied once logging subsystem come up regardless the mismatch.

Most likely related to WFCORE-159.",,,,,,,,,,,,WFCORE-159,,,,,,,,,,,,,,,08/Jun/16 10:38 PM;tkimura;logging.properties;https://issues.jboss.org/secure/attachment/12406062/logging.properties,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1345816,,,,,Perform,,,,,,,,,,,,,,,,,,,1.0,3.0,,1|i05slr:,9223372036854775807,,,,,,,,,,Rename logging handler to avoid the conflict between logging.properties and standalone.xml.,"08/Jun/16 10:39 PM;tkimura;Attached logging.properties to reproduce this issue. Just put this file under standalone/configuration and boot, we won't see the console logging.

Workaround is to rename CONSOLE to CONSOLE2 in logging.properties.","09/Jun/16 3:12 PM;jamezp;This is likely happening because the {{ASYNC}} handler is removed which means it gets closed. Since it's closed it closes each of it's sub-handlers and since the name is the same, e.g. {{CONSOLE}}, the class name is the same and the module is the same it's not reconstructed so the writer is still closed. I'll have to think about how to solve this.",22/Jun/16 6:04 PM;jira-bugzilla-migration;Martin Šmérek <msmerek@redhat.com> changed the Status of [bug 1345816|https://bugzilla.redhat.com/show_bug.cgi?id=1345816] from NEW to ASSIGNED,,,,,,,,,,,,,,,,,,,,,,,,
CLI connect command help content is out of date,WFCORE-1584,12630181,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,08/Jun/16 10:16 AM,08/Jun/16 2:59 PM,29/Nov/16 3:51 PM,08/Jun/16 2:59 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha2,,CLI,,,,,0,,,,,,"The synopsis states

connect [controller_alias | [protocol://][host][:port]]

while protocol part alone cannot be specified w/o the host.

The other issue is protocol argument is described as

protocol  - optional, default value is http.

while the default value is http-remoting.",,,,,,,,,,,,,,,,JBEAP-4898,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i05s5b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"the ""cli"" Maven module: should the JBoss LogManager dependency be optional?",WFCORE-1580,12629945,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,lthon,lthon,07/Jun/16 10:43 AM,07/Jun/16 10:43 AM,29/Nov/16 3:51 PM,,2.1.0.Final,,,,,,,,CLI,,,,,0,,,,,,"Say I have a very simple Java program using the WildFly CLI scripting facilities:

{code:java}
    public static void main(String[] args) throws Exception {
        CLI cli = CLI.newInstance();
        cli.connect();
        System.out.println(cli.cmd("":whoami"").getResponse());
        cli.disconnect();
    }
{code}

This is in a small Maven project that has a single dependency:

{code:xml}
        <dependency>
            <groupId>org.wildfly.core</groupId>
            <artifactId>wildfly-cli</artifactId>
            <version>2.1.0.Final</version>
        </dependency>
{code}

When trying to run the program (no matter if there's a running WildFly server or not), I get the following exception:

{code}
Exception in thread ""main"" java.lang.NoClassDefFoundError: org/jboss/logmanager/LogContextSelector
	at org.jboss.as.cli.embedded.EmbeddedControllerHandlerRegistrar.registerEmbeddedCommands(EmbeddedControllerHandlerRegistrar.java:89)
	at org.jboss.as.cli.impl.CommandContextImpl.initCommands(CommandContextImpl.java:581)
	at org.jboss.as.cli.impl.CommandContextImpl.<init>(CommandContextImpl.java:302)
	at org.jboss.as.cli.impl.CommandContextFactoryImpl.newCommandContext(CommandContextFactoryImpl.java:44)
	at org.jboss.as.cli.scriptsupport.CLI.connect(CLI.java:80)
	at cz.ladicek.foobar.Main.main(Main.java:8)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
Caused by: java.lang.ClassNotFoundException: org.jboss.logmanager.LogContextSelector
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	... 11 more
{code}

This is because {{CommandContextImpl}}'s constructor calls {{EmbedServerHandler.create}} and for the {{EmbedServerHandler}} class to load, there has to be JBoss LogManager present on the classpath.

The {{wildfly-cli}} Maven module already has a dependency on JBoss LogManager, except that...

{code:xml}
        <dependency>
            <groupId>org.jboss.logmanager</groupId>
            <artifactId>jboss-logmanager</artifactId>
            <optional>true</optional>
        </dependency>
{code}

It's optional. I guess this made sense in WildFly Core 1.x which didn't have server embedding, but in WildFly Core 2.x, I wonder if the dependency should be mandatory.

Thoughts?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i05qs7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Perform check when changing 'path' attribute of 'deployment-scanner' instance,WFCORE-1579,12629919,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,thofman,thofman,thofman,07/Jun/16 9:31 AM,24/Aug/16 5:50 PM,29/Nov/16 3:51 PM,24/Aug/16 5:50 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha6,,Deployment Scanner,,,,,0,,,,,,"When creating my own deployment-scanner, I have to provide {{path}} attribute where given value is checked whether it is a real directory on current filesystem. Although when I change value of this attribute in existing deployment-scanner instance, such check is not performed and I can provide non-existent directory. This leads to server crash after calling reload operation:
# start EAP7 server and connect to CLI
# create your own deployment-scanner instance pointing to existing directory
{code}
[standalone@localhost:9990 /] /subsystem=deployment-scanner/scanner=mysc:add(path=/home/jstourac/Downloads/jboss-eap-7.0/standalone/deployments)
{""outcome"" => ""success""}
{code}
# change path of deployment-scanner to some nonexisting directory
{code}
[standalone@localhost:9990 /] /subsystem=deployment-scanner/scanner=mysc:write-attribute(name=path,value=/nonexistent)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{code}
# perform reload operation
# server fails with following output in console.log
{code}
15:29:08,039 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-5) WFLYDS0013: Started FileSystemDeploymentService for directory /home/jstourac/Downloads/jboss-eap-7.0/standalone/deployments
15:29:29,068 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
15:29:29,070 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0019: Host default-host stopping
15:29:29,071 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) WFLYJCA0019: Stopped Driver service with driver-name = h2
15:29:29,073 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0008: Undertow HTTP listener default suspending
15:29:29,075 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
15:29:29,076 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0004: Undertow 1.3.21.Final-redhat-1 stopping
15:29:29,081 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]
15:29:29,082 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 16ms
15:29:29,083 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0049: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) starting
15:29:29,135 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 13) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""deployment-scanner""),
    (""scanner"" => ""mysc"")
]): java.lang.IllegalArgumentException: WFLYDS0023: /nonexistent does not exist
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.<init>(FileSystemDeploymentService.java:273)
	at org.jboss.as.server.deployment.scanner.DeploymentScannerAdd.execute(DeploymentScannerAdd.java:124)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)

15:29:29,139 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) ""WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations""
15:29:29,140 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""parallel-subsystem-boot"") failed - address: ([]) - failure description: ""\""WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations\""""
15:29:29,141 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
15:29:29,144 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.
15:29:29,159 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 4ms
{code}
# one has to manually modify {{EAP_HOME/standalone/configuration/standalone.xml}} removing problematic deployment-scanner part to be able to start server again

It would be great if there is same check to {{path}} atribute performed when changing it in existing instance of deployment-scanner as what is performed during the adding a new instance of deployment-scanner.",,,,,,,,,,,,,,,,JBEAP-4874,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1637,,,,,,0.0,1.0,,1|i05qmn:,9223372036854775807,,,,,,,,,,,"28/Jun/16 5:54 AM;thofman;David's comment on related issue (WFCORE-1333):

{quote}
While I agree that the server should not crash in this case, validating the attribute is the wrong answer.

Here are a few ways in which it could fail:

* The directory might be moved or deleted while the server is running
* The directory's permissions might be modified while the server is running
* The user might expect to be able to start the server and add the directory after the fact

The reason this fails is that a transient condition is being checked for in the configuration, but the configuration has no way to enforce the ongoing conformence to the constraint.

The right answer is for the deployment scanner to dynamically be able to handle the directory appearing and disappearing. The user should be allowed to set a non-existent path component, which causes the deployment scanner to find no files until the path is created. The relative-to component, however, should be validated as that is a model integrity check.
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,
Better check of names of existing resources when adding '{local|remote-destination-outbound-socket-binding',WFCORE-1578,12629796,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,07/Jun/16 1:13 AM,30/Jun/16 6:42 PM,29/Nov/16 3:51 PM,30/Jun/16 6:42 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha3,,Domain Management,,,,,0,downstream_dependency,,,,,"Lets have some {{/socket-binding-group=standard-sockets/socket-binding}} with particular name. Then when I create some {{/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding}} or {{/socket-binding-group=standard-sockets/local-destination-outbound-socket-binding}} using same name as of already existing {{socket-binding}} resource, {{add}} operation is successful but when I perform server reload, it crashes as it is not able to parse configuration. See:

# Start EAP and log to CLI
# create your own {{socket-binding}} resource and {{\{remote|local\}-destination-outbound-socket-binding}} resource with same names and perform reload
{code}
/socket-binding-group=standard-sockets/socket-binding=myBinding:add()
/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=myBinding:add(host=localhost,port=8765)
or
/socket-binding-group=standard-sockets/local-destination-outbound-socket-binding=myBinding:add(socket-binding-ref=http)
reload
{code}
# server crashes with following stacktrace in console log:
{code}
17:31:40,447 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) WFLYJCA0019: Stopped Driver service with driver-name = h2
17:31:40,453 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTP listener default suspending
17:31:40,454 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
17:31:40,454 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0004: Undertow 1.3.21.Final-redhat-1 stopping
17:31:40,458 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-7) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]
17:31:40,461 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 22ms
17:31:40,461 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) starting
17:31:40,489 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)
	at org.jboss.as.server.ServerService.boot(ServerService.java:356)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)
	at java.lang.Thread.run(Thread.java:745)
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[410,9]
Message: WFLYCTL0042: A socket-binding or a outbound-socket-binding myBinding already declared has already been declared in socket-binding-group standard-sockets
	at org.jboss.as.server.parsing.StandaloneXml_4.parseSocketBindingGroup(StandaloneXml_4.java:518)
	at org.jboss.as.server.parsing.StandaloneXml_4.readServerElement(StandaloneXml_4.java:254)
	at org.jboss.as.server.parsing.StandaloneXml_4.readElement(StandaloneXml_4.java:141)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:103)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:49)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)
	... 3 more

17:31:40,490 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
17:31:40,491 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.
17:31:40,496 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 3ms
{code}

After this occurs, one needs to fix {{./standalone/configuration/standalone.xml}} manually by removing duplicate resources.

If there is a problem for those resources to have same names I would welcome that names are checked during the {{add}} operation already regarding to all resources in {{socket-binding}} and {{\{remote|local\}-destination-outbound-socket-binding}}.

Note: not sure whether CLI component is appropriate, please change if there is better component for this.",,,,86400,86400,,0%,86400,86400,,,,,,,JBEAP-4861,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1597,,,,,,0.0,1.0,,1|i05pxb:,9223372036854775807,,,,,,,,,,,"07/Jun/16 2:53 PM;brian.stansberry;Just an FYI: ""CLI"" component should only be used for client side issues.",,,,,,,,,,,,,,,,,,,,,,,,,,
After a full-replace-deployment operation a server on a hosts subsystem model is empty,WFCORE-1577,12629785,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,brian.stansberry,jamezp,jamezp,06/Jun/16 7:10 PM,24/Oct/16 11:36 PM,29/Nov/16 3:51 PM,12/Jun/16 2:59 PM,,,,,,,2.2.0.CR3,3.0.0.Alpha2,Domain Management,,,,,0,,,,,,Executing a {{full-replace-deployment}} operation on a deployment deployed to a server in a managed domain will result a servers subsystem model to be an empty list.,,,,,,,,,,,,WFCORE-495,,,,,,,,,,,,,,,06/Jun/16 7:17 PM;jamezp;WFCORE-1577-test-case.patch;https://issues.jboss.org/secure/attachment/12405946/WFCORE-1577-test-case.patch,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1598,https://github.com/wildfly/wildfly-core/pull/1605,,,,,1.0,5.0,,1|i05puv:,9223372036854775807,,,,"Use the test from https://github.com/jamezp/wildfly-core/tree/WFCORE-1577 or the attached patch and execute with:
{code}
cd testsuite/domain
mvn clean test -Dtest=DeploymentTestCase
{code}",,,,,,,"06/Jun/16 9:07 PM;brian.stansberry;The param to the server-group/deployment add op and the full-replace-deployment op is ""enabled"" not ""enable"". Fix that in your test and it passes.

That doesn't mean there isn't a bug here, but it may fix your plugin if that's where you are hitting this.","06/Jun/16 9:37 PM;brian.stansberry;The problem is in DeploymentHandlerUtil.undeploy, which is written as if it is only called from an op targeting a deployment resource, but DeploymentFullReplaceHandler invokes it from the root resource. It takes the resource at the op address and removes all the subsystem children.

This fails if neither the server-group/deployment add op nor the full-replace-deployment op have the ""enabled"" param defined, or if the former has it defined as ""true"" and the latter as ""false"". Those are the combinations that result in DeploymentHandlerUtil.undeploy being invoked.",06/Jun/16 10:31 PM;jamezp;That fixed it for my needs. I knew it had to be something simple I had wrong. Thanks!,07/Jun/16 12:41 PM;brian.stansberry;The WFCORE-495 fix introduced the WFCORE-1577 problem by bringing in the call to DeploymentHandlerUtil.undeploy from the full-replace-deployment handler.,07/Jun/16 12:44 PM;jamezp;Just has an FYI WFCORE-495 also introduced WFCORE-1569. I'm not sure if it will/can be fixed at the same time so I just wanted to point it out.,,,,,,,,,,,,,,,,,,,,,,
RemotingModelControllerClient can hang on close,WFCORE-1573,12628499,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,dmlloyd,dmlloyd,27/May/16 4:40 PM,12/Jun/16 2:57 PM,29/Nov/16 3:51 PM,12/Jun/16 2:57 PM,,,,,,,2.2.0.CR3,3.0.0.Alpha2,Domain Management,,,,,0,,,,,,"RemotingModelControllerClient closes its Remoting endpoint.  While generally not correct, this can still be done if the close is performed asynchronously.  We can revisit the relationship between the remote controller client and its connections and endpoints at a later time.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,,,,,,,0.0,0.0,,1|i05idj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Suggestion list for argument value is not generated if the value contains a whitespace,WFCORE-1572,12628474,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,spyrkob,spyrkob,27/May/16 12:20 PM,20/Jul/16 8:59 PM,29/Nov/16 3:51 PM,19/Jun/16 10:04 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha2,,CLI,,,,,0,,,,,,"When an argument value contains a space (eg. {{deploy /path/to/test-application.war --all-server-groups --headers=\{rollout id=foo\}}}) and if user hits tab after the whitespace, suggestions are generated based on the command, rather than the current argument's name.",,,,,,,,,,,,,,,,JBEAP-4743,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1594,,,,,,0.0,0.0,,1|i05i7z:,9223372036854775807,,,,"# type {{deploy /path/to/test-application.war --all-server-groups --headers=\{rollout }} in CLI
# hit tab

Result:
# {{--}} appended to the command, no further suggestions (ie. {{deploy test.war --headers=\{rollout --}}

Expected:
# generated suggestionslist {{\[id=  main-server-group  name=  other-server-group\]}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Saved rollout-plan 'name' or 'id' attribute discrepancy,WFCORE-1570,12628380,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,spyrkob,spyrkob,spyrkob,27/May/16 8:51 AM,19/Jun/16 10:05 PM,29/Nov/16 3:51 PM,19/Jun/16 10:05 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha2,,CLI,,,,,0,,,,,,"When using rollout plans for EAP deployment scenarios I can create my own named rollout-plan for ease of use. I can then apply rollout command later on, referring with name of my own rollout plan that should be used. There is minor discrepancy in the way I create and use such rollout plan though.

When I create rollout-plan, I use command like:
{code}
rollout-plan add --name=my-rollout-plan --content={rollout main-server-group(rolling-to-servers=false,max-failed-servers=1),other-server-group(rolling-to-servers=true,max-failure-percentage=20) rollback-across-groups=true}
{code}
- see {{--name}} attribute given to name my rollout plan

When I then refer to it I use following command:
{code}
deploy /path/to/test-application.war --all-server-groups --headers={rollout id=my-rollout-plan}
{code}
 - see {{id}} attribute given to {{rollout}} header operation

Yes, this is really minor issue, but I think that these two attributes used in aforementioned commands should be unified (preferably to {{name}} instead of {{id}}) as user might be confused when using it.

Note: examples are used from our documentation.
Note: I do not know whether I am missing something but I was not able to retrieve more info how to use {{rollout}} header operation in deploy command directly in CLI.",,,,,,,,,,,,,,,,JBEAP-3771,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1583,,,,,,0.0,0.0,,1|i05hof:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE when executing a full-replace-deployment operation followed by an add operation for the same deployment,WFCORE-1569,12628272,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,jamezp,jamezp,26/May/16 7:21 PM,08/Sep/16 8:09 AM,29/Nov/16 3:51 PM,08/Sep/16 8:09 AM,,,,,,,3.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"Executing the {{full-replace-deployment}} operation on a domain deployment works correctly if it's a single operation (even in a composite operation). In a composite operation where an {{add}} operation is executed to add the deployment to a server-group(s) after the {{full-replace-deployment}} an NPE is thrown because the previous resource is {{null}} since it did not exist.

{code:java|title=org.jboss.as.server.deployment.DeploymentFullReplaceHandler}
// WFCORE-495 remove and call context.addResource() as below to add new resource with updated PERSISTENT value
final ModelNode deploymentModel = context.removeResource(PathAddress.pathAddress(deploymentPath)).getModel();
{code}

The {{context.removeResource()}} returns {{null}} since the deployment was not deployed on the server in the server-group.

From debugging it looks like the full composite operation is passed to each server in a server group. For obvious reasons if the {{add}} operation is done before the {{full-replace-deployment}} operation the composite operation is successful.

The easy workaround is just to ignore missing deployments in the {{org.jboss.as.server.deployment.DeploymentFullReplaceHandler}} OSH and log a debug or trace message indicating it was skipped because the deployment did not previously exist on the server. However this may need to be done at the HC operation routing level.",,,,,,,,,,,,WFCORE-495,,,,,,,,,,,,,,,26/May/16 7:04 PM;jamezp;issue-reproducer.zip;https://issues.jboss.org/secure/attachment/12405617/issue-reproducer.zip,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1782,,,,,,1.0,0.0,,1|i05h1b:,9223372036854775807,,,,"The attached project can be used to show the {{NullPointerException}}. It can be executed with the profile {{-Pexecute}} or by starting a default domain server and using the executable jar.

{code:title=Run from maven}
mvn clean package -Pexecute
{code}

{code:title=Run from command line}
mvn clean package
java -jar issue-reproducer.jar
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DeploymentRootExplodedMountProcessor does not belong in core,WFCORE-1566,12627575,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,24/May/16 2:06 AM,10/Jun/16 6:06 PM,29/Nov/16 3:51 PM,10/Jun/16 6:06 PM,,,,,,,3.0.0.Alpha2,,,,,,,0,,,,,,"This DUP should be in Wildfly full, as it deals with WAR deployments",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i05czr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Failed CLI batch command with ""deploy --force"" for replace deployment",WFCORE-1563,12627266,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,rhn-support-jwon,rhn-support-jwon,rhn-support-jwon,20/May/16 11:07 AM,27/Jul/16 12:05 PM,29/Nov/16 3:51 PM,27/Jul/16 12:05 PM,2.1.0.Final,3.0.0.Alpha1,,,,,3.0.0.Alpha2,,CLI,,,,,0,cli,jboss,,,,"Using 'deploy --force' command on CLI batch mode fails and returns an error message: ""Request is missing the address part.""

{code:title=Command}
 jboss-cli.sh --connect --controller=127.0.0.1:9999 --user=admin --password=xxx --file=""deploy.cli""
{code}

{code:title=deploy.cli}
batch
deploy --force ./jboss-ejb-in-ear.ear
run-batch
{code}

{panel:title=Full Error message}
Failed to handle 'run-batch': org.jboss.as.cli.CommandFormatException: Request is missing the address part.: Request is missing the address part.

or

The batch failed with the following error (you are remaining in the batch editing mode to have a chance to correct the error): Request is missing the address part.
{panel}

{panel:title=Expected message}
The batch executed successfully
{panel}


However, it's working in ""WildFly 10 CLI interactive mode"" and ""JBoss AS 7 CLI batch"" without error.

There is no adding ""address"" key in buildDeploymentReplace() of DeployHandler like below.
Even though on CLI batch mode it validates existence of ""address"" key in request with Util.validateRequest(), when 'run-batch' command execute in org.jboss.as.cli.handlers.batch.BatchRunHandler.doHandle()

-------------------------------------------------------------------------------------------
* First deploy: add by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentAdd()
{code}
{
    ""operation"" => ""add"",
    ""address"" => {""deployment"" => ""jboss-ejb-in-ear.ear""},
    ""content"" => [{""bytes"" => bytes {
    ...
    }}]
}
{code}
-------------------------------------------------------------------------------------------
* After deploy: replace by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentReplace()
{code}
{
    ""operation"" => ""full-replace-deployment"",
    ""name"" => ""jboss-ejb-in-ear.ear"",
    ""enabled"" => true,
    ""content"" => [{""bytes"" => bytes {
    ...
    }}]
}
{code}
-------------------------------------------------------------------------------------------
* Expected by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentReplace()
{code}
{
    ""operation"" => ""full-replace-deployment"",
    ""name"" => ""jboss-ejb-in-ear.ear"",
    ""address"" => [],
    ""enabled"" => true,
    ""content"" => [{""bytes"" => bytes {
    ...
    }}]
}
{code}
-------------------------------------------------------------------------------------------",,,,,,,,,,,,,,,,,,,,,,,,,,,20/May/16 11:05 AM;rhn-support-jwon;jboss-ejb-in-ear.ear;https://issues.jboss.org/secure/attachment/12405373/jboss-ejb-in-ear.ear,,,,,,,,,,,,,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/1570,,,,,,1.0,2.0,,1|i05b6v:,9223372036854775807,,,,"1. %WILDFLY_HOME/bin/domain.sh

2. vi deploy.cli
batch
deploy --force ./jboss-ejb-in-ear.ear
run-batch

3. jboss-cli.sh --connect --controller=127.0.0.1:9999 --user=admin --password=xxx --file=""deploy.cli""
The batch executed successfully

4. jboss-cli.sh --connect --controller=127.0.0.1:9999 --user=admin --password=xxx --file=""deploy.cli""
Failed to handle 'run-batch': org.jboss.as.cli.CommandFormatException: Request is missing the address part.: Request is missing the address part.

5. jboss-cli.sh --connect --controller=127.0.0.1:9999 --user=admin --password=xxx --file=""deploy.cli""
Failed to handle 'run-batch': org.jboss.as.cli.CommandFormatException: Request is missing the address part.: Request is missing the address part.",,,,,Workaround Exists,"Edit $WILDFLY_HOME/bin/jboss-cli.xml to skip validateRequest()
from 
<validate-operation-requests>true</validate-operation-requests>
to
<validate-operation-requests>false</validate-operation-requests>","03/Jun/16 12:40 AM;rhn-support-jwon;Merged to upstream master
https://github.com/wildfly/wildfly-core/commit/7e4a50eae93175446b6974d11cbaab8718fba9ef",27/Jul/16 12:04 PM;brian.stansberry;Reopening to correct Fix Version.,,,,,,,,,,,,,,,,,,,,,,,,,
Wildcard ops seem to drop the underlying error on failure,WFCORE-1562,12627105,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,19/May/16 4:19 PM,19/May/16 4:19 PM,29/Nov/16 3:51 PM,,,,,,,,,,,,,,,0,,,,,,"[domain@localhost:9990 /] :read-resource(attributes-only=true, recursive=true)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0275: Cannot define both 'attributes-only' and 'recursive'"",
    ""rolled-back"" => true
}

But using a wildcard:

[domain@localhost:9990 /] /host=*:read-resource(attributes-only=true, recursive=true)
{
    ""outcome"" => ""failed"",
    ""result"" => [],
    ""rolled-back"" => true
}

The error is present up until the final response, then it's dropped somewhere.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i05a8f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
read-resource responds with incorrect address when going through host controller,WFCORE-1561,12626866,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,mazz,mazz,18/May/16 10:25 PM,20/Jul/16 9:10 PM,29/Nov/16 3:51 PM,19/Jun/16 10:06 PM,2.1.0.Final,,,,,,3.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"I have a typical small domain setup: one master host controller (aka domain controller) and one slave host controller with ""server-one"" and ""server-two"" servers.

I need to discover things running in those two servers (server-one and server-two). As part of the discovery, I invoke read-resource operations via the management interface - for example, to discover all the datasources in server-one:

/host=slave/server=server-one/subsystem=datasources/data-source=*/:read-resource(include-runtime=true)

For each returned datasource, I need to know that datasource's full address. The problem is, I do not get the full address. Instead, the CLI returns the following partial address:

{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""datasources""),
            (""data-source"" => ""ExampleDS"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""allocation-retry"" => undefined,
...and the rest of the properties for the ExampleDS datasource...
            }
        }
    }]
}

The address should be the full address of:

        ""address"" => [
            (""host"" => ""slave""),
            (""server"" => ""server-one""),
            (""subsystem"" => ""datasources""),
            (""data-source"" => ""ExampleDS"")
        ],

NOTE! This problem occurs both when I connect to the domain controller and when I connect to the slave host controller - it doesn't matter, the CLI returns the same erroneous address if connected to either one.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,8.0,,1|i058tj:,9223372036854775807,,,,,,,,,,,"19/May/16 10:19 AM;mazz;Uh, it appears this is done on purpose, but I don't know why, and it doesn't seem right. In both: org.jboss.as.controller.PathAddress.pathAddress(ModelNode) and org.jboss.as.controller.PathAddress.pathAddress(List<PathElement>) I see code like:

   if (index == 1 && name.equals(SERVER) && seen.contains(HOST)) {
      seen.clear();
   }

But it seems to me that if I'm issuing a read-resource on an address such as ""/host=slave/server=server-one/subsystem=datasources/data-source=*"" then the response returning simply ""/subsystem=datasources/data-source=ExampleDS"" is wrong because that address is no longer fully qualified - outside of knowing the actual request that was made, you don't know what data-source this really is - was it host=slave? host=another? Was it server-one or server-two?

It seems to me this should return the full address as was queried, not a partial address. That is what my code is expecting anyway.",19/May/16 10:37 AM;brian.stansberry;[~mazz] Did debugging lead you to that code as the reason for the problem?,"19/May/16 10:41 AM;brian.stansberry;Actually I doubt very much that code is the problem. The 'seen' variable is not used in constructing the returned PathAddress, it's just used for checking for the key appearing in multiple elements of the path, where /host=x/server=y/subsystem=foo/host=bar is a special case where that is legal.","19/May/16 10:48 AM;brian.stansberry;[~harald.pehl] I agree with John in that the return value should include the host data, but I'm concerned that fixing it might impact the console, so I wanted to give you an FYI. Do you have any concerns?

It looks like the problem relates to the fact that the host+server is fully specified. For example this analogous operation has the behavior John reports:

{code}
[domain@localhost:9990 /] /host=master/server=server-one/subsystem=logging/logger=*:read-resource(include-runtime=true)
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [
                (""subsystem"" => ""logging""),
                (""logger"" => ""com.arjuna"")
            ],
            ""outcome"" => ""success"",
            ""result"" => {
                ""category"" => ""com.arjuna"",
                ""filter"" => undefined,
                ""filter-spec"" => undefined,
                ""handlers"" => undefined,
                ""level"" => ""WARN"",
                ""use-parent-handlers"" => true
            }
        },
        . . . .
{code}

But this one that uses server=* instead of server=server-one works as expected:

{code}
[domain@localhost:9990 /] /host=master/server=*/subsystem=logging/logger=*:read-resource(include-runtime=true)
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""server-one""),
                (""subsystem"" => ""logging""),
                (""logger"" => ""com.arjuna"")
            ],
            ""outcome"" => ""success"",
            ""result"" => {
                ""category"" => ""com.arjuna"",
                ""filter"" => undefined,
                ""filter-spec"" => undefined,
                ""handlers"" => undefined,
                ""level"" => ""WARN"",
                ""use-parent-handlers"" => true
            }
        },
        . . . .
{code}","19/May/16 10:53 AM;brian.stansberry;So, Ken AbstractMultiTargetHandler Wills, enjoy!","19/May/16 10:56 AM;mazz;> Did debugging lead you to that code as the reason for the problem?

No, it did not. I visually inspected the code and found that stuff that appears to strip host/server and just assumed that is where it was. You can ignore that if you think that is not relevant.

But the CLI commands and its response in my original description is what I see when I actually execute them. I'm getting a partial address when I was expecting the full address.
","19/May/16 11:22 AM;harald.pehl;[~brian.stansberry] it turns out that we've already ""fixed"" that in the console. The console tries to detect such operations and turns the relative into a fully qualified address. Digging through that code I remember that I wanted to file an issue for that. Seems that I forgot to do so. So thanks [~mazz] for bringing this up.

I don't have any concerns fixing this. I only need to make sure the workaround still works with old servers w/o the fix and causes no harm otherwise.  ","19/May/16 11:54 AM;mazz;> it turns out that we've already ""fixed"" that in the console.
> The console tries to detect such operations and turns the relative into a fully qualified address.

I just wrote the same workaround code myself :-) Code is found here if anyone wants to see how I did it -  HWKAGENT-92 - quick and dirty, but gets the job done. It requires that you know the request that was sent that resulted in the partial address response.",,,,,,,,,,,,,,,,,,,
Cli calls leak resources in Host Controller when repeatedly calling jboss-cli.sh,WFCORE-1560,12626950,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,brian.stansberry,michael.noack,michael.noack,19/May/16 6:02 AM,12/Aug/16 3:01 PM,29/Nov/16 3:51 PM,,2.0.8.Final,,,,,,3.0.0.Beta1,,Domain Management,,,,,0,,,,,,"When executing management commands using jboss-cli.sh against the domain controller of a cluster repeatedly the host controller uses up more and more memory in oldgen. After several thousands of runs of jboss-cli the host controller eventually becomes unresponsive (see attached picture for memory consumption, dc became entirely unresponsive at roughly 6:30am):

[root@dc broken]# /opt/wildfly-10.0.0.Final-DC/bin/./jboss-cli.sh --connect  --user=""username"" --password=""password"" --command="":read-children-names(child-type=host)""
Failed to connect to the controller: The controller is not available at xx.xx.xx.xx:9993: java.net.ConnectException: WFLYPRT0023: Could not connect to https-remoting://xx.xx.xx.xx:9993. The connection timed out: WFLYPRT0023: Could not connect to https-remoting://xx.xx.xx.xx:9993. The connection timed out

I discovered the issue when testing whether https://issues.jboss.org/browse/WFCORE-974 was actually resolved in wildfly-10.0.0.Final as advertised. I can confirm that the issue is different, since no OOM-Exceptions are thrown. However the DC still becomes useless, since it won't accept any connections anymore. -I will check whether the work-around from WFCORE-974 applies to this issue as well.- However the work-around from WFCORE-974 doesn't fix this issue.

Please note that the attached logs are UTC, while the monitoring is UTC+2. Also the collection values are misleading since I haven't adapted my monitoring to the new output of jstat in JDK8. PU and PC are thus MU and MC.","OS: CentOS 7.2
Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)
Wildfly-10.0.0-Final",,,,,,,,,,,,,,,,,,,,,,,,,,19/May/16 5:58 AM;michael.noack;JVM-DC.png;https://issues.jboss.org/secure/attachment/12405303/JVM-DC.png,19/May/16 5:59 AM;michael.noack;console-dc.log;https://issues.jboss.org/secure/attachment/12405302/console-dc.log,19/May/16 5:59 AM;michael.noack;host-controller.log;https://issues.jboss.org/secure/attachment/12405301/host-controller.log,19/May/16 5:59 AM;michael.noack;process-controller.log;https://issues.jboss.org/secure/attachment/12405300/process-controller.log,,User Experience,,,,,,,,,,,,,,,,Medium,,,,,,,,,,4.0,1.0,,1|i059bz:,9223372036854775807,,,,"Setup a wildfly-10.0.0.Final cluster with a dedicated domain controller and two slaves.
Run management commands on the cluster in a loop.
In my case the following commands are run in a loop:
- get all hosts connected
- iterate over hosts
- get all deployments of a single host and select a specific deployment
- get the number of sessions for the selected deployment

hosts=/opt/wildfly-10.0.0.Final-DC/bin/./jboss-cli.sh --connect  --user=""username"" --password=""password"" --command="":read-children-names(child-type=host)""
for i in $hosts
do
  host=$(echo $i | cut -d ""\"""" -f 2)
  deployment100=$(/opt/wildfly-10.0.0.Final-DC/bin/./jboss-cli.sh --connect  --user=""username"" --password=""password"" --command=""/host=$host/server=$host-100 :read-children-names(child-type=deployment)"" | grep deploymentname | cut -d ""\"""" -f 4)
  sessions=$(/opt/wildfly-10.0.0.Final-DC/bin/./jboss-cli.sh --connect  --user=""username"" --password=""password"" --command=""/host=$host/server=$host-100/deployment=$deployment100/subsystem=undertow :read-attribute(name=active-sessions)"")
done",,,,,,,12/Aug/16 3:01 PM;brian.stansberry;Is this still a problem with 10.1.0.CR1?,,,,,,,,,,,,,,,,,,,,,,,,,,
"read-children-names on server-group deployments returns empty list, when it should just DTRT and return a list",WFCORE-1558,12626497,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,17/May/16 5:41 PM,26/Sep/16 10:07 AM,29/Nov/16 3:51 PM,,,,,,,,,,,,,,,0,,,,,,"Using a wildcard :read-children-names on deployments returns an empty list, when it should probably just return an error, or the right answer ;)

See OperationContextImpl.readResourceFromRoot for /server-group=*

The OSHs are based on AbstractMultiTargetHandler.

Output should be something like:

{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [(""server-group"" => ""main-server-group"")],
            ""outcome"" => ""success"",
            ""result"" => [""simple-servlet.war""]
            }
        },
        {
            ""address"" => [(""server-group"" => ""other-server-group"")],
            ""outcome"" => ""success"",
            ""result"" => 
            ""result"" => [""simple-servlet.war""]
        }
    ]
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i0571z:,9223372036854775807,,,,"[domain@localhost:9990 /] deploy ~/hello.war --all-server-groups
[domain@localhost:9990 /] /server-group=*/:read-children-names(child-type=deployment)
{
    ""outcome"" => ""success"",
    ""result"" => []
}

[domain@localhost:9990 /] /server-group=main-server-group:read-children-names(child-type=deployment)
{
    ""outcome"" => ""success"",
    ""result"" => [""hello.war""]
}

And also: 

 /server-group=*/:read-children-resources(child-type=deployment)

[domain@localhost:9990 /]  /server-group=*/:read-children-resources(child-type=deployment)
{
    ""outcome"" => ""success"",
    ""result"" => {}
}
",,,,,,,"17/May/16 6:06 PM;luck3y;[~harald.pehl] do you have any concerns if we change the return values for this? (Let me know if you need more info, or we can chat in hipchat).","18/May/16 4:26 AM;harald.pehl;Currently we do not use {{/server-group=*/:read-children-names(child-type=deployment)}}. We only use it on a specific server-group like {{/server-group=main-server-group/:read-children-names(child-type=deployment)}}. So changing this should not have an impact on the console.

I've noticed similar issues when invoking the {{read-children-names}} using wildcards:

- {{/socket-binding-group=\*/socket-binding=\*:read-resource}} &rarr; list of resources
- {{/socket-binding-group=\*:read-children-names(child-type=socket-binding)}} &rarr; empty list

and 

- {{/core-service=management/access=authorization/role-mapping=\*/include=\*:read-resource}} &rarr; list of resources
- {{/core-service=management/access=authorization/role-mapping=\*:read-children-resources(child-type=include)}} &rarr; empty list

So seems to be a general issue in {{AbstractMultiTargetHandler}}?","18/May/16 4:32 PM;brian.stansberry;[~harald.pehl] The issue is the read-children-names and read-children-resources handlers are not based on AbstractMultiTargetHandler. So xyz=* shouldn't work at all for them, but instead of fixing this by having them fail, we might as well make them based on AbstractMultiTargetHandler and give them the better behavior.",,,,,,,,,,,,,,,,,,,,,,,,
PropertiesAttributeDefinition unwrap does not properly handle undefined values,WFCORE-1557,12626496,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,17/May/16 5:21 PM,19/May/16 11:09 PM,29/Nov/16 3:51 PM,19/May/16 11:09 PM,2.2.0.CR2,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"The unwrap method resolves the value of the map entries but does not check if they are defined before calling asString(). So an undefined value will store as string ""undefined"" instead of null.

-The class doesn't any way to configure or check whether null is ok; perhaps I'll improve that as well.- <--- was incorrect",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1565,,,,,,0.0,0.0,,1|i0571r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Poor handling of 'required', 'nillable' and 'alternatives' in AttributeDefinition",WFCORE-1556,12626290,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,16/May/16 2:08 PM,22/Nov/16 7:19 PM,29/Nov/16 3:51 PM,22/Nov/16 6:47 PM,,,,,,,3.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"The handling of the notions of 'required' and 'nillable' don't comply with the specs in https://docs.jboss.org/author/display/WFLY/Description+of+the+Management+Model, particularly the ""Description of an Attribute"" part, where the 'required' and 'alternatives' fields are well described, with their relationship spelled out, while 'nillable' doesn't appear at all. Then in ""Description of an Operation Parameter or Return Value"" nillable is specified, although I think those descriptions could be tightened up in general.

The read-resource-description output for an attribute doesn't show ""required"" at all.

After a fair bit of thinking, I've finally recalled why the two separate notions of ""required"" and ""nillable"" exist in the first place.

The ""required"" and ""alternatives"" pieces go together. Is something required? And then if it is required, an alternative satisfies. So you can have two attributes/params, both required, but they are alternatives so one is defined and the other is not. And this is an ok thing.

And then 'nillable' comes in to help clients understand in a simple way whether they need to account for the possibility an undefined value. Basically:

nillable = !required || alternatives != null

Right now, nillable is implemented as

nillable = !required

There are a number of problems I see with AttributeDefinition:

1) We don't output the 'required' metadata unless it's an operation param being described.  This is contrary to spec. However we shouldn't fix this unless we can have meaningful values for 'required', ones where the value can be true but the attribute/param can still have an undefined value, due to an alternative being present. If we can't fix that, there's no point outputting required as it's just redundant with what we output for 'nillable'.

2) We do output the 'nillable' metadata, even for attribute descriptions, where it isn't in the spec. But in this case I think we change the spec, as dropping nillable would be an incompatible change.

3) We don't properly validate the ""required but has alternatives case."" This can't be validated solely with ParameterValidator impls as those only see a single attribute value and don't have contextual information about other attributes/params. To get around this limitation, devs are saying that attributes with alternatives ""allowNull"" which is equivalent to saying they are not required. But they are required! So I think a fix for this will require AttributeDefinition itself to validate the overall resource model or operation object, and skip calling the ParameterValidator if the attribute/param is undefined and an alternative is defined.

4) AttributeDefinition and AbstractAttributeDefinitionBuilder unfortunately have a getter/setter/constructor param for property ""allowNull"" instead of a property named ""required"". This is unfortunate because ""allowNull"" intuitively maps to ""nillable"", but ""required"" is a much more useful thing to set. The value of ""nillable"" can be derived from a ""required"" setting and an ""alternatives"" setting, but the value of required cannot be so derived.

I think a fix for this would probably start from 4), deprecating setAllowNull, adding get/setRequired and changing the meaning of the AD(Builder) constructor param to ""required"". The effect of this would be that all current code setting ""allowNull"" would now be setting a new ""required"" field. This should be a non-breaking change as in current code that's the effect anyway.

Next would be to fix 3), by changing how AD validates.

Next would be to change the metadata we output, such that ""required"" is always present and the ""nillable"" value is !required || alternatives != null. And change the spec accordingly.

Last, in a separate task, would be to find attributes that were configuring ""allowNull = true"" solely to allow validation to pass when alternatives are present, and fix them to say ""required=false"".",,,,,,,,,,,,,,,,,,WFCORE-1761,,,WFLY-6608,JBEAP-7354,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1781,,,,,,0.0,7.0,,1|i055qf:,9223372036854775807,,,,,,,,,,,"18/May/16 2:39 PM;brian.stansberry;I've done some analysis of cases where AbstractAttributeDefinitionBuilder.setAlternatives()/addAlternatives() are used in conjunction with ""allowNull == false"". These are cases where converting ""allowNull"" to ""!required"" and definining 'nillable' as ""nillable = !required || alternatives != null"" will produce a different result in the attribute descriptions from the current behavior of ""nillable = allowNull"".

I find:

TransactionSubsystemRootResourceDefinition PROCESS_ID_SOCKET_BINDING and PROCESS_ID_UUID
LdapAuthenticationResourceDefinition USERNAME_FILTER and ADVANCED_FILTER
org.jboss.as.server.mgmt.NativeManagementResourceDefinition SOCKET_BINDING

The last one appears to be bogus as the declared ""alternative"" is not a legal alternative in a server config.

The LdapAuthenticationResourceDefinition ones work because the relevant ADs also have ""setValidateNull(false)"" set, so the validator is not complaining about undefined values.

The TransactionSubsystemRootResourceDefinition ones work because the relevant OSHs use custom logic to avoid the normal validation checks.

The issue here a client using the 'nillable' value would now see 'true' instead of 'false' and may react incorrectly.","18/May/16 3:12 PM;brian.stansberry;Note to self: the ""setValidateNull(false)"" stuff came in as part of my work on AS7-3857 and reflects an earlier effort on how to deal with the fact that a ParameterValidator can't by itself handle the fact that an otherwise required attribute may be undefined due to the presence of an alternative.","18/May/16 5:28 PM;brian.stansberry;Another note to self: The ""setValidateNull(false)"" stuff is quite the black art. Here's one of the 3 uses of it in core and full, all of which are in the same LdapAuthenticationResourceDefinition class:

{code}
    public static final SimpleAttributeDefinition USERNAME_FILTER = new SimpleAttributeDefinitionBuilder(ModelDescriptionConstants.USERNAME_ATTRIBUTE, ModelType.STRING, false)
            .setXmlName(""attribute"")
            .setAlternatives(ModelDescriptionConstants.ADVANCED_FILTER)
            .setValidator(new StringLengthValidator(1, Integer.MAX_VALUE, true, true))
            .setValidateNull(false)
            .setAllowExpression(true)
            .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES).build();
{code}

The builder constructor passes ""false"" as the ""allowNull"" param, so this attribute is required. But it also has alternatives. This combination would normally fail to validate if the model has this attribute undefined but an alternative defined, even though such a combination is correct.

To get around this, the definition does two things:

1) It sets up a validator that has the ""allowNull"" field set to ""true"", meaning the validator will not reject undefined.

{code}
.setValidator(new StringLengthValidator(1, Integer.MAX_VALUE, true, true))
{code}

It does this even though the builder constructor says ""allowNull=false"".

2) It adds "".setValidateNull(false)"". What this does is it turns off the logic added in AS7-3857 that resulted in the AD itself validating undefined values instead of relying on the provided validator to do this. Because this logic is turned off, the AD will not reject undefined, and instead will allow the validator to validate, and it is configured to accept undefined.

It works but is very kludgy. It's not surprising that out of hundreds of attributes that declare alternatives, a great many of which are probably required if no alternative is present, only 2 use this technique.

Also, it only kind of works, since all this does is cause the AD to accept undefined. It doesn't lead to proper validation of the overall model, i.e. a check that one of the alternatives is defined. To do that we had to add to the operation execution logic special validation at the end of Stage.MODEL execution.","18/May/16 5:46 PM;brian.stansberry;I don't think the AD can ever be responsible for validating ""required but not if alternatives are present"". The AD is asked to validate (i.e. a call to validateAndSet) during execution of a particular step, but that step may be part of a composite, and it's only when the composite is complete that it's ok to validate the resulting model. For example the composite may have two write-attribute steps, one of which sets alternative a and the other undefines alternative b. The overall model state will never be valid after just one step.

There are other situations where things may be in flux, e.g. validating during parsing when some alternatives haven't been parsed yet.

In theory we could be lenient in some situations like parsing and write-attribute and stricter in others, like an add op, but that requires changes to AD that some OSHs may not use, it's complex and probably buggy, and it still doesn't allow for weird corner cases like a composite with a broken add step followed by a correcting write-attribute step.

It seems like we should be able to get rid of the need for setValidating(false) though and just detect the combination of required + alternatives and be lenient.","02/Sep/16 5:40 PM;brian.stansberry;WFCORE-1761 is for the org.jboss.as.server.mgmt.NativeManagementResourceDefinition SOCKET_BINDING thing I noted in my first comment.

It occurred to me that this work might break our JMX integration but it looks like the OpenMBeanAttributeInfo we generate from our descriptions does not deal with required/alternatives/nillable in any way so we are free to do what we want there.","06/Sep/16 9:31 AM;jmesnil;I'm hoping I'm not hijacking this issue but I have an use case in the messaging-activemq subsystem that would benefit from this improvement.

A discovery-group resource can either have a socket-binding attribute or jgroups-channel / jgroups-stack attributes.

If socket-binding attribute is set,  jgroups-channel and jgroups-stack are not valid
if socket-binding attribute is not set, JGroups resources will be used *but*  jgroups-channel and jgroups-stack can still be undefined (i.e. use default channel and stack from jgroups subsystem).
As an example, a discovery-group without any attributes must be valid and will use the default channel and stack from JGroups.
What would be the flags on the ADs?

socket-binding: required, alternative=jgroups-channel
jgroups-channel: optional, alternative=socket-binding 
jgroups-stack: optional, alternative=socket-binding


","06/Sep/16 11:17 AM;brian.stansberry;[~jmesnil] It sounds like socket-binding is just optional, since the default jgroups configs mean it is never required to set it. (The fact that the jgroups capabilities may not be available is, I think, a separate issue.)

It is legal for all the attributes that are alternatives to each other to be optional.

The tricky thing about your scenario is it can lead to unhelpful failures, where the user with a non-ha config doesn't configure a socket-binding and then gets ??? failure messages about missing jgroups requirements. I'm not sure if extra validation in your subsystem can cleanly help with that, since that validation would really be a capability presence check in Stage.MODEL, and that's not a valid thing to do since doing boot capabilities are registered concurrently.",,,,,,,,,,,,,,,,,,,,
Building an attribute builder based on another attribute builder does not copy CapabilityReferenceRecorder,WFCORE-1554,12626117,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pferraro,pferraro,pferraro,15/May/16 9:30 AM,12/Jun/16 2:56 PM,29/Nov/16 3:51 PM,12/Jun/16 2:56 PM,2.2.0.CR2,,,,,,2.2.0.CR3,3.0.0.Alpha2,Domain Management,,,,,0,,,,,,"AbstractAttributeDefinitionBuilder(final AttributeDefinition basis) seems to copy every field from the basis attribute, except the CapabilityReferenceRecorder.  Looks like an oversight.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1563,https://github.com/wildfly/wildfly-core/pull/1564,,,,,0.0,0.0,,1|i054pz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
data.dir not cleaned up correctly,WFCORE-1553,12618028,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,heiko.braun,heiko.braun,03/May/16 12:50 PM,16/May/16 10:07 AM,29/Nov/16 3:51 PM,,,,,,,,,,Server,,,,,0,,,,,,"When running the examples and shutting down the server, certain files remain in the tmp.dir.

Steps to reproduce:

1) cd examples; mvn install
2) java -Djava.io.tmpdir=servlet/servlet-cdi/target/test-tmp -jar servlet/servlet-cdi/target/example-servlet-cdi-swarm.jar
3) du -ch servlet/servlet-cdi/target/test-tmp

This leaves us with:

{noformat}
hbraun:~/dev/prj/wfs/wildfly-swarm-examples (1.0.0.Beta8)$ du -ch servlet/servlet-cdi/target/test-tmp
4.0K	servlet/servlet-cdi/target/test-tmp/wildfly-self-contained7234196008976901496.d/kernel
  0B	servlet/servlet-cdi/target/test-tmp/wildfly-self-contained7234196008976901496.d/tx-object-store/ShadowNoFileLockStore/defaultStore
  0B	servlet/servlet-cdi/target/test-tmp/wildfly-self-contained7234196008976901496.d/tx-object-store/ShadowNoFileLockStore
  0B	servlet/servlet-cdi/target/test-tmp/wildfly-self-contained7234196008976901496.d/tx-object-store
4.0K	servlet/servlet-cdi/target/test-tmp/wildfly-self-contained7234196008976901496.d
4.0K	servlet/servlet-cdi/target/test-tmp
4.0K	total
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i03rmf:,9223372036854775807,,,,,,,,,,,"13/May/16 11:36 AM;kenfinni;These files are generated by the Self Contained container in WF Core.

To have these properly removed we need to submit a PR to WF Core.",14/May/16 2:24 PM;heiko.braun;[~brian.stansberry] is core the right place for this?,"16/May/16 10:07 AM;brian.stansberry;[~hbraun] It seems like it, yes. If the idea is the self-container container cleans everything up generically, then that's in core. If the idea is subsystems clean stuff up in the data dir that they ordinarily wouldn't because they discover they are in a self-container server, then that's better as a wildfly-dev discussion. Hopefully that's not the goal as I don't think it's practical. ;)",,,,,,,,,,,,,,,,,,,,,,,,
Slaves should report the master's version in the domain model,WFCORE-1552,12619639,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,kabirkhan,kabirkhan,13/May/16 10:57 AM,04/Nov/16 6:26 PM,29/Nov/16 3:51 PM,04/Nov/16 6:26 PM,2.2.0.CR2,,,,,,3.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Setting up the mixed domain tests for an EAP7 slave, I get the following error :
{code}
  SimpleMixedDomain700TestCase>SimpleMixedDomainTest.test00002_Versioning:139 expected:<{
    ""management-major-version"" => 4,
    ""management-micro-version"" => 0,
    ""management-minor-version"" => 1,
    ""name"" => ""Unnamed Domain"",
    ""namespaces"" => [],
    ""product-name"" => ""WildFly Full"",
    ""product-version"" => ""10.1.0.Final-SNAPSHOT"",
    ""release-codename"" => ""Kenny"",
    ""release-version"" => ""2.2.0.CR2"",
    ""schema-locations"" => []
}> but was:<{
    ""management-major-version"" => 4,
    ""management-micro-version"" => 0,
    ""management-minor-version"" => 1,
    ""name"" => ""Unnamed Domain"",
    ""namespaces"" => [],
    ""product-name"" => ""JBoss EAP"",
    ""product-version"" => ""7.0.0.GA"",
    ""release-codename"" => ""Kenny"",
    ""release-version"" => ""2.1.2.Final-redhat-1"",
    ""schema-locations"" => []
}>
{code}
The 'expected' is the WildFly master values, while the 'actual' are the slave values. product-name, product-version, release-codename and release-version on the slave should be the same as the master values. Once we upgrade to Wildfly Core 3.0.0 we should also check that the management-[major/minor/micro]-version attributes on the slave are the same as the DC's values as well (i.e 5.0.0 rather than 4.0.1) This is similar to WFLY-3228 back in the day.

This is probably caused by the SyncXXX handlers for pushing the domain config as operations (WFCORE-401)",,,,,,,,,,,,,,,,JBEAP-4591,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,?,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1904,,,,,,0.0,0.0,,1|i0411z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wildfly-init-redhat.sh and jboss-eap-rhel.sh scripts do not work on RHEL 5 OS,WFCORE-1551,12619624,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,vpakan,vpakan,vpakan,13/May/16 10:31 AM,13/May/16 10:32 AM,29/Nov/16 3:51 PM,13/May/16 10:32 AM,2.2.0.CR2,,,,,,,,Scripts,,,,,0,,,,,,"Wildfly start-up script $JBOSS_HOME/docs/contrib/scripts/init.d/wildfly-init-redhat.sh tries to get successful start timestamp using following command:

grep -o '[0-9]*' $JBOSS_MARKERFILE

This however does not work on RHEL 5 OS, as grep-2.5.1 does not return regular expression result correctly when used with -o option.",,,,,,,,,,,,,,,,WFCORE-1550,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i040zr:,9223372036854775807,,,,,,,,,,,13/May/16 10:32 AM;vpakan;Cloned for wrong project,,,,,,,,,,,,,,,,,,,,,,,,,,
wildfly-init-redhat.sh script does not work on RHEL 5 OS,WFCORE-1550,12619610,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,vpakan,vpakan,vpakan,13/May/16 10:10 AM,12/Jun/16 3:37 PM,29/Nov/16 3:51 PM,12/Jun/16 3:37 PM,2.2.0.CR2,,,,,,3.0.0.Alpha2,,Scripts,,,,,0,,,,,,"Wildfly start-up script $JBOSS_HOME/docs/contrib/scripts/init.d/wildfly-init-redhat.sh tries to get successful start timestamp using following command:

grep -o '[0-9]*' $JBOSS_MARKERFILE

This however does not work on RHEL 5 OS, as grep-2.5.1 does not return regular expression result correctly when used with -o option.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1560,,,,,,0.0,0.0,,1|i040wv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Access denied when deploying to wildfly 10,WFCORE-1548,12618242,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jamezp,sreckom,sreckom,05/May/16 3:56 AM,11/May/16 2:31 PM,29/Nov/16 3:51 PM,,,,,,,,,,,,,,,1,,,,,,"I have a war application containing web services. I have no problems deploying war to wildfly 8.1. After upgrade to wildfly 10, the plugin doesn't work any more. I get this error when trying to deploy:
{code}
[Server:server-one] 09:36:51,162 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 132) Initializing Mojarra 2.2.12-jbossorg-2 20150729-1131 for context '/ActivatorFrontEnd'
[Server:server-one] 09:36:51,220 SEVERE [javax.enterprise.resource.webcontainer.
jsf.config] (ServerService Thread Pool -- 132) Critical error during deployment:
 : com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
{code}
It looks like a concurrency issue - one process is trying to use a file that other process is using. If I deploy through web console or via CLI, I don't have this issue. It is somehow related to jsf implementation. If I remove jsf from wildfly configuration file (the module and subsystem), deploy works ok (Mojara is then not triggered and deploy is successful).
I tried to deploy with 1.1.9.Alpha8, but I get the same error.","Wildfly 10, Windows 7, java 1.8_05, maven 3.0.5, maven 3.3.9",,,,,,,,,,,,,,,,,,,,,,,,,,06/May/16 2:10 AM;sreckom;TestMavenPlugin.zip;https://issues.jboss.org/secure/attachment/12401127/TestMavenPlugin.zip,06/May/16 1:07 PM;jamezp;server.log;https://issues.jboss.org/secure/attachment/12401169/server.log,,,,,,,,,,,,,,,,,,,,,http://stackoverflow.com/questions/37155695/unable-to-deploy-war-file-to-wildfly-using-jenkins,,,,,,,,,2.0,15.0,,1|i03stz:,9223372036854775807,,,,,,,,,,,05/May/16 11:18 AM;jamezp;Generally speaking {{(Access is denied)}} means you don't have access to the directory it's trying to write the temp file to. You'll want to check the permissions on the directory vs the permissions of the user running WildFly.,"05/May/16 12:02 PM;sreckom;I try to run wildfly as administrator with elevated privileges and there's no difference.. I delete tmp directory and wildfly process creates it, so permissions are not the issue here. Deploy works if I use CLI or web console. Who creates/writes this file - wildfly process or maven process? I'm guessing it's wildfly process.","05/May/16 12:23 PM;jamezp;That file would be created from the WildFly process. The plugin just sends the content via an operation to the server. The server handles deploying the content.

Do you by chance have JSF libraries in your deployment?","05/May/16 1:01 PM;sreckom;There are no jsf libraries in deployment (as I've said this is war consisiting of web services). There is however a JSF subdeployment defined as an extension
{code:xml}
        <extension module=""org.jboss.as.jsf""/>
{code}
and 
subsystem
{code:xml}
            <subsystem xmlns=""urn:jboss:domain:jsf:1.0""/>
{code}

in domain.xml that the server is using. If I remove those two lines from domain.xml, deploy works.",05/May/16 2:18 PM;jamezp;This error is definitely on the server side. IIRC though the Mojarra won't be initialized unless there is some kind of JSF marker in the deployment. Something like JSF annotations or a {{faces-config.xml}} file. It might be helpful if you can give more of the log too.,"05/May/16 2:35 PM;sreckom;There was no faces-config.xml file. The whole log of deployment looks like this:
{code}
2016-05-05 09:36:50,064 INFO  [org.jboss.weld.deployer] (MSC service thread 1-4) WFLYWELD0006: Starting Services for CDI deployment: ActivatorFrontEnd.war
2016-05-05 09:36:50,068 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorCRMProcessWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorCRMProcessWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorCRMProcessWS
 serviceName={http://telekom.si/activator/ws}ActivatorCRMProcessWSService
 portName={http://telekom.si/activator/ws}ActivatorCRMProcessWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=NPActivatorFrontEnd
 address=http://localhost:8080/ActivatorFrontEnd/services/NPActivatorFrontEnd
 implementor=si.telekom.activatorfrontend.ws.NPActivatorFrontEnd
 serviceName={http://ws.activatorfrontend.telekom.si/}NPActivatorFrontEndService
 portName={http://ws.activatorfrontend.telekom.si/}NPActivatorFrontEndPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorCRMWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorCRMWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorCRMWS
 serviceName={http://si.telekom/prov/activator/crmws}ActivatorCRMWSService
 portName={http://si.telekom/prov/activator/crmws}ActivatorCRMWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorManualDSLAM
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorManualDSLAM
 implementor=si.telekom.activatorfrontend.ws.ActivatorManualDSLAM
 serviceName={http://ws.activatorfrontend.telekom.si/}ActivatorManualDSLAMService
 portName={http://ws.activatorfrontend.telekom.si/}ActivatorManualDSLAMPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorSyncWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorSyncWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorSyncWS
 serviceName={http://si.telekom/prov/activator/synchronizationws}ActivatorSyncWSService
 portName={http://si.telekom/prov/activator/synchronizationws}ActivatorSyncWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorServicePagesWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorServicePagesWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorServicePagesWS
 serviceName={http://si.telekom/prov/activator/servicepagesws}ActivatorServicePagesWSService
 portName={http://si.telekom/prov/activator/servicepagesws}ActivatorServicePagesWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=NotifyCustomerChangeService
 address=http://localhost:8080/ActivatorFrontEnd/services/NotifyCustomerChangeService
 implementor=si.telekom.activatorfrontend.ws.NotifyCustomerChangeService
 serviceName={http://telekom.si/services/common/customer/v1}NotifyCustomerChangeServiceService
 portName={http://telekom.si/services/common/customer/v1}INotifyCustomerChangeServicePort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorTRMProcessWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorTRMProcessWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorTRMProcessWS
 serviceName={http://telekom.si/activator/ws}ActivatorTRMProcessWSService
 portName={http://telekom.si/activator/ws}ActivatorTRMProcessWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,069 INFO  [org.jboss.ws.cxf.metadata] (MSC service thread 1-4) JBWS024061: Adding service endpoint metadata: id=ActivatorZTWS
 address=http://localhost:8080/ActivatorFrontEnd/services/ActivatorZTWS
 implementor=si.telekom.activatorfrontend.ws.ActivatorZTWS
 serviceName={http://si.telekom/prov/activator/crmws}ActivatorZTWSService
 portName={http://si.telekom/prov/activator/crmws}ActivatorZTWSPort
 annotationWsdlLocation=null
 wsdlLocationOverride=null
 mtomEnabled=false
2016-05-05 09:36:50,147 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://telekom.si/activator/ws}ActivatorCRMProcessWSService from class si.telekom.activatorfrontend.ws.ActivatorCRMProcessWS
2016-05-05 09:36:50,206 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorCRMProcessWS
2016-05-05 09:36:50,227 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorCRMProcessWSService.wsdl
2016-05-05 09:36:50,228 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://ws.activatorfrontend.telekom.si/}NPActivatorFrontEndService from class si.telekom.activatorfrontend.ws.NPActivatorFrontEnd
2016-05-05 09:36:50,246 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/NPActivatorFrontEnd
2016-05-05 09:36:50,255 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/NPActivatorFrontEndService.wsdl
2016-05-05 09:36:50,256 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://si.telekom/prov/activator/crmws}ActivatorCRMWSService from class si.telekom.activatorfrontend.ws.ActivatorCRMWS
2016-05-05 09:36:50,319 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorCRMWS
2016-05-05 09:36:50,333 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorCRMWSService.wsdl
2016-05-05 09:36:50,334 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://ws.activatorfrontend.telekom.si/}ActivatorManualDSLAMService from class si.telekom.activatorfrontend.ws.ActivatorManualDSLAM
2016-05-05 09:36:50,346 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorManualDSLAM
2016-05-05 09:36:50,355 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorManualDSLAMService.wsdl
2016-05-05 09:36:50,356 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://si.telekom/prov/activator/synchronizationws}ActivatorSyncWSService from class si.telekom.activatorfrontend.ws.ActivatorSyncWS
2016-05-05 09:36:50,370 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorSyncWS
2016-05-05 09:36:50,382 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorSyncWSService.wsdl
2016-05-05 09:36:50,383 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://si.telekom/prov/activator/servicepagesws}ActivatorServicePagesWSService from class si.telekom.activatorfrontend.ws.ActivatorServicePagesWS
2016-05-05 09:36:50,392 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorServicePagesWS
2016-05-05 09:36:50,402 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorServicePagesWSService.wsdl
2016-05-05 09:36:50,403 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://telekom.si/services/common/customer/v1}NotifyCustomerChangeServiceService from class si.telekom.activatorfrontend.webservice.notifycust.INotifyCustomerChangeService
2016-05-05 09:36:50,451 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/NotifyCustomerChangeService
2016-05-05 09:36:50,464 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/NotifyCustomerChangeServiceService.wsdl
2016-05-05 09:36:50,465 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://telekom.si/activator/ws}ActivatorTRMProcessWSService from class si.telekom.activatorfrontend.ws.ActivatorTRMProcessWS
2016-05-05 09:36:50,515 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorTRMProcessWS
2016-05-05 09:36:50,527 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorTRMProcessWSService.wsdl
2016-05-05 09:36:50,528 INFO  [org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://si.telekom/prov/activator/crmws}ActivatorZTWSService from class si.telekom.activatorfrontend.ws.ActivatorZTWS
2016-05-05 09:36:50,553 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/ActivatorFrontEnd/services/ActivatorZTWS
2016-05-05 09:36:50,563 INFO  [org.jboss.ws.cxf.deployment] (MSC service thread 1-4) JBWS024074: WSDL published to: file:/C:/podatki/jboss_configurations/wildfly10/domainController/servers/server-one/data/wsdl/ActivatorFrontEnd.war/ActivatorZTWSService.wsdl
2016-05-05 09:36:50,574 INFO  [org.jboss.as.webservices] (MSC service thread 1-2) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorManualDSLAM
2016-05-05 09:36:50,575 INFO  [org.jboss.as.webservices] (MSC service thread 1-1) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorTRMProcessWS
2016-05-05 09:36:50,577 INFO  [org.jboss.as.webservices] (MSC service thread 1-4) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorSyncWS
2016-05-05 09:36:50,577 INFO  [org.jboss.as.webservices] (MSC service thread 1-7) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorServicePagesWS
2016-05-05 09:36:50,582 INFO  [org.jboss.as.webservices] (MSC service thread 1-3) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorCRMWS
2016-05-05 09:36:50,582 INFO  [org.jboss.as.webservices] (MSC service thread 1-6) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".NotifyCustomerChangeService
2016-05-05 09:36:50,583 INFO  [org.jboss.as.webservices] (MSC service thread 1-5) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".NPActivatorFrontEnd
2016-05-05 09:36:50,586 INFO  [org.jboss.as.webservices] (MSC service thread 1-8) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorCRMProcessWS
2016-05-05 09:36:50,643 INFO  [org.jboss.as.webservices] (MSC service thread 1-2) WFLYWS0003: Starting service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorZTWS
2016-05-05 09:36:50,648 INFO  [org.jboss.weld.deployer] (MSC service thread 1-3) WFLYWELD0009: Starting weld service for deployment ActivatorFrontEnd.war
2016-05-05 09:36:51,162 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 132) Initializing Mojarra 2.2.12-jbossorg-2 20150729-1131 for context '/ActivatorFrontEnd'
2016-05-05 09:36:51,220 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 132) Critical error during deployment: : com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:764)
	at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:353)
	at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:227)
	at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)
	at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:198)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
Caused by: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:751)
	... 12 more
Caused by: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.getResources(MetaInfFacesConfigResourceProvider.java:137)
	at com.sun.faces.config.ConfigManager$URITask.call(ConfigManager.java:1362)
	at com.sun.faces.config.ConfigManager$URITask.call(ConfigManager.java:1331)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:742)
	... 12 more
Caused by: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at java.io.FileInputStream.open(Native Method)
	at java.io.FileInputStream.<init>(FileInputStream.java:131)
	at org.jboss.vfs.spi.RealFileSystem$1.run(RealFileSystem.java:111)
	at org.jboss.vfs.spi.RealFileSystem$1.run(RealFileSystem.java:109)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.vfs.spi.RealFileSystem.doIoPrivileged(RealFileSystem.java:91)
	at org.jboss.vfs.spi.RealFileSystem.openInputStream(RealFileSystem.java:109)
	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:259)
	at org.jboss.vfs.VirtualJarInputStream.openCurrent(VirtualJarInputStream.java:223)
	at org.jboss.vfs.VirtualJarInputStream.getNextJarEntry(VirtualJarInputStream.java:109)
	at org.jboss.vfs.VirtualJarInputStream.getNextJarEntry(VirtualJarInputStream.java:96)
	at org.jboss.vfs.VirtualJarInputStream.getNextEntry(VirtualJarInputStream.java:80)
	at com.sun.faces.facelets.util.Classpath.searchFromURL(Classpath.java:222)
	at com.sun.faces.facelets.util.Classpath.searchFromURL(Classpath.java:242)
	at com.sun.faces.facelets.util.Classpath.search(Classpath.java:156)
	at com.sun.faces.facelets.util.Classpath.search(Classpath.java:110)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.loadURLs(MetaInfFacesConfigResourceProvider.java:166)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.getResources(MetaInfFacesConfigResourceProvider.java:110)
	... 16 more

2016-05-05 09:36:51,221 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 132) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:85)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:231)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)
	... 6 more
Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
	at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)
	at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:198)
	... 8 more
Caused by: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:764)
	at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:353)
	at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:227)
	... 10 more
Caused by: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:751)
	... 12 more
Caused by: javax.faces.FacesException: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.getResources(MetaInfFacesConfigResourceProvider.java:137)
	at com.sun.faces.config.ConfigManager$URITask.call(ConfigManager.java:1362)
	at com.sun.faces.config.ConfigManager$URITask.call(ConfigManager.java:1331)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:742)
	... 12 more
Caused by: java.io.FileNotFoundException: C:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\tmp\vfs\temp\temp1e3a1daf9121b0e4\content-34b685741ee5aeb4\content-6322725066713898564.tmp (Access is denied)
	at java.io.FileInputStream.open(Native Method)
	at java.io.FileInputStream.<init>(FileInputStream.java:131)
	at org.jboss.vfs.spi.RealFileSystem$1.run(RealFileSystem.java:111)
	at org.jboss.vfs.spi.RealFileSystem$1.run(RealFileSystem.java:109)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.vfs.spi.RealFileSystem.doIoPrivileged(RealFileSystem.java:91)
	at org.jboss.vfs.spi.RealFileSystem.openInputStream(RealFileSystem.java:109)
	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:259)
	at org.jboss.vfs.VirtualJarInputStream.openCurrent(VirtualJarInputStream.java:223)
	at org.jboss.vfs.VirtualJarInputStream.getNextJarEntry(VirtualJarInputStream.java:109)
	at org.jboss.vfs.VirtualJarInputStream.getNextJarEntry(VirtualJarInputStream.java:96)
	at org.jboss.vfs.VirtualJarInputStream.getNextEntry(VirtualJarInputStream.java:80)
	at com.sun.faces.facelets.util.Classpath.searchFromURL(Classpath.java:222)
	at com.sun.faces.facelets.util.Classpath.searchFromURL(Classpath.java:242)
	at com.sun.faces.facelets.util.Classpath.search(Classpath.java:156)
	at com.sun.faces.facelets.util.Classpath.search(Classpath.java:110)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.loadURLs(MetaInfFacesConfigResourceProvider.java:166)
	at com.sun.faces.config.configprovider.MetaInfFacesConfigResourceProvider.getResources(MetaInfFacesConfigResourceProvider.java:110)
	... 16 more

2016-05-05 09:36:51,355 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 123) WFLYCTL0013: Operation (""full-replace-deployment"") failed - address: ([]) - failure description: {""WFLYCTL0080: Failed services"" => {""jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd"" => ""org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: java.util.concurrent.ExecutionException: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: javax.faces.FacesException: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)
    Caused by: java.io.FileNotFoundException: C:\\podatki\\jboss_configurations\\wildfly10\\domainController\\servers\\server-one\\tmp\\vfs\\temp\\temp1e3a1daf9121b0e4\\content-34b685741ee5aeb4\\content-6322725066713898564.tmp (Access is denied)""}}
2016-05-05 09:36:51,376 INFO  [org.jboss.as.webservices] (MSC service thread 1-4) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorSyncWS
2016-05-05 09:36:51,381 INFO  [org.jboss.as.webservices] (MSC service thread 1-3) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorTRMProcessWS
2016-05-05 09:36:51,375 INFO  [org.jboss.as.webservices] (MSC service thread 1-8) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorCRMWS
2016-05-05 09:36:51,382 INFO  [org.jboss.as.webservices] (MSC service thread 1-8) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".NotifyCustomerChangeService
2016-05-05 09:36:51,382 INFO  [org.jboss.as.webservices] (MSC service thread 1-7) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorManualDSLAM
2016-05-05 09:36:51,383 INFO  [org.jboss.as.webservices] (MSC service thread 1-6) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorCRMProcessWS
2016-05-05 09:36:51,383 INFO  [org.jboss.as.webservices] (MSC service thread 1-6) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".NPActivatorFrontEnd
2016-05-05 09:36:51,385 INFO  [org.jboss.as.webservices] (MSC service thread 1-7) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorZTWS
2016-05-05 09:36:51,387 INFO  [org.jboss.as.webservices] (MSC service thread 1-2) WFLYWS0004: Stopping service jboss.ws.endpoint.""ActivatorFrontEnd.war"".ActivatorServicePagesWS
2016-05-05 09:36:51,388 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) WFLYWELD0010: Stopping weld service for deployment ActivatorFrontEnd.war
2016-05-05 09:36:51,859 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment ActivatorFrontEnd.war (runtime-name: ActivatorFrontEnd.war) in 502ms
2016-05-05 09:36:51,860 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 123) WFLYCTL0190: Step handler org.jboss.as.server.deployment.DeploymentHandlerUtil$4@4b58e957 for operation {""operation"" => ""full-replace-deployment"",""address"" => [],""name"" => ""ActivatorFrontEnd.war"",""runtime-name"" => ""ActivatorFrontEnd.war"",""content"" => [{""hash"" => bytes { 0x22, 0x31, 0x53, 0x43, 0xd6, 0x55, 0x0b, 0x8a, 0xb3, 0x74, 0x19, 0xe1, 0xed, 0xab, 0x87, 0xea, 0xe0, 0x4c, 0x2a, 0x04 }}],""operation-headers"" => {""rollback-on-runtime-failure"" => true,""access-mechanism"" => ""NATIVE"",""domain-uuid"" => ""26eca3b6-9a1e-4b3a-b690-4cecc5f80856""},""enabled"" => undefined,""persistent"" => true,""owner"" => undefined} at address [] failed handling operation rollback -- java.util.NoSuchElementException: No child 'name' exists: java.util.NoSuchElementException: No child 'name' exists
	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:377)
	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:299)
	at org.jboss.dmr.ModelNode.require(ModelNode.java:870)
	at org.jboss.as.server.deployment.DeploymentHandlerUtil$4$1.handleResult(DeploymentHandlerUtil.java:277)
	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311)
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)
	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:667)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:247)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:185)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:138)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:134)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:360)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:157)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:153)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)

2016-05-05 09:36:51,861 INFO  [org.jboss.as.controller] (ServerService Thread Pool -- 123) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorCRMProcessWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorCRMProcessWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorCRMWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorCRMWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorManualDSLAM.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorManualDSLAM-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorServicePagesWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorServicePagesWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorSyncWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorSyncWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorTRMProcessWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorTRMProcessWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.ActivatorZTWS.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""ActivatorZTWS-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.NPActivatorFrontEnd.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""NPActivatorFrontEnd-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.NotifyCustomerChangeService.START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""NotifyCustomerChangeService-si.telekom.activatorfrontend.ws.ServerHandler"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""com.sun.faces.config.ConfigureListener"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""javax.faces.webapp.FacetTag"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""javax.servlet.jsp.jstl.tlv.PermittedTaglibsTLV"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""javax.servlet.jsp.jstl.tlv.ScriptFreeTLV"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""org.jboss.weld.servlet.WeldInitialListener"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""org.jboss.weld.servlet.WeldTerminalListener"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorCRMProcessWS"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorCRMWS"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorManualDSLAM"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorServicePagesWS"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorSyncWS"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.ActivatorZTWS"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.NPActivatorFrontEnd"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.deployment.unit.""ActivatorFrontEnd.war"".component.""si.telekom.activatorfrontend.ws.NotifyCustomerChangeService"".START (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
      service jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd (missing) dependents: [service jboss.deployment.unit.""ActivatorFrontEnd.war"".deploymentCompleteService] 
WFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host./ActivatorFrontEnd

2016-05-05 09:36:51,973 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 123) WFLYDR0002: Content removed from location c:\podatki\jboss_configurations\wildfly10\domainController\servers\server-one\data\content\22\315343d6550b8ab37419e1edab87eae04c2a04\content

{code}",05/May/16 2:44 PM;jamezp;Does it seem to happen every time or does there seem to be anything special to reproduce it? I'd like to see if I can duplicate it locally.,"05/May/16 2:49 PM;sreckom;It happens to me every time. I've tried to restart wildfly, clean up tmp directory, but it still happens. The configuration is not standalone, but domain. It is almost default configuration as configured in domain.xml + host.xml; the exceptions are:
- I've removed all servers but one
- I've removed all profiles except full-ha, that is used on the main-server-group","05/May/16 3:05 PM;jamezp;Perfect, thanks! I'll see if I can't duplicate.","06/May/16 2:15 AM;sreckom;I created a reproducer - inside [^TestMavenPlugin.zip] is a maven project. I also discovered that it doesn't occur every time. The most certain scenario is clean - install (but even this doesn't happen every time, at least with reproducer). With the ""real"" project I get an error more often, but now after third or fourth install (without clean) it works.","06/May/16 12:49 PM;jamezp;Perfect, I'll be testing this today. Thanks!",06/May/16 1:08 PM;jamezp;Attached a server.log that contains stack traces for the issue.,10/May/16 8:19 PM;jamezp;[~ehugonnet] Ping me about this when you're back from PTO. I think the faces API is somehow getting a reference to a file that was possibly moved from a temp directory to the content directory. I'm just not sure where/when this happens and thought you might be able to point in the direction.,"11/May/16 12:21 PM;ctomc;Do you have any antivirus/antimalware or similar software running on your system?
if so, can you disable it and see if you can still reproduce this.","11/May/16 2:31 PM;jamezp;It's possible that's it. I booted my Windows VM, disabled Windows Defender and the error was no reproduced. I also ran ProcMon while the error occurred. I didn't see any weird errors however I could see Windows Defender scanning the file around the time of the failure.",,,,,,,,,,,,
Whitespaces in the middle of the value are siletly ignored,WFCORE-1546,12619114,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,11/May/16 3:07 AM,17/May/16 5:10 PM,29/Nov/16 3:51 PM,17/May/16 5:10 PM,2.2.0.CR2,,,,,,3.0.0.Alpha1,,CLI,,,,,0,,,,,,"Whitespace in the middle of value (e.g. adding a system property with a value like ""my property"") is silently ignored.

Going to the history, this behaviour changed was introduced in EAP 6.0.1

*6.0.0*
{noformat}
/subsystem=logging/console-handler=CONSOLE:write-attribute(name=level, value=   I   N   F   O)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""JBAS011539: Log level I   N   F   O is invalid."",
    ""rolled-back"" => true
}
/system-property=test:add(value=ha ha ha)
/system-property=test:read-attribute(name=value)
{
    ""outcome"" => ""success"",
    ""result"" => ""ha ha ha""
}
{noformat}

*6.0.1* up to *7.0.0*
{noformat}
/subsystem=logging/console-handler=CONSOLE:write-attribute(name=level, value=   I   N   F   O)
/subsystem=logging/console-handler=CONSOLE:read-attribute(name=level)
{
    ""outcome"" => ""success"",
    ""result"" => ""INFO""
}
/system-property=test:add(value=ha ha ha)
/system-property=test:read-attribute(name=value)
{
    ""outcome"" => ""success"",
    ""result"" => ""hahaha""
}
{noformat}

Main concern here is whether it is a correct behaviour to silently ignore the whitespace in the middle.",,,,,,,,,,,,,,,,JBEAP-4536,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03y27:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
File path to file content replacement is bound to validation,WFCORE-1545,12616878,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,jdenise,jdenise,26/Apr/16 9:18 AM,10/May/16 6:41 PM,29/Nov/16 3:51 PM,,,,,,,,,,CLI,,,,,0,,,,,,"DefaultBatch and OperationRequestHandler are making the replacement only if validation is enabled. 

It seems that users are expecting the replacement to be done in all cases. 

Doing so we would make operation description retrieval mandatory for all requests. This could have an impact on the CLI performance.

We should have a configuration option to disable the replacement. By default the replacement should be enabled. With validation OFF and replacement OFF, we would have no extra requests sent by the CLI.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03kxz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IfElseControlFlow ifRequest is not validated,WFCORE-1544,12616880,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,jdenise,jdenise,26/Apr/16 9:22 AM,10/May/16 6:41 PM,29/Nov/16 3:52 PM,,,,,,,,,,CLI,,,,,0,,,,,,IfElseControlFlow.run sends the if request without validation.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03kyf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"NPE thrown during application redeployment, slaves taken offline",WFCORE-1536,12618386,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mcasperson,mcasperson,05/May/16 6:02 PM,10/Jun/16 6:05 PM,29/Nov/16 3:52 PM,10/Jun/16 6:05 PM,,,,,,,3.0.0.Alpha2,,Domain Management,,,,,0,,,,,,"We have some development Wildfly 10.0.0 servers running as slaves in a domain that frequently have WAR files redeployed. We have noticed that these slaves will often go offline after a redeployment of WAR files with the following stack trace:

{code}
2016-05-06 05:05:51,306 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 1012) WFLYCTL0190: Step handler org.jboss.as.domain.controller.operations.deployment.DeploymentFullReplaceHandler@3f68226b for operation {""operation"" => ""full-replace-deployment"",""name"" => ""whatever.war"",""enabled"" => true,""content"" => [{""hash"" => bytes { 0x5d, 0x12, 0x18, 0x2b, 0x1c, 0x86, 0x71, 0x27, 0x08, 0x3d, 0xf1, 0x75, 0x08, 0x29, 0xa6, 0x49, 0x1f, 0x16, 0xe8, 0x22 }}],""operation-headers"" => {""access-mechanism"" => ""NATIVE"",""domain-uuid"" => ""802ab616-dd2c-4081-a79c-c4d54e14c384"",""push-to-servers"" => undefined},""address"" => [],""runtime-name"" => undefined} at address [] failed handling operation rollback -- java.lang.NullPointerException: java.lang.NullPointerException
        at org.jboss.as.repository.LocalDeploymentFileRepository.deleteDeployment(LocalDeploymentFileRepository.java:59)
        at org.jboss.as.host.controller.RemoteDomainConnectionService$RemoteFileRepository.deleteDeployment(RemoteDomainConnectionService.java:756)
        at org.jboss.as.domain.controller.operations.deployment.DeploymentFullReplaceHandler$1.handleResult(DeploymentFullReplaceHandler.java:181)
        at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384)
        at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366)
        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328)
        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311)
        at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)
        at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)
        at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:247)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:185)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:138)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:134)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:360)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:157)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:153)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:153)
        at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
        at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

This error will usually only happen for 2 out of the 4 identically configured slaves, and seems to happen randomly, although frequently enough.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1568,,,,,,0.0,4.0,,1|i03tp3:,9223372036854775807,,,,,,,,,,,05/May/16 6:22 PM;jamezp;How are they deployed/redeployed?,"05/May/16 6:23 PM;mcasperson;We use the CLI to --force overwrite the deployments on the domain controller.

I'm not sure if it makes a difference, but we are in the process of migrating from Tomcat to WildFly, so we are deploying WARs with Tomcat version numbers in the filename but resetting the name in the deployment command i.e.

deploy /usr/bamboo/xml-data/build-dir/41811987-43712537/services##20160504.0614-r66d0ca5f382826538ea28e24713b2f9abba3ec27.war --name=services.war --force",05/May/16 6:35 PM;jamezp;Perfect thanks! It shouldn't make a difference. It looks like the deployments parent directory is {{null}} for some reason. Or possibly the parent gets set to an invalid file and {{File.list()}} returns {{null}}. That's probably more likely what's happening looking at it.,"05/May/16 10:56 PM;mcasperson;Thinking about this error, I suspect this is what happens to cause it:

1. We deploy an app to a domain controller with 2 slaves
2. The deployment on one slave fails because of memory issues (not a wildfly bug, more of a regular ""os doesn't have swap memory and we assigned to much to java"" issue)
3. At this point the deployment of the app is rolled back, but the server that didn't run out of memory doesn't have anything to roll back, causing the NPE.

I haven't tested this theory yet, but it could be more than a coincidence. ",,,,,,,,,,,,,,,,,,,,,,,
Generic command help uses resource type as its name,WFCORE-1534,12618505,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,jdenise,jdenise,06/May/16 8:03 AM,06/May/16 8:03 AM,29/Nov/16 3:52 PM,,,,,,,,,,CLI,,,,,0,,,,,,"I created a command named toto:
toto --help
SYNOPSIS

  logger --help [--properties | --commands] |
         (--category=<resource_id> (--<property>=<value>)*) |
         (<command> --category=<resource_id> (--<parameter>=<value>)*)
         [--headers={<operation_header> (;<operation_header>)*}]


logger is used everywhere in the command description, it should be the actual command name.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03ufb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
New threads named ServerService Thread Pool -- xyz created with every deploy and undeploy and removed after ~20 seconds,WFCORE-1529,12618367,Bug,Coding In Progress,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,brian.stansberry,rsvoboda,brian.stansberry,05/May/16 1:35 PM,05/May/16 1:39 PM,29/Nov/16 3:52 PM,,2.1.0.Final,,,,,,,,Domain Management,,,,,0,,,,,,"tl;dr version from Brian:

The ServerService Threads and Host Controller Service Threads pools have no core size and a thread timeout of 20 secs, so if a management request comes in periodically but less often then every 20 secs (says twice a minute) the pool will continually churn threads. That kind of periodic polling is not an unusual scenario, so, we'll put in a core size of one or two.

Original details from Rostislav:

I did quite simple thing in the loop : 
 * deploy attached application into jboss-eap-7.0/standalone/deployments/
 * wait 1 minute
 * remove anything from jboss-eap-7.0/standalone/deployments/
 * wait 1 minute

I connected with jvisualvm and was watching monitor tab for cpu / classes / heap / threads overview statistics. After some time I spotted jumps (up and down) on threads.

After some time I see threads named ""ServerService Thread Pool -- 346"", I ended with number bigger than 1400. In my case 15 threads are created for 20 seconds when deploying and another 15 threads are created for 20 seconds when undeploying. Nothing seems to be reused

Setup for threads is done in https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/ServerService.java#L207-L213 method addService

Is it intentional to have threads alive only 20 seconds and then scratch them ? Keeping a lot of threads means usage of system resources, creating new threads has some overhead too. Maybe the question is what is the right balance ? 

Note: It would be nice to have ""Possible Bug"" Issue Type for issues like this ;)",,,,,,,,,,,,,,,,JBEAP-4260,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,?,?,?,,,,,,,,,,,,0.0,0.0,,1|i03tkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EAP 7 with secured management become unavailable after ~8 days,WFCORE-1528,12618364,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,spinder,brian.stansberry,05/May/16 1:21 PM,24/Jun/16 5:18 PM,29/Nov/16 3:52 PM,24/Jun/16 5:13 PM,2.1.0.Final,,,,,,2.2.0.CR2,3.0.0.Alpha3,Domain Management,Security,,,,0,,,,,,"Appears there may be an EAP 7.0.0.CR01 2-way ssl issue in domain mode.  
Issue discovered by JON QE after testing for 8 days with SSL.
JON QE did not see the same issue when running identical test against EAP 6. 
Restarting the remote client(JON Agent) did not repair/fix the issue, and only was repaired after EAP instance restarted.

See BZ https://bugzilla.redhat.com/show_bug.cgi?id=1330180#c0 for more details.
JON team would like some evaluation done to determine:
i)if this is EAP 7 issue or
ii)somehow just a JON issue
iii)suggestions on what to do when we try to reproduce properly or ways to shorten reproduce cycle.

This issue could affect GA release schedules.",EAP 7.0.0.CR01 2-way ssl over remote https communication,,,,,,,,,,,WFCORE-1418,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1330180,,,,,Perform,,+,?,,?,?,?,,,,,,,,,,,,0.0,3.0,,1|i03tk7:,9223372036854775807,,,,"1. install/start EAP7 in domain mode with secured management (2-way ssl)
2. import EAP instance to JON and set correct Connection properties to have it UP
3. wait ~8days

",,,,,,,"05/May/16 1:26 PM;brian.stansberry;I believe WFCORE-1428 is cause of WFCORE-1528, as it brings a non-fixed-size thread pool into Undertow's request handling, and Undertow's internal caching mechanisms are not designed for use with a non-fixed pool. As the pool churns threads, pooled ByteBuffers are not getting freed.

It's also better to use a fixed pool for the WFCORE-1428 work as this call path is for end-user requests and we want to limit concurrency of those a la what we do for native clients at https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/remote/AbstractModelControllerOperationHandlerFactoryService.java#L98.",10/May/16 2:23 PM;brian.stansberry;Re-opening as we may wish to go beyond the PR that has been merged in order to reduce the risk of recurrence of this kind of bug.,24/Jun/16 5:18 PM;brian.stansberry;Re-resolving. If we make further changes in thread management that can come via a separate issue and would not be necessary to consider this specific problem as being fixed.,,,,,,,,,,,,,,,,,,,,,,,,
Server group / JVM composite add op and missing parent,WFCORE-1527,12618350,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,05/May/16 12:09 PM,05/May/16 7:31 PM,29/Nov/16 3:52 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"The test AutoIgnoreDomain tests when adding an ignored server group, like this:

https://github.com/luck3y/wildfly-core/blob/6cdd4af55b7723ff943a3743143a6056458f4f56/testsuite/domain/src/test/java/org/jboss/as/test/integration/domain/autoignore/AutoIgnoredResourcesDomainTestCase.java#L495

Also calld the JvmAddHandler. During the JVMH add, the prior add of the server group is not visible in the model and the op fails. 

Workaround in JVMAddHandler.populateModel, to attempt to RRFR, and fail silently if the parent is not available, but something prior in the chain is violating the readDomainFromRoot contract, as the server element should be a visible, but uncommitted change in the model.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03thb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 ageout-history does not report failures,WFCORE-1525,12617493,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,dereed,dereed,28/Apr/16 5:41 PM,04/Nov/16 11:15 AM,29/Nov/16 3:52 PM,16/May/16 8:00 PM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Patching ,,,,,0,,,,,,"When ageout-history cannot delete the old CP files, it silently fails and returns ""success"".

LocalAgeoutHistoryHandler#recursiveDelete does keep track of whether the
delete failed or succeeded, but the return value from this method is ignored
in execute(...).

If recursiveDelete returns false, it should report a failure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,User Experience,,https://bugzilla.redhat.com/show_bug.cgi?id=1331586,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1545,,,,,,0.0,5.0,,1|i03og7:,9223372036854775807,,,,,,,,,,,29/Apr/16 9:12 AM;jira-bugzilla-migration;Bartek Spyrko-Smietanko <bspyrkos@redhat.com> changed the Status of [bug 1331586|https://bugzilla.redhat.com/show_bug.cgi?id=1331586] from NEW to ASSIGNED,"04/May/16 5:43 PM;spyrkob;Proposed fix - if ageout-history fails to delete some history files, it returns with 
{noformat}
{
  ""outcome"" => ""failed"",
  ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYPAT0048: Unable to     remove some of the history files."",
  ""rolled-back"" => true
} 
{noformat}
In addition offending files are logged at warning level in the patching logger:
{noformat}
[33m22:12:47,080 WARN  [org.jboss.as.patching] (management-handler-thread - 3) WFLYPAT0001: Cannot delete file /Users/spyrkob/workspaces/set/wildfly-core/testsuite/patching/target/wildfly-core/.installation/patches/cp0/configuration
[33m22:12:47,081 WARN  [org.jboss.as.patching] (management-handler-thread - 3) WFLYPAT0001: Cannot delete file /Users/spyrkob/workspaces/set/wildfly-core/testsuite/patching/target/wildfly-core/.installation/patches/cp0/timestamp
{noformat}",05/May/16 10:27 AM;jira-bugzilla-migration;Bartek Spyrko-Smietanko <bspyrkos@redhat.com> changed the Status of [bug 1331586|https://bugzilla.redhat.com/show_bug.cgi?id=1331586] from ASSIGNED to POST,01/Nov/16 12:30 PM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1331586|https://bugzilla.redhat.com/show_bug.cgi?id=1331586] from POST to MODIFIED,04/Nov/16 11:15 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1331586|https://bugzilla.redhat.com/show_bug.cgi?id=1331586] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Scanner deployment failing at boot passes readiness/liveness checks,WFCORE-1524,12618025,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,maschmid,brian.stansberry,03/May/16 12:25 PM,18/Aug/16 10:24 AM,29/Nov/16 3:52 PM,,,,,,,,,,Deployment Scanner,Domain Management,,,,0,,,,,,"During larger scale-ups (e.g. from 1 to 6 on nodes under load) deployments sometimes fail with ""org.infinispan.util.concurrent.TimeoutException: Replication timeout for foo-1-xxxxx"".  

That by itself is expected with the default timeouts, however, the problem is that such failed deployments pass the default EAP readiness and liveness checks, which results in HTTP 404 responses.",brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/jboss-eap-7/eap70-openshift:1.3-11,,,,,,,,,,,,,,,CLOUD-615,,,,,CLOUD-615,,,,,,,,,,,,,,,,,,,,+,+,,+,+,+,,,,,,,,,,,,0.0,4.0,,1|i03rlr:,9223372036854775807,,,,,,,,,,,"03/May/16 12:29 PM;brian.stansberry;From an IRC chat with Rob Cernich:

{code}

[11:17am] rcernich: bstansberry: quick question, we're seeing the cli return deployment-info of failed for a deployment, but there's a .deployed file in the deployments directory (eap7)
[11:17am] bstansberry: rcernich: hi rob
[11:17am] bstansberry: rcernich: that doesn’t sound right
[11:17am] rcernich: bstansberry: infinispan fails to start (times out) and thus the deployment fails (sort of)
[11:18am] rcernich: bstansberry: the log includes ""Deployed ""ROOT.war"" (runtime-name: ""ROOT.war"")
[11:19am] bstansberry: rcernich: this is all during boot, right?
[11:19am] rcernich: bstansberry: yes
[11:19am] rcernich: bstansberry: here's a link to our issue: https://issues.jboss.org/browse/CLOUD-615
[11:19am] rcernich: the log is attached
[11:20am] bstansberry: rcernich: ok, I *suspect* this is related to how failures are handled during boot
[11:21am] rcernich: bstansberry: the deployment seems to fail, as eap is returning 404's for the app url's
[11:22am] bstansberry: rcernich: right; the problem AIUI is there is no .failed file, right?
[11:22am] rcernich: bstansberry: correct (and you could say the entry in the log is misleading as well)
[11:23am] bstansberry: rcernich: I’m going to clone that JIRA into WFCORE
{code}

Note Rob's comment about the logging, which is valid in addition to the issue with the deployment marker file.","03/May/16 12:32 PM;brian.stansberry;[~ehugonnet] Quick speculation:

I think this all relates to how we handle boot ops. The scanner generated deployment ops are inserted as steps into the overall boot op (the 2nd op, that does subsystems.)

That overall op does not fail because we have rollback-on-runtime-failure set to false.

But I suspect we are losing track of what is happening to the particular steps that are added by the scanner and therefore are not reporting things correctly.",19/May/16 3:45 PM;ehugonnet;Other quick speculation : the deployment notification is sent because of rollback-on-runtime-failure set to false thus the file is created.,18/Aug/16 10:24 AM;ehugonnet;I can't seem to reproduce the issue. Is there a way to get a reproducer ?,,,,,,,,,,,,,,,,,,,,,,,
RestartParentResourceRemoveHandler should fail when removing non-existing resources,WFCORE-1523,12601953,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,olukas,olukas,01/Feb/16 1:17 AM,08/Jul/16 2:24 PM,29/Nov/16 3:52 PM,08/Jul/16 2:24 PM,2.1.0.Final,,,,,,2.2.0.CR6,3.0.0.Alpha4,Domain Management,Security,,,,0,2.2,,,,,"In case when non-existent policy-module is removed through Management CLI, operation should finish with failure. However it finishes with outcome success and nothing is changed. It can be confusing since wrong command seems same as correct command.",,,,,,,,,,,,,,,,JBEAP-3112,,,,,,,,,WFLY-6102,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1543,https://github.com/wildfly/wildfly-core/pull/1657,https://github.com/wildfly/wildfly-core/pull/1658,,,,0.0,1.0,,1|i015tb:,9223372036854775807,,,,"Start server and run following CLI command:
{code}
./jboss-cli.sh -c '/subsystem=security/security-domain=jboss-web-policy/authorization=classic/policy-module=nonExistent:remove()'
{code}",,,,,,,"17/Jun/16 11:31 AM;brian.stansberry;I'm reopening this as WFLY-6736 (which is reproducible against latest core master) shows that there are still issues here.

Looks like SecurityRealmChildRemoveHandler needs a similar change as was done in the previous PRs for this.",,,,,,,,,,,,,,,,,,,,,,,,,,
PersistanceResourceTestCase fails if defaultPermissions contain only groups,WFCORE-1522,12617752,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pkremens,pkremens,pkremens,02/May/16 2:18 AM,03/May/16 1:43 AM,29/Nov/16 3:52 PM,02/May/16 6:59 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,"PersistanceResourceTestCase fails on Windows 10 (out-of-box configuration) where defaultPermissins list contain only groups, ownerPermissions is empty set thus assertion fail - see discussion on https://github.com/wildfly/wildfly-core/pull/1513.

Test the ownerPermissions for emptiness before making the assertion.",,,,,,,,,,,,,,,,,,,,,WFCORE-1486,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1536,,,,,,0.0,0.0,,1|i03pz3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Better handling of simple values in parser and completion,WFCORE-1520,12617684,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,29/Apr/16 1:00 PM,03/May/16 8:55 AM,29/Nov/16 3:52 PM,03/May/16 8:55 AM,,,,,,,3.0.0.Alpha1,,CLI,,,,,0,,,,,,"For example: read-property name= 'TAB' will get you  read-property name=spaces. 
There is a mismatch between name/value and simple values.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03pk7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
can't start server with configuration file from EAP 6.4.7 (and above),WFCORE-1517,12617610,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,lthon,lthon,lthon,29/Apr/16 8:50 AM,10/May/16 4:09 PM,29/Nov/16 3:52 PM,29/Apr/16 11:20 AM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,2.2,,,,,"When trying to run WildFly 10 with a configuration file from EAP 6.4.7 (i.e. management version 1.8), presumably for migration, the server fails to boot with an error message like this:

{code}
14:44:44,305 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131) [wildfly-controller-2.1.2.Final-redhat-1.jar:2.1.2.Final-redhat-1]
	at org.jboss.as.server.ServerService.boot(ServerService.java:356) [wildfly-server-2.1.2.Final-redhat-1.jar:2.1.2.Final-redhat-1]
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299) [wildfly-controller-2.1.2.Final-redhat-1.jar:2.1.2.Final-redhat-1]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_92]
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[3,1]
Message: Unexpected element '{urn:jboss:domain:1.8}server'
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:108) [staxmapper-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123) [wildfly-controller-2.1.2.Final-redhat-1.jar:2.1.2.Final-redhat-1]
	... 3 more

14:44:44,306 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}

This is really because the {{org.jboss.as.controller.parsing.Namespace}} enum doesn't have a constant for management version 1.8. After fixing that, everything seems to work fine (I guess that the rest of the server is fully aware of mgmt version 1.8), so this was hopefully just this single omission.",,,,,,,,,,,,,,,,JBEAP-4434,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1531,,,,,,0.0,0.0,,1|i03p4v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI, some completion issues",WFCORE-1516,12617422,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,28/Apr/16 11:29 AM,02/May/16 6:58 PM,29/Nov/16 3:52 PM,02/May/16 6:58 PM,,,,,,,3.0.0.Alpha1,,CLI,,,,,0,,,,,,"4 issues with command arguments completion:
1) "" "" and ""=false"" shouldn't be proposed for argument without values (that is a regression introduced by the support of implicit true value).
2) arguments without values used to stop completion to operate. For example ls --resolve-expressions should complete to the argument separator "" "" if no more arguments can be added.
3) ""="" character is not appended to argument that has a value (that is a regression introduced by the support of implicit true value).
4) Exception in read-attribute completing the node
read-attribute --node
org.jboss.as.cli.CommandFormatException: Couldn't locate ' --node=' in the line: 'read-attribute --node'
	at org.jboss.as.cli.handlers.ReadAttributeHandler.getAddress(ReadAttributeHandler.java:325)
	at org.jboss.as.cli.handlers.ReadAttributeHandler$2.canAppearNext(ReadAttributeHandler.java:114)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:257)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:141)
	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:150)
	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:420)
	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:165)
	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:735)
	at org.jboss.aesh.console.Console.execute(Console.java:718)
	at org.jboss.aesh.console.Console.access$900(Console.java:73)
	at org.jboss.aesh.console.Console$6.run(Console.java:627)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1532,,,,,,0.0,0.0,,1|i03o7b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI prompt is not displayed after the first command line executed,WFCORE-1508,12616775,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,stalep,aloubyansky,aloubyansky,25/Apr/16 4:11 PM,10/Nov/16 9:23 AM,29/Nov/16 3:52 PM,26/Apr/16 2:36 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"This issue appeared after the fix for WFCORE-1315

In interactive mode the prompt is not displayed after the first command line execution. It is correctly displayed afterwards.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1524,,,,,,0.0,0.0,,1|i03kbr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing services for outbound socket bindings on the HC,WFCORE-1505,12616759,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,25/Apr/16 12:53 PM,10/May/16 4:08 PM,29/Nov/16 3:52 PM,26/Apr/16 2:35 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"Calling

{code}
/host=master/socket-binding-group=sockets/socket-binding=one:add(port=1121)
{code}

I see a corresponding service in the service container'
{code}
Service ""org.wildfly.network.socket-binding.one"" (aliases: jboss.binding.one) (class org.jboss.as.server.services.net.SocketBindingService) mode ON_DEMAND state DOWN (WAITING) (parent: jboss.host.controller.model.controller) (dependencies: jboss.socket-binding-manager)
{code}

However, when e.g. doing:
{code}
/host=master/socket-binding-group=sockets/remote-destination-outbound-socket-binding=test:add(host=localhost,port=12345)
{code}
I see no corresponding service in the dump.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03k9b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reading the logging subsystem resource can be slow if several log files exist,WFCORE-1503,12616755,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,25/Apr/16 12:32 PM,10/May/16 4:10 PM,29/Nov/16 3:52 PM,10/May/16 4:10 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Logging,,,,,0,2.2,,,,,"The logging subsystem uses a dynamic resource to list log files as resources. These are the files that are allowed to be read or downloaded and are attached to known file handlers.

When several file handlers are defined the file tree walker is invoked several times per {{read-resource-operation}}. This may be happening for each stage of an operation. Ideally we could either cache the file listing per-operation or only execute at the runtime stage. This may not be an option for dynamic resources however.

As a result of this poor performance the web console is very slow to load the logging subsystem configuration. This is not an issue with the web console.
",,,,,,,,,,,,,,,,,,,,,,,,,,,29/Apr/16 8:24 PM;jamezp;wildfly-logging-patch-02.jar;https://issues.jboss.org/secure/attachment/12400895/wildfly-logging-patch-02.jar,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1535,,,,,,1.0,5.0,,1|i03k8f:,9223372036854775807,,,,,,,,,,,25/Apr/16 12:42 PM;jamezp;This also affects MBeans as it looks like the resource tree is read. The {{ModelControllerMBeanServerPlugin.queryNames()}} reads resources. The logging resource definitely needs to be fixed. This could be any issue with any other dynamic resources as well.,"28/Apr/16 6:53 PM;jamezp;In the {{org.jboss.as.logging.LoggingResource}} the {{log-file}} child is a dynamic resource. When reading the resource it looks like {{Resource.getChildren()}} is invoked then {{Resource.getChild()}} for each child. Because the {{log-file}} resource is dynamic it walks the directory tree looking for log files. This happens for every invocation of {{Resource.getChild()}} or {{Resource.requireChild()}}. This is why the performance is slow. The more files present, including rotated files, the more the tree walking occurs.

Locally testing the performance doesn't seem terrible. However JConsole is slow to load MBeans and the web console is a bit slow when loading the logging subsystem configuration.

One option is to not walk the entire tree and just return the path on a match. Not an ideal approach as it still could be rather slow with many file handlers that have several rotated files.

Another option would be to be less dynamic and register resources when file handlers are added. This is not done elsewhere and there would be issues with adding rotated files after the add operation.",29/Apr/16 8:24 PM;jamezp;[~pvorb] I believe you're the one that was having issues with this. If so and you're willing to test a patch grab the attached {{wildfly-logging-patch-02.jar}} JAR and place it in {{$JBOSS_HOME/modules/system/layers/base/org/jboss/as/logging/main/}} directory and change the {{module.xml}} in that file to point to the new library. From my local tests it seemed faster.,02/May/16 6:55 AM;pvorb;[~jamezp]: Thank you for the patch. Both the logging configuration page in the WildFly console as well as the MBeans tree load really fast. So the issue seems to be fixed by this patched version of wildfly-logging.,02/May/16 11:23 AM;jamezp;Excellent thanks for the confirmation [~pvorb]!,,,,,,,,,,,,,,,,,,,,,,
RBAC: The two kinds of non-addressability,WFCORE-1502,12616600,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,lthon,lthon,25/Apr/16 2:57 AM,13/Oct/16 5:46 AM,29/Nov/16 3:52 PM,,2.1.0.Final,,,,,,,,Domain Management,,,,,0,,,,,,"Ever since we introduced RBAC in WildFly / EAP, we had this shortcut in place that we were documenting in EAP Release Notes:

bq. Some resources are non-addressable to server-group and host scoped roles in order to provide a simplified view of the management model to improve usability. This is distinct from resources that are non-addressable to protect sensitive data.

I think that this shortcut is in place mainly because HAL can't cope with addressable but non-readable resources, but there might be other reasons. In any case, I figured I should finally file an upstream JIRA so that I don't have to bug Brian all the time if this has changed :-)",,,,,,,,,,,,,,,,,,,,,JBEAP-4125,JBEAP-6416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03jef:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failure to create timestamped config file history fails boot,WFCORE-1501,12616581,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,23/Apr/16 7:42 AM,10/May/16 4:07 PM,29/Nov/16 3:52 PM,25/Apr/16 10:13 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,2.2,,,,,"Something like the following shouldn't be allowed to fail a boot; if it happens an ERROR should be logged but no exception thrown:

{code}

2016-04-22 22:10:21,247 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: java.lang.IllegalStateException: WFLYCTL0056: Could not rename C:\BuildAgent\work\38e1ea00f932992d\full\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone_xml_history\current to C:\BuildAgent\work\38e1ea00f932992d\full\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone_xml_history\20160422-221021244
	at org.jboss.as.controller.persistence.ConfigurationFile.createHistoryDirectory(ConfigurationFile.java:668)
	at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:500)
	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.successfulBoot(BackupXmlConfigurationPersister.java:94)
	at org.jboss.as.controller.AbstractControllerService.finishBoot(AbstractControllerService.java:452)
	at org.jboss.as.server.ServerService.boot(ServerService.java:367)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)
	at java.lang.Thread.run(Thread.java:745)
{code}

That stack trace indicates file standalone\configuration\standalone_xml_history\20160422-221021144 must already exist but the 2nd attempt renameTo standalone\configuration\standalone_xml_history\20160422-221021244 has failed. It would be good to sort out what happened, but regardless it should not fail boot.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1521,,,,,,0.0,1.0,,1|i03ja7:,9223372036854775807,,,,,,,,,,,"25/Apr/16 2:48 PM;brian.stansberry;I believe the WFCORE-1078 fix is responsible for making this more apparent in CI, since it resulted in the problematic code path being called as part of every reload.",,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamic CLI command handler loading doesn't handle module slots,WFCORE-1500,12616562,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,22/Apr/16 4:57 PM,10/May/16 4:09 PM,29/Nov/16 3:52 PM,03/May/16 2:41 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"While reviewing https://github.com/wildfly/wildfly-core/pull/1517 I wondered if the same problem was present in other places in core. A check shows the WFCORE-582 fix has this problem.

Minor issue as our extensions don't use slots other than main. But they could.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1518,,,,,,0.0,0.0,,1|i03j5z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
logging custom-handler does not load module with slot,WFCORE-1499,12616391,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,roinou,roinou,22/Apr/16 6:04 AM,09/Aug/16 7:30 AM,29/Nov/16 3:52 PM,26/Apr/16 2:34 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Logging,,,,,0,,,,,,"Tested on EAP 6.4

when creating a module for a custom *loghandler*, everything works fine if the module is package in default main slot, e.g.
my/loghandler/main
   - module.xml
   - my.jar

{code:xml}
<custom-handler name=""4H"" class=""my.handler.Periodic4HFileHandler"" module=""my.loghandler"">
{code}

Nevertheless I want to version the module, therefore package my module with a given slot:
my/loghandler/1.0
    - module.xml
    - my.jar

{code:xml}
<custom-handler name=""4H"" class=""my.handler.Periodic4HFileHandler"" module=""my.loghandler:1.0"">
{code}

But this fails with following stacktrace:
{code}
11:53:50,458 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) JBAS014612: Operation (""add"") failed - address: ([
    (""subsystem"" => ""logging""),
    (""custom-handler"" => ""4H"")
]): java.lang.IllegalArgumentException: JBAS011532: Failed to load module 'my.loghandler:1.0' for handler '4H'
	at org.jboss.as.logging.HandlerOperations$HandlerAddOperationStepHandler.createHandlerConfiguration(HandlerOperations.java:320) [jboss-as-logging-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.logging.HandlerOperations$HandlerAddOperationStepHandler.performRuntime(HandlerOperations.java:255) [jboss-as-logging-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.logging.LoggingOperations$LoggingAddOperationStepHandler$1.execute(LoggingOperations.java:206) [jboss-as-logging-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:702) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:537) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:338) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:314) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1144) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:416) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:301) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.server.ServerService.boot(ServerService.java:355) [jboss-as-server-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.server.ServerService.boot(ServerService.java:330) [jboss-as-server-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:263) [jboss-as-controller-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_65]
Caused by: org.jboss.modules.ModuleNotFoundException: my.loghandler:1.0:main
	at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:240) [jboss-modules.jar:1.3.6.Final-redhat-1]
	at org.jboss.as.logging.HandlerOperations$HandlerAddOperationStepHandler.createHandlerConfiguration(HandlerOperations.java:295) [jboss-as-logging-7.5.0.Final-redhat-21.jar:7.5.0.Final-redhat-21]
	... 13 more
{code}

why is the module not found being *my.loghandler:1.0:main* ?",,,,,,,,,,,,,,,,,,,,,JBEAP-4891,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1349223,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1517,,,,,,0.0,7.0,,1|i03i67:,9223372036854775807,,,,,,,,,,,22/Apr/16 12:25 PM;jamezp;What does your {{module.xml}} contents look like?,22/Apr/16 12:49 PM;jamezp;Never mind I see the issue now. When attempting to figure out if the module class is a log4j appender the {{ModuleIdentifier}} was created using {{ModuleIdentifier.create(string)}} rather than {{ModuleIdentifier.fromString(string)}}.,24/Jun/16 7:46 AM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1349223|https://bugzilla.redhat.com/show_bug.cgi?id=1349223] from NEW to ASSIGNED,30/Jun/16 8:31 AM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1349223|https://bugzilla.redhat.com/show_bug.cgi?id=1349223] from ASSIGNED to POST,05/Aug/16 1:58 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1349223|https://bugzilla.redhat.com/show_bug.cgi?id=1349223] from POST to MODIFIED,05/Aug/16 1:58 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1349223|https://bugzilla.redhat.com/show_bug.cgi?id=1349223] from MODIFIED to ON_QA,09/Aug/16 7:30 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1349223|https://bugzilla.redhat.com/show_bug.cgi?id=1349223] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
server instances cannot find keytab during domain startup,WFCORE-1495,12616112,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,vpakan,dehort,brian.stansberry,20/Apr/16 6:19 PM,20/Jul/16 5:08 AM,29/Nov/16 3:52 PM,10/Jun/16 6:06 PM,,,,,,,3.0.0.Alpha2,,Domain Management,Security,,,,0,,,,,,"In domain mode, the server instances cannot find the keytab if the ApplicationRealm is configured to use kerberos as the server-identity:

{code}
            <security-realm name=""ApplicationRealm"">                                                                                                                               
              <server-identities>                                                                                                                                                  
                <kerberos>                                                                                                                                                         
                  <keytab principal=""remote/imahost.imadomain.net@VM29"" path=""/path/to/keytab""/>                                                       
                </kerberos>                                                                                                                                                        
              </server-identities>                                                                                                                                                              
              <authentication>                                                                                                                                                                     
                <kerberos remove-realm=""true""/>                                                                                                                                    
              </authentication>                                                                                                                                                    
              <authorization>                                                                                                                                                      
                <properties path=""application-roles.properties"" relative-to=""jboss.domain.config.dir""/>                                                                                                   
               </authorization>                                                                                                                                                     
            </security-realm> 
{code}                                     

This results in the following error and the server instances fail to start:

[Server:server-one] 15:10:35,360 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""validate-authentication"") failed - address: ([
[Server:server-one]     (""core-service"" => ""management""),
[Server:server-one]     (""security-realm"" => ""ApplicationRealm"")
[Server:server-one] ]) - failure description: ""WFLYDM0094: Kerberos is enabled for authentication on security realm 'ApplicationRealm' but no Keytab has been added to the server-identity.""
[Server:server-one] 15:10:35,376 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
",,;01/Jun/16 2:18 AM;vpakan;100800,,115200,14400,100800,87%,115200,14400,100800,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1328997,,,,,Perform,,+,?,,?,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1591,,,,,,0.0,3.0,,1|i03gjb:,9223372036854775807,,,,,,,,,,,14/Jun/16 10:14 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1328997|https://bugzilla.redhat.com/show_bug.cgi?id=1328997] from POST to MODIFIED,16/Jun/16 3:27 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1328997|https://bugzilla.redhat.com/show_bug.cgi?id=1328997] from MODIFIED to ON_QA,22/Jun/16 6:05 PM;jira-bugzilla-migration;Ivo Hradek <ihradek@redhat.com> changed the Status of [bug 1328997|https://bugzilla.redhat.com/show_bug.cgi?id=1328997] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,,
org.jboss.as.host.controller.Main.getHostSystemProperties() doesn't propagate -Djdk.launcher.addexports.%d=%s value properly,WFCORE-1493,12616100,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ropalka,ropalka,ropalka,20/Apr/16 4:05 PM,19/May/16 11:11 PM,29/Nov/16 3:52 PM,19/May/16 11:11 PM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"JDK9 provides -XaddExports launch option to workaround potential migration problems to modularized JDK.
{color:red}When modularized JDK forks new process all -XaddExports values are translated into
-Djdk.launcher.addexports.%d=%s JVM options.{color}
But method org.jboss.as.host.controller.Main.getHostSystemProperties()
has problems with its values.

The format of -XaddExports (and thus for -Djdk.launcher.addexports.%d=%s too) is:

{noformat}
-XaddExports:<source-module>/<package>=<target-module>(,<target-module>)*{noformat}

See http://openjdk.java.net/jeps/261 for more information.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1525,,,,,,0.0,0.0,,1|i03ghj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WildFly-Core and its build process cannot rely on default JDK JAXP providers,WFCORE-1491,12616070,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ropalka,ropalka,ropalka,20/Apr/16 12:06 PM,19/May/16 11:11 PM,29/Nov/16 3:52 PM,19/May/16 11:11 PM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Modules,Test Suite,,,,0,,,,,,"In order to ensure consistent WildFly-Core build and runtime behavior on all JDKs it is necessary to explicitly specify which JAXP providers should be used instead of default ones
provided by JDK.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1525,,,,,,0.0,1.0,,1|i03gc7:,9223372036854775807,,,,,,,,,,,26/Apr/16 11:45 AM;ropalka;One of PRs related to this issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
JDK9 removes support for sun.boot.class.path,WFCORE-1490,12616067,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ropalka,ropalka,ropalka,20/Apr/16 11:54 AM,18/May/16 9:47 AM,29/Nov/16 3:52 PM,18/May/16 9:47 AM,2.1.0.Final,,,,,,3.0.0.Alpha1,,JMX,,,,,0,,,,,,"Cite from: http://openjdk.java.net/jeps/261

_*Removed: Bootstrap class-path options*

In earlier releases the -Xbootclasspath option allows the default bootstrap class path to be overridden, and the -Xbootclasspath/p option allows a sequence of files and directories to be prepended to the default path. The computed value of this path is reported via the JDK-specific system property sun.boot.class.path.

With the module system in place there is no longer a bootstrap class path as such, so the javac compiler only supports the -Xbootclasspath option in legacy mode, the java launcher no longer supports either option, and the system property sun.boot.class.path will be removed._",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1525,,,,,,0.0,1.0,,1|i03gbj:,9223372036854775807,,,,,,,,,,,26/Apr/16 11:44 AM;ropalka;One of PRs related to this issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
PersistanceResourceTestCase fails on some windows machines,WFCORE-1486,12615975,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pkremens,pkremens,pkremens,20/Apr/16 7:24 AM,02/May/16 2:22 AM,29/Nov/16 3:52 PM,20/Apr/16 9:39 PM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,"*Description of problem:*
PersistanceResourceTestCase from wildfly-core fails on some windows machines.

*Steps to Reproduce:*
# cd controller
# mvn test -Dtest=PersistanceResourceTestCase

*Actual results:*
{noformat}
java.lang.AssertionError: DEV99\hudson:READ_DATA/WRITE_DATA/APPEND_DATA/READ_NAMED_ATTRS/WRITE_NAMED_ATTRS/EXECUTE/DELETE_CHILD/READ_ATTRIBUTES/WRITE_ATTRIBUTES/READ_ACL/SYNCHRONIZE:ALLOW
Expected: a collection containing <WRITE_OWNER>
     but: was <WRITE_ATTRIBUTES>, was <APPEND_DATA>, was <READ_ACL>, was <SYNCHRONIZE>, was <DELETE_CHILD>, was <READ_ATTRIBUTES>, was <WRITE_DATA>, was <WRITE_NAMED_ATTRS>, was <READ_DATA>, was <READ_NAMED_ATTRS>, was <EXECUTE>
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:865)
	at org.jboss.as.controller.persistence.PersistanceResourceTestCase.testAclFilePermissions(PersistanceResourceTestCase.java:701)
{noformat}

*Expected results:*
No errors on output",,,,,,,,,,,,,,,,JBEAP-2335,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1513,,,,,,0.0,1.0,,1|i03frj:,9223372036854775807,,,,,,,,,,,20/Apr/16 7:26 AM;pkremens;See JBEAP-2335 for details.,,,,,,,,,,,,,,,,,,,,,,,,,,
""":read-resource(recursive=true)"" generates output with random order, could be ordered alphabetically by keys",WFCORE-1485,12615944,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,lthon,lthon,lthon,20/Apr/16 6:06 AM,10/May/16 4:07 PM,29/Nov/16 3:52 PM,20/Apr/16 9:54 AM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,""":read-resource(recursive=true)"" generates output with random order, could it be ordered alphabetically by keys 

Now I can't do simple diff of changes, it's necessary to parse output to get valid list of changes.

I expect output is stored in some structure data format before processed/printed out, could you use some sorted structure (Tree* stuff) ?

Command to generate output and diff
{code}
jboss-eap-7.0/bin/jboss-cli.sh -c "":read-resource(recursive=true)"" > 01 && jboss-eap-7.0/bin/jboss-cli.sh -c "":read-resource(recursive=true)"" > 02 
diff 01 02 ## meld kdiff3 or your diff favorite tool
{code}


Diff in my case:
{code:diff}
> 02 && diff 01 02
50c50,67
<                                 ""security"" => {""classification"" => {""security-domain"" => {
---
>                                 ""logging"" => {""classification"" => {
>                                     ""logger"" => {
>                                         ""configured-application"" => undefined,
>                                         ""default-application"" => false,
>                                         ""applies-to"" => undefined
>                                     },
>                                     ""logging-profile"" => {
>                                         ""configured-application"" => undefined,
>                                         ""default-application"" => false,
>                                         ""applies-to"" => undefined
>                                     }
>                                 }},
>                                 ""naming"" => {""classification"" => {""binding"" => {
>                                     ""configured-application"" => undefined,
>                                     ""default-application"" => false,
>                                     ""applies-to"" => undefined
>                                 }}},
>                                 ""mail"" => {""classification"" => {""mail-session"" => {
64a82,86
>                                 ""security"" => {""classification"" => {""security-domain"" => {
>                                     ""configured-application"" => undefined,
>                                     ""default-application"" => false,
>                                     ""applies-to"" => undefined
>                                 }}},
66,70d87
<                                     ""data-source"" => {
<                                         ""configured-application"" => undefined,
<                                         ""default-application"" => false,
<                                         ""applies-to"" => undefined
<                                     },
80,86d96
<                                     }
<                                 }},
<                                 ""logging"" => {""classification"" => {
<                                     ""logging-profile"" => {
<                                         ""configured-application"" => undefined,
<                                         ""default-application"" => false,
<                                         ""applies-to"" => undefined
88c98
<                                     ""logger"" => {
---
>                                     ""data-source"" => {
93,103c103
<                                 }},
<                                 ""mail"" => {""classification"" => {""mail-session"" => {
<                                     ""configured-application"" => undefined,
<                                     ""default-application"" => false,
<                                     ""applies-to"" => undefined
<                                 }}},
<                                 ""naming"" => {""classification"" => {""binding"" => {
<                                     ""configured-application"" => undefined,
<                                     ""default-application"" => false,
<                                     ""applies-to"" => undefined
<                                 }}}
---
>                                 }}
106,114d105
<                                 ""mail"" => {""classification"" => {""mail-server-security"" => {
<                                     ""configured-requires-addressable"" => undefined,
<                                     ""configured-requires-read"" => undefined,
<                                     ""configured-requires-write"" => undefined,
<                                     ""default-requires-addressable"" => false,
<                                     ""default-requires-read"" => false,
<                                     ""default-requires-write"" => true,
<                                     ""applies-to"" => undefined
<                                 }}},
116c107
<                                     ""naming-binding"" => {
---
>                                     ""jndi-view"" => {
121,122c112,113
<                                         ""default-requires-read"" => false,
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-read"" => true,
>                                         ""default-requires-write"" => true,
125c116
<                                     ""jndi-view"" => {
---
>                                     ""naming-binding"" => {
130,131c121,122
<                                         ""default-requires-read"" => true,
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-read"" => false,
>                                         ""default-requires-write"" => false,
153,162c144
<                                 ""remoting"" => {""classification"" => {""remoting-security"" => {
<                                     ""configured-requires-addressable"" => undefined,
<                                     ""configured-requires-read"" => undefined,
<                                     ""configured-requires-write"" => undefined,
<                                     ""default-requires-addressable"" => false,
<                                     ""default-requires-read"" => true,
<                                     ""default-requires-write"" => true,
<                                     ""applies-to"" => undefined
<                                 }}},
<                                 ""security"" => {""classification"" => {""misc-security"" => {
---
>                                 ""logging"" => {""classification"" => {""view-server-logs"" => {
167,168c149,150
<                                     ""default-requires-read"" => true,
<                                     ""default-requires-write"" => true,
---
>                                     ""default-requires-read"" => false,
>                                     ""default-requires-write"" => false,
171,172c153,154
<                                 ""undertow"" => {""classification"" => {
<                                     ""undertow-handler"" => {
---
>                                 ""core"" => {""classification"" => {
>                                     ""security-realm-ref"" => {
176,178c158,160
<                                         ""default-requires-addressable"" => false,
<                                         ""default-requires-read"" => false,
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-addressable"" => true,
>                                         ""default-requires-read"" => true,
>                                         ""default-requires-write"" => true,
181c163
<                                     ""undertow-filter"" => {
---
>                                     ""server-ssl"" => {
185,187c167,169
<                                         ""default-requires-addressable"" => false,
<                                         ""default-requires-read"" => false,
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-addressable"" => true,
>                                         ""default-requires-read"" => true,
>                                         ""default-requires-write"" => true,
190c172
<                                     ""web-connector"" => {
---
>                                     ""service-container"" => {
196c178
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-write"" => true,
199c181
<                                     ""web-access-log"" => {
---
>                                     ""extensions"" => {
205c187
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-write"" => true,
207,237c189,190
<                                     }
<                                 }},
<                                 ""logging"" => {""classification"" => {""view-server-logs"" => {
<                                     ""configured-requires-addressable"" => undefined,
<                                     ""configured-requires-read"" => undefined,
<                                     ""configured-requires-write"" => undefined,
<                                     ""default-requires-addressable"" => false,
<                                     ""default-requires-read"" => false,
<                                     ""default-requires-write"" => false,
<                                     ""applies-to"" => undefined
<                                 }}},
<                                 ""datasources"" => {""classification"" => {""data-source-security"" => {
<                                     ""configured-requires-addressable"" => undefined,
<                                     ""configured-requires-read"" => undefined,
<                                     ""configured-requires-write"" => undefined,
<                                     ""default-requires-addressable"" => false,
<                                     ""default-requires-read"" => true,
<                                     ""default-requires-write"" => true,
<                                     ""applies-to"" => undefined
<                                 }}},
<                                 ""resource-adapters"" => {""classification"" => {""resource-adapter-security"" => {
<                                     ""configured-requires-addressable"" => undefined,
<                                     ""configured-requires-read"" => undefined,
<                                     ""configured-requires-write"" => undefined,
<                                     ""default-requires-addressable"" => false,
<                                     ""default-requires-read"" => true,
<                                     ""default-requires-write"" => true,
<                                     ""applies-to"" => undefined
<                                 }}},
<                                 ""core"" => {""classification"" => {
<                                     ""extensions"" => {
---
>                                     },
>                                     ""system-property"" => {
246c199
<                                     ""service-container"" => {
---
>                                     ""module-loading"" => {
255c208
<                                     ""domain-controller"" => {
---
>                                     ""jvm"" => {
264c217
<                                     ""domain-names"" => {
---
>                                     ""snapshots"" => {
270c223
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-write"" => false,
273c226
<                                     ""security-domain-ref"" => {
---
>                                     ""access-control"" => {
291c244
<                                     ""management-interfaces"" => {
---
>                                     ""credential"" => {
296c249
<                                         ""default-requires-read"" => false,
---
>                                         ""default-requires-read"" => true,
300c253
<                                     ""socket-binding-ref"" => {
---
>                                     ""management-interfaces"" => {
306c259
<                                         ""default-requires-write"" => false,
---
>                                         ""default-requires-write"" => true,
309c262
<                                     ""socket-config"" => {
---
>                                     ""security-domain"" => {
313,314c266,267
<                                         ""default-requires-addressable"" => false,
<                                         ""default-requires-read"" => false,
---
>                                         ""default-requires-addressable"" => true,
>                                         ""default-requires-read"" => true,
318c271
<                                     ""security-vault"" => {
---
>                                     ""patching"" => {
323c276
<                                         ""default-requires-read"" => true,
---
>                                         ""default-requires-read"" => false,
327c280
<                                     ""server-ssl"" => {
---
>                                     ""read-whole-config"" => {
331c284
<                                         ""default-requires-addressable"" => true,
---
>                                         ""default-requires-addressable"" => false,
336c289
<                                     ""jvm"" => {
---
>                                     ""domain-controller"" => {
345c298
<                                     ""module-loading"" => {
---
>                                     ""security-vault"" => {
350c303
<                                         ""default-requires-read"" => false,
---
>                                         ""default-requires-read"" => true,
354c307
<                                     ""security-domain"" => {
---
>                                     ""security-domain-ref"" => {
363c316
<                                     ""snapshots"" => {
---
>                                     ""socket-binding-ref"" => {
372c325
<                                     ""credential"" => {
---
>                                     ""domain-names"" => {
377c330
<                                         ""default-requires-read"" => true,
---
>                                         ""default-requires-read"" => false,
381c334
<                                     ""read-whole-config"" => {
---
>                                     ""socket-config"" => {
386c339
<                                         ""default-requires-read"" => true,
---
>                                         ""default-requires-read"" => false,
389,390c342,363
<                                     },
<                                     ""patching"" => {
---
>                                     }
>                                 }},
>                                 ""mail"" => {""classification"" => {""mail-server-security"" => {
>                                     ""configured-requires-addressable"" => undefined,
>                                     ""configured-requires-read"" => undefined,
>                                     ""configured-requires-write"" => undefined,
>                                     ""default-requires-addressable"" => false,
>                                     ""default-requires-read"" => false,
>                                     ""default-requires-write"" => true,
>                                     ""applies-to"" => undefined
>                                 }}},
>                                 ""resource-adapters"" => {""classification"" => {""resource-adapter-security"" => {
>                                     ""configured-requires-addressable"" => undefined,
>                                     ""configured-requires-read"" => undefined,
>                                     ""configured-requires-write"" => undefined,
>                                     ""default-requires-addressable"" => false,
>                                     ""default-requires-read"" => true,
>                                     ""default-requires-write"" => true,
>                                     ""applies-to"" => undefined
>                                 }}},
>                                 ""undertow"" => {""classification"" => {
>                                     ""undertow-filter"" => {
396c369
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-write"" => false,
399c372
<                                     ""access-control"" => {
---
>                                     ""web-connector"" => {
403,405c376,378
<                                         ""default-requires-addressable"" => true,
<                                         ""default-requires-read"" => true,
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-addressable"" => false,
>                                         ""default-requires-read"" => false,
>                                         ""default-requires-write"" => false,
408c381
<                                     ""system-property"" => {
---
>                                     ""undertow-handler"" => {
414c387
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-write"" => false,
417c390
<                                     ""security-realm-ref"" => {
---
>                                     ""web-access-log"" => {
421,423c394,396
<                                         ""default-requires-addressable"" => true,
<                                         ""default-requires-read"" => true,
<                                         ""default-requires-write"" => true,
---
>                                         ""default-requires-addressable"" => false,
>                                         ""default-requires-read"" => false,
>                                         ""default-requires-write"" => false,
426c399,426
<                                 }}
---
>                                 }},
>                                 ""datasources"" => {""classification"" => {""data-source-security"" => {
>                                     ""configured-requires-addressable"" => undefined,
>                                     ""configured-requires-read"" => undefined,
>                                     ""configured-requires-write"" => undefined,
>                                     ""default-requires-addressable"" => false,
>                                     ""default-requires-read"" => true,
>                                     ""default-requires-write"" => true,
>                                     ""applies-to"" => undefined
>                                 }}},
>                                 ""remoting"" => {""classification"" => {""remoting-security"" => {
>                                     ""configured-requires-addressable"" => undefined,
>                                     ""configured-requires-read"" => undefined,
>                                     ""configured-requires-write"" => undefined,
>                                     ""default-requires-addressable"" => false,
>                                     ""default-requires-read"" => true,
>                                     ""default-requires-write"" => true,
>                                     ""applies-to"" => undefined
>                                 }}},
>                                 ""security"" => {""classification"" => {""misc-security"" => {
>                                     ""configured-requires-addressable"" => undefined,
>                                     ""configured-requires-read"" => undefined,
>                                     ""configured-requires-write"" => undefined,
>                                     ""default-requires-addressable"" => false,
>                                     ""default-requires-read"" => true,
>                                     ""default-requires-write"" => true,
>                                     ""applies-to"" => undefined
>                                 }}}
{code}",,,,,,,,,,,,,,,,JBEAP-4262,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1511,,,,,,0.0,2.0,,1|i03fkn:,9223372036854775807,,,,,,,,,,,20/Apr/16 6:31 AM;lthon;I created https://github.com/wildfly/wildfly-core/pull/1511,"20/Apr/16 9:52 AM;brian.stansberry;I don't want to use TreeSet etc to impose a canonical ordering, but the PR is very much welcome, as the design intent was to preserve the original order.",,,,,,,,,,,,,,,,,,,,,,,,,
Recursive removal doesn't deal with reload-required cleanly,WFCORE-1483,12615823,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,19/Apr/16 2:18 PM,30/Jun/16 12:58 PM,29/Nov/16 3:52 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"There's a flaw in the WFCORE-808 recursive removal feature when it comes to reload-required.

The problem is some of the resources recursively removed can require a reload while others don't, with the result that you get a semi-random set of changes to the runtime. This is particularly an issue if the parent resource requires reload and children don't. So based on the parent resource description the user may be expecting no runtime changes but instead some services are removed.

This is tricky because when the Stage.RUNTIME steps execute for the child resources, they don't know if their parents are going to require a reload. We can probably use a OperationContext attachment of some sort to communicate information between steps associated with a recursive reload, but even with that kind of thing in place, unless we change how AbstractRemoveStepHandler works (likely breaking subclasses) at the time the child decides whether or not to require reload it's not going to know what the parents will decide. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i03evb:,9223372036854775807,,,,,,,,,,,"30/Jun/16 12:58 PM;brian.stansberry;A possibility here is to use the OperationDefinition data associated with the handler for each remove to see if the op will require-reload. That is, the kernel doesn't wait for the remove OSH to call context.reloadRequired() in order to know that reload is required, as that call happens too late. Too late because the Stage.RUNTIME call (i.e. invocation of performRuntime(...)) for the parent resource will happen *after* the Stage.RUNTIME call for the children. What's needed is to have an expectation for the parent and all descendants before *any* of them get to their performRuntime() handling.

Still tricky though. The mechanism to communicate state between the relevant steps (but not to other steps) also doesn't exist.",,,,,,,,,,,,,,,,,,,,,,,,,,
list-add operation doesn't work on login-modules attribute,WFCORE-1481,12615627,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,spyrkob,spyrkob,18/Apr/16 10:48 AM,25/Jul/16 10:42 PM,29/Nov/16 3:52 PM,25/Jul/16 10:42 PM,2.1.0.Final,,,,,,3.0.0.Alpha4,,Domain Management,,,,,0,,,,,,Executing list-add operation on login-modules results in the modules being replaced instead of appending new module.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1613,,,,,,0.0,10.0,,1|i03dp3:,9223372036854775807,,,,"# query login-modules: {{/subsystem=security/security-domain=other/authentication=classic:read-resource}} - there should be two modules: Remoting and RealmDirect
# execute in cli
{noformat}
/subsystem=security/security-domain=other/authentication=classic:list-add(name=""login-modules"", value={ \
 code=>""RoleMapping"", \
 flag=>""optional""\
})
{noformat}
# query login-modules: {{/subsystem=security/security-domain=other/authentication=classic:read-resource}}

Expected:
There should be three login-modules: Remoting, RealmDirect and RoleMapping

Actual:
There is only one login-module: RoleMapping",55.0,,,,,,"18/Apr/16 10:58 AM;spyrkob;I think this is because login-modules attribute has been replaced with login-module sub-model. 
When AbstractCollectionHandler checks if the login-modules attribute exists[1], it succeeds, but when it tries to resolve current value [2] the resulting model is always undefined.

[1] https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/AbstractCollectionHandler.java#L84
[2] https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/AbstractCollectionHandler.java#L97","18/Apr/16 5:27 PM;brian.stansberry;I'm going to move this to WFCORE because that's where the problem is. It's not specific to this particular attribute.

I believe the problem is AbstractCollectionHandler L91, which should not be a simple context.readResource(ForUpdate). Instead the handler needs to create a ""response"" ModelNode, create a ""read-attribute"" operation, pass in those two params to add a step to execute that op, and then another step that uses the data in the now-populated response node to do the rest of the manipulation.

Basically, calling context.readResource(ForUpdate) only works if the attribute value is stored in the Resource's internal model. In this case it is not; it's synthetically derived by reading the child resources.

A twist is adding a step with the read-resource op is not going to acquire the controller lock before the read, so you could have a race where the read is done, then another op writes, changing the relevant model, and then the write executes, overwriting the other op's change. Sure, it's a 1 in 1,000,000,000 case, but the simple solution is to call context.acquireControllerLock before adding the steps if requiredReadWriteAccess == true.","19/Apr/16 9:53 AM;ctomc;This one is tricky, and was known issue when when we ware working on this feature.
if my memory serves me right it was decided we shouldn't need to complicate whole code with extra chaining of calls to address this one single use case, as security subsystem was on the way out to be replaced with Elytron.
But that is history, security subsystem is here to stay and we should address this. 
Either by complicating code for this corner case within collection handling operations or maybe even change the way security subsystem code around ""virtual attribute"" login-modules behaves.","19/Apr/16 10:15 AM;brian.stansberry;I think this can happen in other contexts. Basically there is no requirement that resources expose attribute values via Resource.getModel() so kernel code shouldn't be assuming they do.
","13/May/16 9:17 AM;thofman;I tried Brian's suggestion, and it's working, except that CollectionOperationsTestCase#test[Map/List]OperationsInComposite fails (https://github.com/wildfly/wildfly-core/blob/master/controller/src/test/java/org/jboss/as/controller/operation/global/CollectionOperationsTestCase.java#L400).

However, I think the test case doesn't represent real use cases.

Reason why it's failing is that:
* the tested attribute has Read Operation Step Handler defined, which simulates reading data from runtime,
* the tested attribute also has WriteOSH defined, which updates the resource model, and adds another step to update runtime, but this step is added to RUNTIME stage,
* so the list-add ops in the composite doesn't see results of previous list-add ops, because runtime is updated at the end of the composite op, not its' individual steps.

This problem doesn't happen when:
* ReadOSH is not set, because then the value is read from resource's model, which is up to date,
* or WriteOSH is doing everything in DOMAIN stage.

So I tried to look for actually existing read-write list attributes in Wildfly. The only ones I found either doesn't have ReadOSH, or are using LegacyModulesAttributeReader/Writer. LegacyModulesAttributeWriter is not using RUNTIME stage, so is not affected by this problem.

So I think this behaviour is OK..?","13/May/16 11:36 AM;brian.stansberry;Just a quick comment on a couple details before digging in more on the main point you raised:

""WriteOSH is doing everything in DOMAIN stage"" is not ok. Stage.DOMAIN shouldn't be used by anything outside the specialized OSHs the HostControllers use for rolling changes out to the domain.

The test sounds odd, in the ""the tested attribute also has WriteOSH defined, which updates the resource model"" bit. That sounds contrived; I would expect a runtime-only attribute to only write to the runtime, and never write to the model.

But it sounds like changing that to not write to the model would not help the basic problem, which is that Stage.RUNTIME changes are not getting handled.

I'll poke a bit. ","13/May/16 4:19 PM;brian.stansberry;I looked at the test case and I don't think my word ""contrived"" was accurate; I think there was just a small mistake in the test in not reading the attribute value in Stage.RUNTIME. https://github.com/wildfly/wildfly-core/pull/1562 fixes that.

I think the fix you're trying will have problems with this scenario of working with a runtime-only attribute, but I think the existing code will too. I have some thoughts on how to get it to work, but it will be complex. If you can't find examples of runtime-only list and map attributes it may be ok to get the basic case corrected and file a JIRA for the runtime-only case. The runtime-only case fix will likely build on the simple case fix anyway. Probably by doing some gymnastics to get things to execute in Stage.RUNTIME at the right point. To get an effecdt like your Stage.DOMAIN suggestion, but Stage.RUNTIME instead of Stage.DOMAIN.

Quick summary of the trick:
1) Find out before doing any read-attribute whether the attribute is runtime-only. This is done via context.getResourceRegistration().getAttributeAccess(...).getStorageType().

2) If it's Storage.RUNTIME, then instead of registering the ""another step that uses the data in the now-populated response node to do the rest of the manipulation"" in Stage.MODEL, you do the following:

a) Register a step in Stage.RUNTIME that does nothing except
b) Registers also in Stage.RUNTIME ""another step that uses the data in the now-populated response node to do the rest of the manipulation"".

Here's how this works. I'll describe the manipulation of the list of steps below, with this id syntax M## or R## where M is Stage.MODEL, R is Stage.RUNTIME and ## is a sequence number.

I. The Storage.CONFIGURATION (i.e. non-runtime-only) attribute case looks like this:

1) Begin operation execution:

M0 (the PrepareStepHandler, which figures out which OSH is registered to handle the user's request and adds a step.)

2) M0 executes:

M0
M1 (ListAddHandler) 

3) M1 executes

M0
M1
M2 (the handler for read-attribute)
M3 (the handler that takes the M2 result and adds write-attribute)

4) M2 executes

(same queue as 3))

5) M3 executes

M0
M1
M2
M3
M4 (the write-attribute step)

6) M4 executes

M0
M1
M2
M3
M4 
R1 (a step to update the runtime to reflect the write-attribute)


II. The Storage.RUNTIME attribute case looks like this:

1) and 2) are the same as above.

3) M1 executes

M0
M1
M2 (the handler for read-attribute)
R1 (the odd R handler that just adds a step)

4) M2 executes

M0
M1
M2
R1 (the odd R handler that just adds a step)
R2 (added by M2 to do the read of the runtime in Stage.RUNTIME)

5) R1 executes

M0
M1
M2
R1
R2
R3 (the handler that takes the R2 result and adds write-attribute)

6) R2 executes

same as 5)

7) R3 executes

M0
M1
M2
R1
R2
R3
R4 (the write-attribute step, registered in Stage.RUNTIME)


8) R4 executes

M0
M1
M2
R1
R2
R3
R4 

So why the ""odd"" R1? Because R3 has to execute after R2, which means it needs to be registered after R2. The ""odd"" R1 executes after M2 so it is able to register R3 after R2.

The reality is things are even more complex than this. But this illustrates the kind of things that can be done to trigger execution in the right spot.","13/May/16 4:34 PM;brian.stansberry;I closed the PR I mentioned in my last comment. I get what the test is doing and it's not contrived and not mistaken. It's just validating that a normal Storage.CONFIGURATION attribute with a handler that updates the runtime works properly, all the way through to updating the runtime.","16/May/16 7:52 AM;thofman;That's great explanation, I will try it out.

""or WriteOSH is doing everything in DOMAIN stage"" is actually typo - should have been MODEL, not DOMAIN. Never mind, I will see where I get with advice above.","19/May/16 8:00 AM;thofman;Status update

I committed my current version here: https://github.com/TomasHofman/wildfly-core/commit/7f370a4a6ea1e8c48abc9330d7759afe5c4a0077#diff-caff84f283fb9500ec241e826f3a2728


I. Storage.RUNTIME

I think this case is working fine. The only issue is that even if one uses AbstractWriteAttributeHandler as writing OSH, the handler doesn't validates the operation correctly. That is because validation is performed in MODEL stage when the final value is not yet determined, so the validation passes even if it shouldn't. It could be solved by performing the validation in RUNTIME stage manually like:

{code}
.addReadWriteAttribute(LIST_ATTRIBUTE, readerOSH,
                        new OperationStepHandler() {
                            @Override
                            public void execute(OperationContext context, ModelNode operation) throws OperationFailedException {
                                context.addStep(operation, (context1, operation1) -> {
                                    // validate
                                    final ModelNode syntheticOp = new ModelNode();
                                    syntheticOp.get(LIST_ATTRIBUTE.getName()).set(operation.get(VALUE));
                                    LIST_ATTRIBUTE.validateOperation(syntheticOp);

                                    // set
                                    runtimeListAttributeValue = operation.get(VALUE);
                                }, OperationContext.Stage.RUNTIME);
                            }
                        })
{code}

So the person implementing the attribute has to be aware that:
* he must add RUNTIME steps in his reader/writer OSHs,
* he must perform validation manually, if he wants it.


II. Storage.Configuration

I still little bit struggle with composite operations, particularly in that test case which you were looking at.

Lets have Storage.CONFIGURATION attribute with reader OSH like the one in the test case:

{code}
StringListAttributeDefinition LIST_ATTRIBUTE = new StringListAttributeDefinition.Builder(""my-list-attribute"")
            .setAllowNull(true)
            .build();

ResourceBuilder.Factory.create(...)
    .addReadWriteAttribute(LIST_ATTRIBUTE, new OperationStepHandler() {
                    @Override
                    public void execute(OperationContext context, ModelNode operation) throws OperationFailedException {
                        context.getResult().set(runtimeListAttributeValue);
                    }
                }, new AbstractWriteAttributeHandler(LIST_ATTRIBUTE) {
                    @Override
                    protected boolean applyUpdateToRuntime(OperationContext context, ModelNode operation, String attributeName, ModelNode resolvedValue, ModelNode currentValue, HandbackHolder handbackHolder) throws OperationFailedException {
                        runtimeListAttributeValue = operation.get(VALUE);
                        return false;
                    }
                });
{code}

and execute composite operation containing two list-adds:

{code}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""list-add"",
            ""address"" => [(""subsystem"" => ""test"")],
            ""name"" => ""my-list-attribute"",
            ""value"" => ""value1""
        },
        {
            ""operation"" => ""list-add"",
            ""address"" => [(""subsystem"" => ""test"")],
            ""name"" => ""my-list-attribute"",
            ""value"" => ""value2""
        }
    ]
}
{code}

Problem is that the second list-add reads before the first one writes. The step sequence would go:

1) begin operation

M0 PrepareStepHandler

2) M0 executes

M1 CompositeOperationHandler

3) M1 executes

M2 ListAddHandler ""value1""
M3 ListAddHandler ""value2""

4) M2 executes

M4 ReadAttributeHandler
M5 handler that modifies the value and adds write handler
M3 ListAddHandler ""value2""

5) M4 executes - which executes ReadOST, which in this case effectively reads from runtime

M5 handler that modifies the value and adds write handler
M3 ListAddHandler ""value2""

6) M5 executes

M6 WriteAttributeHandler - executes AbstractWriteAttributeHandler instance defined as WriteOST
M3 ListAddHandler ""value2""

7) M6 executes - resource model is updated

M3 ListAddHandler ""value2""
R1 handler that updates runtime with \[""value1""]

8) M3 ListAddHandler for ""value2"" executes, and is about to read from runtime again, but runtime still wasn't updated, so it reads \[] instead of \[""value1""].

Then, after second ListAddHandler processes, we are left with:

R1 handler that updates runtime with \[""value1""]
R2 handler that updates runtime with \[""value2""] (instead of \[""value1"", ""value2""])


I mean to me the test case seams like reader OST is reading from RUNTIME in stage MODEL, and writer OSH is writing to RUNTIME in stage RUNTIME, so they can never meet. I think the reader OST should either not be there, or should not read from a variable that is only updated in RUNTIME stage.",,,,,,,,,,,,,,,,,
Jar sub deployment has as first dependency parent ear	,WFCORE-1480,12615628,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,vpakan,vpakan,vpakan,18/Apr/16 10:49 AM,18/Apr/16 10:51 AM,29/Nov/16 3:52 PM,18/Apr/16 10:51 AM,3.0.0.Alpha1,,,,,,,,Modules,,,,,0,,,,,,"Jar file included in ear main directory is resolved as sub deployment with parent ear as first dependency.
Therefore jar files contained in ear/lib directory have priority before implicit modules when class is created inside jar file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i03dpb:,9223372036854775807,,,,"1. Create ear file with war and jar file in ear main directory
2. Add jar file to war class path via war MANIFEST.MF
3. Add method to class in jar file instantiating class from server implicit modules
4. Add jar file containing class from step #3 but different behavior to ear/lib directory
5. Invoke method from step #3 from war file
ERROR: Class from ear/lib directory is instantiated instead of class from implicit module",,,,,,,18/Apr/16 10:51 AM;vpakan;Created for wrong project,,,,,,,,,,,,,,,,,,,,,,,,,,
Jar sub deployment has as first dependency parent ear,WFCORE-1479,12615600,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,vpakan,vpakan,vpakan,18/Apr/16 9:45 AM,02/Nov/16 10:37 AM,29/Nov/16 3:52 PM,03/Oct/16 2:54 PM,3.0.0.Alpha1,,,,,,3.0.0.Alpha10,,Modules,,,,,0,,,,,,"Jar file included in ear main directory is resolved as sub deployment with parent ear as first dependency.
Therefore jar files contained in ear/lib directory have priority before implicit modules when class is created inside jar file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i03dj3:,9223372036854775807,,,,"1. Create ear file with war and jar file in ear main directory
2. Add jar file to war class path via war MANIFEST.MF
3. Add method to class in jar file instantiating class from server implicit modules
4. Add jar file containing class from step #3 but different behavior to ear/lib directory
5. Invoke method from step #3 from war file

ERROR: Class from ear/lib directory is instantiated instead of class from implicit module ",,,,,,,18/Apr/16 10:07 AM;vpakan;PR with test: https://github.com/wildfly/wildfly/pull/8852,,,,,,,,,,,,,,,,,,,,,,,,,,
DefaultOperationRequestAddress.appendPath loses Node.name,WFCORE-1478,12615586,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,jdenise,jdenise,18/Apr/16 9:19 AM,18/Apr/16 9:19 AM,29/Nov/16 3:52 PM,,,,,,,,,,CLI,,,,,0,,,,,,"Ran into this obvious issue reading code. Not even sure this method is used somewhere. 

for(Node n : path) {
            nodes.add(new NodeImpl(n.getType(),* n.getType()*));
        }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i03dfz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI version command should not use JBoss AS in its output field names,WFCORE-1474,12615396,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,15/Apr/16 11:19 AM,24/Jun/16 11:28 AM,29/Nov/16 3:52 PM,24/Jun/16 11:28 AM,2.1.0.Final,,,,,,3.0.0.Alpha3,,CLI,,,,,0,,,,,,"An example output of the current version command

[standalone@localhost:9990 /] version 
JBoss Admin Command-line Interface
JBOSS_HOME: /xxx/wildfly-core-3.0.0.Alpha1-SNAPSHOT
JBoss AS release: 3.0.0.Alpha1-SNAPSHOT ""Kenny""
JBoss AS product: <product name>
JAVA_HOME: /yyy/java
java.version: 1.8.0_60
java.vm.vendor: Oracle Corporation
java.vm.version: 25.60-b23
os.name: Linux
os.version: 4.4.6-300.fc23.x86_64

'JBoss AS' should not appear in the field names.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1590,,,,,,0.0,0.0,,1|i03cdb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI class is mixing commands and operations,WFCORE-1471,12614874,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,13/Apr/16 9:26 AM,10/May/16 4:06 PM,29/Nov/16 3:52 PM,18/Apr/16 4:15 PM,3.0.0.Alpha1,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"CLI.cmd method logic is not in sync with the CLI syntax. 
A fallback is implemented in order to route requests to cx.handle only if ctx.buildRequest(cliCommand) is failing. 
For example this doesn't cope with reload vs :reload. In this case, buildRequest will succeed both for reload and :reload. CLI.cmd(""reload"") will end to be treated as CLI.cmd("":reload"");

Furthermore batch and workflow are not supported by CLI.

I am suggesting to implement the following logic:
1) If batch is enabled or a workflow is enabled, route the command to handle
2) Parse the request.
3) If this is an operation, route to execute
4) Otherwise route to handle

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i039b3:,9223372036854775807,,,,"        CommandContext cleanContext = null;
        try {
            cleanContext = CommandContextFactory.getInstance().newCommandContext();
        } catch (CliInitializationException ex) {
        }
        try {
            CommandContext ctx = CommandContextFactory.getInstance().newCommandContext(
                    new CommandContextConfiguration.Builder().setController(new URI(""http-remoting"",
                            null, TestSuiteEnvironment.getServerAddress(), 745, null, null, null).toString())
                    .setUsername(null)
                    .setPassword(null)
                    .setClientBindAddress(null)
                    .build());
            ctx.connectController();
        } catch (Exception ex) {
            System.err.println(""OK GOT EXPECTED EXCEPTION"");
        }
        cleanContext.handle(""embed-server --std-out=echo"");
        try {
            ModelNode request = cleanContext.buildRequest(""reload --admin-only=false"");
            ModelNode response = cleanContext.getModelControllerClient().execute(request);
        } catch (Exception e) {
            try {
                cleanContext.handle(""reload --admin-only=false"");
                cleanContext.getExitCode();
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
        try {
            CommandContext ctx2 = CommandContextFactory.getInstance().newCommandContext(
                    new CommandContextConfiguration.Builder().setController(new URI(""http-remoting"",
                            null, TestSuiteEnvironment.getServerAddress(), TestSuiteEnvironment.getServerPort(), null, null, null).toString())
                    .setUsername(null)
                    .setPassword(null)
                    .setClientBindAddress(null)
                    .build());
            ctx2.connectController();
        } catch (Exception ex) {
            System.err.println(""NOT EXPECTED EXCEPTION!!!!!!!"");
            ex.printStackTrace();
        }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
There are unknown project codes in wildfly core,WFCORE-1470,12614855,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jamezp,istraka,istraka,13/Apr/16 8:01 AM,10/May/16 4:03 PM,29/Nov/16 3:52 PM,22/Apr/16 5:10 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,,,,,,0,,,,,," we see unknown project codes in wildfly-core:

{code:java}
        '<<none>>' - 'version/src/main/java/org/jboss/as/version/UsageMessages.java'
        'N/A' - 'core-security/implementation/src/main/java/org/jboss/as/core/security/CoreSecurityMessages.java'
{code}

They should be changed to empty string.

https://issues.jboss.org/browse/EAP7-44?focusedCommentId=13170957&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13170957
",,,,,,,,,,,,,,,,JBEAP-4198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1496,,,,,,0.0,0.0,,1|i03973:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Servers are suspended two times using timeout parameter in domain mode,WFCORE-1467,12613659,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,yersan,yersan,yersan,06/Apr/16 5:35 PM,10/May/16 4:03 PM,29/Nov/16 3:52 PM,10/May/16 4:03 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"In a domain mode :suspend-servers command with a timeout parameter different than 0 executes two suspend operations for each server in the domain. It first executes a suspend with 0ms and later a suspend with the timeout specified.

How to reproduce it:
{code}
[domain@localhost:9990 /] :suspend-servers(timeout=10)
{code}

Server log traces show:
{code}
[Server:server-one] 20:14:40,126 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 8) WFLYSRV0211: Suspending server with 0ms timeout.
[Server:server-one] 20:14:40,135 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 8) WFLYSRV0211: Suspending server with 10000000ms timeout.
{code}

Expected traces are:
{code}
[Server:server-one] 20:14:40,135 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 8) WFLYSRV0211: Suspending server with 10000000ms timeout.
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|i0338f:,9223372036854775807,,,,,,,,,,,"06/Apr/16 6:09 PM;brian.stansberry;This isn't correct either:

[Server:server-one] 20:14:40,135 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 8) WFLYSRV0211: Suspending server with 10000000ms timeout.

It should say ""10000 ms"" not ""10000000ms"".

Hopefully it's just getting multiplied by 1K a second time for the log message and not for the actual timeout calculation!","06/Apr/16 6:31 PM;yersan;Ohh, correct, I didn't see it before, sadly it is being multiplied two times; once in DomainServerLifecycleHandlers#SuspendServersLifecycleHandler and the other in ServerSuspendHandler#execute

Is it necesary a new issue to resolve it?

I suggest remove the multiplication in DomainServerLifecycleHandlers#SuspendServersLifecycleHandler, but I haven't tested yet","06/Apr/16 8:33 PM;jamezp;The issue with the timeout being doubled is because {{DomainServerLifecycleHandlers.SuspendServersLifecycleHandler}} calculates the millis and passes to the {{ServerInventory.awaitServerSuspend()}} (which delegates to the [{{ManagedServer.awaitSuspend()}}|https://github.com/wildfly/wildfly-core/blob/2.1.0.Final/host-controller/src/main/java/org/jboss/as/host/controller/ManagedServer.java#L711-L730]) which executes {{suspend}} again with the timeout which is once again calculated on the suspend operation.

This is the same reason we see the suspend twice actually. It happens first for [each server|https://github.com/wildfly/wildfly-core/blob/2.1.0.Final/host-controller/src/main/java/org/jboss/as/host/controller/ManagedServer.java#L672-L689] then happens again in the {{ServerInventory.awaitServerSuspend()}} for each server.
{code:java}
for (String serverName : processes.keySet()) {
    final String serverModelName = serverInventory.getProcessServerName(serverName);
    if (group == null || serversInGroup.contains(serverModelName)) {
        serverInventory.suspendServer(serverModelName);
        waitForServers.add(serverModelName);
    }
}
if (timeout != 0) {
    serverInventory.awaitServerSuspend(waitForServers, timeout > 0 ? timeout * 1000 : timeout);
}
{code}

The double timeout is easy to fix. The actual suspend operation I'm not so sure what the correct approach is. [~brian.stansberry] what do you think?",07/Apr/16 6:23 AM;kabirkhan;I have updated the PR https://github.com/wildfly/wildfly-core/pull/1490 following Brian's suggestions on https://github.com/wildfly/wildfly-core/pull/1489,,,,,,,,,,,,,,,,,,,,,,,
Wildfly SSL Setup Fails on HSM-Backed Keystore,WFCORE-1466,12613443,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,crogman,crogman,05/Apr/16 12:16 PM,10/May/16 4:02 PM,29/Nov/16 3:52 PM,06/Apr/16 8:21 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,Security,,,,0,,,,,,"Using a keystore type that does not allow or returns empty from getEncoded() on private keys causes a KeyStoreException at startup. This is common in HSM-backed key operations. 

Storing SSL keys and certs in an HSM is a common method of securing keys and offloading SSL overhead.

FileKeyStore.java copies a KeyStore.Entry value into a JKS KeyStore but JKS and PKCS12 KeyStore implementations maintain a copy of the encoded PKCS#8 data for private keys. When applying a KeyStore.Entry from a source that does not return the data for security reasons, the import fails.

While it's still not guaranteed to work with all KeyStore providers, switching {{KeyStore.getInstance(""JKS"")}} to {{KeyStore.getInstance(provider)}} fixes the issue for SafeNet ""Luna"" and SunPKCS11 ""PKCS11"" KeyStore implementations while not breaking the ""PKCS12"" and ""JKS"" cases.

See [https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/FileKeystore.java#L126]

Log output:
{noformat}
2016-04-04 18:53:51,100 i-4b6f79d1 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.server.controller.management.security_realm.test.key-manager: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.test.key-manager: JBAS015229: Unable to start service
	at org.jboss.as.domain.management.security.FileKeystore.load(FileKeystore.java:148)
	at org.jboss.as.domain.management.security.FileKeyManagerService.start(FileKeyManagerService.java:119)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_60]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_60]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_60]
Caused by: java.security.KeyStoreException: Cannot get key bytes, not PKCS#8 encoded
	at sun.security.provider.KeyProtector.protect(KeyProtector.java:174) [rt.jar:1.8.0_60]
	at sun.security.provider.JavaKeyStore.engineSetKeyEntry(JavaKeyStore.java:267) [rt.jar:1.8.0_60]
	at sun.security.provider.JavaKeyStore$JKS.engineSetKeyEntry(JavaKeyStore.java:56) [rt.jar:1.8.0_60]
	at java.security.KeyStoreSpi.engineSetEntry(KeyStoreSpi.java:537) [rt.jar:1.8.0_60]
	at sun.security.provider.KeyStoreDelegator.engineSetEntry(KeyStoreDelegator.java:179) [rt.jar:1.8.0_60]
	at sun.security.provider.JavaKeyStore$DualFormatJKS.engineSetEntry(JavaKeyStore.java:70) [rt.jar:1.8.0_60]
	at java.security.KeyStore.setEntry(KeyStore.java:1557) [rt.jar:1.8.0_60]
	at org.jboss.as.domain.management.security.FileKeystore.load(FileKeystore.java:136)
	... 6 more
{noformat}",Any host environment with an HSM for key management,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1485,,,,,,0.0,9.0,,1|i031y7:,9223372036854775807,,,,"# create an HSM-backed keystore
# configure security-realm/server-identities/ssl/keystore to use the HSM-backed keystore
# start server",,,,,,,05/Apr/16 1:56 PM;dlofthouse;What KeyStore type are you trying to use and are you specifying an alias?,"05/Apr/16 2:39 PM;crogman;I'm using the ""Luna"" KeyType and specifying an alias. The Luna SPI is provided by SafeNet's {{com.safenetinc.luna.provider.LunaProvider}} security provider. We're currently running this patch in production.

Oracle/Sun's PKCS11 provider also fails, but with a NullPointerException instead of ""Cannot get key bytes, not PKCS#8 encoded"" since {{sun.security.pkcs11.P11Key#P11Key.getEncoded()}} returns {{null}} instead of an empty byte array.",05/Apr/16 2:51 PM;dlofthouse;Does this Luna KeyType require you to also provide a file for initialising the KeyStore?  This alias copying is only really supposed to be used for file based KeyStores.,"05/Apr/16 5:41 PM;crogman;There is a server-wide config file for Luna connections, but the actual KeyStore loaded is a file containing either ""tokenlabel:partition_name"" or ""slot:1""

In our configuration, the KeyStore file is created as:
{code}
echo -n tokenlabel:ssl > hsm-ssl.lunaKeystore
{code}
And the normal KeyStore loading from FIleInputStream works with the partition/slot password.

The system-wide config is just pointing at the HSM host, supplying a client cert, etc.

The partition has multiple keys in it, so aliases are necessary.",06/Apr/16 6:25 AM;dlofthouse;If aliases are not necessary can you not just remove the alias attribute from your WildFly configuration to eliminate this error?,06/Apr/16 10:15 AM;crogman;Aliases are required. The partition/slot contains multiple keys and certs.,"06/Apr/16 12:51 PM;dlofthouse;Ok, I will approve the PR - we do have a better solution coming in the future that will also be compatible with PKCS#11 but for now this will cover the two file based types plus Luna",06/Apr/16 4:07 PM;crogman;Great. I'm happy to test the other solution if needed.,07/Apr/16 6:50 AM;dlofthouse;Keep an eye out as we start integrating WildFly Elytron - to solve the alias selection problem we have a new KeyStore implementation coming that can wrap an underlying KeyStore and filter which aliases are exposed - this way we entirely eliminate the need to be copying entries from one store to another.,,,,,,,,,,,,,,,,,,
LogContexts are not removed for ear subdeployments,WFCORE-1464,12613444,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aogburn,aogburn,aogburn,05/Apr/16 12:34 PM,21/Jun/16 10:04 AM,29/Nov/16 3:52 PM,05/Apr/16 4:52 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Logging,,,,,0,,,,,,"If an ear does not have its own LogContext created, but a subdeployment in it does, the subdeployment never has its LogContext cleaned up upon undeploy, leading to PermGen leaks.",,,,,,,,,,,,,,,,,,,,,,,,,,,05/Apr/16 12:34 PM;aogburn;app.ear;https://issues.jboss.org/secure/attachment/12399901/app.ear,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1324572,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1487,,,,,,1.0,6.0,,1|i031yf:,9223372036854775807,,,,"-Deploy attached ear
-undeploy ear",,,,,,,05/Apr/16 12:39 PM;aogburn;This addressed the issue for me,06/Apr/16 12:31 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1324572|https://bugzilla.redhat.com/show_bug.cgi?id=1324572] from NEW to ASSIGNED,06/Apr/16 3:22 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1324572|https://bugzilla.redhat.com/show_bug.cgi?id=1324572] from ASSIGNED to POST,14/Jun/16 10:17 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1324572|https://bugzilla.redhat.com/show_bug.cgi?id=1324572] from POST to MODIFIED,16/Jun/16 3:26 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1324572|https://bugzilla.redhat.com/show_bug.cgi?id=1324572] from MODIFIED to ON_QA,21/Jun/16 10:04 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1324572|https://bugzilla.redhat.com/show_bug.cgi?id=1324572] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
ssl element not usable in xml cli config,WFCORE-1462,12613148,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,jdenise,jdenise,04/Apr/16 10:22 AM,10/May/16 4:01 PM,29/Nov/16 3:52 PM,05/Apr/16 2:12 PM,3.0.0.Alpha1,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,Setting a trust store in the cli-config.xml (ssl XML element) has the side effect to load classes from picketBox that is not present in the core feature pack. This makes ssl element not usable in a core configuration. This works well in a fully featured wildly.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1483,,,,,,0.0,0.0,,1|i0307j:,9223372036854775807,,,,Add an ssl element to the cli xml configuration. Start the cli.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LoggingPreferencesTestCase fails with security manager,WFCORE-1461,12613127,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jtymel,jtymel,jtymel,04/Apr/16 9:11 AM,21/Apr/16 4:37 AM,29/Nov/16 3:52 PM,,,,,,,,,,Test Suite,,,,,0,,,,,,"*org.jboss.as.test.manualmode.logging.LoggingPreferencesTestCase*

{{.../WildFly_core/testsuite/manualmode/mvn test -DtestLogToFile=false -Dtest=org.jboss.as.test.manualmode.logging.LoggingPreferencesTestCase -Dsecurity.manager}}

Fails with:
{code}
Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.util.PropertyPermission"" ""jboss.bind.address"" ""read"")"" in code source ""(vfs:/content/logging-test.jar <no signer certificates>)"" of ""null"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:273)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPropertyAccess(WildFlySecurityManager.java:496)
	at java.lang.System.getProperty(System.java:717)
	at org.jboss.as.test.shared.TestSuiteEnvironment.getSystemProperty(TestSuiteEnvironment.java:50)
	at org.jboss.as.test.shared.TestSuiteEnvironment.getHttpAddress(TestSuiteEnvironment.java:162)
	at org.wildfly.test.undertow.UndertowServiceActivator.getAddress(UndertowServiceActivator.java:100)
	at org.wildfly.test.undertow.UndertowServiceActivator.activate(UndertowServiceActivator.java:66)
	at org.jboss.as.server.deployment.service.ServiceActivatorProcessor.deploy(ServiceActivatorProcessor.java:74)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:147)
	... 5 more
{code}",,,,,,,,,,,,,,,,JBEAP-4077,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i0303j:,9223372036854775807,,,,,,,,,,,12/Apr/16 9:28 AM;istudens;What is the point of running WildFly Core tests with Security Manager enabled if there is no Security Manager subsystem in WF Core and thus no option to parse permission.xml of a deployment?,,,,,,,,,,,,,,,,,,,,,,,,,,
"Starting server that has port clash with existing running server returns 'Success', then fails",WFCORE-1459,12612863,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,01/Apr/16 11:11 AM,26/Jul/16 5:11 PM,29/Nov/16 3:52 PM,,,,,,,,,,,,,,,0,,,,,,"The reproducer is: given a vanilla wildfly, add server-test with port-offset=0. Use CLI to start, it reports result"" => ""STARTED"", but the server fails with ""BindException: Address already in use""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i02yif:,9223372036854775807,,,,,,,,,,,01/Apr/16 11:30 AM;luck3y;Possibly other (older) ticket exists for tightening up how this is working.,"26/Jul/16 5:11 PM;brian.stansberry;We expose any startup failures via the management API.

WFCORE-307 will cause boot to fail for non-embedded servers if some form of remote management isn't able to come up.

I'd like some sort of config option that would cause the process to exit in the presence of any boot failure. There's a separate JIRA for that somewhere.

I'm not sure though that, assuming said config option isn't set and there is some non-fatal error in boot, we want to change the state from ""started"". Bears some discussion though.",,,,,,,,,,,,,,,,,,,,,,,,,
add-user.sh scripts change layout of properties files,WFCORE-1458,12612538,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,soul2zimate,soul2zimate,soul2zimate,31/Mar/16 4:00 AM,31/Mar/16 4:27 AM,29/Nov/16 3:52 PM,,2.1.0.Final,,,,,,,,Scripts,,,,,0,,,,,,"*Description of problem:*
add-user.sh scripts change layout of properties files:
* application-users.properties
* mgmt-users.properties

*How reproducible:*
Always

*Steps to Reproduce:*
# get fresh EAP
# ./add-user.sh -u admin2 -p Admin1** -s
# ./add-user.sh -a -u admin3 -p Admin1** -s

*Actual results:*
These comments are moved to the end of application-users.properties file:
{noformat}
#
#$REALM_NAME=ApplicationRealm$ This line is used by the add-user utility to identify the realm name already used in this file.
#
{noformat}

These comments are moved to the end of mgmt-users.properties file:
{noformat}
#
#$REALM_NAME=ManagementRealm$ This line is used by the add-user utility to identify the realm name already used in this file.
#
{noformat}

*Expected results:*
Comments have same order after execution of add-user.sh

CC: [~ctomc]",,,,,,,,,,,,,,,,JBEAP-3983,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1480,,,,,,0.0,0.0,,1|i02wkf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
org.jboss.as.cli.scriptsupport.CLI prevents use of embed-server and embed-host-controller,WFCORE-1456,12612520,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jdenise,brian.stansberry,brian.stansberry,30/Mar/16 9:21 PM,10/May/16 4:06 PM,29/Nov/16 3:52 PM,18/Apr/16 4:15 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"The org.jboss.as.cli.scriptsupport.CLI will throw an exception if the user invokes the cmd method before invoking one of the connect methods. But the connect/disconnect methods are oriented toward remote connections. The result is you can't really use this class with the offline CLI.

I'm not sure what the best fix is here. Perhaps new method(s) analogous to connect/disconnect that establish a CommandContext but don't call connectController(). Or perhaps the checkNotConnected() call in the cmd method should just be dropped, and an unconnected command context created. But then the existing connect/disconnect methods would need to be reworked to deal with the fact that an unconnected command context may be present.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1501,,,,,,0.0,1.0,,1|i02wgf:,9223372036854775807,,,,,,,,,,,18/Apr/16 6:51 AM;aloubyansky;Re-opening since the original PR had failing tests.,,,,,,,,,,,,,,,,,,,,,,,,,,
module patched in a one-off not included in the next cp is not port-forwarded from the prev cp,WFCORE-1453,12612316,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,29/Mar/16 4:21 PM,10/May/16 4:00 PM,29/Nov/16 3:52 PM,31/Mar/16 11:57 AM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Patching ,,,,,0,,,,,,"If CP1 patches module M, a one-off patch later patches the same module M and the following CP2 does not include M at all, module M will not be port-forwarded from CP1. M will be loaded from the original base instead.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1481,,,,,,0.0,1.0,,1|i02v8f:,9223372036854775807,,,,,,,,,,,31/Mar/16 11:57 AM;aloubyansky;PR merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
Socket binding resources do not register a requirement for their interface,WFCORE-1452,12612125,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,28/Mar/16 5:29 PM,30/Mar/16 10:44 AM,29/Nov/16 3:52 PM,30/Mar/16 10:44 AM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"BindingAddHandler doesn't pass it's attributes into the superclass constructor, so the capability references don't get registered by the default AbstractAddStepHandler.recordCapabilitiesAndRequirements. And BindingAddHandler also doesn't override recordCapabilitiesAndRequirements to do the registration itself.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1474,,,,,,0.0,0.0,,1|i02u2v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceBuilderRoot drops data when integrating an externally created child ResourceDefinition,WFCORE-1450,12611789,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,23/Mar/16 1:31 PM,30/Mar/16 5:08 PM,29/Nov/16 3:52 PM,30/Mar/16 5:08 PM,2.1.0.Final,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"ResourceDefinitionRoot's impl of pushChild(ResourceDefinition child) is doing an incomplete integration of the data from 'child'. It drops everything except attributes, operations and children, losing capabilities and other misc data.

I found this will developing tests for WFCORE-1106.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1472,,,,,,0.0,0.0,,1|i02s2f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
truststore-type incorrect case in management schema,WFCORE-1449,12611757,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,23/Mar/16 11:07 AM,10/May/16 3:58 PM,29/Nov/16 3:52 PM,23/Mar/16 12:29 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,Security,,,,0,,,,,,"truststore-Type attribute of element server-sslType should be named truststore-type in XSD. Wildfly configuration parser works with truststore-type, but for example eclipse xml validator complains when truststore-type is used in configuration file.


On the other side when truststore-Type (comply to XSD) is used, wildfly configuration parser starts to complain:
{code}
    [Host Controller] 14:49:21,822 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0033: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration
    [Host Controller] 	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)
    [Host Controller] 	at org.jboss.as.host.controller.HostControllerConfigurationPersister.load(HostControllerConfigurationPersister.java:188)
    [Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService.boot(DomainModelControllerService.java:585)
    [Host Controller] 	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)
    [Host Controller] 	at java.lang.Thread.run(Thread.java:745)
    [Host Controller] Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[110,13]
    [Host Controller] Message: WFLYCTL0197: Unexpected attribute 'truststore-Type' encountered
    [Host Controller] 	at org.jboss.as.controller.parsing.ParseUtils.unexpectedAttribute(ParseUtils.java:117)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.parseServerSsl(HostXml_4.java:1271)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.parseServerContent(HostXml_4.java:1131)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.parseServer(HostXml_4.java:1088)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.parseServers(HostXml_4.java:1071)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.readHostElement(HostXml_4.java:388)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml_4.readElement(HostXml_4.java:170)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml.readElement(HostXml.java:79)
    [Host Controller] 	at org.jboss.as.host.controller.parsing.HostXml.readElement(HostXml.java:50)
    [Host Controller] 	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
    [Host Controller] 	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    [Host Controller] 	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)
    [Host Controller] 	... 4 more
    [Host Controller] 
    [Host Controller] 14:49:21,823 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details",,,,,,,,,,,,,,,,JBEAP-3925,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1471,,,,,,0.0,0.0,,1|i02rvj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AttributeParser for ObjectListAttributeDefinitions doesn't differentiate between empty and absent object lists,WFCORE-1448,12611661,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,23/Mar/16 5:47 AM,06/Jun/16 10:25 AM,29/Nov/16 3:52 PM,30/Mar/16 1:30 PM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"Attributes of type ObjectList are left undefined when their enclosing element is empty, which makes it impossible to differentiate an empty object list from an unspecified one.

The ability to distinguish the two scenarios is important in the security manager subsystem. Consider this configuration:

{code:xml}
<subsystem xmlns=""urn:jboss:domain:security-manager:1.0"">
    <deployment-permissions>
        <mininum-set>
             ....
        </minimum-set>
    </deployment-permissions>
</subsystem>
{code}

The maximum-set is absent and this case we want to use a default set with AllPermission. Now consider another configuration:

{code:xml}
<subsystem xmlns=""urn:jboss:domain:security-manager:1.0"">
    <deployment-permissions>
        <mininum-set/>
        <maximum-set/>
    </deployment-permissions>
</subsystem>
{code}

In this case, maximum-set has been specified but it is empty, which means the admin/user deliberately wants to use an emtpy set, possibly to enforce that no deployments with special permissions requirements get deployed.

The problem is that both scenarios result in an undefined attribute for the maximum-set, which means that the default AllPermission set ends up being used in both cases. The parser doesn't initialize the attribute with an empty list when the enclosing element is present but is empty. So in the end, both approaches result in an undefined attribute.",,,,,,,,,,,,,,,,JBEAP-3924,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1477,,,,,,0.0,0.0,,1|i02raf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Patch with wrong upgrade name should not be accepted,WFCORE-1447,12611640,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,baranowb,baranowb,baranowb,23/Mar/16 3:11 AM,26/Apr/16 3:39 AM,29/Nov/16 3:52 PM,26/Apr/16 3:39 AM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i02r5r:,9223372036854775807,,,,,,,,,,,"26/Apr/16 3:39 AM;baranowb;patch streams are valid, HAL fixes:  https://issues.jboss.org/browse/HAL-1069",,,,,,,,,,,,,,,,,,,,,,,,,,
EJB thread pool keepalive not honored and is not reusing inactive threads,WFCORE-1446,12611420,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,Takis,bmaxwell,bmaxwell,21/Mar/16 10:59 PM,19/Jun/16 10:06 PM,29/Nov/16 3:52 PM,,,,,,,,,,,,,,,0,,,,,,"Copied description from BZ1255494 : 

Description of problem:
It looks like the ejb3 subsystem thread pool configuration is hard coded to create an unbounded thread pool, where it it looks like max-threads = core-threads, and thus the threads will increase up to the max-threads configured and then remain there.  The keep-alive setting which appears in many of the docs & default configurations is ineffective since max=core.

ejb3/src/main/java/org/jboss/as/ejb3/subsystem/EJB3SubsystemRootResourceDefinition.java

I tried defining a different thread pool in the threads subsystem and tried to reference it from the ejb3 subsystem, however it looks like the ejb3 subsystem only looks for thread pools configured in the ejb3 subsystem.
",,,,,,,,,,,,,,,,JBEAP-3499,,WFLY-5332,JBEAP-3840,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1290473,,,,,Perform,,,,,,,,,,,,,https://github.com/jbossas/wildfly-core-eap/pull/178,https://github.com/wildfly/wildfly-core/pull/1468,,,,,0.0,0.0,,1|i02ptr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix schema as native-interface shouldn't be mandatory for host-management-interfaces,WFCORE-1444,12611372,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,21/Mar/16 12:25 PM,10/May/16 3:59 PM,29/Nov/16 3:52 PM,30/Mar/16 10:42 AM,2.1.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,Since host-management-interfaces could use http-remoting or native remote protocols the native-interface shouldn't be mandatory.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1467,,,,,,0.0,0.0,,1|i02pjz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expression resolver breaks return value for empty lists,WFCORE-1440,12610964,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,17/Mar/16 11:37 AM,30/Mar/16 1:30 PM,29/Nov/16 3:52 PM,30/Mar/16 1:30 PM,2.1.0.CR1,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"ExpressionResolverImpl#resolveExpressionsRecursively

does 
{code}
else if (type == ModelType.LIST) {
            resolved = node.clone();
            ModelNode list = new ModelNode();
            for (ModelNode current : resolved.asList()) {
                list.add(resolveExpressionsRecursively(current));
            }
            resolved = list;
        } 
{code}
for list attributes, but in case that resolved value is empty list it would return list that is undefined instead of empty list.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1477,,,,,,0.0,0.0,,1|i02n4v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow for testsuite to pass on French OS,WFCORE-1439,12610961,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,17/Mar/16 11:20 AM,20/Jul/16 4:40 PM,29/Nov/16 3:52 PM,18/Mar/16 6:18 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Test Suite,,,,,0,,,,,,Some tests are checking failure message or exception message as if the Locale is always English. Fixing those,,,,,,,,,,,,,,,,JBEAP-3856,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,,,,,,,0.0,0.0,,1|i02n47:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Using JKS truststore leads to ""FIPS mode: only SunJSSE TrustManagers may be used""",WFCORE-1437,12610810,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,mchoma,brian.stansberry,16/Mar/16 1:00 PM,18/Mar/16 8:44 PM,29/Nov/16 3:52 PM,18/Mar/16 8:44 PM,2.1.0.CR1,,,,,,2.1.0.Final,,Domain Management,Security,,,,0,,,,,,"User can't start domain in FIPS mode when JKS truststore is used in master <-> slave host controllers communication. (Using PKCS11 keystore works well)

{code}
[Host Controller] ^[[0m^[[31m15:52:23,822 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.server.controller.management.security_realm.SlaveManagementRealm.ssl-context-trust-only: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.SlaveManagementRealm.ssl-context-trust-only: WFLYDM0018: Unable to start service^[[0m
[Host Controller] ^[[31m        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:124)^[[0m
[Host Controller] ^[[31m        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)^[[0m
[Host Controller] ^[[31m        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)^[[0m
[Host Controller] ^[[31m        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)^[[0m
[Host Controller] ^[[31m        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)^[[0m
[Host Controller] ^[[31m        at java.lang.Thread.run(Thread.java:745)^[[0m
[Host Controller] ^[[31mCaused by: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used^[[0m
[Host Controller] ^[[31m        at sun.security.ssl.SSLContextImpl.chooseTrustManager(SSLContextImpl.java:124)^[[0m
[Host Controller] ^[[31m        at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:87)^[[0m
[Host Controller] ^[[31m        at javax.net.ssl.SSLContext.init(SSLContext.java:282)^[[0m
[Host Controller] ^[[31m        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:87)^[[0m
[Host Controller] ^[[31m        ... 5 more^[[0m
[Hos
{code}
",Oracle java in Fips mode,,,,,,,,,,,,,,,JBEAP-3788,,,,,,,,,,,,,,,,,,,,,,,,,+,?,,+,+,+,,,,,,,,,,,,0.0,0.0,,1|i02m7r:,9223372036854775807,,,,"1.
Run  SSLMasterSlaveOneWayTestCase in AS TS with system property jboss.test.host.slave.jvmhome and jboss.test.host.slave.controller.jvmhome pointing to fips java.

{code}
[mchoma@localhost domain]$ pwd
/home/mchoma/workspace/git-repositories/wildfly-core-eap/testsuite/domain
[mchoma@localhost domain]$ mvn test -Dtest=SSLMasterSlaveOneWayTestCase -DtestLogToFile=false -Djboss.test.host.slave.jvmhome=$JAVA_HOME_FIPS -Djboss.test.host.slave.controller.jvmhome=$JAVA_HOME_FIPS
{code}

2.
Leads to startup error java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Users with low privileges can see logged operations they shouldn't be able to see,WFCORE-1435,12610589,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ehugonnet,ehugonnet,ehugonnet,15/Mar/16 1:49 PM,18/Mar/16 8:42 PM,29/Nov/16 3:52 PM,18/Mar/16 8:42 PM,2.1.0.CR1,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,"If a SuperUser performs for example this:
{noformat}
/core-service=management/access=audit/in-memory-handler=y:add   
/core-service=management/access=audit/in-memory-handler=y:write-attribute(name=max-history,value=50)
{noformat}

then a Monitor user shouldn't be able to see this in the configuration change log (as decided in EAP7-89), because he doesn't even have the permission to ""read"" the manipulated resource.. But actually he can see it:
{noformat}
/core-service=management/service=configuration-changes:list-changes
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""operation-date"" => ""2016-03-15T08:40:25.807Z"",
            ""access-mechanism"" => ""NATIVE"",
            ""remote-address"" => ""127.0.0.1/127.0.0.1"",
            ""outcome"" => ""success"",
            ""operations"" => [{
                ""operation"" => ""write-attribute"",
                ""address"" => [
                    (""core-service"" => ""management""),
                    (""access"" => ""audit""),
                    (""in-memory-handler"" => ""y"")
                ]
            }]
        },
        {
            ""operation-date"" => ""2016-03-15T08:40:25.809Z"",
            ""access-mechanism"" => ""NATIVE"",
            ""remote-address"" => ""127.0.0.1/127.0.0.1"",
            ""outcome"" => ""success"",
            ""operations"" => [{
                ""operation"" => ""add"",
                ""address"" => [
                    (""core-service"" => ""management""),
                    (""access"" => ""audit""),
                    (""in-memory-handler"" => ""y"")
                ]
            }]
        }
    ]
}
{noformat}


",,,,,,,,,,,,,,,,JBEAP-3817,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1459,,,,,,0.0,0.0,,1|i02kvr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PersistentResourceXMLDescription#marshallAttributes does not marshall defined values if they match default values,WFCORE-1432,12610026,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,rhusar,rhusar,rhusar,10/Mar/16 5:59 PM,18/Mar/16 8:41 PM,29/Nov/16 3:52 PM,12/Mar/16 9:04 AM,2.1.0.CR1,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1456,,,,,,0.0,4.0,,1|i02hrb:,9223372036854775807,,,,,,,,,,,"10/Mar/16 6:00 PM;rhusar;What is the purpose of marshallDefault? Unless there is a reason org.jboss.as.controller.AttributeMarshaller#isMarshallable(org.jboss.as.controller.AttributeDefinition, org.jboss.dmr.ModelNode, boolean) should be just deprecated.",10/Mar/16 6:18 PM;brian.stansberry;There are uses. Search for uses of SimpleAttributeDefinition.marshalAsAttribute.,"10/Mar/16 6:27 PM;brian.stansberry;I don't know if any of them are particularly valid though. DomainRootDefinition.NAME may be valid, as the default value is kind of funky. But even then if the user actually passed that value in, I don't see why it can't be persisted. But we'd need to do a thorough audit.

All this said, I agree PersistentResourceXMLDescription should be marshalling defaults.",11/Mar/16 9:41 AM;ctomc;This is regression against WFCORE-836,,,,,,,,,,,,,,,,,,,,,,,
Deployment scanner logs ERROR when server is shutting down,WFCORE-1430,12609222,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ochaloup,ochaloup,07/Mar/16 6:52 AM,10/May/16 3:53 PM,29/Nov/16 3:52 PM,18/Mar/16 6:18 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Deployment Scanner,,,,,0,,,,,,"It happens time to time that deployment scanner can throw and log error [1] when server is shutting down.
It's in case of clean startup and clean shutdown when error messages should not be shown. I can hit it when unbounding a datasource takes a bit longer and scan of deployment scanner hits that time.

[1]
{code}
ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0012: Scan of /mnt/hudson_workspace/workspace/eap-70-jbossts-crashrec-tests-mssql2014/90fac01f/eap-tests-transactions/jbossts/target/jbossas-jbossts/standalone/deployments threw Exception: java.lang.RuntimeException: WFLYDS0036: Deployment model operation failed. WFLYCTL0271: Operation cancelled
	at org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.getDeploymentsStatus(DefaultDeploymentOperations.java:83)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$ScanContext.<init>(FileSystemDeploymentService.java:1614)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$ScanContext.<init>(FileSystemDeploymentService.java:1563)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:568)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:489)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$DeploymentScanRunnable.run(FileSystemDeploymentService.java:250)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,JBEAP-3697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1455,,,,,,0.0,0.0,,1|i02cwf:,9223372036854775807,,,,"# change deployment scanner interval to 10ms {{<deployment-scanner scan-interval=""10"" ...}}}
# define byteman rule which holds down an unbound of a datasource for a bit
## add to {{standalone.conf}} byteman to be loaded {{JAVA_OPTS=""-javaagent:/PATH_TO_BYTEMAN_DOWNLOAD/lib/byteman.jar=script:/PATH_TO_BTM_SCRIPT/script.btm -Djboss.modules.system.pkgs=org.jboss.byteman ${JAVA_OPTS}""}}
## script.btm rule will be kind of [1]
# deploy some simple app which uses {{ExampleDS}} datasource
# start server and stop server ({{CTRL+C}})
# you should see the exception from deployment scanner

[1]
{code}
RULE stop unbound ds
INTERFACE ConnectorLogger
METHOD unboundDataSource
AT EXIT
IF true
DO 
  System.out.println(""I'm byteman and waiting for 5s"");
  Thread.sleep(5 * 1000);
ENDRULE
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log-file.stream attribute is of type LONG but contains a string,WFCORE-1428,12609026,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,harald.pehl,harald.pehl,04/Mar/16 9:45 AM,18/Mar/16 6:17 PM,29/Nov/16 3:52 PM,18/Mar/16 6:17 PM,2.1.0.CR1,,,,,,3.0.0.Alpha1,,Logging,,,,,0,,,,,,"The {{stream}} attribute of the {{log-file}} resource is of type LONG, but contains a UUID (string). This leads to an error in the console where I rely on proper attribute data types.  

{{/subsystem=logging/log-file=*:read-resource-description}}
{{/subsystem=logging/log-file=*:read-resource(include-runtime=true)}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1451,,,,,,0.0,0.0,,1|i02bpb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in GlobalOperationHandlers.getChildAddresses,WFCORE-1426,12608901,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,03/Mar/16 5:22 PM,10/May/16 3:50 PM,29/Nov/16 3:52 PM,18/Mar/16 4:11 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"Second line is a potential NPE if the MRR tree has changed since 'element' was found:

            final ImmutableManagementResourceRegistration childRegistration = registry.getSubModel(PathAddress.pathAddress(element));
            final AliasEntry aliasEntry = childRegistration.getAliasEntry();

Failed here:

http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=92710&buildTypeId=WildFlyCore_PullRequest_WildFlyCoreFullIntegration

======= Failed test run #1 ==========
org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.
    at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.readChildrenNames(DomainHostExcludesTest.java:302)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.stopSlave(DomainHostExcludesTest.java:111)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.setup(DomainHostExcludesTest.java:93)
    at org.jboss.as.test.integration.domain.mixed.eap630.DomainHostExcludes630TestCase.beforeClass(DomainHostExcludes630TestCase.java:40)
------- Stdout: -------
...
&amp#27;[0m[Host Controller] &amp#27;[0m&amp#27;[0m22:06:43,569 INFO  [org.jboss.as.domain.controller] (management task-5) WFLYHC0026: Unregistered remote slave host ""slave""&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[31m22:06:43,569 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""read-children-names"") failed - address: ([]): java.lang.NullPointerException&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.operations.global.GlobalOperationHandlers.getChildAddresses(GlobalOperationHandlers.java:960)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.operations.global.ReadChildrenNamesHandler.execute(ReadChildrenNamesHandler.java:78)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)&amp#27;[0m
[Host Controller] &amp#27;
...

The test stops host slave and then starts reading children names of type 'host' to see when 'slave' is gone. The registration disappears in the middle of the getChildAddresses logic resulting in NPE.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1449,,,,,,0.0,0.0,,1|i02ay7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded HC started with host-slave.xml uses incorrect hostname,WFCORE-1425,12608889,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,03/Mar/16 4:15 PM,10/May/16 3:57 PM,29/Nov/16 3:52 PM,21/Mar/16 10:19 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,,,,,,0,,,,,,"EmbeddedHostControllerFactory:282, authCode is being used as the hostname. This is reset if the name is present in the xml config, but since the default -slave.xml has no name, the hostname is displayed as the contents of authCode.

We should probably extract the hostname code from HostControllerEnvironment:300 into its own method, and use that.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i02avj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
typo in prompt,WFCORE-1424,12608798,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,dlofthouse,valery_sorokin,valery_sorokin,03/Mar/16 8:56 AM,10/May/16 3:50 PM,29/Nov/16 3:52 PM,18/Mar/16 4:10 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"prompt on 'jboss-cli.sh --connect controller=https-remoting://localhost:8443 '
displays:
------------------------------------------------------------------- 
Accept certificate? [N]o, [T]emporarily, [P]ermenantly : P
-------------------------------------------------------------------
(not 'permanently')
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1447,,,,,,0.0,0.0,,1|i02afb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EAP init scripts don't detach jbossas process,WFCORE-1422,12608852,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,spyrkob,spyrkob,03/Mar/16 11:24 AM,18/Mar/16 8:42 PM,29/Nov/16 3:52 PM,18/Mar/16 8:42 PM,2.1.0.CR1,,,,,,2.1.0.Final,,Scripts,,,,,0,downstream_dependency,,,,,"When starting WF via wildfly-init-redhat.sh, the init script and runuser commands are never disconnected and stay in the process tree.

Reproduce:
- create a new OS user ""jbossadm""
- unzip WF in his home directory
- copy docs/contrib/scripts/init.d/wildfly.conf to /etc/default
  configure it with:
     JBOSS_HOME=/home/jbossadm/wildfly
     JBOSS_USER=jbossadm
     JBOSS_CONSOLE_LOG=/home/jbossadm/console.log
     JBOSS_MODE=domain

- copy docs/contrib/scripts/init.d/wildfly-init-redhat.sh  to /etc/init.d
- become su, and start with:
     /etc/init.d/wildfly-init-redhat.sh start

-run:   ps axfo pid,ppid,user,command | grep jboss
{noformat}
PID  PPID USER     COMMAND
  479     1 root     /bin/sh /etc/init.d/wildfly-init-redhat.sh start
  481   479 root      \_ runuser -s /bin/bash jbossadm -c ulimit -S -c 0 >/dev/null 2>&1 ; LAUNCH_JBOSS_IN_BACKGROUND=1 JBOSS_PIDFILE=/var/run
  482   481 jbossadm      \_ bash -c ulimit -S -c 0 >/dev/null 2>&1 ; LAUNCH_JBOSS_IN_BACKGROUND=1 JBOSS_PIDFILE=/var/run/wildfly/wildfly.pid
  483   482 jbossadm          \_ /bin/sh /home/jbossadm/jboss-eap-7/bin/domain.sh --domain-config=domain.xml --host-config=host.xml
  579   483 jbossadm              \_ java -D[Process Controller] -server -Xms64m -Xmx512m -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack
  596   579 jbossadm                  \_ java -D[Host Controller] -Dorg.jboss.boot.log.file=/home/jbossadm/jboss-eap-7/domain/log/host-control
  677   579 jbossadm                  \_ java -D[Server:server-one] -Xms64m -Xmx512m -server -XX:MetaspaceSize=96m -XX:MaxMetaspaceSize=256m -
  727   579 jbossadm                  \_ java -D[Server:server-two] -Xms64m -Xmx512m -server -XX:MetaspaceSize=96m -XX:MaxMetaspaceSize=256m -
{noformat}

Expectation: ""domain.sh"" to become detached and have ""1"" as its parent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1273093,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1446,,,,,,0.0,1.0,,1|i02aon:,9223372036854775807,,,,,,,,,,,"03/Mar/16 11:28 AM;spyrkob;process tree with the fix:

{noformat}
[root@939b8b0f5247 /]# ps axfo pid,ppid,user,command
  PID  PPID USER     COMMAND
    1     0 root     /bin/bash
 1394     1 jbossadm /bin/sh /home/jbossadm/jboss-eap-7/bin/domain.sh --domain-config=domain.xml --host-config=host.xml
 1491  1394 jbossadm  \_ java -D[Process Controller] -server -Xms64m -Xmx512m -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dorg.jboss.boot.log.file=/home/jbossadm/jboss-eap-7/domain/log/process-controller.log -Dlogging.configuration=file:/home/jbossadm/jboss-eap-7/domain/configuration/logging.properties -jar /home/jbossadm/jboss-eap-7/jboss-modules.jar -mp /home/jbossadm/jboss-eap-7/modules org.jboss.as.process-controller -jboss-home /home/jbossadm/jboss-eap-7 -jvm java -mp /home/jbossadm/jboss-eap-7/modules -- -Dorg.jboss.boot.log.file=/home/jbossadm/jboss-eap-7/domain/log/host-controller.log -Dlogging.configuration=file:/home/jbossadm/jboss-eap-7/domain/configuration/logging.properties -server -Xms64m -Xmx512m -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -- -default-jvm java --domain-config=domain.xml --host-config=host.xml
 1508  1491 jbossadm      \_ java -D[Host Controller] -Dorg.jboss.boot.log.file=/home/jbossadm/jboss-eap-7/domain/log/host-controller.log -Dlogging.configuration=file:/home/jbossadm/jboss-eap-7/domain/configuration/logging.properties -server -Xms64m -Xmx512m -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -jar /home/jbossadm/jboss-eap-7/jboss-modules.jar -mp /home/jbossadm/jboss-eap-7/modules org.jboss.as.host-controller -mp /home/jbossadm/jboss-eap-7/modules --pc-address 127.0.0.1 --pc-port 43929 -default-jvm java --domain-config=domain.xml --host-config=host.xml -Djboss.home.dir=/home/jbossadm/jboss-eap-7
 1584  1491 jbossadm      \_ java -D[Server:server-one] -Xms64m -Xmx512m -server -XX:MetaspaceSize=96m -XX:MaxMetaspaceSize=256m -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Djboss.home.dir=/home/jbossadm/jboss-eap-7 -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.log.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-one/log -Djboss.server.temp.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-one/tmp -Djboss.server.data.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-one/data -Dlogging.configuration=file:/home/jbossadm/jboss-eap-7/domain/servers/server-one/data/logging.properties -jar /home/jbossadm/jboss-eap-7/jboss-modules.jar -mp /home/jbossadm/jboss-eap-7/modules org.jboss.as.server
 1656  1491 jbossadm      \_ java -D[Server:server-two] -Xms64m -Xmx512m -server -XX:MetaspaceSize=96m -XX:MaxMetaspaceSize=256m -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Djboss.home.dir=/home/jbossadm/jboss-eap-7 -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.log.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-two/log -Djboss.server.temp.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-two/tmp -Djboss.server.data.dir=/home/jbossadm/jboss-eap-7/domain/servers/server-two/data -Dlogging.configuration=file:/home/jbossadm/jboss-eap-7/domain/servers/server-two/data/logging.properties -jar /home/jbossadm/jboss-eap-7/jboss-modules.jar -mp /home/jbossadm/jboss-eap-7/modules org.jboss.as.server
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,
CLI shutdown command doesn't support graceful shutdown,WFCORE-1420,12608569,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Mar/16 10:03 AM,18/Mar/16 8:41 PM,29/Nov/16 3:52 PM,18/Mar/16 8:41 PM,2.1.0.CR1,,,,,,2.1.0.Final,,CLI,,,,,0,,,,,,"The shutdown command needs to support a timeout param so users can have a graceful shutdown.

I'm calling this a bug because the low level :shutdown op is not reliable for CLI users due to the issues with handling of connection closing that the shutdown command takes care of.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1445,,,,,,0.0,0.0,,1|i0290v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operations helper should not add attributes to operations that weren't specifically defined,WFCORE-1419,12608427,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,01/Mar/16 1:53 PM,18/Mar/16 4:10 PM,29/Nov/16 3:52 PM,18/Mar/16 4:10 PM,,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,The {{org.jboss.as.controller.client.helpers.Operations}} helper adds the {{recursive}} attribute the the {{read-resource}} operation regardless of whether or not the user specified if the operation should be recursive. This attribute should not be set by default.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1444,,,,,,0.0,1.0,,1|i0285z:,9223372036854775807,,,,,,,,,,,"01/Mar/16 3:57 PM;brian.stansberry;Brian Stansberry
2:55 PM
I don't get what the bug is
James R Perkins
2:56 PM
If you were to use the Operations.createReadResourceOperation(someAddress).get(""recursive-depth"").set(5) it wouldn't work because by default it sets recursive=false.",,,,,,,,,,,,,,,,,,,,,,,,,,
Reloading host-controller via http-api puts the HC into unresponsive state,WFCORE-1418,12608413,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ctomc,ctomc,ctomc,01/Mar/16 11:56 AM,19/Jun/16 6:17 PM,29/Nov/16 3:52 PM,04/Mar/16 4:12 PM,2.0.10.Final,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,"Reloading host-controller via http-api puts the HC into unresponsive state.

*reproduce*
 \- create an administrative user admin:asdasd@2
 \- start a domain
 \- reload a server via http api
{noformat}
curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""reload"",""name"":"""", ""address"":{""host"" : ""master""},""json.pretty"":1}' -u admin:asdasd@2
{noformat}

*actual*
Default server instances are stopped, HC is left in unresponsive state.
Keeping the domain alive, following message will appear in 5 minutes, domain will become responsive again after that.
{noformat}
[Host  Controller] 04:47:23,966 ERROR  [org.jboss.as.controller.management-operation] (management task-7)  WFLYCTL0349: Timeout after [300] seconds waiting for service container  stability while finalizing an operation. Process must be restarted. Step  that first updated the service container was 'reload' at address  '[(""host"" => ""master"")]'
{noformat}

*expected*
Domain is reloaded

*additional info*
The issue was introduced by fix for JBEAP-2751 - https://github.com/jbossas/wildfly-core-eap/commit/4986773a51fbf43ad911aecc403f7eb90e72a8c2

thread dump of unresponsive HC
http://pastebin.test.redhat.com/348732

I am unable to reproduce locally, but issue can be easily reproduced on slower servers in MWQE lab. SSLMasterSlave*WayTestCase using reload via http-api cousing failures in domain modules of wf-core testsuite (e.g. [eap-7x-as-testsuite-test-core-rhel|https://url.corp.redhat.com/9f1f544] )

Regression against 7.0.0.ER4. I was able to reproduce with the latest wildfly-core bits as well (1be598e)

",,,,,,,,,,,,,,,,JBEAP-3407,,,,,,,,,,,,,,,,,,,,,,,,+,+,,,,,,,,,,,,,,,,,0.0,3.0,,1|i0282v:,9223372036854775807,,,,,,,,,,,"20/Apr/16 5:13 PM;roy.willemse;I've seen similar behaviour when reloading Wildfly 10.0.0.Final when running inside a Docker container.

- Reload via JBoss-CLI works fine
- Problem could not be reproduced running locally (on OS X) or CentOS 7 running on VSphere

{code}
docker run -it java # I also tried centos:7 with OpenJDK 8
# Inside the container:
WILDFLY_VERSION=10.0.0.Final
curl http://download.jboss.org/wildfly/$WILDFLY_VERSION/wildfly-$WILDFLY_VERSION.tar.gz | tar -C ~ -zx
cd ~/wildfly-$WILDFLY_VERSION
bin/add-user.sh admin admin --silent
bin/standalone.sh &
sleep 10
curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""reload"",""name"":"""",""json.pretty"":1}' -u admin:admin
{code}

After 5 minutes Wildfly logs an ERROR and starts normally:

{code}
19:21:50,837 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
19:21:50,847 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0019: Host default-host stopping
19:21:50,857 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-1) WFLYJCA0019: Stopped Driver service with driver-name = h2
19:21:50,874 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending
19:21:50,875 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 172.17.0.2:8080
19:21:50,877 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0004: Undertow 1.3.15.Final stopping

# After 5 minutes:

19:26:50,529 ERROR [org.jboss.as.controller.management-operation] (management task-10) WFLYCTL0349: Timeout after [300] seconds waiting for service container stability while finalizing an operation. Process must be restarted. Step that first updated the service container was 'reload' at address '[]'
19:26:50,555 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-1) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]
19:26:50,568 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Full 10.0.0.Final (WildFly Core 2.0.10.Final) stopped in 300062ms
19:26:50,573 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly Full 10.0.0.Final (WildFly Core 2.0.10.Final) starting
{code}","05/Jun/16 2:33 PM;urbandroid;Same thing happens non-periodically after multiple deploy-reload cycles unknown cause, undetectable time. only temp solution is restarting server .

Main problem is undertow when reload called sometimes not stopping.

wildfly-10.0.0.Final on ubuntu 14.04.4 lts, standalone-full mode starting with debian init script.",19/Jun/16 6:17 PM;urbandroid;suspending server before reload solves the undertow closing problem but still some times reload problem exist i think i diagnosed problem wrong.,,,,,,,,,,,,,,,,,,,,,,,,
org.jboss.as.cli.scriptsupport.CLI connect methods do not properly reset the ctx upon failure making in turn checkNotConnected() to report incorrectly,WFCORE-1417,12608328,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jdenise,tfonteyn,tfonteyn,01/Mar/16 7:00 AM,19/Apr/16 3:13 AM,29/Nov/16 3:52 PM,19/Apr/16 3:13 AM,2.1.0.CR1,,,,,,,,CLI,,,,,0,,,,,,"cli/src/main/java/org/jboss/as/cli/scriptsupport/CLI.java

    public void connect() {
        checkAlreadyConnected();
        try {
            ctx = CommandContextFactory.getInstance().newCommandContext();
            ctx.connectController();
        } catch (CliInitializationException e) {
            throw new IllegalStateException(""Unable to initialize command context."", e);
        } catch (CommandLineException e) {
            throw new IllegalStateException(""Unable to connect to controller."", e);
        }
    }

also applicable to the other connects of course.

If the connection fails in the connect method, a subsequent connect will hit:

    private void checkAlreadyConnected() {
        if (ctx != null) throw new IllegalStateException(""Already connected to server."");
    }

and will fail for the wrong reason... as while ctx !=null is true, but the connection had failed.

ergo, upon failure in connect, the ctx should be reset to avoid this
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/1501,,,,,,0.0,2.0,,1|i027jz:,9223372036854775807,,,,"1. Attempt to connect via CLI.connect(...)
2. Connection fails because EAP is not running yet. CLI throws ""java.lang.IllegalStateException: Unable to connect to controller""
3. Attempt to connect again.
4. CLI throws exception ""java.lang.IllegalStateException: Already connected to server.""
This message is incorrect. No connection has been established and should you 'accept' this fact, then any subsequent action (for example sending a command) will fail",,,,,,,"01/Mar/16 7:51 AM;tfonteyn;not sure what the correct solution would be....

either for every applicable connect:


{code:java}
    public void connect() {
        checkAlreadyConnected();
        try {
            ctx = CommandContextFactory.getInstance().newCommandContext();
            ctx.connectController();
        } catch (CliInitializationException e) {
           ctx = null;
            throw new IllegalStateException(""Unable to initialize command context."", e);
        } catch (CommandLineException e) {
            ctx = null;
            throw new IllegalStateException(""Unable to connect to controller."", e);
        }
    }
{code}


or:

{code:java}
    public void terminateSession() {
        try {
            ctx.terminateSession();
        } finally {
            ctx = null;
        }
    }
{code}

and for every applicable connect:


{code:java}
    public void connect() {
        checkAlreadyConnected();
        try {
            ctx = CommandContextFactory.getInstance().newCommandContext();
            ctx.connectController();
        } catch (CliInitializationException e) {
            terminateSession();
            throw new IllegalStateException(""Unable to initialize command context."", e);
        } catch (CommandLineException e) {
            terminateSession();
            throw new IllegalStateException(""Unable to connect to controller."", e);
        }
    }
{code}


",18/Apr/16 8:09 AM;jdenise;Re-opening since the original PR had failing tests.,,,,,,,,,,,,,,,,,,,,,,,,,
Web console doesn't accept passwords with non-ascii characters,WFCORE-1413,12607956,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,spyrkob,spyrkob,spyrkob,26/Feb/16 9:16 AM,10/May/16 4:00 PM,29/Nov/16 3:52 PM,30/Mar/16 6:18 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"Firefox, Safari and IE use ISO-8859_1 character encoding when generating authentication header. If the credentials contain umlauts (eg. ü), the decoded string on the server is incorrect and authentication fails.

This affects web console authentication when LDAP is used as credentials store.

Web console can solve this by using https://issues.jboss.org/browse/UNDERTOW-595 which adds ability for Undertow to use user-agent patterns to choose correct charset during BASIC authentication.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1270708,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1478,,,,,,0.0,0.0,,1|i025dr:,9223372036854775807,,,,"# Set up LDAP with a user 'admin' identified by password 'test123!ü'
# Set up WF to use LDAP authentication for management-interface
# Go to the web console and try logging in using Firefox browser",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WILDFLY 10 : TAB-Completion in CLI doesn't work under Cygwin,WFCORE-1412,12607878,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,aloubyansky,heikorath,heikorath,26/Feb/16 4:36 AM,26/Feb/16 6:34 AM,29/Nov/16 3:52 PM,26/Feb/16 6:34 AM,2.0.10.Final,,,,,,,,CLI,,,,,0,,,,,,,"Win7 x64, java 1.8.0_66 x64",,,,,,,,,,,,,,,,,,,WFCORE-414,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i024wf:,9223372036854775807,,,,"
1. start wildfly as standalone using default configuration
2. Open cygwin instance, set JBOSS_HOME to installed Wildfy 10 path, start jboss-cli, enter connect command 
3. TAB-Completion doesn't work

",,,,,,,26/Feb/16 6:34 AM;aloubyansky;It's a known issue. I am closing this as a duplicate.,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot obtain DOMImplementationRegistry instance,WFCORE-1408,12607515,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jason.greene,baranowb,baranowb,24/Feb/16 6:05 AM,16/Aug/16 1:40 AM,29/Nov/16 3:52 PM,,,,,,,,,,,,,,,0,,,,,,"testDOMImplementationRegistry(org.jboss.as.test.smoke.xml.DOMImplementationRegistryTestCase)  Time elapsed: 0.09 sec  <<< ERROR!
java.lang.ClassNotFoundException: com.sun.org.apache.xerces.internal.dom.DOMXSImplementationSourceImpl from [Module ""deployment.dom-registry-test:main"" from Service Module Loader]
	at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:213)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:459)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:408)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:389)
	at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:134)
	at org.w3c.dom.bootstrap.DOMImplementationRegistry.newInstance(DOMImplementationRegistry.java:182)
	at org.jboss.as.test.smoke.xml.DOMImplementationRegistryTestCase.testDOMImplementationRegistry(DOMImplementationRegistryTestCase.java:52)",,,,,,,,,,,,,,,,,,,,,,,,,WFLY-4416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i022nz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test coverage for syslog reconnection,WFCORE-1407,12607486,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,olukas,olukas,olukas,24/Feb/16 3:38 AM,16/Nov/16 10:41 AM,29/Nov/16 3:52 PM,18/Mar/16 6:16 PM,2.1.0.CR2,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,Added test coverage for syslog reconnection issues - https://issues.jboss.org/browse/LOGMGR-123.,,,,,,,,,,,,,,,,JBQA-12958,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1311440,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1436,,,,,,0.0,3.0,,1|i022hr:,9223372036854775807,,,,,,,,,,,31/Oct/16 11:13 AM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1311440|https://bugzilla.redhat.com/show_bug.cgi?id=1311440] from POST to MODIFIED,01/Nov/16 11:15 AM;jira-bugzilla-migration;Aurel Pintea <apintea@redhat.com> changed the Status of [bug 1311440|https://bugzilla.redhat.com/show_bug.cgi?id=1311440] from MODIFIED to ON_QA,16/Nov/16 10:41 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1311440|https://bugzilla.redhat.com/show_bug.cgi?id=1311440] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,,
CLI client freezes for undefined security realm,WFCORE-1406,12606038,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,aloubyansky,aloubyansky,aloubyansky,22/Feb/16 3:01 PM,18/Mar/16 8:36 PM,29/Nov/16 3:52 PM,26/Feb/16 11:55 AM,2.1.0.CR1,,,,,,2.1.0.Final,,CLI,,,,,0,,,,,,"During work, CLI freezes randomly. See attached thread dump which was taken on Fedora 23.","Fedora 23, Ubuntu 14.04",,,,,,,,,,,,,,,JBEAP-3509,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,,,,,,,0.0,0.0,,1|i01tk7:,9223372036854775807,,,,"* ./standalone.sh &
* ./jboss-cli.sh -c
* /core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)
* reload
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UDP Syslog handler cannot log first message after reconnect,WFCORE-1403,12604615,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,jamezp,olukas,olukas,18/Feb/16 4:47 AM,18/Feb/16 6:28 PM,29/Nov/16 3:52 PM,18/Feb/16 6:28 PM,,,,,,,,,Logging,,,,,0,,,,,,"In case when logging to syslog through UDP protocol is configured and syslog port becomes unreachable then after syslog restart first message can be thrown away. It happens when odd number of messages is attempted to be logged during syslog is unreachable. It is caused when port unreachable is returned during logging attempt, then another log attempt automatically fail even if syslog server has been started meanwhile.",,,,,,,,,,,,,,,,JBEAP-3476,,,,,,,,,,,18/Feb/16 4:48 AM;olukas;logging-deployment.war;https://issues.jboss.org/secure/attachment/12398140/logging-deployment.war,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|i01ktb:,9223372036854775807,,,,"1) Configure EAP to log some category to syslog through UDP:
{code:xml}
            <syslog-handler name=""SYSLOG"">
                <server-address value=""127.0.0.1""/>
                <hostname value=""-""/>
                <port value=""10514""/>
                <app-name value=""JBossEAP""/>
                <formatter>
                    <syslog-format syslog-type=""RFC5424""/>
                </formatter>
                <facility value=""local-use-5""/>
            </syslog-handler>
...
            <logger category=""org.jboss.as.test.integration.logging.operations"">
                <level name=""INFO""/>
                <handlers>
                    <handler name=""SYSLOG""/>
                </handlers>
            </logger>
{code}
2) Start application server and syslog server.
3) Deploy logging servlet (see attachements) which makes one log when is accessed.
4) Access http://127.0.0.1:8080/logging-deployment/logger -> message is logged to syslog
5) Stop Syslog server
6) Access http://127.0.0.1:8080/logging-deployment/logger 0, 2, 4 times... (message is not logged to syslog since it is down)
7) Start Syslog server
8) Access http://127.0.0.1:8080/logging-deployment/logger -> message is logged to syslog (correct behavior)
9) Stop Syslog server
10) Access http://127.0.0.1:8080/logging-deployment/logger 1, 3, 5 times... (message is not logged to syslog since it is down)
11) Start Syslog server
12) Access http://127.0.0.1:8080/logging-deployment/logger -> message is NOT logged to syslog (wrong behavior)
13) Access http://127.0.0.1:8080/logging-deployment/logger again -> message is logged to syslog",,,,,,,18/Feb/16 6:28 PM;jamezp;This is working as expected. It's the way that {{java.net.DatagramSocket.send()}} is implemented. The first invocation on a down server doesn't raise and error. The second invocation raises the error and the third invocation works as expected.,,,,,,,,,,,,,,,,,,,,,,,,,,
TCP Syslog handler cannot log some messages after reconnect,WFCORE-1401,12604617,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,jamezp,olukas,olukas,18/Feb/16 4:54 AM,18/Feb/16 5:36 PM,29/Nov/16 3:52 PM,18/Feb/16 5:36 PM,,,,,,,,,Logging,,,,,0,,,,,,"In case when logging to syslog through TCP protocol is configured and syslog port becomes unreachable then after syslog restart some messages can be thrown away. 

It seems syslog handler needs to another two logs for correct closing original TCP connection. In case when syslog is restarted and
* no message is logged during syslog is unreachable then the first two messages will not be logged to syslog after syslog is running again
* one message is attempted to be logged during syslog is unreachable then the first message will not be logged to syslog after syslog is running again
* two and more messages are attempted to be logged during syslog is unreachable then everything is logged correctly after syslog is running again",,,,,,,,,,,,,,,,JBEAP-3477,,,,,,,,,,,18/Feb/16 4:55 AM;olukas;logging-deployment.war;https://issues.jboss.org/secure/attachment/12398142/logging-deployment.war,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|i01ktr:,9223372036854775807,,,,"1) Configure EAP to log some category to syslog through TCP:
{code:xml}
            <custom-handler name=""SYSLOG_TCP_HANDLER"" class=""org.jboss.logmanager.handlers.SyslogHandler"" module=""org.jboss.logmanager"">
                <encoding value=""ISO-8859-1""/>
                <formatter>
                    <pattern-formatter pattern=""%-5p [%c] (%t) %s%E%n""/>
                </formatter>
                <properties>
                    <property name=""appName"" value=""JBossEAP""/>
                    <property name=""facility"" value=""LOCAL_USE_5""/>
                    <property name=""serverHostname"" value=""127.0.0.1""/>
                    <property name=""hostname"" value=""-""/>
                    <property name=""port"" value=""10514""/>
                    <property name=""syslogType"" value=""RFC5424""/>
                    <property name=""protocol"" value=""TCP""/>
                    <property name=""messageDelimiter"" value=""-""/>
                    <property name=""useMessageDelimiter"" value=""true""/>
                </properties>
            </custom-handler>
...
            <logger category=""org.jboss.as.test.integration.logging.operations"">
                <level name=""INFO""/>
                <handlers>
                    <handler name=""SYSLOG_TCP_HANDLER""/>
                </handlers>
            </logger>
{code}
2) Start application server and syslog server.
3) Deploy logging servlet (see attachements) which makes one log when is accessed.
4) Access http://127.0.0.1:8080/logging-deployment/logger -> message is logged to syslog
5) Restart Syslog server
6) Access http://127.0.0.1:8080/logging-deployment/logger three times -> first and second message are thrown away, only third message is logged
7) Stop Syslog server
8) Access http://127.0.0.1:8080/logging-deployment/logger twice (messages are not logged to syslog since it is down)
9) Start Syslog server
10) Access http://127.0.0.1:8080/logging-deployment/logger -> message is logged to syslog",,,,,,,"18/Feb/16 5:36 PM;jamezp;This is the expected behavior. Here's what happens in the {{org.jboss.logmanager.handlers.SyslogHandler}}.

* First message when the server is down is sent and no error is raised by the {{java.net.Socket}} therefore the syslog handler thinks all is okay
* A second message is sent this time the {{java.net.Socket}} throws a {{java.net.SocketException: Broken pipe}}. The syslog handler reports this and the socket attempts to reconnect, but the message is not sent again.
* The third message succeeds because the connection has once again been resestablished

This works in your second scenario as well because the socket keeps attempting to connect. A successful connection is made by the time you send your third message. There is a possibility the message might not be sent until the fourth or fifth message even. It all depends on when the socket is reconnected.

That said there is a setting, {{blockOnReconnect}} which defaults to {{false}}, that will guarantee the third message is logged. The handler will block until a connection has been reestablished. I would however only suggest this be used wrapped in an {{async-handler}} as you could stall the entire server until the connection has been reestablished.",,,,,,,,,,,,,,,,,,,,,,,,,,
Failure when resolving an expression with the default value containing a '$' at the end,WFCORE-1399,12604484,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,vmae,vmae,17/Feb/16 9:29 AM,10/May/16 3:56 PM,29/Nov/16 3:52 PM,21/Mar/16 10:18 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,1,,,,,,"Can not add a JNDI / naming entry which contains a ""$"" sign at the end of its default value.

e.g. {code}
value=""${my.sample.property1:entry5-default-value-with-special-char-at-the-end-$}""
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,18/Feb/16 4:27 AM;vmae;ExpressionResolver.java;https://issues.jboss.org/secure/attachment/12398138/ExpressionResolver.java,18/Feb/16 4:27 AM;vmae;ExpressionResolverUnitTestCase.java;https://issues.jboss.org/secure/attachment/12398137/ExpressionResolverUnitTestCase.java,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1433,,,,,,2.0,8.0,,1|i01k0v:,9223372036854775807,,,,"The following commands fail in Wildfly 10 CLI (worked with Wildfly 8):
{code}
$JBOSS_HOME/bin/jboss-cli.sh
[disconnected /] connect

#### preparation
[standalone@localhost:9990 /] /system-property=my.sample.property1:add(value=sample-value-1)
{""outcome"" => ""success""}
[standalone@localhost:9990 /] /system-property=my.sample.property1:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => {""value"" => ""sample-value-1""}
}
#####

[standalone@localhost:9990 /] /subsystem=naming/binding=java\:global\/my\/sample\/entry:add(binding-type=simple, type=java.lang.String, value=""${my.sample.property1:entry5-default-value-with-special-char-at-the-end-$}"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0370: Incomplete expression: ${my.sample.property1:entry5-default-value-with-special-char-at-the-end-$}"",
    ""rolled-back"" => true
}
{code}",,,,,,,17/Feb/16 11:54 AM;aloubyansky;Have you tried escaping the $ at the end?,"18/Feb/16 1:10 AM;vmae;I guess by ""escaping"" you mean prefixing it with a ""\"", right?
result:
{code}
[standalone@localhost:9990 /] /subsystem=naming/binding=java\:global\/my\/sample\/entry:add(binding-type=simple, type=java.lang.String, value=""${my.sample.property1:entry5-default-value-with-special-char-at-the-end-\$}"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0370: Incomplete expression: ${my.sample.property1:entry5-default-value-with-special-char-at-the-end-$}"",
    ""rolled-back"" => true
}
[standalone@localhost:9990 /] /subsystem=naming/binding=java\:global\/my\/sample\/entry:add(binding-type=simple, type=java.lang.String, value=""${my.sample.property1:entry5-default-value-with-special-char-at-the-end-\\$}"")
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0370: Incomplete expression: ${my.sample.property1:entry5-default-value-with-special-char-at-the-end-\\$}"",
    ""rolled-back"" => true
}
{code}

(!)(?)
May I ask you to try it on your side, please?
...and to provide the working example?","18/Feb/16 2:55 AM;vmae;Just had a look at the sources...
Bug in: [ExpressionResolverImpl.java|https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/ExpressionResolverImpl.java] (approx. Line: 212 ++)

Just add the following method to its JUnit test class [ExpressionResolverUnitTestCase.java|https://github.com/wildfly/wildfly-core/blob/master/controller/src/test/java/org/jboss/as/controller/ExpressionResolverUnitTestCase.java] to reproduce the issue:
{code}
@Test
public void myTest() throws OperationFailedException {
    System.setProperty(""test.prop.blabla"", ""system-prop-value"");
    try {
        ModelNode node = new ModelNode();
        node.get(""expr"").set(new ValueExpression(""${test.prop.blabla:a$}""));

        node = ExpressionResolver.TEST_RESOLVER.resolveExpressions(node);

        assertEquals(1, node.keys().size());
        assertEquals(""system-prop-value"", node.get(""expr"").asString());
    } finally {
        System.clearProperty(""test.prop.blabla"");
    }
}
{code}","18/Feb/16 4:29 AM;vmae;Added test case ""sysPropertyWithNormalDefaultValue"" and ""sysPropertyWithSpecialDefaultValue"" to the test class {{ExpressionResolverUnitTestCase}} and fixed the class {{ExpressionResolver}}
(!) There's code duplication in the fixed class which needs to be cleaned up !!!",18/Feb/16 8:41 AM;aloubyansky;Have you seen testDollarEscaping test in that testcase? Try escaping with '$'.,"22/Feb/16 2:54 AM;vmae;Good day!
I've tried to escape the {{'$'}} with a leading {{'$'}} ==> test cases do not work as expected.
Let's say we have a default value {{'a$'}}.
And the system property is called {{'z'}}.
The expression is then {code}'${z:a$$}'{code} including the escaping {{'$'}}.

Expectation:
#  if the system property {{'z'}} is set to {{'system-prop-value'}} the resulting value shall be {{'system-prop-value'}} (/)
# if the system property {{'z'}} is *NOT* set the resulting value shall be {{'a$'}} (x)

The 1st case works fine (/) *but* the result of the 2nd case is {{'a$$'}} (x).

test cases added to ExpressionResolverUnitTestCase.java
{code}
@Test
public void testSpecialDefaultValueWithSystemPropertySet() throws OperationFailedException {
    System.setProperty(""z"", ""system-prop-value"");
    try {
        ModelNode node = new ModelNode();
        node.get(""expr"").set(new ValueExpression(""${z:a$$}""));
        node = ExpressionResolver.TEST_RESOLVER.resolveExpressions(node);
        assertEquals(1, node.keys().size());
        assertEquals(""system-prop-value"", node.get(""expr"").asString());
    } finally {
        System.clearProperty(""z"");
    }
}

@Test
public void testSpecialDefaultValueWithoutSystemPropertySet() throws OperationFailedException {
    ModelNode node = new ModelNode();
    node.get(""expr"").set(new ValueExpression(""${z:a$$}""));
    node = ExpressionResolver.TEST_RESOLVER.resolveExpressions(node);
    assertEquals(1, node.keys().size());
    System.out.println(""testSpecialDefaultValueWithoutSystemPropertySet: "" + node.get(""expr"").asString());
    assertEquals(""a$"", node.get(""expr"").asString());
}
{code}
","23/Feb/16 6:02 AM;vmae;Please check the last entry of WFCORE-1399 and runt te described test on your side.
This is currently a major issue on our side.",23/Feb/16 6:07 AM;ehugonnet;Currently doubling $ only works for escaping ${ if we look into tests and the expression parser.,,,,,,,,,,,,,,,,,,,
RemotingHttpUpgradeService.SERVICE_NAME has a superfluous space,WFCORE-1398,12604578,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,17/Feb/16 6:22 PM,10/May/16 3:52 PM,29/Nov/16 3:52 PM,18/Mar/16 6:15 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"public static final ServiceName UPGRADE_SERVICE_NAME = ServiceName.JBOSS.append(""remoting "", ""remoting-http-upgrade-service"");

Note the space in ""remoting """,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1425,,,,,,0.0,0.0,,1|i01kl3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Boot errors and unmanageable server if http-interface resource's http-upgrade-enabled attribute != true,WFCORE-1397,12604572,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,yersan,brian.stansberry,brian.stansberry,17/Feb/16 4:48 PM,10/May/16 3:49 PM,29/Nov/16 3:52 PM,18/Mar/16 4:09 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"The https://github.com/wildfly/wildfly-core/pull/1360 work added a new XnioWorker service that the HTTP interface depends on, but for a standalone server it isn't installed unless http-upgrade-enabled == true. Otherwise you see this during boot:

{code}
 15:43:25,005 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""management-interface"" => ""http-interface"")
]) - failure description: {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [
    ""jboss.serverManagement.controller.management.http is missing [jboss.serverManagement.controller.management.worker]"",
    ""jboss.serverManagement.controller.management.http.shutdown is missing [jboss.remoting.management.channel.registry]""
]}
15:43:25,006 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""jmx""),
    (""remoting-connector"" => ""jmx"")
]) - failure description: {""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.jmx.remoting-connector-ref is missing [jboss.remoting.endpoint.management]""]}
15:43:25,031 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service jboss.remoting.endpoint.management (missing) dependents: [service jboss.jmx.remoting-connector-ref] 
      service jboss.remoting.management.channel.registry (missing) dependents: [service jboss.serverManagement.controller.management.http.shutdown] 
      service jboss.serverManagement.controller.management.worker (missing) dependents: [service jboss.serverManagement.controller.management.http] 

15:43:25,127 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0063: Http management interface is not enabled
15:43:25,128 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled
15:43:25,128 ERROR [org.jboss.as] (Controller Boot Thread) WFLYSRV0026: JBoss EAP 7.0.0.GA (WildFly Core 2.0.12.Final-redhat-1) started (with errors) in 3493ms - Started 254 of 544 services (3 services failed or missing dependencies, 369 services are lazy, passive or on-demand)
{code}

The problem is org.jboss.as.server.operations.HttpManagementAddHandler doesn't install the service. The HC variant of HttpManagementAddHandler does.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i01kjz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove /host=master/core-service=management/access=authorization,WFCORE-1395,12604449,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,17/Feb/16 7:58 AM,16/Apr/16 9:30 AM,29/Nov/16 3:52 PM,16/Apr/16 9:30 AM,2.1.0.CR1,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,The /host=master/core-service=management/access=authorization is odd. It should be removed in WF 11.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1503,,,,,,0.0,0.0,,1|i01jtb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
default maxPermgen is added when jvm isn't configured ,WFCORE-1394,12604435,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,simkam,simkam,17/Feb/16 6:58 AM,18/Mar/16 8:35 PM,29/Nov/16 3:52 PM,14/Mar/16 12:38 PM,2.1.0.CR1,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,"Default maxPermgen size is added when {{jvm}} element isn't specified in domain.xml/host.xml and warning is logged. 
{code:xml}
<server-group name=""main-server-group"" profile=""default"">
<!--            
    <jvm name=""default"">
        <heap size=""64m"" max-size=""512m""/>
    </jvm>
-->
    <socket-binding-group ref=""standard-sockets""/>
</server-group>
{code}

{noformat}
WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null
{noformat}

It happens because default is defined in [JvmElement.java#L76|https://github.com/wildfly/wildfly-core/blob/master/host-controller/src/main/java/org/jboss/as/host/controller/model/jvm/JvmElement.java#L76]

",,,,,,,,,,,,,,,,JBEAP-3457,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,3.0,,1|i01jq7:,9223372036854775807,,,,comment jvm element in domain.xml > main-server-group and run domain mode,,,,simkam,,,"17/Feb/16 9:30 AM;brian.stansberry;Ken, could you look into this one? Please assign yourself to the JBEAP as well.",17/Feb/16 9:31 AM;brian.stansberry;I already assigned the JBEAP as I went to check its Target Release.,"14/Mar/16 12:00 PM;luck3y;Martin, is this OK to close?

Never, mind I just needed to mark resolved.",,,,,,,,,,,,,,,,,,,,,,,,
init script creates unrotatable log file,WFCORE-1385,12541267,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,shawn.goff,shawn.goff,20/May/14 10:38 AM,16/Feb/16 9:24 AM,29/Nov/16 3:52 PM,,,,,,,,,,Scripts,,,,,0,,,,,,"The JBOSS init script redirects stdout of the jboss process to a file, then polls the file for a marker. The file it creates cannot be rotated without restarting the jboss project.",,,,,,,,,,,,,,,,,,,,,WFCORE-476,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hznthb:,199232,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Passing -Djboss.boot.server.log.level=DEBUG to standalone.sh script is ignored,WFCORE-1384,12450479,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Duplicate Issue,,rlucente-se-jboss,rlucente-se-jboss,26/Oct/11 10:47 AM,16/Feb/16 11:33 AM,29/Nov/16 3:52 PM,16/Feb/16 11:33 AM,,,,,,,,,Scripts,,,,,0,eap6-ux,,,,,"Attempting to change boot log level via a script argument to standalone.sh is ignored.  I can edit standalone.conf (set value in JAVA_OPTS) or edit logging.properties directly.  Other -D parameters are honored, so there seems to be some startup/timing issue with this specific setting.","Fedora 14, java-1.6.0-openjdk, jboss-as-7.1.0.Alpha2-SNAPSHOT",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hys5lz:,14660,,,,,,,,,,,"01/Nov/11 2:53 PM;brian.stansberry;David, I'm assigning this to you because I saw you say something about changing how boot logging works. So if your changes eliminate this whole area, you can close this. :-)

If not, feel free to unassign and move to Open to Community.

The key issue is -D values passed after ./standalone.sh are args to main and not to the JVM. So they are too late for boot logging config; setting them in standalone.conf is necessary. Just complicated and confusing. We could probably improve a bit, but if the whole boot vs server log thing will go away, all the better.","11/Feb/13 7:09 PM;brian.stansberry;Having system properties used by logging.properties be settable via args to standalone.sh will require changing the scripts to process all args and if they are -D remove them from the args passed to the AS and instead include them in the args passed to the JVM. Otherwise they are processed too late.

The workaround is to set these values in standalone.conf.",16/Feb/16 11:33 AM;jamezp;Fixing WFCORE-157 would fix this so I'm closing this one as a duplicate.,,,,,,,,,,,,,,,,,,,,,,,,
Startup success detection mechanism fails if JBOSS_HOME and jboss.server.base.dir are set differently.,WFCORE-1383,12585389,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,twwwt,twwwt,18/Sep/15 9:51 AM,10/Nov/16 9:07 AM,29/Nov/16 3:52 PM,,2.0.0.CR1,,,,,,,,Scripts,,,,,0,,,,,,"If the property `jboss.server.base.dir` and the environment variable `JBOSS_HOME` point to different directories (which we do, for instance, to start multiple JBoss/Wildfly instances, each with its own standalone directory) then the startup success detection mechanism implemented by the script <WILDFLY_HOME>/bin/init.d/wildfly-init-debian.sh wrongly reports startup as failed even if it actually succeeded.

Tracing it down, I found that since Wildly 10 the startup script searches for the file `<JBOSS_HOME>/standalone/tmp/startup-marker`. However, that file is actually written to `jboss.server.base.dir/tmp/startup-marker`; hence, it is not found if the directories are not the same.

I don't see a way how to fix this. As far as I can seen, it's not possible to access the jboss.server.base.dir property within the startup script. But the use case of having separate directories should be supported and it should work.",Linux/Debian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzyk0n:,9223372036854775807,,,,,,,,,,,"03/Feb/16 5:06 PM;esantana;The JBOSS_MARKERFILE variable can be defined, on your shell script. for instance:

JBOSS_MARKERFILE=$JBOSS_HOME/standalone/tmp/startup-marker

Take a look at:
wildfly-VERSION/docs/contrib/scripts/init.d/wildfly-init-redhat.sh",,,,,,,,,,,,,,,,,,,,,,,,,,
AS fails to start with colon in path,WFCORE-1382,12466427,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Optional,,,jameslivingston,jameslivingston,14/May/12 8:13 PM,28/Oct/16 9:08 AM,29/Nov/16 3:52 PM,,,,,,,,,,Modules,,,,,0,,,,,,"standalone.sh and domain.sh create the module path passed to JBoss Modules -mp option with:
  JBOSS_MODULEPATH=""$JBOSS_HOME/modules""

The value passed to -mp is a File.pathSeparator (colon on Linux and semicolon on Windows) delimited list of paths, not a single path, so this does not work correctly when JBOSS_HOME contains a colon on Linux, which is a legal but rare character to use in a path.
",,,,,,,,,,,,,,,,,,MODULES-134,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hz137z:,66765,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wildfly-init-debian.sh fails on Ubuntu 15.04,WFCORE-1381,12570141,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,gesker,gesker,28/Apr/15 4:12 PM,18/Jun/16 4:57 PM,29/Nov/16 3:52 PM,,1.0.0.Beta6,1.0.0.CR1,,,,,,,Scripts,,,,,0,,,,,,"Init script ""wildfly-init-debian.sh"" fails on Ubuntu 15.04 but standalone.sh works fine.  Env is jdk_1.8.0_45-b14 and wildfly_9.0.0.Beta2. The error returned is:

Failed to start wildfly.service: Unit wildfly.service failed to load: No such file or directory.

Had no issue with the above script on Ubuntu 14.04 so guessing a change in Ubuntu (""Upstart"" Maybe?) But, I'm far from an upstart or bash expert. bash -x seems to at least create the pid.","Ubuntu 15.04, Oracle JDK_1.8.0_45-b14",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Compatibility/Configuration,User Experience,,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|hzw5pz:,9223372036854775807,,,,"Set variables in JBOSS_HOME/bin/init.d/wildfly.conf
ln -s JBOSS_HOME/bin/init.d/wildfly.conf /etc/default/wildfly 
ln -s JBOSS_HOME/bin/init.d/wildfly-init-debian.sh /etc/init.d/wildfly
cd /etc/init.d
update-rc.d wildfly defaults

permissions and user/group are of course set to wildfly.wildfly

",,,,,,,"07/Jun/15 10:27 PM;ricardoarguello;Ubuntu 15.04 and Fedora 22 use systemd.
I created a pull request to add a systemd service:

https://github.com/wildfly/wildfly-core/pull/786","09/Oct/15 2:17 PM;gesker;BTW,just want to re-emphasize, this only seems to happen when symlinks to the configuration files are made. 

When the configuration files are actually copied to the /etc/default  & /etc/init.d directories Wildfly service starts as expected. But, it would be nice if the symlinks worked as I like to be on the current version on my dev box and I can't seem to find a DEB for Wildfly.
","09/Oct/15 4:05 PM;ctomc;we now have also systemd scripts in distro, which can be used as workaround for this.
This is still open with waiting for volunteers that would fix and send PR for it.","14/Oct/15 3:29 PM;guirald;Basically, we replaced all occurrences of 'log_******' by 'echo'. And finally, line 152, replaced 'pidofproc' by 'pidof'.
I hope it helps you, guys.
Below I printed my version of the script.

#!/bin/sh
#
# /etc/init.d/wildfly -- startup script for WildFly
#
# Written by Jorge Solorzano
#
### BEGIN INIT INFO
# Provides:             wildfly
# Required-Start:       $remote_fs $network
# Required-Stop:        $remote_fs $network
# Should-Start:         $named
# Should-Stop:          $named
# Default-Start:        2 3 4 5
# Default-Stop:         0 1 6
# Short-Description:    WildFly Application Server
# Description:          Provide WildFly startup/shutdown script
### END INIT INFO

NAME=wildfly
DESC=""WildFly Application Server""
DEFAULT=""/etc/default/$NAME""

# Check privileges
if [ `id -u` -ne 0 ]; then
        echo ""You need root privileges to run this script""
        exit 1
fi

# Make sure wildfly is started with system locale
if [ -r /etc/default/locale ]; then
        . /etc/default/locale
        export LANG
fi

#. /lib/lsb/init-functions

if [ -r /etc/default/rcS ]; then
        . /etc/default/rcS
fi

# Overwrite settings from default file
if [ -f ""$DEFAULT"" ]; then
        . ""$DEFAULT""
fi

# Location of JDK
if [ -n ""$JAVA_HOME"" ]; then
        export JAVA_HOME
fi

# Setup the JVM
if [ -z ""$JAVA"" ]; then
        if [ -n ""$JAVA_HOME"" ]; then
                JAVA=""$JAVA_HOME/bin/java""
        else
                JAVA=""java""
        fi
fi

# Location of wildfly
if [ -z ""$JBOSS_HOME"" ]; then
        JBOSS_HOME=""/opt/wildfly""
fi
export JBOSS_HOME

# Check if wildfly is installed
if [ ! -f ""$JBOSS_HOME/jboss-modules.jar"" ]; then
        echo ""$NAME is not installed in \""$JBOSS_HOME\""""
        exit 1
fi

# Run as wildfly user
# Example of user creation for Debian based:
# adduser --system --group --no-create-home --home $JBOSS_HOME --disabled-login wildfly
if [ -z ""$JBOSS_USER"" ]; then
        JBOSS_USER=wildfly
fi

# Check wildfly user
id $JBOSS_USER > /dev/null 2>&1
if [ $? -ne 0 -o -z ""$JBOSS_USER"" ]; then
        echo ""User \""$JBOSS_USER\"" does not exist...""
        exit 1
fi

# Check owner of JBOSS_HOME
if [ ! $(stat -L -c ""%U"" ""$JBOSS_HOME"") = $JBOSS_USER ]; then
        echo ""The user \""$JBOSS_USER\"" is not owner of \""$JBOSS_HOME\""""
        exit 1
fi

# Startup mode of wildfly
if [ -z ""$JBOSS_MODE"" ]; then
        JBOSS_MODE=standalone
fi

# Startup mode script
if [ ""$JBOSS_MODE"" = ""standalone"" ]; then
        JBOSS_SCRIPT=""$JBOSS_HOME/bin/standalone.sh""
        if [ -z ""$JBOSS_CONFIG"" ]; then
                JBOSS_CONFIG=standalone.xml
        fi
else
        JBOSS_SCRIPT=""$JBOSS_HOME/bin/domain.sh""
        if [ -z ""$JBOSS_DOMAIN_CONFIG"" ]; then
                JBOSS_DOMAIN_CONFIG=domain.xml
        fi
        if [ -z ""$JBOSS_HOST_CONFIG"" ]; then
                JBOSS_HOST_CONFIG=host.xml
        fi
fi

# Check startup file
if [ ! -x ""$JBOSS_SCRIPT"" ]; then
        echo ""$JBOSS_SCRIPT is not an executable!""
        exit 1
fi

# Check cli file
JBOSS_CLI=""$JBOSS_HOME/bin/jboss-cli.sh""
if [ ! -x ""$JBOSS_CLI"" ]; then
        echo ""$JBOSS_CLI is not an executable!""
        exit 1
fi

# The amount of time to wait for startup
if [ -z ""$STARTUP_WAIT"" ]; then
        STARTUP_WAIT=30
fi

# The amount of time to wait for shutdown
if [ -z ""$SHUTDOWN_WAIT"" ]; then
        SHUTDOWN_WAIT=30
fi

# Location to keep the console log
if [ -z ""$JBOSS_CONSOLE_LOG"" ]; then
        JBOSS_CONSOLE_LOG=""/var/log/$NAME/console.log""
fi
export JBOSS_CONSOLE_LOG

# Location to set the pid file
JBOSS_PIDFILE=""/var/run/$NAME/$NAME.pid""
export JBOSS_PIDFILE

# Launch wildfly in background
LAUNCH_JBOSS_IN_BACKGROUND=1
export LAUNCH_JBOSS_IN_BACKGROUND

# Helper function to check status of wildfly service
check_status() {
        pidof ""$JBOSS_PIDFILE"" ""$JAVA"" >/dev/null 2>&1
}

case ""$1"" in
 start)
        echo ""Starting $DESC"" ""$NAME""
        check_status
        status_start=$?
        if [ $status_start -eq 1 ]; then
                mkdir -p $(dirname ""$JBOSS_PIDFILE"")
                mkdir -p $(dirname ""$JBOSS_CONSOLE_LOG"")
                chown $JBOSS_USER $(dirname ""$JBOSS_PIDFILE"") || true
                cat /dev/null > ""$JBOSS_CONSOLE_LOG""

                if [ ""$JBOSS_MODE"" = ""standalone"" ]; then
                        start-stop-daemon --start --user ""$JBOSS_USER"" \
                        --chuid ""$JBOSS_USER"" --chdir ""$JBOSS_HOME"" --pidfile ""$JBOSS_PIDFILE"" \
                        --exec ""$JBOSS_SCRIPT"" -- -c $JBOSS_CONFIG $JBOSS_OPTS >> ""$JBOSS_CONSOLE_LOG"" 2>&1 &
                else
                        start-stop-daemon --start --user ""$JBOSS_USER"" \
                        --chuid ""$JBOSS_USER"" --chdir ""$JBOSS_HOME"" --pidfile ""$JBOSS_PIDFILE"" \
                        --exec ""$JBOSS_SCRIPT"" -- --domain-config=$JBOSS_DOMAIN_CONFIG \
                        --host-config=$JBOSS_HOST_CONFIG $JBOSS_OPTS >> ""$JBOSS_CONSOLE_LOG"" 2>&1 &
                fi

                count=0
                launched=0
                until [ $count -gt $STARTUP_WAIT ]
                do
                        grep 'WFLYSRV0025:' ""$JBOSS_CONSOLE_LOG"" > /dev/null
                        if [ $? -eq 0 ] ; then
                                launched=1
                                break
                        fi
                        sleep 1
                        count=$((count + 1));
                done

                if check_status; then
                        exit 0
                else
                        exit 1
                fi

                if [ $launched -eq 0 ]; then
                        echo ""$DESC hasn't started within the timeout allowed""
                        echo ""please review file \""$JBOSS_CONSOLE_LOG\"" to see the status of the service""
                fi
        elif [ $status_start -eq 0 ]; then
                echo ""$DESC (already running)""
        fi
 ;;
 stop)
        check_status
        status_stop=$?
        if [ $status_stop -eq 0 ]; then
                read kpid < ""$JBOSS_PIDFILE""
                echo ""Stopping $DESC"" ""$NAME""

                children_pids=$(pgrep -P $kpid)

                start-stop-daemon --stop --quiet --pidfile ""$JBOSS_PIDFILE"" \
                --user ""$JBOSS_USER"" --retry=TERM/$SHUTDOWN_WAIT/KILL/5 \
                >/dev/null 2>&1

                if [ $? -eq 2 ]; then
                        echo ""$DESC can't be stopped""
                        exit 1
                fi

                for child in $children_pids; do
                        /bin/kill -9 $child >/dev/null 2>&1
                done

                exit 0
        elif [ $status_stop -eq 1 ]; then
                echo ""$DESC is not running but the pid file exists, cleaning up""
                rm -f $JBOSS_PIDFILE
        elif [ $status_stop -eq 3 ]; then
                echo ""$DESC is not running""
        fi
 ;;
 restart)
        check_status
        status_restart=$?
        if [ $status_restart -eq 0 ]; then
                $0 stop
        fi
        $0 start
 ;;
 reload|force-reload)
        check_status
        status_reload=$?
        if [ $status_reload -eq 0 ]; then
                echo ""Reloading $DESC config"" ""$NAME""

                if [ ""$JBOSS_MODE"" = ""standalone"" ]; then
                        RELOAD_CMD="":reload""; else
                        RELOAD_CMD="":reload-servers""; fi

                start-stop-daemon --start --chuid ""$JBOSS_USER"" \
                --exec ""$JBOSS_CLI"" -- --connect --command=$RELOAD_CMD >/dev/null 2>&1

                if [ $? -eq 0 ]; then
                        exit 0
                else
                        exit 1
                fi
        else
                echo ""$DESC is not running""
        fi
 ;;
 status)
        check_status
        status=$?
        if [ $status -eq 0 ]; then
                read pid < $JBOSS_PIDFILE
                echo ""$DESC is running with pid $pid""
                exit 0
        elif [ $status -eq 1 ]; then
                echo ""$DESC is not running and the pid file exists""
                exit 1
        elif [ $status -eq 3 ]; then
                echo ""$DESC is not running""
                exit 3
        else
                echo ""Unable to determine $NAME status""
                exit 4
        fi
 ;;
 *)
 echo ""Usage: $0 {start|stop|restart|reload|force-reload|status}""
 exit 2
 ;;
esac

exit 0
","04/Nov/15 3:58 AM;karel.cernohorsky;[~gesker]:
The service starts fine with symbolic link to the configuration file (e.g. /etc/default/wildfly -> /opt/wildfly/bin/init.d/wildfly.conf).
But for the script (e.g. /etc/init.d/wildfly -> /opt/wildfly/bin/init.d/wildfly-init-debian.sh) it needs a hard link (at least, or a plain copy). With symlink it fails to see functions included by `. /lib/lsb/init-functions`.

[~guirald]:
There's no need to rewrite the script, the functions `pidofproc` and `log_*` are available on Ubuntu and included from `. /lib/lsb/init-functions`. The issue stems probably from some user / env issue (root vs. wildfly) by symlinking the script. And, such a simple replacement of pidofproc by pidof (as in your script version) is not quite reliable / complete, due to status codes mismatch.","18/Jun/16 4:57 PM;jorsol;It should be noted that the correct way to use it is to copy the init.d and conf files to their respective directories because a symbolic link would create a security exploit should anyone be able to gain the permissions of wildfly and modify $JBOSS_HOME/bin/init.d/wildfly-init-debian.sh.

Please don't make a symbolic link to this files.

I'm going to create a README with the steps to install as a service.
",,,,,,,,,,,,,,,,,,,,,
service.bat fails when wildfly folder path contains spaces,WFCORE-1380,12602485,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,ilpianista,ilpianista,03/Feb/16 4:11 PM,10/May/16 3:54 PM,29/Nov/16 3:52 PM,19/Mar/16 8:21 AM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Scripts,,,,,0,,,,,,"service.bat does not work when Wildfly is run from Program Files (x86)
{noformat}
C:\Program Files (x86)\wildfly-9.0.0.Final\bin\service>service.bat install
Using the X86-64bit version of prunsrv
\wildfly-9.0.0.Final\domain\log non atteso.
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1405,,,,,,0.0,0.0,,1|i01907:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
service.bat points user to wrong directory,WFCORE-1379,12602167,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,ctomc,nickarls,nickarls,02/Feb/16 5:16 AM,29/Aug/16 6:15 AM,29/Nov/16 3:52 PM,21/Mar/16 10:17 PM,2.0.10.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Scripts,,,,,0,,,,,,"Running service.bat from the docs/contrib/scripts/service dir tells user to run the script under bin/service*s* but the binary paths to the services expects bin/service, resulting in service install failure with file not found",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,https://developer.jboss.org/thread/267556,,,,,,,,,0.0,8.0,,1|i0172n:,9223372036854775807,,,,,,,,,,,06/Apr/16 7:45 PM;enantiomer2000;also seeing this issue in 10.0.0.Final,"14/Apr/16 7:22 AM;johannes.berggren;This issue is in 10.0.0.Final. Moving the \service and \init.d directories to \bin creates the service successfully, but the service is unable to start. Windows displays the following error message:

Windows could not start the Wildfly on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 255.

The Windows System Events log says the following regarding the Wildfly service:

The Wildfly service terminated with the following service-specific error:
The extended attributes are inconsistent.","14/Apr/16 2:47 PM;ctomc;This is fixed in master of wildfly-core and will be part of WildFly 11, in mean time you can grab latest version of script from github directly https://github.com/wildfly/wildfly-core/blob/master/core-feature-pack/src/main/resources/content/docs/contrib/scripts/service/service.bat","13/May/16 3:19 PM;jrostosk_jboss;Still doesn't work, sorry.  I grabbed service.bat from GitHub link, replacing original one, then copied service directory to bin.  It needs to be in bin.  Fails.
Then I grabbed *all* the service-related files from GitHub, just to be safe (in case any of the exes had changed) - still fails.  See details below.

Service installs fine - or appears to...

Tried running command prompt as Administrator - no luck.
Tried all of:
 Windows Service Controller UI
 Windows ""sc start"" command
 Our script's ""service start"" command
None work.

When attempted via Windows Service Controller UI: The Wildfly service terminated with service-specific error code 1.

When attempted via ""service start"" (even as Administrator):
The data area passed to a system call is too small.
Failed to start serviceService Wildfly starting...
ERROR: Failed to load service Wildfly configuration

Event Log: The Wildfly service terminated with service-specific error Incorrect function..","25/Jun/16 2:51 PM;andrejt;I can confirm that this issue is not resolved yet.
I have installed wildfly-10.0.0.Final on Windows 2012 server and can't get Wildfly running as a service. I downloaded all latest /service files form GitHub and replaced existing wildfly-10.0.0.Final files.
It is installed as a service but cannot start.
Here is the System Event Log:
""The Wildfly service terminated with the following service-specific error: 
The extended attributes are inconsistent.""
See it here: 
https://www.dropbox.com/s/d2uf2awoyxz6k7d/Screenshot%202016-06-25%2020.46.16.png?dl=0

I need urgent advice...please!
","27/Jun/16 10:30 AM;ctomc;Well, than this is different issue than one described here, this issue only talks about bug in documentation noting else. 
please create separate issue for this.",05/Jul/16 5:10 PM;sshtac;Can someone please post the link to the other defect?   TIA,29/Aug/16 6:15 AM;allvi;I can install wildfly 10.1.0.Final as a windows service but I cannot start it without an error. But if I copy the service directory from my wildfly 8.1.0.Final installation to the bin directory of wildfly 10.1.0 it works.,,,,,,,,,,,,,,,,,,,
WFLYCTL0201: Unknown attribute 'server-state' using HTTP management API,WFCORE-1377,12604056,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,mchoma,mchoma,16/Feb/16 4:07 AM,17/Feb/16 9:28 AM,29/Nov/16 3:52 PM,16/Feb/16 4:28 AM,2.1.0.CR1,,,,,,,,Domain Management,,,,,0,,,,,,"Unable to get server-state using http management API

{noformat}
[mchoma@localhost bin]$ curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""read-attribute"", ""address"" : [[{ ""host"" : ""master"" },{ ""server"" : ""server-one"" }]], ""name"" : ""server-state"",""json.pretty"":1}' -u admin:admin
HTTP/1.1 401 Unauthorized
Connection: keep-alive
WWW-Authenticate: Digest realm=""ManagementRealm"",domain=""/management"",nonce=""sI2Bu4kJcGgNMTQ1NTYxMDE3OTU2MVc91LWa8HnWzIKZ5I8UIlo="",opaque=""00000000000000000000000000000000"",algorithm=MD5,qop=""auth""
Content-Length: 77
Content-Type: text/html
Date: Tue, 16 Feb 2016 08:09:39 GMT

HTTP/1.1 500 Internal Server Error
Connection: keep-alive
Authentication-Info: nextnonce=""sI2Bu4kJcGgNMTQ1NTYxMDE3OTU2MVc91LWa8HnWzIKZ5I8UIlo="",qop=""auth"",rspauth=""8e575a86f8dae40426abd49bbc8f8b8a"",cnonce=""YmNiNmM4YjA0NmZlYjQ5MzAwMDAyNjIxMDAwODNhODE="",nc=00000001
Content-Type: application/json; charset=utf-8
Content-Length: 131
Date: Tue, 16 Feb 2016 08:09:39 GMT

{
    ""outcome"" : ""failed"",
    ""failure-description"" : ""WFLYCTL0201: Unknown attribute 'server-state'"",
    ""rolled-back"" : true

{noformat}

Running analogous CLI command works OK.

{noformat}
[domain@127.0.0.1:9999 /] /host=slave/server=main-three:read-attribute(name=server-state)
{
    ""outcome"" => ""success"",
    ""result"" => ""running""
}
{noformat}

Can't get server status neither with 
{noformat}  
curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""read-attribute"", ""address"" : [[{ ""host"" : ""master"" },{ ""server-config"" : ""server-one"" }]], ""name"" : ""status"",""json.pretty"":1}' -u admin:admin
...
""WFLYCTL0201: Unknown attribute 'status'""
{noformat}

Issue can be seen in EAP 6, as well.",,,,,,,,,,,,,,,,JBEAP-3428,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,7.0,,1|i01i2n:,9223372036854775807,,,,"* Create administrator user admin with password admin using ./add-user.sh
* Start domain using ./domain.sh
* Try to find out server state
{noformat}
curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""read-attribute"", ""address"" : [[{ ""host"" : ""master"" },{ ""server"" : ""server-one"" }]], ""name"" : ""server-state"",""json.pretty"":1}' -u admin:admin
{noformat}
Error ""WFLYCTL0201: Unknown attribute 'server-state'""  occures

",,,,,,,"16/Feb/16 4:28 AM;mchoma;My fault, should remove one pair of additional braces 
{noformat}
curl --digest -L -D - http://localhost:9990/management --header ""Content-Type: application/json"" -d '{""operation"":""read-attribute"", ""address"" : [{ ""host"" : ""master"" },{ ""server"" : ""server-one"" }], ""name"" : ""server-state"",""json.pretty"":1}' -u admin:admin
{noformat}",16/Feb/16 10:07 AM;brian.stansberry;Please use the same server for both CLI and HTTP. Is server-one started?,"16/Feb/16 10:08 AM;brian.stansberry;Sorry, never mind; already closed! :)","16/Feb/16 1:42 PM;mchoma;Still one note. This buggy json structure from reproducer was generated with this java code: 

{code:java}
final ModelNode operation = new ModelNode();
operation.get(OP).set(READ_ATTRIBUTE_OPERATION);

ModelNode addr = new ModelNode();
addr.add(HOST, host);
addr.add(SERVER, server);

// When using this, it in constrast generate proper json
//operation.get(OP_ADDR).add(HOST, host).add(SERVER, server);

operation.get(OP_ADDR).add(addr);
operation.get(NAME).set(""server-state"");
return operation.toJSONString(true);
{code}

Does it deserve JIRA?

","16/Feb/16 2:50 PM;brian.stansberry;No, because the way of creating the operation node was not correct.

It should have been:

operation.get(OP_ADDR).set(addr);

set not add

Your addr node was of ModelType.LIST. When you called add instead of set you created another list with a single element, itself a list.",17/Feb/16 12:31 AM;mchoma;Thank you for clarification.,17/Feb/16 9:28 AM;brian.stansberry;You're welcome. :),,,,,,,,,,,,,,,,,,,,
Update the module cli command help text,WFCORE-1376,12604003,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,15/Feb/16 12:39 PM,10/May/16 3:54 PM,29/Nov/16 3:52 PM,18/Mar/16 8:55 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,The help text from the module CLI command is still referencing AS7 and doesn't explicitly specify that the command is local only. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1420,,,,,,0.0,0.0,,1|i01hrj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to specify custom configuration directory via -Djboss.server.config.dir,WFCORE-1373,12603857,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,s.lisovoy,s.lisovoy,15/Feb/16 6:24 AM,10/May/16 4:05 PM,29/Nov/16 3:52 PM,16/Apr/16 7:13 AM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"Broken support for server config files location customization via: {{jboss.server.config.dir}}.
Previous Wildfly 10 versions till CR4 it works as expected. Broken since WF10.0.0.CR5

See Steps to reproduce.

Error:
Cannot start embedded server: WFLYEMB0022: Cannot invoke 'start' on embedded process: WFLYCTL0214: Could not get main file: config.xml. Specified files must be relative to the configuration dir: /opt/wildfly-10.0.0.Final/standalone/configuration",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1418,,,,,,0.0,0.0,,1|i01gwn:,9223372036854775807,,,,"1. Create file {{config-migration.cli}} with commands:
{code}
embed-server --admin-only --server-config=config.xml
/subsystem=messaging:migrate
/extension=org.jboss.as.messaging:remove
{code} 
 
2. Try to execute from command line following:
{code}
/opt/wildfly-10.0.0.Final/bin/jboss-cli.sh -Djboss.server.config.dir=/opt/myapp/config --file=config-migration.cli
{code}

Produces error:
Cannot start embedded server: WFLYEMB0022: Cannot invoke 'start' on embedded process: WFLYCTL0214: Could not get main file: config.xml. Specified files must be relative to the configuration dir: /opt/wildfly-10.0.0.Final/standalone/configuration",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CompositeIndexProcessor::calculateModuleIndex does not respect import filters,WFCORE-1372,12603855,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dmlloyd,asoldano,asoldano,15/Feb/16 6:15 AM,16/Feb/16 7:14 PM,29/Nov/16 3:52 PM,,,,,,,,,,Server,,,,,0,,,,,,"I have a deployment whose manifest declares
{noformat}Dependencies: org.foo annotations{noformat}

What I'm trying to do with the org.foo module is basically filtering (and exposing) a subset of the org.apache.cxf.impl module. To achieve that, I have the following module.xml:
{noformat}
<module xmlns=""urn:jboss:module:1.3"" name=""org.foo"">
    <resources>
    </resources>

    <dependencies>
        <module name=""org.apache.cxf.impl"" services=""import"">
          <imports>
            <include path=""META-INF/cxf""/>
            <include path=""META-INF""/>
            <include path=""org/apache/cxf/sts""/>
            <include path=""org/apache/cxf/sts/**""/>
            <include path=""org/apache/cxf/ws/security/sts/**""/>
          </imports>
          <exports>
            <include path=""META-INF/cxf""/>
            <include path=""META-INF""/>
            <include path=""org/apache/cxf/sts""/>
            <include path=""org/apache/cxf/sts/**""/>
            <include path=""org/apache/cxf/ws/security/sts/**""/>
          </exports>
        </module>
        <module name=""asm.asm"" />
        <module name=""javax.api"" />
        <module name=""javax.annotation.api"" />
        <module name=""javax.validation.api""/>
        <module name=""javax.jms.api"" />
        <module name=""javax.jws.api"" />
        <module name=""javax.mail.api"" />
        <module name=""javax.resource.api"" />
        <module name=""javax.servlet.api"" />
        <module name=""javax.wsdl4j.api"" />
        <module name=""javax.xml.bind.api"" services=""import""/>
        <module name=""com.fasterxml.jackson.jaxrs.jackson-jaxrs-json-provider""/>
        <module name=""com.sun.xml.bind"" services=""import""/>
        <module name=""javax.xml.soap.api"" />
        <module name=""javax.xml.stream.api"" />
        <module name=""javax.xml.ws.api"" />
        <module name=""javax.ws.rs.api"" />
        <module name=""org.apache.commons.lang"" />
        <module name=""org.apache.httpcomponents""/>
        <module name=""org.apache.neethi"" />
        <module name=""org.apache.velocity"" />
        <module name=""org.apache.xml-resolver"" />
        <module name=""org.apache.ws.xmlschema"" />
        <module name=""org.apache.ws.security"" />
        <module name=""org.apache.santuario.xmlsec"" />
        <module name=""org.codehaus.jettison"" />
        <module name=""org.codehaus.woodstox"" />
        <module name=""org.joda.time"" />
        <module name=""org.opensaml"" />
    </dependencies>
</module>
{noformat}

The problem I'm having is that the composite annotation index that's attached to my deployment includes annotations from org.apache.cxf.impl module classes that are not included in the imports/exports above.
To me, this is due to the CompositeIndexProcessor::calculateModuleIndex(Module module) method that uses PathFilters.getDefaultImportFilter() (instead of my filters) for adding stuff to the index.",,,,,,,,,,,,,,,,,,,,,JBWS-3981,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i01gw7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
All configuration changes have the same operation date,WFCORE-1370,12603829,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,15/Feb/16 3:59 AM,10/May/16 3:49 PM,29/Nov/16 3:52 PM,18/Mar/16 4:07 PM,2.1.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,," When I list the changes, the operation date for all of the changes are the same, and seem to be the date/time when the `list-changes` operation is performed.  I tried this just now with ER5:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/1417,,,,,ahoffer,0.0,0.0,,1|i01gqn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Audit logging to TCP syslog is stopped after syslog restart,WFCORE-1369,12603827,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,olukas,olukas,15/Feb/16 3:52 AM,18/Mar/16 8:34 PM,29/Nov/16 3:52 PM,22/Feb/16 12:01 PM,2.0.10.Final,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,"In case when audit logging to TCP syslog is enabled and syslog server is restarted then audit logging to syslog is stopped. UDP works correctly. It can be related to issue [1].

[1] https://issues.jboss.org/browse/LOGMGR-123",,,,,,,,,,,,,,,,JBEAP-3404,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1428,,,,,,0.0,1.0,,1|i01gq7:,9223372036854775807,,,,"1) set following configuration of audit-log:
{code:xml}
        <audit-log>
            <formatters>
                <json-formatter name=""json-formatter""/>
            </formatters>
            <handlers>
                <file-handler name=""file"" formatter=""json-formatter"" path=""audit-log.log"" relative-to=""jboss.server.data.dir""/>
                <syslog-handler name=""audit-test-syslog-handler"" formatter=""json-formatter"" syslog-format=""RFC5424"">
                    <tcp host=""127.0.0.1"" port=""9898"" message-transfer=""OCTET_COUNTING""/>
                </syslog-handler>
            </handlers>
            <logger log-boot=""true"" log-read-only=""false"" enabled=""true"">
                <handlers>
                    <handler name=""file""/>
                    <handler name=""audit-test-syslog-handler""/>
                </handlers>
            </logger>
        </audit-log>
{code}

2) start application server and syslog server
3) make some audit operation -> audit message is logged to syslog
4) restart syslog
5) make some audit operation -> audit message is not logged to syslog",,,,,,,"18/Feb/16 5:08 PM;jamezp;Note the PR allows for a better reconnect, but the reconnect will not work as expected in the description of this issue. If a syslog server goes down or the connection is dropped it will take 2 messages sent before a third one will be logged. On the first message sent after a disruption will simply be ignored by the {{java.net.Socket}}. The second message sent will throw a {{java.net.SocketException: Broken pipe}}. This error is thrown by the syslog audit log handler and the connection state is reset indicating it should be reconnected. Finally the third message will go through.",,,,,,,,,,,,,,,,,,,,,,,,,,
Test framework for CLI-based tests can be very slow,WFCORE-1367,12464282,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,bosschaert,bosschaert,17/Apr/12 6:29 AM,10/Feb/16 10:30 AM,29/Nov/16 3:52 PM,,,,,,,,,,CLI,Test Suite,,,,1,,,,,,"The org.jboss.as.test.integration.management.base.AbstractCliTestBase provides a suitable API for testing CLI-based operations. However, running tests with a relatively large number of CLI operations can take a *long* time, seemingly much longer than necessary. This is probably related to the fact that CLIWrapper.readAllAsOpResult() method always seems to wait until the lineTimeout has expired. 
Typically the WAIT_LINETIMEOUT value is used for this argument. Shortening the timeout is not an option as I have seen cases where a test would fail when run on a slow machine, but this only happens occasionally.
It would be *much* better if a timeout was not needed for this and the test would wait until a certain operation was finished.

This can be observed in org.jboss.as.test.integration.management.cli.JmsTestCase and I also experienced it when writing the org.jboss.as.test.integration.osgi.management.OSGiManagementTestCase.",,,,,,,,,,,,,,,,,,,,,AS7-4643,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hz0ki7:,63733,,,,,,,,,,,"26/Apr/12 9:38 AM;brian.stansberry;Just an aside -- don't use CLIWrapper etc unless part of the test's purpose is to test the CLI. If the only CLI capability being tested is the ability to parse and execute a low-level op and present the response, that's tested elsewhere so using the CLI as your client just adds overhead. See package org.jboss.as.test.integration.management.api for examples of tests that directly use the native management API.","27/Apr/12 4:31 AM;dpospisil;The problem is that there is no easy way how to identify that the CLI has finished writing stuff to output stream. 
Could be done by trying to parse the result line-by-line and guess when the output is done. However this might not work for all use cases. The other way would be to use CLI API which is now available (and was not ~5 months ago).",,,,,,,,,,,,,,,,,,,,,,,,,
CLI Options missed in WFCORE-1199,WFCORE-1360,12602670,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ryanemerson,ryanemerson,ryanemerson,04/Feb/16 11:57 AM,22/Sep/16 9:35 AM,29/Nov/16 3:52 PM,18/Mar/16 8:39 PM,,,,,,,2.1.0.Final,,CLI,,,,,0,,,,,,The comma-seperated lists for server-groups in DeployHandler and UndeployHandler were missed in the original commit for WFCORE-1199.  The --properties field for ASModuleHandler as also omitted by mistake.  ,,,,,,,,,,,,,,,,,,,,,,,,WFCORE-1199,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1284885,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i01a4n:,9223372036854775807,,,,,,,,,,,28/Mar/16 5:33 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from POST to MODIFIED,28/Mar/16 7:26 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from MODIFIED to POST,22/Sep/16 9:35 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from MODIFIED to ON_QA,,,,,,,,,,,,,,,,,,,,,,,,
Exiting the CLI after disabling and clearing history will clear content of .jboss-cli-history,WFCORE-1359,12602394,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,03/Feb/16 8:29 AM,18/Mar/16 8:40 PM,29/Nov/16 3:52 PM,18/Mar/16 8:40 PM,2.0.10.Final,,,,,,2.1.0.Final,,CLI,,,,,0,,,,,,"According to the history --help:
{noformat}
 --disable    - will disable history expansion (but will not clear the
                previously recorded history);
 --clear      - will clear the in-memory history (but not the file one).
{noformat}
however following sequence of commands will clear the content ~/.jboss-cli-history file
{noformat}
[pkremens@dhcp-10-40-5-180 ~]$ wc ~/.jboss-cli-history 
 4  6 44 /home/pkremens/.jboss-cli-history
{noformat}
{noformat}
[standalone@localhost:9990 /] history --disable
[standalone@localhost:9990 /] history --clear
[standalone@localhost:9990 /] exit
{noformat}
{noformat}
[pkremens@dhcp-10-40-5-180 ~]$ wc ~/.jboss-cli-history 
0 0 0 /home/pkremens/.jboss-cli-history
{noformat}",,,,,,,,,,,,,,,,JBEAP-3184,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1402,,,,,,0.0,0.0,,1|i018g7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
javax.sql.api should declare a dependency on javax.transaction.api,WFCORE-1356,12602376,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Out of Date,tomjenkinson,tomjenkinson,tomjenkinson,03/Feb/16 7:36 AM,11/Feb/16 2:49 PM,29/Nov/16 3:52 PM,11/Feb/16 2:49 PM,,,,,,,,,Modules,,,,,0,,,,,,"javax.sql.XAConnection (https://docs.oracle.com/javase/7/docs/api/javax/sql/XAConnection.html) depends on javax.transaction.xa.XAResource

Including a partial stack trace that shows the failure:
{quote}
Caused by: java.lang.ClassNotFoundException: javax.transaction.xa.XAResource from [Module ""javax.sql.api:main"" from local module loader <SNIP/>
            at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:205)  
            at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:455)  
            at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:404)  
            at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:385)  
            at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:130)  
{quote}",,,,,,,,,,,,,,,,,,,,,WFCORE-561,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1401,,,,,,0.0,2.0,,1|i018c7:,9223372036854775807,,,,,,,,,,,03/Feb/16 7:41 AM;tomjenkinson;[~jamezp] - the fix versions don't seem to have a 2.1.0?,"11/Feb/16 2:49 PM;dmlloyd;We've separately dropped the javax.sql.api module as such, via WFCORE-1357, resolving this problem another way.",,,,,,,,,,,,,,,,,,,,,,,,,
Cannot clone a profile with a remoting subsystem but no io subsystem,WFCORE-1354,12602301,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Feb/16 7:19 PM,15/Feb/16 3:05 PM,29/Nov/16 3:52 PM,15/Feb/16 3:05 PM,2.0.10.Final,,,,,,2.1.0.CR2,,Domain Management,Remoting,,,,0,,,,,,"The remoting subsystem added a requirement for the new io subsystem's worker capability, but it has special logic such that the requirement is only added if an endpoint resource is configured. So, legacy configs (pre-io) won't have that resource, so there is no requirement.

This breaks down in the case of the profile 'clone' op, as a placeholder resource we add for the endpoint (to allow reads of the default endpoint config data) ends up getting 'described' and added by the cloning process. So that added resource triggers an unmet requirement for the io worker:

{code}
[domain@localhost:9990 /] /profile=default:clone(to-profile=test)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0369: Required capabilities are not available:
    org.wildfly.io.worker.default in context 'profile=test'; There are no known registration points which can provide this capability.""},
    ""rolled-back"" => true
}
{code}

I'm not sure how to deal with this; some sort of marker is needed to disable 'describing' that placeholder resource.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1407,,,,,,0.0,1.0,,1|i017vr:,9223372036854775807,,,,,,,,,,,02/Feb/16 7:20 PM;brian.stansberry;WFCORE-1354 somewhat blocks WFCORE-1340 by making testing of profile cloning scenarios difficult.,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot clone or ad-hoc describe legacy extensions,WFCORE-1353,12602297,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Feb/16 5:58 PM,15/Feb/16 3:05 PM,29/Nov/16 3:52 PM,15/Feb/16 3:05 PM,2.0.10.Final,,,,,,2.1.0.CR2,,Domain Management,,,,,0,,,,,,"Trying to clone a profile that includes legacy extensions results in this failure (which is buried and not properly reported, but that's a different problem):

WFLYCTL0309: Legacy extension 'org.jboss.as.web' is not supported on servers running this version. The extension is only supported for use by hosts running a previous release in a mixed-version managed domain

It's created by UnsupportedSubsystemDescribeHandler.

That failure made some sense when the only use of the 'describe' op was by an HC launching a domain server, but now 'describe' is also an impl detail of the 'clone' op, and describe may also be executed independently by users.

We need to distinguish the server launch case from other uses and only fail in the former.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1407,,,,,,0.0,1.0,,1|i017uv:,9223372036854775807,,,,,,,,,,,02/Feb/16 5:59 PM;brian.stansberry;WFCORE-1353 semi-blocks WFCORE-1340 as it impedes testing to ensure that the WFCORE-1340 solution handles clone correctly.,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded logged leaving filehandles open after stop,WFCORE-1352,12602268,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jamezp,luck3y,luck3y,02/Feb/16 12:37 PM,26/Oct/16 5:52 PM,29/Nov/16 3:52 PM,26/Oct/16 5:52 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Logging,,,,,0,,,,,,"After stop-embedded-server or stop-embedded-host-controller commands, logs in standalone/logs/ or domain/logs/ are still held open.",Windows,,,,,,,,,,,,,,,JBEAP-2840,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1435,,,,,,0.0,2.0,,1|i017of:,9223372036854775807,,,,,,,,,,,26/Oct/16 4:13 PM;dans1234546;This issue still persists in eap 7.1.0DR7. ,26/Oct/16 4:33 PM;brian.stansberry;If this isn't broken in WildFly Core 2.2.0.Final (used in WildFly 10.1) then please file a separate issue.,,,,,,,,,,,,,,,,,,,,,,,,,
FilePermission for XNIO and Marshalling modules are required for Remoting to run with security manager,WFCORE-1351,12599313,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,dmlloyd,okotek,okotek,13/Jan/16 9:19 AM,29/Nov/16 3:32 PM,29/Nov/16 3:52 PM,,,,,,,,3.0.0.Alpha14,,Remoting,Security,,,,0,,,,,,"# Running _NestedRemoteContextTestCase_ (from WildFly _testsuite/integration/basic_) with security manager, like
{noformat}
./integration-tests.sh -Dts.basic -Dts.noSmoke -Dtest=NestedRemoteContextTestCase -Dsecurity.manager
{noformat}

results in exception:
{noformat}
java.io.IOException: java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found
{noformat}


To make it work, permissions like following need to be added to _permissions.xml_ of  _ejb.ear_:
{noformat}
new FilePermission(""/home/okotek/git/wildfly/dist/target/wildfly-10.0.0.CR5-SNAPSHOT/modules/system/layers/base/org/jboss/xnio/nio/main/*"", ""read""),
new FilePermission(""/home/okotek/git/wildfly/dist/target/wildfly-10.0.0.CR5-SNAPSHOT/modules/system/layers/base/org/jboss/marshalling/river/main/*"", ""read""),
new RemotingPermission(""createEndpoint""),
new RuntimePermission(""createXnioWorker""),
new RemotingPermission(""addConnectionProvider""),
new RuntimePermission(""modifyThread""),
new RuntimePermission(""accessDeclaredMembers""),
new ReflectPermission(""suppressAccessChecks"")
{noformat}

which is very confusing.

Why do I need add seemingly unrelated permissions, like _FilePermission_ for XNIO and marshalling or _RuntimePermission_ for createXnioWorker? Such behavior should be fixed or properly documented.",,,,,,,,,,,,JBMAR-182,XNIO-261,,,JBEAP-2770,,WFCORE-1349,WFCORE-1350,,,,,,,,02/Sep/16 9:51 AM;gaol;1-no-createEndpoint-permission.stacktrace;https://issues.jboss.org/secure/attachment/12409055/1-no-createEndpoint-permission.stacktrace,02/Sep/16 9:51 AM;gaol;2-no-createXnioWorker-permission.stacktrace;https://issues.jboss.org/secure/attachment/12409054/2-no-createXnioWorker-permission.stacktrace,02/Sep/16 9:51 AM;gaol;3-no-addConnectionProvider-permission.stacktrace;https://issues.jboss.org/secure/attachment/12409053/3-no-addConnectionProvider-permission.stacktrace,02/Sep/16 9:51 AM;gaol;4-no-accessDeclaredMembers-permission.stractrace;https://issues.jboss.org/secure/attachment/12409052/4-no-accessDeclaredMembers-permission.stractrace,02/Sep/16 9:51 AM;gaol;5-no-suppressAccessChecks-permission.stracktrace;https://issues.jboss.org/secure/attachment/12409051/5-no-suppressAccessChecks-permission.stracktrace,,,,,,,,,,?,?,,+,?,?,,,,,,,,,,,,5.0,7.0,,1|i00q87:,9223372036854775807,,,,,,,,okotek,,,22/Jan/16 7:47 AM;dmlloyd;You should not need the FilePermissions. Do you have an exception stack trace?,"26/Jan/16 6:37 AM;okotek;Without permissions described above the test fails with:
{noformat}
[0m[31m12:31:00,339 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /web/CallEjbServlet: java.lang.RuntimeException: javax.naming.NamingException: Failed to create remoting connection [Root exception is java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found]
	at org.jboss.as.test.integration.naming.remote.multiple.CallEjbServlet.doGet(CallEjbServlet.java:44)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:284)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:263)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$1$1.run(ServletInitialHandler.java:180)
	at java.security.AccessController.doPrivileged(Native Method)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:177)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:793)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: javax.naming.NamingException: Failed to create remoting connection [Root exception is java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found]
	at org.jboss.naming.remote.client.ClientUtil.namingException(ClientUtil.java:51)
	at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:152)
	at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:114)
	at org.jboss.as.naming.InitialContext.init(InitialContext.java:99)
	at javax.naming.ldap.InitialLdapContext.<init>(InitialLdapContext.java:154)
	at org.jboss.as.naming.InitialContext.<init>(InitialContext.java:89)
	at org.jboss.as.naming.InitialContextFactory.getInitialContext(InitialContextFactory.java:43)
	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)
	at javax.naming.InitialContext.init(InitialContext.java:244)
	at javax.naming.InitialContext.<init>(InitialContext.java:216)
	at org.jboss.as.test.integration.naming.remote.multiple.CallEjbServlet.doGet(CallEjbServlet.java:33)
	... 31 more
Caused by: java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found
	at org.xnio.Xnio.doGetInstance(Xnio.java:238)
	at org.xnio.Xnio.getInstance(Xnio.java:193)
	at org.jboss.naming.remote.client.EndpointCache.get(EndpointCache.java:47)
	at org.jboss.naming.remote.client.InitialContextFactory.createEndpoint(InitialContextFactory.java:226)
	at org.jboss.naming.remote.client.InitialContextFactory.getOrCreateEndpoint(InitialContextFactory.java:207)
	at org.jboss.naming.remote.client.InitialContextFactory.getOrCreateNamingStore(InitialContextFactory.java:170)
	at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:146)
	... 41 more
{noformat}

Debugging on {{WildflySecurityManager}} reveals missing {{FilePermission}} for XNIO module jar.


----


Having permissions described above without {{FilePermission}} for marshalling the test fails with:
{noformat}
[0m[31m12:24:27,523 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /web/CallEjbServlet: java.lang.ExceptionInInitializerError
	at org.jboss.naming.remote.protocol.v1.RemoteNamingStoreV1.sendVersionHeader(RemoteNamingStoreV1.java:85)
	at org.jboss.naming.remote.protocol.v1.RemoteNamingStoreV1.start(RemoteNamingStoreV1.java:80)
	at org.jboss.naming.remote.protocol.v1.VersionOne.getRemoteNamingStore(VersionOne.java:51)
	at org.jboss.naming.remote.protocol.Versions.getRemoteNamingStore(Versions.java:55)
	at org.jboss.naming.remote.client.RemoteContextFactory.createVersionedStore(RemoteContextFactory.java:73)
	at org.jboss.naming.remote.client.HaRemoteNamingStore.failOverSequence(HaRemoteNamingStore.java:202)
	at org.jboss.naming.remote.client.HaRemoteNamingStore.namingStore(HaRemoteNamingStore.java:149)
	at org.jboss.naming.remote.client.HaRemoteNamingStore.namingOperation(HaRemoteNamingStore.java:130)
	at org.jboss.naming.remote.client.HaRemoteNamingStore.lookup(HaRemoteNamingStore.java:272)
	at org.jboss.naming.remote.client.RemoteContext.lookupInternal(RemoteContext.java:104)
	at org.jboss.naming.remote.client.RemoteContext.lookup(RemoteContext.java:93)
	at org.jboss.naming.remote.client.RemoteContext.lookup(RemoteContext.java:146)
	at javax.naming.InitialContext.lookup(InitialContext.java:417)
	at javax.naming.InitialContext.lookup(InitialContext.java:417)
	at org.jboss.as.test.integration.naming.remote.multiple.CallEjbServlet.doGet(CallEjbServlet.java:36)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:284)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:263)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)
	at io.undertow.servlet.handlers.ServletInitialHandler$1$1.run(ServletInitialHandler.java:180)
	at java.security.AccessController.doPrivileged(Native Method)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:177)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:793)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.io.FilePermission"" ""/home/okotek/git/wildfly/dist/target/wildfly-10.0.0.Final-SNAPSHOT/modules/system/layers/base/org/jboss/marshalling/river/main/jboss-marshalling-river-1.4.10.Final.jar"" ""read"")"" in code source ""(vfs:/content/ejb.ear/web.war/WEB-INF/classes <no signer certificates>)"" of ""null"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:273)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:175)
	at java.lang.SecurityManager.checkRead(SecurityManager.java:888)
	at org.wildfly.security.manager.WildFlySecurityManager.checkRead(WildFlySecurityManager.java:377)
	at sun.net.www.protocol.jar.JarFileFactory.getCachedJarFile(JarFileFactory.java:137)
	at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:81)
	at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:122)
	at sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:150)
	at java.net.URL.openStream(URL.java:1038)
	at java.util.ServiceLoader.parse(ServiceLoader.java:304)
	at java.util.ServiceLoader.access$200(ServiceLoader.java:185)
	at java.util.ServiceLoader$LazyIterator.hasNextService(ServiceLoader.java:357)
	at java.util.ServiceLoader$LazyIterator.access$600(ServiceLoader.java:323)
	at java.util.ServiceLoader$LazyIterator$1.run(ServiceLoader.java:396)
	at java.util.ServiceLoader$LazyIterator$1.run(ServiceLoader.java:395)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.util.ServiceLoader$LazyIterator.hasNext(ServiceLoader.java:398)
	at java.util.ServiceLoader$1.hasNext(ServiceLoader.java:474)
	at org.jboss.marshalling.Marshalling.loadMarshallerFactory(Marshalling.java:90)
	at org.jboss.marshalling.Marshalling.getProvidedMarshallerFactory(Marshalling.java:86)
	at org.jboss.naming.remote.protocol.v1.WriteUtil.<clinit>(WriteUtil.java:48)
	... 46 more
{noformat}
","19/Aug/16 2:55 AM;gaol;With XNIO upgrade to {{3.4.0.Final}} and jboss-marshalling to {{1.4.11.Final}},  the 2 FilePermissions mentioned in description are not needed anymore, but it requires following permissions to be added to pass the test:

* new RemotingPermission(""createEndpoint"")
* new RemotingPermission(""addConnectionProvider"")
* new RuntimePermission(""createXnioWorker"")
* new RuntimePermission(""accessDeclaredMembers"")
* new ReflectPermission(""suppressAccessChecks"")

Just FYI.",01/Sep/16 7:51 AM;dmlloyd;Are there updated stack traces?  I think at this point the remaining problems will be in the application server code rather than in the libraries.,"02/Sep/16 10:22 AM;gaol;Based on the permission sets in [NestedRemoteContextTestCase|https://github.com/wildfly/wildfly/blob/master/testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/naming/remote/multiple/NestedRemoteContextTestCase.java#L55-L59], I added the permissions in the following order and get different stack trace:

# no more permissions added -> [^1-no-createEndpoint-permission.stacktrace]
# new RemotingPermission(""createEndpoint"")  ->  [^2-no-createXnioWorker-permission.stacktrace]
# new RuntimePermission(""createXnioWorker"") ->  [^3-no-addConnectionProvider-permission.stacktrace]
# new RemotingPermission(""addConnectionProvider"") -> [^4-no-accessDeclaredMembers-permission.stractrace]
# new RuntimePermission(""accessDeclaredMembers"") -> [^5-no-suppressAccessChecks-permission.stracktrace]
# new java.lang.reflect.ReflectPermission(""suppressAccessChecks"") -> Test Pass
","02/Sep/16 10:33 AM;dmlloyd;OK I think the proper fix is to add a doPrivileged into the remote naming client.. possibly here:

{noformat}
	at org.jboss.naming.remote.client.InitialContextFactory.createEndpoint(InitialContextFactory.java:226)
{noformat}

or here:

{noformat}
	at org.jboss.naming.remote.client.EndpointCache.get(EndpointCache.java:47)
{noformat}

...to allow the endpoint to be joined with no special permissions.","30/Sep/16 10:22 AM;gaol;I tried to use privileged action to create Endpoint using commit at: https://github.com/gaol/jboss-remote-naming/commit/340aebc46459b869f1c821ced038e0767d2c69df . 

The first 4 Permission check exceptions are gone, however, the last 2 permission check exceptions are still there:


1. new RuntimePermission(""accessDeclaredMembers"") -> [^5-no-suppressAccessChecks-permission.stracktrace]
2. new java.lang.reflect.ReflectPermission(""suppressAccessChecks"") -> Test Pass
",,,,,,,,,,,,,,,,,,,,
StringListAttributeDefinition.unwrap doesn't take default value into account,WFCORE-1347,12602170,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,02/Feb/16 5:25 AM,26/Apr/16 9:03 AM,29/Nov/16 3:52 PM,18/Mar/16 8:38 PM,2.0.10.Final,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,unwrap method should first call resolveMethodAttribute to get value of attribute and than do unwrapping.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i0173b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
extension remove reports sucess even if the extension does not exist,WFCORE-1346,12602130,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,swd847,swd847,02/Feb/16 2:24 AM,10/May/16 3:55 PM,29/Nov/16 3:52 PM,21/Mar/16 9:00 PM,2.0.10.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"e.g.:

[standalone@localhost:9999 /] /extension=garbage:remove
{""outcome"" => ""success""}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1404,,,,,,0.0,0.0,,1|i016uv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[1.x] Memory leak in host controller,WFCORE-1343,12601963,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,aparnachaudhary,aparnachaudhary,01/Feb/16 3:22 AM,18/Mar/16 4:53 PM,29/Nov/16 3:52 PM,18/Mar/16 4:53 PM,1.0.0.Final,,,,,,1.0.2.Final,,Domain Management,,,,,0,,,,,,"The ManagedServerProxy class in host-controller contains a memory leak. The leak can be reproduced by performing multiple requests to HTTP management API.

{noformat}
http://<host>:9990/management/host/host0/server/server0/core-service/platform-mbean/type/memory?include-runtime=true
{noformat}

Applying the fix proposed in WFCORE-992 solves the leak.",,,,,,,,,,,,,,,,,,,,,,,,,,,01/Feb/16 3:21 AM;aparnachaudhary;WFCORE-992-HC-Leak.PNG;https://issues.jboss.org/secure/attachment/12397379/WFCORE-992-HC-Leak.PNG,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1397,,,,,,1.0,4.0,,1|i015vj:,9223372036854775807,,,,"Multiple requests to HTTP management API.


{noformat}
http://<host>:9990/management/host/host0/server/server0/core-service/platform-mbean/type/memory?include-runtime=true
{noformat}
",,,,,,,01/Feb/16 9:52 AM;brian.stansberry;Is this different from WFCORE-992? Or is it a request to have the fix applied to the 1.x branch?,01/Feb/16 11:18 AM;aparnachaudhary;[~brian.stansberry] The request is to backport the fix to 1.x. I've submitted a PR.,"01/Feb/16 12:19 PM;brian.stansberry;Thank you. Currently we don't have any specific plans to do another release from the 1.x branch, unless we learn of a critical CVE problem. (This is why there is no release date associated with the 1.0.2.Final version in JIRA.) But, assuming your pull request passes CI testing, if we do a release I'll include that change.",01/Feb/16 1:00 PM;aparnachaudhary;Thank you [~brian.stansberry] for your quick response.,,,,,,,,,,,,,,,,,,,,,,,
XML templates have wrong attribute order for audit log file-handler elements,WFCORE-1342,12601787,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,28/Jan/16 7:40 PM,10/May/16 3:51 PM,29/Nov/16 3:52 PM,18/Mar/16 6:14 PM,2.0.8.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"The path attribute should come before relative-to, which is how the xsd declares them and how the marshaller persists.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i014t3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Editing of default deployment scanner's relative-to attribute can cause server crash,WFCORE-1333,12601372,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,soul2zimate,soul2zimate,soul2zimate,26/Jan/16 10:12 PM,08/Jun/16 3:55 AM,29/Nov/16 3:52 PM,06/Apr/16 8:21 PM,2.0.7.Final,,,,,,3.0.0.Alpha1,,Deployment Scanner,Domain Management,,,,0,,,,,,Setting value of {{relative-to}} attribute of default deployment scanner on standalone server to a path which does not exists in file system causes server crash.,,,,,,,,,,,,,,,,JBEAP-3044,,,,,WFCORE-1579,JBEAP-4874,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1392,,,,,,0.0,3.0,,1|i012b3:,9223372036854775807,,,,"# Start server in standalone mode
#  Change value of {{relative-to}} attribute to non-existing value. {{/subsystem=deployment-scanner/scanner=default:write-attribute(name=relative-to, value=foobar)}}
# {{:reload}}
# Server is down and have to be started with corrected configuration. Cannot be fixed using CLI.",,,,,,,"27/Jan/16 2:37 PM;dmlloyd;While I agree that the server should not crash in this case, validating the attribute is the wrong answer.

Here are a few ways in which it could fail:
* The directory might be moved or deleted while the server is running
* The directory's permissions might be modified while the server is running
* The user might expect to be able to start the server and add the directory after the fact

The reason this fails is that a transient condition is being checked for in the configuration, but the configuration has no way to enforce the ongoing conformence to the constraint.

The right answer is for the deployment scanner to dynamically be able to handle the directory appearing and disappearing.  The user should be allowed to set a non-existent {{path}} component, which causes the deployment scanner to find no files until the path is created.  The {{relative-to}} component, however, should be validated as that is a model integrity check.
","27/Jan/16 3:19 PM;brian.stansberry;Good point. The scanner can WARN (once) in these kinds of situations, but it shouldn't fail.",07/Apr/16 5:37 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1324772|https://bugzilla.redhat.com/show_bug.cgi?id=1324772] from NEW to ASSIGNED,,,,,,,,,,,,,,,,,,,,,,,,
Referrals 'throw' does not work correctly for ldap authentication to mgmt console with MS Active Directory,WFCORE-1332,12601300,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,istudens,olukas,brian.stansberry,26/Jan/16 9:54 AM,22/Sep/16 8:08 AM,29/Nov/16 3:52 PM,,2.0.7.Final,,,,,,,,Domain Management,Security,,,,0,,,,,,"In case when crossRef object to different domain is configured on MS Active Directory for handling referrals and JBoss EAP 7 uses ldap authentication to mgmt console with configured referrals 'throw' then authentication fails for referral users. It is inconsistent with behavior of EAP with another LDAP providers (e.g. Red Hat Directory Server). In correct behavior authentication should pass.

It seems it is caused by thrown LdapReferralException search method of org.jboss.as.domain.management.security.LdapUserSearcherFactory.LdapUserSearcherImpl before it is handled by try-catch block. Stack trace of thrown LdapReferralException:

com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2975)
com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2888)
com.sun.jndi.ldap.LdapCtx.searchAux(LdapCtx.java:1846)
com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1769)
com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1786)
com.sun.jndi.toolkit.ctx.ComponentDirContext.p_search(ComponentDirContext.java:418)
com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.search(PartialCompositeDirContext.java:396)
com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.search(PartialCompositeDirContext.java:378)
javax.naming.directory.InitialDirContext.search(InitialDirContext.java:286)
javax.naming.directory.InitialDirContext.search(InitialDirContext.java:286)
org.jboss.as.domain.management.security.LdapUserSearcherFactory$LdapUserSearcherImpl.search(LdapUserSearcherFactory.java:125)
org.jboss.as.domain.management.security.LdapUserSearcherFactory$LdapUserSearcherImpl.search(LdapUserSearcherFactory.java:66)
org.jboss.as.domain.management.security.LdapCacheService$NoCacheCache.search(LdapCacheService.java:225)
org.jboss.as.domain.management.security.UserLdapCallbackHandler$LdapCallbackHandler.handle(UserLdapCallbackHandler.java:205)
org.jboss.as.domain.management.security.SecurityRealmService$1.handle(SecurityRealmService.java:178)
org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:162)
org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:141)
io.undertow.security.impl.BasicAuthenticationMechanism.authenticate(BasicAuthenticationMechanism.java:118)
org.jboss.as.domain.http.server.security.AuthenticationMechanismWrapper.authenticate(AuthenticationMechanismWrapper.java:52)
io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:233)
io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:250)
io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:219)
io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:121)
io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:96)
io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:89)
io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:50)
io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)
io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:793)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
java.lang.Thread.run(Thread.java:745)",,,,,,,,,,,,,,,,JBEAP-3029,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,+,+,?,,,,,,,,,,,,0.0,0.0,,1|i011vb:,9223372036854775807,,,,,,,,olukas,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI input redirection regression,WFCORE-1331,12601123,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,25/Jan/16 1:50 PM,25/Jan/16 6:22 PM,29/Nov/16 3:52 PM,25/Jan/16 6:22 PM,2.0.7.Final,,,,,,2.0.8.Final,,CLI,,,,,0,,,,,,The original issue WFCORE-877 was fixed but later re-introduced with the fix for WFCORE-1218.,,,,,,,,,,,,,,,,JBEAP-2890,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1386,,,,,,0.0,0.0,,1|i010sv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deployment error after reboot [WFLYSRV0137],WFCORE-1330,12600961,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,ehugonnet,wildflyer,wildflyer,25/Jan/16 4:54 AM,16/May/16 10:07 AM,29/Nov/16 3:52 PM,,1.0.2.Final,,,,,,,,Domain Management,,,,,2,,,,,,"I have a working configuration on wildfly 9.0.2 final with several web applications (JavaEE).

After a couple of days, I deployed another war file via jboss CLI. This application worked correctly and no deployment error occurred.
But if I restart the server now, I get following error message:
10:36:01,893 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""MM-Controller-0.1.0-SNAPSHOT.war"")]) - failure description: ""WFLYSRV0137: No deployment content with hash 966847a6f5f5bf8c3470f07ea9e65b7bbcdcd7b7 is available in the deployment content repository for deployment 'MM-Controller-0.1.0-SNAPSHOT.war'. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuration file and restart.""
10:36:01,990 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.

I reproduced this at least 30 times - even with different jars. I always get this error. The server works fine as long as I don't reboot.
The only way to fix the configuration is to manually remove the deployments from the standalone.xml.
But this is not an option for me as I want to have the wildfly running as production server where I have several automatic deployments every day.","Ubuntu 14.04 LTS 64bit, jre-1.8.0_65
Several deployed (JavaEE) web applications including non XA datasources that connect to a MySQL instance.",,,,,,,,,,,,,,,,,,,WFLY-5715,WFCORE-1108,,,,,,27/Jan/16 12:16 PM;wildflyer;server.log;https://issues.jboss.org/secure/attachment/12397245/server.log,27/Jan/16 12:14 PM;wildflyer;server.log;https://issues.jboss.org/secure/attachment/12397244/server.log,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/956219#956219,,,,,,,,,2.0,11.0,,1|i00zu7:,9223372036854775807,,,,,,,,,,,"25/Jan/16 11:40 AM;brian.stansberry;[~ehugonnet] Can you have a look?

[~wildflyer] Do you see this problem with WildFly 10.0.0.CR5?","25/Jan/16 12:47 PM;ehugonnet;[~wildflyer]
Could you provide :
 * the command you use to deploy your application
 * the log files
 * do the failing applications depend on the datasource ?
 * how did you created your datasource ?
Thanks","26/Jan/16 3:14 AM;wildflyer;I deploy the apps and datasources using jboss api at the moment. But the problem occurs with manula deployment as well. Strange thing is, that this doesn't happen on my local machine. It is reproducable on the remote Ubuntu server only.
Code to add a datasource:
{{
            ModelNode request = new ModelNode();
            request.get(ClientConstants.OP).set(ClientConstants.ADD);
            request.get(ClientConstants.OP_ADDR).add(ClientConstants.SUBSYSTEM, WildflyConstants.SUBSYSTEM_DATASOURCES);
            request.get(ClientConstants.OP_ADDR).add(WildflyConstants.DATASOURCE, datasourceName);
            request.get(""jndi-name"").set(WebServerUtils.jndiName(datasourceName));
            request.get(""connection-url"").set(dbUrl);
            request.get(""driver-class"").set(driverOpt.get().get(WildflyConstants.DRIVER_CLASS_NAME).asString());
            request.get(WildflyConstants.DRIVER_NAME).set(driverOpt.get().get(WildflyConstants.DRIVER_NAME));
            request.get(""pool-name"").set(""pool_NewDatasource"");
            request.get(""user-name"").set(dbuser);
            request.get(""password"").set(""myPW"");
            return execute().apply(conn).apply(request);
}}

The deployment of the war looks as follows:
{{
// cli equivalent: /deployment=My_war_file.war:add(enabled=true,content=[url=file:///path/to/target/My_war_file.war])""
            ModelNode request = new ModelNode();
            request.get(ClientConstants.OP).set(ClientConstants.ADD);
            request.get(ClientConstants.OP_ADDR).add(ClientConstants.DEPLOYMENT, deploymentName);
            request.get(WildflyConstants.ENABLED).set(true);
            request.get(ClientConstants.CONTENT).add(WildflyConstants.URL, file.toUri().toString());
            return execute().apply(conn).apply(request);
}}
- All applications ever deployed to the server fail when restarting
- Each application depends on a datasource

The server startup log:
prod@aserver:/opt/wildfly-9.0.2.Final/bin$ ./standalone.sh 
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /opt/wildfly-9.0.2.Final

  JAVA: /usr/lib/jvm/jre1.8.0_65/bin/java

  JAVA_OPTS:  -server -XX:+UseCompressedOops  -server -XX:+UseCompressedOops -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true

=========================================================================

Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256m; support was removed in 8.0
10:35:48,485 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.3.Final
10:35:50,605 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
10:35:51,234 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0049: WildFly Full 9.0.2.Final (WildFly Core 1.0.2.Final) starting
10:36:01,572 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 18) WFLYCTL0028: Attribute 'job-repository-type' in the resource at address '/subsystem=batch' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
10:36:01,573 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 8) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
10:36:01,800 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 8) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=mmcontrollerdatasource' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
10:36:01,801 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 8) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=tobidatasource' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
10:36:01,893 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""MM-Controller-0.1.0-SNAPSHOT.war"")]) - failure description: ""WFLYSRV0137: No deployment content with hash 966847a6f5f5bf8c3470f07ea9e65b7bbcdcd7b7 is available in the deployment content repository for deployment 'MM-Controller-0.1.0-SNAPSHOT.war'. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuration file and restart.""
10:36:01,990 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
10:36:02,071 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.
10:36:02,256 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Full 9.0.2.Final (WildFly Core 1.0.2.Final) stopped in 11ms

I'll try to reproduce with 10.0.0.CR5 and let you know.

Thanks for your help!","26/Jan/16 4:14 AM;ehugonnet;Sorry I meant the logs when you are deploying the applications and before rebooting.
Could you attach the files instead of copying the content in the text area please ?
How is the driver installed ?",26/Jan/16 4:37 AM;wildflyer;The driver is added via jboss-cli using the 'deploy' command.,"26/Jan/16 5:44 AM;wildflyer;I have the feeling that this problem is related to a wrong user right setup on my ubuntu machine.
It seems that widfly had problems writing the standalone.xml and the war files properly.

I may have deployed the applications as a different user than the user with which I have started the server. Can you confirm this behaviour?

At the end it would mean that I have to start, manage and deploy applications via the same user. Am I right?","26/Jan/16 6:17 AM;ehugonnet;Hum, the war should be read and written by the user that is running WildFly. Now it all depends on what rights does this WildFly user have. He should be able to write in the WildFly directories since you are in /opt I'm wondering what you have set. 
","27/Jan/16 12:13 PM;wildflyer;I could successfully nailed the problem down to a server log. Please see attached log file.

I deployed two applications. Both have their own datasource. Both apps worked fine.
After deployment I requested a server shutdown via jboss-cli. -> worked fine
Then, I started the server again. The first log entries where ""Removing content..."" and then the server couldn't finish booting because of missing exactly these deployments.",27/Jan/16 12:17 PM;wildflyer;Sorry for the doubled upload - I had problems with the JIRA upload...,"28/Jan/16 6:29 AM;ehugonnet;It looks like the driver is in the  MM-Controller-0.1.0-SNAPSHOT.war. Could you confirm that ?
Is there a way for you to share your installation configuration as i can't seem to be able to reproduce your case ?
Could you also put all the logs on the restart, just to check if there is any clue why the contents are removed ?",29/Jan/16 12:49 PM;ehugonnet;[~wildflyer] Did you run WildFly with different OS users (maybe in the same group) ?,,,,,,,,,,,,,,,,
Undertow 1.3.15.Final,WFCORE-1327,12600909,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,,swd847,swd847,24/Jan/16 7:33 PM,24/Jan/16 8:18 PM,29/Nov/16 3:52 PM,24/Jan/16 8:18 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|i00ziv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change org.slf4j.jcl-over-slf4j from public to private,WFCORE-1323,12600859,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,treblereel,jamezp,jamezp,22/Jan/16 1:33 PM,03/Feb/16 1:32 PM,29/Nov/16 3:52 PM,03/Feb/16 1:32 PM,,,,,,,2.1.0.CR1,,Modules,,,,,0,,,,,,Currently this module is used as an alias for {{org.apache.commons.logging}}. A change to the {{org.apache.commons.logging}} will be required to make it a delegate module rather than an alias.,,,,,,,,,,,,,,,,JBEAP-2980,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,,,,,0.0,0.0,,1|i00z8v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dead local store - ManagementHttpServer,WFCORE-1320,12600815,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,rsvoboda,rsvoboda,22/Jan/16 8:51 AM,18/Mar/16 8:45 PM,29/Nov/16 3:52 PM,07/Mar/16 2:43 PM,2.1.0.CR1,,,,,,2.1.0.Final,,Domain Management,,,,,0,,,,,,"https://github.com/wildfly/wildfly-core/blame/master/domain-http/interface/src/main/java/org/jboss/as/domain/http/server/ManagementHttpServer.java#L129

Lines 130 - 136 seem not need, originally came from https://github.com/wildfly/wildfly-core/commit/c5cab49048c1509f7773fc88f86236e0e36dec83
But probably forgotten after some refactoring",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1443,,,,,,0.0,1.0,,1|i00yz3:,9223372036854775807,,,,,,,,,,,02/Mar/16 3:14 PM;brian.stansberry;Tomaz has cleaned this up in his PR for WFCORE-1418.,,,,,,,,,,,,,,,,,,,,,,,,,,
patch apply command not working as expected in non-interactive mode in domain mode ,WFCORE-1316,12600405,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,elguardian,elguardian,elguardian,21/Jan/16 6:02 AM,22/Sep/16 9:44 PM,29/Nov/16 3:52 PM,26/Jan/16 7:23 AM,,,,,,,2.0.8.Final,,CLI,,,,,0,,,,,,"CLI patch apply command is misleading when the --host option is used.  In non-interactive mode applies the patch to the local installation.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1290290,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1375,,,,,,0.0,7.0,,1|i00wuv:,9223372036854775807,,,,,,,,,,,21/Jan/16 6:02 AM;elguardian;It the host option is specified it shouldn't allow the command to be executed unless the CLI is online an running in domain mode.,25/Jan/16 4:37 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1290290|https://bugzilla.redhat.com/show_bug.cgi?id=1290290] from ASSIGNED to POST,26/Jan/16 7:23 AM;aloubyansky;Merged.,28/Mar/16 5:39 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1290290|https://bugzilla.redhat.com/show_bug.cgi?id=1290290] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1290290|https://bugzilla.redhat.com/show_bug.cgi?id=1290290] from MODIFIED to POST,22/Sep/16 9:34 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1290290|https://bugzilla.redhat.com/show_bug.cgi?id=1290290] from MODIFIED to ON_QA,22/Sep/16 9:44 PM;jira-bugzilla-migration;Vlado Pakan <vpakan@redhat.com> changed the Status of [bug 1290290|https://bugzilla.redhat.com/show_bug.cgi?id=1290290] from POST to MODIFIED,,,,,,,,,,,,,,,,,,,,
Double prompt when connecting to a new HC,WFCORE-1315,12600328,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Optional,Done,aloubyansky,brian.stansberry,brian.stansberry,20/Jan/16 11:23 AM,10/Nov/16 8:35 AM,29/Nov/16 3:52 PM,06/Apr/16 10:59 AM,2.0.8.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,CLI,,,,,0,,,,,,"I observed this with 0.66.3 in a kind of franken-build of EAP 7. The logical equivalent would be 2.0.8.Final once WFCORE-1277 is fixed.

{code}
[domain@localhost:9990 core-service=discovery-options] connect 127.0.0.1:29990
[disconnected core-service=discovery-options] [domain@127.0.0.1:29990 core-service=discovery-options] cd /
[domain@127.0.0.1:29990 /]
{code}

Before the first line I had killed the HC at localhost:9990, so then I wanted to connect to another HC. Got a double prompt.

Not a big deal, but I wanted to record it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1488,,,,,,0.0,0.0,,1|i00wdr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
User with slash or backslash char in LDAP name cannot log in through security-realm,WFCORE-1313,12600176,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Out of Date,gaol,hsvabek,hsvabek,20/Jan/16 3:30 AM,10/Nov/16 6:56 AM,29/Nov/16 3:52 PM,10/Nov/16 6:56 AM,,,,,,,3.0.0.Alpha13,,Security,,,,,0,,,,,,"According to LDAP specification [1], DN can contain slash char without escaping or escaped backslash, etc.

I am not able to log in to management console with username ""Slash/Char"" or ""Back\Slash"". But I would be able to log in there. 

I can see this in Wireshark
*Slash/Char*
{code}
LDAPMessage bindRequest(1) """"uid=Slash/Char"",ou=People,o=LdapRealmSpecialNameManualTest7d339efa,o=primary,dc=jboss,dc=org"" simple
LDAPMessage bindResponse(1) invalidDNSyntax (Incorrect DN given : ""uid=Slash/Char"",ou=People,o=LdapRealmSpecialNameManualTest7d339efa,o=primary,dc=jboss,dc=org (0x22 0x75 0x69 0x64 0x3D 0x53 0x6C 0x61 0x73 0x68 0x2F 0x43 0x68 0x61 0x72 0x2
{code}
You can see there quotation marks around *uid=Slash/Char*.

*Back\Slash*
{code}
LDAPMessage bindRequest(1) ""uid=Back\\\Slash,ou=People,o=LdapRealmSpecialNameManualTest7d339efa,o=primary,dc=jboss,dc=org"" simple
LDAPMessage bindResponse(1) invalidDNSyntax (Incorrect DN given : uid=Back\\\Slash,ou=People,o=LdapRealmSpecialNameManualTest7d339efa,o=primary,dc=jboss,dc=org (0x75 0x69 0x64 0x3D 0x42 0x61 0x63 0x6B 0x5C 0x5C 0x5C 0x53 0x6C 0x61 0x73 0x6
{code}
You can see there three backslash chars.


In my opinion problem can be somewhere around this
{code}
javax.naming.NameImpl.stringifyComp(String comp)
{code}


[1] https://tools.ietf.org/html/rfc2253#section-3",,,,,,,,,,,,,,,,JBEAP-2903,,,,,,,,,,,20/Jan/16 5:13 AM;hsvabek;users.ldif;https://issues.jboss.org/secure/attachment/12396863/users.ldif,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,2.0,,1|i00vgn:,9223372036854775807,,,,"1. Start LDAP server which uses attached users.ldif
2. Add these to EAP configuration file
* Security realm - ""ldap-realm""
* Outbound-connection - ldap - ""ldap-connection""

{code}
<management>

	....

	<security-realms>

	....

	    <security-realm name=""ldap-realm"">
		<authentication>
		    <ldap connection=""ldap-connection"" base-dn=""ou=People,o=LdapRealmSpecialNameManualTest7d339efa,o=primary,dc=jboss,dc=org"">
			<advanced-filter filter=""(uid={0})""/>
		    </ldap>
		</authentication>
	    </security-realm>
	</security-realms>
	<outbound-connections>
	    <ldap name=""ldap-connection"" url=""ldap://localhost:10389"" search-dn=""uid=admin,ou=system"" search-credential=""secret""/>
	</outbound-connections>

	....

</management>  
{code}

Change ManagementRealm in  <management-interfaces>
{code}
<http-interface security-realm=""ManagementRealm"" http-upgrade-enabled=""true"">
{code}
to our ldap-realm
{code}
<http-interface security-realm=""ldap-realm"" http-upgrade-enabled=""true"">
{code}

3. Try to log in to management localhost:9990
* jduke with Password1 -> OK
* Slash/Char with Password1 -> NOK (but it would be OK)
* Back\Slash with Password1 -> NOK (but it would be OK)",,,,,,,20/Jan/16 3:44 AM;dlofthouse;Security realm issues need to be raised under WFCORE - please move this issue over.,"10/Nov/16 6:56 AM;dlofthouse;Resolving out of date as we are migrating to Elytron, it should be re-opened if the issue can be reproduced once migration is complete.",,,,,,,,,,,,,,,,,,,,,,,,,
WFCORE-893 Fix breaks mixed-domain,WFCORE-1311,12600156,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,19/Jan/16 5:40 PM,27/Jan/16 2:40 PM,29/Nov/16 3:52 PM,27/Jan/16 2:40 PM,2.0.7.Final,,,,,,2.0.8.Final,,Domain Management,Remoting,,,,0,,,,,,"The WFCORE-893 fix breaks mixed-domain use cases by adding subsystem=io if its not present. That's ok for standalone, but in a domain it means a subsystem not understood by legacy slaves will get added into profiles used by those slaves. Which will fail.

I've considered doing some sort of transformer trick to discard this subsystem if its config is default, but I suspect it's better to just not do the WFCORE-893 thing on the DC.

Discarding might be ok if we just do a resource transformer discard but reject all ops thereafter. Idea being that if the io config is default, matching what legacy slaves did, then we let the slave boot. Then any subsequent op must be either pointless or moving away from default, and must be rejected.

But still, just not doing the WFCORE-893 thing on the DC is probably better. Or at least simpler right now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1388,,,,,,0.0,0.0,,1|i00vc7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Applying patch - ""no space available"" not specific enough",WFCORE-1309,12600040,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,19/Jan/16 8:43 AM,03/Feb/16 3:13 AM,29/Nov/16 3:52 PM,03/Feb/16 3:13 AM,2.0.7.Final,,,,,,,,Patching ,,,,,0,,,,,,"Copy of https://bugzilla.redhat.com/show_bug.cgi?id=1299160:

Patch apply can fail if there is not enough free space, however the message does not indicate what device does not have any free space.  Users assume there is not enough free space on the drive where the JBoss install they are applying the patch to, however it appears this may or may not be the case.

Patch apply uses tmp space and if there is not enough tmp space it will fail with this message as well.  The message should be more explicit as to where there is no space so that the user knows which drive to check.

[disconnected /] patch apply /path/to/jboss-eap-6.2.4-patch.zip
java.io.IOException: No space left on device",,,,,,,,,,,,,,,,JBEAP-2881,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1383,,,,,,0.0,0.0,,1|i00umn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Description of suspend and shutdown ops does not include a 'unit',WFCORE-1308,12599924,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,brian.stansberry,brian.stansberry,18/Jan/16 4:13 PM,05/Apr/16 10:22 AM,29/Nov/16 3:52 PM,05/Apr/16 10:22 AM,,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"See 'unit' in https://docs.jboss.org/author/display/WFLY10/Admin+Guide#AdminGuide-ArbitraryDescriptors

It's missing from the description of the 'timeout' param for the root resource 'suspend' and 'shutdown' operations. It's in the text (as seconds) but not in the separate metadata.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1389,,,,,,0.0,0.0,,1|i00txj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jboss-cli returns success when WFLYCTL0009: Failed to store configuration occurred,WFCORE-1307,12599757,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,bmaxwell,bmaxwell,16/Jan/16 9:02 PM,25/Nov/16 7:58 AM,29/Nov/16 3:52 PM,,2.0.7.Final,,,,,,3.0.0.CR1,,Domain Management,,,,,1,,,,,,"If the server is started, and a cli call is made that fails to persist to the standalone.xml returns success even though it failed. 

Start the server.
Simple way to reproduce is to change the permissions on the configuration directory then run some cli commands such as shown below:

{code}
$ ./bin/jboss-cli.sh -c
[standalone@localhost:9990 /] /system-property=foo1:add(value=bar1)
{""outcome"" => ""success""}
[standalone@localhost:9999 /] /subsystem=ejb3:write-attribute(name=enable-statistics,value=true)
{""outcome"" => ""success""}
{code}

{code}
19:53:17,823 ERROR [stderr] (management-handler-thread - 1) java.nio.file.AccessDeniedException: /tmp/wildfly-10.0.0.CR5/standalone/configuration/standalone.xml.tmp
19:53:17,824 ERROR [stderr] (management-handler-thread - 1) 	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:84)
19:53:17,824 ERROR [stderr] (management-handler-thread - 1) 	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
19:53:17,824 ERROR [stderr] (management-handler-thread - 1) 	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
19:53:17,824 ERROR [stderr] (management-handler-thread - 1) 	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
19:53:17,825 ERROR [stderr] (management-handler-thread - 1) 	at java.nio.file.Files.newByteChannel(Files.java:361)
19:53:17,825 ERROR [stderr] (management-handler-thread - 1) 	at java.nio.file.Files.createFile(Files.java:632)
19:53:17,825 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.persistence.FilePersistenceUtils.createTempFileWithAttributes(FilePersistenceUtils.java:125)
19:53:17,825 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.persistence.FilePersistenceUtils.writeToTempFile(FilePersistenceUtils.java:104)
19:53:17,826 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.persistence.ConfigurationFilePersistenceResource.doCommit(ConfigurationFilePersistenceResource.java:55)
19:53:17,826 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.commit(AbstractFilePersistenceResource.java:58)
19:53:17,826 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.ModelControllerImpl$4.commit(ModelControllerImpl.java:781)
19:53:17,826 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:743)
19:53:17,827 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
19:53:17,827 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
19:53:17,827 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
19:53:17,827 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
19:53:17,827 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
19:53:17,828 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:208)
19:53:17,828 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:130)
19:53:17,828 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:152)
19:53:17,828 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:148)
19:53:17,829 ERROR [stderr] (management-handler-thread - 1) 	at java.security.AccessController.doPrivileged(Native Method)
19:53:17,829 ERROR [stderr] (management-handler-thread - 1) 	at javax.security.auth.Subject.doAs(Subject.java:422)
19:53:17,829 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
19:53:17,829 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:148)
19:53:17,830 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
19:53:17,830 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
19:53:17,830 ERROR [stderr] (management-handler-thread - 1) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
19:53:17,830 ERROR [stderr] (management-handler-thread - 1) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
19:53:17,831 ERROR [stderr] (management-handler-thread - 1) 	at java.lang.Thread.run(Thread.java:745)
19:53:17,831 ERROR [stderr] (management-handler-thread - 1) 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
19:53:17,831 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0009: Failed to store configuration to standalone.xml: java.nio.file.AccessDeniedException: /tmp/wildfly-10.0.0.CR5/standalone/configuration/standalone.xml.tmp
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:84)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:244)
	at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
	at java.nio.file.Files.deleteIfExists(Files.java:1165)
	at java.nio.file.Files.copy(Files.java:3004)
	at org.jboss.as.controller.persistence.FilePersistenceUtils.writeToTempFile(FilePersistenceUtils.java:109)
	at org.jboss.as.controller.persistence.ConfigurationFilePersistenceResource.doCommit(ConfigurationFilePersistenceResource.java:55)
	at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.commit(AbstractFilePersistenceResource.java:58)
	at org.jboss.as.controller.ModelControllerImpl$4.commit(ModelControllerImpl.java:781)
	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:743)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:208)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:130)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:152)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:148)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:148)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1299177,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i00sxb:,9223372036854775807,,,,,,,,,,,18/Jan/16 3:13 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1299177|https://bugzilla.redhat.com/show_bug.cgi?id=1299177] from NEW to ASSIGNED,25/Nov/16 7:58 AM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1299177|https://bugzilla.redhat.com/show_bug.cgi?id=1299177] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,,
SlaveReconnectTestCase fails on slow systems,WFCORE-1306,12599835,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dpospisil,mkopecky,mkopecky,18/Jan/16 7:39 AM,18/Mar/16 4:00 PM,29/Nov/16 3:52 PM,18/Mar/16 4:00 PM,2.0.6.Final,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,"*Description of problem:*
SlaveReconnectTestCase from wildfly-core fails intermittently with IBM JDK:
* org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase#test01_OrderedExtensionsAndDeployments
* org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase#test02_DeploymentOverlays

*How reproducible:*
* 10% if you run single test from TS on IBM JDK
* always if you run all tests from testsuite on IBM JDK

*Steps to Reproduce:*
# mvn install -Dmaven.repo.local=$MAVEN_REPO_LOCAL -fae -Dnode0=$MYTESTIP_1 -Dmcast=$MCAST_ADDR -DfailIfNoTests=false -Dts.domain -Dtest=SlaveReconnectTestCase

*test01_OrderedExtensionsAndDeployments results:*
{noformat}
Stacktrace:
org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.
	at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)
	at org.jboss.as.test.integration.domain.slavereconnect.DeploymentScenario.undeploy(DeploymentScenario.java:261)
	at org.jboss.as.test.integration.domain.slavereconnect.DeploymentScenario.tearDownDomain(DeploymentScenario.java:123)
	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.testReconnect(SlaveReconnectTestCase.java:156)
	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.test01_OrderedExtensionsAndDeployments(SlaveReconnectTestCase.java:93)


Standard Output
INFO  [org.xnio] XNIO version 3.3.4.Final-redhat-1
INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.3.4.Final-redhat-1
INFO  [org.jboss.remoting] JBoss Remoting version 4.0.18.Final-redhat-1
&amp#27;[0m06:48:48,668 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
&amp#27;[0m&amp#27;[0m06:48:49,375 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process 'Host Controller'
&amp#27;[0m[Host Controller] &amp#27;[0m06:48:54,053 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:54,686 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:54,927 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:57,111 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:57,126 INFO  [org.xnio] (MSC service thread 1-4) XNIO version 3.3.4.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:57,158 INFO  [org.xnio.nio] (MSC service thread 1-4) XNIO NIO Implementation Version 3.3.4.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:57,354 INFO  [org.jboss.remoting] (MSC service thread 1-4) JBoss Remoting version 4.0.18.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:48:57,471 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) WFLYRMT0001: Listening on 10.16.95.146:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:48:57,558 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-3) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:49:00,017 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-one&amp#27;[0m
&amp#27;[0m06:49:00,168 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:main-one'
&amp#27;[0m[Server:main-one] 06:49:06,140 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:main-one] 06:49:07,555 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:main-one] 06:49:08,037 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:main-one] 06:49:08,358 INFO  [org.xnio] (MSC service thread 1-8) XNIO version 3.3.4.Final-redhat-1
[Server:main-one] 06:49:08,398 INFO  [org.xnio.nio] (MSC service thread 1-8) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:main-one] 06:49:08,492 INFO  [org.jboss.remoting] (MSC service thread 1-8) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:11,745 INFO  [org.jboss.as.host.controller] (Remoting ""master:MANAGEMENT"" task-3) WFLYHC0021: Server [Server:main-one] connected using connection [Channel ID 32521e75 (inbound) of Remoting connection 2868ecda to /10.16.95.146:54380]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:11,876 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:11,878 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.95.146:9990&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:11,880 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" (Host Controller) started in 21516ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:11,895 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-one&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
[Server:main-one] 06:49:13,162 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 11) WFLYIO001: Worker 'default' has auto-configured to 8 core threads with 64 task threads based on your 4 available processors
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting
[Server:main-one] 06:49:14,145 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" started in 13171ms - Started 49 of 65 services (22 services are lazy, passive or on-demand)
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 28034 ms
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 28294 ms
&amp#27;[0m06:49:19,902 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
&amp#27;[0m&amp#27;[0m06:49:21,161 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process 'Host Controller'
&amp#27;[0m[Host Controller] &amp#27;[0m06:49:25,502 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:25,956 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:26,154 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:28,070 INFO  [org.xnio] (MSC service thread 1-6) XNIO version 3.3.4.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:28,078 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (19990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:28,128 INFO  [org.xnio.nio] (MSC service thread 1-6) XNIO NIO Implementation Version 3.3.4.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:28,292 INFO  [org.jboss.remoting] (MSC service thread 1-6) JBoss Remoting version 4.0.18.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:28,418 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) WFLYRMT0001: Listening on 10.16.95.146:19999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:32,479 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 12) WFLYHC0019: Registered remote slave host ""slave"", WildFly 2.0.6.Final-redhat-SNAPSHOT ""Kenny""&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:32,485 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0148: Connected to master host controller at remote://10.16.95.146:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:32,645 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-three&amp#27;[0m
&amp#27;[0m06:49:32,769 INFO  [org.jboss.as.process.Server:main-three.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:main-three'
&amp#27;[0m[Server:main-three] 06:49:39,023 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:main-three] 06:49:40,512 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:main-three] 06:49:41,031 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:main-three] 06:49:41,410 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1
[Server:main-three] 06:49:41,460 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:main-three] 06:49:41,618 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:44,879 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-6) WFLYHC0021: Server [Server:main-three] connected using connection [Channel ID 67c682e1 (inbound) of Remoting connection a80dd256 to /10.16.95.146:45011]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:44,942 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server other-two&amp#27;[0m
&amp#27;[0m06:49:45,011 INFO  [org.jboss.as.process.Server:other-two.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:other-two'
&amp#27;[0m[Host Controller] &amp#27;[0m&amp#27;[0m06:49:45,011 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-three&amp#27;[0m
[Server:main-three] 06:49:46,080 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker 'default' has auto-configured to 8 core threads with 64 task threads based on your 4 available processors
[Server:main-three] 06:49:47,688 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" started in 14325ms - Started 50 of 66 services (23 services are lazy, passive or on-demand)
[Server:other-two] 06:49:52,242 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:other-two] 06:49:53,954 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:other-two] 06:49:54,394 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:other-two] 06:49:54,872 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1
[Server:other-two] 06:49:54,909 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:other-two] 06:49:55,016 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:57,542 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-12) WFLYHC0021: Server [Server:other-two] connected using connection [Channel ID 4265a37a (inbound) of Remoting connection f85d1a6d to /10.16.95.146:60116]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:57,626 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server other-two&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:57,634 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:19990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:57,645 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:49:57,646 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" (Host Controller) started in 35462ms - Started 48 of 49 services (13 services are lazy, passive or on-demand)&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
[Server:other-two] 06:49:58,512 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker 'default' has auto-configured to 8 core threads with 64 task threads based on your 4 available processors
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting
[Server:other-two] 06:49:59,648 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" started in 13735ms - Started 50 of 66 services (23 services are lazy, passive or on-demand)
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 44891 ms
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 45148 ms
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:03,186 INFO  [org.jboss.as.host.controller] (management-handler-thread - 1) WFLYHC0023: Starting server server-unaffected&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:03,189 WARN  [org.jboss.as.host.controller] (management-handler-thread - 1) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
&amp#27;[0m06:50:03,314 INFO  [org.jboss.as.process.Server:server-unaffected.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:server-unaffected'
&amp#27;[0m[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m06:50:03,377 WARN  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Server:server-unaffected] 06:50:09,434 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:server-unaffected] 06:50:10,574 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:server-unaffected] 06:50:11,215 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:server-unaffected] 06:50:11,575 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1
[Server:server-unaffected] 06:50:11,624 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:server-unaffected] 06:50:11,738 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:15,128 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-3) WFLYHC0021: Server [Server:server-unaffected] connected using connection [Channel ID 7b99b49d (inbound) of Remoting connection 24f20b4a to /10.16.95.146:54148]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:15,224 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server server-unaffected&amp#27;[0m
[Server:server-unaffected] 06:50:17,179 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" started in 12876ms - Started 41 of 57 services (21 services are lazy, passive or on-demand)
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:19,297 INFO  [org.jboss.as.host.controller] (management-handler-thread - 3) WFLYHC0023: Starting server server-affected&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:19,306 WARN  [org.jboss.as.host.controller] (management-handler-thread - 3) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
&amp#27;[0m06:50:19,409 INFO  [org.jboss.as.process.Server:server-affected.status] (ProcessController-threads - 3) WFLYPC0018: Starting process 'Server:server-affected'
&amp#27;[0m[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m06:50:19,466 WARN  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Server:server-affected] 06:50:24,637 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:server-affected] 06:50:25,812 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:server-affected] 06:50:26,126 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:server-affected] 06:50:26,338 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.3.4.Final-redhat-1
[Server:server-affected] 06:50:26,366 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:server-affected] 06:50:26,450 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:28,660 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-4) WFLYHC0021: Server [Server:server-affected] connected using connection [Channel ID 0b33ef0a (inbound) of Remoting connection 41562de1 to /10.16.95.146:37200]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:28,858 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server server-affected&amp#27;[0m
[Server:server-affected] 06:50:30,584 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" started in 10442ms - Started 41 of 57 services (21 services are lazy, passive or on-demand)
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:32,698 INFO  [org.jboss.as.repository] (management-handler-thread - 6) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/09/d3f8807790439e696b8317b611b3dcd3b73357/content&amp#27;[0m
[Server:server-affected] 06:50:33,005 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of ""reconnect-slave-depone.jar"" (runtime-name: ""reconnect-slave-depone.jar"")
[Server:server-affected] 06:50:33,167 INFO  [stdout] (MSC service thread 1-5) ===> class org.jboss.as.test.integration.domain.slavereconnect.deployment.ServiceActivatorDeploymentOne setting property test.deployment.prop.one=one
[Server:server-affected] 06:50:33,236 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 4) WFLYSRV0010: Deployed ""reconnect-slave-depone.jar"" (runtime-name : ""reconnect-slave-depone.jar"")
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:33,347 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp#27;[0m
[Server:server-affected] 06:50:33,585 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of ""reconnect-slave-deptwo.jar"" (runtime-name: ""reconnect-slave-deptwo.jar"")
[Server:server-affected] 06:50:33,634 INFO  [stdout] (MSC service thread 1-1) ===> class org.jboss.as.test.integration.domain.slavereconnect.deployment.ServiceActivatorDeploymentTwo setting property test.deployment.prop.two=two
[Server:server-affected] 06:50:33,741 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 4) WFLYSRV0010: Deployed ""reconnect-slave-deptwo.jar"" (runtime-name : ""reconnect-slave-deptwo.jar"")
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:34,161 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 23) WFLYHC0024: Stopping server main-one&amp#27;[0m
&amp#27;[0m06:50:34,174 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 4) WFLYPC0019: Stopping process 'Server:main-one'
&amp#27;[0m[Server:main-one] 06:50:34,180 INFO  [org.jboss.as.server] (Thread-9) WFLYSRV0220: Server shutdown has been requested.
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:34,298 INFO  [org.jboss.as.host.controller] (Remoting ""master:MANAGEMENT"" task-11) WFLYHC0027: Unregistering server main-one&amp#27;[0m
[Server:main-one] 06:50:34,359 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" stopped in 129ms
&amp#27;[0m06:50:34,398 INFO  [org.jboss.as.process.Server:main-one.status] (reaper for Server:main-one) WFLYPC0011: Process 'Server:main-one' finished with an exit status of 0
&amp#27;[0m[Host Controller] &amp#27;[0m&amp#27;[0m06:50:34,402 INFO  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0027: Unregistering server main-one&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:34,455 WARN  [org.jboss.as.domain.controller] (MSC service thread 1-3) WFLYHC0030: Connection to remote host ""slave"" closed unexpectedly&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:34,521 WARN  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-8) WFLYHC0015: Connection to remote host-controller closed. Trying to reconnect.&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:34,545 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:34,566 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" stopped in 422ms&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:34,573 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:34,914 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:35,021 INFO  [org.jboss.as.remoting] (MSC service thread 1-4) WFLYRMT0001: Listening on 10.16.95.146:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:35,558 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,112 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,114 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,115 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" (Host Controller) started in 1539ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,558 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/09/d3f8807790439e696b8317b611b3dcd3b73357/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,650 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/ab/7255f2406ac895cc3e9c8edadc609af88bf636/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,932 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:36,996 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/a2/f1854f72e5888fed7ab9b24794f221f37ac757/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:37,135 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:37,298 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" stopped in 55ms&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:37,307 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:37,622 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:37,692 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:37,705 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) WFLYRMT0001: Listening on 10.16.95.146:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:38,503 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-one&amp#27;[0m
&amp#27;[0m06:50:38,563 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 4) WFLYPC0018: Starting process 'Server:main-one'
&amp#27;[0m[Host Controller] &amp#27;[0m&amp#27;[0m06:50:39,654 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[31m06:50:39,751 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 15) WFLYCTL0013: Operation (""resolve-subsystems"") failed - address: ([]): java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at '/profile=*/subsystem=ordered-children'&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:215)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerSubsystemModel(ExtensionRegistry.java:702)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.test.integration.domain.extension.OrderedChildResourceExtension.initialize(OrderedChildResourceExtension.java:83)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.domain.controller.operations.ApplyExtensionsHandler.initializeExtension(ApplyExtensionsHandler.java:221)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.domain.controller.operations.ApplyExtensionsHandler.execute(ApplyExtensionsHandler.java:137)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:418)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService.access$1100(DomainModelControllerService.java:176)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.installSlaveExtensions(DomainModelControllerService.java:1237)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService.resolveSubsystems(RemoteDomainConnectionService.java:544)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService.access$1000(RemoteDomainConnectionService.java:131)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService$2.resolveSubsystemVersions(RemoteDomainConnectionService.java:508)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnection.resolveSubsystemVersions(RemoteDomainConnection.java:297)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnection$HostControllerConnectRequest$1.execute(RemoteDomainConnection.java:389)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.util.concurr[Host Controller] &amp#27;[0m&amp#27;[0m06:50:39,772 INFO  [org.jboss.as.protocol] (Remoting ""master:MANAGEMENT"" I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[Host Controller Service Threads - 42,5,Host Controller Service Threads]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[31m06:50:39,774 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 42) WFLYCTL0013: Operation (""read-master-domain-model"") failed - address: ([]): java.lang.IllegalStateException: java.lang.InterruptedException&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.executeBlocking(HostControllerRegistrationHandler.java:617)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processSubsystems(HostControllerRegistrationHandler.java:456)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$900(HostControllerRegistrationHandler.java:334)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$HostRegistrationStepHandler.execute(HostControllerRegistrationHandler.java:327)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:408)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService.access$900(DomainModelControllerService.java:176)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1230)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processRegistration(HostControllerRegistrationHandler.java:424)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$400(HostControllerRegistrationHandler.java:334)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$InitiateRegistrationHandler$1.execute(HostControllerRegistrationHandler.java:230)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.lang.Thread.run(Thread.java:785)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.threads.JBossThread.run(JBossThread.java:320)&amp#27;[0m
[Host Controller] &amp#27;[31mCaused by: java.lang.InterruptedException&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.lang.Object.wait(Native Method)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.lang.Object.wait(Object.java:172)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.executeBlocking(HostControllerRegistrationHandler.java:614)&amp#27;[0m
[Host Controller] &amp#27;[31m	... 20 more&amp#27;[0m
[Host Controller] &amp#27;[31m&amp#27;[0m
ent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)&amp#27;[0m
[Host Controller] &amp#27;[31m	at java.lang.Thread.run(Thread.java:785)&amp#27;[0m
[Host Controller] &amp#27;[31m	at org.jboss.threads.JBossThread.run(JBossThread.java:320)&amp#27;[0m
[Host Controller] &amp#27;[31m&amp#27;[0m
[Server:main-one] 06:50:43,912 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1
[Server:main-one] 06:50:44,982 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1
[Server:main-one] 06:50:45,418 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" starting
[Server:main-one] 06:50:45,668 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.3.4.Final-redhat-1
[Server:main-one] 06:50:45,729 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.3.4.Final-redhat-1
[Server:main-one] 06:50:45,880 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.18.Final-redhat-1
[Host Controller] &amp#27;[31m&amp#27;[0m&amp#27;[0m06:50:48,783 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp#27;[0m
[Host Controller] &amp#27;[31m&amp#27;[0m&amp#27;[0m06:50:49,461 INFO  [org.jboss.as.host.controller] (Remoting ""master:MANAGEMENT"" task-16) WFLYHC0021: Server [Server:main-one] connected using connection [Channel ID 65fce631 (inbound) of Remoting connection 33bba145 to /10.16.95.146:43301]&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m06:50:49,862 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m06:50:49,870 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m06:50:49,877 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m06:50:49,884 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring <permgen> for jvm 'SUN' type jvm: null&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[0m06:50:50,020 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 17) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/slave/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,030 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0148: Connected to master host controller at remote://10.16.95.146:9999&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,027 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 42) WFLYHC0019: Registered remote slave host ""slave"", WildFly 2.0.6.Final-redhat-SNAPSHOT ""Kenny""&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,075 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-one&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,081 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,091 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.95.146:9990&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:50,093 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT ""Kenny"" (Host Controller) started in 12771ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp#27;[0m
[Server:main-one] 06:50:51,002 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 13) WFLYIO001: Worker 'default' has auto-configured to 8 core threads with 64 task threads based on your 4 available processors
Failed operation:
{
    ""operation"" => ""read-resource"",
    ""address"" => [
        (""host"" => ""master""),
        (""server"" => ""main-one""),
        (""subsystem"" => ""ordered-children"")
    ],
    ""recursive"" => true
}
Response:
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => ""WFLYCTL0379: System boot is in process; execution of remote management operations is not currently available"",
    ""rolled-back"" => true
}
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:51,289 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m06:50:51,317 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 14) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/slave/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp#27;[0m
Failed operation:
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""remove"",
            ""address"" => [
                (""server-group"" => ""deployment-group-affected""),
                (""deployment"" => ""reconnect-slave-depfour.jar"")
            ]
        },
        {
            ""operation"" => ""remove"",
            ""address"" => [(""deployment"" => ""reconnect-slave-depfour.jar"")]
        }
    ]
}
Response:
{
    ""outcome"" => ""failed"",
    ""result"" => {
        ""step-1"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-2"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        }
    },
    ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {""deployment-group-affected"" => {""host"" => {""slave"" => {""server-affected"" => {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""reconnect-slave-depfour.jar\"")]' not found""}}}}}}}},
    ""rolled-back"" => true,
    ""server-groups"" => {""deployment-group-affected"" => {""host"" => {""slave"" => {""server-affected"" => {""response"" => {
        ""outcome"" => ""failed"",
        ""result"" => {""step-1"" => {
            ""outcome"" => ""failed"",
            ""failure-description"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""reconnect-slave-depfour.jar\"")]' not found"",
            ""rolled-back"" => true
        }},
        ""failure-description"" => {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""reconnect-slave-depfour.jar\"")]' not found""}},
        ""response-headers"" => {""process-state"" => ""reload-required""},
        ""rolled-back"" => true
    }}}}}}
}
{noformat}

*test02_DeploymentOverlays results:*
{noformat}
Stacktrace:
org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.
	at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)
	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.cloneProfile(SlaveReconnectTestCase.java:183)


Standard Output:
Failed operation:
{
    ""operation"" => ""clone"",
    ""address"" => [(""profile"" => ""minimal"")],
    ""to-profile"" => ""unaffacted""
}
Response:
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0212: Duplicate resource [(\""profile\"" => \""unaffacted\"")]""},
    ""rolled-back"" => true
}
{noformat}

*Expected results:*
No errors

*Additional info:*
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/",,,,,,,,,,,,,,,,JBEAP-2841,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,+,+,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1393,,,,,,0.0,4.0,,1|i00tef:,9223372036854775807,,,,,,7.0.0.GA,,,,,19/Jan/16 10:39 AM;dpospisil;Which JDK version are you using exactly? Thanks.,19/Jan/16 11:08 AM;mkopecky;[~dpospisil]: IBMJDK 1.8.0 build 20151023_01(SR2),27/Jan/16 3:45 PM;dpospisil;Reason of the failure is that after master is restarted the test does not wait for master servers to finish boot which may happen later that domain controller process is booted.,"27/Jan/16 3:53 PM;dpospisil;The issue is not IBM JDK specific, reproducible on other platforms as well.",,,,,,,,,,,,,,,,,,,,,,,
LoggingSubsystemRollbackTestCase fails intermittently,WFCORE-1305,12599808,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,jamezp,mkopecky,mkopecky,18/Jan/16 6:01 AM,02/Sep/16 8:13 PM,29/Nov/16 3:52 PM,02/Sep/16 8:13 PM,2.0.6.Final,,,,,,,,Test Suite,,,,,0,,,,,,"*Description of problem:*
LoggingSubsystemRollbackTestCase from wildfly-core fails intermittently.

*How reproducible:*
40% with IBM JDK

*Steps to Reproduce:*
# mvn install -Dmaven.repo.local=$MAVEN_REPO_LOCAL -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIP_1 -Dmcast=$MCAST_ADDR -DfailIfNoTests=false -Dts.domain -Dtest=LoggingSubsystemRollbackTestCase

*Stacktrace:*
{noformat}
com.sun.tools.attach.AttachNotSupportedException: target not found
	at ibm.tools.attach.J9AttachProvider.attachVirtualMachine(J9AttachProvider.java:60)
	at com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:231)
	at org.jboss.byteman.agent.install.Install.attach(Install.java:390)
	at org.jboss.byteman.agent.install.Install.install(Install.java:129)
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.loadAgent(BMUnitConfigState.java:516)
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.pushConfigurationState(BMUnitConfigState.java:669)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:73)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}

*Standard Output:*
{noformat}
byteman jar is /mnt/hudson_workspace/eap-7x-as-testsuite-test-core-rhel/19de6045/eap-local-maven-repository/org/jboss/byteman/byteman/2.2.1/byteman-2.2.1.jar
{noformat}

*Expected results:*
No errors

*Additional info:*
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-testsuite-test-core-rhel-reconnect/1/",,,,,,,,,,,,,,,,JBEAP-2834,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,+,,,,,,,,,,,,,0.0,0.0,,1|i00t8n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"WFLYCTL0013: Operation (""clean-obsolete-content"") failed .. StringIndexOutOfBoundsException when OS puts metadata files in content repo",WFCORE-1304,12599760,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,bmaxwell,bmaxwell,17/Jan/16 12:07 AM,23/Aug/16 4:29 AM,29/Nov/16 3:52 PM,22/Jan/16 7:45 PM,,,,,,,2.0.8.Final,,Domain Management,,,,,0,,,,,,"Mac OS can put .DS_Store files into the content repo directory.  This can also be reproduced on Linux by creating a file under the content dir and when clean-obsolete-content() runs it will log this error.  It seems it runs every 10 minutes.

{code}
22:59:48,289 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 1) WFLYDR0009: Content /Users/bradley/Desktop/wildfly-10.0.0.CR5/standalone/data/content/9b/.DS_Store is obsolete and will be removed 
22:59:48,290 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 1) WFLYCTL0013: Operation (""clean-obsolete-content"") failed - address: ([]): java.lang.StringIndexOutOfBoundsException: String index out of range: 11
  at java.lang.String.charAt(String.java:658)
  at org.jboss.as.repository.HashUtil.hexStringToByteArray(HashUtil.java:62)
  at org.jboss.as.repository.ContentReference.getHash(ContentReference.java:68)
  at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.removeContent(ContentRepository.java:365)
  at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.markAsObsolete(ContentRepository.java:427)
  at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.cleanObsoleteContent(ContentRepository.java:403)
  at org.jboss.as.server.operations.CleanObsoleteContentHandler.execute(CleanObsoleteContentHandler.java:76)
  at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
  at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
  at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
  at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
  at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
  at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:204)
  at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:659)
  at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:649)
  at org.jboss.as.server.deployment.ContentRepositoryCleaner.cleanObsoleteContent(ContentRepositoryCleaner.java:132)
  at org.jboss.as.server.deployment.ContentRepositoryCleaner$ContentRepositoryCleanerTask.run(ContentRepositoryCleaner.java:67)
  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
  at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
  at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
  at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
  at java.lang.Thread.run(Thread.java:745)
  at org.jboss.threads.JBossThread.run(JBossThread.java:320)

22:59:48,292 ERROR [org.jboss.as.server] (ServerService Thread Pool -- 1) WFLYSRV0216: Error cleaning obsolete content WFLYCTL0158: Operation handler failed: java.lang.StringIndexOutOfBoundsException: String index out of range: 11  
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1299189,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1365,,,,,,0.0,7.0,,1|i00sxz:,9223372036854775807,,,,,,,,,,,17/Jan/16 9:55 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from NEW to ASSIGNED,20/Jan/16 4:28 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from ASSIGNED to POST,28/Mar/16 5:50 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from MODIFIED to POST,05/Aug/16 1:52 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from POST to MODIFIED,05/Aug/16 1:52 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from MODIFIED to ON_QA,23/Aug/16 4:29 AM;jira-bugzilla-migration;Ivo Hradek <ihradek@redhat.com> changed the Status of [bug 1299189|https://bugzilla.redhat.com/show_bug.cgi?id=1299189] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
NPE in principal-to-group group searching,WFCORE-1303,12599642,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,dlofthouse,olukas,olukas,15/Jan/16 7:05 AM,18/Jan/16 12:38 AM,29/Nov/16 3:52 PM,18/Jan/16 12:38 AM,2.0.7.Final,,,,,,,,Domain Management,Security,,,,0,,,,,,"In case when ldap authorization with principal-to-group group searching is used in security realm and LDAP entry found by value of 'group-attribute' does not include attribute mentioned in 'group-name-attribute' then it causes authentication fail. It is caused by missing null check for groupNameAttr and hidden NPE thrown from [1].

[1] https://github.com/wildfly/wildfly-core/blob/bcc56983730d976ec77ede0d5901db6a00c31ab6/domain-management/src/main/java/org/jboss/as/domain/management/security/LdapGroupSearcherFactory.java#L301",,,,,,,,,,,,,,,,JBEAP-2812,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i00s87:,9223372036854775807,,,,"1) use following security realm:
{code:xml}
            <security-realm name=""ldap-security-realm"">
                <authentication>
                    <ldap connection=""ldap_connection"" base-dn=""dc=jboss,dc=org"" recursive=""true"">
                        <username-filter attribute=""uid""/>
                    </ldap>
                </authentication>
                <authorization>
                    <ldap connection=""ldap_connection"">
                        <group-search group-name=""SIMPLE"" iterative=""false"" group-dn-attribute=""dn"" group-name-attribute=""description"">
                            <principal-to-group group-attribute=""sn""/>
                        </group-search>
                    </ldap>
                </authorization>
            </security-realm>
...
        <outbound-connections>
            <ldap name=""ldap_connection"" url=""ldap://localhost:10389"" search-dn=""uid=admin,ou=system"" search-credential=""secret""/>
        </outbound-connections>
{code}

2) Use this security domain for RBAC access to management console:
{code:xml}
        <management-interfaces>
            <http-interface security-realm=""ldap-security-realm"" http-upgrade-enabled=""true"">
                <socket-binding http=""management-http""/>
            </http-interface>
        </management-interfaces>
        <access-control provider=""rbac"">
            <role-mapping>
                <role name=""SuperUser"">
                    <include>
                        <user name=""$local""/>
                        <group name=""JBossAdmin""/>
                    </include>
                </role>
            </role-mapping>
        </access-control>
{code}

3) Use ldap server with attached ldif

4) Try to access management console with jduke/Password - it will fail.

5) Uncomment line 'description: Monitor' from ldif and try to access management console again - it will be successful.",,,,,,,"18/Jan/16 12:38 AM;olukas;My fault, duplicate of WFCORE-1281. Closing this one.",,,,,,,,,,,,,,,,,,,,,,,,,,
Rename wildfly-launcher.jar to launcher.jar,WFCORE-1302,12599623,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ctomc,ctomc,ctomc,15/Jan/16 6:00 AM,20/Jan/16 12:02 PM,29/Nov/16 3:52 PM,20/Jan/16 12:02 PM,2.0.7.Final,,,,,,2.0.8.Final,,,,,,,0,,,,,,File {{jboss-eap-7.0/bin/wildfly-launcher.jar}} should use prefix {{jboss}} instead of {{wildfly}} because of branding and to be consistent with {{jboss-cli-client.jar}} and {{jboss-client.jar}},,,,,,,,,,,,,,,,JBEAP-2062,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1362,,,,,,0.0,1.0,,1|i00s3z:,9223372036854775807,,,,,,,,,,,15/Jan/16 6:49 AM;rsvoboda;Just for the record: wildfly-launcher.jar is going to be renamed to just launcher.jar without any prefixes,,,,,,,,,,,,,,,,,,,,,,,,,,
IO Subsystem improperly shuts down the worker,WFCORE-1299,12599551,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,dmlloyd,dmlloyd,14/Jan/16 1:05 PM,14/Jan/16 10:27 PM,29/Nov/16 3:52 PM,14/Jan/16 10:27 PM,,,,,,,2.0.7.Final,,,,,,,0,,,,,,"The stop operation of the I/O subsystem's worker service should be asynchronous, and should not complete until the worker is fully shut down.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,,,,,,,0.0,0.0,,1|i00ro7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RejectedExecutionException: XNIO007007 on WFLY 10 CR5 shutdown,WFCORE-1298,12599444,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ctomc,rsvoboda,rsvoboda,14/Jan/16 4:33 AM,14/Jan/16 10:27 PM,29/Nov/16 3:52 PM,14/Jan/16 10:27 PM,,,,,,,2.0.7.Final,,Domain Management,Remoting,Server,,,0,,,,,,"WFLY 10 CR5 logs Error message on shutdown (both standalone and domain mode). This happens regularly, platforms like Fedora 23, RHEL 6, RHEL 7. WFLY 10 CR5 does not have clean start & stop. 

*reproduce*
\# start WFLY 10 CR5
{noformat}
$ ./standalone.sh
...
10:30:46,536 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.CR5 (WildFly Core 2.0.5.Final) started in 3999ms - Started 267 of 569 services (386 services are lazy, passive or on-demand)
{noformat}

\# shutdown via CLI
{noformat}
$ ./jboss-cli.sh -c shutdown
{noformat}

\# check console where WFLY 10 CR5 was started
{noformat}
10:30:53,937 ERROR [org.jboss.remoting.resource] (MSC service thread 1-3) Close action for Connection handler for Remoting connection 4181b134 to /127.0.0.1:51703 failed to execute (resource may be left in an indeterminate state): java.util.concurrent.RejectedExecutionException: XNIO007007: Thread is terminating
	at org.xnio.nio.WorkerThread.execute(WorkerThread.java:588)
	at org.jboss.remoting3.remote.RemoteConnection$RemoteWriteListener.send(RemoteConnection.java:327)
	at org.jboss.remoting3.remote.RemoteConnection.send(RemoteConnection.java:142)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.sendCloseRequestBody(RemoteConnectionHandler.java:289)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.sendCloseRequestBody(RemoteConnectionHandler.java:278)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.sendCloseRequest(RemoteConnectionHandler.java:235)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.closeAction(RemoteConnectionHandler.java:413)
	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:372)
	at org.jboss.remoting3.ConnectionImpl.closeAction(ConnectionImpl.java:54)
	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:372)
	at org.jboss.remoting3.EndpointImpl.closeAction(EndpointImpl.java:225)
	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:372)
	at org.jboss.as.remoting.EndpointService.stop(EndpointService.java:98)
	at org.jboss.msc.service.ServiceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:2056)
	at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:2017)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}
{noformat}
10:30:53,936 ERROR [org.jboss.remoting.resource] (Remoting ""rs:MANAGEMENT"" task-8) Close action for Channel ID 1158edde (inbound) of Remoting connection 4181b134 to /127.0.0.1:51703 failed to execute (resource may be left in an indeterminate state): java.util.concurrent.RejectedExecutionException: XNIO007007: Thread is terminating
	at org.xnio.nio.WorkerThread.execute(WorkerThread.java:588)
	at org.jboss.remoting3.remote.RemoteConnection$RemoteWriteListener.send(RemoteConnection.java:327)
	at org.jboss.remoting3.remote.RemoteConnection.send(RemoteConnection.java:138)
	at org.jboss.remoting3.remote.RemoteConnectionChannel.closeReadsAndWrites(RemoteConnectionChannel.java:261)
	at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:534)
	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:372)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.closeAllChannels(RemoteConnectionHandler.java:437)
	at org.jboss.remoting3.remote.RemoteConnectionHandler.handleConnectionClose(RemoteConnectionHandler.java:114)
	at org.jboss.remoting3.remote.RemoteReadListener$1$1.run(RemoteReadListener.java:57)
	at org.jboss.remoting3.EndpointImpl$TrackingExecutor$1.run(EndpointImpl.java:717)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}",,,,,,,,,,,,,,,,,,,,,JBEAP-2751,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|i00r13:,9223372036854775807,,,,,,,,,,,"14/Jan/16 7:51 AM;dmlloyd;I am having a hard time duplicating this problem.  Can you give more information about your OS, JVM, and the hardware you are testing on?","14/Jan/16 7:58 AM;rsvoboda;cat /etc/redhat-release 
Fedora release 23 (Twenty Three)
 
java -version
java version ""1.8.0_40""
Java(TM) SE Runtime Environment (build 1.8.0_40-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25, mixed mode)

 free -h
              total        used        free      shared  buff/cache   available
Mem:            11G        3.3G        5.6G        795M        2.6G        7.3G

cat /proc/cpuinfo
...
model name	: Intel(R) Core(TM) i7-4600U CPU @ 2.10GHz


We can see this on RHEL 7, RHEL 6, Solaris, Windows","14/Jan/16 8:06 AM;rsvoboda;FYI: reload the server and you have ""XNIO007007: Thread is terminating"" error too 
","14/Jan/16 8:54 AM;pkremens;Using commands like:
{noformat}
[standalone@localhost:9990 /] :shutdown(timeout=10000)
{noformat}
or
{noformat}
[standalone@localhost:9990 /] :suspend
[standalone@localhost:9990 /] :shutdown(timeout=10000)
{noformat}
gives me the same error.","14/Jan/16 10:43 AM;dmlloyd;OK here's the problem.  The Remoting management endpoint (""RME"" for short) shutdown is proceeding correctly, however, the CLI is connecting via HTTP, which uses its own management XNIO worker, instead of the RME's internal worker.

So what happens is, shutdown is being initiated, and the RME (which is managing the CLI connection) is properly waiting for all of its connections to terminate.  However, since the CLI's underlying XNIO connection is using an XNIO worker other than the RME's, we have a problem: the XNIO worker that the CLI is using gets shut down with no regard for the RME or its connections, causing the shutdown to fail.

I have verified that this is the case by hacking in the following dependency to the RME:

{code:diff}
diff --git a/remoting/subsystem/src/main/java/org/jboss/as/remoting/RemotingServices.java b/remoting/subsystem/src/main/java/org/jboss/as/remoting/RemotingServices.java
index b11c0ed..20bfdbe 100644
--- a/remoting/subsystem/src/main/java/org/jboss/as/remoting/RemotingServices.java
+++ b/remoting/subsystem/src/main/java/org/jboss/as/remoting/RemotingServices.java
@@ -96,6 +96,7 @@ public class RemotingServices {
                                                          final String hostName, final EndpointService.EndpointType type, final OptionMap options) {
         ManagementEndpointService endpointService = new ManagementEndpointService(hostName, type, options);
         serviceTarget.addService(endpointName, endpointService)
+                .addDependency(ServiceName.JBOSS.append(""serverManagement"", ""controller"", ""management"", ""http""))
                 .setInitialMode(ACTIVE)
                 .install();
     }
{code}

This causes shutdown to proceed in the proper orderly fashion - however, this naïve strategy obviously fails in the event that there is no HTTP management endpoint.  Even adding this dependency conditionally fails, because the HTTP management interface could be added, removed, or modified at any time.

A better solution would be to use a shared internal management-only XNIO worker for both of these things, with a proper dependency relationship from both the management endpoint and the HTTP endpoint.

P.S. The reason this appeared recently is that our recent performance enhancements which use the write thread to write all data cause more/earlier exection to the XNIO worker's various threads, increasing the chances of a failure in this case.","14/Jan/16 11:02 AM;dmlloyd;Here's how we fix this:
# Introduce a new XNIO worker service (ON_DEMAND is the best choice here) which is targeted for management only (separate from I/O subsystem), using the configuration that is presently defined in {{org.jboss.as.domain.http.server.ManagementHttpServer}} (NOTE: where should this service live?)
# Modify {{org.jboss.as.domain.http.server.ManagementHttpServer}} so that it sets a (final) XnioWorker from a dependency which is injected from this shared service
# Modify {{org.jboss.as.domain.http.server.ManagementHttpServer#create}} to populate the new value from a parameter
# Modify {{org.jboss.as.server.mgmt.UndertowHttpManagementService}} to accept and use an XnioWorker dependency
# Modify {{org.jboss.as.host.controller.operations.HttpManagementAddHandler#installHttpManagementServices}} and {{org.jboss.as.server.operations.HttpManagementAddHandler#installHttpManagementConnector}} to supply the required service
# Modify {{org.jboss.as.remoting.RemotingServices}} to set a dependency on the new worker service in {{installRemotingManagementEndpoint}}
# Also modify {{installRemotingManagementEndpoint}} to use a plain {{EndpointService}} instead of the {{ManagementEndpointService}}
# Delete {{ManagementEndpointService}}",,,,,,,,,,,,,,,,,,,,,
deploy --url command creates invalid deployment,WFCORE-1297,12599309,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dpospisil,simkam,simkam,13/Jan/16 9:14 AM,26/Jan/16 7:22 AM,29/Nov/16 3:52 PM,26/Jan/16 7:22 AM,2.0.6.Final,,,,,,2.0.8.Final,,CLI,Domain Management,,,,0,,,,,,"Command {{deploy --url=http://localhost/test/simple-servlet.war}}
creates invalid deployment

According to logs everything seems to be fine
{noformat}
15:03:57,505 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /tmp/jboss-eap-7.0/standalone/data/content/5e/5e5709be9a06a9ed7bcb2100a4143400fea887/content
15:03:57,531 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of ""/test/simple-servlet.war"" (runtime-name: ""/test/simple-servlet.war"")
15:03:58,238 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 62) WFLYUT0021: Registered web context: //test/simple-servlet
15:03:58,320 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0010: Deployed ""/test/simple-servlet.war"" (runtime-name : ""/test/simple-servlet.war"")
{noformat}

but web context {{http://localhost:8080//test/simple-servlet}} isn't accessible, it returns {{404 - Not Found}}. 

(simple-servlet.war doesn't contain jboss-web.xml, so no context root is defined there)

",,,,,,,,,,,,,,,,JBEAP-2768,,,,,WFLY-367,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1361,,,,,,0.0,3.0,,1|i00q7b:,9223372036854775807,,,,[standalone@localhost:9990 /] deploy --url=http://localhost/test/simple-servlet.war,,,,simkam,,,"14/Jan/16 5:33 PM;dpospisil;I am sending very simple PR to strip leading '/' from 
deployment name which fixes this issue.

Also,
deploy --url=http://localhost/test/deployment0.war

creates deployment named test/deployment0.war which will deploy with the 
default root context /test/deployment0 and works OK with the patch. However I 
am not sure if this is desired or if taking only the last part of the URL 
(deployment0) would be better.
","15/Jan/16 6:43 AM;simkam;I think that deployment from url should be consistent with other deployment methods

deploy <some-path>/simple-servlet.war

creates deployment simple-servlet.war with root context /simple-servlet
so I think that taking only the last of the URL would be better",26/Jan/16 7:22 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,
Rejecting the SSL certificate while connecting via CLI block indefinately ,WFCORE-1296,12599304,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,13/Jan/16 9:10 AM,13/Jan/16 11:37 PM,29/Nov/16 3:52 PM,13/Jan/16 11:37 PM,2.0.5.Final,,,,,,2.0.6.Final,,CLI,,,,,0,,,,,,"Connection to the CLI secured by SSL blocks indefinitely once I refuse to accept the server certificate.

*reproduce*
start standalone server and secure ManagementRealm with ssl

*6.4.0 behaviour*
{noformat}
./jboss-cli.sh -c '/core-service=management/security-realm=ManagementRealm/server-identity=ssl:add(keystore-path=$PATH_TO_KEYSTORE, keystore-password=$PASSWORD), reload'
./jboss-cli.sh -c 127.0.0.1:9443
...
Accept certificate? [N]o, [T]emporarily, [P]ermenantly : N
org.jboss.as.cli.CliInitializationException: Failed to connect to the controller
	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:299)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:265)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.jboss.modules.Module.run(Module.java:312)
	at org.jboss.modules.Main.main(Main.java:473)
Caused by: org.jboss.as.cli.CommandLineException: Unable to negotiate SSL connection with controller at localhost:9999
	at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:1048)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:887)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:863)
	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:297)
	... 8 more
$
{noformat}


*7.0.0.ER3 behaviour*
{noformat}
./jboss-cli.sh -c
/core-service=management/security-realm=ManagementRealm/server-identity=ssl:add(keystore-path=/path/to/keystore, keystore-password=password)
/core-service=management/management-interface=http-interface:undefine-attribute(name=socket-binding
/core-service=management/management-interface=http-interface:write-attribute(name=secure-socket-binding,value=management-https)
reload
{noformat}
Connect to the CLI and reject the certificate
{noformat}
$ ./jboss-cli.sh --controller=https-remoting://localhost:9993 -c
...
Accept certificate? [N]o, [T]emporarily, [P]ermenantly : N
{noformat}
You are stuck at this point, all you can do is to interrupt (Ctrl+C)
{noformat}
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:400)
	at org.jboss.aesh.console.Console.getInput(Console.java:484)
	at org.jboss.aesh.console.Console.getInputLine(Console.java:528)
	at org.jboss.as.cli.impl.Console$Factory$1.read(Console.java:222)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:197)
	at org.jboss.as.cli.impl.CommandContextImpl.readLine(CommandContextImpl.java:899)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSSLFailure(CommandContextImpl.java:1137)
	at org.jboss.as.cli.impl.CommandContextImpl.access$1200(CommandContextImpl.java:183)
	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager$1.run(CommandContextImpl.java:1897)
	at org.jboss.as.protocol.GeneralTimeoutHandler.suspendAndExecute(GeneralTimeoutHandler.java:45)
	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager.checkServerTrusted(CommandContextImpl.java:1892)
	at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:936)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1493)
	at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:919)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:916)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)
	at org.xnio.ssl.JsseSslConduitEngine.handleHandshake(JsseSslConduitEngine.java:543)
	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:314)
	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:204)
	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:98)
	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:72)
	at org.xnio.conduits.ConduitStreamSinkChannel.write(ConduitStreamSinkChannel.java:150)
	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:385)
	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:372)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.conduits.WriteReadyHandler$ChannelListenerHandler.writeReady(WriteReadyHandler.java:65)
	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:93)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:559)
Failed to connect to the controller: Unable to negotiate SSL connection with controller at localhost:9993
{noformat}",,,,,,,,,,,,,,,,JBEAP-2568,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1358,,,,,,0.0,0.0,,1|i00q67:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Alias in jboss-cli are not persistent,WFCORE-1294,12599208,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,stalep,sewatech,sewatech,12/Jan/16 2:12 PM,28/Jul/16 2:12 AM,29/Nov/16 3:52 PM,03/Feb/16 8:04 AM,2.0.5.Final,,,,,,2.0.10.Final,,CLI,,,,,0,,,,,,"Alias are supposed to be persistent in Aesh, but it fails due to a bug. This bug has been fix in Aesh but after version 0.66.2. 
see AESH-341",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/thread/267227,,,,,,,,,0.0,3.0,,1|i00pkv:,9223372036854775807,,,,"Start jboss-cli, exit, and check the ${user.home}/.aesh_alias file : it's a directory.",,,,,,,"13/Jan/16 12:02 PM;stalep;ive pushed out a 0.66.3-SNAPSHOT with [~sewatech] fixes. there is another issue im waiting for feedback on, when that is confirmed ill push out a final version.","03/Feb/16 8:03 AM;stalep;hi, sorry for not following this up, but this was merged into 0.66.3 and is in Wildfly10.0.0.Final
However it seems that jboss-cli is not specifying the correct filename, this will be fixed in another version.",03/Feb/16 8:21 AM;sewatech;Great! Thank you.,,,,,,,,,,,,,,,,,,,,,,,,
SocketBindingManager.createMulticast/DatagramSocket(...) variants needed for unbound sockets,WFCORE-1292,12599191,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,pferraro,pferraro,pferraro,12/Jan/16 12:39 PM,22/Jan/16 11:36 AM,29/Nov/16 3:52 PM,22/Jan/16 11:36 AM,2.0.5.Final,,,,,,2.0.8.Final,,Server,,,,,0,,,,,,"In order to modify the SO_REUSEADDR option of a multicast or datagram socket, the socket must be unbound - otherwise the behavior is undefined.  See:
http://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocket.html#setReuseAddress-boolean-

To support this (as required for JGroups 3.6.7.Final), SocketBindingManager needs methods to create unbound datagram/multicast sockets.  The current methods that accept a SocketAddress throw an ISE when a null address is used.

Setting priority to blocker to encourage inclusion into 2.0.x.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1357,,,,,,0.0,0.0,,1|i00ph3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
installing CP over one-off fails if the modules patched by the one-off are not patched in the CP,WFCORE-1288,12598962,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,aloubyansky,aloubyansky,aloubyansky,11/Jan/16 1:27 PM,10/May/16 2:09 AM,29/Nov/16 3:52 PM,26/Jan/16 7:21 AM,1.0.1.Final,,,,,,2.0.8.Final,,Patching ,,,,,0,,,,,,"If a CP is installed over active one-off patches, the patch application may fail if the CP does not contain updates for the modules that were patched by the one-offs.

Normally, CP patches accumulate the one-off patches released since the previous CP which is, probably, why this bug has not been discovered for a long time.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1295999,,,,,Perform,,?,?,,+,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1353,,,,,,0.0,11.0,,1|i00o3b:,9223372036854775807,,,,,,7.0.0.GA,,,,,11/Jan/16 4:01 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from ASSIGNED to POST,26/Jan/16 7:21 AM;aloubyansky;Merged.,22/Feb/16 4:13 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from POST to MODIFIED,24/Feb/16 2:52 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from MODIFIED to ON_QA,08/Mar/16 6:20 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from ON_QA to ASSIGNED,14/Mar/16 11:09 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from ASSIGNED to POST,15/Mar/16 4:40 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from POST to ASSIGNED,04/Apr/16 6:15 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from ASSIGNED to POST,15/Apr/16 2:00 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from POST to MODIFIED,25/Apr/16 6:13 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from MODIFIED to ON_QA,10/May/16 2:09 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1295999|https://bugzilla.redhat.com/show_bug.cgi?id=1295999] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Handle LDAP role DN's that contain special characters better,WFCORE-1285,12598799,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dehort,dehort,09/Jan/16 11:52 PM,29/Jan/16 5:34 PM,29/Nov/16 3:52 PM,29/Jan/16 5:34 PM,,,,,,,2.0.8.Final,,Security,,,,,0,,,,,,"The ""parseGroupNameFromLdapDN"" logic does not handle LDAP role DN's that contain special characters correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1352,,,,,,0.0,1.0,,1|i00n33:,9223372036854775807,,,,,,,,,,,12/Jan/16 4:35 PM;dehort;Updated the PR,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to create HTTPS connection using *ECDH_RSA* cipher suites / kECDHr cipher string,WFCORE-1282,12594731,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,dlofthouse,mchoma,mchoma,01/Dec/15 1:55 AM,29/Nov/16 3:32 PM,29/Nov/16 3:52 PM,,1.0.2.Final,,,,,,3.0.0.Alpha14,,Security,,,,,0,,,,,,"User using these cipher suites / cipher name in EAP6 won't be able to use it in EAP7. 
Setting as critical as these cipher suites, are considered for strong and widely used in my opinion.
In server log, error ""no cipher suites in common"" can be seen using -Djavax.net.debug=all.
Note, that analogous configuration in EAP6 works fine.
Issue can be seen on Oracle Java only, as on OpenJDK / IBM these suites are not provided by method getDefaultCipherSuites(). 

Also is it possible to log ""no cipher suites in common"" and similar tls handshake errors without -Djavax.net.debug for better troubleshooting?
",Oracle Java,,,,,,,,,,,,,,,JBEAP-2070,,,,,,,,,,,01/Dec/15 1:55 AM;mchoma;client_debug_eap6.log;https://issues.jboss.org/secure/attachment/12395497/client_debug_eap6.log,01/Dec/15 1:55 AM;mchoma;client_debug_eap7.log;https://issues.jboss.org/secure/attachment/12395498/client_debug_eap7.log,01/Dec/15 1:55 AM;mchoma;server-cert-key-ec.jks;https://issues.jboss.org/secure/attachment/12395499/server-cert-key-ec.jks,01/Dec/15 1:55 AM;mchoma;server_debug_eap6.log;https://issues.jboss.org/secure/attachment/12395500/server_debug_eap6.log,01/Dec/15 1:55 AM;mchoma;server_debug_eap7.log;https://issues.jboss.org/secure/attachment/12395501/server_debug_eap7.log,,,,,,,,,,,,,,?,,,,,,,,,,,,,5.0,2.0,,1|i0006n:,9223372036854775807,,,,"1. set undertow to use some of ECDH_RSA cipher suite 

{code:xml}
    <https-listener name=""https"" enabled-cipher-suites=""ECDH-RSA-AES256-SHA"" security-realm=""ciphers-test-realm"" socket-binding=""https""/>
{code}

or kECDHr

{code:xml}
    <https-listener name=""https"" enabled-cipher-suites=""kECDHr"" security-realm=""ciphers-test-realm"" socket-binding=""https""/>
{code}

and set ssl realm 

{code:xml}
    <security-realm name=""ciphers-test-realm"">
        <server-identities>
            <ssl>
                <keystore path=""/home/mchoma/workspace/git-repositories/cipher-suite-testsuite/target/classes/ssl/server-cert-key-ec.jks"" keystore-password=""tomcat"" alias=""javaserver""/>
            </ssl>
        </server-identities>
    </security-realm>
{code}

2. unable to make https connection.",,,,okotek,,,08/Dec/15 11:17 AM;dmlloyd;Once ELY-389 is merged it should become very clear what is happening here.,17/Dec/15 10:22 AM;dlofthouse;Within Elytron the String 'ECDH-RSA-AES256-SHA' correctly matches against 'TLS_ECDH_RSA_WITH_AES_256_CBC_SHA',,,,,,,,,,,,,,,,,,,,,,,,,
NPE in principal-to-group group searching,WFCORE-1281,12598588,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,olukas,olukas,08/Jan/16 3:54 AM,26/Jan/16 3:41 AM,29/Nov/16 3:52 PM,26/Jan/16 3:41 AM,2.0.5.Final,,,,,,,,Domain Management,Security,,,,0,,,,,,"In case when ldap authorization with principal-to-group group searching is used in security realm and LDAP entry found by value of 'group-attribute' does not include attribute mentioned in 'group-name-attribute' then it causes authentication fail. It is caused by missing null check for groupNameAttr and hidden NPE thrown from [1].

[1] https://github.com/wildfly/wildfly-core/blob/18393273a1c9e464fb0cc959795118fd5a453904/domain-management/src/main/java/org/jboss/as/domain/management/security/LdapGroupSearcherFactory.java#L301",,,,,,,,,,,,,,,,JBEAP-2608,,,,,,,,,,,08/Jan/16 3:54 AM;olukas;groupsearch.ldif;https://issues.jboss.org/secure/attachment/12396525/groupsearch.ldif,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|i00ltj:,9223372036854775807,,,,"1) use following security realm:
{code:xml}
            <security-realm name=""ldap-security-realm"">
                <authentication>
                    <ldap connection=""ldap_connection"" base-dn=""dc=jboss,dc=org"" recursive=""true"">
                        <username-filter attribute=""uid""/>
                    </ldap>
                </authentication>
                <authorization>
                    <ldap connection=""ldap_connection"">
                        <group-search group-name=""SIMPLE"" iterative=""false"" group-dn-attribute=""dn"" group-name-attribute=""description"">
                            <principal-to-group group-attribute=""sn""/>
                        </group-search>
                    </ldap>
                </authorization>
            </security-realm>
{code}
...
{code:xml}
        <outbound-connections>
            <ldap name=""ldap_connection"" url=""ldap://localhost:10389"" search-dn=""uid=admin,ou=system"" search-credential=""secret""/>
        </outbound-connections>
{code}
2) Use this security domain for RBAC access to management console:
{code:xml}
        <management-interfaces>
            <native-interface security-realm=""ManagementRealm"">
                <socket-binding native=""management-native""/>
            </native-interface>
            <http-interface security-realm=""ldap-security-realm"">
                <socket-binding http=""management-http""/>
            </http-interface>
        </management-interfaces>
        <access-control provider=""rbac"">
            <role-mapping>
                <role name=""SuperUser"">
                    <include>
                        <user name=""$local""/>
                        <group name=""JBossAdmin""/>
                    </include>
                </role>
            </role-mapping>
        </access-control>
{code}

3) Use ldap server with attached ldif

4) Try to access management console with jduke/Password - it will fail.

5) Uncomment line 'description: Monitor' from ldif and try to access management console again - it will be successful.",,,,,,,08/Jan/16 4:23 AM;dlofthouse;This code is part of WildFly Core - please move the issue over there. Thanks.,,,,,,,,,,,,,,,,,,,,,,,,,,
Embed-server from CLI launch shows twice prompt string,WFCORE-1277,12598415,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,stalep,soul2zimate,soul2zimate,07/Jan/16 4:59 AM,22/Jan/16 7:46 PM,29/Nov/16 3:52 PM,22/Jan/16 7:46 PM,2.0.5.Final,,,,,,2.0.8.Final,,CLI,,,,,0,,,,,,"{noformat}
When I launch an embed-server from CLI, it displays twice [standalone@embedded /] [standalone@embedded /] for the first time.

[wangc@dhcp-128-40 wildfly-10.0.0.Final-SNAPSHOT]$ sh bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server 
[standalone@embedded /] [standalone@embedded /] ls  
core-service                               launch-type=EMBEDDED                       product-version=undefined                  
deployment                                 management-major-version=4                 profile-name=undefined                     
deployment-overlay                         management-micro-version=0                 release-codename=Kenny                     
extension                                  management-minor-version=0                 release-version=2.0.5.Final                
interface                                  name=dhcp-128-40                           running-mode=ADMIN_ONLY                    
path                                       namespaces=[]                              schema-locations=[]                        
socket-binding-group                       organization=undefined                     server-state=running                       
subsystem                                  process-type=Server                        suspend-state=RUNNING                      
system-property                            product-name=undefined                     uuid=8c4ede2f-8e14-48bf-9eaf-73947e23edcf  

[standalone@embedded /] quit
{noformat}
This does not happen in 2.0.4.Final.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1372,,,,,,0.0,21.0,,1|i00ksf:,9223372036854775807,,,,,,,,,,,"07/Jan/16 3:14 PM;brian.stansberry;Yesterday using non-embedded CLI I noticed something similar after using CLI to shut down the server:

{code}
[standalone@localhost:9990 /] shutdown 
[disconnected /] [disconnected /]
{code}","12/Jan/16 11:49 AM;stalep;this is caused by a fix we did for aesh 0.66.2. - ill look into this today.
there is a pr that fixes it, but it just hides the underlying problem so ill take a look.","12/Jan/16 2:52 PM;stalep;ive pushed out a 0.66.3-SNAPSHOT, could you please try that?
it fixes the issue when ive tested it locally.
[~soul2zimate] i didnt use your pr for now, i feel the current fix is a bit better fix since updating the prompt shouldnt really rewrite the buffer line. it should only do that on request.

[~aloubyansky] could you please verify as well that this do not cause any other regressions? ","12/Jan/16 7:12 PM;soul2zimate;Yes, I can confirm that the version 0.66.3-SNAPSHOT fixed the reported case and case in comment 1. I'll assign this to [~stalep] and close the other open PR in aesh.","12/Jan/16 7:20 PM;stalep;[~soul2zimate] im off on meetings this week, could you be so kind to test this against the cli testsuite on wildfly-core/wildfly?
i just want to be sure there are no other issues affected by this.","12/Jan/16 7:31 PM;soul2zimate;Sure, there are following new failures in wildfly-core testsuite once I run them with version 0.66.3-SNAPSHOT

{noformat}
Running org.jboss.as.test.integration.management.cli.CtrlCTestCase
Tests run: 3, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 20.835 sec <<< FAILURE! - in org.jboss.as.test.integration.management.cli.CtrlCTestCase
userCtrlCTestCase(org.jboss.as.test.integration.management.cli.CtrlCTestCase)  Time elapsed: 10.118 sec  <<< FAILURE!
java.lang.AssertionError: Prompt isn't asking for username. Output: 'Authenticating against security realm: ManagementRealm
'
    at org.junit.Assert.fail(Assert.java:88)
    at org.junit.Assert.assertTrue(Assert.java:41)
    at org.jboss.as.test.integration.management.cli.CtrlCTestCase.userCtrlCTestCase(CtrlCTestCase.java:63)

passCtrlCTestCase(org.jboss.as.test.integration.management.cli.CtrlCTestCase)  Time elapsed: 10.115 sec  <<< FAILURE!
java.lang.AssertionError: Prompt isn't asking for username. Output: 'Authenticating against security realm: ManagementRealm
'
    at org.junit.Assert.fail(Assert.java:88)
    at org.junit.Assert.assertTrue(Assert.java:41)
    at org.jboss.as.test.integration.management.cli.CtrlCTestCase.passCtrlCTestCase(CtrlCTestCase.java:83)
{noformat}","12/Jan/16 8:04 PM;stalep;thanks, ill have a look...","12/Jan/16 9:02 PM;stalep;hm, that test fails for me on wildfly-core master when just running with aesh-0.66.2. does it fail for you as well? [~soul2zimate]
- just to clarify, there is a bug caused by my changes (that ive fixed locally), but the tests still fails since it expects ctrl-c to interrupt the input which it doesnt.
locally that also happens on wildfly-core master for me, i just want others to verify.","12/Jan/16 9:11 PM;soul2zimate;No, I did not see it with aesh 0.66.2. Also, It looks good on recent pull requests against master branch on https://github.com/wildfly/wildfly-core/pulls as well. ","13/Jan/16 11:08 AM;stalep;hm, atm i have a lot on my plate, so just to get this working. ill revert my changes for now, and use your pr [~soul2zimate]. ill let you know when i have that deployed on mvn for you to test.
- ill try to put off time later to fix this a better way.","13/Jan/16 12:00 PM;stalep;[~soul2zimate] ive reverted my changes and used your commit. it is deployed now (0.66.3-SNAPSHOT) can you please verify that it works? the testsuite fails for me locally (it fails with a clean master checkout as well), but i dont see the double prompt anymore when i test jboss-cli.
","14/Jan/16 1:07 AM;soul2zimate;I have rebased the PR and added one more line ""consoleBuffer.setPrompted(false);"" inside Console.java. After that, I can no longer see the double prompt issue, and wildfly-core and wilfy tests are both passed.

About the failed CtrlCTestCase, it tries to check prompt Username and Password on CLI connection. Thus, I have following steps to see the failure with your two commits:
1. comment out line  ""<local default-user=""$local"" skip-group-loading=""true""/>"" in standalone.xml
2. use add-user.sh to create a new Management User with password.
3. run standalone.sh to start server, and run jboss-cli.sh -c, it will ask user to input username and password as:

{noformat}
Authenticating against security realm: ManagementRealm
Username
{noformat}:
including your two commits, it misses the ""Username:"" prompt as:
{noformat}
Authenticating against security realm: ManagementRealm
{noformat}

That's why the CtrlCTestCase fails at line ""boolean promptFound = cli.executeInteractive(""Username"");"" I think it's due to the remove of this [block|https://github.com/aeshell/aesh/commit/91e4696338c80f2e1f3e7a77a7d88c0deb7907a0#diff-d91c0c938b6c364f7db2b61677896465L418] which is supposed to display prompt when it sets new prompt ""Username"" (in this case)","14/Jan/16 11:25 AM;stalep;hi, regarding why CtrlCTestCase failing, yes, one reason was the code block you mentioned, but i had made a change to jboss-cli to call console.displayPrompt() just after it sets it. The test still failed locally, but that was because ctrl-c did not abort the connection, it just printed the value of ctrl-c to the terminal.
i have already used your commit, i just cherry-picked from your repo after you closed the pr. i see i managed to forget to push it, sorry.
if this looks good for you ill create a 0.66.3 version today.","14/Jan/16 6:45 PM;soul2zimate;Hi [~stalep] I have rebased the PR and added one more line ""consoleBuffer.setPrompted(false);"" when I re-opened it. This is missing in the push based on previous commit. ","14/Jan/16 7:22 PM;stalep;hm, the pr wasnt updated as i could see so i just added that on line change myself. ive pushed out a new version of 0.66.3-SNAPSHOT if you want to try?","14/Jan/16 9:09 PM;soul2zimate;Yes, I can see it now. Thanks. ","19/Jan/16 9:58 AM;brian.stansberry;[~stalep][~soul2zimate] I'm raising this to Blocker due to the ""[disconnected /] [disconnected /]"" issue, which happens following common actions like a ""shutdown"" command. Can you guys update me on the possibility of getting a fix for this, ASAP, even a temporary one? I'd like this fixed in WildFly 10.0.0.Final.","19/Jan/16 10:02 AM;stalep;ill push out a 0.66.3 now, that is working as expected afaik.","19/Jan/16 10:25 AM;stalep;aesh-0.66.3 is out, please give it a try [~soul2zimate]","19/Jan/16 7:13 PM;soul2zimate;0.66.3 looks good to me, and I have opened the aesh upgrade PR for it.","20/Jan/16 11:27 AM;brian.stansberry;Just an FYI: I observed this really minor thing with 0.66.3 in a kind of franken-build of EAP 7: WFCORE-1315

I regard this as largely OT to this JIRA; I just wanted to let you know. I suspect the issue, to the extent there is one, is in the CLI itself and not aesh.

The stuff discussed in this JIRA looked good.",,,,,,
CLI resolve-parameter-values set to true does not recognise vaulted strings,WFCORE-1274,12598391,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,gaol,gaol,gaol,06/Jan/16 10:13 PM,11/Jan/16 4:37 AM,29/Nov/16 3:52 PM,11/Jan/16 12:31 AM,2.0.5.Final,,,,,,,,CLI,,,,,0,,,,,,"When enabling

<resolve-parameter-values>true</resolve-parameter-values> 

in ""bin\jboss-cli.xml""

vaulted string will get misinterpreted.

Example, if a command has ""${VAULT::tom::tom::1}"" then
the parser sees this as  ${name:defaultValue}  with

  name=""VAULT""
  defaultValue="":tom::tom::1""

Escaping the $ sign in various ways did not help. The only way is to switch <resolve-parameter-values> back to false.

Ideally, the parser should recognize vaulted string and pass then in unchanged.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1286677,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1346,,,,,,0.0,4.0,,1|i00kn3:,9223372036854775807,,,,,,,,,,,07/Jan/16 3:38 AM;jira-bugzilla-migration;Lin Gao <lgao@redhat.com> changed the Status of [bug 1286677|https://bugzilla.redhat.com/show_bug.cgi?id=1286677] from ASSIGNED to POST,"11/Jan/16 12:31 AM;gaol;There is an existing way to escape the expression in CLI by adding '$' in front, VAULT string can be escaped via: 
{noformat}
$${VAULT::text::password::1}
{noformat}
, so it should not be a problem.",11/Jan/16 1:00 AM;jira-bugzilla-migration;Lin Gao <lgao@redhat.com> changed the Status of [bug 1286677|https://bugzilla.redhat.com/show_bug.cgi?id=1286677] from POST to NEW,11/Jan/16 4:37 AM;jira-bugzilla-migration;Lin Gao <lgao@redhat.com> changed the Status of [bug 1286677|https://bugzilla.redhat.com/show_bug.cgi?id=1286677] from NEW to CLOSED,,,,,,,,,,,,,,,,,,,,,,,
Can not add property after change of class in custom log formatter.,WFCORE-1273,12598365,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,jamezp,jamezp,06/Jan/16 1:26 PM,22/Jan/16 7:43 PM,29/Nov/16 3:52 PM,22/Jan/16 7:43 PM,,,,,,,2.0.8.Final,,Logging,,,,,0,,,,,,"When you create custom formater - XMLFormatter {{/subsystem=logging/custom-formatter=XMLFormatter:add(class=java.util.logging.XMLFormatter, module=org.jboss.logmanager)}} and then in web console edit class of formatter to *org.jboss.logmanager.formatters.PatternFormatter* then save and try to add properties  - *pattern=%s%E%n*. Property is not saved.
When you create new formatter with *org.jboss.logmanager.formatters.PatternFormatter* class and then try to add same property, saving is successful.",Running unsecured EAP 7.0. DR9 version in standalone mode with standalone-full-ha profile,,,,,,,,,,,,,,,JBEAP-972,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1351,,,,,,0.0,3.0,,1|i00khb:,9223372036854775807,,,,"1.Run EAP in standalone mode with standalone-full-ha profile
2.Create XMLFormatter through CLI :  {{/subsystem=logging/custom-formatter=XMLFormatter:add(class=java.util.logging.XMLFormatter, module=org.jboss.logmanager)}}
3.In web console change class to  *org.jboss.logmanager.formatters.PatternFormatter*  and save 
4.Try to add properties : *pattern=%s%E%n*  ,and save",,,,,,,08/Jan/16 10:53 AM;ehugonnet;This happens because we are in reload-required mode and the formatter class has not been updated in the FormatterConfiguration.,"08/Jan/16 11:33 AM;jamezp;There's something more to it than that. I get the same issue if I reload or restart the server. I haven't debugged to see what's going on, but something is wrong. More than likely with the logmanager configuration API.","08/Jan/16 11:55 AM;ehugonnet;To reproduce the issue:

{code:java}
/subsystem=logging/custom-formatter=XMLFormatter:add(class=java.util.logging.XMLFormatter, module=org.jboss.logmanager)
/subsystem=logging/custom-formatter=XMLFormatter:write-attribute(name=class, value=org.jboss.logmanager.formatters.PatternFormatter)
/subsystem=logging/custom-formatter=XMLFormatter:write-attribute(name=properties, value={""pattern"" => ""%s%E%n""})
{code}



",,,,,,,,,,,,,,,,,,,,,,,,
Description of worker attributes of IO subsystem contains escaped char sequences,WFCORE-1271,12598311,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,ctomc,ctomc,06/Jan/16 7:42 AM,12/Jan/16 6:22 AM,29/Nov/16 3:52 PM,12/Jan/16 6:22 AM,2.0.5.Final,,,,,,2.0.6.Final,,Domain Management,,,,,0,,,,,,"Description of worker attributes of IO subsystem contains escaped char *\""* sequences.

{noformat}[standalone@localhost:9990 /] cd subsystem=io/worker=default
[standalone@localhost:9990 worker=default] :read-resource-description(recursive=true)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""description"" => ""Defines workers"",
        ""capabilities"" => [{
            ""name"" => ""org.wildfly.io.worker"",
            ""dynamic"" => true
        }],
        ""attributes"" => {
            ""io-threads"" => {
                ""type"" => INT,
                ""description"" => ""\""Specify the number of I/O threads to create for the worker.  If not specified, a default will be chosen, which is calculated by cpuCount * 2\"""",
                ""expressions-allowed"" => false,
                ""nillable"" => true,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""
            },
            ""stack-size"" => {
                ""type"" => LONG,
                ""description"" => ""The stack size (in bytes) to attempt to use for worker threads."",
                ""expressions-allowed"" => false,
                ""nillable"" => true,
                ""default"" => 0L,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""
            },
            ""task-keepalive"" => {
                ""type"" => INT,
                ""description"" => ""Specify the number of milliseconds to keep non-core task threads alive."",
                ""expressions-allowed"" => false,
                ""nillable"" => true,
                ""default"" => 60,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""
            },
            ""task-max-threads"" => {
                ""type"" => INT,
                ""description"" => ""\""Specify the maximum number of threads for the worker task thread pool.If not set, default value used which is calculated by formula cpuCount * 16\"""",
                ""expressions-allowed"" => false,
                ""nillable"" => true,
                ""access-type"" => ""read-write"",
                ""storage"" => ""configuration"",
                ""restart-required"" => ""no-services""
            }
        },
        ""operations"" => undefined,
        ""notifications"" => undefined,
        ""children"" => {}
    }
}
{noformat}
",,,,,,,,,,,,,,,,JBEAP-2121,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,,,,,0.0,0.0,,1|i00k5j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent NPE registering a slave HC in mixed-domain test suite,WFCORE-1270,12598137,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,kabirkhan,brian.stansberry,brian.stansberry,04/Jan/16 6:30 PM,22/Jul/16 3:10 PM,29/Nov/16 3:52 PM,,2.0.5.Final,,,,,,,,Domain Management,Test Suite,,,,0,,,,,,"I've occasionally seen test failures in the mixed domain tests when a testsuite cannot start because the slave HC can't register due to an NPE on the master:

For example:

http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=82653&tab=buildResultsDiv&buildTypeId=WildFlyCore_PullRequest_WildFlyCoreFullIntegration

Critical log details:

{code}&amp#27;[0m16:16:15,252 INFO  [org.jboss.modules] (main) JBoss Modules version 1.3.3.Final-redhat-1
&amp#27;[0m&amp#27;[0m16:16:15,363 INFO  [org.jboss.as.process.Host Controller.status] (main) JBAS012017: Starting process 'Host Controller'
&amp#27;[0m[Host Controller] &amp#27;[0m16:16:15,871 INFO  [org.jboss.modules] (main) JBoss Modules version 1.3.3.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,015 INFO  [org.jboss.msc] (main) JBoss MSC version 1.1.5.Final-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,068 INFO  [org.jboss.as] (MSC service thread 1-4) JBAS015899: JBoss EAP 6.3.0.GA (AS 7.4.0.Final-redhat-19) starting&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,625 INFO  [org.xnio] (MSC service thread 1-2) XNIO Version 3.0.10.GA-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,629 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.0.10.GA-redhat-1&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,657 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version (unknown)&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[0m16:16:16,705 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on [::1]:19999&amp#27;[0m
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=server-one, host=slave, server-group=other-server-group} status is starting
[Host Controller] &amp#27;[0m&amp#27;[31m16:16:17,913 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 50) WFLYCTL0013: Operation (""read-master-domain-model"") failed - address: ([]): java.lang.NullPointerException&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.registry.OperationTransformerRegistry$1.getResourceTransformer(OperationTransformerRegistry.java:83)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformationContextImpl.resolveTransformer(ResourceTransformationContextImpl.java:235)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChild(ResourceTransformationContextImpl.java:285)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChildren(ResourceTransformationContextImpl.java:254)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformer$1.transformResource(ResourceTransformer.java:53)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.description.TransformingDescription$3.invokeNext(TransformingDescription.java:161)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.description.AttributeTransformationRule.transformResource(AttributeTransformationRule.java:103)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.description.TransformingDescription.transformResource(TransformingDescription.java:167)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChild(ResourceTransformationContextImpl.java:289)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChildren(ResourceTransformationContextImpl.java:254)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.ResourceTransformer$1.transformResource(ResourceTransformer.java:53)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.transform.TransformersImpl.transformRootResource(TransformersImpl.java:115)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.domain.controller.operations.ReadMasterDomainModelUtil.readMasterDomainResourcesForInitialConnect(ReadMasterDomainModelUtil.java:88)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.domain.controller.operations.ReadDomainModelHandler.execute(ReadDomainModelHandler.java:51)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1343)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:395)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:408)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.host.controller.DomainModelControllerService.access$900(DomainModelControllerService.java:175)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1229)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processRegistration(HostControllerRegistrationHandler.java:424)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$400(HostControllerRegistrationHandler.java:334)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$InitiateRegistrationHandler$1.execute(HostControllerRegistrationHandler.java:230)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:465)&amp#27;[0m
[Host Controller] &amp#27;[31m    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&amp#27;[0m
[Host Controller] &amp#27;[31m    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&amp#27;[0m
[Host Controller] &amp#27;[31m    at java.lang.Thread.run(Thread.java:745)&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.threads.JBossThread.run(JBossThread.java:320)&amp#27;[0m
[Host Controller] &amp#27;[31m&amp#27;[0m
[Host Controller] &amp#27;[0m&amp#27;[33m16:16:17,935 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) JBAS010900: Could not connect to remote domain controller at remote://[::1]:9999 -- 1-$-WFLYCTL0158: Operation handler failed: java.lang.NullPointerException&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[33m16:16:17,936 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) JBAS016581: No domain controller discovery options remain.&amp#27;[0m
[Host Controller] &amp#27;[33m&amp#27;[0m&amp#27;[31m16:16:17,939 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) JBAS010901: Could not connect to master. Aborting. Error was: java.lang.IllegalStateException: JBAS016519: Tried all domain controller discovery option(s) but unable to connect&amp#27;[0m
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,10.0,,1|i00j3r:,9223372036854775807,,,,,,,,,,,"05/Jan/16 1:18 PM;brian.stansberry;Per our conversation, assigning to you in case you see something.

https://github.com/wildfly/wildfly-core/pull/1339 avoids the NPE, but I don't get why this failure is intermittent.

GlobalTransformerRegistry.registerTransformer will pass a 'null' into the getOrCreate method that creates a OperationTransformerRegistry, so having this var be 'null' is possible via a normal code path. Why this doesn't regularly fail is a mystery though. Perhaps a different OperationTransformerRegistry instance with the same address/version is created via a different code path in some cases, and there is some timing effect involved. The transformer registration is all single threaded AFAIK though.","05/Jan/16 1:24 PM;brian.stansberry;BTW, the alternate code paths for creating a different OperationTransformerRegistry go through GlobalTransformerRegistry.create OperationTransformerRegistry.SubRegistry.create.",05/Jan/16 3:24 PM;brian.stansberry;Here's another one: http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=83272&buildTypeId=WF_PullRequest_Windows,"08/Jan/16 6:59 AM;kabirkhan;An update (although no solution yet).

The OperationTransformerRegistry is created for each server/host when it is registered, and that all happens in one thread. This happens via 
{code}
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at java.lang.Thread.dumpStack(Thread.java:1329)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.controller.registry.GlobalTransformerRegistry.create(GlobalTransformerRegistry.java:167)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.controller.transform.TransformerRegistry.resolveServer(TransformerRegistry.java:183)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.controller.transform.TransformationTargetImpl.create(TransformationTargetImpl.java:94)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.host.controller.ServerInventoryImpl.createManagedServer(ServerInventoryImpl.java:621)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:193)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.host.controller.DomainModelControllerService$DelegatingServerInventory.startServer(DomainModelControllerService.java:1072)
[Host Controller] 11:47:47,090 ERROR [stderr] (Controller Boot Thread) 	at org.jboss.as.host.controller.operations.StartServersHandler.cleanStartServers(StartServersHandler.java
{code}
and 
{code}
[Host Controller] 11:50:01,928 ERROR [stderr] (Host Controller Service Threads - 30) java.lang.Exception: Stack trace
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at java.lang.Thread.dumpStack(Thread.java:1329)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.registry.GlobalTransformerRegistry.create(GlobalTransformerRegistry.java:167)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.transform.TransformerRegistry.resolveHost(TransformerRegistry.java:157)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.transform.TransformationTargetImpl.create(TransformationTargetImpl.java:97)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$HostRegistrationStepHandler.execute(HostControllerRegistrationHandler.java:306)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:408)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.host.controller.DomainModelControllerService.access$900(DomainModelControllerService.java:176)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1230)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processRegistration(HostControllerRegistrationHandler.java:424)
[Host Controller] 11:50:01,929 ERROR [stderr] (Host Controller Service Threads - 30) 	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$400(HostControllerRegistrationHandler.java:334)
{code}

The common point is that both servers and hosts hit GlobalTransformerRegistry.java:167 to get the OperationTransformerRegistry created from the GlobalTransformerRegistry which contains all versions. The GlobalTransformerRegistry is populated first, on boot of the DC, and the population of that takes place in _several_ threads, as part of the parallel boot of extensions. So that is probably where a race is. So I think your PR will merely mask the problem rather than fix it.","08/Jan/16 7:15 AM;kabirkhan;Perhaps I am making some wrong assumptions ^^, I need to understand better why registerTransformer() uses null.","08/Jan/16 8:55 AM;kabirkhan;https://github.com/wildfly/wildfly-core/pull/1349 is an alternate PR which uses the default resource transformer. The null resource transformer was introduced as part of the chained transformer work, and those tests pass locally here.

However, since the GlobalTransformerRegistry gets populated by several threads, it feels like we are trying to register transformers for a resource before its parents have had time to register, which creates that entry with the null resource transformer. The question though is where? I presume that the full core model initialisation happens in one thread, and that each extension and subsystem also happen in a thread.

There is a separate global transformer registry for the {code}profile=*{code}, {code}host=*{code} and {code}host=*/server=*{code} levels, so I don't see where the race can happen at the moment.

It looks like both our attempts are masking the real problem!","21/Mar/16 10:46 AM;brian.stansberry;""Rejecting"" the merged pull request as the PR wasn't meant to fix the issue, just to get data for cause analysis.","06/Apr/16 8:35 PM;brian.stansberry;Your diagnostics PR caught some data:

http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=95874&buildTypeId=WildFlyCore_PullRequest_WildFlyCoreFullIntegrationWindows&tab=buildResultsDiv

{code}
[Host Controller] 00:46:25,530 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 40) WFLYCTL0013: Operation (""read-master-domain-model"") failed - address: ([]): java.lang.NullPointerException: NPE for [
[Host Controller]     (""profile"" => ""full-ha""),
[Host Controller]     (""subsystem"" => ""weld"")
[Host Controller] ]
[Host Controller]     at org.jboss.as.controller.registry.OperationTransformerRegistry$1.getResourceTransformer(OperationTransformerRegistry.java:83)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformationContextImpl.resolveTransformer(ResourceTransformationContextImpl.java:237)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChild(ResourceTransformationContextImpl.java:293)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChildren(ResourceTransformationContextImpl.java:262)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformer$1.transformResource(ResourceTransformer.java:53)
[Host Controller]     at org.jboss.as.controller.transform.description.TransformingDescription$3.invokeNext(TransformingDescription.java:161)
[Host Controller]     at org.jboss.as.controller.transform.description.AttributeTransformationRule.transformResource(AttributeTransformationRule.java:103)
[Host Controller]     at org.jboss.as.controller.transform.description.TransformingDescription.transformResource(TransformingDescription.java:167)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChild(ResourceTransformationContextImpl.java:297)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformationContextImpl.processChildren(ResourceTransformationContextImpl.java:262)
[Host Controller]     at org.jboss.as.controller.transform.ResourceTransformer$1.transformResource(ResourceTransformer.java:53)
[Host Controller]     at org.jboss.as.controller.transform.TransformersImpl.transformRootResource(TransformersImpl.java:134)
[Host Controller]     at org.jboss.as.domain.controller.operations.ReadMasterDomainModelUtil.readMasterDomainResourcesForInitialConnect(ReadMasterDomainModelUtil.java:89)
[Host Controller]     at org.jboss.as.domain.controller.operations.ReadDomainModelHandler.execute(ReadDomainModelHandler.java:56)
[Host Controller]     at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
[Host Controller]     at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
[Host Controller]     at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
[Host Controller]     at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1329)
[Host Controller]     at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:400)
[Host Controller]     at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:409)
[Host Controller]     at org.jboss.as.host.controller.DomainModelControllerService.access$1000(DomainModelControllerService.java:179)
[Host Controller]     at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1252)
[Host Controller]     at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processRegistration(HostControllerRegistrationHandler.java:488)
[Host Controller]     at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$400(HostControllerRegistrationHandler.java:395)
[Host Controller]     at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$InitiateRegistrationHandler$1.execute(HostControllerRegistrationHandler.java:253)
[Host Controller]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
[Host Controller]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)
[Host Controller]     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Host Controller]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Host Controller]     at java.lang.Thread.run(Thread.java:745)
[Host Controller]     at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}","18/Apr/16 6:26 PM;brian.stansberry;BTW, I saw the same exception message on some other test run somewhere, so perhaps subsystem=weld is relevant.","22/Jul/16 3:10 PM;brian.stansberry;Another one, different resource though:

{code}
INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 3086 ms
[Host Controller] &amp#27;[0m&amp#27;[31m10:54:19,221 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 51) WFLYCTL0013: Operation (""read-master-domain-model"") failed - address: ([]): java.lang.NullPointerException: NPE for [&amp#27;[0m
[Host Controller] &amp#27;[31m    (""profile"" => ""default""),&amp#27;[0m
[Host Controller] &amp#27;[31m    (""subsystem"" => ""jca"")&amp#27;[0m
[Host Controller] &amp#27;[31m]&amp#27;[0m
[Host Controller] &amp#27;[31m    at org.jboss.as.controller.registry.OperationTransformerRegistry$1.getResourceTransformer(OperationTransformerRegistry.java:83)&amp#27;[0m
[Host Controller] &amp#27;
{code}

https://ci.wildfly.org/viewLog.html?buildId=21702&buildTypeId=WildFlyCore_PullRequest_WildFlyCoreFullIntegration",,,,,,,,,,,,,,,,,
Resource passed into RootDeploymentUnitService is decoupled from official model,WFCORE-1269,12598272,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Do,,brian.stansberry,brian.stansberry,05/Jan/16 5:10 PM,06/Jan/16 10:30 AM,29/Nov/16 3:52 PM,06/Jan/16 10:19 AM,2.0.5.Final,,,,,,,,Domain Management,Server,,,,0,,,,,,"When DeploymentHandlerUtil.doDeploy passes the Resource for the deployment into RootDeploymentUnitService, it is from the currently executing management ops version of the resource tree, and becomes the ""official"" version once that op commits. But once another config write op commits, the Resource instance cached by the RootDeploymentUnitService and attached by it to the DeplopymentUnit is no longer the official copy; it's a previous copy, aka ""cruft"". So any mutation to it is not affecting the official copy.

Where this can be an issue is if the deployment services stop or restart due to MSC dependency changes (i.e. some service depended upon by the deployment stops or restarts), but not due to deploy/undeploy/redeploy ops affecting the deployment directly. The stop/restart will trigger the DUPs which then may attempt the out of date ""cruft"" Resource.

WFLY-4908 is an example of such modification.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|i00jxb:,9223372036854775807,,,,,,,,,,,"06/Jan/16 10:19 AM;brian.stansberry;I've decided not to try and fix this, at least not via keeping this resource in sync.

The problem is for this to work properly, the resource cached in the DeploymentUnit would have to have visibility to unpublished changes being made by subsequently executing ops, not just to the changes made once the subsequent op commits. And making that change would be too problematic

For example, in the WFLY-4908 case an undeploy op affecting deployment 1 is triggering MSC to stop services for deployment 2, and then a later deploy op for deployment one causes MSC to start the services for deployment 2. Neither the undeploy or deploy ops directly relate to deployment 2. But because of the MSC dependency, the deployment 2 DUPs run during both. But the DUP don't have a ref to the currently unpublished resource tree used by those ops.

I'm closing this and am going to open a different issue for a minor change to help avoid the need for things like Scott's WFLY-4908 fix.",,,,,,,,,,,,,,,,,,,,,,,,,,
Incorreclty bypass the SecurityManager and call AccessControl.checkPermission() directly,WFCORE-1266,12598144,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jshepher,jshepher,jshepher,04/Jan/16 7:53 PM,13/Jan/16 11:38 PM,29/Nov/16 3:52 PM,13/Jan/16 11:38 PM,2.0.5.Final,,,,,,2.0.6.Final,,Server,,,,,0,,,,,,"If we modify jboss-modules to remove the allPermissions by default, then change the WildflySecurityManager to avoid throwing exceptions, we get this error when starting Wildfly:


{code}
 org.jboss.msc.service.StartException in service jboss.as: Failed to start service
         at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
         at java.lang.Thread.run(Thread.java:745)
 Caused by: java.security.AccessControlException: access denied (""org.jboss.as.server.security.ServerPermission"" ""setCurrentServiceContainer"")
         at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)
         at java.security.AccessController.checkPermission(AccessController.java:884)
         at org.jboss.as.server.CurrentServiceContainer.checkPermission(CurrentServiceContainer.java:63)
         at org.jboss.as.server.CurrentServiceContainer.setServiceContainer(CurrentServiceContainer.java:56)
         at org.jboss.as.server.ApplicationServerService.start(ApplicationServerService.java:137)
         at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
         at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
         ... 3 more
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1340,,,,,,0.0,0.0,,1|i00j5b:,9223372036854775807,,,,"1. Recompile jboss-modules after removing AllPermission from getAllPermissions.
{code}
 Jasons-MacBook-Pro:jboss-modules jasonshepherd$ git branch
 * (HEAD detached at 1.4.4.Final)
    master
 Jasons-MacBook-Pro:jboss-modules jasonshepherd$ git diff src/main/java/org/jboss/modules/ModulesPolicy.java
 diff --git a/src/main/java/org/jboss/modules/ModulesPolicy.java b/src/main/java/org/jboss/modules/ModulesPolicy.java
 index 1b8da50..0db9345 100644
 --- a/src/main/java/org/jboss/modules/ModulesPolicy.java
 +++ b/src/main/java/org/jboss/modules/ModulesPolicy.java
 @@ -39,7 +39,7 @@ final class ModulesPolicy extends Policy {

       private static Permissions getAllPermission() {
           final Permissions permissions = new Permissions();
 -        permissions.add(ALL_PERMISSION);
 +        //permissions.add(ALL_PERMISSION);
           return permissions;
       }
{code}

2. Remove the Throw clauses from WildflySecurityManager
{code}
 Jasons-MacBook-Pro:wildfly-elytron jasonshepherd$ git branch
 * (HEAD detached at 1.0.2.Final)
    master
 Jasons-MacBook-Pro:wildfly-elytron jasonshepherd$ git diff
 diff --git a/src/main/java/org/wildfly/security/manager/WildFlySecurityManager.java b/src/main/java/org/wildfly/security/manager/WildFlySecurityManager.java
 index 379c61f..11dddff 100644
 --- a/src/main/java/org/wildfly/security/manager/WildFlySecurityManager.java
 +++ b/src/main/java/org/wildfly/security/manager/WildFlySecurityManager.java
 @@ -270,7 +270,7 @@ public final class WildFlySecurityManager extends SecurityManager {
                           } else {
                               access.accessCheckFailed(perm, codeSource, classLoader, Arrays.toString(principals));
                           }
 -                        throw access.accessControlException(perm, perm, codeSource, classLoader);
 +                        //throw access.accessControlException(perm, perm, codeSource, classLoader);
                       }
                   }
               } finally {
 @@ -302,7 +302,7 @@ public final class WildFlySecurityManager extends SecurityManager {
                           } else {
                               access.accessCheckFailed(perm, codeSource, classLoader, Arrays.toString(principals));
                           }
 -                        throw access.accessControlException(perm, perm, codeSource, classLoader);
 +                        //throw access.accessControlException(perm, perm, codeSource, classLoader);
                       }
                  }
               } finally {
 @@ -1061,7 +1061,7 @@ public final class WildFlySecurityManager extends SecurityManager {
               return;
           }
           access.accessCheckFailed(permission, protectionDomain.getCodeSource(), classLoader);
 -        throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
 +        //throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
       }

       private static void checkEnvPropertyReadPermission(Class<?> clazz, String propertyName) {
 @@ -1082,7 +1082,7 @@ public final class WildFlySecurityManager extends SecurityManager {
               return;
           }
           access.accessCheckFailed(permission, protectionDomain.getCodeSource(), classLoader);
 -        throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
 +        //throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
       }

       private static void checkPropertyWritePermission(Class<?> clazz, String propertyName) {
 @@ -1103,7 +1103,7 @@ public final class WildFlySecurityManager extends SecurityManager {
               return;
           }
           access.accessCheckFailed(permission, protectionDomain.getCodeSource(), classLoader);
 -        throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
 +        //throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
       }

       private static void checkPDPermission(Class<?> clazz, Permission permission) {
 @@ -1120,7 +1120,7 @@ public final class WildFlySecurityManager extends SecurityManager {
               return;
           }
           access.accessCheckFailed(permission, protectionDomain.getCodeSource(), classLoader);
 -        throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
 +        //throw access.accessControlException(permission, permission, protectionDomain.getCodeSource(), classLoader);
       }

       /**
{code}

3. Start Wildfly",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MBeanServer.queryMBeans will include the ObjectInstance for the root mbean for the jboss.as[.expr] JMX domains,WFCORE-1263,12598126,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,04/Jan/16 3:13 PM,18/Mar/16 3:27 PM,29/Nov/16 3:52 PM,18/Mar/16 3:27 PM,2.0.5.Final,,,,,,3.0.0.Alpha1,,Domain Management,JMX,,,,0,,,,,,ModelControllerMBeanHelper.queryMBeans is incorrectly checking for the presence of the root mbean by seeing if a Set<ObjectInstance> contains an ObjectName. Wrong type.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1338,,,,,,0.0,0.0,,1|i00j1j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Changing the max-history attribute value for configuration-changes fails,WFCORE-1261,12598102,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,04/Jan/16 12:37 PM,13/Jan/16 11:39 PM,29/Nov/16 3:52 PM,13/Jan/16 11:39 PM,2.0.5.Final,,,,,,2.0.6.Final,,Domain Management,,,,,0,,,,,,"[standalone@localhost:9990 /] /core-service=management/service=configuration-changes:write-attribute(name=max-history,value=20)
{
""outcome"" => ""failed"",
""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYCTL0188: Stage MODEL is already complete"",
""rolled-back"" => true
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1333,,,,,,0.0,0.0,,1|i00ix3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Capability resolution complaints on admin-only slave HCs not connected to the master,WFCORE-1260,12598096,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,04/Jan/16 12:21 PM,10/May/16 3:53 PM,29/Nov/16 3:52 PM,18/Mar/16 6:17 PM,2.0.5.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"If you start a slave HC in admin-only with no master to connect to, boot is fine but then any modifications made to the config result in capability resolution ERROR messages in the host-controller.log

Starting a slave HC in admin-only with no master to connect to is meant to work, allowing you to use CLI to manipulate the slave's host config:

{code}
bin/domain.sh --host-config=host-slave.xml --admin-only -Djboss.domain.master.address=127.0.0.1
{code}

The boot is fine:

{code}
[Host Controller] 11:06:10,639 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.Final-SNAPSHOT (WildFly Core 2.0.5.Final) (Host Controller) started in 1152ms - Started 41 of 42 services (12 services are lazy, passive or on-demand)
{code}

However, subsequent changes made via management tools (e.g. CLI) succeed but result in ERROR logging by the HC:

{code}
[domain@127.0.0.1:9999 /] /host=localhost/system-property=foo:add(value=bar)
{
    ""outcome"" => ""success"",
    ""result"" => undefined,
    ""server-groups"" => undefined
}
{code}

The HC's log:

{code}
[Host Controller] 11:07:37,744 ERROR [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0369: Required capabilities are not available:
[Host Controller]     org.wildfly.domain.server-group.other-server-group in context 'server-config'; There are no known registration points which can provide this capability.
[Host Controller]     org.wildfly.domain.server-group.main-server-group in context 'server-config'; There are no known registration points which can provide this capability.
{code}


The boot works without logging because of the enhancement Stuart added such that capability reference failures won't fail an admin-only boot, thus letting the user use admin-only to fix the config. But then with subsequent changes, the user gets ERRORs notifying them of the unfixed references.

But in this case, the references will never be available, so long as there is no connection to a master to provide the domain-wide config.

This is a general case that needs to be accounted for in the capability resolution logic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1448,,,,,,0.0,1.0,,1|i00ivz:,9223372036854775807,,,,,,,,,,,"07/Jan/16 3:36 PM;brian.stansberry;The CapabilityRegistry.resolveCapabilities already has logic for ignoring unresolved capabilities like this, via its ""hostXmlOnly"" param. So the solution to this is to ensure that this param has the correct value in these situations where the HC is admin only with no available domain model.",,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded HC started with host-slave.xml does not allow changes as master connection service is not available,WFCORE-1259,12598074,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,04/Jan/16 10:32 AM,13/Jan/16 11:39 PM,29/Nov/16 3:52 PM,13/Jan/16 11:39 PM,,,,,,,2.0.6.Final,,,,,,,0,,,,,,"# update host-slave.xml - simplify the example
-<host xmlns=""urn:jboss:domain:4.0"">
+<host name=""slave"" xmlns=""urn:jboss:domain:4.0"">

$ ./jboss-cli.sh -Djboss.domain.master.address=127.0.0.1

[disconnected /] embed-host-controller --host-config=host-slave.xml --std-out=echo

[domain@embedded /] /host=slave/server-config=server-one:write-attribute(name=socket-binding-port-offset, value=1)

2:22:06,003 ERROR [org.jboss.as.controller.management-operation] (AeshProcess: 2) WFLYCTL0013: Operation
+(""write-attribute"") failed - address: ([
    (""host"" => ""slave""),
    (""server-config"" => ""server-one"")
]): org.jboss.msc.service.ServiceNotFoundException: Service service jboss.domain.controller.connection not found
        at org.jboss.msc.service.ServiceContainerImpl.getRequiredService(ServiceContainerImpl.java:669)
        at org.jboss.as.controller.OperationContextImpl$OperationContextServiceRegistry.getRequiredService(OperationCo
+ntextImpl.java:2208)
        at org.jboss.as.domain.controller.operations.SyncModelOperationHandlerWrapper.execute(SyncModelOperationHandle
+rWrapper.java:131)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1341)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:204)
        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:659)
        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:649)
        at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerCli
+ent.java:63)
	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.execute(ThreadContextsModelControllerClient.j
+ava:59)
        at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:84)
        at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:753)
        at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:799)
        at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:412)
        at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)

{
    ""outcome"" => ""failed"",
    ""result"" => {},
    ""failure-description"" => {""host-failure-descriptions"" => {""slave"" => ""WFLYCTL0158: Operation handler failed: org.j
+boss.msc.service.ServiceNotFoundException: Service service jboss.domain.controller.connection not found""}},
    ""rolled-back"" => true
}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1334,,,,,,0.0,1.0,,1|i00ir3:,9223372036854775807,,,,,,,,,,,"04/Jan/16 4:15 PM;luck3y;Fixed and tested by checking for running in admin-only=true for embedded and slave, and a disconnected slave using --cached-dc & admin-only=false.",,,,,,,,,,,,,,,,,,,,,,,,,,
support query filter implementation in MBeanServerConnection,WFCORE-1257,12597979,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,soul2zimate,soul2zimate,30/Dec/15 11:51 PM,22/Sep/16 9:29 AM,29/Nov/16 3:52 PM,22/Jan/16 7:40 PM,2.0.5.Final,,,,,,2.0.8.Final,,JMX,,,,,0,,,,,,"There is no implementation for query filter in MBeanServerConnection, marked as TODO

{code:title=ModelControllerMBeanHelper.java|borderStyle=solid}
    Set<ObjectName> queryNames(final ObjectName name, final QueryExp query) {
        return new RootResourceIterator<Set<ObjectName>>(accessControlUtil, getRootResourceAndRegistration().getResource(),
                new ObjectNameMatchResourceAction<Set<ObjectName>>(name) {

            Set<ObjectName> set = new HashSet<ObjectName>();

            @Override
            public boolean onResource(ObjectName resourceName) {
                if (name == null || name.apply(resourceName)) {
                    //TODO check query
                    set.add(resourceName);
                }
                return true;
            }

            @Override
            public Set<ObjectName> getResult() {
                if (set.size() == 1 && set.contains(ModelControllerMBeanHelper.createRootObjectName(domain))) {
                  return Collections.emptySet();
                }
                return set;
            }
        }).iterate();
    }
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1294010,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1335,,,,,,0.0,5.0,,1|i00i7b:,9223372036854775807,,,,,,,,,,,24/Jan/16 11:34 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1294010|https://bugzilla.redhat.com/show_bug.cgi?id=1294010] from ASSIGNED to POST,28/Mar/16 5:44 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1294010|https://bugzilla.redhat.com/show_bug.cgi?id=1294010] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1294010|https://bugzilla.redhat.com/show_bug.cgi?id=1294010] from MODIFIED to POST,22/Sep/16 7:22 AM;jira-bugzilla-migration;Vlado Pakan <vpakan@redhat.com> changed the Status of [bug 1294010|https://bugzilla.redhat.com/show_bug.cgi?id=1294010] from POST to MODIFIED,22/Sep/16 9:29 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1294010|https://bugzilla.redhat.com/show_bug.cgi?id=1294010] from MODIFIED to ON_QA,,,,,,,,,,,,,,,,,,,,,,
Missing ldap/ext package in sun.jdk module,WFCORE-1250,12584858,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,podlesakk,podlesakk,14/Sep/15 12:29 PM,22/Dec/15 4:00 PM,29/Nov/16 3:52 PM,22/Dec/15 4:00 PM,,,,,,,2.0.5.Final,,,,,,,0,,,,,,"sun.jdk module already contains package com.sun.jndi.ldap  needed to access LDAP servers via jndi (AS7-1500), but it com.sun.jndi.ldap.ext is missing. This means that Start TLS does not work as documented (http://docs.oracle.com/javase/jndi/tutorial/ldap/ext/starttls.html), failing with ClassNotFoundException.

{noformat}
javax.naming.ConfigurationException: Cannot load implementation of javax.naming.ldap.StartTlsResponse [Root exception is java.lang.ClassNotFoundException: com.sun.jndi.ldap.ext.StartTlsResponseImpl from [Module ""deployment.xxx.ear.xxx.jar:main"" from Service Module Loader]]
at javax.naming.ldap.StartTlsRequest.wrapException(StartTlsRequest.java:218)
at javax.naming.ldap.StartTlsRequest.createExtendedResponse(StartTlsRequest.java:207)
at com.sun.jndi.ldap.LdapCtx.extendedOperation(LdapCtx.java:3269)
at javax.naming.ldap.InitialLdapContext.extendedOperation(InitialLdapContext.java:184)
at javax.naming.ldap.InitialLdapContext.extendedOperation(InitialLdapContext.java:184)
at ch.ips.g2.b.core.adp.mailbox.external.LdapExecutor.executeOperation(LdapExecutor.java:115)
... 170 more
{noformat}


",jdk 1.8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1330,,,,,,0.0,0.0,,1|hzygtb:,9223372036854775807,,,,"Run example code from http://docs.oracle.com/javase/jndi/tutorial/ldap/ext/starttls.html
(http://docs.oracle.com/javase/jndi/tutorial/ldap/ext/src/StartTls.java) inside ear deployed to wildfly server.  The line
{{StartTlsResponse tls = (StartTlsResponse) ctx.extendedOperation(new StartTlsRequest());}}
throws the exception from main description.

I don't have proper test case prepared and published, hopefully the example above is sufficient.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System allows enabling two applications with same runtime-name,WFCORE-1246,12593853,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ggam,ggam,23/Nov/15 3:39 PM,18/Mar/16 3:59 PM,29/Nov/16 3:52 PM,18/Mar/16 3:59 PM,,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"System allows multiple applications with same runtime-name to be enabled at the same time, which shoudl be avoided.

It correctly prevents the deployment of an enabled second application, but doesn't complain if deploying disabled and enabling after that.
",WildFly 10CR4 standalone and domain. Both web management and command line,,,,,,,,,,,,,,,,,,,,,,,,,,23/Nov/15 3:35 PM;ggam;clustering-demo1.war;https://issues.jboss.org/secure/attachment/12395254/clustering-demo1.war,23/Nov/15 3:35 PM;ggam;clustering-demo2.war;https://issues.jboss.org/secure/attachment/12395253/clustering-demo2.war,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1369,,,,,,2.0,0.0,,1|hzzuzz:,9223372036854775807,,,,"- Deploy clustering-demo1.war (taken from Stuart Douglas GitHub) in disabled state with runtime-name ""clustering-demo""
- Deploy clustering-demo2.war in disabled state with runtime-name ""clustering-demo""
- Enable clustering-demo1.war
- Enable clustering-demo2.war",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RestartParentWriteAttributeHandler.revertUpdateToRuntime is calling deprecated recreateParentService variant,WFCORE-1240,12597314,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,18/Dec/15 1:47 PM,21/Dec/15 1:02 PM,29/Nov/16 3:52 PM,21/Dec/15 1:02 PM,2.0.5.CR1,,,,,,2.0.5.Final,,Domain Management,,,,,0,,,,,,Calling the deprecated variant forces the user to override the deprecated one.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1322,,,,,,0.0,0.0,,1|i00ffb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded API is confusing re process types,WFCORE-1239,12597307,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,18/Dec/15 12:53 PM,21/Dec/15 1:02 PM,29/Nov/16 3:52 PM,21/Dec/15 1:02 PM,2.0.4.Final,,,,,,2.0.5.Final,,Domain Management,,,,,0,,,,,,"The embedded API has gotten a bit confusing with respect to names and types, primarily the use of the word ""server"" in a number of placing where the relevant thing could either be an embedded standalone server or an embedded host controller. 

Originally I saw this module as just being an internal implementation detail for the CLI, used by the offline CLI feature, but now we've opened it up for use by things like Arquillian's WildFly integration, so I want to clean this API up a bit.

I see two minor breaking changes needed:

1) The HostController interface has an odd ""public HostController getHostController()"" method that logically would only return 'this'. I could keep this but it's not needed and I'd rather get rid of it.

2) The HostController interface's start() method does not throw a checked exception, while the equivalent start() on StandaloneServer does. To do anything coherent I need to unify the exception handling. HostController is extremely unlikely to be used outside wf core, while StandaloneServer is used, and removing a checked exception from StandaloneServer would be a breaking change or any user that catches it, so instead I will add the exception to HostController.start().",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1320,,,,,,0.0,0.0,,1|i00fdr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Domain Controller hung when deployment from CLI is interrupted.,WFCORE-1238,12597262,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,brian.stansberry,mailjainrahul,mailjainrahul,18/Dec/15 10:16 AM,26/Jul/16 7:48 PM,29/Nov/16 3:52 PM,26/Jul/16 7:48 PM,,,,,,,,,Domain Management,,,,,0,,,,,,"We are running the widlfly in Domain mode with the following configuration:

1) Host A running the domain controller
2) Host B running Host controller with one app server
3) Host C running Host controller with one app server

When we deloy war using jboss-cli and due to some unforscene issue the jboss-cli client dies before the deployment is completed. But after this the Domain Controller didn't respond to any communication either via cli or console. We need to restart the domain controller to get it working.


-----------------------------------------------------------------------------------------------------
LOGS from Wildfly server (DC)

This node IS Domain Controller.
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /opt/wildfly

  JAVA: /usr/java/default/bin/java

  JAVA_OPTS: -Xms64m -Xmx512m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true

=========================================================================

18:33:57,144 INFO  [org.jboss.modules] (main) JBoss Modules version 1.3.3.Final
18:33:57,298 INFO  [org.jboss.as.process.Host Controller.status] (main) JBAS012017: Starting process 'Host Controller'
[Host Controller] 18:33:57,917 INFO  [org.jboss.modules] (main) JBoss Modules version 1.3.3.Final
[Host Controller] 18:33:58,120 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.2.Final
[Host Controller] 18:33:58,187 INFO  [org.jboss.as] (MSC service thread 1-2) JBAS015899: WildFly 8.2.0.Final ""Tweek"" starting
[Host Controller] 18:33:58,975 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.0.Final
[Host Controller] 18:33:59,003 INFO  [org.jboss.as] (Controller Boot Thread) JBAS010902: Creating http management service using network interface (management) port (9990) securePort (-1)
[Host Controller] 18:33:59,015 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.0.Final
[Host Controller] 18:33:59,123 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.6.Final
[Host Controller] 18:33:59,162 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on 192.168.1.203:9999
[Host Controller] 18:34:01,237 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://192.168.1.203:9990/management
[Host Controller] 18:34:01,237 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://192.168.1.203:9990
[Host Controller] 18:34:01,238 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.2.0.Final ""Tweek"" (Host Controller) started in 3853ms - Started 44 of 46 services (13 services are lazy, passive or on-demand)
[Host Controller] 18:34:09,845 INFO  [org.jboss.as.domain] (Host Controller Service Threads - 25) JBAS010918: Registered remote slave host ""192.168.1.200"", WildFly 8.2.0.Final ""Tweek""
[Host Controller] 18:34:26,326 WARN  [org.jboss.as.domain] (Remoting ""cloudify-a2:MANAGEMENT"" I/O-1) JBAS010929: Connection to remote host ""192.168.1.200"" closed unexpectedly
[Host Controller] 18:34:26,328 INFO  [org.jboss.as.domain] (Remoting ""cloudify-a2:MANAGEMENT"" I/O-1) JBAS010925: Unregistered remote slave host ""192.168.1.200""
[Host Controller] 18:34:55,859 INFO  [org.jboss.as.domain] (Host Controller Service Threads - 26) JBAS010918: Registered remote slave host ""192.168.1.200"", WildFly 8.2.0.Final ""Tweek""
[Host Controller] 18:35:30,297 INFO  [org.jboss.as.repository] (management-handler-thread - 1) JBAS014900: Content added at location /opt/wildfly/domain/data/content/cf/6a68fb1bc9d5f1a1a00228243ef94f23d5a370/content
[Host Controller] 18:35:47,437 INFO  [org.jboss.as.repository] (management-handler-thread - 1) JBAS014900: Content added at location /opt/wildfly/domain/data/content/43/8ab1e9f1b69ad7bce0628b3d771eadffa09703/content
[Host Controller] 18:35:55,915 ERROR [org.jboss.as.domain.deployment] (management-handler-thread - 1) JBAS010809: ConcurrentUpdateTask caught InterruptedException waiting for task ConcurrentServerGroupUpdateTask{server-group=A}; returning
[Host Controller] 18:35:55,924 WARN  [org.jboss.as.host.controller] (management-handler-thread - 1) JBAS010802: Interrupted awaiting final response from server 192.168.1.200-0 on host 192.168.1.200
[Host Controller] 18:35:55,942 WARN  [org.jboss.as.domain] (Remoting ""cloudify-a2:MANAGEMENT"" task-2) JBAS010929: Connection to remote host ""192.168.1.200"" closed unexpectedly
[Host Controller] 18:35:55,942 INFO  [org.jboss.as.domain] (Remoting ""cloudify-a2:MANAGEMENT"" task-2) JBAS010925: Unregistered remote slave host ""192.168.1.200""

----------------------------------------------------------------------------------------

If you need anyother information, please let us know.


",Wildfly version 8.2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i00f4v:,9223372036854775807,,,,"To Reproduce:
1) Install multiple Wildfly servers with version 8.2.0 one in domain mode and others with app servers
2) Try to deploy the application using the Jboss-cli.
3) Press CRTL-C before the application deployment is completed.
4) Domain controller node will stop responding for any communication and need a restart to get back functioning.",,,,,Workaround Exists,Restart the Domain controller to get it back functioning.,02/Mar/16 3:25 PM;brian.stansberry;Is this still an issue with WildFly 10.0.0.Final? There have been quite a lot of changes in this general area in 9 and 10.,"26/Jul/16 7:48 PM;brian.stansberry;If this still occurs with WildFly 10 or later, please reopen with details or file a new JIRA. Thanks!",,,,,,,,,,,,,,,,,,,,,,,,,
Multiple triggers of each activator service when there are multiple modules with different service activator files in an ear.,WFCORE-1235,12596702,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,Takis,Takis,Takis,15/Dec/15 6:26 AM,29/Sep/16 4:32 PM,29/Nov/16 3:52 PM,29/Sep/16 4:32 PM,,,,,,,3.0.0.Alpha9,,,,,,,0,downstream_dependency,,,,,"Description of problem:
If one EAR contains more than one module with a META-INF/services/org.jboss.msc.service.ServiceActivator file the services are activated multiple times (as ServiceActivator files are found).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1286272,https://bugzilla.redhat.com/show_bug.cgi?id=1367793,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1317,,,,,,0.0,5.0,,1|i00bxz:,9223372036854775807,,,,,,,,,,,14/Jun/16 10:05 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1286272|https://bugzilla.redhat.com/show_bug.cgi?id=1286272] from POST to MODIFIED,14/Jun/16 10:05 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1286272|https://bugzilla.redhat.com/show_bug.cgi?id=1286272] from MODIFIED to POST,05/Aug/16 1:51 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1286272|https://bugzilla.redhat.com/show_bug.cgi?id=1286272] from POST to MODIFIED,05/Aug/16 1:51 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1286272|https://bugzilla.redhat.com/show_bug.cgi?id=1286272] from MODIFIED to ON_QA,29/Aug/16 8:23 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1286272|https://bugzilla.redhat.com/show_bug.cgi?id=1286272] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
"DuplicateServiceException or there is no activation, if the ServiceActivator is moved from the jar module to the  EAR deployment level. ",WFCORE-1234,12596914,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,Takis,Takis,Takis,16/Dec/15 9:45 AM,29/Sep/16 4:33 PM,29/Nov/16 3:52 PM,29/Sep/16 4:33 PM,,,,,,,3.0.0.Alpha9,,,,,,,0,,,,,,"If one EAR contains more than one module with a META-INF/services/org.jboss.msc.service.ServiceActivator,
If the file is moved to the ear/META-INF as the only one there is no activation.
If the ear and a jar contain it it will fail with a org.jboss.msc.service.DuplicateServiceException.",,,,,,,,,,,,,,,,,,WFCORE-1235,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1317,,,,,,0.0,1.0,,1|i00d7r:,9223372036854775807,,,,,,,,,,,23/Feb/16 10:17 AM;Takis;The PR does enable the activation of the service if the the ServiceActivator only exists on the EAR deployment level (It should be inside the jar module as well).,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to specify alias for PKCS11 provider,WFCORE-1233,12596898,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Rejected,dlofthouse,mchoma,mchoma,16/Dec/15 8:52 AM,03/Mar/16 5:22 AM,29/Nov/16 3:52 PM,03/Mar/16 5:22 AM,2.0.4.Final,,,,,,3.0.0.Alpha1,,Security,,,,,0,deprecated,,,,,"Unable to specify keystore alias for PKCS11 provider in SSL for security realm.

Specifying keystore alias works only for JKS keystore as stated here:
{code:xml}
                 <xs:attribute name=""alias"" type=""xs:string"" use=""optional"">
                     <xs:annotation>
                         <xs:documentation>
                             The alias of the entry to use from the keystore, if specified all remaining
                             entries in the keystore will be ignored.
                             Note: The use of aliases is only available for JKS based stores, for other store types this will be ignored.
                         </xs:documentation>
                     </xs:annotation>
                 </xs:attribute>
{code}
",,,,,,,,,,,,,,,,JBEAP-2433,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,,,0.0,1.0,,1|i00d47:,9223372036854775807,,,,"1. setup nss tools to hold 2 keys (alias1 and alias2) based on
https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.3/html/Security_Guide/Enable_FIPS_140-2_Cryptography_for_SSL_on_Red_Hat_Enterprise_Linux_6.html

2. jboss-cli.sh -c ""/core-service=management/security-realm=ManagementRealm/server-identity=ssl:add(keystore-provider=PKCS11, keystore-password=pass123+, alias=alias2)""

3. alias1 is used",,,,,,,03/Mar/16 5:22 AM;dlofthouse;Marking this one as rejected as we do not plan to start adding additional features to the existing realms - however the ability to filter all KeyStore types has already been added to WildFly Elytron so as soon as we start using Elytron this kind of filtering will be possible for PKCS#11 KeyStores.,,,,,,,,,,,,,,,,,,,,,,,,,,
Adjust patching tests to use merged patches,WFCORE-1232,12596843,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmartisk,jmartisk,jmartisk,16/Dec/15 3:34 AM,22/Jan/16 7:39 PM,29/Nov/16 3:52 PM,22/Jan/16 7:39 PM,2.0.4.Final,,,,,,2.0.8.Final,,Patching ,Test Suite,,,,0,,,,,,WFCORE-838 introduced a new way of joining multiple patches together - merging them into one. This needs some test coverage in patching TS.,,,,,,,,,,,,,,,,JBEAP-2429,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1287,,,,,,0.0,0.0,,1|i00cs7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove OSGi bundle related patching tests,WFCORE-1231,12596839,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jmartisk,jmartisk,jmartisk,16/Dec/15 3:16 AM,30/Mar/16 10:42 AM,29/Nov/16 3:52 PM,30/Mar/16 10:42 AM,2.0.4.Final,,,,,,3.0.0.Alpha1,,Patching ,Test Suite,,,,0,,,,,,"OSGi is no longer supported, there's no point in keeping these tests.
This affects unit tests in the 'patching' module and the patching module of integration TS.",,,,,,,,,,,,,,,,JBEAP-2428,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1295,,,,,,0.0,0.0,,1|i00crj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reloading the embed host controller logs ERROR messages,WFCORE-1229,12596818,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,brian.stansberry,15/Dec/15 5:24 PM,29/Jan/16 5:35 PM,29/Nov/16 3:52 PM,29/Jan/16 5:35 PM,2.0.2.Final,,,,,,2.0.8.Final,,CLI,,,,,0,,,,,,"Embed host controller sometime logs ERROR message while booting up after the reload ('reload --host=master --admin-only=true').
{noformat}
ERROR [org.jboss.as.controller.management-operation] (main) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([(""host"" => ""master"")]) - failure description: ""WFLYCTL0030: No resource definition is registered for address [(\""host\"" => \""master\"")]""
{noformat}

My initial thought on this was that issue is reproducible only on virtualized systems as I saw the error only a few times on my local machine, but I tried some bare-metal servers in MWQE lab and the error poped-up quite often there.

*Reproducer job* (#6 and #7 ran with 7.0.0.ER2 bits) :
 \- https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-cli-embed-host-reload/


In extreme cases, error can appear after every other reload operation (46 out of 99)
 \- https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-cli-embed-host-reload/7/jdk=java1.8,label_exp=eap-sustaining&&EAP-RHEL7/console",,,,,,,,,,,,,,,,JBEAP-2166,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,+,+,?,,,,,,,,,,,,0.0,3.0,,1|i00cmv:,9223372036854775807,,,,"{noformat}
unzip -q jboss-eap-7.0.0.ER2.zip
cd jboss-eap-7.0/bin

RELOAD='reload --host=master --admin-only=true' 
echo 'embed-host-controller --std-out=echo' > test.cli 
for i in {1..99} ; do echo ""echo ${i}."" >> test.cli ; echo $RELOAD >> test.cli ; done

./jboss-cli.sh --file=test.cli
{noformat}",,,,,,,15/Dec/15 6:20 PM;luck3y;- Doesn't seem to occur running against just wildfly-core from master.,"15/Dec/15 6:22 PM;luck3y;Also not occuring with wildfly from master.

","16/Dec/15 3:19 PM;luck3y;I am able to get this to log if I start 3 concurrent instances (doesn't happen with < 3) of the test, I'm investigating.",,,,,,,,,,,,,,,,,,,,,,,,
undeploying disabled deployment stops service for same runtime-name in DeploymentUndeployHandler ,WFCORE-1226,12596678,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,15/Dec/15 3:35 AM,01/Nov/16 11:14 AM,29/Nov/16 3:52 PM,08/Jan/16 12:54 AM,2.0.4.Final,,,,,,2.0.6.Final,,Domain Management,,,,,0,,,,,,"{noformat}
1. Start EAP 6.4.4 in domain mode and deploy application using following CLI command:
~~
[domain@localhost:9999 /] deploy /Applications/WebApp-1.war --server-groups=main-server-group --name=WebApp-1.war --runtime-name=WebApp-1.war
~~~
2. Deploy next version of application in ""disabled"" state with same ""runtime-name""  
~~~
[domain@localhost:9999 /] deploy /Applications/WebApp-2.war --disabled --name=WebApp-2.war --runtime-name=WebApp-1.war 
~~~

3. Now use replace-deployment command to access latest version of application:
~~~
[domain@localhost:9999 /] /server-group=main-server-group:replace-deployment(name=WebApp-2.war,to-replace=WebApp-1.war)
~~~
its working fine,laest version of application is accessable.

4. Now try to undeploy old version of application
~~~
/server-group=main-server-group/deployment=WebApp-1.war:undeploy()
~~~
After undploying older version, we are not able to access(404) latest version of application(WebApp-2.war) as well.To access it we have to redeploy it. 
Same steps are working fine in Standalone mode.
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,22/Dec/15 9:01 PM;soul2zimate;WFCORE-1226-wildflytest.patch;https://issues.jboss.org/secure/attachment/12396296/WFCORE-1226-wildflytest.patch,22/Dec/15 9:00 PM;soul2zimate;WFCORE-1226.patch;https://issues.jboss.org/secure/attachment/12396297/WFCORE-1226.patch,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1280262,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1345,,,,,,2.0,7.0,,1|i00bsn:,9223372036854775807,,,,,,,,,,,15/Dec/15 3:38 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1280262|https://bugzilla.redhat.com/show_bug.cgi?id=1280262] from NEW to ASSIGNED,"05/Jan/16 2:05 PM;ctomc;you marked that this is issue in WFCORE 2.0.4, aka currently latest, but description about reproducing is on EAP 6.4.4 which is much older code.
Can you confirm that problem exists in both versions?","05/Jan/16 6:47 PM;soul2zimate;Yes, it exists in both versions.",08/Jan/16 1:00 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1280262|https://bugzilla.redhat.com/show_bug.cgi?id=1280262] from ASSIGNED to POST,28/Mar/16 5:29 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1280262|https://bugzilla.redhat.com/show_bug.cgi?id=1280262] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1280262|https://bugzilla.redhat.com/show_bug.cgi?id=1280262] from MODIFIED to POST,01/Nov/16 11:14 AM;jira-bugzilla-migration;Aurel Pintea <apintea@redhat.com> changed the Status of [bug 1280262|https://bugzilla.redhat.com/show_bug.cgi?id=1280262] from MODIFIED to ON_QA,,,,,,,,,,,,,,,,,,,,
Connecting to controller via new CommandContext instance leak threads,WFCORE-1218,12596616,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,aloubyansky,aloubyansky,aloubyansky,14/Dec/15 10:40 AM,16/Dec/15 6:01 PM,29/Nov/16 3:52 PM,16/Dec/15 6:01 PM,,,,,,,2.0.5.CR1,,CLI,,,,,0,,,,,,"Connecting to a controller via a new CommandContext always [init a new console|https://github.com/jbossas/wildfly-core-eap/commit/9083ca79b4e30a186ac5bd7050e578518a51396c#diff-c929deeb25b1e0886f6c256907ea7c44R987] which could lead into ""OutOfMemoryError: unable to create new native thread"" as initBasicConsole() creates a pair of Aesh thread which are not cleaned up with terminateSession(). 

{code:java}
import org.jboss.as.cli.scriptsupport.CLI;

CLI cli = CLI.newInstance();
for (int i = 1; i <= tries; i++) {
            cli.connect();
            cli.disconnect();
}
{code}

Reproducer waits for 10s after every 50 connections, that's where the steps on the graph comes from:
!7.0.0.er2.png|thumbnail!

Regression against 7.0.0.ER1 and 6.4.x",,,,,,,,,,,,,,,,JBEAP-2202,,,,,,,,,,,,,,,,,,,,,,,,+,?,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1311,,,,,,0.0,0.0,,1|i00ben:,9223372036854775807,,,,"{noformat}
cd $JBOSS_HOME/bin
./standalone.sh &
JAR=$JBOSS_HOME/bin/client/jboss-cli-client.jar
javac -cp $JAR Demo.java ; java -cp .:$JAR Demo

###########   ACTIVE THREADS COUNT   ###########
#    1  (+1)
Wait before the test, attach VisualVM or other monitoring tool here.
Press ""enter"" to continue . . . 
...
Exception in thread ""main"" java.lang.IllegalStateException: Unable to initialize command context.
	at org.jboss.as.cli.scriptsupport.CLI.connect(CLI.java:83)
	at Demo.main(Demo.java:40)
Caused by: org.jboss.as.cli.CliInitializationException: Failed to initialize Aesh console
	at org.jboss.as.cli.impl.Console$Factory.getConsole(Console.java:121)
	at org.jboss.as.cli.impl.Console$Factory.getConsole(Console.java:112)
	at org.jboss.as.cli.impl.CommandContextImpl.initBasicConsole(CommandContextImpl.java:389)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:987)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:980)
	at org.jboss.as.cli.scriptsupport.CLI.connect(CLI.java:81)
	... 1 more
Caused by: java.lang.OutOfMemoryError: unable to create new native thread
	at java.lang.Thread.start0(Native Method)
	at java.lang.Thread.start(Thread.java:714)
	at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:950)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1357)
	at java.util.concurrent.Executors$DelegatedExecutorService.execute(Executors.java:668)
	at org.jboss.aesh.console.reader.ConsoleInputSession.startReader(ConsoleInputSession.java:83)
	at org.jboss.aesh.console.reader.ConsoleInputSession.<init>(ConsoleInputSession.java:60)
	at org.jboss.aesh.terminal.POSIXTerminal.init(POSIXTerminal.java:105)
	at org.jboss.aesh.console.Console.init(Console.java:188)
	at org.jboss.aesh.console.Console.<init>(Console.java:118)
	at org.jboss.as.cli.impl.Console$Factory.getConsole(Console.java:119)
	... 6 more
{noformat}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operation headers not propagated to domain servers when 'composite' op is used,WFCORE-1214,12596498,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,brian.stansberry,brian.stansberry,11/Dec/15 6:17 PM,28/Nov/16 7:49 PM,29/Nov/16 3:52 PM,16/Dec/15 5:48 PM,2.0.4.Final,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"When the user adds request headers to an op, they are not propagated to the servers during domain rollout if the 'composite' op is involved.

For example, if I add some stdout printing of what the headers are on the various processes and invoke this:

{code}
[domain@localhost:9990 /] deploy ~/tmp/helloworld.war --headers={blocking-timeout=5;rollback-on-runtime-failure=false} --all-server-groups
{code}

Then on a HC with two servers, this is logged:

[Host Controller] 10:53:40,697 INFO  [stdout] (management-handler-thread - 3) ""composite"" headers: {
[Host Controller] 10:53:40,697 INFO  [stdout] (management-handler-thread - 3)     ""blocking-timeout"" => ""5"",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     ""rollback-on-runtime-failure"" => ""false"",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     ""caller-type"" => ""user"",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     ""access-mechanism"" => ""NATIVE""
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3) }
[Host Controller] 10:53:40,727 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location /Users/bstansberry/dev/wildfly/wildfly-core/dist/target/wildfly-core-2.0.5.Final-SNAPSHOT/domain/data/content/6f/cd9eae343ed6d5aa9fffa83012d155b1ef911c/content
[Server:server-one] 10:53:40,772 INFO  [stdout] (ServerService Thread Pool -- 11) ""composite"" headers: null
[Server:server-two] 10:53:40,772 INFO  [stdout] (ServerService Thread Pool -- 11) ""composite"" headers: null

The HC logs, then the servers report. The user-specified headers are not included.

Invoke the same op without the batch and this is logged:

{code}
[Host Controller] 10:43:50,400 INFO  [stdout] (management-handler-thread - 4) ""composite"" headers: {
[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     ""blocking-timeout"" => ""5"",
[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     ""rollback-on-runtime-failure"" => ""false"",
[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     ""caller-type"" => ""user"",
[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     ""access-mechanism"" => ""NATIVE""
[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4) }
[Host Controller] 10:43:50,425 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location /Users/bstansberry/dev/wildfly/wildfly-core/dist/target/wildfly-core-2.0.5.Final-SNAPSHOT/domain/data/content/6f/cd9eae343ed6d5aa9fffa83012d155b1ef911c/content
[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11) ""composite"" headers: {
[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     ""blocking-timeout"" => ""5"",
[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     ""rollback-on-runtime-failure"" => ""false"",
[Server:server-one] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11) ""composite"" headers: {
[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     ""access-mechanism"" => ""NATIVE"",
[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     ""blocking-timeout"" => ""5"",
[Server:server-two] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     ""domain-uuid"" => ""216d2e99-dba5-4c89-8020-b0c16bd553c5""
[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     ""rollback-on-runtime-failure"" => ""false"",
[Server:server-two] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11) }
[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     ""access-mechanism"" => ""NATIVE"",
[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     ""domain-uuid"" => ""216d2e99-dba5-4c89-8020-b0c16bd553c5""
[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11) }
{code}

Expected headers are present.

Note the CLI 'deploy' is far from the only time the 'composite' op is used. Among other places, the high level CLI 'batch' command in a domain involves use of 'composite'.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1305,,,,,,0.0,1.0,,1|i00aon:,9223372036854775807,,,,,,,,,,,"28/Nov/16 7:49 PM;brian.stansberry;The WFCORE-1214 fix causes WFCORE-2055 by dropping headers from steps in a composite op, resulting in the domain server not recognizing that a local write was initiated by the caller rather than by the HC.",,,,,,,,,,,,,,,,,,,,,,,,,,
Graceful shutdown is interfering with the 'kill' and 'destroy' operations,WFCORE-1213,12596496,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,11/Dec/15 5:27 PM,16/Dec/15 5:56 PM,29/Nov/16 3:52 PM,16/Dec/15 5:56 PM,2.0.4.Final,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"The 'kill' and 'destroy' operations on the HC are meant to force shutdown of misbehaving servers. But the graceful shutdown work ([1]) has introduced a management op into the mix. I believe that should be removed, as its not the intent of these operations to try and be graceful; the regular 'stop' ops are for that.

When experimenting with how domains react to OOME servers as part of my WFCORE-378 work I'm seeing 'kill' and 'destroy' no longer function because the OOME on the server means the graceful shutdown management op hangs.


[1] https://github.com/wildfly/wildfly-core/commit/6e95b5#diff-ecdfa997cd57af67393e4962b54ead64",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1308,,,,,,0.0,0.0,,1|i00ao7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestModule does not clean up after itself properly,WFCORE-1212,12596479,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,brian.stansberry,brian.stansberry,11/Dec/15 1:04 PM,22/Dec/15 3:44 AM,29/Nov/16 3:52 PM,16/Dec/15 5:55 PM,2.0.4.Final,,,,,,2.0.5.CR1,,Test Suite,,,,,0,,,,,,"TestModule.create() calls mkdirs() to create its filesystem structure, but remove() only removes the dir above 'main' and below, leaving behind intermediate dirs.

The result of this is if you run the full testsuite with -Dts.basic, the dist/target/wildflyxxx/modules dir ends up with child dir 'test' in addition to the proper 'system'.

I'm not sure why this spurious dir doesn't end up in the final dists we publish. Perhaps its just luck due to the release process not running the testsuite when the final build with the 'deploy' target is invoked. I know my process for releasing WildFly Core doesn't re-run tests in that step.

Once remove() does its current work it should walk up the filesystem tree until it gets to the file returned by getModulesDir(). For each level in the tree it should check if that file is a dir with no children and if it is it should remove the dir. 

https://issues.jboss.org/browse/JBEAP-2374",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1307,,,,,,0.0,2.0,,1|i00akf:,9223372036854775807,,,,,,,,,,,"11/Dec/15 3:48 PM;luck3y;Reproducible in wildfy with:

mvn test -pl testsuite/integration/basic -Dts.basic -Dtest=org.jboss.as.test.integration.weld.modules.deployment.StaticModuleToDeploymentVisibilityEarTest -Dversion.org.wildfly.core=2.0.5.Final-SNAPSHOT","11/Dec/15 4:08 PM;brian.stansberry;BTW, I confirmed with Jason that the reason this doesn't end up polluting the dists we publish to repository.jboss.org is that the command that he uses pushes to nexus is:

mvn clean deploy -DskipTests -DallTests -Drelease

So any previous pollution is cleaned and tests are skipped preventing new pollution.",,,,,,,,,,,,,,,,,,,,,,,,,
Transformations are not triggered for aliases,WFCORE-1210,12596443,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,kabirkhan,rhusar,rhusar,11/Dec/15 9:47 AM,11/Jan/16 12:39 PM,29/Nov/16 3:52 PM,16/Dec/15 5:57 PM,2.0.4.Final,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"Currently only operations passed in to the controller by the client are passed over to the transformers. So if you have an alias /an=alias mapping to /some=resource, and a transformer mapped for /some=resource:

    /some=resource:add gets transformed
   /an=alias:add does not get transformed.

Behind the scenes /an=alias:add ends up in AliasStepHandler, which adds the step to invoke the real /some=resource:add. Unfortunately the /some=resource:add does not get passed to the transformers.
The transformer framework should use the same logic as AliasStepHandler to map the alias to the real address and the transform that.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1309,,,,,,0.0,0.0,,1|i00ad3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jboss-cli.sh ignoring invalid attribute when used in batch mode,WFCORE-1209,12596190,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,abhijithumbe,abhijithumbe,10/Dec/15 12:28 AM,10/Nov/16 8:50 PM,29/Nov/16 3:52 PM,23/Dec/15 12:02 AM,2.0.4.Final,,,,,,2.0.5.Final,,CLI,,,,,0,,,,,,CLI did not throw any error message and just ignored the invalid attribute while using in batch mode.If we use same CLI command in non-batch mode it throws exception.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1289467,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1302,,,,,,0.0,6.0,,1|i008x3:,9223372036854775807,,,,"In following CLI command we are using invalid attribute ""blocking-timeout-millis"", valid attribute is ""blocking-timeout-wait-millis"" 

Batch mode:
==========
[standalone@localhost:9999 /] batch 
[standalone@localhost:9999 / #] /subsystem=datasources/data-source=TestDS:add(connection-url=""jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE"",driver-name=h2,jndi-name=java:/jboss/datasources/TestDS,blocking-timeout-millis=1000)
[standalone@localhost:9999 / #] run-batch 
The batch executed successfully
[standalone@localhost:9999 /] 


Standalone command:
==================
[standalone@localhost:9999 /] /subsystem=datasources/data-source=TestDS:add(connection-url=""jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE"",driver-name=h2,jndi-name=java:/jboss/datasources/TestDS,blocking-timeout-millis=1000)
'blocking-timeout-millis' is not found among the supported properties: [share-prepared-statements, driver-class, prepared-statements-cache-size, spy, password, max-pool-size, set-tx-query-timeout, jndi-name, url-delimiter, enabled, connectable, blocking-timeout-wait-millis, statistics-enabled, pool-use-strict-min, validate-on-match, transaction-isolation, jta, valid-connection-checker-class-name, allocation-retry-wait-millis, exception-sorter-properties, background-validation-millis, track-statements, use-fast-fail, flush-strategy, stale-connection-checker-class-name, exception-sorter-class-name, background-validation, check-valid-connection-sql, reauth-plugin-class-name, allow-multiple-users, url-selector-strategy-class-name, user-name, use-ccm, reauth-plugin-properties, driver-name, stale-connection-checker-properties, datasource-class, idle-timeout-minutes, query-timeout, use-java-context, valid-connection-checker-properties, min-pool-size, allocation-retry, security-domain, new-connection-sql, connection-url, use-try-lock, pool-prefill]",,,,,,,10/Dec/15 2:20 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from NEW to ASSIGNED,15/Dec/15 10:25 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from ASSIGNED to POST,28/Mar/16 5:39 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from MODIFIED to POST,01/Nov/16 11:14 AM;jira-bugzilla-migration;Aurel Pintea <apintea@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from MODIFIED to ON_QA,10/Nov/16 8:50 PM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1289467|https://bugzilla.redhat.com/show_bug.cgi?id=1289467] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
Infinite loop when login to the admin console,WFCORE-1206,12596267,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,pierre.clermont,pierre.clermont,10/Dec/15 9:04 AM,16/Dec/15 7:37 PM,29/Nov/16 3:52 PM,16/Dec/15 7:37 PM,,,,,,,2.0.5.Final,,Domain Management,,,,,0,,,,,,"After create an user using the add-user.sh script, it is impossible to access to the admin console.
",Linux Suse 64 bits,,,,,,,,,,,,,,,,,,,,,,,,,,10/Dec/15 9:03 AM;pierre.clermont;stack.log;https://issues.jboss.org/secure/attachment/12395881/stack.log,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1301,,,,,,1.0,0.0,,1|i009br:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LDAP authentication/authorization fails due to making unneeded role lookup requests,WFCORE-1202,12595992,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dehort,bmaxwell,bmaxwell,09/Dec/15 11:50 AM,17/Feb/16 4:05 AM,29/Nov/16 3:52 PM,16/Dec/15 5:53 PM,,,,,,,2.0.5.CR1,,Security,,,,,0,,,,,,LDAP authentication/authorization fails due to making unneeded role lookup requests,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1196343,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1306,,,,,,0.0,15.0,,1|i007pr:,9223372036854775807,,,,,,,,,,,11/Dec/15 2:06 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ASSIGNED to POST,16/Dec/15 8:27 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from POST to MODIFIED,16/Dec/15 12:20 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from MODIFIED to ON_QA,07/Jan/16 7:39 AM;jira-bugzilla-migration;Ondrej Lukas <olukas@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ON_QA to ASSIGNED,08/Jan/16 6:22 PM;jira-bugzilla-migration;dhorton@redhat.com changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ASSIGNED to POST,11/Jan/16 2:39 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from POST to MODIFIED,11/Jan/16 2:49 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from MODIFIED to ASSIGNED,11/Jan/16 5:20 PM;jira-bugzilla-migration;dhorton@redhat.com changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ASSIGNED to POST,12/Jan/16 8:05 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from POST to MODIFIED,12/Jan/16 12:03 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from MODIFIED to ON_QA,20/Jan/16 7:56 AM;jira-bugzilla-migration;Ondrej Lukas <olukas@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ON_QA to ASSIGNED,25/Jan/16 4:00 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ASSIGNED to ON_QA,26/Jan/16 7:49 AM;jira-bugzilla-migration;Ondrej Lukas <olukas@redhat.com> changed the Status of [bug 1196343|https://bugzilla.redhat.com/show_bug.cgi?id=1196343] from ON_QA to VERIFIED,27/Jan/16 4:22 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1301732|https://bugzilla.redhat.com/show_bug.cgi?id=1301732] from NEW to ASSIGNED,17/Feb/16 4:05 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1301732|https://bugzilla.redhat.com/show_bug.cgi?id=1301732] from ASSIGNED to POST,,,,,,,,,,,,
Could not upload new deployment,WFCORE-1201,12595984,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,harald.pehl,cweiler,cweiler,09/Dec/15 10:53 AM,18/Mar/16 8:45 PM,29/Nov/16 3:52 PM,02/Mar/16 3:19 PM,1.0.2.Final,,,,,,2.1.0.Final,,Domain Management,,,,,3,,,,,,"WildFly stop to accept deployments via interface upload with following stacktrace:
ERROR [io.undertow.request] (XNIO-1 task-2) Undertow request failed HttpServerExchange{ POST /management-upload}: java.io.IOException: UT000036: Connection terminated parsing multipart data
	at io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:203)
	at org.jboss.as.domain.http.server.DomainApiGenericOperationHandler.handleRequest(DomainApiGenericOperationHandler.java:104)
	at io.undertow.server.handlers.encoding.EncodingHandler.handleRequest(EncodingHandler.java:72)
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:72)
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:68)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:68)
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:63)
	at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:56)
	at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:87)
	at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:52)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:199)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:774)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

Same artifact was used before with success, nothing changed.","2 different machines
Linux Debian Squeeze & Jessie
Oracle Java SE 8",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,11.0,,1|i007nz:,9223372036854775807,,,,"1. Go to management interface;
2. Button ""Add"";
3. Choose ""Upload a new deployment"";
4. Choose file (in my case a .ear);
5. Button ""Next"";
6. Button ""Finish"".
7. Error, go to log to get stack trace.",,,,,,,"09/Dec/15 10:56 AM;ctomc;1) can you reproduce this problem with WildFly 10 CR4?
2) how can this be reproduced?","09/Dec/15 1:19 PM;cweiler;Edited steps to reproduce.

There are theses thread on forum:
https://developer.jboss.org/thread/266665
https://developer.jboss.org/thread/266675

This is somehow new, it worked til pass weed, and started with more users.

As stated on 2nd link above, this is apparently related to browser, in my case it works on Firefox 42.0 32 bits, but not on Chrome 47.0.2526.73 64 bits.","09/Dec/15 3:31 PM;chandu.yelleti;Even, I am facing same problem. With version 8 I was able to deploy successfully. But now with 9.0.2 version I am facing issues.
 11:19:59,005 ERROR [io.undertow.request] (XNIO-1 task-6) Undertow request failed HttpServerExchange{ POST /management-upload}: java.io.IOException: UT000036: Connection terminated parsing multipart data
            at io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:203)
            at org.jboss.as.domain.http.server.DomainApiGenericOperationHandler.handleRequest(DomainApiGenericOperationHandler.java:104)
            at io.undertow.server.handlers.encoding.EncodingHandler.handleRequest(EncodingHandler.java:72)
            at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:72)
            at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:68)
            at java.security.AccessController.doPrivileged(Native Method)
            at javax.security.auth.Subject.doAs(Subject.java:422)
            at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
            at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:68)
            at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:63)
            at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:56)
            at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:87)
            at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:52)
            at io.undertow.server.Connectors.executeRootHandler(Connectors.java:199)
            at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:774)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
            at java.lang.Thread.run(Thread.java:745)","10/Dec/15 2:34 AM;jensenbox;I have a fresh Ubuntu 14.04 box with JDK 8u66. Downloaded and installed 9.0.2 - everything defaulted except changed network access restriction from localhost to <any-address/>

Went to upload my first war (Newest Jenkins.war) and bang - the same exact stack trace (From Chrome Version 47.0.2526.80 m (64-bit) on Windows)

*Tried on Edge (I am on a Windows 10 box) and it worked fine.*

Here is a HAR of the request - pay close attention to the WebKitFormBoundaryzPcf9yeUUQmAUC1C mime delimiter - I suspect WildFly is parsing it incorrectly or the JS that generates the request is malformed:

{{
{
  ""log"": {
    ""version"": ""1.2"",
    ""creator"": {
      ""name"": ""WebInspector"",
      ""version"": ""537.36""
    },
    ""pages"": [
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.043Z"",
        ""id"": ""page_1"",
        ""title"": ""http://192.168.16.5:9990/console/App.html"",
        ""pageTimings"": {
          ""onContentLoad"": 38.369999994756654,
          ""onLoad"": 61.5609999949811
        }
      }
    ],
    ""entries"": [
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.043Z"",
        ""time"": 5.850999994436279,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/App.html"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/App.html\"", algorithm=MD5, response=\""a09e1088bbfe224894085f19f729c642\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""Upgrade-Insecure-Requests"",
              ""value"": ""1""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/index.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 1007,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 631,
            ""mimeType"": ""text/html""
          },
          ""redirectURL"": """",
          ""headersSize"": 109,
          ""bodySize"": 0,
          ""_transferSize"": 109
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.40900000021793,
          ""dns"": 0.014999997802078002,
          ""connect"": 0.920999998925252,
          ""send"": 0.09800000407268006,
          ""wait"": 4.11699998949188,
          ""receive"": 0.29100000392645864,
          ""ssl"": -1
        },
        ""connection"": ""318604"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.059Z"",
        ""time"": 3.2470000005559996,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/app.nocache.js"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/app.nocache.js\"", algorithm=MD5, response=\""851d40f304c8d9cbce9c1f16dce3a597\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 924,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 7561,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": 109,
          ""bodySize"": 0,
          ""_transferSize"": 109
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.924000007216819,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.09999999019783112,
          ""wait"": 2.00900000345427,
          ""receive"": 0.2139999996870796,
          ""ssl"": -1
        },
        ""connection"": ""318604"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.059Z"",
        ""time"": 4.12700000742916,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/loading_lite.gif"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/images/loading_lite.gif\"", algorithm=MD5, response=\""7b63ede56dd96db8a9da658801098222\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 959,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 2545,
            ""mimeType"": ""image/gif""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.372000009519979,
          ""dns"": 0.004000001354142968,
          ""connect"": 1.0559999936958782,
          ""send"": 0.09400000271852993,
          ""wait"": 2.33200000366196,
          ""receive"": 0.26899999647867023,
          ""ssl"": -1
        },
        ""connection"": ""318614"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.067Z"",
        ""time"": 3.9939999987836927,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/font/font-awesome.css"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/font/font-awesome.css\"", algorithm=MD5, response=\""445925b006396ff0318402d8e2b58219\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""text/css,*/*;q=0.1""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 953,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 27232,
            ""mimeType"": ""text/css""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 1.53800001135096,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.1389999961247701,
          ""wait"": 2.1160000032978097,
          ""receive"": 0.20099998801015273,
          ""ssl"": -1
        },
        ""connection"": ""318614"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.068Z"",
        ""time"": 3.8740000018151477,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/workbench.css"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/workbench.css\"", algorithm=MD5, response=\""3f3b11d3460f2747cb82447b78e1126e\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""text/css,*/*;q=0.1""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 937,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 408,
            ""mimeType"": ""text/css""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 1.64000000222586,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.08699999307282003,
          ""wait"": 1.9409999949857597,
          ""receive"": 0.2060000115307079,
          ""ssl"": -1
        },
        ""connection"": ""318604"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.068Z"",
        ""time"": 4.769999999552965,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/lab.css"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/lab.css\"", algorithm=MD5, response=\""b8898ca037a3a8d35edeb38ce3eb8ee0\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""text/css,*/*;q=0.1""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 925,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 19768,
            ""mimeType"": ""text/css""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 1.08099999488331,
          ""dns"": 0.006000002031220086,
          ""connect"": 1.29000000015367,
          ""send"": 0.10199999087490008,
          ""wait"": 2.0630000071832897,
          ""receive"": 0.2280000044265753,
          ""ssl"": -1
        },
        ""connection"": ""318635"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.068Z"",
        ""time"": 5.871000001206994,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/custom-progress.css"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/custom-progress.css\"", algorithm=MD5, response=\""13a0f69f0108daa7b13dee07f7ae1420\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""text/css,*/*;q=0.1""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 949,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 11691,
            ""mimeType"": ""text/css""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 1.25300000945572,
          ""dns"": 0.0029999937396498755,
          ""connect"": 1.0469999979250102,
          ""send"": 0.08100000559351983,
          ""wait"": 3.23099999513943,
          ""receive"": 0.2559999993536639,
          ""ssl"": -1
        },
        ""connection"": ""318638"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.069Z"",
        ""time"": 23.211000006995164,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/2EC381471620DEDEB8B5B579DBC2A8C1.cache.js"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""5TIMKEsCv7ANMTQ0OTczMjE1NDQwObX1opUx5ywu1dfThc0yUek=\"", uri=\""/console/app/2EC381471620DEDEB8B5B579DBC2A8C1.cache.js\"", algorithm=MD5, response=\""ca969dedddec7c5093a26222d1e9ca58\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.9.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""If-Modified-Since"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""max-age=0""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.9.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 978,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 304,
          ""statusText"": ""Not Modified"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:52 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""0""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:16:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 1087424,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": 189,
          ""bodySize"": 0,
          ""_transferSize"": 189
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 1.09600000723731,
          ""dns"": 0.0029999937396500975,
          ""connect"": 1.0340000007999999,
          ""send"": 0.08300000627060022,
          ""wait"": 3.2599999976810095,
          ""receive"": 17.735000001266595,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.090Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/font/fontawesome-webfont.woff?v=3.2.1"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""v"",
              ""value"": ""3.2.1""
            }
          ],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET, POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/octet-stream""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type, WWW-Authenticate, Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""43572""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 43572,
            ""mimeType"": ""application/octet-stream""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""309021"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.450Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/fonts/OpenSans-Light.ttf"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET, POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/octet-stream""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type, WWW-Authenticate, Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""222412""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 222412,
            ""mimeType"": ""application/octet-stream""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308879"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.450Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/fonts/OpenSans-Regular.ttf"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:46 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET, POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/octet-stream""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type, WWW-Authenticate, Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""217360""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:24 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 217360,
            ""mimeType"": ""application/octet-stream""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308853"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.450Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/fonts/OpenSans-Semibold.ttf"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET, POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/octet-stream""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type, WWW-Authenticate, Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""221328""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 221328,
            ""mimeType"": ""application/octet-stream""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308889"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.450Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/fonts/OpenSans-Bold.ttf"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:20:05 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET, POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/octet-stream""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type, WWW-Authenticate, Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""224592""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:44 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 224592,
            ""mimeType"": ""application/octet-stream""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308879"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.456Z"",
        ""time"": 0.78600000415463,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/ga.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 06:34:11 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Thu, 05 Nov 2015 22:24:16 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""GFE/2.0""
            },
            {
              ""name"": ""Age"",
              ""value"": ""409""
            },
            {
              ""name"": ""Vary"",
              ""value"": ""Accept-Encoding""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""text/javascript""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=7200""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""16022""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:34:11 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 43082,
            ""mimeType"": ""text/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.154000008478761,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.22600000374950402,
          ""receive"": 0.405999991926365,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.457Z"",
        ""time"": 3.0860000115353614,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/deferredjs/2EC381471620DEDEB8B5B579DBC2A8C1/88.cache.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:46 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/javascript""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""1092824""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:24 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 1092824,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.156000009155832,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.22499999613501198,
          ""receive"": 2.7050000062445174,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.655Z"",
        ""time"": 1.1640000011539087,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/deferredjs/2EC381471620DEDEB8B5B579DBC2A8C1/87.cache.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:46 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/javascript""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""129779""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:24 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 129779,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.146999998833053,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.209999998332932,
          ""receive"": 0.8070000039879237,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.671Z"",
        ""time"": 480.8190000039758,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/r/__utm.gif?utmwv=5.6.7&utms=10&utmn=107132084&utmhn=192.168.16.5&utmcs=UTF-8&utmsr=1920x1200&utmvp=1110x1075&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=20.0%20r0&utmdt=JBoss%20Management&utmhid=1269371629&utmr=0&utmp=%2Fconsole%2FApp.html&utmht=1449732761668&utmac=UA-35829315-1&utmcc=__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&aip=1&utmjid=1140791534&utmredir=1&utmu=qAQAAAAAAAAAAAAAAAAAAAAE~"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Host"",
              ""value"": ""www.google-analytics.com""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""utmwv"",
              ""value"": ""5.6.7""
            },
            {
              ""name"": ""utms"",
              ""value"": ""10""
            },
            {
              ""name"": ""utmn"",
              ""value"": ""107132084""
            },
            {
              ""name"": ""utmhn"",
              ""value"": ""192.168.16.5""
            },
            {
              ""name"": ""utmcs"",
              ""value"": ""UTF-8""
            },
            {
              ""name"": ""utmsr"",
              ""value"": ""1920x1200""
            },
            {
              ""name"": ""utmvp"",
              ""value"": ""1110x1075""
            },
            {
              ""name"": ""utmsc"",
              ""value"": ""24-bit""
            },
            {
              ""name"": ""utmul"",
              ""value"": ""en-us""
            },
            {
              ""name"": ""utmje"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmfl"",
              ""value"": ""20.0%20r0""
            },
            {
              ""name"": ""utmdt"",
              ""value"": ""JBoss%20Management""
            },
            {
              ""name"": ""utmhid"",
              ""value"": ""1269371629""
            },
            {
              ""name"": ""utmr"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmp"",
              ""value"": ""%2Fconsole%2FApp.html""
            },
            {
              ""name"": ""utmht"",
              ""value"": ""1449732761668""
            },
            {
              ""name"": ""utmac"",
              ""value"": ""UA-35829315-1""
            },
            {
              ""name"": ""utmcc"",
              ""value"": ""__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B""
            },
            {
              ""name"": ""aip"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmjid"",
              ""value"": ""1140791534""
            },
            {
              ""name"": ""utmredir"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmu"",
              ""value"": ""qAQAAAAAAAAAAAAAAAAAAAAE~""
            }
          ],
          ""cookies"": [],
          ""headersSize"": 892,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Pragma"",
              ""value"": ""no-cache""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:53 GMT""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Sun, 17 May 1998 03:00:00 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""Golfe2""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/gif""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""no-cache, no-store, must-revalidate""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Fri, 01 Jan 1990 00:00:00 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35,
            ""mimeType"": ""image/gif"",
            ""compression"": 0
          },
          ""redirectURL"": """",
          ""headersSize"": 338,
          ""bodySize"": 35,
          ""_transferSize"": 373
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.415000002249144,
          ""dns"": 93.22399999655316,
          ""connect"": 192.86199999623966,
          ""send"": 0.10000000474900617,
          ""wait"": 193.962000004831,
          ""receive"": 0.25599999935383266,
          ""ssl"": -1
        },
        ""connection"": ""318673"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.739Z"",
        ""time"": 14.947000003303401,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/management"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Cookie"",
              ""value"": ""__utmt=1; __utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.10.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""sfKJe5QCKc4NMTQ0OTczMjcxMzIyMKnyC9txiQifqiYbQCdJHOQ=\"", uri=\""/management\"", algorithm=MD5, response=\""b027c29d83587ecabcecb42c2771b8e0\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""text/plain; charset=utf-8""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utmt"",
              ""value"": ""1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.10.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 868,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:53 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Authentication-Info"",
              ""value"": ""nextnonce=\""uEun7tLf0yENMTQ0OTczMjcxMzIyM3MZmYsiM9YmQo6oF03Urs8=\""""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""666""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/json; charset=utf-8""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 2426,
            ""mimeType"": ""application/json"",
            ""compression"": 1349
          },
          ""redirectURL"": """",
          ""headersSize"": 259,
          ""bodySize"": 1077,
          ""_transferSize"": 1336
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 3.52600000042003,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.0969999964581798,
          ""wait"": 11.00899999437389,
          ""receive"": 0.3150000120513017,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.763Z"",
        ""time"": 14.827999999397434,
        ""request"": {
          ""method"": ""POST"",
          ""url"": ""http://192.168.16.5:9990/management"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""cu+Pu3L4uYYNMTQ0OTczMjcxMzI0NLhI4mGotGaUI83JmJF02VU=\"", uri=\""/management\"", algorithm=MD5, response=\""78d41dd10681db0ad97d433f5998c6ba\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utmt=1; __utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.10.8.1449732040243; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""688""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utmt"",
              ""value"": ""1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.10.8.1449732040243"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 936,
          ""bodySize"": 688,
          ""postData"": {
            ""mimeType"": ""application/dmr-encoded"",
            ""text"": ""bwAAAAMACW9wZXJhdGlvbnMACWNvbXBvc2l0ZQAHYWRkcmVzc2wAAAAAAAVzdGVwc2wAAAAHbwAAAAMACW9wZXJhdGlvbnMADnJlYWQtYXR0cmlidXRlAARuYW1lcwAMcHJvY2Vzcy10eXBlAAdhZGRyZXNzbAAAAABvAAAAAwAJb3BlcmF0aW9ucwAOcmVhZC1hdHRyaWJ1dGUABG5hbWVzAAxwcm9kdWN0LW5hbWUAB2FkZHJlc3NsAAAAAG8AAAADAAlvcGVyYXRpb25zAA5yZWFkLWF0dHJpYnV0ZQAEbmFtZXMAEHJlbGVhc2UtY29kZW5hbWUAB2FkZHJlc3NsAAAAAG8AAAADAAlvcGVyYXRpb25zAA5yZWFkLWF0dHJpYnV0ZQAEbmFtZXMAD3Byb2R1Y3QtdmVyc2lvbgAHYWRkcmVzc2wAAAAAbwAAAAMACW9wZXJhdGlvbnMADnJlYWQtYXR0cmlidXRlAARuYW1lcwAPcmVsZWFzZS12ZXJzaW9uAAdhZGRyZXNzbAAAAABvAAAAAwAJb3BlcmF0aW9ucwAGd2hvYW1pAAdhZGRyZXNzbAAAAAAAB3ZlcmJvc2VaAW8AAAADAAlvcGVyYXRpb25zAA5yZWFkLWF0dHJpYnV0ZQAEbmFtZXMABG5hbWUAB2FkZHJlc3NsAAAAAA==""
          }
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:53 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded; charset=utf-8""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Authentication-Info"",
              ""value"": ""nextnonce=\""UM5oD5sXqAANMTQ0OTczMjcxMzI0NinnnKtDgZcE/z3VmZN3qAE=\""""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""WWW-Authenticate""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""333""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 652,
            ""mimeType"": ""application/dmr-encoded"",
            ""compression"": -425
          },
          ""redirectURL"": """",
          ""headersSize"": 599,
          ""bodySize"": 1077,
          ""_transferSize"": 1676
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 2.49600000097416,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.06399999256246014,
          ""wait"": 11.999000009382181,
          ""receive"": 0.2689999964786338,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.803Z"",
        ""time"": 387.85400000051595,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/__utm.gif?utmwv=5.6.7&utms=11&utmn=1074279448&utmhn=192.168.16.5&utmt=event&utme=5(bootstrap*exec-mode*standalone)&utmcs=UTF-8&utmsr=1920x1200&utmvp=1110x1075&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=20.0%20r0&utmdt=JBoss%20Management&utmhid=1269371629&utmr=0&utmp=%2Fconsole%2FApp.html&utmht=1449732761798&utmac=UA-35829315-1&utmcc=__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&aip=1&utmjid=&utmu=6AQAAAAAAAAAAAAAAAAAAAAE~"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Host"",
              ""value"": ""www.google-analytics.com""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""utmwv"",
              ""value"": ""5.6.7""
            },
            {
              ""name"": ""utms"",
              ""value"": ""11""
            },
            {
              ""name"": ""utmn"",
              ""value"": ""1074279448""
            },
            {
              ""name"": ""utmhn"",
              ""value"": ""192.168.16.5""
            },
            {
              ""name"": ""utmt"",
              ""value"": ""event""
            },
            {
              ""name"": ""utme"",
              ""value"": ""5(bootstrap*exec-mode*standalone)""
            },
            {
              ""name"": ""utmcs"",
              ""value"": ""UTF-8""
            },
            {
              ""name"": ""utmsr"",
              ""value"": ""1920x1200""
            },
            {
              ""name"": ""utmvp"",
              ""value"": ""1110x1075""
            },
            {
              ""name"": ""utmsc"",
              ""value"": ""24-bit""
            },
            {
              ""name"": ""utmul"",
              ""value"": ""en-us""
            },
            {
              ""name"": ""utmje"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmfl"",
              ""value"": ""20.0%20r0""
            },
            {
              ""name"": ""utmdt"",
              ""value"": ""JBoss%20Management""
            },
            {
              ""name"": ""utmhid"",
              ""value"": ""1269371629""
            },
            {
              ""name"": ""utmr"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmp"",
              ""value"": ""%2Fconsole%2FApp.html""
            },
            {
              ""name"": ""utmht"",
              ""value"": ""1449732761798""
            },
            {
              ""name"": ""utmac"",
              ""value"": ""UA-35829315-1""
            },
            {
              ""name"": ""utmcc"",
              ""value"": ""__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B""
            },
            {
              ""name"": ""aip"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmjid"",
              ""value"": """"
            },
            {
              ""name"": ""utmu"",
              ""value"": ""6AQAAAAAAAAAAAAAAAAAAAAE~""
            }
          ],
          ""cookies"": [],
          ""headersSize"": 920,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Pragma"",
              ""value"": ""no-cache""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Wed, 09 Dec 2015 06:41:17 GMT""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Sun, 17 May 1998 03:00:00 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""Golfe2""
            },
            {
              ""name"": ""Age"",
              ""value"": ""89436""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/gif""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""no-cache, no-store, must-revalidate""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Mon, 01 Jan 1990 00:00:00 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35,
            ""mimeType"": ""image/gif"",
            ""compression"": 0
          },
          ""redirectURL"": """",
          ""headersSize"": 350,
          ""bodySize"": 35,
          ""_transferSize"": 385
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.879999992321245,
          ""dns"": 0.009000010322779972,
          ""connect"": 193.34099999105098,
          ""send"": 0.0830000062709928,
          ""wait"": 193.31200000306103,
          ""receive"": 0.22899999748892697,
          ""ssl"": -1
        },
        ""connection"": ""318682"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.804Z"",
        ""time"": 395.1269999961369,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/__utm.gif?utmwv=5.6.7&utms=12&utmn=892439548&utmhn=192.168.16.5&utmt=event&utme=5(bootstrap*console-version*2.8.13.Final)&utmcs=UTF-8&utmsr=1920x1200&utmvp=1110x1075&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=20.0%20r0&utmdt=JBoss%20Management&utmhid=1269371629&utmr=0&utmp=%2Fconsole%2FApp.html&utmht=1449732761799&utmac=UA-35829315-1&utmcc=__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&aip=1&utmjid=&utmu=6AQAAAAAAAAAAAAAAAAAAAAE~"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Host"",
              ""value"": ""www.google-analytics.com""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""utmwv"",
              ""value"": ""5.6.7""
            },
            {
              ""name"": ""utms"",
              ""value"": ""12""
            },
            {
              ""name"": ""utmn"",
              ""value"": ""892439548""
            },
            {
              ""name"": ""utmhn"",
              ""value"": ""192.168.16.5""
            },
            {
              ""name"": ""utmt"",
              ""value"": ""event""
            },
            {
              ""name"": ""utme"",
              ""value"": ""5(bootstrap*console-version*2.8.13.Final)""
            },
            {
              ""name"": ""utmcs"",
              ""value"": ""UTF-8""
            },
            {
              ""name"": ""utmsr"",
              ""value"": ""1920x1200""
            },
            {
              ""name"": ""utmvp"",
              ""value"": ""1110x1075""
            },
            {
              ""name"": ""utmsc"",
              ""value"": ""24-bit""
            },
            {
              ""name"": ""utmul"",
              ""value"": ""en-us""
            },
            {
              ""name"": ""utmje"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmfl"",
              ""value"": ""20.0%20r0""
            },
            {
              ""name"": ""utmdt"",
              ""value"": ""JBoss%20Management""
            },
            {
              ""name"": ""utmhid"",
              ""value"": ""1269371629""
            },
            {
              ""name"": ""utmr"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmp"",
              ""value"": ""%2Fconsole%2FApp.html""
            },
            {
              ""name"": ""utmht"",
              ""value"": ""1449732761799""
            },
            {
              ""name"": ""utmac"",
              ""value"": ""UA-35829315-1""
            },
            {
              ""name"": ""utmcc"",
              ""value"": ""__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B""
            },
            {
              ""name"": ""aip"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmjid"",
              ""value"": """"
            },
            {
              ""name"": ""utmu"",
              ""value"": ""6AQAAAAAAAAAAAAAAAAAAAAE~""
            }
          ],
          ""cookies"": [],
          ""headersSize"": 927,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Pragma"",
              ""value"": ""no-cache""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Wed, 09 Dec 2015 06:41:17 GMT""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Sun, 17 May 1998 03:00:00 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""Golfe2""
            },
            {
              ""name"": ""Age"",
              ""value"": ""89436""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/gif""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""no-cache, no-store, must-revalidate""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Mon, 01 Jan 1990 00:00:00 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35,
            ""mimeType"": ""image/gif"",
            ""compression"": 0
          },
          ""redirectURL"": """",
          ""headersSize"": 350,
          ""bodySize"": 35,
          ""_transferSize"": 385
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.698999996529892,
          ""dns"": 0.008999995770864078,
          ""connect"": 196.09300000593024,
          ""send"": 0.08699999307302164,
          ""wait"": 197.72200001170899,
          ""receive"": 0.5169999931238749,
          ""ssl"": -1
        },
        ""connection"": ""318686"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.815Z"",
        ""time"": 0.5930000043008476,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/deferredjs/2EC381471620DEDEB8B5B579DBC2A8C1/41.cache.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/javascript""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""11946""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 11946,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.150000007124618,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.202999988687224,
          ""receive"": 0.24000000848900566,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.841Z"",
        ""time"": 1.3189999881433323,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/deferredjs/2EC381471620DEDEB8B5B579DBC2A8C1/12.cache.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/javascript""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""18389""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 18389,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.119999996968545,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.675000002956949,
          ""receive"": 0.5239999882178383,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.841Z"",
        ""time"": 367.115000000922,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/__utm.gif?utmwv=5.6.7&utms=13&utmn=1977796543&utmhn=192.168.16.5&utmcs=UTF-8&utmsr=1920x1200&utmvp=1110x1075&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=20.0%20r0&utmdt=WildFly%20Full%20Management%20%7C%20pc005&utmhid=1269371629&utmr=0&utmp=home&utmht=1449732761838&utmac=UA-35829315-1&utmcc=__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&aip=1&utmjid=&utmu=6ASAAAAAAAAAAAAAAAAAAAAE~"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Host"",
              ""value"": ""www.google-analytics.com""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""utmwv"",
              ""value"": ""5.6.7""
            },
            {
              ""name"": ""utms"",
              ""value"": ""13""
            },
            {
              ""name"": ""utmn"",
              ""value"": ""1977796543""
            },
            {
              ""name"": ""utmhn"",
              ""value"": ""192.168.16.5""
            },
            {
              ""name"": ""utmcs"",
              ""value"": ""UTF-8""
            },
            {
              ""name"": ""utmsr"",
              ""value"": ""1920x1200""
            },
            {
              ""name"": ""utmvp"",
              ""value"": ""1110x1075""
            },
            {
              ""name"": ""utmsc"",
              ""value"": ""24-bit""
            },
            {
              ""name"": ""utmul"",
              ""value"": ""en-us""
            },
            {
              ""name"": ""utmje"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmfl"",
              ""value"": ""20.0%20r0""
            },
            {
              ""name"": ""utmdt"",
              ""value"": ""WildFly%20Full%20Management%20%7C%20pc005""
            },
            {
              ""name"": ""utmhid"",
              ""value"": ""1269371629""
            },
            {
              ""name"": ""utmr"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmp"",
              ""value"": ""home""
            },
            {
              ""name"": ""utmht"",
              ""value"": ""1449732761838""
            },
            {
              ""name"": ""utmac"",
              ""value"": ""UA-35829315-1""
            },
            {
              ""name"": ""utmcc"",
              ""value"": ""__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B""
            },
            {
              ""name"": ""aip"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmjid"",
              ""value"": """"
            },
            {
              ""name"": ""utmu"",
              ""value"": ""6ASAAAAAAAAAAAAAAAAAAAAE~""
            }
          ],
          ""cookies"": [],
          ""headersSize"": 876,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Pragma"",
              ""value"": ""no-cache""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Wed, 09 Dec 2015 06:41:17 GMT""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Sun, 17 May 1998 03:00:00 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""Golfe2""
            },
            {
              ""name"": ""Age"",
              ""value"": ""89436""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/gif""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""no-cache, no-store, must-revalidate""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Mon, 01 Jan 1990 00:00:00 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35,
            ""mimeType"": ""image/gif"",
            ""compression"": 0
          },
          ""redirectURL"": """",
          ""headersSize"": 350,
          ""bodySize"": 35,
          ""_transferSize"": 385
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.501000002259389,
          ""dns"": 0.010999996447935034,
          ""connect"": 182.58900000364568,
          ""send"": 0.11299998732198446,
          ""wait"": 183.66300000343503,
          ""receive"": 0.2380000078119906,
          ""ssl"": -1
        },
        ""connection"": ""318698"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.850Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/logo/community_title.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""636""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 636,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308889"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.850Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/blank.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""166""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 166,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308853"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.871Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/deployments.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""39653""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 39653,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308889"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.872Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/configuration.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""48616""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 48616,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308853"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.872Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/runtime.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""32535""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 32535,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308886"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.873Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/access_control.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""33141""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 33141,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308879"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.873Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/patching.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""37221""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 37221,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308838"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:41.873Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/images/homepage/help.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:19:51 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:30 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35671""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35671,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308838"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:45.306Z"",
        ""time"": 18.50400000694208,
        ""request"": {
          ""method"": ""POST"",
          ""url"": ""http://192.168.16.5:9990/management"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""0t4NLj5Xo24NMTQ0OTczMjcxNjc4N7SkW+ooUPXnFAr6c8AwkwY=\"", uri=\""/management\"", algorithm=MD5, response=\""2bf1c4edbcf36fa7961ae420e48ac62f\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utmt=1; __utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.13.8.1449732761797; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""272""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utmt"",
              ""value"": ""1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.13.8.1449732761797"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 936,
          ""bodySize"": 272,
          ""postData"": {
            ""mimeType"": ""application/dmr-encoded"",
            ""text"": ""bwAAAAMACW9wZXJhdGlvbnMACWNvbXBvc2l0ZQAHYWRkcmVzc2wAAAAAAAVzdGVwc2wAAAABbwAAAAUAB2FkZHJlc3NsAAAAAXAACmRlcGxveW1lbnRzAAEqAAlvcGVyYXRpb25zABlyZWFkLXJlc291cmNlLWRlc2NyaXB0aW9uAApvcGVyYXRpb25zWgEADmFjY2Vzcy1jb250cm9scwAVY29tYmluZWQtZGVzY3JpcHRpb25zAA9pbmNsdWRlLWFsaWFzZXNaAQ==""
          }
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:56 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""Transfer-Encoding"",
              ""value"": ""chunked""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded; charset=utf-8""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Authentication-Info"",
              ""value"": ""nextnonce=\""kqTqzJtewDMNMTQ0OTczMjcxNjc4OT68cwxxWu45PcsBSj1eMs0=\""""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""WWW-Authenticate""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Authorization""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 34897,
            ""mimeType"": ""application/dmr-encoded"",
            ""compression"": 24750
          },
          ""redirectURL"": """",
          ""headersSize"": 606,
          ""bodySize"": 10147,
          ""_transferSize"": 10753
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 2.81700000050478,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.0790000049164501,
          ""wait"": 15.09899999655317,
          ""receive"": 0.5090000049676782,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:45.372Z"",
        ""time"": 0.8369999995920807,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/deferredjs/2EC381471620DEDEB8B5B579DBC2A8C1/34.cache.js"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:20:05 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/javascript""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""9591""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:44 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 9591,
            ""mimeType"": ""application/javascript""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.173999986145645,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.370000008842908,
          ""receive"": 0.2930000046035277,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:45.396Z"",
        ""time"": 184.24999999115244,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://www.google-analytics.com/__utm.gif?utmwv=5.6.7&utms=14&utmn=620047438&utmhn=192.168.16.5&utmcs=UTF-8&utmsr=1920x1200&utmvp=1110x1075&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=20.0%20r0&utmdt=WildFly%20Full%20Management%20%7C%20pc005&utmhid=1269371629&utmr=0&utmp=standalone-deployments&utmht=1449732765392&utmac=UA-35829315-1&utmcc=__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&aip=1&utmjid=&utmu=6ASAAAAAAAAAAAAAAAAAAAAE~"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Accept"",
              ""value"": ""image/webp,image/*,*/*;q=0.8""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate, sdch""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Host"",
              ""value"": ""www.google-analytics.com""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [
            {
              ""name"": ""utmwv"",
              ""value"": ""5.6.7""
            },
            {
              ""name"": ""utms"",
              ""value"": ""14""
            },
            {
              ""name"": ""utmn"",
              ""value"": ""620047438""
            },
            {
              ""name"": ""utmhn"",
              ""value"": ""192.168.16.5""
            },
            {
              ""name"": ""utmcs"",
              ""value"": ""UTF-8""
            },
            {
              ""name"": ""utmsr"",
              ""value"": ""1920x1200""
            },
            {
              ""name"": ""utmvp"",
              ""value"": ""1110x1075""
            },
            {
              ""name"": ""utmsc"",
              ""value"": ""24-bit""
            },
            {
              ""name"": ""utmul"",
              ""value"": ""en-us""
            },
            {
              ""name"": ""utmje"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmfl"",
              ""value"": ""20.0%20r0""
            },
            {
              ""name"": ""utmdt"",
              ""value"": ""WildFly%20Full%20Management%20%7C%20pc005""
            },
            {
              ""name"": ""utmhid"",
              ""value"": ""1269371629""
            },
            {
              ""name"": ""utmr"",
              ""value"": ""0""
            },
            {
              ""name"": ""utmp"",
              ""value"": ""standalone-deployments""
            },
            {
              ""name"": ""utmht"",
              ""value"": ""1449732765392""
            },
            {
              ""name"": ""utmac"",
              ""value"": ""UA-35829315-1""
            },
            {
              ""name"": ""utmcc"",
              ""value"": ""__utma%3D90056923.1686571505.1449732035.1449732035.1449732035.1%3B%2B__utmz%3D90056923.1449732035.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B""
            },
            {
              ""name"": ""aip"",
              ""value"": ""1""
            },
            {
              ""name"": ""utmjid"",
              ""value"": """"
            },
            {
              ""name"": ""utmu"",
              ""value"": ""6ASAAAAAAAAAAAAAAAAAAAAE~""
            }
          ],
          ""cookies"": [],
          ""headersSize"": 893,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Pragma"",
              ""value"": ""no-cache""
            },
            {
              ""name"": ""Date"",
              ""value"": ""Wed, 09 Dec 2015 06:41:17 GMT""
            },
            {
              ""name"": ""X-Content-Type-Options"",
              ""value"": ""nosniff""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Sun, 17 May 1998 03:00:00 GMT""
            },
            {
              ""name"": ""Server"",
              ""value"": ""Golfe2""
            },
            {
              ""name"": ""Age"",
              ""value"": ""89439""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/gif""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""*""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""no-cache, no-store, must-revalidate""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""35""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Mon, 01 Jan 1990 00:00:00 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 35,
            ""mimeType"": ""image/gif"",
            ""compression"": 0
          },
          ""redirectURL"": """",
          ""headersSize"": 350,
          ""bodySize"": 35,
          ""_transferSize"": 385
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.461999996332452,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.08300000627059506,
          ""wait"": 183.43399999139396,
          ""receive"": 0.2709999971554282,
          ""ssl"": -1
        },
        ""connection"": ""318698"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:45.410Z"",
        ""time"": 13.0559999961406,
        ""request"": {
          ""method"": ""POST"",
          ""url"": ""http://192.168.16.5:9990/management"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""IB2sBGyNSY8NMTQ0OTczMjcxNjg5MFVBj3jNH3MI2CqYGSUDf8I=\"", uri=\""/management\"", algorithm=MD5, response=\""6b721ce7500b41f28d493a25b319b8e3\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""application/dmr-encoded""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utmt=1; __utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.14.8.1449732761797; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""148""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utmt"",
              ""value"": ""1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.14.8.1449732761797"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 936,
          ""bodySize"": 148,
          ""postData"": {
            ""mimeType"": ""application/dmr-encoded"",
            ""text"": ""bwAAAAUACW9wZXJhdGlvbnMAF3JlYWQtY2hpbGRyZW4tcmVzb3VyY2VzAAdhZGRyZXNzdQAKY2hpbGQtdHlwZXMACmRlcGxveW1lbnQAD2luY2x1ZGUtcnVudGltZVoBAAlyZWN1cnNpdmVaAQ==""
          }
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:31:56 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""application/dmr-encoded; charset=utf-8""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Authentication-Info"",
              ""value"": ""nextnonce=\""REZ3HxoCYm0NMTQ0OTczMjcxNjg5Mz1+0KlLqKRqq3of2MkergA=\""""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""WWW-Authenticate""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""669""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 1098,
            ""mimeType"": ""application/dmr-encoded"",
            ""compression"": -315
          },
          ""redirectURL"": """",
          ""headersSize"": 599,
          ""bodySize"": 1413,
          ""_transferSize"": 2012
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 2.6170000055572,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0.06099999882281004,
          ""wait"": 10.07899999967779,
          ""receive"": 0.29899999208279837,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:45.430Z"",
        ""time"": 0.9649999992689118,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/EB14AC3ED48D07624D825501CD5730A8.cache.txt"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""text/plain; charset=utf-8""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:20:05 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""text/plain""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""19135""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:44 GMT""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 19135,
            ""mimeType"": ""text/plain""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 0.148000006447546,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0.24999999732244801,
          ""receive"": 0.5669999954989178,
          ""ssl"": -1
        },
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:46.925Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/images/window/resizer.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:20:08 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:46 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""950""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 950,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308889"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:32:46.926Z"",
        ""time"": 0,
        ""request"": {
          ""method"": ""GET"",
          ""url"": ""http://192.168.16.5:9990/console/app/images/info/icn_info_red.png"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""X-DevTools-Emulate-Network-Conditions-Client-Id"",
              ""value"": ""504BD346-DCE2-4B9E-8598-11E1A45FEA67""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            }
          ],
          ""queryString"": [],
          ""cookies"": [],
          ""headersSize"": -1,
          ""bodySize"": 0
        },
        ""response"": {
          ""status"": 200,
          ""statusText"": ""OK"",
          ""httpVersion"": ""unknown"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:20:08 GMT""
            },
            {
              ""name"": ""Cache-Control"",
              ""value"": ""public, max-age=2678400""
            },
            {
              ""name"": ""Expires"",
              ""value"": ""Thu, 10 Dec 2015 08:04:46 GMT""
            },
            {
              ""name"": ""Last-Modified"",
              ""value"": ""Mon, 26 Oct 2015 22:15:16 GMT""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""854""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""image/png""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 854,
            ""mimeType"": ""image/png""
          },
          ""redirectURL"": """",
          ""headersSize"": -1,
          ""bodySize"": 0,
          ""_transferSize"": 0
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": -1,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 0,
          ""wait"": 0,
          ""receive"": 0,
          ""ssl"": -1
        },
        ""connection"": ""308879"",
        ""pageref"": ""page_1""
      },
      {
        ""startedDateTime"": ""2015-12-10T07:33:05.626Z"",
        ""time"": 10735.35199998878,
        ""request"": {
          ""method"": ""POST"",
          ""url"": ""http://192.168.16.5:9990/management-upload"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Authorization"",
              ""value"": ""Digest username=\""christian\"", realm=\""ManagementRealm\"", nonce=\""ov3gBe2gTRINMTQ0OTczMjczNzEwOBxoxFh3Pheg5UB3R0iiSfg=\"", uri=\""/management-upload\"", algorithm=MD5, response=\""d8b106ee00abcd206a24febc46f7423d\"", opaque=\""00000000000000000000000000000000\""""
            },
            {
              ""name"": ""Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Encoding"",
              ""value"": ""gzip, deflate""
            },
            {
              ""name"": ""Host"",
              ""value"": ""192.168.16.5:9990""
            },
            {
              ""name"": ""Accept-Language"",
              ""value"": ""en-GB,en;q=0.8,en-US;q=0.6,fr;q=0.4""
            },
            {
              ""name"": ""User-Agent"",
              ""value"": ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""multipart/form-data; boundary=----WebKitFormBoundaryzPcf9yeUUQmAUC1C""
            },
            {
              ""name"": ""Accept"",
              ""value"": ""*/*""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Referer"",
              ""value"": ""http://192.168.16.5:9990/console/App.html""
            },
            {
              ""name"": ""Cookie"",
              ""value"": ""__utmt=1; __utma=90056923.1686571505.1449732035.1449732035.1449732035.1; __utmb=90056923.14.8.1449732761797; __utmc=90056923; __utmz=90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
            },
            {
              ""name"": ""X-Management-Client-Name"",
              ""value"": ""HAL""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""63663170""
            }
          ],
          ""queryString"": [],
          ""cookies"": [
            {
              ""name"": ""__utmt"",
              ""value"": ""1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utma"",
              ""value"": ""90056923.1686571505.1449732035.1449732035.1449732035.1"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmb"",
              ""value"": ""90056923.14.8.1449732761797"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmc"",
              ""value"": ""90056923"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            },
            {
              ""name"": ""__utmz"",
              ""value"": ""90056923.1449732035.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)"",
              ""expires"": null,
              ""httpOnly"": false,
              ""secure"": false
            }
          ],
          ""headersSize"": 1011,
          ""bodySize"": 364,
          ""postData"": {
            ""mimeType"": ""multipart/form-data; boundary=----WebKitFormBoundaryzPcf9yeUUQmAUC1C"",
            ""text"": ""------WebKitFormBoundaryzPcf9yeUUQmAUC1C\r\nContent-Disposition: form-data; name=\""uploadFormElement\""; filename=\""jenkins.war\""\r\nContent-Type: application/octet-stream\r\n\r\n\r\n------WebKitFormBoundaryzPcf9yeUUQmAUC1C\r\nContent-Disposition: form-data; name=\""operation\""; filename=\""blob\""\r\nContent-Type: application/dmr-encoded\r\n\r\n\r\n------WebKitFormBoundaryzPcf9yeUUQmAUC1C--\r\n""
          }
        },
        ""response"": {
          ""status"": 500,
          ""statusText"": ""Internal Server Error"",
          ""httpVersion"": ""HTTP/1.1"",
          ""headers"": [
            {
              ""name"": ""Date"",
              ""value"": ""Thu, 10 Dec 2015 07:32:27 GMT""
            },
            {
              ""name"": ""Content-Encoding"",
              ""value"": ""gzip""
            },
            {
              ""name"": ""Access-Control-Max-Age"",
              ""value"": ""3600""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""GET""
            },
            {
              ""name"": ""Access-Control-Allow-Methods"",
              ""value"": ""POST""
            },
            {
              ""name"": ""Content-Type"",
              ""value"": ""text/html""
            },
            {
              ""name"": ""Access-Control-Allow-Origin"",
              ""value"": ""http://192.168.16.5:9990""
            },
            {
              ""name"": ""Access-Control-Allow-Credentials"",
              ""value"": ""true""
            },
            {
              ""name"": ""Connection"",
              ""value"": ""keep-alive""
            },
            {
              ""name"": ""Authentication-Info"",
              ""value"": ""nextnonce=\""2f8QbBJrTz8NMTQ0OTczMjc0MjQ3MyKxWVTQdHi+iXJojY2kuhM=\""""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Content-Type""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""WWW-Authenticate""
            },
            {
              ""name"": ""Access-Control-Allow-Headers"",
              ""value"": ""Authorization""
            },
            {
              ""name"": ""Content-Length"",
              ""value"": ""86""
            }
          ],
          ""cookies"": [],
          ""content"": {
            ""size"": 86,
            ""mimeType"": ""text/html"",
            ""compression"": -744
          },
          ""redirectURL"": """",
          ""headersSize"": 588,
          ""bodySize"": 830,
          ""_transferSize"": 1418
        },
        ""cache"": {},
        ""timings"": {
          ""blocked"": 5324.20399998955,
          ""dns"": -1,
          ""connect"": -1,
          ""send"": 5363.03200000835,
          ""wait"": 47.87399999629997,
          ""receive"": 0.24199999457960075,
          ""ssl"": -1
        },
        ""connection"": ""318641"",
        ""pageref"": ""page_1""
      }
    ]
  }
}

}}","16/Dec/15 9:44 AM;brian.stansberry;I'm going to ask our console guys to look at this, as the HAR output looks strange. I'm a noob when it comes to that but the postData.text output on the failed request doesn't look right to me. I don't seen stuff for the encoded file nor the encoded DMR op. Maybe that's not normal in a HAR; I don't know.","16/Dec/15 9:50 AM;brian.stansberry;By ""stuff"" I mean the actual encoded bits of the war file and the DMR op. There are multipart form sections and the Content-Disposition headers.","16/Dec/15 9:57 AM;ctomc;This looks like bug in chrome itself, see https://code.google.com/p/chromium/issues/detail?id=567692 for details.","16/Dec/15 9:58 AM;brian.stansberry;There's a decent chance this is a Chromium bug, but in case it's in our code I'm making this a blocker for the WildFly Core release that will be in WildFly 10 Final (expected to be 2.0.5 or 2.0.6.)","16/Dec/15 11:31 AM;harald.pehl;Up to now I was not able to reproduce the error. Tested with WildFly Core 2.0.4.Final ""Kenny"", HAL 2.8.16.Final and these OS / browser combinations:

- Chrome 47.0.2526.80 on OSX El Capitan 10.11.1 (15B42) ^1^
- Chrome 46.0.2490.86 on OSX El Capitan 10.11.1 (15B42) ^1^
- Chrome 47.0.2526.73 on Windows 10
- Chrome 47.0.2526.73 on Windows 8.1
- Chrome 47.0.2526.73 on Windows 8
- Chrome 47.0.2526.73 on Windows 7

^1^ Wasn't able to get Chrome 47.0.2526.73 for OSX
","16/Dec/15 11:37 AM;brian.stansberry;[~cweiler][~chandu.yelleti][~jensenbox] If any of you can try reproduce this using the current Chrome version and report back here, I'd very much appreciate it. Ideally using WildFly 10.0.0.CR4, but if it's a hassle WildFly 9.0.2 is ok.

Thanks, [~harald.pehl] and [~ctomc] for the research. I'm going to drop this one done from Blocker for now, pending further feedback. ","03/Feb/16 9:48 AM;brian.stansberry;Is anyone seeing this with WildFly 10.0.0.Final and a recent (say Dec 16 or later) release of Chrome? If so, please comment here. If not, I plan to resolve this as Out of Date. Thanks.",,,,,,,,,,,,,,,,
CLI Lists in non-interactive mode are erroneously split into multiple commands,WFCORE-1199,12595915,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ryanemerson,ryanemerson,ryanemerson,09/Dec/15 6:54 AM,22/Sep/16 9:35 AM,29/Nov/16 3:52 PM,04/Feb/16 11:43 AM,,,,,,,2.0.8.Final,,CLI,Modules,Patching ,,,0,,,,,,"The problem arises because commands entered in non-interactive mode are split by the "","" character.  Therefore, in the case of:

 ""./bin/jboss-cli.sh -c --controller=localhost --commands=""module add --name=test --resources=test.jar --dependencies=dep1,dep2""

the cli is incorrectly splitting the request into two distinct commands:

1. module add --name=test --resources=test.jar --dependencies=dep1
2. dep2



The reason this behaviour is not observed in interactive mode is because multiple commands can not be specified.  However, in non-interactive mode --commands=ls,pwd is valid and should result in the execution of ls followed by pwd.  

This problem is not restricted to the module command, as it affects all commands entered in non-interactive mode that require a comma-separated list as an argument.  So far this appears to be PatchHanlder.java, ASModuleHandler.java and DeploymentOverlayHandler.java.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1284885,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1409,,,,,,0.0,8.0,,1|i0079b:,9223372036854775807,,,,"Run: ./bin/jboss-cli.sh -c --controller=localhost --commands=""module add --name=test --resources=test.jar --dependencies=dep1,dep2""

Output:
Unexpected command 'dep2'. Type 'help --commands' for the list of supported commands

",,,,,,,"09/Dec/15 6:58 AM;ryanemerson;My proposed solution requires that lists containing > 1 value must be contained within [] brackets.  This prevents the list from being perceived as multiple commands and allows the list to be passed to the appropriate handler where the [] brackets can be removed and the list processed as expected.

So for example the valid command to add a module would become:

./bin/jboss-cli.sh -c --controller=localhost --commands=""module add --name=test --resources=test.jar --dependencies=[dep1,dep2]

and the resulting module.xml dependencies would be:

<dependencies>
        <module name=""dep1""/>
        <module name=""dep2""/>
    </dependencies>

",26/Jan/16 7:20 AM;aloubyansky;The PR has been merged.,04/Feb/16 11:22 AM;ryanemerson;Re-opened as I had missed the comma-seperated lists in DeployHandler and UndeployHandler as well as the --properties field for ASModuleHandler in the original commit.  ,04/Feb/16 11:45 AM;brian.stansberry;[~ryanemerson] Please don't reopen community issues after the version shown in Fix Version has been released as a .Final. Please file a new issue and link it.,"04/Feb/16 12:14 PM;ryanemerson;[~brian.stansberry] Sorry about that. New issue created, linked and the community PR updated.",28/Mar/16 5:34 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from POST to MODIFIED,28/Mar/16 7:26 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from MODIFIED to POST,22/Sep/16 9:35 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1284885|https://bugzilla.redhat.com/show_bug.cgi?id=1284885] from MODIFIED to ON_QA,,,,,,,,,,,,,,,,,,,
CLI does not resolve multiple properties if one property is undefined,WFCORE-1198,12595887,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,09/Dec/15 4:30 AM,22/Nov/16 8:16 AM,29/Nov/16 3:52 PM,23/Dec/15 12:08 AM,2.0.4.Final,,,,,,2.0.5.Final,,CLI,,,,,0,,,,,,"https://bugzilla.redhat.com/show_bug.cgi?id=1289316 description:

{noformat}
Multiple property substitution is working with EAP 6.4.3+, however, if a variable amongst the multiple variables is empty or has no value, then the subsequent property in the CLI command is not substituted. 

For example : 
cat props.properties 
-----------------------------------------
PROFILE-NAME=TestProfile
SERVER-INSTANCE-NUMBER=TestInstance
APP-VERSION=
VAR=test
-----------------------------------------

cat test.cli :
---------------------------------------
/host=master/server-config=${PROFILE-NAME}${APP-VERSION}${SERVER-INSTANCE-NUMBER}${VAR}:add(auto-start=true, group=""${PROFILE-NAME}${APP-VERSION}-server-group"")
---------------------------------------

and if I execute ""./jboss-cli.sh --connect --file=test.cli --properties=props.properties"" then I have the following in the host.xml "": 

----------
...
<server name=""TestProfile${SERVER-INSTANCE-NUMBER}test"" group=""TestProfile-server-group"" auto-start=""true""/>
...
-----------

Note APP-VERSION had no value, and so the subsequent SERVER-INSTANCE-NUMBER was not properly resolved
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1289316,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1294,,,,,,0.0,7.0,,1|i00733:,9223372036854775807,,,,,,,,,,,"09/Dec/15 4:39 AM;soul2zimate;[CLIExpressionResolver.java#L181|https://github.com/wildfly/wildfly-core/blob/e737eff554ee433ca54835154fd67725fd52f63e/cli/src/main/java/org/jboss/as/cli/util/CLIExpressionResolver.java#L181] only checks null, but if there is an empty property as ""APP-VERSION="", variable resolved is """". It continues to write <server name=""TestProfile${SERVER-INSTANCE-NUMBER}test"" group=""TestProfile-server-group"" auto-start=""true""/> in configuration file without problem before next server reboot. It's an edge case to have empty value in properties file as reported case, however,  it'd better to throw an UnresolvedExpressionException with informative message.",20/Dec/15 7:08 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from ASSIGNED to POST,28/Mar/16 5:38 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from MODIFIED to POST,31/Oct/16 1:27 PM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from POST to MODIFIED,01/Nov/16 11:14 AM;jira-bugzilla-migration;Aurel Pintea <apintea@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from MODIFIED to ON_QA,22/Nov/16 8:16 AM;jira-bugzilla-migration;Ivo Hradek <ihradek@redhat.com> changed the Status of [bug 1289316|https://bugzilla.redhat.com/show_bug.cgi?id=1289316] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
PersistentResourceDefinition incompatible with Parameters from SimpleResourceDefinition,WFCORE-1193,12595702,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,08/Dec/15 6:40 AM,10/May/16 3:47 PM,29/Nov/16 3:52 PM,18/Mar/16 1:51 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,affects_elytron,,,,,PersistentResourceDefinition creates it's own Parameters class which is an extension of the class in SimpleResourceDefinition - the problem is if you use the chaining methods in a constrcutor you can't pass in the result to the PersistantResourceDefinition constructor as it is now the wrong type.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1291,,,,,,0.0,0.0,,1|i005z3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecate permgen attributes in the management model,WFCORE-1191,12595619,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,07/Dec/15 5:29 PM,16/Dec/15 5:42 PM,29/Nov/16 3:52 PM,16/Dec/15 5:42 PM,,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"The permgen size attributes no longer do anything in a core 2.0 or later server, as we require JDK 8 and our code ignores these if JDK 8 or later is running. So we should deprecate the config elements and log a message if they are used.

Part of the parent task for the management model itself. I'll do this in 2.0.5 because I don't mind tweaking the API in a micro just to add deprecation information.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1289,,,,,,0.0,0.0,,1|i005hb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Oracle JVM version comparison for new JDK 9 version schema,WFCORE-1189,12595617,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jamezp,jamezp,07/Dec/15 4:53 PM,16/Dec/15 5:42 PM,29/Nov/16 3:52 PM,16/Dec/15 5:42 PM,,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,JDK 9 is going to use a [new version schema|https://blogs.oracle.com/java-platform-group/entry/a_new_jdk_9_version] based on [JEP-223|http://openjdk.java.net/jeps/223]. The current {{JvmOptionsBuilderFactory}} would return version 7 if a the {{java.specification.version}} system property returned {{9.0.0}}.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1289,,,,,,0.0,0.0,,1|i005gv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Exiting CLI requires stty sane command to be issued on Linux,WFCORE-1188,12595441,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,aloubyansky,jamezp,jamezp,04/Dec/15 6:12 PM,16/Dec/15 5:46 PM,29/Nov/16 3:52 PM,16/Dec/15 5:46 PM,2.0.4.Final,,,,,,2.0.5.CR1,,CLI,,,,,0,,,,,,"The PR https://github.com/wildfly/wildfly-core/pull/1268/ seemed to have introduced a regression where some times (seems to be most in my case) {{stty sane}} is required to get a shell back to normal. My guess is it's the aesh upgrade, but I'm not certain on that so I'll start the JIRA here and it can be moved to AESH if necessary.","Fedora 23
Linux 4.2.6-301.fc23.x86_64 #1 SMP Fri Nov 20 22:22:41 UTC 2015 GNU/Linux
openjdk version ""1.8.0_65""
OpenJDK Runtime Environment (build 1.8.0_65-b17)
OpenJDK 64-Bit Server VM (build 25.65-b01, mixed mode)",,,,,,,,,,,,,,,JBEAP-2206,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1303,,,,,,0.0,1.0,,1|i004f3:,9223372036854775807,,,,Execute {{$JBOSS_HOME/bin/jboss-cli.sh}} then {{exit}}.,,,,,,,"08/Dec/15 7:06 PM;stalep;Hi, i've debugged a bit and it seems that jboss-cli call Console.stop() in æsh correctly, but it calls System.exit(..) before all of the threads in æsh have finished with the cleanup which is why the terminal is not reset correctly.
Adding a Thread.sleep(200) to CliLauncher before System.exit(..) fixes the issue and verifies what i'm seeing.",,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded server start / stop / start with new --jboss-home continues to refer to previous server.log,WFCORE-1187,12595438,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,luck3y,luck3y,luck3y,04/Dec/15 5:27 PM,21/Nov/16 7:03 PM,29/Nov/16 3:52 PM,,,,,,,,,,CLI,,,,,0,,,,,,"- start-embedded-server --jboss-home=/foo/bar1
- stop-embedded-server
- start-embedded-server --jboss-home=/foo/bar2

-- server.log in /foo/bar1/standalone/logs/server.log is still written to.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|i004ef:,9223372036854775807,,,,,,,,,,,"26/Apr/16 12:59 PM;jdenise;The EmbeddedServer is setting the right LogContext, the problem is that some of the Server loggers (that are annotated with @MessageLogger, e.g.: ServerLogger) are statics and their implementation is bound to the Logger retrieved at construction time. 
When such static annotated loggers are instantiated, the LogContext is accessed and the ""first server"" context is retrieved to build a final Logger delegate. The delegate is internally used by the @MessageLogger to delegate actual logging.

So all the static @MessageLogger are bound to a given logging configuration, whatever the changes that can occur in the LogContext.

When the second server is started, the @MessageLogger are not refreshed.

Actually a layer (JBoss module) manages to log in the second file, this is due to the fact that the LoggingManager is re-set each time an embedded server is started.

I don't know this code, but I could suggest a possible fix. 

The DelegatingBasicLogger could define a LoggerProvider interface. @MessageLogger would implement this interface and passes it at construction time. Something like:

public class DelegatingBasicLogger {
 public interface LoggerProvider {
  public Logget getLogger();
 }
DelegatingBasicLogger(LoggerProvider provider) { this.provider = provider; }
....
}

Then for subclass:
class MyLogger extends DelegatingBasicLogger {
MyLogger() {
super(()->LogContext.getLogContext());
}

Would that makes sense?
","27/Apr/16 4:39 PM;luck3y;I think the real fix here is to stop using Module.getBootModuleLoader(), which I haven't had time to circle back to in a little bit, but hopefully will soon.","21/Nov/16 7:03 PM;luck3y;Note, this is mostly fixed by WFCORE-1977, however, starting an embedded server does not currently override configured logging properties correctly.
This means that in, for example the manualmode unit tests, standalone servers that are started, then stopped will persist a hardcoded path to a logfile that will then be picked up by the embedded server when starting and logged to.

This should replace any changes that were made (and abandoned by WFCORE-918)",,,,,,,,,,,,,,,,,,,,,,,,
"""initial-running-mode"" attribute from ""/core-service=server-environment"" has wrong description",WFCORE-1185,12595385,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,mkopecky,brian.stansberry,04/Dec/15 10:20 AM,04/Dec/15 12:40 PM,29/Nov/16 3:52 PM,04/Dec/15 12:40 PM,2.0.3.Final,,,,,,2.0.4.Final,,Domain Management,,,,,0,,,,,,"*Description of problem:*
""initial-running-mode"" attribute from ""/core-service=server-environment"" has wrong description

*How reproducible:*
always

*Steps to Reproduce:*
# /core-service=server-environment:read-resource-description(operations=false)

*Actual results:*
...
""initial-running-mode"" => \{
                ""type"" => STRING,
                ""description"" => ""The *current* running mode of the server. Either *LIVE (normal operations)* or ADMIN_ONLY.  An ADMIN_ONLY server will start any configured management interfaces and accept management requests, but will not start services used for handling end user requests."",
                ...
            \},
...

*Expected results:*
The *initial* running mode of the server. Either *NORMAL* or ADMIN_ONLY.  An ADMIN_ONLY server will start any configured management interfaces and accept management requests, but will not start services used for handling end user requests.",,,,,,,,,,,,,,,,JBEAP-2184,,,,,,,,,,,,,,,,,,,,,,,,,+,?,,+,+,+,,,,,,https://github.com/wildfly/wildfly-core/pull/1285,,,,,,0.0,0.0,,1|i0043b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use specific description for reply value types in ListAttributeDefintion and MapAttributeDefinition,WFCORE-1178,12594855,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,ehugonnet,ehugonnet,ehugonnet,01/Dec/15 11:36 AM,01/Dec/15 1:48 PM,29/Nov/16 3:52 PM,,2.0.3.Final,,,,,,,,Domain Management,,,,,0,,,,,,"Currently when we get the description of a reply value type for a ListAttributeDefintion or a MapAttributeDefinition we call addOperationParameterValueTypeDescription() from addOperationReplyValueTypeDescription() instead of providing its specific description.
We should override the current code in the subclass to have a description specific to the reply attribute like we have per default after WFCORE-313 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|i000wf:,9223372036854775807,,,,,,,,,,,01/Dec/15 1:45 PM;dlofthouse;Could a change like this break subsystems that already exist?,"01/Dec/15 1:48 PM;ehugonnet;No as if the specific description is not found then it should go back to the previous behaviour.
The only change is the key in the exception message if neither the 'new' one nor the old one is found.",,,,,,,,,,,,,,,,,,,,,,,,,
Service can't be installed if the path contains a closed bracket,WFCORE-1177,12594753,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ctomc,wildberg,wildberg,01/Dec/15 5:45 AM,10/May/16 3:56 PM,29/Nov/16 3:52 PM,21/Mar/16 10:17 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Scripts,,,,,0,jboss,,,,,"Problem: 
If you start ""service.bat install"" in e.g. in C:\Program Files (x86)\wildfly-9.0.1.Final\bin\service you will get:
Using the X86-64bit version of prunsrv
""\wildfly-9.0.1.Final\domain\log"" can not be used syntatically at this point (don't know if it is correct, I translated it from german. Original it is ""kann syntaktisch an dieser Stelle nicht verarbeitet werden."")

Cause:
This is because of the ) in ""Program Files (x86)"" and this is a problem because in the service.bat in line 175 and 179 (set LOGPATH=%JBOSS_HOME%\domain\log and LOGPATH=%JBOSS_HOME%\standalone\log- in version 9.0.1 and 9.0.2 - in Version 10 it may be in another line) path is not set in double quotation marks.
All other paths are set in double quotation marks.

Solution:
Set the variable and path in double quotation marks:
set ""LOGPATH=%JBOSS_HOME%\...\log""",all Windows versions,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,,,,,,,0.0,3.0,,1|i000an:,9223372036854775807,,,,"extract wildfly to a path with ) in it an start ""services.bat install""",,,,,Workaround Exists,"Set the variable=path... in service.bat in double quotation marks:
set ""LOGPATH=%JBOSS_HOME%\domain\log"" (remember this entry exists twice)","01/Dec/15 8:20 AM;wildberg;Maybe there are some more double quotation marks missing,
e.g. jboss-clie.bat in \wildfly-9.0.1.Final\bin\ in line 67 (set ""LOGGING_CONFIG=-Dlogging.configuration=file:%JBOSS_HOME%\bin\jboss-cli-logging.properties"") - the path of JBOSS_HOME\... is not in double quotation marks.
The whole line is in double quotation marks, but I'm not sure that it works.","01/Dec/15 10:08 AM;cfang;change to scripts category and assigned to James, who has been working on this.","01/Dec/15 10:14 AM;wildberg;news:
With the workaround I was able to install the service - but I couldn't start it.
So I dived some more into it.
If you change it to
set ""LOGPATH=%JBOSS_HOME%\...\log"" (difference is the double quotation mark in front of ""LOGPATH"" and not in front of ""%JBOSS_HOME%"")
you can install the service and start it.
I edited the workaround.

I don't think all lines are like this so maybe there need a lot more lines (maybe even in other files) to be changed than this two.",,,,,,,,,,,,,,,,,,,,,,,,
"CLI prints unexpected ANSI characters to output with ""echo"" command",WFCORE-1175,12594807,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,stalep,mkopecky,mkopecky,01/Dec/15 8:59 AM,16/Dec/15 6:03 PM,29/Nov/16 3:52 PM,16/Dec/15 6:03 PM,2.0.3.Final,,,,,,2.0.5.CR1,,CLI,,,,,1,,,,,,"*Description of problem:*
CLI prints unexpected ANSI character to output with ""echo"" command.

* This is regression against EAP 7.0.0.DR13
* This is blocker for GA release. 
* This is not beta blocker.
* This is probably AESH issue, so I assign [~stalep], but it is also CLI issue, so [~aloubyansky] may be assigned to this

*How reproducible:*
Always

*Steps to Reproduce:*
# ./standalone.sh
# ./jboss-cli.sh --connect controller=127.0.0.1 command=""echo test-echo"" > out.txt
# vim out.txt
#* ""cat out.txt"" can't be used for reproducing, because console hide unexpected ANSI characters

*Actual results:*
{noformat}
^[[0G^[[2Ktest-echo
{noformat}

*Expected results:*
{noformat}
test-echo
{noformat}",,,,,,,,,,,,,,,,JBEAP-2087,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1312,,,,,,0.0,1.0,,1|i000m7:,9223372036854775807,,,,,,,,,,,04/Dec/15 1:17 PM;brian.stansberry;I'm scheduling this for 2.0.4 even though I know it won't get done for that (release is in progress.) I just want it to automatically get rescheduled to 2.0.5 once that is created so it stays visible for the pending release.,,,,,,,,,,,,,,,,,,,,,,,,,,
"Host Controller HttpManagementResourceDefinition doesn't register ""org.wildfly.management.http-interface"" capability",WFCORE-1171,12594658,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,30/Nov/15 2:15 PM,18/Mar/16 8:14 PM,29/Nov/16 3:52 PM,18/Mar/16 8:14 PM,2.0.3.Final,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"The add/remove handlers register the capability, but it got missed with the MRR.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1276,,,,,,0.0,0.0,,1|hzzzqn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"GenericOutboundConnectionResourceDefinition doesn't register the ""org.wildfly.remoting.outbound-connection"" capability",WFCORE-1170,12594657,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,30/Nov/15 2:14 PM,18/Mar/16 8:14 PM,29/Nov/16 3:52 PM,18/Mar/16 8:14 PM,2.0.3.Final,,,,,,3.0.0.Alpha1,,Domain Management,Remoting,,,,0,,,,,,"Title says it all. This variant of the outbound-connection resources was missed when I added capabilities.

AbstractOutboundConnectionResourceDefinition can take care of this for all the variants and we can remove the registration from the various add/remove handlers.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1278,,,,,,0.0,0.0,,1|hzzzqf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EAP welcome page gives 404 if JBOSS_HOME contains lower case drive letter (Windows),WFCORE-1169,12594617,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ctomc,ctomc,ctomc,30/Nov/15 10:03 AM,04/Dec/15 1:59 PM,29/Nov/16 3:52 PM,04/Dec/15 1:59 PM,2.0.3.Final,,,,,,2.0.4.Final,,Scripts,,,,,0,,,,,,"EAP server welcome page (aka http://localhost:8080/ ) returns ""404 - Not Found"" once the JBOSS_HOME contains lower case drive letter on Windows.

*reproduce*
 \- start the EAP using absolute path with lower case drive letter
{noformat}C:\Users\Administrator>c:\jboss-eap-7.0\bin\standalone.bat{noformat}
 \- get the response from welcome page
{noformat}
wget.exe --server-response --spider http://localhost:8080
Spider mode enabled. Check if remote file exists.
--2015-11-30 07:26:57--  http://localhost:8080/
Resolving localhost (localhost)... ::1, 127.0.0.1
Connecting to localhost (localhost)|::1|:8080... failed: Connection refused.
Connecting to localhost (localhost)|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response...
  HTTP/1.1 404 Not Found
  Connection: keep-alive
  X-Powered-By: Undertow/1
  Server: JBoss-EAP/7
  Content-Length: 74
  Content-Type: text/html
  Date: Mon, 30 Nov 2015 12:26:58 GMT
Remote file does not exist -- broken link!!!
{noformat}

Regression against 6.4.0 and 7.0.0.ER13",Windows ,,,,,,,,,,,,,,,JBEAP-2054,,,,,,,,,,,,,,,,,,,,,,,,+,+,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzzzk7:,9223372036854775807,,,,,,,,,,,"04/Dec/15 1:59 PM;jamezp;I'm closing this as the PR merged, but if we might need a new JIRA for the WFLY PR.",,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect null check in SimpleResourceDefinition.Parameter.setDeprecatedSince,WFCORE-1168,12594600,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,30/Nov/15 9:16 AM,04/Dec/15 12:40 PM,29/Nov/16 3:52 PM,04/Dec/15 12:40 PM,2.0.3.Final,,,,,,2.0.4.Final,,Domain Management,,,,,0,,,,,,"The null check checks the field being assigned instead of the param passed in:
 
{code}
        public Parameters setDeprecatedSince(ModelVersion deprecatedSince) {
            if (deprecationData == null) { // <-- OOPS!
                throw ControllerLogger.ROOT_LOGGER.nullVar(""deprecatedSince"");
            }

            this.deprecationData = new DeprecationData(deprecatedSince);
{code}

The field will always be null, making this method useless.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1277,,,,,,0.0,0.0,,1|hzzzhj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CompositeTransformer does not transform addresses,WFCORE-1166,12594417,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,27/Nov/15 9:21 AM,04/Dec/15 2:03 PM,29/Nov/16 3:52 PM,04/Dec/15 2:03 PM,2.0.3.Final,,,,,,2.0.4.Final,,Domain Management,,,,,0,,,,,,"If /some=where has a child redirection for the child=* child resource to new-child=*, then

{code}
{
    ""operation"" => ""add"",
    ""address"" => [
        (""some"" => ""where""),
        (""child"" => ""*"")
    ]
}
{code}
gets correctly transformed to 
{code}
{
    ""operation"" => ""add"",
    ""address"" => [
        (""some"" => ""where""),
        (""new-child"" => ""*"")
    ]
}
{code}

But if wrapped in a composite, e.g.:
{code}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""some"" => ""where""),
                (""child"" => ""*"")
            ]
        }
    ]
}
{code}
the redirection does not happen in the transformed composite, so we have the original
{code}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""some"" => ""where""),
                (""child"" => ""*"")
            ]
        }
    ]
}
{code}
rather than the expected
{code}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""some"" => ""where""),
                (""new-child"" => ""*"")
            ]
        }
    ]
}
{code}
",,,,,,,,,,,,,,,,JBEAP-2029,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,+,?,?,,,,,,https://github.com/wildfly/wildfly-core/pull/1272,,,,,,0.0,0.0,,1|hzzyin:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Warning about private module use issued twice,WFCORE-1164,12556992,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,swd847,lafr,lafr,09/Nov/14 4:13 PM,27/Sep/16 8:19 AM,29/Nov/16 3:52 PM,04/Dec/15 2:04 AM,,,,,,,2.0.4.Final,,Server,,,,,0,,,,,,"My web app is using some modules of WildFly AS which are not public.
The warning about using private modules is issued twice for every module:
09.11. 22:07:34,088 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.jboss.common-core:main"") which may be changed or removed in future versions without notice.
09.11. 22:07:34,090 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.jboss.common-core:main"") which may be changed or removed in future versions without notice.
09.11. 22:07:34,091 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.apache.commons.collections:main"") which may be changed or removed in future versions without notice.
09.11. 22:07:34,091 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.apache.commons.collections:main"") which may be changed or removed in future versions without notice.
09.11. 22:07:34,092 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
09.11. 22:07:34,094 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.web-maj2e-langfr-dev.war"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
",,,,,,,,,,,,,,,,,,,,,,,,,,,26/Nov/15 2:10 PM;lafr;test.war;https://issues.jboss.org/secure/attachment/12395405/test.war,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1365668,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1271,,,,,,1.0,11.0,,1|hzu1br:,9223372036854775807,,,,,,,,,,,09/Nov/14 5:00 PM;ctomc;What version is this? Current master with jboss-modules 1.4?,"09/Nov/14 5:27 PM;lafr;Yes, it's current master based on WildFly Core 1.0.0.Alpha11 including jboss-modules 1.4.0.Beta1.","26/Nov/15 6:09 AM;lafr;Still the same with WildFly Full 10.0.0.CR5-SNAPSHOT (WildFly Core 2.0.3.Final):
{code:java}
26.11. 11:13:33,880 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.hsk2e-langfr-sb2000-ipc.ear.ejb-session-common.jar"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
26.11. 11:13:33,883 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.hsk2e-langfr-sb2000-ipc.ear.ejb-session-common.jar"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
{code}
",26/Nov/15 9:29 AM;ctomc;Do you maybe have both jboss-deployment-structure.xml with deps & Dependancies entry in MANIFEST.MF?,"26/Nov/15 12:44 PM;lafr;I checked. No, there's no dependency anymore in MANIFEST.MF.
All are of size 106 bytes, containing these lines only:
{noformat}
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.9.5
Created-By: 1.8.0_72-ea-b05 (Oracle Corporation)
{noformat}
",26/Nov/15 12:48 PM;dlofthouse;CXF is mentioned - do you have any webservices in your deployment?,"26/Nov/15 2:09 PM;lafr;CXF was just an example, the message occurs twice for every private module used.
I have a simple reproducer for you. A war file just with an empty web-app.xml and jboss-deployment-structure.xml.
Deploying this war by copying it to the deployments folder gives me
{noformat}
26.11. 20:04:23,592 INFO  [org.jboss.as.server.deployment#start] WFLYSRV0027: Starting deployment of ""test.war"" (runtime-name: ""test.war"")
26.11. 20:04:23,689 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""org.apache.commons.collections:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,710 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""org.apache.commons.collections:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,723 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,732 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""org.apache.cxf.impl:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,755 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""com.google.guava:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,759 WARN  [org.jboss.as.dependency.private#start] WFLYSRV0018: Deployment ""deployment.test.war"" is using a private module (""com.google.guava:main"") which may be changed or removed in future versions without notice.
26.11. 20:04:23,940 INFO  [org.wildfly.extension.undertow#registerDeployment] WFLYUT0021: Registered web context: /test
26.11. 20:04:24,061 INFO  [org.jboss.as.server#handleResult] WFLYSRV0016: Replaced deployment ""test.war"" with deployment ""test.war""
{noformat}
with latest 10.0.0.CR5-SNAPSHOT.",09/Aug/16 3:41 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1365668|https://bugzilla.redhat.com/show_bug.cgi?id=1365668] from NEW to ASSIGNED,15/Aug/16 5:18 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1365668|https://bugzilla.redhat.com/show_bug.cgi?id=1365668] from ASSIGNED to POST,22/Sep/16 9:34 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1365668|https://bugzilla.redhat.com/show_bug.cgi?id=1365668] from MODIFIED to ON_QA,27/Sep/16 8:19 AM;jira-bugzilla-migration;Ivo Hradek <ihradek@redhat.com> changed the Status of [bug 1365668|https://bugzilla.redhat.com/show_bug.cgi?id=1365668] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Service changes due to rollback should be completed before operation completes,WFCORE-1156,12494592,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ctomc,ctomc,18/Jun/13 7:02 PM,18/Mar/16 1:50 PM,29/Nov/16 3:52 PM,18/Mar/16 1:50 PM,,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,"""As executeAndRollbackOperation() result is retrieved but actual rollback of deployment is is not complete.""

That's a bug then. Service changes due to rollback should be completed before the operation returns. 

for more details see https://github.com/wildfly/wildfly/pull/4664
and DeploymentScannerTestCase",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly/pull/4682,https://github.com/wildfly/wildfly-core/pull/1270,,,,,0.0,4.0,,1|hzhdy7:,161854,,,,,,,,,,,"21/Jun/13 11:44 AM;jaikiran;I've sent a PR which cleans up this testcase (no more Thread.sleep) and also explains the issue.
","21/Jun/13 1:22 PM;brian.stansberry;A comment re: https://github.com/wildfly/wildfly/pull/4682

A concern I have with this change is (I think) coverage of the fact that adding a scanner results in a scan run has been dropped. Since that scan will happen async, some sort of check with a timeout is needed. Polling with a long timeout is better than the previous simple ""sleep and check once"" approach though.

Despite the above I'm fine with merging this; the test needs to be stable. Please leave the JIRA open though.

Testing that adding the scanner results in a scan can likely be done in the deployment-scanner subsystem testsuite, in which case having it duplicated here is unnecessary.","21/Jun/13 1:23 PM;brian.stansberry;I'm ""rejecting"" the PR, not because it shouldn't go in, but just to move this JIRA out of a state where merging that PR leads someone to resolve the JIRA.","23/Nov/15 12:20 PM;brian.stansberry;[~ehugonnet] I really have no idea what this issue is any more. It was filed against WildFly 8.0.0.Alpha1. I believe the desired behavior implied by the title ""Service changes due to rollback should be completed before operation completes"" has been present for a real long time now, so perhaps this is just out of date. Or maybe it's just a test coverage thing as the PR is about tests. In which case it's lower priority.",,,,,,,,,,,,,,,,,,,,,,,
Deprecate permgen attributes in host and server config level jvm settings,WFCORE-1154,12593790,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,,brian.stansberry,brian.stansberry,23/Nov/15 10:11 AM,01/Sep/16 1:34 PM,29/Nov/16 3:52 PM,01/Sep/16 1:34 PM,,,,,,,3.0.0.Alpha2,,Domain Management,,,,,0,,,,,,"The permgen size attributes no longer do anything in a core 2.0 or later server, as we require JDK 8 and our code ignores these if JDK 8 or later is running. So we should deprecate the config elements and log a message if they are used, and add deprecation text in the xsd.

I considered only deprecating these attributes if they appear in the host=* tree, and not doing the ones for domain-wide resources, since those could be used for legacy slaves running JDK < 8. But I think the distinction isn't worth the effort. First, these things are deprecated in all cases in the sense that they may go away in some future release. And second, all that happens is an INFO message is logged, and the chances that message may help some JDK 8 user offsets the chance that a JDK < 8 user would be annoyed by some spurious INFO logging.",,,,,,,,,,,,,,,,,,,,,,,,,WFCORE-1191,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzzulz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can't configure empty base-dn for ldap realm,WFCORE-1153,12593735,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dlofthouse,alberto.persello,alberto.persello,23/Nov/15 5:28 AM,23/Nov/15 6:12 AM,29/Nov/16 3:52 PM,,2.0.2.Final,,,,,,,,Domain Management,Security,,,,0,authentication,authorization,group,ldap,realm,"It is not possible to set the empty value for base-dn attribute in authentication-->ldap element and in authorization-->ldap-->group-search-->group-to-principal element.
The empty value is the only valid option for java ldap searches to scan the entire ldap (the equivalent of RootDSE).
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Compatibility/Configuration,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzzuan:,9223372036854775807,,,,"Try to configure a security-realm with ldap authentication/authorization with empty base-dn attribute; you get 
""WFLYCTL0113: '' is an invalid value for parameter base-dn. Values must have a minimum length of 1 characters""",,,,,Workaround Exists,Custom ldap login module; change enterprise ldap users/groups to match a common base-dn,,,,,,,,,,,,,,,,,,,,,,,,,,,
The standard host.xml configs include useless permgen settings,WFCORE-1151,12593697,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,20/Nov/15 9:29 PM,25/Nov/15 2:11 PM,29/Nov/16 3:52 PM,25/Nov/15 2:11 PM,2.0.2.Final,,,,,,2.0.3.Final,,Domain Management,,,,,0,,,,,,"Our standard host.xml files include permgen settings. Our software just ignores them on JDK 8 or later, and we only run on 8 or later, so having these settings in our standard configs is just misleading. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1263,,,,,,0.0,0.0,,1|hzzu2n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Include -XX:MetaspaceSize in our default vm settings,WFCORE-1150,12593696,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,20/Nov/15 9:20 PM,13/Jan/16 11:39 PM,29/Nov/16 3:52 PM,13/Jan/16 11:39 PM,,,,,,,2.0.6.Final,3.0.0.Alpha1,Server,,,,,0,,,,,,"JDK 8 no longer has a perm gen, but it does have a ""Metaspace"" area of native memory where it stores some of the types of data previously stored in perm gen, class metadata in particular.

The default size of this is, I believe 21MB on a 64 bit VM. Full WildFly uses over 50MB, excluding apps. The VM will increase the size once it gets over a certain percentage full, but it will do a full, stop-the-world GC before increasing. This means full WildFly has two full GCs as part of boot.

The -XX:MetaspaceSize JVM option allows the minimum size to be set. Using a reasonable value for this will help avoid unnecessary full GCs.

I'm not sure the best value to use. A minimum of 80MB was enough to avoid a full GC during a boot of standalone-full-ha.xml. But then any sort of deployments will trigger a full GC. OTOH, our host.xml jvm elements have historically included a -XX:PermSize setting of 256M, so that's another possible value. Perm Gen and Metaspace aren't completely equivalent (e.g. before JDK 7 perm gen included stuff like interned strings, which are now in the heap.)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzzu2f:,9223372036854775807,,,,,,,,,,,"07/Jan/16 4:23 PM;brian.stansberry;In a discussion with Andy Miller, he recommended we use the same values that we previously used for PermSize/MaxPermSize.",,,,,,,,,,,,,,,,,,,,,,,,,,
DomainApiGenericOperationHandler doesn't handle auto-closing streams,WFCORE-1149,12593695,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,20/Nov/15 9:11 PM,24/Nov/15 8:23 PM,29/Nov/16 3:52 PM,24/Nov/15 8:23 PM,,,,,,,2.0.3.Final,,Domain Management,,,,,0,,,,,,The {{DomainApiGenericOperationHandler}} needs to ensure any input streams it attaches to an operation are closed. In the case of a content upload two streams are attached and only one is closed during the add of the content in the operation step handler.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1262,,,,,,0.0,0.0,,1|hzzu27:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Non runtime-only operation can be invoked in domain servers,WFCORE-1148,12593648,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,brian.stansberry,jmesnil,jmesnil,20/Nov/15 10:43 AM,20/Nov/15 12:08 PM,29/Nov/16 3:52 PM,,2.0.2.Final,,,,,,,,Domain Management,,,,,0,,,,,,"While working on WFLY-5418, I noticed that non runtime-only operations can be invoked on domain servers under /host=X/server=Y/...
The operation is not listed in read-operation-names, read-resource-description, etc. but invoking it is still possible.
Brian confirmed that this is a bug and the operation should not be executed.

Steps to reproduce:
* remove the runtimeOnly flag in org.jboss.as.ejb3.subsystem.deployment.MessageDrivenBeanResourceDefinition#registerOperations
* deploy the quickstart helloworld-mdb
* the start-delivery (and stop-delivery) operations are not listed in /host=master/server=server-one/deployment=wildfly-helloworld-mdb.war/subsystem=ejb3/message-driven-bean=HelloWorldQueueMDB:read-operation-names
* But the method can be invoked by executing:
{noformat}
[domain@localhost:9990 /] /host=master/server=server-one/deployment=wildfly-helloworld-mdb.war/subsystem=ejb3/message-driven-bean=HelloWorldQueueMDB:start-delivery ain@localhost:9990 /]
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzzts7:,9223372036854775807,,,,,,,,,,,"20/Nov/15 12:08 PM;brian.stansberry;This is by design. The enforcement of rejecting end-user requests to servers is done by OperationContextImpl if the OSH attempts to make a call involving write access to the configuration model.

We can't drop that check, as it's the critical safeguard. Relying on accurate metadata to do security enforcement is weaker than just preventing the low level check.

OTOH, you make a good point in IRC that it's bad to hide ops in things like read-operation-names that can actually be invoked. The limitation in read-operation-names is based on the metadata.

Making that consistent though would mean rejecting requests if the OperationDefinition didn't report the op as being runtime-only. That would further break subsystems, particular concern being external ones not tested by our testsuite, that have problems like WFLY-5418.

That might be an ok thing to do; I'm somewhat in favor, but IMHO it's too late for that. It needs to be in an early Beta release for a Major, and really that means an EAP major, not just a WildFly one.

In HipChat you mentioned the ""describe"" op. That's a somewhat different case where we don't report the op in the API because it's marked private, but we make it accessible. Same thing applies to ""composite"". Really we should just make those public. Theres' a JIRA for doing that for ""composite"". The only reason I haven't done that one is a lame concern that the description for these is not ""complete"", i.e. the params and responses are not fully described (and can't be.) That's kind of lame though. Obviously the system is massively impaired if ""composite"" can't be called by a user.

If we made ""composite"" and ""describe"" public, rejecting end user calls to private methods would be more feasible. It has similar issues in terms of potential breakage and being ""too late for this major"" as rejecting non-runtime-only would. It should be a smaller issue, as I don't expect subsystem to have private ops that users are meant to invoke anyway. Really that's kind of a bug in the subsystem. :)",,,,,,,,,,,,,,,,,,,,,,,,,,
Space before JVM argument in <jvm-options> causes failure,WFCORE-1144,12593553,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gaol,gaol,gaol,19/Nov/15 9:36 PM,25/Nov/15 2:11 PM,29/Nov/16 3:52 PM,25/Nov/15 2:11 PM,,,,,,,2.0.3.Final,,Domain Management,,,,,0,,,,,,"I have this configuration in my host.xml. Note the space before -XX:HeapDumpPath.

{code}
        <server name=""server-one"" group=""main-server-group"">
            <jvm name=""default"">
              <jvm-options>
                <option value=""-agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=n""/>
                <option value="" -XX:HeapDumpPath=/tmp/""/>
              </jvm-options>
           </jvm>
        </server>
{code}

When I start up EAP, server-one fails to start with this error message:

{code}
17:01:26,218 INFO  [org.jboss.as.process.Server:server-one.status] (ProcessController-threads - 3) JBAS012017: Starting process 'Server:server-one'
[Server:server-one] Listening for transport dt_socket at address: 8787
[Server:server-one] Error: Could not find or load main class  -XX:HeapDumpPath=.tmp.
17:01:26,766 INFO  [org.jboss.as.process.Server:server-one.status] (reaper for Server:server-one) JBAS012010: Process 'Server:server-one' finished with an exit status of 1
{code}","java version ""1.7.0_85""
OpenJDK Runtime Environment (rhel-2.6.1.3.el6_7-x86_64 u85-b01)
OpenJDK 64-Bit Server VM (build 24.85-b03, mixed mode)

RHEL 6.5",,,,,,,,,,,,,,,JBEAP-1762,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1259,,,,,,0.0,0.0,,1|hzzt7r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cancel button in JConsole do nothing,WFCORE-1143,12591986,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,09/Nov/15 10:56 AM,25/Nov/15 2:11 PM,29/Nov/16 3:52 PM,25/Nov/15 2:11 PM,2.0.0.Final,,,,,,2.0.3.Final,,CLI,,,,,0,,,,,,"*Description of problem:*
Cancel button in JConsole do nothing. It should be removed from JConsole

*How reproducible:*
Always

*Steps to Reproduce:*
# cd EAP_HOME
# ./bin/standalone.sh &
# ./bin/jconsole.sh
# Click to CLI tab
# Click to ""Cancel"" button",,,,,,,,,,,,,,,,JBEAP-1801,,,,,,,,,,,23/Nov/15 6:26 AM;mkopecky;cancel_button.png;https://issues.jboss.org/secure/attachment/12395220/cancel_button.png,,,,,,,,,,,,,,,,,,?,,,,,,,,,,,,,1.0,8.0,,1|hzzk6f:,9223372036854775807,,,,,,,,,,,"18/Nov/15 10:45 AM;ctomc;Cancel button clears the username & password fields. 
But not really sure how useful is that.",19/Nov/15 9:03 PM;brian.stansberry;Please open issues in the correct project.,"23/Nov/15 6:07 AM;mkopecky;I used WildFly Project (not WildFly Core Project), because jconsole.sh script is not in ""wildfly-core"". But ""WildFly Core Project"" may be better, because CLI is part of WildFly Core.

[~ctomc]: In that case, ""cancel button"" could stay in jconsole ...","23/Nov/15 6:19 AM;dlofthouse;Which cancel button is being talked about here?  Could you please attach a screen shot.

From the description I can't work out do you mean a cancel button which is a part of jconsole - i.e. not in our control - or is there a separate cancel button you can not get rid of when you switch to the CLI tab?","23/Nov/15 6:30 AM;mkopecky;[~dlofthouse]: Screen shot is attached. This button is part ""login dialog"" in CLI tab. ""Login dialog"" disappear after login to CLI.","23/Nov/15 6:38 AM;dlofthouse;Ok that one does appear to be our code - WFCORE is the correct project as that is where the code for the CLI tab lives.

Looking at the screen shot you were already connected to the server - how did you connect?  If you are connected using Remoting JMX there should be no need to authenticate again as that tab is supposed to share the same connection.
","23/Nov/15 7:00 AM;mkopecky;I was connected to ""Local Process"". I didn't use Remoting JMX.","23/Nov/15 7:09 AM;dlofthouse;Ok, I see what you are saying - I agree that cancel button should be removed or the behaviour changed.

The top level connection dialogue in jconcole will close if you click cancel but they also have a menu item to bring it up again - for ours I think there are two options: -
 1 - When a user clicks cancel switch them to a different tab (not sure if this is possible)
 2 - Remove the cancel button.",,,,,,,,,,,,,,,,,,,
"Operation (""clean-obsolete-content"") failed NPE",WFCORE-1138,12593210,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,nathandennis,nathandennis,18/Nov/15 1:31 PM,19/Nov/15 3:43 PM,29/Nov/16 3:52 PM,19/Nov/15 3:43 PM,1.0.2.Final,,,,,,2.0.2.Final,,Domain Management,,,,,0,nullpointerexception,,,,,"NPE happens randomly knocking the instance off line and has to be restarted.



[Server:server-one] 13:03:37,900 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 1) WFLYCTL0013: Operation (""clean-obsolete-content"") failed - address: ([]): java.lang.NullPointerException
[Server:server-one] 	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.listLocalContents(ContentRepository.java:428)
[Server:server-one] 	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.cleanObsoleteContent(ContentRepository.java:390)
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.RemoteFileRepositoryService.cleanObsoleteContent(RemoteFileRepositoryService.java:160)
[Server:server-one] 	at org.jboss.as.server.operations.CleanObsoleteContentHandler.execute(CleanObsoleteContentHandler.java:76)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:803)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
[Server:server-one] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:205)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:626)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:616)
[Server:server-one] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner.cleanObsoleteContent(ContentRepositoryCleaner.java:132)
[Server:server-one] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner$ContentRepositoryCleanerTask.run(ContentRepositoryCleaner.java:67)
[Server:server-one] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
[Server:server-one] 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)
[Server:server-one] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
[Server:server-one] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
[Server:server-one] 	at java.lang.Thread.run(Thread.java:745)
[Server:server-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
[Server:server-one] 
[Server:server-one] 13:03:37,931 ERROR [org.jboss.as.server] (ServerService Thread Pool -- 1) WFLYSRV0216: Error cleaning obsolete content WFLYCTL0158: Operation handler failed: java.lang.NullPointerException ","Centos 6.7, OpenJDK 1.7, Wildfly 9.0.1.Final, nginx-plus

Domain, Full-ha, 2 nodes, one war",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1255,,,,,,0.0,0.0,,1|hzzr8f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Subsystem parser tests fail when woodstox parser is on classpath,WFCORE-1136,12593055,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,17/Nov/15 11:00 AM,04/Dec/15 2:15 PM,29/Nov/16 3:52 PM,04/Dec/15 2:15 PM,2.0.1.Final,,,,,,2.0.4.Final,,Test Suite,,,,,0,,,,,,"When subsystem is testing remove resources and subsystem model is empty.
Marshaling fails inside subsystem harness with

{noformat}
Caused by: javax.xml.stream.XMLStreamException: Trying to write END_DOCUMENT when document has no root (ie. trying to output empty document).
	at com.ctc.wstx.sw.BaseStreamWriter.throwOutputError(BaseStreamWriter.java:1522)
	at com.ctc.wstx.sw.BaseStreamWriter.reportNwfStructure(BaseStreamWriter.java:1551)
	at com.ctc.wstx.sw.BaseStreamWriter._finishDocument(BaseStreamWriter.java:1377)
	at com.ctc.wstx.sw.BaseStreamWriter.writeEndDocument(BaseStreamWriter.java:536)
	at org.jboss.staxmapper.FormattingXMLStreamWriter.writeEndDocument(FormattingXMLStreamWriter.java:215)
	at org.jboss.as.subsystem.test.TestParser.writeContent(TestParser.java:80)
	at org.jboss.as.subsystem.test.TestParser.writeContent(TestParser.java:51)
	at org.jboss.staxmapper.XMLMapperImpl.doDeparse(XMLMapperImpl.java:88)
	at org.jboss.staxmapper.XMLMapperImpl.deparseDocument(XMLMapperImpl.java:83)
	at org.jboss.as.controller.persistence.AbstractConfigurationPersister.marshallAsXml(AbstractConfigurationPersister.java:117)
	... 51 more

{noformat}",woodstox parser on test classpath,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzzq9z:,9223372036854775807,,,,,,,,,Workaround Exists,Make sure woodstox or any other xml parser is not on test classpath,,,,,,,,,,,,,,,,,,,,,,,,,,,
A java.lang.Error in Stage.DONE can lead to hangs,WFCORE-1134,12592952,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,16/Nov/15 4:40 PM,16/Dec/15 5:49 PM,29/Nov/16 3:52 PM,16/Dec/15 5:49 PM,2.0.1.Final,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"As part of investigating https://bugzilla.redhat.com/show_bug.cgi?id=1259767 I've looked into general handling of situations when java.lang.Error is thrown during management operation execution.

Handling prior to Stage.DONE looks ok, with the error caught, logged and the failure-description on the response set. But if the error happens after commit or during rollback, it isn't always properly triggering a response. In the intra-domain case the remote node that has the problem tries to send a failure response to the calling HC, but uses the wrong request id, resulting in that response being dropped and the calling HC continuing to wait.

A post-commit Error seems pretty unlikely. A rollback error seems more possible, as a rollback may involve installing significant numbers of services.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1305,,,,,,0.0,0.0,,1|hzzpsf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JDK 1.8 on Mac causes javax.script.ScriptEngineFactory: Provider apple.applescript.AppleScriptEngineFactory not found,WFCORE-1133,12592924,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jaysensharma,jaysensharma,jaysensharma,16/Nov/15 12:35 PM,19/Nov/15 4:35 PM,29/Nov/16 3:52 PM,19/Nov/15 4:35 PM,2.0.1.Final,,,,,,2.0.2.Final,,,,,,,0,,,,,,"- When we try deploying any simple ServerSide java script based application on WildFly 10 we see the following Error while deploying the application:

{code:java}
22:50:49,050 ERROR [stderr] (ServerService Thread Pool -- 62) ScriptEngineManager providers.next(): javax.script.ScriptEngineFactory: Provider apple.applescript.AppleScriptEngineFactory not found
{code}

try deploying the attached application on WildFly 10 and notice the console output.","Macbook
JDK 1.8 ",,,,,,,,,,,,,,,,,,,,,,,,,,16/Nov/15 12:34 PM;jaysensharma;WildFlyServerSideJavaScript.war;https://issues.jboss.org/secure/attachment/12394997/WildFlyServerSideJavaScript.war,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,2.0,,1|hzzpmv:,9223372036854775807,,,,,,,,,,,"16/Nov/15 12:50 PM;jaysensharma;Pull request sent: https://github.com/wildfly/wildfly-core/pull/1249
Looks like we need to add following dependency in the ""sun.scripting"" module

{code:java}
 <path name=""apple/applescript""/>
{code}","19/Nov/15 12:02 PM;brian.stansberry;Stuart, I'm assigning this to you as you can best evaluate how critical this is for WF 10 and whether the PR is ok.

You're a busy guy, so if it's valid feel free to reassign back to me and I'll deal with the process hoops to get it in (file JBEAP, backport etc).",,,,,,,,,,,,,,,,,,,,,,,,,
Only set socket send and receive buffer sizes if it is in the Remoting subsystem configuration,WFCORE-1132,12592648,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,,andy.miller,andy.miller,12/Nov/15 3:52 PM,13/Nov/15 10:44 AM,29/Nov/16 3:52 PM,13/Nov/15 10:44 AM,2.0.1.Final,,,,,,2.0.2.Final,,,,,,,0,,,,,,"Original report:

{quote}
In our testing of Wildfy 10 CR4, in the performance lab, we found that one of the differences between EAP 6.4.x and Wildfly 10 was that EAP does not set the socket send and receive buffers.  We changed the configuration of Wildfly (Undertow) to remove the buffer parameters from the configuration, and we found that the buffer sizes were still be set to 8k.  We hacked XNIO to comment out the setting of these parameters, and latency improved quite a bit.

So, we need a permanent fix so that the socket send and receive buffers are only set, if they are specified in the configuration.
{quote}

This applies to the Remoting subsystem configuration, versions 2.0 and onwards, and also possibly to Undertow, though that subsystem does not appear to use default values.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,24.0,,1|hzzo4n:,9223372036854775807,,,,,,,,,,,"12/Nov/15 4:03 PM;dmlloyd;This analysis is probably wrong:

{quote}The ""receive-buffer-size"" and ""send-buffer-size"" management attributes have a default value of 8192 (bytes) as of 2.0 of the subsystem (that is, since WildFly 8 onwards).  This is obviously a very poor default.  On my system at least, the default buffer sizes are nearer to 100s of kilobytes.

The performance team argues that there should be no default, letting the OS choose.  I'm okay with that, and I'm also okay with changing the default to something more sensible in the 128k range, depending on what works best for compatibility, etc.{quote}

Still figuring out what's happening here.  Those attributes seem to correspond to the Remoting buffer sizes as expected, so this problem may actually be in the Undertow subsystem after all.","12/Nov/15 4:09 PM;andy.miller;We would prefer no defaults, and this also follows the recommendation from the networking expert on the platform performance team.

One other data point, in our testing in the performance lab, latency improved significantly by removing the setting of the send and receive buffers.",12/Nov/15 4:23 PM;dmlloyd;I've done a search through various code bases and I'm not actually finding any place which is setting the socket buffer size to 8192.  Is it possible to get a backtrace from where you observe the call to {{setSendBufferSize()}} and/or {{setReceiveBufferSize()}}?,"12/Nov/15 4:29 PM;andy.miller;We removed it from the Undertow configuration, as we had them specified, and STRACE still showed it being set.  We then just commented out the code in XNIO, so we didn't use profiling with the stack trace, just STRACE to see what socket options were being set.","12/Nov/15 5:22 PM;andy.miller;Oh, one other thing.  We also tried to search the code base looking for the 8k, but it uses a hex value to set it, so it was not easy to find.","12/Nov/15 6:08 PM;jason.greene;I just looked and I can't find anywhere the source it sets it either. I tried booting the server and setting a breakpoint (and trying to connect so that it sets the socket opts on the child socket). I also tried strace but no buffer options were set, just TCP_NODELAY.
",12/Nov/15 6:11 PM;jason.greene;Only thing I can think of is if one of the other protocols is setting it. I tried just connections over http.,"13/Nov/15 8:50 AM;andy.miller;We just found that the Remoting schema actually has 8192 as a default value.

So, its coming from the schema, which is really bad in my opinion.","13/Nov/15 9:30 AM;dmlloyd;[~andy.miller] You've made the same mistake that I, Jason, and then Brian made. :-)

The setting in the Remoting schema is about sizing for NIO ByteBuffers used by Remoting.  For this purpose, 8192 is actually an optimal size for these buffers (since they can be filled and emptied using scatter/gather operations).  This value never makes its way to a socket option call.  It maps to RemotingOptions.[SEND|RECEIVE]_BUFFER_SIZE, whereas the socket options come from org.xnio.Options.[SEND_RECEIVE]_BUFFER.  In retrospect I might have chosen less ambiguous names...

But in any event, that schema element is a red herring, and we still have failed to reproduce this problem locally.","13/Nov/15 9:36 AM;andy.miller;Okay, I'm at a loss here, but org.xnio.Options.[SEND_RECEIVE]_BUFFER is what we commented out in XNIO that finally showed that the socket send receive buffers where no longer being set.  And by the way, my name is not Andrew, but Andrig ;-)","13/Nov/15 9:39 AM;andy.miller;So, when we booted Wildfly 10 CR4, and used STRACE we clearly see those send/receive buffer size set, so its happening somewhere, and commenting out the two lines of code in XNIO solved, it, but the logic clearly shows that if those values are not in the OptionMap, they don't get set, so they are being set somewhere above XNIO.","13/Nov/15 9:39 AM;dmlloyd;Ah I did ""anmiller"" and didn't even check the result!  Sorry about that.","13/Nov/15 9:41 AM;dmlloyd;Yeah that's why I'm hoping to either reproduce it locally, or get a stacktrace capture of when that actually happens in XNIO.  I guess you could even just jam a log.error(new Throwable(), """") in there.",13/Nov/15 9:42 AM;dmlloyd;It might possibly be the HornetQ over Netty over XNIO mapping...?,13/Nov/15 9:46 AM;andy.miller;Is that really happening?,13/Nov/15 9:50 AM;dmlloyd;Yeah at least it was - I don't know if that's still a thing now that we're heading towards Artemis. [~jmesnil] do you know?,"13/Nov/15 9:58 AM;jmesnil;Yes, Artemis is also using Netty over XNIO mapping.

The class that is used to set the send/receive buffer sizes is at https://github.com/xnio/netty-xnio-transport/blob/master/src/main/java/org/xnio/netty/transport/XnioSocketChannelConfig.java","13/Nov/15 10:03 AM;jason.greene;[~andy.miller] netty-xnio is only used for JMS over HTTP Upgrade, where undertow hands off the connection. Direct connections are pure netty over NIO. 

I did test the JMS quick start, which uses HTTP, and it didn't set the setting.

Last night I decompiled all jars in wildfly, and searched the symbol table to Options.SEND/RECEIVE_BUFFER and didn't see anything that would cause it, other than config, but I need to double check the parsers, to see if there is some funky condition where they pipe in a management setting.",13/Nov/15 10:05 AM;dmlloyd;I think at this point the only realistic/efficient option is to capture a stack trace.,"13/Nov/15 10:08 AM;dmlloyd;No [~ctomc], you've made the same mistake mentioned above, see: [#comment-13128751]",13/Nov/15 10:09 AM;jason.greene;Maybe we should add a comment to that :),13/Nov/15 10:10 AM;dmlloyd;Something!,"13/Nov/15 10:13 AM;ctomc;You are right David, sorry for adding confusion to thread, removed the comment just to remove noise.","13/Nov/15 10:44 AM;andy.miller;Okay, sorry for the wild goose chase.  It turns out that what we were seeing in the socket options was actually the PostgreSQL sockets being set.",,,
Improve the subsystem test schema test coverage,WFCORE-1128,12592305,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,kabirkhan,kabirkhan,kabirkhan,10/Nov/15 6:15 PM,01/Sep/16 1:35 PM,29/Nov/16 3:52 PM,,2.0.1.Final,,,,,,,,Domain Management,,,,,0,,,,,,"Currently the way to enable the AbstractSubsystemBaseTest testSchema() and testSchemaOfSubsystemTemplates() tests is to override getSubsystemXsdPath() and getSubsystemTemplatePaths().

Rather than making it explicit to turn on, it should be explicit to turn off.

Also the current way of doing this uses Assume.assumeTrue() to check if a test has provided a schema file, which provides a lot of ignored test noise in the test output. If the xsd should not be tested, methods should instead override testSchema() or testSchemaOfSubsystemTemplates() and provide an empty implementation with a comment saying why it is not important.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1250,,,,,,0.0,3.0,,1|hzzm3r:,9223372036854775807,,,,,,,,,,,21/Dec/15 11:53 AM;brian.stansberry;I bumped this to 3 as 1) I don't think we'd merge it at this stage and 2) it would need a JBEAP and backport anyway.,24/Jun/16 5:21 PM;brian.stansberry;This PR was closed by you Kabir; I don't remember why.,"01/Sep/16 1:35 PM;brian.stansberry;I'm unscheduling this to try and get the 3.0 task list down to bugs, EAP 7.1 features or stuff we know is coming. Let me know if it's likely to happen for 3.0 Beta1.",,,,,,,,,,,,,,,,,,,,,,,,
SocketBindingManagerImpl$UnnamedRegistryImpl is overly picky about unbound sockets,WFCORE-1127,12592304,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,10/Nov/15 6:06 PM,09/Sep/16 11:10 AM,29/Nov/16 3:52 PM,19/Nov/15 3:42 PM,2.0.1.Final,,,,,,2.0.2.Final,,Domain Management,,,,,0,,,,,,"A failure like this isn't necessary:

{code}
08:02:23,475 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector: java.lang.IllegalStateException
    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:96)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException
    at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.unregisterBinding(SocketBindingManagerImpl.java:501)
    at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)
    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.close(ManagedSocketFactory.java:148)
    at org.jgroups.protocols.UDP.closeUnicastSocket(UDP.java:577)
    at org.jgroups.protocols.UDP.destroySockets(UDP.java:429)
    at org.jgroups.protocols.UDP.start(UDP.java:274)
    at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)
    at org.jgroups.JChannel.startStack(JChannel.java:890)
    at org.jgroups.JChannel._preConnect(JChannel.java:553)
    at org.jgroups.JChannel.connect(JChannel.java:288)
    at org.jgroups.JChannel.connect(JChannel.java:279)
    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)
    ... 5 more
{code}

If there's no socket address, it should just move on.",,,,,,,,,,,,,,,,,,,,,JBEAP-1767,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1282532,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1239,,,,,,0.0,7.0,,1|hzzm3j:,9223372036854775807,,,,,,,,,,,"11/Nov/15 10:08 AM;brian.stansberry;Looking in further, it looks like some of the Closeables returned by UnnamedRegistry will close the socket before trying to unregister, so that won't work as the InetSocketAddress will no longer be available. Now that would result in an ISE; if I just get rid of that the socket won't get unregistered, a small leak and leaving incorrect data if users look. So as part of this JIRA I'll fix that as well.",20/Nov/15 7:33 AM;jira-bugzilla-migration;Ryan Emerson <remerson@redhat.com> changed the Status of [bug 1282532|https://bugzilla.redhat.com/show_bug.cgi?id=1282532] from NEW to ASSIGNED,01/Sep/16 7:59 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1282532|https://bugzilla.redhat.com/show_bug.cgi?id=1282532] from ASSIGNED to NEW,"08/Sep/16 11:50 AM;dan.berindei;This is going to be a problem again with JGroups 4.0. JGroups always creates the socket first, and binds it later. {{ManagedSocketFactoryTest}} explicitly tests that unbound sockets are registered with the (mocked) {{SocketBindingManager.UnnamedBindingRegistry}}.

JGroups prior to version 4.0 ""fixes"" this by always replacing the {{ManagedSocketFactory}} set by {{JChannelFactory.init()}} with its own {{DefaultSocketFactory}} in {{JChannel.startStack()}}. But JGroups 4.0 actually tries to use the {{SocketFactory}} injected by the JGroups subsystem, and fails with an {{IllegalStateException}}.",08/Sep/16 12:58 PM;brian.stansberry;[~pferraro] ^^^,"09/Sep/16 8:50 AM;pferraro;[~dan.berindei]
""JGroups prior to version 4.0 ""fixes"" this by always replacing the ManagedSocketFactory set by JChannelFactory.init() with its own DefaultSocketFactory in JChannel.startStack().""

That not the case in WF 10.  This was corrected almost a year ago:
https://github.com/wildfly/wildfly/commit/ab5b4358aef108dfa8296b1f5df7888d90425031

This exposed a number of issues with unbound sockets and the SocketBindingManager - all of which were fixed, such that WildFly 10.x uses the the provided ManagedSocketFactory w/JGroups 3.6.x without issue.  Granted, I haven't tried this with JGroups 4 yet, but it seems to me that the infinispan-server fork of WildFly's jgroups subsystem is quite out of date.","09/Sep/16 11:10 AM;dan.berindei;Thanks [~pferraro], I looked at {{UnnamedRegistryImpl.registerBinding()}} to check that it still throws the {{IllegalStateException}}, but I didn't realize {{ManagedSocketFactory}} and {{ManagedSocketFactoryTest}} had changed instead. I guess I have some rebasing to do :)",,,,,,,,,,,,,,,,,,,,
Attribute defined as ObjectListAttributeDefinition always mandatory,WFCORE-1122,12592267,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,dlofthouse,dlofthouse,10/Nov/15 12:27 PM,10/Nov/15 12:56 PM,29/Nov/16 3:52 PM,10/Nov/15 12:56 PM,2.0.1.Final,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,affects_elytron,,,,,"Take the following attribute definition: -

{noformat}
    static final ObjectListAttributeDefinition CREDENTIALS = new ObjectListAttributeDefinition.Builder(ElytronDescriptionConstants.CREDENTIALS, CREDENTIAL)
        .setAllowNull(true)
        .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES)
        .build();
{noformat}

Existing subsystem tests do not set this and the following error is reported: -

{noformat}
Tests run: 12, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.8 sec <<< FAILURE! - in org.wildfly.extension.elytron.SubsystemParsingTestCase
testParseAndMarshalModel_Realms(org.wildfly.extension.elytron.SubsystemParsingTestCase)  Time elapsed: 0.015 sec  <<< ERROR!
java.lang.IllegalArgumentException: WFLYCTL0231: Required parameter credentials is not present. {""operation"" => ""add"",""address"" => [(""subsystem"" => ""elytron""),(""properties-realm"" => ""RealmFive"")],""users-properties"" => {""path"" => ""my.properties""}}
	at org.jboss.as.controller.operations.validation.OperationValidator.checkAllRequiredPropertiesArePresent(OperationValidator.java:207)
	at org.jboss.as.controller.operations.validation.OperationValidator.validateOperation(OperationValidator.java:138)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:334)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:336)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)
	at java.lang.Thread.run(Thread.java:745)

{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzzluv:,9223372036854775807,,,,,,,,,,,10/Nov/15 12:56 PM;dlofthouse;Both the ObjectListAttributeDefinition and the ObjectTypeAttributeDefinition need to be set to allow null.,,,,,,,,,,,,,,,,,,,,,,,,,,
"Launcher sets ""-Djava.net.preferIPv4Stack=true"" also with IPv6 profile",WFCORE-1120,12592122,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,mkopecky,mkopecky,10/Nov/15 7:21 AM,17/Nov/15 11:48 AM,29/Nov/16 3:52 PM,17/Nov/15 11:48 AM,2.0.1.Final,,,,,,2.0.2.Final,,Test Suite,,,,,0,,,,,,"*Description of problem:*
Domain tests ""-Djava.net.preferIPv4Stack=true"" also with IPv6 profile. This property is set in AbstractCommandBuilder of WildFly-Core:
https://github.com/wildfly/wildfly-core/blob/master/launcher/src/main/java/org/wildfly/core/launcher/AbstractCommandBuilder.java#L50

There should be option for disable of this option in arquillian.xml file. And testsuite should use this option with IPv6 profile.

*How reproducible:*
Always

*Steps to Reproduce:*
# ./integration-tests.sh -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIPV6_1 -Dnode1=$MYTESTIPV6_2 -Dipv6 -Dts.manualmode -Dtest=OutboundLdapConnectionTestCase -DtestLogToFile=false -Djboss.dist=$JBOSS_DIST -Dts.noSmoke

*Actual results:*
{noformat}
07:04:26,054 INFO  [org.jboss.as.arquillian.container.managed.ManagedDeployableContainer] (main) Starting container with: [/qa/tools/opt/jdk1.8.0_last/bin/java,
...
-Djava.net.preferIPv4Stack=true, -Djava.net.preferIPv4Stack=false
...
{noformat} 

*Expected results:*
EAP is not started with ""-Djava.net.preferIPv4Stack=true"" property with IPv6 profile

*Additional info:*
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-ts-ipv6-arqillian/jdk=java18_default,label_exp=eap-sustaining&&RHEL6&&x86_64&&ipv6/2/console",,,,,,,,,,,,,,,,JBEAP-1861,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,https://github.com/wildfly/wildfly-core/pull/1238,,,,,,0.0,4.0,,1|hzzkzj:,9223372036854775807,,,,,,,,,,,"10/Nov/15 8:50 AM;ctomc;Just heads up, WildFly core doesn't use arquillian anywhere. Issue itself is still valid.","12/Nov/15 4:55 AM;mkopecky;[~jamezp]: Thank you for you fix, it seems to be useful for java.net.preferIPv4Stack property. But is your patch useful also for java memory properties like [-Xms64m or -Xmx512m|https://github.com/wildfly/wildfly-core/blob/master/launcher/src/main/java/org/wildfly/core/launcher/AbstractCommandBuilder.java#L48]? If arquillian.xml defines -Xms1024m, default value should be replaced. This allows memory tuning of java memory during TS runs, it could be useful on slower machines ...","12/Nov/15 9:21 AM;ctomc;Yes, James'es patch addresses also that.
That is its main improvement over my original patch.","12/Nov/15 12:29 PM;jamezp;Actually my patch won't catch that either. I'll have to think about the best solution to catch those. I'd rather not look for every JVM argument. The system property one was quite easy, but this would be more complicated.

One solution would be to use {{setJavaOptions()}} rather than {{addJavaOption()}}. In fact looking at the wildfly-arquillian code I'd say we should likely use the setter instead. That would be the same behavior as [previous versions|https://github.com/wildfly/wildfly/blob/8.1.0.Final/arquillian/container-managed/src/main/java/org/jboss/as/arquillian/container/managed/ManagedDeployableContainer.java#L121-L125].",,,,,,,,,,,,,,,,,,,,,,,
ManagedDatagramSocketBinding throw NPE,WFCORE-1119,12592078,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,timtasse,timtasse,09/Nov/15 6:48 PM,23/Aug/16 3:22 AM,29/Nov/16 3:52 PM,19/Nov/15 3:42 PM,2.0.0.CR8,,,,,,2.0.2.Final,,Domain Management,,,,,0,,,,,,"i think i have found the same bug as in WFCORE-1033 but in another method.
in the previous bug the bind method was the problem, here i have the same NPE in the close method. there is no null check to registry as in the bind method.

{noformat}
[Server:mgmt-1-prod] 2015-11-10 00:37:15,454 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector:
java.lang.NullPointerException
[Server:mgmt-1-prod]    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:9
6)
[Server:mgmt-1-prod]    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
[Server:mgmt-1-prod]    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
[Server:mgmt-1-prod]    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Server:mgmt-1-prod]    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Server:mgmt-1-prod]    at java.lang.Thread.run(Thread.java:745)
[Server:mgmt-1-prod] Caused by: java.lang.NullPointerException
[Server:mgmt-1-prod]    at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)
[Server:mgmt-1-prod]    at java.net.DatagramSocket.<init>(DatagramSocket.java:245)
[Server:mgmt-1-prod]    at org.jboss.as.network.ManagedDatagramSocketBinding.<init>(ManagedDatagramSocketBinding.java:41)
[Server:mgmt-1-prod]    at org.jboss.as.network.SocketBindingManagerImpl.createDatagramSocket(SocketBindingManagerImpl.java:87)
[Server:mgmt-1-prod]    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.createDatagramSocket(ManagedSocketFactory.java:103)
[Server:mgmt-1-prod]    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.createDatagramSocket(ManagedSocketFactory.java:113)
[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.createDatagramSocketWithBindPort(UDP.java:487)
[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.createSockets(UDP.java:361)
[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.start(UDP.java:270)
[Server:mgmt-1-prod]    at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)
[Server:mgmt-1-prod]    at org.jgroups.JChannel.startStack(JChannel.java:890)
[Server:mgmt-1-prod]    at org.jgroups.JChannel._preConnect(JChannel.java:553)
[Server:mgmt-1-prod]    at org.jgroups.JChannel.connect(JChannel.java:288)
[Server:mgmt-1-prod]    at org.jgroups.JChannel.connect(JChannel.java:279)
[Server:mgmt-1-prod]    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)
[Server:mgmt-1-prod]    ... 5 more
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1280235,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1239,,,,,,0.0,8.0,,1|hzzkq7:,9223372036854775807,,,,,,,,,,,10/Nov/15 4:25 PM;brian.stansberry;Note this NPE is masking some other failure that would have been thrown anyway. The close() method is only called from DatagramSocket if the bind call failed for some reason.,"10/Nov/15 4:37 PM;timtasse;wildfly 10 CR2 works and i have now tested wildfly 10CR4 but there with the same config i get this NPE.
i can not see the underlying failure.","11/Nov/15 5:18 AM;timtasse;ok the problem comes from the UDP multicast JGroups protocol.
now i use TCP unicast with TCPPING and no NPE comes and it worked.",11/Nov/15 6:12 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1280235|https://bugzilla.redhat.com/show_bug.cgi?id=1280235] from NEW to ASSIGNED,18/Jul/16 2:53 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1280235|https://bugzilla.redhat.com/show_bug.cgi?id=1280235] from ASSIGNED to POST,05/Aug/16 1:50 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1280235|https://bugzilla.redhat.com/show_bug.cgi?id=1280235] from POST to MODIFIED,05/Aug/16 1:50 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1280235|https://bugzilla.redhat.com/show_bug.cgi?id=1280235] from MODIFIED to ON_QA,23/Aug/16 3:22 AM;jira-bugzilla-migration;Michael Cada <mcada@redhat.com> changed the Status of [bug 1280235|https://bugzilla.redhat.com/show_bug.cgi?id=1280235] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,
Intermittent failures of CompositeOperationTestCase & CoreResourceManagementTestCase,WFCORE-1115,12591924,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,pkremens,pkremens,09/Nov/15 6:29 AM,19/Nov/15 3:41 PM,29/Nov/16 3:52 PM,19/Nov/15 3:41 PM,3.0.0.Alpha1,,,,,,2.0.2.Final,,Test Suite,,,,,0,,,,,,"org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase and org.jboss.as.test.integration.domain.suites.CoreResourceManagementTestCase from wildfly-core testsuite domain module starts to intermittently fail since 7.0.0.DR13 (2.0.0.CR8).

Tests fails only once I run the whole Domain Mode Integration Tests module, running only these two tests in isolation never fails. 

[Reproducer job|https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-core-CompositeOperation-master-reproducer/] which starts the tests in testsuite/domain module:
 \- *2.0.0.CR6* - intermittent failures of HcExtensionAndSubsystemManagementTestCase JBEAP-1598
 \- *2.0.0.CR7* - intermittent failures of HcExtensionAndSubsystemManagementTestCase JBEAP-1598
 \- *2.0.0.CR8* - no more HcExtensionAndSubsystemManagementTestCase failures, CompositeOperationTestCase and CoreResourceManagementTestCase starts failing
\- *3.0.0.Alpha1-SNAPSHOT* - CompositeOperationTestCase and CoreResourceManagementTestCase intermittent fails

Attaching surefire reports.",,,,,,,,,,,,,,,,JBEAP-1793,,,,,WFCORE-1089,,,,,,09/Nov/15 6:29 AM;pkremens;TEST-org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase.xml;https://issues.jboss.org/secure/attachment/12394768/TEST-org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase.xml,09/Nov/15 6:29 AM;pkremens;TEST-org.jboss.as.test.integration.domain.suites.CoreResourceManagementTestCase.xml;https://issues.jboss.org/secure/attachment/12394769/TEST-org.jboss.as.test.integration.domain.suites.CoreResourceManagementTestCase.xml,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1245,,,,,,2.0,1.0,,1|hzzjsv:,9223372036854775807,,,,,,,,,,,"10/Nov/15 4:41 PM;brian.stansberry;This has a ""relates to"" link to WFCORE-1089, which is ok, but the working assumption should be that this is ""caused by"" WFCORE-1089. My initial filing of 1089 followed analysis of intermittent cases of these two failures.",,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in DeploymentStatusHandler,WFCORE-1114,12591710,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,05/Nov/15 9:08 PM,10/May/16 3:45 PM,29/Nov/16 3:52 PM,18/Mar/16 1:45 PM,2.0.0.Final,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"Saw an NPE in a test run. This is because AbstractDeploymentUnitService.getStatus() references the possibly null 'monitor' field.

{code}
org.jboss.as.test.manualmode.deployment.DeploymentScannerOperationTestCase.testStartup: java.lang.AssertionError: null
    at org.jboss.as.test.manualmode.deployment.DeploymentScannerOperationTestCase.testStartup(DeploymentScannerOperationTestCase.java:92)
------- Stdout: -------
23:55:18,131 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: /usr/java/jdk1.8.0_65/jre/bin/java -D[Standalone] -javaagent:/store/repository/org/jboss/byteman/byteman/2.2.1/byteman-2.2.1.jar=port:9091,boot:/store/repository/org/jboss/byteman/byteman/2.2.1/byteman-2.2.1.jar,sys:/opt/buildAgent/work/8d74ae55e497982e/testsuite/shared/target/wildfly-core-testsuite-shared-3.0.0.Alpha1-SNAPSHOT.jar -Dorg.jboss.byteman.transform.all -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=/store/repository -Xmx512m -Djboss.dist=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true -server -Dts.timeout.factor=100 -Djbossas.ts.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode -ea -Dorg.jboss.boot.log.file=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/log/server.log -Dlogging.configuration=file:/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/configuration/logging.properties -jar /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/jboss-modules.jar -mp /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/modules org.jboss.as.standalone -Djboss.home.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core -Djboss.server.base.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone -Djboss.server.log.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/log -Djboss.server.config.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/configuration -c=standalone.xml -bmanagement=::1 -Djboss.http.port=8080 -Djboss.bind.address=::1 
23:55:18,299 INFO  [org.xnio] (main) XNIO version 3.3.2.Final
TransformListener() : accepting requests on localhost:9091
23:55:18,427 INFO  [org.xnio.nio] (main) XNIO NIO Implementation Version 3.3.2.Final
23:55:18,469 INFO  [org.jboss.remoting] (main) JBoss Remoting version 4.0.14.Final
 [0m23:55:18,781 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.4.Final
 [0m [0m23:55:19,059 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
 [0m [0m23:55:19,150 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: WildFly Core 3.0.0.Alpha1-SNAPSHOT ""Kenny"" starting
 [0m [0m23:55:19,716 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
 [0m [0m23:55:19,739 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.3.2.Final
 [0m [0m23:55:19,747 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.3.2.Final
 [0m [0m23:55:19,799 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.14.Final
 [0m [33m23:55:19,896 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-4) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[::1]:9990/management
 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://[::1]:9990
 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha1-SNAPSHOT ""Kenny"" started in 1710ms - Started 55 of 57 services (15 services are lazy, passive or on-demand)
 [0m [0m23:55:20,610 INFO  [org.jboss.as.repository] (DeploymentScanner-threads - 2) WFLYDR0001: Content added at location /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/data/content/21/5cf647697bfbd1ed32b458a4568c01fb6e8dd6/content
 [0m [0m23:55:20,628 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of ""deployment-one.jar"" (runtime-name: ""deployment-one.jar"")
 [0m [0m23:55:20,669 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) WFLYSRV0010: Deployed ""deployment-one.jar"" (runtime-name : ""deployment-one.jar"")
 [0m [0m23:55:21,399 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment deployment-one.jar (runtime-name: deployment-one.jar) in 6ms
 [0m [31m23:55:21,403 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([(""deployment"" => ""deployment-one.jar"")]): java.lang.NullPointerException
    at org.jboss.as.server.deployment.AbstractDeploymentUnitService.getStatus(AbstractDeploymentUnitService.java:111)
    at org.jboss.as.server.deployment.DeploymentStatusHandler$1.execute(DeploymentStatusHandler.java:61)
    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
    at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
    at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
    at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1341)
    at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
    at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)
    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)
    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)
    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:422)
    at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)
    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:465)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
    at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1222,,,,,,0.0,0.0,,1|hzzihz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Wildfly 9.0.1 Final fails  next day  with WFLYDS0032: Failed to list files in directory,WFCORE-1108,12585348,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,georgiosleon,georgiosleon,18/Sep/15 5:45 AM,10/Feb/16 12:11 PM,29/Nov/16 3:52 PM,,,,,,,,,,,,,,,0,,,,,,"Hi  all,

First Wildlfly is the best  Bravo  from Greece .

 

 

We have  wildfly 9.0.1 Final    installed    as  root   and all folders are  owner root  

we deployed our  web app (war) via the Web UI administration   everything  works  for several hours  the next day   we come to work  and  Wildlfly  fails   with error below   any help is very welcome

 

ls          /opt/wildfly-9.0.1.Final/standalone/deployments

drwxr-xr-x. 3 root root 4096 Sep 16 14:24 configuration

drwxr-xr-x. 8 root root 4096 Sep 10 11:20 data

drwxr-xr-x. 2 root root   23 Jul 23 21:01 deployments

drwxr-xr-x. 3 root root   16 Jul 23 21:01 lib

drwxr-xr-x. 2 root root 4096 Sep 18 00:00 log

drwxr-xr-x. 7 root root   94 Sep 16 14:24 tmp

 

 

2015-09-18 10:02:41,735 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0012: Scan of /opt/wildfly-9.0.1.Final/standalone/deployments threw Exception: java.lang.RuntimeException: WFLYDS0032: Failed to list files in directory /opt/wildfly-9.0.1.Final/standalone/deployments. Check that the contents of the directory are readable.

    at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.listDirectoryChildren(FileSystemDeploymentService.java:1170)

    at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scanDirectory(FileSystemDeploymentService.java:664)

    at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:474)

    at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:393)

    at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$DeploymentScanRunnable.run(FileSystemDeploymentService.java:161)

    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)

    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)

    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)

    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)

    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)

    at java.lang.Thread.run(Thread.java:745)

    at org.jboss.threads.JBossThread.run(JBossThread.java:320)

 

 

Thanks ",Wildfly 9.0.1 Final,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1228,,,,,,0.0,2.0,,1|hzyjrj:,9223372036854775807,,,,,,,,,,,"06/Nov/15 4:12 PM;ehugonnet;Since I can't reproduce, using java.nio.file.Files to get better exceptions.","11/Nov/15 3:33 PM;brian.stansberry;I'm rejecting the PR not because it's wrong but because AIUI it doesn't fix the issue, just gets data. So I want this JIRA in the correct state.",,,,,,,,,,,,,,,,,,,,,,,,,
DirectoryNotEmptyException on undeploy of ear,WFCORE-1107,12575791,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ehugonnet,lafr,lafr,21/Jun/15 11:02 AM,18/Nov/15 9:52 AM,29/Nov/16 3:52 PM,18/Nov/15 9:52 AM,,,,,,,2.0.2.Final,,Domain Management,,,,,3,,,,,,"When undeploying my ear by removing the ear file from the standalone/deployments folder I sometimes see this exception at the end:

21.06. 16:49:25,674 INFO  [org.jboss.as.server.deployment#stop] WFLYSRV0028: Stopped deployment maj2e-langfr-dev.ear (runtime-name: maj2e-langfr-dev.ear) in 3072ms
21.06. 16:49:26,034 ERROR [org.jboss.as.repository#removeContent] WFLYDR0010: Couldn't delete content /mbi/tools/jboss/10.0/standalone/data/content/30: java.nio.file.DirectoryNotEmptyException: /mbi/tools/jboss/10.0/standalone/data/content/30
	at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:242)
	at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
	at java.nio.file.Files.deleteIfExists(Files.java:1165)
	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.removeContent(ContentRepository.java:370)
	at org.jboss.as.server.deployment.DeploymentRemoveHandler$1$1.handleResult(DeploymentRemoveHandler.java:118)
	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1420)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1400)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1351)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311)
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1199)
	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:956)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:904)
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:620)
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:373)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:349)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1201)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:223)
	at org.jboss.as.controller.ModelControllerImpl$3$1$1.run(ModelControllerImpl.java:747)
	at org.jboss.as.controller.ModelControllerImpl$3$1$1.run(ModelControllerImpl.java:741)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.as.controller.ModelControllerImpl$3$1.run(ModelControllerImpl.java:741)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)

21.06. 16:49:26,174 INFO  [org.jboss.as.repository#removeContent] WFLYDR0002: Content removed from location /mbi/tools/jboss/10.0/standalone/data/content/30/4fee5b5fa782d2a7f04723ccab3e12351d600b/content
21.06. 16:49:26,176 INFO  [org.jboss.as.server#handleResult] WFLYSRV0009: Undeployed ""maj2e-langfr-dev.ear"" (runtime-name: ""maj2e-langfr-dev.ear"")

The exception seems to be ignored. But the named folder and 
a file /mbi/tools/jboss/10.0/standalone/data/content/30/7cb1f70d08fb375010369eea154c5db479eaba/content are still there.
","Oracle Solaris SPARC 10, Oracle JDK 1.8.0_45.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1230,,,,,,0.0,5.0,,1|hzx2db:,9223372036854775807,,,,,,,,,,,"14/Aug/15 4:20 AM;ochaloup;I can see time to time the same exception. Undeploying jar archive with cli undeploy command. This failure is really intermittent for me.

{code}
03:04:05,372 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 3) OutputObjectState::OutputObjectState()
03:04:05,372 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 3) InputObjectState::InputObjectState()
03:04:05,372 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 3) FileSystemStore.allObjUids(EISNAME, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,372 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 3) OutputObjectState::OutputObjectState()
03:04:05,393 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,393 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: )
03:04:05,393 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,393 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(OutputObjectState Uid   : 0:ffff0a10b418:4de00765:55cc4126:4c
Type  : null
Size  : 28
Buffer: , StateManager)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(OutputObjectState Uid   : 0:ffff0a10b418:4de00765:55cc4126:4c
Type  : null
Size  : 60
Buffer: , StateManager/BasicAction)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(OutputObjectState Uid   : 0:ffff0a10b418:4de00765:55cc4126:4c
Type  : null
Size  : 112
Buffer: , StateManager/BasicAction/TwoPhaseCoordinator)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(OutputObjectState Uid   : 0:ffff0a10b418:4de00765:55cc4126:4c
Type  : null
Size  : 176
Buffer: , StateManager/BasicAction/TwoPhaseCoordinator/AtomicAction)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allTypes(OutputObjectState Uid   : 0:ffff0a10b418:4de00765:55cc4126:4c
Type  : null
Size  : 188
Buffer: , EISNAME)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allObjUids(StateManager, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,394 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allObjUids(StateManager/BasicAction, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allObjUids(StateManager/BasicAction/TwoPhaseCoordinator, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allObjUids(StateManager/BasicAction/TwoPhaseCoordinator/AtomicAction, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) InputObjectState::InputObjectState()
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) FileSystemStore.allObjUids(EISNAME, InputObjectState Uid   : 0:0:0:0:0
Type  : null
Size  : 0
Buffer: , -1)
03:04:05,395 TRACE [com.arjuna.ats.arjuna] (management-handler-thread - 1) OutputObjectState::OutputObjectState()
03:04:05,432 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) BaseTransaction.begin
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) StateManager::StateManager( 2, 0 )
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::BasicAction()
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::Begin() for action-id 0:ffff0a10b418:4de00765:55cc4126:52
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::actionInitialise() for action-id 0:ffff0a10b418:4de00765:55cc4126:52
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ActionHierarchy::ActionHierarchy(1)
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ActionHierarchy::add(0:ffff0a10b418:4de00765:55cc4126:52, 1)
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::addChildThread () action 0:ffff0a10b418:4de00765:55cc4126:52 adding Thread[ServerService Thread Pool -- 74,5,ServerService ThreadGroup]
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::addChildThread () action 0:ffff0a10b418:4de00765:55cc4126:52 adding Thread[ServerService Thread Pool -- 74,5,ServerService ThreadGroup] result = true
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) TransactionReaper::insert ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:52 status: ActionStatus.RUNNING, 300 )
03:04:05,432 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ReaperElement::ReaperElement ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:52 status: ActionStatus.RUNNING, 300 )
03:04:05,432 INFO  [org.jboss.as.test.jbossts.common.TransactionStoreBrowserService] (ServerService Thread Pool -- 74) TransactionStoreBrowserService.stop
03:04:05,433 INFO  [stdout] (ServerService Thread Pool -- 74) unregistering bean jboss.jta:type=com.arjuna.ats.arjuna.tools.osb.api.mbeans.RecoveryStoreBean,name=store1
03:04:05,433 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) TransactionImple.getStatus: javax.transaction.Status.STATUS_ACTIVE
03:04:05,433 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) BaseTransaction.commit
03:04:05,433 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) TransactionImple.commitAndDisassociate
03:04:05,433 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::End() for action-id 0:ffff0a10b418:4de00765:55cc4126:52
03:04:05,433 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::End() result for action-id (0:ffff0a10b418:4de00765:55cc4126:52) is (TwoPhaseOutcome.PREPARE_OK) node id: (NiJF)
03:04:05,433 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::removeChildThread () action 0:ffff0a10b418:4de00765:55cc4126:52 removing TSThread:9
03:04:05,433 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::removeChildThread () action 0:ffff0a10b418:4de00765:55cc4126:52 removing TSThread:9 result = true
03:04:05,433 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) TransactionReaper::remove ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:52 status: ActionStatus.COMMITTED )
03:04:05,436 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) BaseTransaction.begin
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) StateManager::StateManager( 2, 0 )
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::BasicAction()
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::Begin() for action-id 0:ffff0a10b418:4de00765:55cc4126:53
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::actionInitialise() for action-id 0:ffff0a10b418:4de00765:55cc4126:53
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ActionHierarchy::ActionHierarchy(1)
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ActionHierarchy::add(0:ffff0a10b418:4de00765:55cc4126:53, 1)
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::addChildThread () action 0:ffff0a10b418:4de00765:55cc4126:53 adding Thread[ServerService Thread Pool -- 74,5,ServerService ThreadGroup]
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::addChildThread () action 0:ffff0a10b418:4de00765:55cc4126:53 adding Thread[ServerService Thread Pool -- 74,5,ServerService ThreadGroup] result = true
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) TransactionReaper::insert ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:53 status: ActionStatus.RUNNING, 300 )
03:04:05,436 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) ReaperElement::ReaperElement ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:53 status: ActionStatus.RUNNING, 300 )
03:04:05,436 INFO  [org.jboss.as.test.jbossts.common.TestXAResourceRecoveryHelper] (ServerService Thread Pool -- 74) TestXAResourceRecoveryHelper stopping
03:04:05,440 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) TransactionImple.getStatus: javax.transaction.Status.STATUS_ACTIVE
03:04:05,440 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) BaseTransaction.commit
03:04:05,440 TRACE [com.arjuna.ats.jta] (ServerService Thread Pool -- 74) TransactionImple.commitAndDisassociate
03:04:05,440 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::End() for action-id 0:ffff0a10b418:4de00765:55cc4126:53
03:04:05,440 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::End() result for action-id (0:ffff0a10b418:4de00765:55cc4126:53) is (TwoPhaseOutcome.PREPARE_OK) node id: (NiJF)
03:04:05,440 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::removeChildThread () action 0:ffff0a10b418:4de00765:55cc4126:53 removing TSThread:9
03:04:05,440 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) BasicAction::removeChildThread () action 0:ffff0a10b418:4de00765:55cc4126:53 removing TSThread:9 result = true
03:04:05,440 TRACE [com.arjuna.ats.arjuna] (ServerService Thread Pool -- 74) TransactionReaper::remove ( BasicAction: 0:ffff0a10b418:4de00765:55cc4126:53 status: ActionStatus.COMMITTED )
03:04:05,440 DEBUG [org.hibernate.validator.internal.engine.resolver.DefaultTraversableResolver] (MSC service thread 1-2) Found javax.persistence.Persistence on classpath containing 'getPersistenceUtil'. Assuming JPA 2 environment. Trying to instantiate JPA aware TraversableResolver
03:04:05,442 DEBUG [org.hibernate.validator.internal.engine.resolver.DefaultTraversableResolver] (MSC service thread 1-2) Instantiated JPA aware TraversableResolver of type org.hibernate.validator.internal.engine.resolver.JPATraversableResolver.
03:04:05,442 DEBUG [org.hibernate.validator.internal.xml.ValidationXmlParser] (MSC service thread 1-2) Trying to load META-INF/validation.xml for XML based Validator configuration.
03:04:05,443 DEBUG [org.hibernate.validator.internal.xml.ResourceLoaderHelper] (MSC service thread 1-2) Trying to load META-INF/validation.xml via TCCL
03:04:05,443 DEBUG [org.hibernate.validator.internal.xml.ResourceLoaderHelper] (MSC service thread 1-2) Trying to load META-INF/validation.xml via Hibernate Validator's class loader
03:04:05,443 DEBUG [org.hibernate.validator.internal.xml.ValidationXmlParser] (MSC service thread 1-2) No META-INF/validation.xml found. Using annotation based configuration only.
03:04:05,461 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] (MSC service thread 1-2) Setting custom ConstraintValidatorFactory of type org.hibernate.validator.internal.cdi.InjectingConstraintValidatorFactory
03:04:05,465 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] (MSC service thread 1-2) Setting custom MessageInterpolator of type org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator
03:04:05,465 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] (MSC service thread 1-2) Setting custom TraversableResolver of type org.hibernate.validator.internal.engine.resolver.DefaultTraversableResolver
03:04:05,465 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] (MSC service thread 1-2) Setting custom ParameterNameProvider of type org.hibernate.validator.internal.engine.DefaultParameterNameProvider
03:04:05,475 INFO  [org.jboss.weld.deployer] (MSC service thread 1-1) WFLYWELD0010: Stopping weld service for deployment crashrecovery-jms.jar
03:04:05,540 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment crashrecovery-jms.jar (runtime-name: crashrecovery-jms.jar) in 120ms
03:04:05,699 ERROR [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0010: Couldn't delete content /mnt/hudson_workspace/workspace/eap-70-jbossts-crashrec-tests-jms/eap-tests-transactions/jbossts/target/jbossas-jbossts/standalone/data/content/08: java.nio.file.DirectoryNotEmptyException: /mnt/hudson_workspace/workspace/eap-70-jbossts-crashrec-tests-jms/eap-tests-transactions/jbossts/target/jbossas-jbossts/standalone/data/content/08
at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:242)
at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
at java.nio.file.Files.deleteIfExists(Files.java:1165)
at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.removeContent(ContentRepository.java:370)
at org.jboss.as.server.deployment.DeploymentRemoveHandler$1$1.handleResult(DeploymentRemoveHandler.java:118)
at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1340)
at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1322)
at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1284)
at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1257)
at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1141)
at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:728)
at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:714)
at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:658)
at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:362)
at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1272)
at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:394)
at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:225)
at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)
at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)
at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)
at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:422)
at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)
at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
at org.jboss.threads.JBossThread.run(JBossThread.java:320)

03:04:05,702 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-70-jbossts-crashrec-tests-jms/eap-tests-transactions/jbossts/target/jbossas-jbossts/standalone/data/content/08/f7d588ec74c175eb23d1dd50905ef7adccc96c/content
03:04:05,702 INFO  [org.jboss.as.server] (management-handler-thread - 3) WFLYSRV0009: Undeployed ""crashrecovery-jms.jar"" (runtime-name: ""crashrecovery-jms.jar"")
03:04:08,740 INFO  [org.jboss.as.server] (management-handler-thread - 4) WFLYSRV0211: Suspending server
03:04:08,758 INFO  [org.jboss.as.server] (Thread-3) WFLYSRV0220: Server shutdown has been requested.
{code}","21/Sep/15 9:52 PM;tc7;I'm seeing this issue in domain mode.
wildfly 9.0.1, RHEL7, oracle JDK1.8.0_60
attempting to remove content from a server group.

[wf-master204]$ [Host Controller] 11:38:38,819 ERROR [org.jboss.as.repository] (XNIO-1 task-10) WFLYDR0010: Couldn't delete content /app/jboss/domain/wf-master204/domain/data/content/c2: java.nio.file.DirectoryNotEmptyException: /app/jboss/domain/wf-master204/domain/data/content/c2
[Host Controller] 	at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:242)
[Host Controller] 	at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
[Host Controller] 	at java.nio.file.Files.deleteIfExists(Files.java:1165)
[Host Controller] 	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.removeContent(ContentRepository.java:370)
[Host Controller] 	at org.jboss.as.domain.controller.operations.deployment.DeploymentRemoveHandler$MasterDeploymentRemoveHandler.removeContent(DeploymentRemoveHandler.java:134)
[Host Controller] 	at org.jboss.as.domain.controller.operations.deployment.DeploymentRemoveHandler$1$1.handleResult(DeploymentRemoveHandler.java:93)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1401)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1381)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1332)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1307)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1180)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:937)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:885)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:218)
[Host Controller] 	at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:208)
[Host Controller] 	at io.undertow.server.handlers.encoding.EncodingHandler.handleRequest(EncodingHandler.java:72)
[Host Controller] 	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:72)
[Host Controller] 	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:68)
[Host Controller] 	at java.security.AccessController.doPrivileged(Native Method)
","05/Oct/15 1:29 PM;clerum;Same on Wildfly 9.0.1.Final in domain mode.

{code}
[Server:server-one] 17:23:57,360 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0028: Stopped deployment cfax.war (runtime-name: cfax.war) in 288ms
[Server:server-one] 17:24:00,434 ERROR [org.jboss.as.repository] (ServerService Thread Pool -- 72) WFLYDR0010: Couldn't delete content /usr/local/wildfly/domain/servers/server-one/data/content/64: java.nio.fil                                                                                                            e.DirectoryNotEmptyException: /usr/local/wildfly/domain/servers/server-one/data/content/64
[Server:server-one]     at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:242)
[Server:server-one]     at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
[Server:server-one]     at java.nio.file.Files.deleteIfExists(Files.java:1165)
[Server:server-one]     at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.removeContent(ContentRepository.java:370)
[Server:server-one]     at org.jboss.as.server.mgmt.domain.RemoteFileRepositoryService.removeContent(RemoteFileRepositoryService.java:115)
[Server:server-one]     at org.jboss.as.server.deployment.DeploymentRemoveHandler$1$1.handleResult(DeploymentRemoveHandler.java:118)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1401)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1381)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1332)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1292)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1180)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:937)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:885)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
[Server:server-one]     at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)
[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:218)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:174)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:137)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:133)
[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one]     at javax.security.auth.Subject.doAs(Subject.java:360)
[Server:server-one]     at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:153)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:149)
[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:149)
[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Server:server-one]     at java.lang.Thread.run(Thread.java:745)
[Server:server-one]     at org.jboss.threads.JBossThread.run(JBossThread.java:320)
[Server:server-one]
[Server:server-one] 17:24:00,440 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 72) WFLYDR0002: Content removed from location /usr/local/wildfly/domain/servers/server-one/data/content/64/ed4ac67     
{code}",09/Nov/15 6:10 AM;ehugonnet;Issue is due to the fact that we are trying to delete the 'hash path' and the forefather might be shared among contents.,"18/Nov/15 9:22 AM;brian.stansberry;[~ochaloup] Thanks. To reproduce you'd need to deploy two apps whose hash results in the same first two chars, then undeploy one of the two. Emmanuel's pull request includes a unit test that simulates the critical bit.",,,,,,,,,,,,,,,,,,,,,,
Not able to enable JMX Remote access,WFCORE-1105,12565226,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,dmlloyd,xfcjscn,xfcjscn,09/Mar/15 5:54 AM,10/Nov/15 9:44 AM,29/Nov/16 3:52 PM,10/Nov/15 9:44 AM,,,,,,,,,Domain Management,Logging,,,,0,,,,,,"Can not enable JMX remote access port.
Config in domain.xml:
                <jvm-options>
					<option value=""-Dcom.sun.management.jmxremote.port=19999""/>
					<option value=""-Dcom.sun.management.jmxremote.authenticate=false""/>
					<option value=""-Dcom.sun.management.jmxremote.ssl=false""/>
                </jvm-options>

java.lang.IllegalStateException raised during startup.
Logs:
[Server:server-one] Exception in thread ""main"" java.lang.IllegalStateException: The LogManager was not properly installed (you must set the ""java.util
.logging.manager"" system property to ""org.jboss.logmanager.LogManager"")
[Server:server-one]     at org.jboss.logmanager.Logger.getLogger(Logger.java:61)
[Server:server-one]     at org.jboss.as.server.DomainServerMain.main(DomainServerMain.java:86)
[Server:server-one]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[Server:server-one]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[Server:server-one]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[Server:server-one]     at java.lang.reflect.Method.invoke(Method.java:606)
[Server:server-one]     at org.jboss.modules.Module.run(Module.java:312)
[Server:server-one]     at org.jboss.modules.Main.main(Main.java:460)",windows & linux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzvdhb:,9223372036854775807,,,,,,,,,,,09/Mar/15 5:55 AM;xfcjscn;Not sure whether this is due to the Logging system not ready when init jmx?,10/Nov/15 8:53 AM;ehugonnet;My mistake,"10/Nov/15 9:10 AM;dmlloyd;AFAIK this isn't supported.  You need to use the remoting-jmx connector that we provide.

See [https://community.jboss.org/wiki/UsingJconsoleToConnectToJMXOnAS7] for more info.",,,,,,,,,,,,,,,,,,,,,,,,
Security realms does not validate JAAS references to security domains,WFCORE-1103,12549984,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,,nmoelholm,nmoelholm,22/Aug/14 3:39 AM,13/Jun/16 7:48 AM,29/Nov/16 3:52 PM,13/Jun/16 7:48 AM,,,,,,,3.0.0.Alpha2,,Domain Management,Security,,,,0,jaas,logging,security,trace,,"*Problem*
In the server configuration file (standalone.xml) it is possible to define a security realm that points to a security domain that does not exist - and there is no error reporting of this at all. There is no trace information of this at all, either.

*Example*
* Download a stock Wildfly 8.1.0.Final
* Replace standalone.xml with this gist: https://gist.githubusercontent.com/nickymoelholm/4908092afdcd519361df/raw/standalone.xml

Run it and you will see now errors at all. Despite the fact that the _FlawedRealm_ points to a bogus security domain called _ThisDomainDoesntExistAtAll_ . I have captured my logoutput too. Find it here: https://gist.githubusercontent.com/nickymoelholm/4908092afdcd519361df/raw/server.log

*What is wrong with this behavior?*
The bootstrapping process must validate that the configuration is valid indeed. It really doesn't - not semantically that is. Only XSD compliance / XML syntax wise. And if, for some weird reason, that silence is ""security"" - then at least let us know of the errors on loglevel = TRACE.

*Why is this issue created?*
The silent behavior makes security configuration in Wildfly an _extremely expensive operation_ in terms of time spent by the average Java EE developer / administrator. I have created this issue because I want wildfly to help developers/administrators become better at spotting our errors - because, in the end, that is a tangible productivity booster. ","Development Mac
Test Linux (Debian)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,User Experience,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzswuv:,9223372036854775807,,,,"* Download a stock Wildfly 8.1.0.Final
* Replace standalone.xml with this gist: https://gist.githubusercontent.com/nickymoelholm/4908092afdcd519361df/raw/standalone.xml
* Launch the server.

Validate that there is no validation at all of the JAAS reference found in the _FlawedRealm_ ",,,,,,,"22/Aug/14 6:05 AM;dlofthouse;Just updating the properties of this issue to reflect the current situation, security integration is currently being reworked to eliminate a whole host of problems that this realm / domain pairing brings and that effort is already underway - at this point in time it is not in our interest to divert our efforts away from the new solution to change something we are planning to transition away from anyway.

One additional point, please include relevant configuration and log messages in the Jira issue itself rather than links to external repositories, there is nothing worse than coming to a Jira issue and finding the links out of date, in addition to that when the issue is indexed by search engines the lack of content in the issue can mean similar problems are not discovered when appropriate search terms are used.","22/Aug/14 6:59 AM;nmoelholm;That sounds super [~dlofthouse] ! It sounds good that you are taking stuff like this into consideration for future versions. To be honest me and my colleague also fought a host of ""silent"" behavior problems in addition to the above previously. And it was really difficult for us to understand, properly, what errors we introduced. The problems was not related to using the default other domain plus ApplicationRealm configuration elements - but rather appeared once we tried to hook up a custom login module and use that from remoting, ejb etc. 

And I get your message with respect to the links - won't happen again :). 

Thanks","25/Aug/14 8:08 AM;nmoelholm;Hi [~dlofthouse] - I recently created a security related community discussion regarding JMS's authentication in Wildfly (https://community.jboss.org/thread/248235)

It turned out i needed to send a certain plaintext property from the client before it began to work successfully. Again here the behavior was utterly complete silence.

Also, in my company's real-world codebase we faced the same complete silence because the ""Custom Login module in our security domain"" had classloading issues when used from the remoting subsystem (through a jaas based security realm).

I mention these ""war stories"" too - to supply with my personal perspective that: 
* the silent security behavior in Wildly is making it really difficult for us to get ""customized security mechanisms"" right.

It is by no means a show stopper. But it is really really troublesome from time to time when one doesn't get the entire end-to-end security configuration correct the first time.","04/Nov/15 8:18 PM;brian.stansberry;I moved this to WFCORE because anything on this, whether the major changes Darran mentioned or anything else, in the end would involve a change to core. I'm trying to get Domain Management issues out of WFLY as they largely don't belong there.","13/Jun/16 7:48 AM;dlofthouse;Rejecting for a couple of issues.

Firstly security realms are deprecated and being replaced with WildFly Elytron.  Within Elytron where we do make use of JAAS security domains this will be through capability references which means dependencies will be checked during model validation.

Secondly the realm dependencies as well as depending on domains in the security subsystem they can also depend on JAAS configurations in a jaas.conf file for processes such as in a HostController to dependency detection is not a simple task.  Even in a domain hosted app server the cross resolution of dependencies is very complex.",,,,,,,,,,,,,,,,,,,,,,
Remove dependency on bouncycastle,WFCORE-1095,12591559,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,04/Nov/15 2:01 PM,16/Dec/15 5:34 PM,29/Nov/16 3:53 PM,16/Dec/15 5:34 PM,2.0.0.Final,,,,,,2.0.5.CR1,,Test Suite,,,,,0,,,,,,"Core has a dependency on bouncycastle that AFAICT is not used. It was brought into core when a class from full's testsuite/shared was ported, but the core usage of the class has no need for the bouncycastle-related logic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1216,,,,,,0.0,0.0,,1|hzzho7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TempFileProviderService threads consume high CPU,WFCORE-1093,12591413,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jason.greene,aogburn,aogburn,03/Nov/15 3:38 PM,31/Aug/16 3:30 AM,29/Nov/16 3:53 PM,25/Nov/15 2:13 PM,,,,,,,2.0.3.Final,,Server,,,,,1,,,,,,"TempFileProviderService threads consume high CPU as they poll their non empty task queue.  This is ultimately due to a flaw in the JDK ThreadPoolExecutor code (https://bugs.openjdk.java.net/browse/JDK-8129861), impacting ScheduledThreadPoolExecutors that use a core size of 0 and a default 0 keepalive timeout.  

While the executor queue is not empty, the executor does not allow the pool to go below 1 thread.  So the one remaining work thread keeps looping over its poll call with a 0 timeout.  Options to protect JBoss from this are:

1) Set a keepalive timeout on the executor so the poll has a duration and the worker run loop isn't so busy
2) Or set the Executor core pool size to >0.  The worker thread would then use a blocking take() call on its queue instead of a constant 0 second poll calls.  The side effect of this change is that the thread pool wouldn't ever drop back down to 0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1277699,,,,,Perform,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/1215,,,,,,0.0,7.0,,1|hzzgun:,9223372036854775807,,,,,,,,,,"-Use the attached byteman script to force work to the TempFileProviderService threads.
-Deploy and undeploy an application.","03/Nov/15 3:42 PM;aogburn;PR using a keepalive time to avoid the issue:

https://github.com/wildfly/wildfly-core/pull/1215",03/Nov/15 4:15 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from ASSIGNED to POST,28/Mar/16 5:27 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from MODIFIED to POST,05/Aug/16 1:49 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from POST to MODIFIED,05/Aug/16 1:49 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from MODIFIED to ON_QA,31/Aug/16 3:30 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1277699|https://bugzilla.redhat.com/show_bug.cgi?id=1277699] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
ConfigurationChangeResourceRemoveHandler makes its changes in the constructor not in execute,WFCORE-1092,12591410,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,03/Nov/15 3:11 PM,19/Nov/15 3:38 PM,29/Nov/16 3:53 PM,19/Nov/15 3:38 PM,2.0.0.Final,,,,,,2.0.2.Final,,Domain Management,,,,,0,,,,,,"ConfigurationChangeResourceRemoveHandler is calling ConfigurationChangesCollector.deactivate() in its constructor. So deactivate gets called at early boot when the ConfigurationChangeResourceDefinition class gets loaded and the maxHistory is still 0, but never thereafter.

A reload won't cause it to get called again either, as ConfigurationChangeResourceDefinition is only constructed when the static INSTANCE member is initialized.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1218,,,,,,0.0,0.0,,1|hzzgtz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kerberos authentication for remoting on hostname which contains uppercase letter,WFCORE-1091,12589904,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,gaol,mchoma,mchoma,21/Oct/15 5:45 AM,19/Nov/15 3:28 PM,29/Nov/16 3:53 PM,19/Nov/15 3:28 PM,2.0.0.CR9,,,,,,2.0.2.Final,,Domain Management,Remoting,Security,,,0,,,,,,"When EAP runs on server, which contains upper case in hostname (e.g. localhost.Localdomain), it  is unpossible to make kerberos authentication in remoting to work properly.
JDK constructs TGT-REQ with lower case hostname. But remoting client create connection to EAP with upper case letters,  what cause problems.

RFC4120 ""The Kerberos Network Authentication Service""  [1] in chapter ""6.2.1.  Name of Server Principals"" requires ??Where the name of the host is not case sensitive (for example, with Internet domain names) the name of the host MUST be lowercase.??

Based on information from RFC, IMHO, EAP should handle such scenario. Either remoting client should send lowercase hostname or security realm should map principal case insensitively and look for lower-case keytab record, e.g. remote/localhost.localdomain.

[1] https://www.ietf.org/rfc/rfc4120.txt",,,,,,,,,,,,,,,,JBEAP-1580,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1214,,,,,,0.0,1.0,,1|hzz8e7:,9223372036854775807,,,,"* On system which contains Upper case letter host name. E.g. locally edit /etc/hostname, /etc/hosts to localhost.Localdomain 
** CLI
    *** Setup CLI secured with Kerberos to use lowercase host
{code:xml}
            <security-realm name=""KerberosSecurityRealm"">
                <server-identities>
                    <kerberos>
                        <keytab principal=""remote/localhost.localdomain@JBOSS.ORG"" path=""/path/to/krb.keytab""/>
                    </kerberos>
                </server-identities>
                <authentication>
                    <kerberos/>
                </authentication>
            </security-realm>
{code}
    *** start eap
    *** try to access cli 
** EJB
    *** setup remoting subsystem secured with kerberos realm to use lowercase host
{code:xml}
        <subsystem xmlns=""urn:jboss:domain:remoting:3.0"">
            <endpoint/>
            <http-connector name=""http-remoting-connector"" connector-ref=""default"" security-realm=""TestKerberosRealm""/>
        </subsystem>
        <security-realm name=""TestKerberosRealm"">
            <server-identities>
                <kerberos>
                <keytab principal=""remote/localhost.localdomain@JBOSS.ORG"" path=""/path/to/krb.keytab"" debug=""true""/>
                </kerberos>
           </server-identities>
           <authentication>
               <kerberos/>
           </authentication>
       </security-realm>
{code}
    *** deploy app with ejb, start eap
    *** try to access deloyment
* Both scenarios leads to log messages as 
{noformat}
^[[0m17:28:56,922 TRACE [org.jboss.as.domain.management.security] (default I/O-3) No mapping for name 'remote/localhost.Localdomain' to KeytabService, attempting to use host only match.
^[[0m17:28:56,922 TRACE [org.jboss.as.domain.management.security] (default I/O-3) No mapping for host 'localhost.Localdomain' to KeytabService, attempting to use default.
^[[0m17:28:56,922 TRACE [org.jboss.as.domain.management.security] (default I/O-3) No KeytabService available for host 'localhost.Localdomain' unable to return SubjectIdentity.
{noformat}",,,,mchoma,,,03/Nov/15 11:09 AM;dlofthouse;Where is the pull request link?,,,,,,,,,,,,,,,,,,,,,,,,,,
Modules are missing jboss.api=private setting in module.xml,WFCORE-1090,12591002,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,30/Oct/15 11:59 AM,30/Oct/15 1:31 PM,29/Nov/16 3:53 PM,30/Oct/15 1:31 PM,2.0.0.CR9,,,,,,2.0.0.Final,,,,,,,0,,,,,,"Following modules need to have the jboss.api=private property added to their module.xml:

org.jboss.sasl
org.jboss.as.self-contained
sun.scripting
org.wildfly.extension.io
org.wildfly.extension.request-controller",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1212,,,,,,0.0,0.0,,1|hzzev3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IgnoredResourcesProfileCloneTestCase does not wait for domain stabilization following reload,WFCORE-1089,12590888,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,29/Oct/15 8:13 PM,19/Nov/15 3:38 PM,29/Nov/16 3:53 PM,19/Nov/15 3:38 PM,2.0.0.CR9,,,,,,2.0.2.Final,,Domain Management,Test Suite,,,,0,,,,,,"IgnoredResourcesProfileCloneTestCase several times reloads the slave HC without restarting its servers. But it then does not wait for those servers to reconnect before continuing on. This means the servers may not be reattached to the domain when further modifications are made.

I'm quite certain this is the cause of the failure at http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=76866&tab=buildResultsDiv&buildTypeId=WildFlyCore_PullRequest#testNameId6713698291695706313 and the other time that test failed.

IgnoredResourcesProfileCloneTestCase reloads the slave and then exits. CompositeOperationTestCase follows and immediately adds system-property=composite-op in its @Before method. The other-two server doesn't get this op as it's not reconnected. The test then later fails because the other-two server's state is not as expected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1245,,,,,,0.0,0.0,,1|hzze73:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE on a domain server when configuring a deployment logging configuration resource,WFCORE-1088,12590875,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,29/Oct/15 2:59 PM,29/Oct/15 8:27 PM,29/Nov/16 3:53 PM,29/Oct/15 8:27 PM,,,,,,,2.0.0.Final,,Logging,,,,,0,,,,,,"During the deployment process of a deployment that contains a {{logging.properties}} an NPE is thrown when adding the runtime data to the deployments configuration resource. This seems to only happen on one server, {{server-one}} in the default configuration.

{code}
[Server:server-one] 11:57:09,503 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 69) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([
[Server:server-one]     (""deployment"" => ""batch-jdbc-chunk.war""),
[Server:server-one]     (""subsystem"" => ""logging""),
[Server:server-one]     (""configuration"" => ""default""),
[Server:server-one]     (""logger"" => ""com.arjuna"")
[Server:server-one] ]): java.lang.NullPointerException
[Server:server-one] 	at org.jboss.as.logging.deployments.resources.LoggerResourceDefinition$3.updateModel(LoggerResourceDefinition.java:92)
[Server:server-one] 	at org.jboss.as.logging.deployments.resources.LoggerResourceDefinition$LoggerConfigurationReadStepHandler.updateModel(LoggerResourceDefinition.java:112)
[Server:server-one] 	at org.jboss.as.logging.deployments.resources.LoggingConfigurationReadStepHandler.execute(LoggingConfigurationReadStepHandler.java:55)
[Server:server-one] 	at org.jboss.as.controller.operations.global.ReadAttributeHandler.doExecuteInternal(ReadAttributeHandler.java:174)
[Server:server-one] 	at org.jboss.as.controller.operations.global.ReadAttributeHandler.doExecute(ReadAttributeHandler.java:137)
[Server:server-one] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AbstractMultiTargetHandler.execute(GlobalOperationHandlers.java:263)
[Server:server-one] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$AvailableResponseWrapper.execute(GlobalOperationHandlers.java:933)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
[Server:server-one] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:173)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132)
[Server:server-one] 	at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one] 	at javax.security.auth.Subject.doAs(Subject.java:360)
[Server:server-one] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148)
[Server:server-one] 	at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148)
[Server:server-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)
[Server:server-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:465)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Server:server-one] 	at java.lang.Thread.run(Thread.java:745)
[Server:server-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

The above logger {{com.arjuna}} shouldn't even be found as it's not in the deployments logging configuration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1211,,,,,,0.0,1.0,,1|hzze47:,9223372036854775807,,,,Deploy an archive with a {{logging.properties}} file or replace the deployment,,,,,,,29/Oct/15 4:55 PM;jamezp;The issue wasn't just domain servers. It was seen there because the console does a composite {{read-resource}} when a deployment is being replaced. The same behavior could be seen on a standalone server if multiple deployments are present and at least one deployment is using a custom logging configuration. Executing a composite operation to read the resources would result in an NPE.,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagementResourceRegistration.getOrderedChildTypes() does not account for override models,WFCORE-1087,12590868,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,29/Oct/15 1:23 PM,29/Oct/15 8:33 PM,29/Nov/16 3:53 PM,29/Oct/15 8:33 PM,2.0.0.CR9,,,,,,2.0.0.Final,,Domain Management,,,,,0,,,,,,"ManagementResourceRegistration.getOrderedChildTypes() is implemented by simply reading the local state of ConcreteResourceRegistration. It needs to work like getAttributeNames(), by delegating to the root node which in turn uses NodeSubregistry to combine data from any singleton override registration and the corresponding wildcard registration.

Same kind of problem as WFCORE-1086.",,,,,,,,,,,,,,,,WFCORE-1086,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1210,,,,,,0.0,0.0,,1|hzze27:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagementResourceRegistration.getCapabilities() does not account for override models,WFCORE-1086,12590865,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,brian.stansberry,brian.stansberry,brian.stansberry,29/Oct/15 1:10 PM,29/Oct/15 8:33 PM,29/Nov/16 3:53 PM,29/Oct/15 8:33 PM,2.0.0.CR9,,,,,,2.0.0.Final,,Domain Management,,,,,0,,,,,,"ManagementResourceRegistration.getCapabilities() is implemented by simply reading the local state of ConcreteResourceRegistration. It needs to work like getAttributeNames(), by delegating to the root node which in turn uses NodeSubregistry to combine data from any singleton override registration and the corresponding wildcard registration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1209,,,,,,0.0,0.0,,1|hzze1j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Linux and powershell standalone script should be unified in restart logs,WFCORE-1085,12590863,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,mkopecky,mkopecky,29/Oct/15 1:01 PM,17/Nov/15 12:01 PM,29/Nov/16 3:53 PM,17/Nov/15 12:01 PM,2.0.0.CR8,,,,,,2.0.2.Final,,Scripts,,,,,0,,,,,,"{{:shutdown(restart=true)}} CLI command on linux print ""Restarting JBoss..."" message on console. On windows  with powershell script, this message is not printed. Linux and powershell standalone script should be unified in restart logs.",,,,,,,,,,,,,,,,JBEAP-1705,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1233,,,,,,0.0,0.0,,1|hzze13:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Standalone powershell script does't support SECMGR=true environment variable,WFCORE-1084,12590860,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,mkopecky,mkopecky,29/Oct/15 12:43 PM,22/Jan/16 7:44 PM,29/Nov/16 3:53 PM,22/Jan/16 7:44 PM,2.0.0.CR8,,,,,,2.0.8.Final,,Scripts,,,,,0,,,,,,Standalone powershell script does't support SECMGR=true environment variable. Standalone script should enable security manager with this environment variable. Security manager can be enabled also by using -secmgr (this works correctly in EAP 7.0.0.DR13),,,,,,,,,,,,,,,,JBEAP-1703,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1233,,,,,,0.0,2.0,,1|hzze0f:,9223372036854775807,,,,,,,,,,,19/Nov/15 3:38 PM;brian.stansberry;PR was closed.,12/Jan/16 8:58 AM;ctomc;Still has some issues with way env variables are specifed,,,,,,,,,,,,,,,,,,,,,,,,,
Login Module is messed up when one of the module-option is empty,WFCORE-1083,12590759,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,aloubyansky,jprasanna,jprasanna,29/Oct/15 3:10 AM,12/Apr/16 3:15 AM,29/Nov/16 3:53 PM,12/Apr/16 3:15 AM,,,,,,,,,CLI,,,,,0,,,,,,"When one of the module-option is given as empty the whole login-module is messed up. But in real time there will be cases where the module-option can be empty. For Eg. while configuring org.jboss.security.auth.spi.LdapLoginModule, the principalDNPrefix can be empty

*+Command with principalDNPrefix empty+*

/subsystem=security/security-domain=SourceForge/authentication=classic/login-module=org.jboss.security.auth.spi.LdapLoginModule33:add(code=org.jboss.security.auth.spi.LdapLoginModule, flag=sufficient, module-options=[ ""java.naming.provider.url"" => ""ldap://ldaphost.jboss.org:1"", ""java.naming.security.authentication"" => ""simple"", *""principalDNPrefix"" => """"*, ""principalDNSuffix"" => "",ou=People,o=jboss.org"", ""allowEmptyPasswords"" => ""false"", ""java.naming.factory.initial"" => ""com.sun.jndi.ldap.LdapCtxFactory"", ""throwValidateError"" => ""true"" ]){allow-resource-service-restart=true}

+Output in standalone-full.xml+

Wrong value is stored as principalDNPrefix

<login-module name=""org.jboss.security.auth.spi.LdapLoginModule33"" code=""org.jboss.security.auth.spi.LdapLoginModule"" flag=""sufficient"">
	<module-option name=""java.naming.provider.url"" value=""ldap://ldaphost.jboss.org:1""/>
	<module-option name=""java.naming.security.authentication"" value=""simple""/>
	*<module-option name=""principalDNPrefix"" value=""principalDNSuffix""/>*
	<module-option name=""allowEmptyPasswords"" value=""false""/>
	<module-option name=""java.naming.factory.initial"" value=""com.sun.jndi.ldap.LdapCtxFactory""/>
	<module-option name=""throwValidateError"" value=""true""/>
</login-module>


*+Command with principalDNPrefix with some value+*

/subsystem=security/security-domain=SourceForge/authentication=classic/login-module=org.jboss.security.auth.spi.LdapLoginModule44:add(code=org.jboss.security.auth.spi.LdapLoginModule, flag=sufficient, module-options=[ ""java.naming.provider.url"" => ""ldap://ldaphost.jboss.org:1"", ""java.naming.security.authentication"" => ""simple"", *""principalDNPrefix"" => ""test""*, ""principalDNSuffix"" => "",ou=People,o=jboss.org"", ""allowEmptyPasswords"" => ""false"", ""java.naming.factory.initial"" => ""com.sun.jndi.ldap.LdapCtxFactory"", ""throwValidateError"" => ""true"" ]){allow-resource-service-restart=true}

+Output in standalone-full.xml+

Values are stored correctly.

<login-module name=""org.jboss.security.auth.spi.LdapLoginModule44"" code=""org.jboss.security.auth.spi.LdapLoginModule"" flag=""sufficient"">
	<module-option name=""java.naming.provider.url"" value=""ldap://ldaphost.jboss.org:1""/>
	<module-option name=""java.naming.security.authentication"" value=""simple""/>
	*<module-option name=""principalDNPrefix"" value=""test""/>*
	<module-option name=""principalDNSuffix"" value="",ou=People,o=jboss.org""/>
	<module-option name=""allowEmptyPasswords"" value=""false""/>
	<module-option name=""java.naming.factory.initial"" value=""com.sun.jndi.ldap.LdapCtxFactory""/>
	<module-option name=""throwValidateError"" value=""true""/>
</login-module>","CentOS Linux release 7.1.1503 (Core)

/usr/java/jdk1.8.0_45/

WildFly 8.2.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzzdfj:,9223372036854775807,,,,,,,,,,,"30/Oct/15 6:09 AM;jprasanna;Any solution is much appreciated.

Please let us know.","30/Oct/15 12:12 PM;aloubyansky;It appears to be fixed in the current master which is WildFly 10.0.0.CR5 (wildfly-core 2.0.0.CR9). principalDNSPrefix will be stored as ""undefined"" in the XML.","12/Apr/16 3:15 AM;bayern39;Hi,I have reproduced the bug in WildFly 8.2.0 ,and since  WildFly 9.0.0.Beta1 the bug has been fixed!",,,,,,,,,,,,,,,,,,,,,,,,
CLI module command creates the module.xml main-class element with the incorrect attribute name,WFCORE-1082,12590743,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,jamezp,jamezp,jamezp,28/Oct/15 4:58 PM,29/Oct/15 6:30 PM,29/Nov/16 3:53 PM,29/Oct/15 6:30 PM,,,,,,,2.0.0.Final,,CLI,,,,,1,,,,,,The CLI {{module}} command creates the {{modue.xml}} file with the attribute {{value}} for the {{main-class}} element. The attribute should be {{name}}.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,http://stackoverflow.com/questions/33223088/how-to-log-with-slf4j-from-within-a-jboss-module,,,https://github.com/wildfly/wildfly-core/pull/1206,,,,,,0.0,0.0,,1|hzzdbr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IllegalStateException when shutting down the server started with default standalone-full-ha.xml,WFCORE-1081,12590548,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,soul2zimate,msvehla,msvehla,27/Oct/15 8:43 AM,28/Oct/15 8:18 PM,29/Nov/16 3:53 PM,28/Oct/15 8:18 PM,2.0.0.CR8,,,,,,2.0.0.CR9,,Domain Management,,,,,0,,,,,,"When I start WildFly 10.0.0.CR4 with default standalone-full-ha.xml configuration and then shut it down, I'll get following ERROR in the server log:

{code}
09:18:19,143 ERROR [org.jgroups.JChannel] (MSC service thread 1-2) JGRP000020: failed destroying the protocol stack: java.lang.IllegalStateException
	at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.unregisterBinding(SocketBindingManagerImpl.java:501)
	at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)
	at org.jboss.as.clustering.jgroups.ManagedSocketFactory.close(ManagedSocketFactory.java:148)
	at org.jgroups.protocols.UDP.closeUnicastSocket(UDP.java:577)
	at org.jgroups.protocols.UDP.destroySockets(UDP.java:429)
	at org.jgroups.protocols.UDP.destroy(UDP.java:294)
	at org.jgroups.stack.ProtocolStack.destroy(ProtocolStack.java:887)
	at org.jgroups.JChannel.stopStack(JChannel.java:1005)
	at org.jgroups.JChannel._close(JChannel.java:990)
	at org.jgroups.JChannel.close(JChannel.java:385)
	at org.wildfly.clustering.jgroups.spi.service.ChannelBuilder.stop(ChannelBuilder.java:91)
	at org.jboss.msc.service.ServiceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:2056)
	at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:2017)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

This is regression from CR3 build and might be related to fix for https://issues.jboss.org/browse/WFCORE-1033",,,,,,,,,,,,,,,,JBEAP-1657,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1202,,,,,,0.0,1.0,,1|hzzc7r:,9223372036854775807,,,,"* Start WildFly 10.0.0.CR4 with standalone-full-ha.xml configuration
* Stop the server
* Check the output/server log for the error",,,,,,,"28/Oct/15 3:54 AM;soul2zimate;I think this may also happen to other potential unnamed datagram socket unregistration. IllegalStateException pops out due to https://github.com/wildfly/wildfly/commit/36f5bd99c8893a75ae0338708a5bd41263676060 as it uses UnnamedRegistryImpl.java which depends on address value of ManagedBinding.getBindAddress() to unregister.
However, before unregistering a managed binding, it first closes datagram socket. Thus, while UnnamedRegistryImpl unregisters binding and calls its superclass DatagramSocket.getLocalSocketAddress(), it gets null value because socket was already closed.",,,,,,,,,,,,,,,,,,,,,,,,,,
Properties authentication in Security Realms does not work with equals sign in password,WFCORE-1077,12590513,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,mchoma,mchoma,27/Oct/15 6:31 AM,19/Nov/15 3:32 PM,29/Nov/16 3:53 PM,19/Nov/15 3:32 PM,2.0.0.CR8,,,,,,2.0.2.Final,,Domain Management,Security,,,,0,,,,,,"Security realm doesnt start in case when password contains ""\="" e.g. {code}user5=Pass\=word1{code}.

Thrown exception is 
{code}
^[[0m^[[31m07:00:10,342 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-6) MSC000001: Failed to start service jboss.server.controller.management.security_realm.DelimitersRealm.properties_authentication: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.DelimitersRealm.properties_authentication: Failed to start service
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 11
        at org.jboss.as.domain.management.security.PropertiesFileLoader.cleanKey(PropertiesFileLoader.java:236)
        at org.jboss.as.domain.management.security.UserPropertiesFileLoader.load(UserPropertiesFileLoader.java:106)
        at org.jboss.as.domain.management.security.PropertiesFileLoader.loadAsRequired(PropertiesFileLoader.java:164)
        at org.jboss.as.domain.management.security.PropertiesFileLoader.getProperties(PropertiesFileLoader.java:144)
        at org.jboss.as.domain.management.security.PropertiesFileLoader.start(PropertiesFileLoader.java:131)
        at org.jboss.as.domain.management.security.PropertiesCallbackHandler.start(PropertiesCallbackHandler.java:128)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
        ... 3 more
{code}
",,,,,,,,,,,,,,,,JBEAP-1648,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1247,,,,,,0.0,0.0,,1|hzzc0v:,9223372036854775807,,,,"1. Create users.properties file with content:
{code}
user5=Pass\=word1
{code}

2. Add following security realm to standalone.xml (set path to users.properties file instead of PATH_TO_USERS_PROPERTIES):
{code:xml}
<security-realm name=""delimiters-test"">
    <authentication>
        <properties path=""PATH_TO_USERS_PROPERTIES"" plain-text=""true""/>
    </authentication>
</security-realm>
{code}

3. Set ""delimiters-test"" security realm for http-interface:
{code:xml}
<http-interface security-realm=""delimiters-test"" http-upgrade-enabled=""true"">
{code}

4. Start server

Security realm delimiters-test is not started.",,,,mchoma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Deploying a file results in HC logging ""WFLYCTL0019: Graceful shutdown"" warn on shutdown or reload",WFCORE-1075,12590321,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,25/Oct/15 6:12 PM,29/Oct/15 8:32 PM,29/Nov/16 3:53 PM,29/Oct/15 8:32 PM,2.0.0.CR8,,,,,,2.0.0.Final,,Domain Management,,,,,0,,,,,,"Host Controllers frequently take 15 seconds to shutdown and reload, logging the following after a 15s pause:

{code}
WFLYCTL0019: Graceful shutdown of the handler used for native management requests did not complete within [15000] ms but shutdown of the underlying communication channel is proceeding
{code}

This is because MasterDomainControllerOperationHandlerImpl and ServerToHostProtocolHandler both handle a GET_FILE_REQUEST by registering an ActiveOperation with ActiveOperationSupport, but then the GetFileOperation handlers for the request never call ""done"" or ""failed"" on the ActiveOperation.ResultHandler. The activeRequests map in the ActiveOperationSupport therefore ends up with extraneous data resulting in the shutdown delay.

This is also a minor memory leak.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1187,,,,,,0.0,0.0,,1|hzzaxr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in DeploymentScannerUnitTestCase,WFCORE-1074,12590104,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,22/Oct/15 10:45 AM,19/Nov/15 3:35 PM,29/Nov/16 3:53 PM,19/Nov/15 3:35 PM,,,,,,,2.0.2.Final,,Domain Management,,,,,0,,,,,,"DeploymentScannerUnitTestCase occasionally fails, 4 times in the last six weeks or so per Team City records:

http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WildFlyCore&buildTypeId=&tab=testDetails&testNameId=-2364482317512802563&order=TEST_STATUS_DESC&branch_WildFlyCore=__all_branches__&itemsCount=50

May not be relevant but the change log associated with the first failure shows WFCORE-903 / WFCORE-860 as part of the change set:
 
http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=70465&tab=buildChangesDiv&buildTypeId=WildFlyCore_MasterIgnorWindows",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzz9j3:,9223372036854775807,,,,,,,,,,,"27/Oct/15 12:20 PM;ehugonnet;I think the problem comes from the fact that i assumed that a failing deployment would fail in DeploymentHandlerUtil.deploy() 
But as the deployment fails because of a missing dependency it fails during the service startup so the SUCCESS notification is already sent.","27/Oct/15 12:20 PM;ehugonnet;I think the problem comes from the fact that i assumed that a failing deployment would fail in DeploymentHandlerUtil.deploy() 
But as the deployment fails because of a missing dependency it fails during the service startup so the SUCCESS notification is already sent.","27/Oct/15 2:59 PM;brian.stansberry;I'm rejecting the currently linked PR to get this bug in the right state. The PR is just to gather data, not a fix.","27/Oct/15 3:13 PM;brian.stansberry;Emmanuel and I were chatting, so this is a follow up to his last comment based on our chat.

1) If an app tries to deploy and deployment doesn't go well due to some service problems, but rollback-on-runtime-failure=false is set, that app is still ""deployed"" in the management sense. The 'enabled' attribute will be set to 'true' in the model, and MSC will have a bunch of services installed related to the app. It just won't be functioning properly. So, sending a ""deployed"" notification is valid.

2) The notifications really are only relevant for cases like WFCORE-860 where the end user is directly using CLI/console to tweak the state of a scanner controlled deployment. There the scanner needs notifications to be aware of user-initiated changes. But the scanner has logic to ignore notifications emitted as a result of its *own* activity. Perhaps there is a bug there, but the logic to ignore definitely exists.",10/Nov/15 12:18 PM;brian.stansberry;This failed again: http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=78357&buildTypeId=WildFlyCore_PullRequestWindows&tab=buildResultsDiv,,,,,,,,,,,,,,,,,,,,,,
HcExtensionAndSubsystemManagementTestCase intermittently fails,WFCORE-1073,12590053,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,pkremens,pkremens,22/Oct/15 6:32 AM,06/Nov/15 10:17 AM,29/Nov/16 3:53 PM,06/Nov/15 10:17 AM,2.0.0.CR7,,,,,,,,Test Suite,,,,,0,,,,,,"org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase intermittently fails in getRunningServers().
{noformat}
org.junit.ComparisonFailure: {
    ""outcome"" => ""failed"",
    ""rolled-back"" => true
} expected:<[success]> but was:<[failed]>
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.getRunningServers(HcExtensionAndSubsystemManagementTestCase.java:134)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.awaitServers(HcExtensionAndSubsystemManagementTestCase.java:475)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.reloadHostsIfReloadRequired(HcExtensionAndSubsystemManagementTestCase.java:461)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.reloadHostsIfReloadRequired(HcExtensionAndSubsystemManagementTestCase.java:439)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.checkSocketBindingCapabilities(HcExtensionAndSubsystemManagementTestCase.java:350)
	at org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.testSocketBindingCapabilities(HcExtensionAndSubsystemManagementTestCase.java:184)
{noformat}
reproducer job running the testcase in i=20 loop:
 \- [eap-7x-HcExtensionAndSubsystemManagementTestCase-reproducer|https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-HcExtensionAndSubsystemManagementTestCase-reproducer/]

Attaching surefire report from one of failed configuration (although it doesn't seem to contain any kind of useful information in this case), server logs can be found in jobs [console|https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-HcExtensionAndSubsystemManagementTestCase-reproducer/2/jdk=java18_default,label_exp=eap-sustaining&&EAP-RHEL7/console] or among the stored [artifacts|https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-HcExtensionAndSubsystemManagementTestCase-reproducer/2/jdk=java18_default,label_exp=eap-sustaining&&EAP-RHEL7/].",,,,,,,,,,,,,,,,JBEAP-1598,,,,,,,,,,,22/Oct/15 6:32 AM;pkremens;TEST-org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.xml;https://issues.jboss.org/secure/attachment/12394182/TEST-org.jboss.as.test.integration.domain.suites.HcExtensionAndSubsystemManagementTestCase.xml,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,1.0,2.0,,1|hzz987:,9223372036854775807,,,,,,,,,,,"23/Oct/15 5:39 AM;kabirkhan;Is this simply a case of doing
[code]
COUNTER=0
while [  $COUNTER -lt 20  ]; do 
     echo counter $COUNTER; 
     let  COUNTER=COUNTER+1 ; 
     mvn install -DallTests -pl testsuite/domain/ -Dtest=HcExtensionAndSubsystemManagementTestCase; 
done
[code]
In which case I cannot reproduce here","06/Nov/15 10:17 AM;pkremens;I retested this with 2.0.0.CR8 and test no longer fails, thus closing. 

https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-HcExtensionAndSubsystemManagementTestCase-reproducer/",,,,,,,,,,,,,,,,,,,,,,,,,
Where a username terminates with a '\' add-user adds it multiple times to the properties file.,WFCORE-1071,12589999,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,21/Oct/15 1:11 PM,23/Oct/15 9:46 AM,29/Nov/16 3:53 PM,23/Oct/15 9:46 AM,,,,,,,2.0.0.CR8,,Domain Management,Scripts,,,,0,,,,,,I have not debugged this yet but I would suspect this is actually happening during writing the file for a subsequent user added.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1185,,,,,,0.0,1.0,,1|hzz8w7:,9223372036854775807,,,,,,,,,,,22/Oct/15 12:51 PM;dlofthouse;Also existing user detection fails for usernames containing a '\'.,,,,,,,,,,,,,,,,,,,,,,,,,,
 CVE-2015-5304 Missing authorization check for Monitor/Deployer/Auditor role when shutting down server or canceling op,WFCORE-1067,12589939,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,21/Oct/15 8:22 AM,04/Dec/15 12:40 PM,29/Nov/16 3:53 PM,04/Dec/15 12:40 PM,1.0.0.Final,1.0.1.Final,2.0.0.Final,2.0.1.Final,2.0.2.Final,2.0.3.Final,2.0.4.Final,,Domain Management,,,,,0,,,,,,"It was found that the server or host controller did not properly authorize a user performing a shut down. A user with the role Monitor, Deployer, or Auditor could use this flaw to shut down the EAP server, which is an action restricted to users in other roles.

The following commit introduced this issue:

https://github.com/wildfly/wildfly-core/commit/6e5611b4c6

The context.getServiceRegistry(true) call, which throws an exception when write authorization fails, was replaced with a call to context.authorize, which only returns an authorization result. Nothing was then done with the authorization result.

The same flaw exists in the handling of the cancel-active-operation op, although there this only means the admin could cancel an in-progress operation, perhaps initiated by a different admin. It also lets the admin cancel his own operation, which is arguably a benefit. But losing that benefit is an acceptable price to having a consistent RBAC scheme. (Note: CLI users whose own operations are hanging can always cancel them by doing a soft kill of the CLI process. Users of custom clients that use ModelControllerClient can cancel their own ops by using the ModelControllerClient executeAsync API and cancelling the Future returned thereby.)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1280,,,,,,0.0,0.0,,1|hzz8kf:,9223372036854775807,,This issue is security relevant,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Parameter -Djboss.domain.log.dir does not have effect on HP-UX when directory does not exist,WFCORE-1066,12578365,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ochaloup,ochaloup,17/Jul/15 5:01 AM,29/Jan/16 5:36 PM,29/Nov/16 3:53 PM,29/Jan/16 5:36 PM,2.0.0.CR7,,,,,,2.0.8.Final,,Scripts,,,,,0,,,,,,If you run container in domain mode with explicitly specified log directory (by parameter {{jboss.domain.log.dir}}) then such settings does not take any effect if directory does not exist before server startup. This issue can be seen only on HP-UX (hpux jdk).,,,,,,,,,,,,,,,,JBEAP-449,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1385,,,,,,0.0,2.0,,1|hzxhu7:,9223372036854775807,,,,"{code}
./bin/domain.sh -Djboss.domain.log.dir=/hudson_workspace/ochaloup/logdir -c domain.xml
{code}

If directory /hudson_workspace/ochaloup/logdir does not exist then nothing is logged. If directory exists before serer startup then everything is logged fine.",,,,,,,22/Jul/15 10:48 AM;ctomc;Is there any machine we could test this? We don't have any hp-ux boxes in our CI.,"15/Dec/15 1:35 AM;ehugonnet;This is a script issue, since the directory doesn't exist `cd ${p#*=} ; pwd -P` will fail.
Either we can use awk or testing for directory existence before cding
This should be also the case with standalone",,,,,,,,,,,,,,,,,,,,,,,,,
Starting scripts not terminated on Solaris with LAUNCH_JBOSS_IN_BACKGROUND=true,WFCORE-1065,12589530,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,ctomc,tturek,tturek,19/Oct/15 4:29 AM,23/Nov/15 11:43 AM,29/Nov/16 3:53 PM,23/Nov/15 11:43 AM,,,,,,,,,Scripts,,,,,0,,,,,,"Standalone.sh script is not terminating when I run it with {{LAUNCH_JBOSS_IN_BACKGROUND=true}} on Solaris 11 OS. The problem is that after sending TERM signal to end standalone script. Then the jboss-module.jar is successfully terminated, but starting script gets into an infinite loop that constantly writes to log this:
{code}
+ SIGNAL=15
++ kill -l 15
+ SIGNAL_NAME=TERM
+ echo '*** JBossAS process (12898) received TERM signal ***'
*** JBossAS process (12898) received TERM signal ***
+ '[' 143 -ge 128 ']'
+ wait 12898
+ WAIT_STATUS=143
+ '[' 143 -gt 128 ']'
++ expr 143 - 128
+ SIGNAL=15
++ kill -l 15
+ SIGNAL_NAME=TERM
+ echo '*** JBossAS process (12898) received TERM signal ***'
*** JBossAS process (12898) received TERM signal ***
+ '[' 143 -ge 128 ']'
+ wait 12898
+ WAIT_STATUS=143
+ '[' 143 -gt 128 ']'
++ expr 143 - 128
+ SIGNAL=15
++ kill -l 15
+ SIGNAL_NAME=TERM
+ echo '*** JBossAS process (12898) received TERM signal ***'
*** JBossAS process (12898) received TERM signal ***
+ '[' 143 -ge 128 ']'
+ wait 12898
+ WAIT_STATUS=143
+ '[' 143 -gt 128 ']'
++ expr 143 - 128
+ SIGNAL=15
++ kill -l 15
+ SIGNAL_NAME=TERM
+ echo '*** JBossAS process (12898) received TERM signal ***'
{code} ","Solaris 11 (x86, x86_64, sparc), Solaris 10 sparc",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzz69b:,9223372036854775807,,,,"# {{export LAUNCH_JBOSS_IN_BACKGROUND=true}}
# {{bash -x ./bin/standalone.sh}}
# In another terminal send term signal to stop standalone.sh process.
{{kill -TERM $PID}}
# see terminal with standalone.sh script",,,,,,,"19/Oct/15 8:18 AM;ctomc;Well yes, we discussed this recently with [~rsvoboda] that env variable is only used properly when it is invoked via initd script.
When used directly it works wrongly on all platforms not just solaris. 
Question is what appropriate fix for this would be. Maybe even removing it from the script should be the best option.","19/Oct/15 8:37 AM;mbasovni;[~ctomc], what will happen if you remove that env variable from the shell script? How will be possible to run wildfly in background? We use this varibale in one [project|https://github.com/jboss-soa-qa/jcontainer-manager/tree/develop/containers/eap] and I would like to preserve compatibility.","19/Oct/15 9:02 AM;rsvoboda;I think LAUNCH_JBOSS_IN_BACKGROUND property evokes the process is fully running in background.
Well it's true for java process, but the script is still running and checking java process status - see {{wait $JBOSS_PID 2>/dev/null}}

LAUNCH_JBOSS_IN_BACKGROUND is used in community init scripts, I checked product scripts and they use different approach to get PID",23/Nov/15 11:43 AM;ctomc;Behavior is the same on all *nix platforms. and such by intent.,,,,,,,,,,,,,,,,,,,,,,,
Creating named multicast socket doesn't properly register socket using name,WFCORE-1064,12589756,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,pferraro,pferraro,20/Oct/15 6:52 AM,13/Dec/15 8:24 AM,29/Nov/16 3:53 PM,20/Oct/15 4:22 PM,2.0.0.CR7,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"I'm not sure why this is, but the socket binding manager ignores the name of the multicast socket and registers the socket using the unnamed registry.",,,,,,,,,,,,,,,,,,,,,,,,WFLY-5449,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1268185,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1181,,,,,,0.0,9.0,,1|hzz7jj:,9223372036854775807,,,,,,,,,,,23/Oct/15 10:30 PM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from NEW to MODIFIED,24/Oct/15 1:48 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to POST,27/Oct/15 9:18 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from POST to MODIFIED,30/Oct/15 2:30 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to ON_QA,03/Nov/15 8:15 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to ASSIGNED,04/Nov/15 11:13 AM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to ON_QA,05/Nov/15 2:25 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to VERIFIED,13/Dec/15 8:23 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from VERIFIED to ASSIGNED,13/Dec/15 8:24 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to VERIFIED,,,,,,,,,,,,,,,,,,
Creating named datagram socket throws ISE,WFCORE-1063,12589755,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,pferraro,pferraro,20/Oct/15 6:48 AM,13/Dec/15 8:24 AM,29/Nov/16 3:53 PM,20/Oct/15 4:22 PM,2.0.0.CR7,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"The DatagramSocket createDatagramSocket(String name, SocketAddress address) method of org.jboss.as.network.SocketBindingManagerImpl creates a ManagedDatagramSocketBinding with a null name, yet registers the socket using the NamedManagedBindingRegistry.",,,,,,,,,,,,,,,,,,,,,,,,WFLY-5449,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1268185,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1181,,,,,,0.0,9.0,,1|hzz7jb:,9223372036854775807,,,,,,,,,,,23/Oct/15 10:30 PM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from NEW to MODIFIED,24/Oct/15 1:48 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to POST,27/Oct/15 9:18 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from POST to MODIFIED,30/Oct/15 2:30 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to ON_QA,03/Nov/15 8:16 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to ASSIGNED,04/Nov/15 11:13 AM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to ON_QA,05/Nov/15 2:25 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to VERIFIED,13/Dec/15 8:23 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from VERIFIED to ASSIGNED,13/Dec/15 8:24 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to VERIFIED,,,,,,,,,,,,,,,,,,
Deployments from the domain/data/content folder goes missing after few minutes if the Host controller is started with --backup option.,WFCORE-1062,12589740,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ehugonnet,ehugonnet,ehugonnet,20/Oct/15 5:33 AM,04/Mar/16 4:00 AM,29/Nov/16 3:53 PM,22/Oct/15 9:43 AM,2.0.0.CR7,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"Host controller started with --backup option deletes the deployments from the domain/data/content folder after approximately 10 mins. 
The deployment is restored or recreated if the HostController is started. 


Version-Release number of selected component (if applicable): 6.4.x


How reproducible:


Steps to Reproduce:
	
1. Setup domaincontroller 
2. Setup hostcontroller 
3. Start domaincontroller 
4. Start hostcontroller with --backup option.
5. deploy an application using cli or admin console

./jboss-cli.sh --connect --controller=x.x.x.x:9999 --command='deploy /PathToApp/App.war --server-groups=main-server-group'

6. deployments are available under $JBOSS_HOME/domain/data/content

7. Wait for approximately 10 minutes

8. Cached deployments are deleted on hostcontroller (domain/data/content is empty). Following is the logging seen on the console :


++++++++++++++

[Host Controller] 14:20:40,439 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 4) JBAS014903: Content /NotBackedUp/JAR-Folder/EAPs/EAP6/jboss-eap-6.4.3-Patched/domain/data/content/47/1108a27fa1b82e6a92fb56ee25bc76f2625249 is obsolete and will be removed

[Host Controller] 14:20:40,440 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 4) JBAS014901: Content removed from location /NotBackedUp/JAR-Folder/EAPs/EAP6/jboss-eap-6.4.3-Patched/domain/data/content/47/1108a27fa1b82e6a92fb56ee25bc76f2625249/content

++++++++++++++

9. After restarting the Host Controller, the deployment is restored and the cached deployment can now be seen under the Host Controller's domain/data/content folder.

Actual results: Deployment folder form domain/data/content folder gets deleted after approx 10 mins and are restored if the Host Controller is restarted


Expected results: The cached deplpyments folder should never be removed from the HostController's domain/data/content folder.  


Additional info: This does not affect the availability of the application since the applications are also availbale with the assigned server's under their data/content folder.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1265170,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1182,,,,,,0.0,4.0,,1|hzz7g7:,9223372036854775807,,,,,,,,,,,21/Oct/15 10:25 PM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1265170|https://bugzilla.redhat.com/show_bug.cgi?id=1265170] from NEW to POST,23/Feb/16 4:10 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1265170|https://bugzilla.redhat.com/show_bug.cgi?id=1265170] from POST to MODIFIED,24/Feb/16 2:52 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1265170|https://bugzilla.redhat.com/show_bug.cgi?id=1265170] from MODIFIED to ON_QA,04/Mar/16 4:00 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1265170|https://bugzilla.redhat.com/show_bug.cgi?id=1265170] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
exploded jsp is not deployed after server reload,WFCORE-1060,12587269,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,jstourac,jstourac,05/Oct/15 8:31 AM,16/Oct/15 4:54 AM,29/Nov/16 3:53 PM,16/Oct/15 4:54 AM,2.0.0.CR6,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"When I deploy exploded jsp on EAP server via marker file, undeploy it and again redeploy it via cli, then perform server reload, after those steps particular jsp is not available anymore.

For more info see ""Steps to Reproduce"" section.",,,,,,,,,,,,,,,,JBEAP-1229,,,,,,,,,,,05/Oct/15 8:31 AM;jstourac;simple-jsp.war;https://issues.jboss.org/secure/attachment/12393418/simple-jsp.war,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1169,,,,,,1.0,2.0,,1|hzyum7:,9223372036854775807,,,," 1. Start EAP server and connect to CLI.
 2. From other terminal explode {{simple-jsp.war}} to deployments directory and deploy it using marker file:
{code}
cd $JBOSS_HOME/standalone/deployments/
unzip -d simple-jsp.war /tmp/simple-jsp.war
touch simple-jsp.war.dodeploy
{code}
 3. Perform request to {{http://localhost:8080/simple-jsp/index.jsp}} to ensure that deployment has been successful (text ""Original JSP"" should occur). Also in deployment directory there is created {{simple-jsp.war.deployed}} marker file.
 4. In CLI execute:
{code}
/deployment=simple-jsp.war:undeploy()
{code}
The {{simple-jsp.war.deployed}} marker file in deployment directory is removed and no other is created.
 5. Deploy again executing in CLI:
{code}
/deployment=simple-jsp.war:deploy()
{code}
No marker file is created in deployment directory. Check that {{index.jsp}} is available again.
 6. Now perform reload of the EAP server executing in CLI:
{code}
/:reload
{code}
 7. Check that request on {{http://localhost:8080/simple-jsp/index.jsp}} is not successful (404 Not found).

Expected result: the {{simple-jsp}} to be deployed and {{http://localhost:8080/simple-jsp/index.jsp}} available.",,,,,,,"05/Oct/15 9:48 AM;brian.stansberry;This almost certainly is not a critical bug.

You need to choose how you want to manage your deployment -- via the scanner or manually via the CLI. Switching from one to the other is something where we try our best to let the scanner figure out what you've done manually and keep up, but it's really a best effort. If you are using the scanner for your deployment, stick to the scanner.

I suspect what happens here is the deployment is still owned by the scanner, since :undeploy / : deploy doesn't remove/re-add the deployment. Then the scanner's attempts to track what happens with the deployment get lost after the :undeploy. The effect is when you reload, the deployment is owned by the scanner but the scanner considers it undeployed and doesn't deploy it.",12/Oct/15 11:36 AM;ehugonnet;We could use the notifications to update the status of the marker files.,,,,,,,,,,,,,,,,,,,,,,,,,
RestartParentResourceAdd/RemoveHandler should handle capability registration,WFCORE-1059,12589111,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ctomc,pferraro,pferraro,14/Oct/15 10:34 AM,29/Nov/16 3:32 PM,29/Nov/16 3:53 PM,,2.0.0.CR6,,,,,,3.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"RestartParentResourceAddHandler and RestartParentResourceRemoveHandler do not extend the respective AbstractAddStepHandler and AbstractRemoveStepHandler base classes, and thus does not handle capability [un]registration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzz3tr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
InstanceAlreadyExistsException in logs while starting embed-server after failure,WFCORE-1056,12589007,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,14/Oct/15 4:32 AM,19/Nov/15 3:34 PM,29/Nov/16 3:53 PM,19/Nov/15 3:34 PM,2.0.0.CR6,,,,,,2.0.2.Final,,CLI,,,,,0,,,,,,"IAEE can be seen in the logs of embed server on the second startup if the first one fails.
\\
\\
Starting the embed server with --emty-config using default configuration fails as expected.
{noformat}
[disconnected /] embed-server --std-out=echo --empty-config
10:12:35,251 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.4.Final
10:12:35,323 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final
10:12:35,384 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) starting
10:12:35,454 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.as.server-controller: org.jboss.msc.service.StartException in service jboss.as.server-controller: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: WFLYCTL0389: Could not create an empty configuration at file /home/pkremens/devel/wildfly-core/dist/target/wildfly-core-2.0.0.CR7-SNAPSHOT/standalone/configuration/standalone.xml as there is an existing non-empty configuration there
	at org.jboss.as.controller.persistence.ConfigurationFile.getBootFile(ConfigurationFile.java:242)
	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.<init>(BackupXmlConfigurationPersister.java:70)
	at org.jboss.as.server.Bootstrap$Configuration$1.createConfigurationPersister(Bootstrap.java:192)
	at org.jboss.as.server.ServerService.start(ServerService.java:249)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	... 3 more

Cannot start embedded server: WFLYEMB0022: Cannot invoke 'start' on standalone server: WFLYSRV0141: Cannot start server: Operation failed: Failed to start service: WFLYCTL0389: Could not create an empty configuration at file /home/pkremens/devel/wildfly-core/dist/target/wildfly-core-2.0.0.CR7-SNAPSHOT/standalone/configuration/standalone.xml as there is an existing non-empty configuration there
{noformat}
InstanceAlreadyExistsException can be seen in the logs during the boot of the embed server now.
{noformat}
[disconnected /] embed-server --std-out=echo
10:12:40,211 INFO  [org.jboss.modules] (AeshProcess: 2) JBoss Modules version 1.4.4.Final
10:12:40,217 ERROR [org.jboss.msc] (AeshProcess: 2) MSC000010: Failed to register MBean with MBeanServer: javax.management.InstanceAlreadyExistsException: jboss.msc:type=container,name=jboss-as
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.jboss.msc.service.ServiceContainerImpl.<init>(ServiceContainerImpl.java:372)
	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:258)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:208)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.access$100(BootstrapImpl.java:198)
	at org.jboss.as.server.BootstrapImpl.<init>(BootstrapImpl.java:62)
	at org.jboss.as.server.Bootstrap$Factory.newInstance(Bootstrap.java:256)
	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory$StandaloneServerImpl.start(EmbeddedStandaloneServerFactory.java:275)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.wildfly.core.embedded.EmbeddedServerReference.invokeOnServer(EmbeddedServerReference.java:85)
	at org.wildfly.core.embedded.EmbeddedServerReference.start(EmbeddedServerReference.java:56)
	at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:205)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:773)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:796)
	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:410)
	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

10:12:40,227 INFO  [org.jboss.as] (MSC service thread 2-8) WFLYSRV0049: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) starting
10:12:40,678 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) started in 465ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
[standalone@embedded /]
{noformat}

Embed server functionality doesn't seem to be affected by the exception - is operable.",,,,,,,,,,,,,,,,JBEAP-1450,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1256,https://github.com/wildfly/wildfly-core/pull/1254,,,,,0.0,2.0,,1|hzyklj:,9223372036854775807,,,,,,,,,,,"19/Oct/15 9:49 AM;brian.stansberry;Ken, I don't know if there's much that can be done about this in WFCORE itself if it's an MSC thing, but can you have a look? Perhaps there is some shutdown logic that core can perform when a failure happens that will allow MSC to clean up.","18/Nov/15 5:46 PM;brian.stansberry;I'm scheduling this for 2.0.2.Final because it seems reasonable to think it will get done before WildFly 10.0.0.Final is done, so we can get into a 2.0.x release. 2.0.2.Final is planned for release tomorrow. If it doesn't make it into that, it's ok, it will just roll into 2.0.3.Final when I create that Fix Version.",,,,,,,,,,,,,,,,,,,,,,,,,
'capabilities' constant contains invalid initial space,WFCORE-1055,12588947,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,dlofthouse,dlofthouse,13/Oct/15 11:39 AM,16/Oct/15 5:54 AM,29/Nov/16 3:53 PM,16/Oct/15 5:54 AM,,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1170,,,,,,0.0,0.0,,1|hzz2xb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PatchModuleInvalidationWithRenamingFailureTestCase fails on pure IPv6,WFCORE-1050,12588741,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,ehugonnet,mkopecky,mkopecky,12/Oct/15 9:25 AM,12/Oct/15 11:51 AM,29/Nov/16 3:53 PM,12/Oct/15 11:51 AM,2.0.0.CR5,,,,,,2.0.0.CR6,,Test Suite,,,,,0,,,,,,"*Description of problem:*
PatchModuleInvalidationWithRenamingFailureTestCase fails on pure IPv6 machines

*How reproducible:*
Always on pure IPv6 machines

*Steps to Reproduce:*
# export PROXY_PARAMS=""-DproxySet=true -DproxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -DproxyPort=3128 -Dhttp.proxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -Dhttp.proxyPort=3128 -Dhttps.proxyHost=proxy-01-ipv6.mw.lab.eng.bos.redhat.com -Dhttps.proxyPort=3128"" 
# mvn install -Dts.patching -Dtest=PatchModuleInvalidationWithRenamingFailureTestCase -DfailIfNoTests=false -Dmaven.repo.local=$MAVEN_REPO_LOCAL -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIPV6_1 -Dmcast=$MCAST_ADDRV6 -Dipv6 $PROXY_PARAMS

*Actual results:*
{noformat}
Running org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.054 sec <<< FAILURE! - in org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase
test(org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase)  Time elapsed: 0.044 sec  <<< ERROR!
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at org.jboss.byteman.agent.submit.Submit$Comm.<init>(Submit.java:881)
	at org.jboss.byteman.agent.submit.Submit.submitRequest(Submit.java:787)
	at org.jboss.byteman.agent.submit.Submit.setSystemProperties(Submit.java:746)
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.resetAgentProperties(BMUnitConfigState.java:423)
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.popConfigurationState(BMUnitConfigState.java:725)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$6.evaluate(BMUnitRunner.java:243)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:75)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase(org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase)  Time elapsed: 0.052 sec  <<< ERROR!
java.lang.Exception: BMUnit test class configuration popped without popping method configuration!
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.popConfigurationState(BMUnitConfigState.java:687)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:78)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}

*Expected results:*
No errors",,,,,,,,,,,,,,,,JBEAP-1411,,,,WFCORE-935,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,1.0,,1|hzz1qf:,9223372036854775807,,,,,,,,,,,12/Oct/15 11:51 AM;ehugonnet;Duplicates WFCORE-935,,,,,,,,,,,,,,,,,,,,,,,,,,
ConcreteResourceRegistration#registerSubModel is not thread safe,WFCORE-1049,12588691,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,swd847,swd847,12/Oct/15 7:33 AM,25/Nov/15 2:13 PM,29/Nov/16 3:53 PM,25/Nov/15 2:13 PM,,,,,,,2.0.3.Final,,Domain Management,,,,,0,,,,,,"registerSubModel checks for existing, then registers, however it is invoked by two threads at the same time it is possible they will both see the resource as not existing and both register.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1231,,,,,,0.0,9.0,,1|hzz1fz:,9223372036854775807,,,,,,,,,,,"12/Oct/15 9:09 AM;brian.stansberry;Per our chat in the hallway, I think the issue is more that the MRR is registered (and is thus visible to other threads) before the rest of the initialization work is completed. Stuff like registerAttributes, registerOperations, registerChildren. ",06/Nov/15 4:53 AM;swd847;Maybe this method should just be synchronized for now? I doubt it will have any measurable impact on startup time. ,06/Nov/15 5:42 AM;ctomc;Short term solution could be that we just make sure that registerDeploymentModel stuff is thread safe.,"06/Nov/15 7:36 AM;brian.stansberry;Making the method synchronized won't help, as the problem isn't concurrent calls to registerSubmodel. It's that registerSubmodel is publishing an incompletely initialized MRR making it visible to other threads before it has its attributes, operations and children registered. When I looked at the failures in the test, they were NPEs due to later code assuming that children would exist.

Unfortunately I can't remember the name of the failing test so I can't find the failures now. :( I'd like to find those as this will need a JBEAP and that will need some evidence as to how this is an actual problem users will see.

The pull request passes now.

BTW I'm not sure why I added the ""check for existing and then register"", as the registration itself is a putIfAbsent with a failure if that returns non-null. So the checkIfExisting seems redundant. But I don't think that caused the test failures. Not in the ones I looked at at least.",06/Nov/15 7:38 AM;swd847;I think this is the test http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=77961&buildTypeId=WF_PullRequest_Windows,06/Nov/15 7:40 AM;swd847;Also I'm not sure why you can't just use a sync block to make sure that the underlying object is fully initialized before it is published?,"06/Nov/15 7:57 AM;brian.stansberry;Here's one:

http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=75813&tab=buildResultsDiv&buildTypeId=MasterWindows

{code}
05:18:46,317 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC000001: Failed to start service jboss.ra.deployer.""ear_packaged.ear#ear_packaged2.rar"".jboss.ironjacamar.resource: org.jboss.msc.service.StartException in service jboss.ra.deployer.""ear_packaged.ear#ear_packaged2.rar"".jboss.ironjacamar.resource: Failed to start service
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.NullPointerException
    at org.jboss.as.connector.services.resourceadapters.IronJacamarActivationResourceService.start(IronJacamarActivationResourceService.java:196)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
    ... 3 more
{code}

The failing code is:

{code}
ManagementResourceRegistration cdRegistration = raRegistration.getSubModel(PathAddress.pathAddress(peCD));
ManagementResourceRegistration overrideCdRegistration = cdRegistration.registerOverrideModel(cm.getJndiName(), new OverrideDescriptionProvider() {
{code}

Dereferencing cdRegistration throws the NPE. It's null because raRegistration is a ref to an incompletely populated MRR.

I found another failure of that test, and it was in a different spot in IronJacamarActivationResourceService but the same basic pattern -- getSubModel is called on an MRR and it unexpectedly returns null.

These failures are hard to find in CI because its not a test method that fails, it's the preliminary ARQ setup (i.e. deployment) work. So you can't look up the test method in any test run and then check the history to find failures.","06/Nov/15 8:23 AM;brian.stansberry;[~swd847] Thanks for the link. That's another example of the same failure pattern.

""Also I'm not sure why you can't just use a sync block to make sure that the underlying object is fully initialized before it is published?""

All the getter methods on the MRR would need to be synchronized for that to help. That's doable and probably simpler but now we've made methods that get called a lot synchronized. I don't expect much contention around those calls, but there's some overhead.

Doing that would remove the need for the last 2 commits in my PR, but only if I went back to doing the registerAttributes/Operations/Descriptions calls after I published the MRR.","09/Nov/15 8:55 PM;brian.stansberry;I've been looking into the cost of just doing synchronization/locking instead of what's in https://github.com/wildfly/wildfly-core/pull/1207.

I been testing boot time on my quad core macbook, looking at various approaches to solving this. I tested standalone boot time with the standalone.xml and standalone-full.xml configs. I would shut down all CPU-draining apps, build the server, then start/stop the config 4 times to warm any FS caches, and then start/stop the server 7 times recording the logged start up time. I'd throw out the lowest and highest value and calc an average of the other 5. Results, in ms, standalone.xml and then standalone-full.xml:

master[1]     2479 3395
no-lock[2]    2547 3276
sync[3]        2561 3363
lock[4]         2568 3358
lock2[5]       2546 3340 

[1] The ""master"" figures are current WildFly master.
[2] https://github.com/wildfly/wildfly-core/compare/master...bstansberry:WFCORE-1049 (PR #1207)
[3] Locking using ""synchronized"" -- https://github.com/wildfly/wildfly-core/compare/master...bstansberry:sync_mrr
[4] Locking using java.util.concurrent.lock https://github.com/wildfly/wildfly-core/compare/master...bstansberry:lock_mrr
[5] Same as 4 but a slight change in locking in one method. https://github.com/wildfly/wildfly-core/compare/master...bstansberry:lock_mrr_2 -- submitted as https://github.com/wildfly/wildfly-core/pull/1231

Since [5] is competitive with [2] with the default profile, and is competitive with master with the full profile, I'll go with [5]. It is conceptually simpler than [2].

Interestingly enough, through quite a few various boot time tests (not just those reported above) I'd see the approaches using locking performing better than master for the ""full"" profile, while performing worse for the default profile. The latter is not surprising; the former is. My *guess* is this is because master uses FastCopyHashMap, copying the map for every attribute/operation/child addition. The locking approaches don't need this copying, since the maps are guarded. My guess is full includes more subsystems with more attributes, so more copying cost.

I don't delude myself that these figures are highly precise. :) But I've done enough tests to sense that they are reasonable; there is some cost to this fix but not a huge one, and maybe little or none with the full profile.",,,,,,,,,,,,,,,,,,
IOException from EmbeddedServerFactorySetupUnitTestCase on Windows,WFCORE-1048,12588631,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,pkremens,pkremens,12/Oct/15 3:29 AM,20/Oct/15 4:37 PM,29/Nov/16 3:53 PM,20/Oct/15 4:37 PM,2.0.0.CR6,,,,,,2.0.0.CR8,,CLI,Test Suite,,,,0,,,,,,"org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase fails on Windows with
{noformat}
java.lang.IllegalStateException: WFLYEMB0020: Cannot setup embedded server
	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:81)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
	at sun.nio.fs.WindowsFileSystemProvider.createDirectory(WindowsFileSystemProvider.java:504)
	at java.nio.file.Files.createDirectory(Files.java:674)
	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.getTempRoot(EmbeddedStandaloneServerFactory.java:178)
	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.setupCleanDirectories(EmbeddedStandaloneServerFactory.java:107)
	at org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.testServerOverrideAndDataAndConfigOverride(EmbeddedServerFactorySetupUnitTestCase.java:112)
{noformat}

Reproducer job running against the latest core bits https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-core-embedded-windows-reproducer/

I am able to reproduce locally on my VM host, however test doesn't seem to throw the exception on regular basis (see #4, where build on w2k12 passed (same slave for w2k12 as for #3))",Windows,,,,,,,,,,,,,,,JBEAP-1364,,,,,,,,,,,12/Oct/15 3:29 AM;pkremens;TEST-org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.xml;https://issues.jboss.org/secure/attachment/12393777/TEST-org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.xml,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1179,,,,,,1.0,5.0,,1|hzz133:,9223372036854775807,,,,"see https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-core-embedded-windows-reproducer/configure
",,,,,,,"12/Oct/15 10:24 AM;brian.stansberry;[~ctomc] Does this ring any bells with you? It's trying to create a dir at /some/path/20151012162021345 which is down to ms precision, so the fact that the dir already exists (the specifically mentioned reason for IOE on Files.createDirectory()) seems unlikely for a failure that occurs more than once in a great while.

[~pkremens] In any output associated with the test is a ""caused by"" part of the stacktrace reported? It's not in the TEST-xxx.xml file for some reason. The ISE is created with a cause though.","13/Oct/15 12:52 AM;pkremens;I updated the EmbeddedStandaloneServerFactory sources to print stacktrace before throwing the exception and this is what I get:

{noformat}
java.nio.file.FileAlreadyExistsException: C:\jboss-eap-7.0.0.DR11-core-prepared\embedded\target\embedded-root\configs\20151013065003730
	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:81)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
	at sun.nio.fs.WindowsFileSystemProvider.createDirectory(WindowsFileSystemProvider.java:504)
	at java.nio.file.Files.createDirectory(Files.java:674)
	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.getTempRoot(EmbeddedStandaloneServerFactory.java:180)
	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.setupCleanDirectories(EmbeddedStandaloneServerFactory.java:107)
	at org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.testDataAndConfigOverride(EmbeddedServerFactorySetupUnitTestCase.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}
DR11-core = 2.0.0.CR5

I'll try to dig deeper.","13/Oct/15 1:52 AM;pkremens;I have two Virtual Windows servers available. One is w2k8 the other is w2k12.

I found there is a difference in  the granularity of measured time for these (currentTimeMillis() [javadoc|http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29]):
{code:java}
SimpleDateFormat format = new SimpleDateFormat(""yyyyMMddHHmmssSSS"");
for (int i = 0; i < 100; i++) {
    System.out.println(format.format(new Date()));
}
{code}

w2k8 - EmbeddedServerFactorySetupUnitTestCase pass locally
{noformat}
...
20151013073755993
20151013073755994
20151013073755994
20151013073755994
20151013073755995
20151013073755995
20151013073755995
20151013073755995
20151013073755995
20151013073755995
20151013073755995
...
{noformat}
w2k12 - EmbeddedServerFactorySetupUnitTestCase fails locally
{noformat}
...
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259519
20151013074259535
20151013074259535
20151013074259535
20151013074259535
...
{noformat}
Adding more output to the test I can see that it really tries to create directory with the same timestamp more than once. We have to either change the way of how the name of temp root directory is generated, or add some waiting between the tests.

Following solves the issue for me locally:
{noformat}
public class EmbeddedServerFactorySetupUnitTestCase {
...
     @Before
-    public void createEmbeddedRoot() {
+    public void createEmbeddedRoot() throws InterruptedException {
+        Thread.sleep(1L);
         embeddedRoot = new File(""target/embedded-root"").getAbsoluteFile();
{noformat}
","13/Oct/15 5:00 AM;ctomc;Another solution would be to remove the directories after each test run.

But yes, I completely agree with your evaluation. 
I will look into fixing this.","20/Oct/15 10:26 AM;ctomc;I've sent PR that doesn't use date for creating the directory but rather uses JDK/OSs functionality to create temporary directory.
I've tested with for loop call to setupCleanDirectories() and it worked fine.",,,,,,,,,,,,,,,,,,,,,,
Rollback of undeploy and deployment remove will fail,WFCORE-1047,12588509,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,brian.stansberry,brian.stansberry,09/Oct/15 6:33 PM,16/Oct/15 4:50 AM,29/Nov/16 3:53 PM,16/Oct/15 4:50 AM,1.0.0.Final,2.0.0.CR6,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"This looks like a problem that's been around since Sept 2012.

The rollback handling in DeploymentHandlerUtil.undeploy and in DeploymentRemoveHandler both try to read the deployment's management name from the deployment resource, but since [1] it hasn't been stored there. So rollback will fail with something like this:

{code}
[Server:main-one] 15:58:54,894 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 2) WFLYCTL0190: Step handler org.jboss.as.server.deployment.DeploymentHandlerUtil$5@2a0a9f3f for operation {""operation"" => ""undeploy"",""address"" => [(""deployment"" => ""broken.jar"")],""operation-headers"" => {}} at address [(""deployment"" => ""broken.jar"")] failed handling operation rollback -- java.util.NoSuchElementException: No child 'name' exists: java.util.NoSuchElementException: No child 'name' exists
[Server:main-one] 	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:377) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]
[Server:main-one] 	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:299) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]
[Server:main-one] 	at org.jboss.dmr.ModelNode.require(ModelNode.java:870) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]
[Server:main-one] 	at org.jboss.as.server.deployment.DeploymentHandlerUtil$5$1.handleResult(DeploymentHandlerUtil.java:331) [wildfly-server-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:173) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.8.0_45]
[Server:main-one] 	at javax.security.auth.Subject.doAs(Subject.java:360) [rt.jar:1.8.0_45]
[Server:main-one] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.8.0_45]
[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:364) [wildfly-protocol-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:466) [wildfly-protocol-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
[Server:main-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_45]
[Server:main-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_45]
[Server:main-one] 	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_45]
[Server:main-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320) [jboss-threads-2.2.1.Final.jar:2.2.1.Final]
{code}

[1] https://github.com/wildfly/wildfly-core/commit/f38b37#diff-2dbd1fc9261de7a938948b642aa8d47dL153",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1167,,,,,,0.0,0.0,,1|hzz0yf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Show error message when accessing http management console of a slave host controller,WFCORE-1046,12588420,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,brian.stansberry,ricardoarguello,ricardoarguello,09/Oct/15 9:39 AM,09/Oct/15 10:08 AM,29/Nov/16 3:53 PM,09/Oct/15 9:45 AM,2.0.0.CR6,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"WFCORE-678 removed the selection of the ConsoleMode.SLAVE_HC console, to show the message: ""You may not access the admin console on this node, all access must come via the master host controller"" when you tried to access a slave host controller console.

That was the default behavior when you enabled the http management interface on a slave host controller (to access it using JON for monitoring, for example).",,,,,,,,,,,,,,,,,,,,WFCORE-1043,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1161,,,,,,0.0,0.0,,1|hzz0h3:,9223372036854775807,,,,"1) Enable the http management console on a slave host controller
2) Try to access http://slave-hc.example.com:9990, it shows a login console. The previous behavior was to show the /consoleerror/noConsoleForSlaveDcError.html page.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Compatibility broken with older management clients,WFCORE-1044,12588103,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,08/Oct/15 3:12 AM,19/Oct/15 2:44 PM,29/Nov/16 3:53 PM,19/Oct/15 2:44 PM,,,,,,,2.0.0.CR7,,,,,,,0,,,,,,"Older versions of XNIO required a content-length: 0 header in the upgrade response, which is not correct.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzyyrb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Show error message when accessing http management console of a slave host controller,WFCORE-1043,12588099,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,ricardoarguello,ricardoarguello,08/Oct/15 1:05 AM,19/Oct/15 2:49 PM,29/Nov/16 3:53 PM,19/Oct/15 2:49 PM,2.0.0.CR6,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"WFCORE-678 removed the selection of the ConsoleMode.SLAVE_HC console, to show the message: ""You may not access the admin console on this node, all access must come via the master host controller"" when you tried to access a slave host controller console.

That was the default behavior when you enabled the http management interface on a slave host controller (to access it using JON for monitoring, for example).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1161,,,,,,0.0,0.0,,1|hzyyqf:,9223372036854775807,,,,"1) Enable the http management console on a slave host controller
2) Try to access http://slave-hc.example.com:9990, it shows a login console. The previous behavior was to show the /consoleerror/noConsoleForSlaveDcError.html page.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ExtensionRemoveHandler logs client mistakes,WFCORE-1042,12588096,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,brian.stansberry,brian.stansberry,07/Oct/15 6:27 PM,10/May/16 3:48 PM,29/Nov/16 3:53 PM,18/Mar/16 4:00 PM,2.0.0.CR6,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"If a user tries to remove an extension when there are still subsystems present that come from that extension, a stack trace appears in the log:

{code}
01:02:23,542 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 2) WFLYCTL0013: Operation (""remove"") failed - address: ([(""extension"" => ""org.jboss.as.test.hc.extension"")]): java.lang.IllegalStateException: WFLYCTL0219: An attempt was made to unregister extension org.jboss.as.test.hc.extension which still has subsystem HC registered
	at org.jboss.as.controller.extension.ExtensionRegistry.removeExtension(ExtensionRegistry.java:331) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.extension.ExtensionRemoveHandler.execute(ExtensionRemoveHandler.java:68) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]
{code}

That's really just a client mistake and there's no reason to log it in the server. ExtensionRemoveHandler can catch the ISE thrown by ExtensionRegistry.removeExtension and convert it to an OperationFailedException.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1384,,,,,,0.0,0.0,,1|hzyypr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Domain controller does not prevent removing extensions with subsystems still registered,WFCORE-1041,12588095,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,brian.stansberry,brian.stansberry,07/Oct/15 6:21 PM,15/Oct/15 7:10 AM,29/Nov/16 3:53 PM,15/Oct/15 7:10 AM,1.0.2.Final,2.0.0.CR6,,,,,,,Domain Management,,,,,0,,,,,,"The main ExtensionRegistry (not the one for HC extensions) on a Host Controller does not detect if the user attempts to remove an extension that still has subsystems installed in the domain profiles.

Trying to do this will fail in domain rollout if the domain has any servers running that use the subsystems, but if there are no such servers (e.g. the DC is running in --admin-only), the remove op will incorrectly succeed. If the DC is then reloaded/restarted boot will fail when the parser encounters the subsystem.

The problem is at L328 of the ExtensionRegistry, 2nd line in the block below:

{code}
                for (String subsystem : subsystemNames) {
                    if (rootResource.getChild(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM, subsystem)) != null) {
                        // Restore the data
                        extensions.put(moduleName, extension);
                        throw ControllerLogger.ROOT_LOGGER.removingExtensionWithRegisteredSubsystem(moduleName, subsystem);
                    }
                }
{code}

That path is only valid on a server or for a host extension.

The removeExtension method should be able to figure out if it is for the domain extension by checking 1) the processType field (to see if its an HC) and 2) the rootRegistration param passed to the method. If rootRegistration.getPathAddress().size() == 0, then its not a host extension registry.

Once that is known the scan for the subsystem can check through the profiles instead instead of assuming the subsystems are direct children of the rootResource param.",,,,,,,,,,,,,,,,,,,,,WFCORE-1042,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1163,,,,,,0.0,0.0,,1|hzyypj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Digest authentication mechanism unable to parse headers where username terminated with trailing '\',WFCORE-1040,12587866,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dlofthouse,olukas,olukas,07/Oct/15 3:32 AM,27/Oct/15 5:54 AM,29/Nov/16 3:53 PM,27/Oct/15 5:47 AM,2.0.0.CR5,,,,,,2.0.0.CR9,,Domain Management,Security,,,,0,,,,,,"In case when username finish with backslash then properties authentication in security realm does not work. It works correctly when backslash is used in the middle of username.

Following expection is thrown:
{code}
java.lang.IllegalArgumentException: UT000025: Unexpected token 'delimiters-test"", nonce' within header.
	at io.undertow.util.HeaderTokenParser.parseHeader(HeaderTokenParser.java:68)
	at io.undertow.security.impl.DigestAuthorizationToken.parseHeader(DigestAuthorizationToken.java:79)
	at io.undertow.security.impl.DigestAuthenticationMechanism.authenticate(DigestAuthenticationMechanism.java:156)
	at org.jboss.as.domain.http.server.security.AuthenticationMechanismWrapper.authenticate(AuthenticationMechanismWrapper.java:52)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:233)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:250)
	at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:219)
	at io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:121)
	at io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:96)
	at io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:89)
	at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:50)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:198)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:784)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}",,,,,,,,,,,,,,,,JBEAP-1274,,WFCORE-1072,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzyx9b:,9223372036854775807,,,,"1. Create users.properties file with content:
{code}
backslash\\=password
backslash\\inthemiddle=password
{code}

2. Add following security realm to standalone.xml (set path to users.properties file instead of PATH_TO_USERS_PROPERTIES):
{code:xml}
<security-realm name=""delimiters-test"">
    <authentication>
        <properties path=""PATH_TO_USERS_PROPERTIES"" plain-text=""true""/>
    </authentication>
</security-realm>
{code}

3. Set ""delimiters-test"" security realm for http-interface:
{code:xml}
<http-interface security-realm=""delimiters-test"" http-upgrade-enabled=""true"">
{code}

4. Start server and access page http://localhost:9990/management?operation=attribute&name=server-state

Username: backslash\inthemiddle
Password: password
-> work fine, page with text ""running"" is displayed

Username: backslash\
Password: password
-> does not work, 401 HTTP status code is returned
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in notification listener testing in org.jboss.as.jmx.rbac.JmxRbacEnabledTestCase,WFCORE-1039,12588061,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,07/Oct/15 1:13 PM,19/Oct/15 2:48 PM,29/Nov/16 3:53 PM,19/Oct/15 2:48 PM,2.0.0.CR6,,,,,,2.0.0.CR7,,JMX,Test Suite,,,,0,,,,,,"For a while we've seen rare failures of JMX tests that look like this:

{code}
java.lang.RuntimeException: java.security.PrivilegedActionException: javax.management.ListenerNotFoundException: Unknown listener
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:484)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)
   ...
Caused by: java.security.PrivilegedActionException: null
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:422)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:254)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)
   ...
Caused by: javax.management.ListenerNotFoundException: Unknown listener
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.removeNotificationListener(DefaultMBeanServerInterceptor.java:1339)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.removeNotificationListener(DefaultMBeanServerInterceptor.java:1242)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.removeNotificationListener(JmxMBeanServer.java:870)
    at org.jboss.as.jmx.PluggableMBeanServerImpl$TcclMBeanServer.removeNotificationListener(PluggableMBeanServerImpl.java:1544)
    at org.jboss.as.jmx.PluggableMBeanServerImpl.removeNotificationListener(PluggableMBeanServerImpl.java:969)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase$1.run(JmxRbacTestCase.java:368)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase$1.run(JmxRbacTestCase.java:254)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:422)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:254)
    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)
{code}

The problem is the TestModelMBean used by the test is not holding a ref to the ""listenerWrapper"" that the JVM MBeanServer passes into its addNotificationListener method. That allows that listenerWrapper to be gc'd, resulting in the failure of the removeNotificationListener call on the next line of the test.

The test holding a ref to the listener doesn't matter, as it's a ""listenerWrapper"" object that matters.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1159,https://github.com/wildfly/wildfly-core/pull/1168,,,,,0.0,1.0,,1|hzyyhz:,9223372036854775807,,,,,,,,,,,10/Oct/15 4:09 PM;brian.stansberry;Reopening; I missed that the test uses two different beans and only fixed one.,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to configure LDAP based authentication within a SecurityRealm using the CLI,WFCORE-1038,12587954,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,dlofthouse,dlofthouse,07/Oct/15 8:17 AM,08/Oct/15 5:37 AM,29/Nov/16 3:53 PM,08/Oct/15 5:37 AM,,,,,,,2.0.0.CR7,,CLI,Domain Management,,,,0,,,,,,"The first and last errors reported here are coming from the CLI: -

{noformat}
[standalone@localhost:9990 /] ./core-service=management/security-realm=ManagementRealm/authentication=ldap:add(username-attribute=uid, base-dn=cn=base, connection=LdapSsl)
The following parameters 'advanced-filter' are required
[standalone@localhost:9990 /] ./core-service=management/security-realm=ManagementRealm/authentication=ldap:add(username-attribute=uid, advanced-filter=(uid={0}), base-dn=cn=base, connection=LdapSsl)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYDM0035: Only one of 'username-attribute' or 'advanced-filter' is required."",
    ""rolled-back"" => true,
    ""response-headers"" => {""process-state"" => ""reload-required""}
}
[standalone@localhost:9990 /] ./core-service=management/security-realm=ManagementRealm/authentication=ldap:add(advanced-filter=(uid={0}), base-dn=cn=base, connection=LdapSsl)
The following parameters 'username-attribute' are required
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1157,,,,,,0.0,1.0,,1|hzyxvj:,9223372036854775807,,,,,,,,,,,"07/Oct/15 8:23 AM;dlofthouse;It appears this is caused by the following commit: -

  https://github.com/darranl/wildfly-core/commit/e594336c25290fca12eff08be562b5c1e7b26e17

We probably need CLI side validation to take into account if one of the alternatives has been set.",,,,,,,,,,,,,,,,,,,,,,,,,,
stop-embedded-host-controller command is not available in non-modular environment,WFCORE-1035,12586832,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,01/Oct/15 8:24 AM,16/Oct/15 4:47 AM,29/Nov/16 3:53 PM,16/Oct/15 4:47 AM,2.0.0.CR5,,,,,,2.0.0.CR7,,CLI,,,,,0,,,,,,"stop-embedded-host-controller command for stopping the embed host controller instance is not available once the CLI is running in non-modular environment.

{noformat}
[pkremens@dhcp-10-40-5-17 client] $ java -jar jboss-cli-client.jar 
WARN: can't find jboss-cli.xml. Using default configuration values.
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.

[disconnected /] embed-host-controller --jboss-home=~/workspace/jboss-eap-7.0/           
Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.

[domain@embedded /] stop-embedded-host-controller
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).

# only stop-embedded-server is available
[domain@embedded /] s
set  stop-embedded-server  

# stop-embedded-host-controller command should be used for this
[domain@embedded /] stop-embedded-server 
[disconnected /]
{noformat}",,,,,,,,,,,,,,,,JBEAP-1198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1166,,,,,,0.0,0.0,,1|hzys7b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2 step domain operations do not resolve aliases properly,WFCORE-1034,12587409,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,kabirkhan,kabirkhan,kabirkhan,06/Oct/15 7:06 AM,06/Oct/15 12:01 PM,29/Nov/16 3:53 PM,06/Oct/15 12:01 PM,2.0.0.CR6,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"For WFLY-5290, WFCORE-1022 was done to provide more context, however we still have some problems when doing:
{code}
/profile=full-ha/subsystem=jgroups/stack=tcp/transport=TRANSPORT/thread-pool=default:write-attribute(name=keepalive-time,value=100)
{code}
This is an alias which should resolve to
{code}
/profile=full-ha/subsystem=jgroups/stack=tcp/transport=TCP/thread-pool=default:write-attribute(name=keepalive-time,value=100)
{code}
The equivalent works fine in a standalone. Debugging using CLI commands, the initial read-operation-description ends up in PrepareStepHandler.executeDirectOperation()
which does the right thing.

However the write-attribute call ends up in 
{code}
	OperationCoordinatorStepHandler.execute() ->
	OperationSlaveStepHandler.addSteps() ->
	HostControllerExecutionSupport returns a domainOp ->
	OperationSlaveStepHandler.addBasicStep()
{code}
and 	OperationSlaveStepHandler.addBasicStep() resolves the OperationEntry differently from the standard/standalone prepare step handler, and from how PrepareStepHandler.executeDirectOperation() resolves it.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1150,,,,,,0.0,0.0,,1|hzyvdb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagedDatagramSocketBinding and ManagedMulticastSocketBinding throw NPE if created with bind address,WFCORE-1033,12587185,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,pferraro,pferraro,pferraro,03/Oct/15 3:19 PM,13/Dec/15 8:24 AM,29/Nov/16 3:53 PM,08/Oct/15 9:48 AM,2.0.0.CR6,,,,,,2.0.0.CR7,,Server,,,,,0,,,,,,"{noformat}
&amp#27;[0m&amp#27;[31m14:51:47,114 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector: java.lang.NullPointerException
	at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:96)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.NullPointerException
	at org.jboss.as.network.ManagedMulticastSocketBinding.bind(ManagedMulticastSocketBinding.java:78)
	at java.net.MulticastSocket.<init>(MulticastSocket.java:172)
	at org.jboss.as.network.ManagedMulticastSocketBinding.<init>(ManagedMulticastSocketBinding.java:54)
	at org.jboss.as.network.ManagedMulticastSocketBinding.create(ManagedMulticastSocketBinding.java:40)
	at org.jboss.as.network.SocketBindingManagerImpl.createMulticastSocket(SocketBindingManagerImpl.java:82)
	at org.jboss.as.clustering.jgroups.ManagedSocketFactoryNew.createMulticastSocket(ManagedSocketFactoryNew.java:127)
	at org.jgroups.util.Util.createMulticastSocket(Util.java:3089)
	at org.jgroups.protocols.MPING.start(MPING.java:190)
	at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)
	at org.jgroups.JChannel.startStack(JChannel.java:890)
	at org.jgroups.JChannel._preConnect(JChannel.java:553)
	at org.jgroups.JChannel.connect(JChannel.java:288)
	at org.jgroups.JChannel.connect(JChannel.java:279)
	at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)
{noformat}

This is because the MulticastSocket and DatagramSocket constructors call bind(...), but the ManagedBindingRegistry is not yet set.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1268185,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1145,,,,,,0.0,9.0,,1|hzyu4f:,9223372036854775807,Merged.,,,,,,,,,,23/Oct/15 10:30 PM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from NEW to MODIFIED,24/Oct/15 1:48 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to POST,27/Oct/15 9:18 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from POST to MODIFIED,30/Oct/15 2:30 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from MODIFIED to ON_QA,03/Nov/15 8:16 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to ASSIGNED,04/Nov/15 11:13 AM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to ON_QA,05/Nov/15 2:25 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ON_QA to VERIFIED,13/Dec/15 8:23 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from VERIFIED to ASSIGNED,13/Dec/15 8:24 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1268185|https://bugzilla.redhat.com/show_bug.cgi?id=1268185] from ASSIGNED to VERIFIED,,,,,,,,,,,,,,,,,,
"PS1 scripts invocation ends with ""cannot be loaded because running scripts is disabled on thi s system"", affect MS Windows desktop series",WFCORE-1031,12586999,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ctomc,rsvoboda,rsvoboda,02/Oct/15 5:00 AM,02/Oct/15 5:00 AM,29/Nov/16 3:53 PM,,,,,,,,,,Scripts,,,,,0,,,,,,"PS1 scripts invocation ends with ""cannot be loaded because running scripts is disabled on thi s system"".
This was spotted on Windows 10 but it seems it affect more MS Windows desktop series (at leas 8.x too) - based on HiChat discussion.

When I open PowerShel, enter the bin folder and run .\standalone.ps1 I get this:
{code}
.\standalone.ps1 : File E:\jboss-eap-7.0\bin\standalone.ps1 cannot be loaded because running scripts is disabled on this s system. 
For more information, see about_Execution_Policies at http://go.microsoft.com/fwlink/?LinkID=135170.
At line:1 char:1
+ .\standalone.ps1
+ ~~~~~~~~~~~~~~~~
+ CategoryInfo : SecurityError: (:) [], PSSecurityException
+ FullyQualifiedErrorId : UnauthorizedAccess
{code}

what ""helped"" is this:
Set-ExecutionPolicy RemoteSigned
but I had to run powershell as administrator because it's changing registry key ... so well, not straightforward usage of ps1 scripts ... Not everybody is able to run in admin mode. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzyt13:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PS1 scripts for standalone and domain do not survive :shutdown(restart=true),WFCORE-1030,12586990,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,rsvoboda,rsvoboda,02/Oct/15 4:18 AM,07/Oct/15 3:49 PM,29/Nov/16 3:53 PM,07/Oct/15 3:49 PM,,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"PS1 scripts for standalone and domain do not survive :shutdown(restart=true) 
{code}
[standalone@localhost:9990 /] :shutdown(restart=true)
{""outcome"" => ""success""}
[standalone@localhost:9990 /] ls
Failed to perform operation: java.net.ConnectException: WFLYPRT0053: Could not connect to http-remoting://localhost:9990. 
  The connection failed: WFLYPRT0053: Could not connect to http-remoting://localhost:9990. 
  The connection failed: Connection refused: no further information
{code}
Domain the same
{code}
[domain@localhost:9990 /] /host=master:shutdown(restart=true)
...
{code}
FYI - scripts were taken from https://github.com/ctomc/wildfly-core/commits/powershell",,,,,,,,,,,,,,,,JBEAP-1207,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1118,,,,,,0.0,0.0,,1|hzysz3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagedSocketFactory doesn't work for client sockets,WFCORE-1029,12586966,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,dereed,dereed,01/Oct/15 11:29 PM,18/Mar/16 1:49 PM,29/Nov/16 3:53 PM,18/Mar/16 1:49 PM,2.0.0.CR5,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"SocketBindingManagerImpl does not work with client sockets.

It adds sockets to a map based on local address.  Client sockets that have not been bound yet do not have a local address.

This breaks the JGroups subsystem's ManagedSocketFactory, which uses SocketBindingManagerImpl for both server and client sockets.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1268186,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1242,,,,,,0.0,5.0,,1|hzysuv:,9223372036854775807,,,,,,,,,,,"22/Oct/15 10:54 AM;pferraro;I'm pretty sure this is a duplicate of WFCORE-1033, which was already fixed.  There was no component set for this jira, so nobody owns it currently.  I'm assigning to Brian.","22/Oct/15 10:31 PM;dereed;The exception being triggered is:
java.lang.IllegalStateException
    at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.registerBinding(SocketBindingManagerImpl.java:471)
    at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.registerSocket(SocketBindingManagermpl.java:496)
    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.register(ManagedSocketFactory.java:77)
    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.createSocket(ManagedSocketFactory.java:53)

The PR for WFLY-5449 removes the registerSocket call from ManagedSocketFactory, so this is no longer an issue for that use case.  WFCORE-1033 registers the socket in a different spot, and skips the call if it's not bound, resolving this.

Unless .SocketBindingManagerImpl$UnnamedRegistryImpl registry is called from elsewhere in a similar way with unbound sockets, I consider this resolved.
",22/Oct/15 10:36 PM;jira-bugzilla-migration;dereed@redhat.com changed the Status of [bug 1268186|https://bugzilla.redhat.com/show_bug.cgi?id=1268186] from NEW to CLOSED,"23/Oct/15 10:06 AM;brian.stansberry;I'll keep this open because at a minimum UnnamedBindingRegistry should have javadoc declaring that the sockets and channels passed into the various register methods must be bound. Using something other than InetSocketAddress as the map key may be fine too. The basic goal here is to record all the sockets the server is opening so we can provide a comprehensive management view, so forcing people to bind before registering just gets in the way of them using the registry and may cause them to skip it. The main criteria should be ""only register something you intend to bind.""","11/Nov/15 3:28 PM;brian.stansberry;I've linked a PR that moves away from using InetSocketAddress as the map key, eliminating the need for sockets to be bound when registration/deregistration occurs.",,,,,,,,,,,,,,,,,,,,,,
Poor handling of invalid roles,WFCORE-1028,12586955,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,01/Oct/15 3:12 PM,16/Apr/16 7:14 AM,29/Nov/16 3:53 PM,16/Apr/16 7:14 AM,2.0.0.CR5,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"A CLI request with an invalid value in the ""roles"" header results in improper behavior:

{code}
[domain@localhost:9990 /] /host=*:read-resource{roles=slave-monitor}
{
    ""outcome"" => ""failed"",
    ""result"" => [],
    ""rolled-back"" => true
}
{code}

The op should fail because the role doesn't exist, but there is no failure-description.

The following is dumped in the HC log:

{code}
[Host Controller] 12:22:12,314 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""resolve"") failed - address: ([]): java.lang.IllegalArgumentException: WFLYCTL0327: Unknown role 'slave-monitor'
[Host Controller] 	at org.jboss.as.controller.access.rbac.StandardRoleMapper.canRunAs(StandardRoleMapper.java:95)
[Host Controller] 	at org.jboss.as.controller.access.rbac.RunAsRoleMapper.mapRoles(RunAsRoleMapper.java:143)
[Host Controller] 	at org.jboss.as.controller.access.rbac.RunAsRoleMapper.mapRoles(RunAsRoleMapper.java:71)
[Host Controller] 	at org.jboss.as.controller.access.rbac.DefaultPermissionFactory.getUserPermissions(DefaultPermissionFactory.java:109)
[Host Controller] 	at org.jboss.as.controller.access.permission.ManagementPermissionAuthorizer.authorize(ManagementPermissionAuthorizer.java:91)
[Host Controller] 	at org.jboss.as.controller.access.management.DelegatingConfigurableAuthorizer.authorize(DelegatingConfigurableAuthorizer.java:99)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.getBasicAuthorizationResponse(OperationContextImpl.java:1753)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.authorize(OperationContextImpl.java:1651)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResourceFromRoot(OperationContextImpl.java:833)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResource(OperationContextImpl.java:818)
[Host Controller] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver.execute(GlobalOperationHandlers.java:402)
[Host Controller] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver.execute(GlobalOperationHandlers.java:306)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:391)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)
[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)
[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)
[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)
[Host Controller] 	at java.security.AccessController.doPrivileged(Native Method)
[Host Controller] 	at javax.security.auth.Subject.doAs(Subject.java:422)
[Host Controller] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Host Controller] 	at java.lang.Thread.run(Thread.java:745)
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1319,,,,,,0.0,0.0,,1|hzyssn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent read-resource results with host scoped roles,WFCORE-1027,12586948,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,01/Oct/15 2:16 PM,06/Oct/15 12:00 PM,29/Nov/16 3:53 PM,06/Oct/15 12:00 PM,2.0.0.CR5,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"Setting up host scoped roles as follows https://gist.github.com/heiko-braun/0dc810ed04db8739defd there are inconsistent results in the filtering. When using a role which only selects the master there is no access-control response header showing the filtered resources, and the slave wrongly appears in the results:
{code}
[domain@localhost:9990 /] /host=*:read-resource{roles=master-monitor}
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [(""host"" => ""master"")],
            ""outcome"" => ""success"",
            ""result"" => {
                ""directory-grouping"" => ""by-server"",
                ""domain-controller"" => {""local"" => {}},
                ""management-major-version"" => 4,
                ""management-micro-version"" => 0,
                ""management-minor-version"" => 0,
                ""master"" => true,
                ""name"" => ""master"",
                ""namespaces"" => [],
                ""organization"" => undefined,
                ""product-name"" => ""WildFly Core"",
                ""product-version"" => ""2.0.0.CR6-SNAPSHOT"",
                ""release-codename"" => ""Kenny"",
                ""release-version"" => ""2.0.0.CR6-SNAPSHOT"",
                ""schema-locations"" => [],
                ""core-service"" => {
                    ""host-environment"" => undefined,
                    ""platform-mbean"" => undefined,
                    ""management"" => undefined,
                    ""discovery-options"" => undefined,
                    ""ignored-resources"" => undefined,
                    ""patching"" => undefined,
                    ""module-loading"" => undefined
                },
                ""extension"" => {""org.jboss.as.jmx"" => undefined},
                ""interface"" => {
                    ""management"" => undefined,
                    ""public"" => undefined,
                    ""unsecure"" => undefined
                },
                ""jvm"" => {""default"" => undefined},
                ""path"" => undefined,
                ""server"" => {
                    ""server-one"" => undefined,
                    ""server-two"" => undefined,
                    ""server-three"" => undefined
                },
                ""server-config"" => {
                    ""server-one"" => undefined,
                    ""server-two"" => undefined,
                    ""server-three"" => undefined
                },
                ""socket-binding-group"" => undefined,
                ""subsystem"" => {""jmx"" => undefined},
                ""system-property"" => undefined
            }
        },
        {
            ""address"" => [(""host"" => ""localhost"")],
            ""outcome"" => ""success"",
            ""result"" => undefined
        }
    ]
}
{code}

When using a role that only selects the slave we get a proper access-control header
{code}
[domain@localhost:9990 /] /host=*:read-resource{roles=slave-maintainer}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [(""host"" => ""localhost"")],
        ""outcome"" => ""success"",
        ""result"" => undefined
    }],
    ""response-headers"" => {""access-control"" => [{
        ""absolute-address"" => [],
        ""relative-address"" => [],
        ""filtered-children-types"" => [""host""]
    }]}
{code}
The same output on master with WFCORE-994 applied:
{code}
[domain@localhost:9990 /] /host=*:read-resource{roles=slave-maintainer}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [(""host"" => ""slave"")],
        ""outcome"" => ""success"",
        ""result"" => {
            ""directory-grouping"" => ""by-server"",
            ""domain-controller"" => {""remote"" => {
                ""protocol"" => undefined,
                ""port"" => undefined,
                ""host"" => undefined,
                ""username"" => undefined,
                ""ignore-unused-configuration"" => undefined,
                ""admin-only-policy"" => undefined,
                ""security-realm"" => ""ManagementRealm""
            }},
            ""management-major-version"" => 4,
            ""management-micro-version"" => 0,
            ""management-minor-version"" => 0,
            ""master"" => false,
            ""name"" => ""slave"",
            ""namespaces"" => [],
            ""organization"" => undefined,
            ""product-name"" => undefined,
            ""product-version"" => undefined,
            ""release-codename"" => ""Kenny"",
            ""release-version"" => ""2.0.0.CR6-SNAPSHOT"",
            ""schema-locations"" => [],
            ""core-service"" => {
                ""host-environment"" => undefined,
                ""platform-mbean"" => undefined,
                ""management"" => undefined,
                ""discovery-options"" => undefined,
                ""ignored-resources"" => undefined,
                ""patching"" => undefined,
                ""module-loading"" => undefined
            },
            ""extension"" => {""org.jboss.as.jmx"" => undefined},
            ""interface"" => {
                ""management"" => undefined,
                ""public"" => undefined,
                ""unsecure"" => undefined
            },
            ""jvm"" => {""default"" => undefined},
            ""path"" => undefined,
            ""server"" => {
                ""server-one"" => undefined,
                ""server-two"" => undefined
            },
            ""server-config"" => {
                ""server-one"" => undefined,
                ""server-two"" => undefined
            },
            ""socket-binding-group"" => undefined,
            ""subsystem"" => {""jmx"" => undefined},
            ""system-property"" => undefined
        }
    }],
    ""response-headers"" => {""access-control"" => [{
        ""absolute-address"" => [],
        ""relative-address"" => [],
        ""filtered-children-types"" => [""host""]
    }]}
}
{code}
master-monitor should behave the same as slave-maintainer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1122,,,,,,0.0,0.0,,1|hzysr3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagementRequestContext executeAsync hides RejectedExecutionException,WFCORE-1025,12586884,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,01/Oct/15 11:37 AM,04/Oct/15 11:33 AM,29/Nov/16 3:53 PM,04/Oct/15 11:33 AM,2.0.0.CR5,,,,,,2.0.0.CR6,,Domain Management,,,,,0,,,,,,"The impl of ManagementRequestContext executeAsync catches RejectedExecutionException and doesn't notify the calling thread. The handling itself seems ok (call failed on the result handler and send a failure response to the client), but not notifying the caller is problematic. There are a number of cases where the caller thread waits for a latch to be tripped, with the async task tripping. If the latch never trips, the caller thread will block forever. The testsuite hang at http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=71233&buildTypeId=WildFlyCore_MasterLinux&tab=buildLog#_focus=13620 looks to be a case of this, with a server not stopping due to this:

{code}

""Remoting ""master:main-one:MANAGEMENT"" task-13"" #55 prio=5 os_prio=0 tid=0xc6c3bc00 nid=0x19d9 waiting on condition [0xc215c000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xddbb4aa0> (a java.util.concurrent.CountDownLatch$Sync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.sendResponse(TransactionalProtocolOperationHandler.java:540)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.failed(TransactionalProtocolOperationHandler.java:377)
	- locked <0xddbb2300> (a org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext)
	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl$2.handleFailed(ActiveOperationSupport.java:350)
	at org.jboss.threads.AsyncFutureTask$Reg.run(AsyncFutureTask.java:60)
	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$1.execute(ActiveOperationSupport.java:55)
	at org.jboss.threads.AsyncFutureTask.safeExecute(AsyncFutureTask.java:169)
	at org.jboss.threads.AsyncFutureTask.setFailed(AsyncFutureTask.java:162)
	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl.access$400(ActiveOperationSupport.java:295)
	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl$1.failed(ActiveOperationSupport.java:315)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2.executeAsync(AbstractMessageHandler.java:333)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2.executeAsync(AbstractMessageHandler.java:315)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.handleRequest(TransactionalProtocolOperationHandler.java:144)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:270)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:252)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:123)
	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver$1.handleMessage(ManagementChannelReceiver.java:56)
	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)
	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:463)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

The RejectedExecutionException indicates a thread pool has been shutdown before the response has gone out. Ideally we would prevent that (for which I've recently filed a JIRA) but in any case we should make this more robust.

I think having executeAsync return a boolean should suffice.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1141,,,,,,0.0,0.0,,1|hzysi7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JUnit version mismatch,WFCORE-1024,12586798,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ctomc,jcacek,jcacek,01/Oct/15 5:48 AM,02/Oct/15 6:34 AM,29/Nov/16 3:53 PM,02/Oct/15 6:34 AM,2.0.0.CR5,,,,,,2.0.0.CR6,,Test Suite,,,,,0,,,,,,"JUnit dependency defined in WildFly Core is {{4.11}}, but current WildFly-Arquillian version depends on version {{4.12}}. It can lead to API incompatibilities and also project compilation problems (as was for instance in the [PR 8200|https://github.com/wildfly/wildfly/pull/8200#issuecomment-143217516])

From my PoV is the best solution upgrade JUnit version in WF-CORE or exclude the junit:junit from the wildfly-core dependency.",,,,,,,,,,,,,,,,JBEAP-1194,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1136,,,,,,0.0,0.0,,1|hzyrzz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Xml files from wildfly-core don't end with ""new line character""",WFCORE-1021,12586557,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,30/Sep/15 4:17 AM,16/Oct/15 5:53 AM,29/Nov/16 3:53 PM,16/Oct/15 5:53 AM,2.0.0.CR5,,,,,,2.0.0.CR7,,Server,,,,,0,,,,,,"*Description of problem:*
* Some of xml files from *wildfly-core* don't end with ""new line character"".
* Each xml file should end with ""new line character"", because of posix standard:
** http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_206
* List of affected files:
** ./modules/system/layers/base/org/wildfly/security/elytron/main/module.xml
** ./domain/configuration/host.xml
** ./domain/configuration/domain.xml
** ./domain/configuration/host-slave.xml
** ./domain/configuration/host-master.xml
** ./standalone/configuration/standalone.xml

*How reproducible:*
Always

*Steps to Reproduce:*
# cd EAP_HOME
# {noformat}
for xml in `find -type f | grep xml$`; do
if [ ""`cat -E $xml | tail -n 1 |grep -o '.$'`"" != ""$"" ] ; then
echo $xml
fi
done
{noformat}",,,,,,,,,,,,,,,,JBEAP-1180,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1152,https://github.com/wildfly/wildfly-build-tools/pull/23,,,,,0.0,0.0,,1|hzyqsv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in GlobalAddressHandlers,WFCORE-1020,12586528,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,29/Sep/15 4:36 PM,02/Oct/15 11:49 AM,29/Nov/16 3:53 PM,02/Oct/15 11:49 AM,1.0.0.Final,1.0.1.Final,2.0.0.CR5,,,,2.0.0.CR6,,Domain Management,,,,,0,,,,,,"I've seen stack traces like the following pop up in testsuite logs:

{code}
2015-09-29 08:11:50,515 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 88) WFLYCTL0190: Step handler org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver$4@b4ea88 for operation {""operation"" => ""read-resource"",""address"" => [(""host"" => ""slave""),(""server"" => ""main-three"")],""operation-headers"" => {""caller-type"" => ""user"",""access-mechanism"" => ""NATIVE"",""domain-uuid"" => ""5352863e-b467-4d70-b0b1-fa640cc022a1""}} at address [
    (""host"" => ""slave""),
    (""server"" => ""main-three"")
] failed handling operation rollback -- java.lang.NullPointerException: java.lang.NullPointerException
	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver$4$1.handleResult(GlobalOperationHandlers.java:708)
	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311)
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)
	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)
	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:391)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:233)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:173)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:360)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

There's a call to ModelNode.remove(""access-control"") and then the return value is dereferenced without a null check. The ""remove"" method may return null.",,,,,,,,,,,,WFCORE-282,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1128,,,,,,0.0,0.0,,1|hzyqmn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PeriodicSizeRotatingFileHandler's are always replaced during boot,WFCORE-1018,12586318,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,28/Sep/15 1:02 PM,27/Sep/16 5:13 AM,29/Nov/16 3:53 PM,29/Sep/15 12:12 PM,,,,,,,2.0.0.CR6,,Logging,,,,,0,,,,,,A {{periodic-size-rotating-file-handler}} will be replaced during the subsystem add operation. This could be an issue with {{async-handler}}'s where the handler may see the old handler that was closed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1127,,,,,,0.0,2.0,,1|hzyp9r:,9223372036854775807,,,,,,,,,,,23/Sep/16 10:50 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1266360|https://bugzilla.redhat.com/show_bug.cgi?id=1266360] from MODIFIED to ON_QA,27/Sep/16 5:13 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1266360|https://bugzilla.redhat.com/show_bug.cgi?id=1266360] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,,,
Reload operation causes crash of EAP server,WFCORE-1017,12585338,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce,ctomc,eduda,eduda,18/Sep/15 5:03 AM,13/Nov/15 9:43 AM,29/Nov/16 3:53 PM,13/Nov/15 9:43 AM,2.0.0.CR1,,,,,,2.0.1.Final,,Domain Management,,,,,0,,,,,,"Repeated execution of reload request causes EAP server crash.

{panel}
10:43:15,179 ERROR [org.jboss.msc.service] (MSC service thread 1-4) MSC000002: Invocation of listener ""org.jboss.as.controller.operations.common.ProcessReloadHandler$1$1$1@3d119a3c"" failed: java.lang.IllegalArgumentException: Container is shutting down
        at org.jboss.msc.service.ServiceControllerImpl.internalSetMode(ServiceControllerImpl.java:762) [jboss-msc-1.2.6.Final.jar:1.2.6.Final]
        at org.jboss.msc.service.ServiceControllerImpl.setMode(ServiceControllerImpl.java:753) [jboss-msc-1.2.6.Final.jar:1.2.6.Final]
        at org.jboss.as.controller.operations.common.ProcessReloadHandler$1$1$1.transition(ProcessReloadHandler.java:90) [wildfly-controller-2.0.0.Beta4.jar:2.0.0.Beta4]
        at org.jboss.msc.service.ServiceControllerImpl.invokeListener(ServiceControllerImpl.java:1533) [jboss-msc-1.2.6.Final.jar:1.2.6.Final]
        at org.jboss.msc.service.ServiceControllerImpl.access$2800(ServiceControllerImpl.java:51) [jboss-msc-1.2.6.Final.jar:1.2.6.Final]
        at org.jboss.msc.service.ServiceControllerImpl$ListenerTask.run(ServiceControllerImpl.java:2099) [jboss-msc-1.2.6.Final.jar:1.2.6.Final]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_60]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_60]
        at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_60]
{panel}

On IBM Java reload resquests cause even JVM crash.

{panel}
#0: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x8a455f) [0x7f44cce6055f]
#1: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x1042f1) [0x7f44cc6c02f1]
#2: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x255ee) [0x7f44d8b515ee]
#3: /lib64/libpthread.so.0(+0x10430) [0x7f44dafd9430]
#4: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x74909e) [0x7f44ccd0509e]
#5: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x749372) [0x7f44ccd05372]
#6: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x437922) [0x7f44cc9f3922]
#7: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x4385bb) [0x7f44cc9f45bb]
#8: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x448e10) [0x7f44cca04e10]
#9: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x449855) [0x7f44cca05855]
#10: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44dd5d) [0x7f44cca09d5d]
#11: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44eb3e) [0x7f44cca0ab3e]
#12: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44dc40) [0x7f44cca09c40]
#13: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44eb3e) [0x7f44cca0ab3e]
#14: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44dc40) [0x7f44cca09c40]
#15: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44eb3e) [0x7f44cca0ab3e]
#16: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44ec75) [0x7f44cca0ac75]
#17: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44effb) [0x7f44cca0affb]
#18: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cd94d) [0x7f44cc88994d]
#19: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cdc19) [0x7f44cc889c19]
#20: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cee94) [0x7f44cc88ae94]
#21: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x7c748b) [0x7f44ccd8348b]
#22: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x7cee4c) [0x7f44ccd8ae4c]
#23: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10c7b5) [0x7f44cc6c87b5]
#24: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10dcab) [0x7f44cc6c9cab]
#25: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x25975) [0x7f44d8b51975]
#26: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10fdf0) [0x7f44cc6cbdf0]
#27: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x1110ed) [0x7f44cc6cd0ed]
#28: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x25975) [0x7f44d8b51975]
#29: /opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x111a04) [0x7f44cc6cda04]
Unhandled exception
Type=Segmentation error vmState=0x00051cff
J9Generic_Signal_Number=00000004 Signal_Number=0000000b Error_Value=00000000 Signal_Code=00000001
Handler1=00007F44D920CD90 Handler2=00007F44D8B513F0 InaccessibleAddress=0000000000000000
RDI=00007F440613D710 RSI=FFFFFFFFFFDF3B65 RAX=0000000000000000 RBX=00007F4406141390
RCX=0000000000000026 RDX=0000000000000001 R8=00007F44CCF4EA52 R9=0000000000000000
R10=00007F4406145740 R11=0000000000000003 R12=00007F44076AEF00 R13=0000000000000000
R14=0000000000000000 R15=0000000000000000
RIP=00007F44CCD0509E GS=0000 FS=0000 RSP=00007F44C9A84C20
EFlags=0000000000210246 CS=0033 RBP=0000000000000000 ERR=0000000000000004
TRAPNO=000000000000000E OLDMASK=0000000000000000 CR2=0000000000000000
xmm0 00007f44003b6e6f (f: 3894895,000000, d: 6,913462e-310)
xmm1 0000000000000000 (f: 0,000000, d: 0,000000e+00)
xmm2 616c2f6176616a4c (f: 1986095744,000000, d: 1,981285e+161)
xmm3 6a00656c62617468 (f: 1650553984,000000, d: 4,016150e+202)
xmm4 0000000000000000 (f: 0,000000, d: 0,000000e+00)
xmm5 03d303d203d103d0 (f: 64029648,000000, d: 3,048729e-290)
xmm6 49676e697274532f (f: 1920226048,000000, d: 4,180283e+45)
xmm7 4573646e756f4266 (f: 1970225792,000000, d: 3,751018e+26)
xmm8 03d603d503d403d3 (f: 64226260,000000, d: 3,529736e-290)
xmm9 03de03dd03dc03db (f: 64750556,000000, d: 4,812424e-290)
xmm10 03e603e503e403e3 (f: 65274852,000000, d: 7,059551e-290)
xmm11 03ee03ed03ec03eb (f: 65799148,000000, d: 9,624926e-290)
xmm12 03f603f503f403f3 (f: 66323444,000000, d: 1,411926e-289)
xmm13 03fe03fd03fc03fb (f: 66847740,000000, d: 1,925001e-289)
xmm14 0406040504040403 (f: 67372032,000000, d: 2,823883e-289)
xmm15 040e040d040c040b (f: 67896328,000000, d: 3,850033e-289)
Module=/opt/ibm/java-x86_64-80/jre/lib/amd64/compressedrefs/libj9jit28.so
Module_base_address=00007F44CC5BC000

Method_being_compiled=org/jboss/as/controller/OperationContextImpl$ContextServiceBuilder.install()Lorg/jboss/msc/service/ServiceController;
Target=2_80_20150630_255633 (Linux 4.1.6-201.fc22.x86_64)
CPU=amd64 (8 logical CPUs) (0x3d3def000 RAM)
----------- Stack Backtrace -----------
(0x00007F44CCD0509E [libj9jit28.so+0x74909e])
(0x00007F44CCD05372 [libj9jit28.so+0x749372])
(0x00007F44CC9F3922 [libj9jit28.so+0x437922])
(0x00007F44CC9F45BB [libj9jit28.so+0x4385bb])
(0x00007F44CCA04E10 [libj9jit28.so+0x448e10])
(0x00007F44CCA05855 [libj9jit28.so+0x449855])
(0x00007F44CCA09D5D [libj9jit28.so+0x44dd5d])
(0x00007F44CCA0AB3E [libj9jit28.so+0x44eb3e])
(0x00007F44CCA09C40 [libj9jit28.so+0x44dc40])
(0x00007F44CCA0AB3E [libj9jit28.so+0x44eb3e])
(0x00007F44CCA09C40 [libj9jit28.so+0x44dc40])
(0x00007F44CCA0AB3E [libj9jit28.so+0x44eb3e])
(0x00007F44CCA0AC75 [libj9jit28.so+0x44ec75])
(0x00007F44CCA0AFFB [libj9jit28.so+0x44effb])
(0x00007F44CC88994D [libj9jit28.so+0x2cd94d])
(0x00007F44CC889C19 [libj9jit28.so+0x2cdc19])
(0x00007F44CC88AE94 [libj9jit28.so+0x2cee94])
(0x00007F44CCD8348B [libj9jit28.so+0x7c748b])
(0x00007F44CCD8AE4C [libj9jit28.so+0x7cee4c])
(0x00007F44CC6C87B5 [libj9jit28.so+0x10c7b5])
(0x00007F44CC6C9CAB [libj9jit28.so+0x10dcab])
(0x00007F44D8B51975 [libj9prt28.so+0x25975])
(0x00007F44CC6CBDF0 [libj9jit28.so+0x10fdf0])
(0x00007F44CC6CD0ED [libj9jit28.so+0x1110ed])
(0x00007F44D8B51975 [libj9prt28.so+0x25975])
(0x00007F44CC6CDA04 [libj9jit28.so+0x111a04])
(0x00007F44D8F8E9EC [libj9thr28.so+0x99ec])
(0x00007F44DAFD0555 [libpthread.so.0+0x7555])
clone+0x6d (0x00007F44DA8F0B9D [libc.so.6+0x102b9d])
{panel}","Fedora 22, RHEL 7 ++ OpenJDK 8 - crash of EAP server

Fedora 22, RHEL 7 ++ IBM Java 1.8 - crash of JVM where runs the EAP server

{panel}
$ java -version
java version ""1.8.0""
Java(TM) SE Runtime Environment (build pxa6480sr1fp10-20150711_01(SR1 FP10))
IBM J9 VM (build 2.8, JRE 1.8.0 Linux amd64-64 Compressed References 20150630_255633 (JIT enabled, AOT enabled)
J9VM - R28_jvm.28_20150630_1742_B255633
JIT  - tr.r14.java_20150625_95081.01
GC   - R28_jvm.28_20150630_1742_B255633_CMPRSS
J9CL - 20150630_255633)
JCL - 20150711_01 based on Oracle jdk8u51-b15
{panel}",,,,,,,,,,,,,,,JBEAP-1100,,,,,,,,,,,18/Sep/15 5:03 AM;eduda;Snap.20150917.161241.19157.0003.trc;https://issues.jboss.org/secure/attachment/12392934/Snap.20150917.161241.19157.0003.trc,18/Sep/15 5:03 AM;eduda;javacore.20150917.161241.19157.0002.txt;https://issues.jboss.org/secure/attachment/12392932/javacore.20150917.161241.19157.0002.txt,02/Nov/15 6:30 AM;mnovak;log;https://issues.jboss.org/secure/attachment/12394590/log,18/Sep/15 5:03 AM;eduda;server-openjdk.log;https://issues.jboss.org/secure/attachment/12392933/server-openjdk.log,02/Nov/15 6:30 AM;mnovak;server.log;https://issues.jboss.org/secure/attachment/12394589/server.log,,,,,,,,,,,,,,+,,,,,,,,,,,,,5.0,5.0,,1|hzyjpb:,9223372036854775807,,,,"Configuration:
1 server with default standalone-full-ha.xml configuration
Client which repeatedly sends reload command to the server.

{code:java}
for (int i = 0; i < 100; i++) {
    CLI cli = CLI.newInstance();
    cli.connect(cliConf.getHost(), cliConf.getPort(), cliConf.getUser(), cliConf.getPassword());
    cli.cmd(""reload"");
    cli.disconnect();
    Assert.assertTrue(CheckServerAvailableUtils.waitHornetQToAlive(cliConf.getHost(), cliConf.getPort(), 15000));
}
{code}",,,,,,,"28/Sep/15 12:41 PM;brian.stansberry;Please attach a reproducer, including source code.

The attached server-openjdk.log indicates that something has triggered the shutdown hook that stops the server in response to signals:

{code}
10:43:15,140 INFO  [org.jboss.as.server] (Thread-3) WFLYSRV0220: Server shutdown has been requested.
{code}","30/Oct/15 6:50 AM;ctomc;I think something is fishy with method CheckServerAvailableUtils#waitHornetQToAlive
as if i change that with 

{code:java}
 private void waitForLiveServerToReload(long timeout) throws Exception {
        long start = System.currentTimeMillis();
        ModelNode operation = new ModelNode();
        operation.get(OP_ADDR).setEmptyList();
        operation.get(OP).set(READ_ATTRIBUTE_OPERATION);
        operation.get(NAME).set(""server-state"");
        while (System.currentTimeMillis() - start < timeout) {
            ModelControllerClient liveClient = TestSuiteEnvironment.getModelControllerClient();
            try {
                ModelNode result = liveClient.execute(operation);
                if (""running"".equals(result.get(RESULT).asString())) {
                    return;
                }
            } catch (IOException e) {
                logger.infof(e, ""error"");
            } finally {
                IoUtils.safeClose(liveClient);
            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
            }
        }
        fail(""Live Server did not reload in the imparted time."");
    }

{code}

I cannot reproduce the problem anymore. see for example https://github.com/ctomc/wildfly-core/commit/4bb71cec0e27c24ce26151f61b945a5fbc0dace6
or https://github.com/ctomc/wildfly/commit/8b0532a51e8af8c3d7953f122743d86dc42a8199 
two different approaches, both work.

Also relevant part of code is this:
{code:java}
 public static ModelControllerClient getModelControllerClient() {
        try {
            return ModelControllerClient.Factory.create(
                    InetAddress.getByName(getServerAddress()),
                    TestSuiteEnvironment.getServerPort(),
                    Authentication.getCallbackHandler()
                    );
        } catch (UnknownHostException e) {
            throw new RuntimeException(e);
        }
    }

{code}","02/Nov/15 6:29 AM;mnovak;[~ctomc] Hi Tomaz, Erich is not here this week and ask me to try instead of him. I've tried to run the test waitForLiveServerToReload() method from your comment and used instead of waitHornetQToAlive() in CoreBridgeAttributesTestCase#reloadServerTest test.

On IBM JDK 1.8 with RHEL7 (or my Fedora 22) the JVM is still crashing. I'll attach log from the test and server.log.","02/Nov/15 6:34 AM;mnovak;In attached test log (""log"" file) there are some JVM core dumps:
{code}#0: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x8a455f) [0x7f30c94b355f]
#1: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x1042f1) [0x7f30c8d132f1]
#2: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x255ee) [0x7f30d54965ee]
#3: /lib64/libpthread.so.0(+0x10430) [0x7f30d791e430]
#4: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x74909e) [0x7f30c935809e]
#5: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x749372) [0x7f30c9358372]
#6: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x437922) [0x7f30c9046922]
#7: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x4382ab) [0x7f30c90472ab]
#8: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x448e10) [0x7f30c9057e10]
#9: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x449855) [0x7f30c9058855]
#10: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44dd5d) [0x7f30c905cd5d]
#11: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44eb3e) [0x7f30c905db3e]
#12: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44dc40) [0x7f30c905cc40]
#13: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44eb3e) [0x7f30c905db3e]
#14: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44ec75) [0x7f30c905dc75]
#15: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x44effb) [0x7f30c905dffb]
#16: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cd94d) [0x7f30c8edc94d]
#17: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cdc19) [0x7f30c8edcc19]
#18: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x2cee94) [0x7f30c8edde94]
#19: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x7c748b) [0x7f30c93d648b]
#20: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x7cee4c) [0x7f30c93dde4c]
#21: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10c7b5) [0x7f30c8d1b7b5]
#22: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10dcab) [0x7f30c8d1ccab]
#23: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x25975) [0x7f30d5496975]
#24: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x10fdf0) [0x7f30c8d1edf0]
#25: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x1110ed) [0x7f30c8d200ed]
#26: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9prt28.so(+0x25975) [0x7f30d5496975]
#27: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9jit28.so(+0x111a04) [0x7f30c8d20a04]
#28: /home/mnovak/Downloads/ibm-java-x86_64-80_2015_07_28/jre/lib/amd64/compressedrefs/libj9thr28.so(+0x99ec) [0x7f30d58d39ec]
#29: /lib64/libpthread.so.0(+0x7555) [0x7f30d7915555]
Unhandled exception
Type=Segmentation error vmState=0x00051cff
J9Generic_Signal_Number=00000004 Signal_Number=0000000b Error_Value=00000000 Signal_Code=00000001
Handler1=00007F30D5B51D90 Handler2=00007F30D54963F0 InaccessibleAddress=0000000000000000
RDI=00007F30333C8390 RSI=FFFFFFFFFFDF3B65 RAX=0000000000000000 RBX=00007F30333CCC40
...
Method_being_compiled=org/jboss/as/controller/OperationContextImpl$ContextServiceBuilder.install()Lorg/jboss/msc/service/ServiceController;
Target=2_80_20150630_255633 (Linux 4.2.3-200.fc22.x86_64)
CPU=amd64 (4 logical CPUs) (0x1e0549000 RAM)
----------- Stack Backtrace -----------
(0x00007F30C935809E [libj9jit28.so+0x74909e])
(0x00007F30C9358372 [libj9jit28.so+0x749372])
(0x00007F30C9046922 [libj9jit28.so+0x437922])
(0x00007F30C90472AB [libj9jit28.so+0x4382ab])
(0x00007F30C9057E10 [libj9jit28.so+0x448e10])
(0x00007F30C9058855 [libj9jit28.so+0x449855])
(0x00007F30C905CD5D [libj9jit28.so+0x44dd5d])
(0x00007F30C905DB3E [libj9jit28.so+0x44eb3e])
(0x00007F30C905CC40 [libj9jit28.so+0x44dc40])
(0x00007F30C905DB3E [libj9jit28.so+0x44eb3e])
(0x00007F30C905DC75 [libj9jit28.so+0x44ec75])
(0x00007F30C905DFFB [libj9jit28.so+0x44effb])
(0x00007F30C8EDC94D [libj9jit28.so+0x2cd94d])
(0x00007F30C8EDCC19 [libj9jit28.so+0x2cdc19])
(0x00007F30C8EDDE94 [libj9jit28.so+0x2cee94])
(0x00007F30C93D648B [libj9jit28.so+0x7c748b])
(0x00007F30C93DDE4C [libj9jit28.so+0x7cee4c])
(0x00007F30C8D1B7B5 [libj9jit28.so+0x10c7b5])
(0x00007F30C8D1CCAB [libj9jit28.so+0x10dcab])
(0x00007F30D5496975 [libj9prt28.so+0x25975])
(0x00007F30C8D1EDF0 [libj9jit28.so+0x10fdf0])
(0x00007F30C8D200ED [libj9jit28.so+0x1110ed])
(0x00007F30D5496975 [libj9prt28.so+0x25975])
(0x00007F30C8D20A04 [libj9jit28.so+0x111a04])
(0x00007F30D58D39EC [libj9thr28.so+0x99ec])
(0x00007F30D7915555 [libpthread.so.0+0x7555])
clone+0x6d (0x00007F30D7235B9D [libc.so.6+0x102b9d])
---------------------------------------
JVMDUMP039I Processing dump event ""gpf"", detail """" at 2015/11/02 11:55:06 - please wait.
JVMDUMP032I JVM requested System dump using '/home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/core.20151102.115506.30680.0001.dmp' in response to an event
JVMPORT030W /proc/sys/kernel/core_pattern setting ""|/usr/libexec/abrt-hook-ccpp %s %c %p %u %g %t %e %P %I"" specifies that the core dump is to be piped to an external program.  Attempting to rename either core or core.31240.
...
JVMDUMP010I Java dump written to /home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/javacore.20151102.115506.30680.0002.txt
JVMDUMP032I JVM requested Snap dump using '/home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/Snap.20151102.115506.30680.0003.trc' in response to an event
JVMDUMP010I Snap dump written to /home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/Snap.20151102.115506.30680.0003.trc
JVMDUMP007I JVM Requesting JIT dump using '/home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/jitdump.20151102.115506.30680.0004.dmp'

#JITDUMP:  vmThread=0000000000AEFB00 Recursive crash occurred. Aborting JIT dump.JVMDUMP010I JIT dump written to /home/mnovak/hornetq_eap6_dev/internal/eap-tests-hornetq/jboss-hornetq-testsuite/common-tests/jitdump.20151102.115506.30680.0004.dmp
JVMDUMP013I Processed dump event ""gpf"", detail """".
{code}
","13/Nov/15 9:43 AM;ctomc;After lots of testing we found out that issue is caused by byteman agent that is installed by default by all arquillian managed tests.

Issue could be related to older version of byteman and could be fixed by just upgrading the lib.

When we remove byteman agent being installed into jvm, problem can no longer be reproduced.

I am closing this issue as it is related to specific setup of testsuite with byteman agent and not really related to wildfly code in question.",,,,,,,,,,,,,,,,,,,,,,
NPE or AssertionError if op is cancelled on slave between sending prepare and receiving commit/rollback,WFCORE-1016,12586249,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,27/Sep/15 5:35 PM,23/Oct/15 1:05 PM,29/Nov/16 3:53 PM,23/Oct/15 1:05 PM,2.0.0.CR5,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"OperationCancellationTestCase showed this failure:

{code}
2015-09-23 06:43:40,147 INFO  [org.jboss.as.test.integration.management.extension.blocker.BlockerExtension] (Host Controller Service Threads - 82) block requested by testSlaveBlockCompletionCancelSlave for slave/undefined(COMMIT)
2015-09-23 06:43:40,147 INFO  [org.jboss.as.test.integration.management.extension.blocker.BlockerExtension] (Host Controller Service Threads - 82) will block at COMMIT for 20000
2015-09-23 06:43:40,164 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 71) WFLYCTL0352: Cancelling operation 'block' with id '1900489784' running on thread 'Host Controller Service Threads - 82'
2015-09-23 06:43:40,185 ERROR [stderr] (Host Controller Service Threads - 82) Exception in thread ""Host Controller Service Threads - 82"" java.lang.AssertionError
2015-09-23 06:43:40,185 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.completed(TransactionalProtocolOperationHandler.java:475)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:190)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.security.AccessController.doPrivileged(Native Method)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at javax.security.auth.Subject.doAs(Subject.java:360)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152)
2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.security.AccessController.doPrivileged(Native Method)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.lang.Thread.run(Thread.java:745)
2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

What happens here is the slave HC executing the 'block' op has sent a prepare message to the master, and then when the commit has not come back yet the test driver triggers a cancel on the slave. At this point the thread running the 'block' op returns and tries to send the final result to the master. But it fails because the prepare logic has nulled out the responseChannel field, and the commit message has not arrived yet to restore a new one.

If assertions weren't enabled, the result would be an NPE when the null responseChannel is used.

I don't see any reason for null out the responseChannel.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1086,,,,,,0.0,1.0,,1|hzyoy7:,9223372036854775807,,,,,,,,,,,"28/Sep/15 8:47 PM;brian.stansberry;Turns out the responseChannel needs to be nulled for each request/response pair, as the client will only expect one response per request. Nulling the responseChannel is meant to ensure the server doesn't try to send > 1 response per request.

So the fix is deal with this situation where the responseChannel is null because the prepare response has been set, but then a final response is ready before the client has send the commit/rollback message.",,,,,,,,,,,,,,,,,,,,,,,,,,
jconsole Wildfly CLI tab not loading when using remote,WFCORE-1015,12586230,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,elguardian,bmaxwell,bmaxwell,25/Sep/15 7:40 PM,29/Aug/16 3:24 PM,29/Nov/16 3:53 PM,11/Aug/16 6:28 PM,,,,,,,3.0.0.Alpha5,,CLI,,,,,0,,,,,,"Issue introduced with WFLY-1548, the dialog added with WFLY-1548 is to get a connection with jconsole local process connection is used to establish a connection to the management api.  This bug is because when using remote, the init(...) is not being called with the existing CommandContext",,,,,,,,,,,,WFLY-1548,,,,,,,,,JBEAP-3563,JBEAP-5798,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1714,,,,,,0.0,0.0,,1|hzyotz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DefaultDeploymentOperations.getDeploymentsStatus doesn't consider model operation result outcome,WFCORE-1014,12586207,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aogburn,aogburn,aogburn,25/Sep/15 4:19 PM,05/Nov/15 3:22 AM,29/Nov/16 3:53 PM,25/Sep/15 10:12 PM,2.0.0.CR6,,,,,,2.0.0.CR6,,,,,,,0,,,,,,"The deployment scanner doesn't properly consider the  result outcome of its read child operation during getDeploymentsStatus().  This has bad consequences if the operation fails, for instance due to an OOME or possibly some other unexpected exception.

The operation catches the exception and returns an empty result.  The deployment scanner misinterprets that empty result to mean there are no applications deployed and sets .undeployed marker files for all of them.  The deployment scanner should confirm if the operation was a success or not so we can avoid potential side effects of undeployed applications from an OOME.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1266615,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1121,,,,,,0.0,5.0,,1|hzyopj:,9223372036854775807,,,,,,,,,,,25/Sep/15 4:55 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1266615|https://bugzilla.redhat.com/show_bug.cgi?id=1266615] from NEW to ASSIGNED,25/Sep/15 5:01 PM;jira-bugzilla-migration;Aaron Ogburn <aogburn@redhat.com> changed the Status of [bug 1266615|https://bugzilla.redhat.com/show_bug.cgi?id=1266615] from ASSIGNED to POST,23/Oct/15 11:48 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1266615|https://bugzilla.redhat.com/show_bug.cgi?id=1266615] from POST to MODIFIED,30/Oct/15 2:31 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1266615|https://bugzilla.redhat.com/show_bug.cgi?id=1266615] from MODIFIED to ON_QA,05/Nov/15 3:22 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1266615|https://bugzilla.redhat.com/show_bug.cgi?id=1266615] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Warnings about missing notification descriptions when an operation removes an extension,WFCORE-1007,12585895,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmesnil,ochaloup,ochaloup,24/Sep/15 2:45 AM,25/Sep/15 11:39 AM,29/Nov/16 3:53 PM,25/Sep/15 11:39 AM,2.0.0.CR4,,,,,,2.0.0.CR6,,Domain Management,,,,,0,,,,,,"When I use migration operation the console log is filled with warning messages of type

{{WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [(""subsystem"" => ""jacorb"")]}}

This is the same either for jacorb or web or messaging subsystem. If I do the sequence of operation
{code}
[standalone@localhost:9999 /] /subsystem=jacorb:migrate()
{
    ""outcome"" => ""success"",
    ""result"" => {""migration-warnings"" => []}
}
[standalone@localhost:9999 /] /subsystem=messaging:migrate()
{
    ""outcome"" => ""success"",
    ""result"" => {""migration-warnings"" => []}
}
[standalone@localhost:9999 /] /subsystem=we
web  webservices  weld  
[standalone@localhost:9999 /] /subsystem=web
web  webservices  
[standalone@localhost:9999 /] /subsystem=web:migrate()
{
    ""outcome"" => ""success"",
    ""result"" => {""migration-warnings"" => []}
}
{code}

then I the log looks like
{code}
2015-09-24 08:41:09,729 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [(""subsystem"" => ""jacorb"")]
2015-09-24 08:43:13,229 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""jms-queue"" => ""DLQ"")
]
2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""jms-queue"" => ""ExpiryQueue"")
]
2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""pooled-connection-factory"" => ""hornetq-ra"")
]
2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""connection-factory"" => ""RemoteConnectionFactory"")
]
2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""connection-factory"" => ""InVmConnectionFactory"")
]
2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""address-setting"" => ""#"")
]
2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""security-setting"" => ""#""),
    (""role"" => ""guest"")
]
2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""security-setting"" => ""#"")
]
2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""in-vm-acceptor"" => ""in-vm"")
]
2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-acceptor"" => ""netty-throughput""),
    (""param"" => ""direct-deliver"")
]
2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-acceptor"" => ""netty-throughput""),
    (""param"" => ""batch-delay"")
]
2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-acceptor"" => ""netty-throughput"")
]
2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-acceptor"" => ""netty"")
]
2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""in-vm-connector"" => ""in-vm"")
]
2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-connector"" => ""netty-throughput""),
    (""param"" => ""batch-delay"")
]
2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-connector"" => ""netty-throughput"")
]
2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""remote-connector"" => ""netty"")
]
2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default"")
]
2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [(""subsystem"" => ""messaging"")]
2015-09-24 08:43:20,957 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""web""),
    (""configuration"" => ""jsp-configuration"")
]
2015-09-24 08:43:20,957 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""web""),
    (""configuration"" => ""static-resources"")
]
2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""web""),
    (""configuration"" => ""container"")
]
2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""web""),
    (""virtual-server"" => ""default-host"")
]
2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [
    (""subsystem"" => ""web""),
    (""connector"" => ""http"")
]
2015-09-24 08:43:20,959 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [(""subsystem"" => ""web"")]
{code}

I think that the migration operation should not show those warnings.",,,,,,,,,,,,WFLY-5306,,,,JBEAP-1140,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzymxz:,9223372036854775807,,,,,,,,,,,"24/Sep/15 10:37 AM;brian.stansberry;I predict is this is due to WFLY-5306. The extension is removed in the course of the op, which means by the time the notifications are emitted at the end of the op the entire API for the extension is gone.","24/Sep/15 10:53 AM;brian.stansberry;Three possible solutions:

1) Revert WLFY-5306. But that's not a true solution, as a user could create a composite op that removes a subsystem and then drops the extension in the final step, and they'd get the same behavior.

2) Move the validation to when the notification is registered (OperationContext.emit()) instead of when the OC sends it out. At that point the resource registration should still be there.

3) Change the validation logic to check whether the resource registration still exists when it finds undescribed notifications; if not assume the op has removed the previously existing notification.

#2 sounds like the cleanest solution; I'll just check with [~jmesnil] about whether there is any reason we needed to defer the validation. I also want to discuss whether sending out a notification for a no-longer existing resource might cause a problem. The current validation logic isn't preventing sending out the notification though; all it does is log the WARN. So continuing to send them out will not be a behavior change.
","24/Sep/15 11:23 AM;jmesnil;I agree that #2 is the cleanest solution.

We should not need to make a extra case for the ""removed"" notification as long as we check that the resource describes the notifications when there is a resource to act upon.

The reason the notifications descriptions are checked at the end of the action was to ensure that we only do the check for actions that are successful. I did not want to have WARN about missing notifications descriptions for an operation that rolls back anyway.
However, I have no problem to change that as this issue is more ""visible"" by having a well described resource logging _false_ warnings when the operation is successful.

By changing the code to #2, the description of the notification will be checked when the resource description is still valid and the notifications will still be sent as expected.
Warning about undescribed notifications must not prevent the notifications to actually be emitted.",,,,,,,,,,,,,,,,,,,,,,,,
HostControllerConnectionService does not let in flight requests clear before stopping,WFCORE-1005,12585886,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,23/Sep/15 8:54 PM,23/Sep/15 8:54 PM,29/Nov/16 3:53 PM,,2.0.0.CR4,,,,,,,,Domain Management,,,,,0,,,,,,"HostControllerConnectionService sets up a remoting channel that receives management requests. But unlike the services that receive end user mgmt requests, it makes no effort to ensure in flight requests have cleared before shutting down.

I haven't looked but I wouldn't be surprised if there's a similar problem with the channel a slave HC opens for communication with the master.

I don't think this is a critical problem; when the service stop ends up closing the channel the remote end will be notified and the in flight request should report a failure. That failure may be unnecessary though.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzymvz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TransactionalProtocolOperationHandler.AbortOperationHandler must initialize the ExecuteRequestContext before responding,WFCORE-1002,12585720,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,22/Sep/15 5:22 PM,23/Oct/15 1:04 PM,29/Nov/16 3:53 PM,23/Oct/15 1:04 PM,2.0.0.CR3,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"If in a race a COMPLETE_TX_REQUEST cancelling an op is processed by a server/slave HC before the original EXECUTE_TX_REQUEST is processed, when the EXECUTE_TX_REQUEST comes in the AbortOperationHandler attempts to respond with a ""outcome""=>""cancelled"" response. This will fail because the ExecutionRequestContext will not be initialized.

In this situation the AbortOperationHandler should initialize the ERC.

With assertions enabled, this appears in the log:

{code}
20:58:47,947 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) Exception in thread ""Remoting ""slave:main-three:MANAGEMENT"" task-6"" java.lang.AssertionError

20:58:47,947 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.failed(TransactionalProtocolOperationHandler.java:458)

20:58:47,948 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$AbortOperationHandler.handleRequest(TransactionalProtocolOperationHandler.java:275)

20:58:47,948 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:270)

20:58:47,948 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:252)

20:58:47,948 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:123)

20:58:47,949 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver$1.handleMessage(ManagementChannelReceiver.java:56)

20:58:47,949 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)

20:58:47,949 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:451)

20:58:47,949 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at org.jboss.remoting3.EndpointImpl$TrackingExecutor$1.run(EndpointImpl.java:705)

20:58:47,950 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)

20:58:47,950 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)

20:58:47,950 ERROR [stderr] (Remoting ""slave:main-three:MANAGEMENT"" task-6) 	at java.lang.Thread.run(Thread.java:745)
{code}

Without assertions, a few lines later a call to sendResponse will result in an NPE.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1086,,,,,,0.0,0.0,,1|hzylvb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Starting embedded server overwrites standalone/config/logging.properties with a mostly blank config,WFCORE-1001,12585689,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,22/Sep/15 1:46 PM,29/Sep/15 12:58 PM,29/Nov/16 3:53 PM,29/Sep/15 12:58 PM,,,,,,,2.0.0.CR6,,,,,,,0,,,,,,"Note the contents of build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/standalone/configuration/logging.properties

 $ ./build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server --std-out=echo

Check the contents of build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/standalone/configuration/logging.properties, the file is empty.

Starting standalone will restore the default contents.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1107,,,,,,0.0,0.0,,1|hzylon:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error executing composite op in domain with two hosts,WFCORE-998,12585669,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,heiko.braun,heiko.braun,22/Sep/15 10:37 AM,02/Oct/15 11:48 AM,29/Nov/16 3:53 PM,02/Oct/15 11:48 AM,,,,,,,2.0.0.CR6,,Domain Management,,,,,0,,,,,,"{noformat}
 Tue Sep 22 16:35:42 GMT+200 2015
Failed to create security context for host=macbook-pro.fritz.box/server=server-four

Unexpected HTTP response: 500

Request
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [{
        ""address"" => [
            (""host"" => ""macbook-pro.fritz.box""),
            (""server"" => ""server-four"")
        ],
        ""operation"" => ""read-resource-description"",
        ""operations"" => true,
        ""access-control"" => ""combined-descriptions"",
        ""include-aliases"" => true
    }]
}

Response

Internal Server Error
{
    ""outcome"" => ""failed"",
    ""result"" => {""step-1"" => undefined},
    ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {""main-server-group"" => {""host"" => {""macbook-pro.fritz.box"" => {""server-four"" => ""WFLYCTL0031: No operation named 'composite' exists at address [
    (\""host\"" => \""macbook-pro.fritz.box\""),
    (\""server\"" => \""server-four\"")
]""}}}}}},
    ""rolled-back"" => true,
    ""server-groups"" => {""main-server-group"" => {""host"" => {""macbook-pro.fritz.box"" => {""server-four"" => {""response"" => {
        ""outcome"" => ""failed"",
        ""failure-description"" => ""WFLYCTL0031: No operation named 'composite' exists at address [
    (\""host\"" => \""macbook-pro.fritz.box\""),
    (\""server\"" => \""server-four\"")
]"",
        ""rolled-back"" => true
    }}}}}}
}
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1124,,,,,,0.0,5.0,,1|hzylkv:,9223372036854775807,,,,,,,,,,,"22/Sep/15 10:39 AM;heiko.braun;The host ""macbook-pro.fritz.box"" is the slave in this setup",22/Sep/15 10:54 AM;heiko.braun;My bad: The server wasn't running (auto-start=false),23/Sep/15 2:46 AM;heiko.braun;[~brian.stansberry] But shouldn't a :rrd() op be executed regardless if the server is running or not?,"23/Sep/15 12:51 PM;brian.stansberry;Ah, I didn't notice yesterday that the target address of the main request was [], not host=macbook/server=server-four. There is probably a bug in how the HC deals with a composite op for [] with steps that target specific remote processes such that it assumes it can proxy the request. What it does is build up this:

{code}
{
    ""operation"" => ""composite"",
    ""address"" => [
            (""host"" => ""macbook-pro.fritz.box""),
            (""server"" => ""server-four"")
        ],
    ""steps"" => [{
        ""address"" => []],
        ""operation"" => ""read-resource-description"",
        ""operations"" => true,
        ""access-control"" => ""combined-descriptions"",
        ""include-aliases"" => true
    }]
}
{code}

and attempts to execute that step, assuming it will be proxied to the remote process. But for a stopped server, there is no ability to proxy the request to a remote server, and the local resource that exists on the HC for that stopped server tries to handle it and can't.

The fix for this would be to have the HC realize the server is not running and not use the handling that it normally uses for connected servers. (I'm thinking the fix is likely in HostControllerExecutionSupport).

If this is fixed, you're not going to get the same r-r-d for /host=macbook/server=server-four when it's not running as you do when it is running. A non-running server resource just exposes on or two status attributes and ops to start the server.

A workaround for this is to not wrap the request in a composite.",23/Sep/15 12:55 PM;brian.stansberry;A simpler fix may be to register the composite op on the resource registration for a stopped server. This needs some thought.,,,,,,,,,,,,,,,,,,,,,,
"Security realm using ldaps hangs forever during SSL handshake, when ldap server is killed",WFCORE-997,12585602,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,mchoma,mchoma,21/Sep/15 11:53 PM,08/Oct/15 8:06 AM,29/Nov/16 3:53 PM,08/Oct/15 8:06 AM,2.0.0.CR3,,,,,,2.0.0.CR7,,Security,,,,,0,,,,,,"During failover testing we hit the problem of stuck thread. When ldap server is killed in particular time of ssl handshake EAP hangs and waits forever on response, which will never come. Causing thread to block forever. Same problem can be seen in LdapLoginModule using ldaps without specifying com.sun.jndi.ldap.connect.timeout value.

Possible solution is to add option to declare com.sun.jndi.ldap.connect.timeout for security realm and provide some default non-empty value, e.g. 15 seconds.",,,,,,,,,,,,,,,,JBEAP-1126,,,,,,,,,,,07/Oct/15 11:06 AM;dlofthouse;DeadListener.java;https://issues.jboss.org/secure/attachment/12393618/DeadListener.java,21/Sep/15 11:53 PM;mchoma;SecurityRealmLDAPSHandshakeHangs.pcap;https://issues.jboss.org/secure/attachment/12393094/SecurityRealmLDAPSHandshakeHangs.pcap,21/Sep/15 11:53 PM;mchoma;StackTraceConnectTimeoutInLDAPSConnection.txt;https://issues.jboss.org/secure/attachment/12393095/StackTraceConnectTimeoutInLDAPSConnection.txt,21/Sep/15 11:53 PM;mchoma;StackTraceFromThreadDump.txt;https://issues.jboss.org/secure/attachment/12393096/StackTraceFromThreadDump.txt,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1158,,,,,,4.0,4.0,,1|hzyl73:,9223372036854775807,,,,"1. Configure security realm using ldaps connection
2. Try to acces to secured http management interface
3. Ldap server is killed during SSL handshake
4. Connection to EAP is not timeouted and waits forever",,,,,,,"22/Sep/15 3:01 AM;mchoma;I tried add property com.sun.jndi.ldap.connect.timeout on the ldaps outbound connection, but that lead to exception java.net.SocketException: Unconnected sockets not implemented (find whole stacktrace in attachment StackTraceConnectTimeoutInLDAPSConnection.txt). Same property run with ldap outbound connection properly. As far as I can elaborate the diferrence is that ldaps outbound connection use java.naming.ldap.factory.socket=org.jboss.as.domain.management.connections.ldap.ThreadLocalSSLSocketFactory to create socket. But ldap outbound connection has empty java.naming.ldap.factory.socket property and therefore socket is created in other way. ",06/Oct/15 2:17 PM;dlofthouse;Scheduling to see if I can get this in first thing tomorrow morning but I don't believe a big enough issue to hold the release.,"07/Oct/15 11:07 AM;dlofthouse;The attached file starts a ServerSocket that reproduces this - i.e. it accepts the connection but never does anything with it so the server ends up stuck in the following call: -

{noformat}
""Remoting ""eyrie:MANAGEMENT"" task-1"" #120 prio=5 os_prio=0 tid=0x00007efbb0004800 nid=0x5323 waiting for monitor entry [0x00007efc58f3b000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1350)
	- waiting to lock <0x00000000f56e0450> (a java.lang.Object)
	at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:747)
	at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)
	- locked <0x00000000f56ff778> (a sun.security.ssl.AppOutputStream)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	- locked <0x00000000f570c518> (a java.io.BufferedOutputStream)
	at com.sun.jndi.ldap.Connection.writeRequest(Connection.java:426)
	- locked <0x00000000f56deb28> (a com.sun.jndi.ldap.Connection)
	at com.sun.jndi.ldap.Connection.writeRequest(Connection.java:399)
	at com.sun.jndi.ldap.LdapClient.ldapBind(LdapClient.java:359)
	- locked <0x00000000f56de9d8> (a com.sun.jndi.ldap.LdapClient)
	at com.sun.jndi.ldap.LdapClient.authenticate(LdapClient.java:192)
	- locked <0x00000000f56de9d8> (a com.sun.jndi.ldap.LdapClient)
	at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2788)
	at com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:319)
	at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:192)
	at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:210)
	at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:153)
	at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(LdapCtxFactory.java:83)
	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)
	at javax.naming.InitialContext.init(InitialContext.java:244)
	at javax.naming.InitialContext.<init>(InitialContext.java:216)
	at javax.naming.directory.InitialDirContext.<init>(InitialDirContext.java:101)
	at org.jboss.as.domain.management.connections.ldap.LdapConnectionManagerService.getConnection(LdapConnectionManagerService.java:263)
{noformat}",07/Oct/15 1:13 PM;dlofthouse;The fix within the pull request means that the standard LDAP properties can be used to specify the timeout establishing the connection to the LDAP server.,,,,,,,,,,,,,,,,,,,,,,,
Race between commit and cancel messages if a domain rollout is cancelled,WFCORE-996,12585601,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,21/Sep/15 10:12 PM,19/Oct/15 2:47 PM,29/Nov/16 3:53 PM,,2.0.0.CR3,,,,,,,,Domain Management,,,,,0,,,,,,"There are situations where the DomainRolloutStepHandler and DomainSlaveHandler may send a cancel message to the remote server or slave HC immediately after sending the tx commit/rollback message. This can happen in particular if a server is hanging after the commit messages are sent by DomainRolloutStepHandler and the user cancels while DomainRolloutStepHandler is waiting for final response. When execution proceeds to DomainSlaveHandler, it will send the commit messages to the slave HCs, and then, because the op is cancelled, immediately send cancel messages.

The problem is there's no guarantee of the order in which the messages will be processed by the recipient. And both the commit/rollback message and the cancel message use the ModelControllerProtocol.COMPLETE_TX_REQUEST message, with cancel using the ModelControllerProtocol.PARAM_ROLLBACK param. The effect of this is the remote process may process a COMPLETE_TX_REQUEST/PARAM_ROLLBACK representing the cancel *before* it processes a COMPLETE_TX_REQUEST/PARAM_COMMIT representing the tx commit. As a result tx will be rolled back on that process, even though the correct instruction is *commit*. The process will therefore be out of sync with the domain.

A simple way to reduce the possibility of this is to make DomainSlaveHandler a bit more patient when waiting for the final response from slave HCs when it knows it needs to cancel. Even if we can do more for current version slaves (see below), we should still do this in order to reduce the risk for legacy slaves.

Beyond that, we can *perhaps* change the messages to distinguish the cancel case from the rollback case. A whole new message type is one possibility, but then we'd need a new protocol version and would have to track the protocol version used by the slave and continue to send the old COMPLETE_TX_REQUEST message to legacy slaves. Simpler may be to introduce a new PARAM_CANCEL value for the message payload. Legacy slaves will still treat that as a rollback instruction, since by luck the TransactionalProtocolOperationHandler.CompleteTxOperationHandler treats any param value other than PARAM_COMMIT as meaning rollback. Current slaves though can use new handling for PARAM_CANCEL.

*Possible* handling for PARAM_CANCEL:

1) if ExecuteRequestContext.prepared == false --> cancel before prepare; go ahead and cancel
2) else if ERC.txCompleted == false --> set a new ERC.cancelled flag and wait for commit/rollback
3) else commit/rollback has already arrived; go ahead and cancel

The handling for commit/rollback would check ERC.cancelled after doing the commit'rollback and if true cancel the request.

This possible approach needs careful thought before being introduced though.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzyl6v:,9223372036854775807,,,,,,,,,,,19/Oct/15 2:47 PM;jamezp;Original PR closed; https://github.com/wildfly/wildfly-core/pull/1102,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent :rrd(access-control) response when querying host resources,WFCORE-994,12585529,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,kabirkhan,heiko.braun,heiko.braun,21/Sep/15 10:01 AM,06/Oct/15 11:59 AM,29/Nov/16 3:53 PM,06/Oct/15 11:59 AM,,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"{noformat}
[domain@localhost:9990 /] /host=*:read-resource-description(access-control=trim-descriptions){roles=Administrator}
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [(""host"" => ""macbook-pro.fritz.box"")],
            ""outcome"" => ""success"",
            ""result"" => {
                ""access-control"" => {
                    ""default"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {}
                    },
                    ""exceptions"" => {}
                },
                ""description"" => undefined
            }
        },
        {
            ""address"" => [(""host"" => ""master"")],
            ""outcome"" => ""success"",
            ""result"" => {
                ""description"" => undefined,
                ""attributes"" => undefined,
                ""operations"" => undefined,
                ""notifications"" => undefined,
                ""children"" => {
                    ""core-service"" => {""model-description"" => undefined},
                    ""jvm"" => {""model-description"" => undefined},
                    ""socket-binding-group"" => {""model-description"" => undefined},
                    ""path"" => {""model-description"" => undefined},
                    ""server"" => {""model-description"" => undefined},
                    ""subsystem"" => {""model-description"" => undefined},
                    ""server-config"" => {""model-description"" => undefined},
                    ""interface"" => {""model-description"" => undefined},
                    ""system-property"" => {""model-description"" => undefined},
                    ""extension"" => {""model-description"" => undefined}
                },
                ""access-control"" => {
                    ""default"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {
                            ""directory-grouping"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""domain-controller"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""domain-organization"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""host-state"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""management-major-version"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""management-micro-version"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""management-minor-version"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""master"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""name"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""namespaces"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""organization"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""product-name"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""product-version"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""release-codename"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""release-version"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""running-mode"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""schema-locations"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""server-state"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""suspend-state"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""uuid"" => {
                                ""read"" => true,
                                ""write"" => true
                            }
                        }
                    },
                    ""exceptions"" => {}
                }
            }
        }
    ]
}
[domain@localhost:9990 /] 

{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1122,,,,,,0.0,6.0,,1|hzykq7:,9223372036854775807,,,,,,,,,,,"21/Sep/15 10:29 AM;brian.stansberry;Is the issue here that the result for ""host"" => ""master"" is not trimming the descriptions?","21/Sep/15 10:57 AM;heiko.braun;IMO there is one issues here:

The first description (host=""macbook-pro.fritz.box"") is incomplete, it lacks the access-control attributes, children, etc
","23/Sep/15 11:42 AM;heiko.braun;On a domain with two host controllers:

{noformat}
[domain@localhost:9990 /] :read-children-names(child-type=host)
{
    ""outcome"" => ""success"",
    ""result"" => [
        ""macbook-pro.fritz.box"",
        ""master""
    ]
}

{noformat}

Can someone explain the difference between a) and b)? And why is the second host not showing up?

a) 
{noformat}
[domain@localhost:9990 /] /host=*/server-config=*:read-resource-description(access-control=trim-descriptions)
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""host"" => ""master""),
            (""server-config"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            "" capabilities"" => [{
                ""name"" => ""org.wildfly.domain.server-config"",
                ""dynamic"" => true
            }],
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {
                ""interface"" => {""model-description"" => undefined},
                ""jvm"" => {""model-description"" => undefined},
                ""path"" => {""model-description"" => undefined},
                ""system-property"" => {""model-description"" => undefined}
            },
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => true,
                    ""attributes"" => {
                        ""auto-start"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""cpu-affinity"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""group"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""priority"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""socket-binding-default-interface"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""socket-binding-group"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""socket-binding-port-offset"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""status"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""update-auto-start-with-server-status"" => {
                            ""read"" => true,
                            ""write"" => true
                        }
                    }
                },
                ""exceptions"" => {}
            }
        }
    }]
}

{noformat}

b) 
{noformat}
[domain@localhost:9990 /] /host=*/server=*:read-resource-description(access-control=trim-descriptions)
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""*"")
            ],
            ""outcome"" => ""success"",
            ""result"" => {
                ""description"" => undefined,
                ""attributes"" => undefined,
                ""operations"" => undefined,
                ""notifications"" => undefined,
                ""children"" => {},
                ""access-control"" => {
                    ""default"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {
                            ""launch-type"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""server-state"" => {
                                ""read"" => true,
                                ""write"" => true
                            }
                        }
                    },
                    ""exceptions"" => {}
                }
            }
        },
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""server-one"")
            ],
            ""outcome"" => ""success"",
            ""result"" => {
                ""access-control"" => {
                    ""default"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {}
                    },
                    ""exceptions"" => {}
                },
                ""description"" => undefined
            }
        }
    ]
}

{noformat}","23/Sep/15 12:20 PM;heiko.braun;[~kabirkhan] kabir, please let me know whem you have something to look at. This issue is quiet complex for us and I think it's more simple to verify the changes then providing a complete specification of what we actually expect. 
",25/Sep/15 1:06 PM;kabirkhan;[~hbraun][~harald.pehl] Please take a look at my https://github.com/wildfly/wildfly-core/compare/wildfly:master...kabir:WFCORE-994?expand=1,25/Sep/15 4:57 PM;kabirkhan;I created https://github.com/wildfly/wildfly-core/pull/1122,,,,,,,,,,,,,,,,,,,,,
Reload command on embed-host-controller fails,WFCORE-993,12585486,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,luck3y,pkremens,pkremens,21/Sep/15 7:29 AM,29/Oct/15 10:42 AM,29/Nov/16 3:53 PM,29/Oct/15 12:17 AM,2.0.0.CR1,,,,,,2.0.0.CR9,,CLI,,,,,0,,,,,,"Reload operation on embed-host-controller gives me an error.

{noformat}
[disconnected /] embed-host-controller 
[domain@embedded /] reload --host=master
13:25:30,019 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) stopped in 6ms
13:25:30,020 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) starting
13:25:30,115 ERROR [org.jboss.as.controller] (AeshProcess: 2) WFLYCTL0369: Required capabilities are not available:
    org.wildfly.domain.server-group.main-server-group in context 'server-config'; There are no known registration points which can provide this capability.
    org.wildfly.domain.server-group.main-server-group in context 'server-config'; There are no known registration points which can provide this capability.
    org.wildfly.domain.server-group.other-server-group in context 'server-config'; There are no known registration points which can provide this capability.
13:25:30,138 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=default/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
13:25:30,150 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=ha/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
13:25:30,166 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=full/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
13:25:30,167 ERROR [org.jboss.as.controller] (AeshProcess: 2) WFLYCTL0369: Required capabilities are not available:
    org.wildfly.domain.server-group.main-server-group in context 'server-config'; There are no known registration points which can provide this capability.
    org.wildfly.domain.server-group.main-server-group in context 'server-config'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.jgroups-mping in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.jgroups-udp-fd in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.http in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.jgroups-tcp in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.jgroups-tcp-fd in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.http in context 'profile=default'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.ajp in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.network.socket-binding.jgroups-udp in context 'profile=ha'; There are no known registration points which can provide this capability.
    org.wildfly.domain.server-group.other-server-group in context 'server-config'; There are no known registration points which can provide this capability.
13:25:30,178 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=full-ha/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
13:25:30,196 ERROR [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0362: Capabilities required by resource '/server-group=main-server-group' are not available:
    org.wildfly.domain.profile.full in context 'server-groups'; There are no known registration points which can provide this capability.
13:25:30,198 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.
13:25:30,204 ERROR [org.jboss.as.protocol] (Thread-2) WFLYPRT0003: Failed to close resource org.jboss.as.cli.embedded.ThreadContextsModelControllerClient@713124ae: java.lang.IllegalStateException: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.getActiveModelControllerClient(EmbeddedHostControllerFactory.java:331)
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.access$200(EmbeddedHostControllerFactory.java:225)
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl$3.getDelegate(EmbeddedHostControllerFactory.java:309)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.close(DelegatingModelControllerClient.java:103)
	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.close(ThreadContextsModelControllerClient.java:139)
	at org.jboss.as.protocol.StreamUtils.safeClose(StreamUtils.java:66)
	at org.jboss.as.cli.impl.CommandContextImpl.disconnectController(CommandContextImpl.java:1181)
	at org.jboss.as.cli.impl.CommandContextImpl.terminateSession(CommandContextImpl.java:812)
	at org.jboss.as.cli.impl.CommandContextImpl$1.shutdown(CommandContextImpl.java:370)
	at org.jboss.as.cli.impl.CliShutdownHook$1.run(CliShutdownHook.java:50)
	at java.lang.Thread.run(Thread.java:745)

13:25:30,215 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) stopped in 11ms
{noformat}",,,,,,,,,,,,,,,,JBEAP-1120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1200,,,,,,0.0,7.0,,1|hypj9z:,9223372036854775807,,,,,,,,,,,"22/Sep/15 1:42 AM;pkremens;This is obviously not related to embed-host-controller only. Reloading embed-server with admin-only=true is broken as well (notice that I've waited ~5s before every reload command)
{noformat}
[disconnected /] embed-server --std-out=echo 
07:37:59,172 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.4.Final
07:37:59,215 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final
07:37:59,269 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) starting
07:37:59,982 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
07:38:00,166 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) started in 988ms - Started 35 of 48 services (19 services are lazy, passive or on-demand)

[standalone@embedded /] reload --admin-only=true 
07:38:05,390 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0050: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) stopped in 24ms
07:38:05,394 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) starting
07:38:05,461 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
07:38:05,529 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) started in 131ms - Started 35 of 48 services (19 services are lazy, passive or on-demand)

[standalone@embedded /] reload --admin-only=true
07:38:09,311 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) stopped in 3ms
07:38:09,313 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) starting
07:38:09,358 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
07:38:09,361 ERROR [org.jboss.as.controller] (AeshProcess: 3) WFLYCTL0369: Required capabilities are not available:
    org.wildfly.network.socket-binding.management-http; Possible registration points for this capability: 
		/core-service=management/management-interface=http-interface
07:38:09,417 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) started in 103ms - Started 35 of 48 services (19 services are lazy, passive or on-demand)

[standalone@embedded /] embed-server --std-out=echo
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
{noformat}

Regression against previous version.","22/Sep/15 1:51 AM;pkremens;Mix of reload commands in cli script could lead into a crash of CLI process.
{noformat}
$ cat test.cli 
embed-server --std-out=echo
reload --admin-only=false
reload --admin-only=true
...
{noformat}
{noformat}
$ ./jboss-cli.sh --file=test.cli
...
07:48:01,871 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) starting
07:48:01,920 ERROR [org.jboss.as.controller] (main) WFLYCTL0369: Required capabilities are not available:
    org.wildfly.network.socket-binding.management-http; Possible registration points for this capability: 
		/core-service=management/management-interface=http-interface
07:48:01,921 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 6) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
07:48:01,933 ERROR [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0362: Capabilities required by resource '/subsystem=remoting/configuration=endpoint' are not available:
    org.wildfly.io.worker.default; There are no known registration points which can provide this capability.
07:48:01,936 ERROR [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0362: Capabilities required by resource '/subsystem=undertow/server=default-server/http-listener=default' are not available:
    org.wildfly.network.socket-binding.http; There are no known registration points which can provide this capability.
    org.wildfly.io.buffer-pool.default; There are no known registration points which can provide this capability.
    org.wildfly.io.worker.default; There are no known registration points which can provide this capability.
07:48:01,940 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
07:48:01,945 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Full 10.0.0.CR1 (WildFly Core 2.0.0.CR1) stopped in 1ms
07:48:07,904 ERROR [org.jboss.as.protocol] (main) WFLYPRT0003: Failed to close resource org.jboss.as.cli.embedded.ThreadContextsModelControllerClient@707194ba: java.lang.IllegalStateException: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.getActiveModelControllerClient(EmbeddedStandAloneServerFactory.java:393)
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.access$100(EmbeddedStandAloneServerFactory.java:210)
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl$2.getDelegate(EmbeddedStandAloneServerFactory.java:245)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.close(DelegatingModelControllerClient.java:103)
	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.close(ThreadContextsModelControllerClient.java:139)
	at org.jboss.as.protocol.StreamUtils.safeClose(StreamUtils.java:66)
	at org.jboss.as.cli.impl.CommandContextImpl.disconnectController(CommandContextImpl.java:1181)
	at org.jboss.as.cli.handlers.ReloadHandler.ensureServerRebootComplete(ReloadHandler.java:222)
	at org.jboss.as.cli.handlers.ReloadHandler.doHandleEmbedded(ReloadHandler.java:182)
	at org.jboss.as.cli.handlers.ReloadHandler.doHandle(ReloadHandler.java:142)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:763)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:786)
	at org.jboss.as.cli.impl.CliLauncher.processFile(CliLauncher.java:333)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:261)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.jboss.modules.Module.run(Module.java:308)
	at org.jboss.modules.Main.main(Main.java:487)

Failed to establish connection in 6056ms
{noformat}

Running the same script (without the first line) against a standalone server started in a normal manner (non-embedded) works fine (no error logs).","22/Sep/15 4:16 PM;luck3y;This appears to work for me with:

Embedded HC:

$ ./build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-host-controller --std-out=echo
15:12:21,532 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.4.Final
15:12:21,690 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final
15:12:21,717 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:12:22,252 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" (Host Controller) started in 704ms - Started 25 of 27 services (8 services are lazy, passive or on-demand)
[domain@embedded /] reload --host=master
15:12:27,248 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 4ms
15:12:27,248 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:12:27,318 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" (Host Controller) started in 69ms - Started 25 of 27 services (8 services are lazy, passive or on-demand)
[domain@embedded /] 

Standalone:

$ ./build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server --std-out=echo 
15:13:45,685 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.4.Final
15:13:45,734 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final
15:13:45,787 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:13:46,229 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 538ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
[standalone@embedded /] reload --admin-only=true 
15:13:55,552 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 9ms
15:13:55,554 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:13:55,598 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 42ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
[standalone@embedded /] reload --admin-only=true
15:13:59,883 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 3ms
15:13:59,887 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:13:59,939 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 49ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
[standalone@embedded /]

test.cli:

$ cat test.cli 
embed-server --std-out=echo
reload --admin-only=false
reload --admin-only=true

$ ./build/target/wildfly-core-2.0.0.CR4-SNAPSHOT/bin/jboss-cli.sh --file=test.cli

15:15:40,753 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.4.Final
15:15:40,833 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
15:15:40,883 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:15:41,312 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 553ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
15:15:41,391 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 5ms
15:15:41,393 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:15:41,426 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
15:15:41,440 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.3.2.Final
15:15:41,452 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.3.2.Final
15:15:41,475 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 4.0.10.Final
15:15:41,495 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
15:15:41,555 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
15:15:41,557 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
15:15:41,559 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 157ms - Started 55 of 57 services (15 services are lazy, passive or on-demand)
15:15:41,594 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 2ms
15:15:41,596 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" starting
15:15:41,650 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" started in 52ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)
15:15:41,695 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: WildFly Core 2.0.0.CR4-SNAPSHOT ""Kenny"" stopped in 1ms
","23/Sep/15 1:03 AM;pkremens;[~luck3y] sorry for that, I tested this with the latest EAP build, WF CR1, but not with the latest core. 

I tested the wf-core releases and this issue was fixed with wf-core 2.0.0.CR2. [Upstream|https://github.com/wildfly/wildfly/blob/master/pom.xml] contains CR4 as dependency so hopefully next EAP build will be fine as well.
",09/Oct/15 6:04 PM;luck3y;See associated JBEAP ticket for details. Tests fine for me with patch.,26/Oct/15 9:30 PM;luck3y;This should have been reopened when JBEAP-1120 was. Sorry for the confusion.,"29/Oct/15 10:42 AM;brian.stansberry;Quick design documentation comment on the fix for this:

The CLI and the server now require that ""admin-only=true"" be set when a reload is performed of an embedded host controller. This is either via the ""--admin-only=true"" param to the high level CLI reload command, or a ""admin-only=true"" param to a low level operation.

It's not particularly user-friendly forcing users to type this instead of defaulting to 'true'. But in all other cases the default for this is 'false', and correctly so, as reloading to an admin-only process is not the stardard use case.  You start in admin-only and reload out of it to get your changes into the runtime.

In the future we want to support using admin-only=false with an embedded HC. When we do that, if the CLI when executing a reload has been defaulting --admin-only=true without requiring user input, then we either have to maintain that behavior, which is unintuitive and inconsistent with all other reload use cases, or we change default behavior possibly breaking existing scripts that relied on the default. To avoid that future incompatibility problem, we decided to force users today to explicitly declare --admin-only=true.",,,,,,,,,,,,,,,,,,,,
Memory leak in host controller,WFCORE-992,12585478,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,lthon,lthon,lthon,21/Sep/15 6:41 AM,21/Sep/15 2:58 PM,29/Nov/16 3:53 PM,21/Sep/15 2:58 PM,2.0.0.CR1,,,,,,2.0.0.CR2,,Domain Management,,,,,0,,,,,,"The {{ManagedServerProxy}} class in the {{host-controller}} module contains a memory leak, which can be easily reproduced using the RBAC soak test, like so:

{code}
cd wildfly-core # checkout WildFly Core 2.0.0.CR1, which is in WildFly 10.0.0.CR1, or current master
mvn clean install -DskipTests
cd testsuite/domain
mvn clean test -Dts.noSmoke -Dts.domain -Prbac-soak -Djboss.test.rbac.soak.clients=100 -Djboss.test.rbac.soak.iterations=50
{code}

After acquiring a heap dump ({{-XX:+HeapDumpOnOutOfMemoryError}}), it's clear that out of the 512 MB of heap space a host controller has, more than 400 MB is taken by a single instance of the {{ManagedServerProxy}} class, specifically by its {{activeRequests}} field. This {{Map}} has a single entry whose value is a {{Set}} of ""pending"" futures. I added a couple of debug prints to the places where this {{Set}} is modified, only to see this:

{code}
2015-09-21 12:32:00,704 INFO  [stdout] (management-handler-thread - 4) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@142a1c24
2015-09-21 12:32:00,707 INFO  [stdout] (Remoting ""master:MANAGEMENT"" task-3) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@5bfbf423
2015-09-21 12:32:00,707 INFO  [stdout] (management-handler-thread - 4) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@27e2e96c
2015-09-21 12:32:00,708 INFO  [stdout] (Remoting ""master:MANAGEMENT"" task-2) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@72817a0d
2015-09-21 12:32:00,713 INFO  [stdout] (management-handler-thread - 2) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@73d373a7
2015-09-21 12:32:00,718 INFO  [stdout] (Remoting ""master:MANAGEMENT"" task-9) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@20bd6db1
{code}

Skipping a few intermediate steps, the root cause is that {{AbstractDelegatingAsyncFuture}} delegates {{addListener}} directly to an underlying future, so the callbacks don't get the original instance, but the underlying one.",,,,,,,,,,,,,,,,JBEAP-1119,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1090,,,,,,0.0,1.0,,1|hzykjr:,9223372036854775807,,,,,,,,,,,"21/Sep/15 6:54 AM;lthon;This PR has a fix: https://github.com/wildfly/wildfly-core/pull/1090

I'm not sure whether this is a fix you want to apply. For example, if the {{TransactionalProtocolClientImpl.execute}} method returned a subclass of {{ConvertingDelegatingAsyncFuture}} (instead of {{AbstractDelegatingAsyncFuture}}), the problem would be gone too. So I'm leaving the decision to you (and not assigning this issue to myself).",,,,,,,,,,,,,,,,,,,,,,,,,,
Starting server with config that doesn't end with .xml fails,WFCORE-991,12585445,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,luck3y,luck3y,21/Sep/15 2:34 AM,18/Mar/16 3:27 PM,29/Nov/16 3:53 PM,18/Mar/16 3:27 PM,,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"[copy standalone.xml to test in the standalone/config directory]

./build/target/wildfly-core-2.0.0.CR2-SNAPSHOT/bin/standalone.sh --server-config=test
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.CR2-SNAPSHOT

  JAVA: java

  JAVA_OPTS:  -server -Xms64m -Xmx512m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true

=========================================================================

01:19:50,510 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.4.Final
01:19:50,654 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
01:19:50,709 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR2-SNAPSHOT ""Kenny"" starting
01:19:51,110 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
01:19:51,125 INFO  [org.xnio] (MSC service thread 1-4) XNIO version 3.3.2.Final
01:19:51,135 INFO  [org.xnio.nio] (MSC service thread 1-4) XNIO NIO Implementation Version 3.3.2.Final
01:19:51,161 INFO  [org.jboss.remoting] (MSC service thread 1-4) JBoss Remoting version 4.0.10.Final
01:19:51,189 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-8) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
01:19:51,264 INFO  [stdout] (Controller Boot Thread) XXX historyBase: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
01:19:51,265 INFO  [stdout] (Controller Boot Thread) XXX lastFile: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.last.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
01:19:51,265 INFO  [stdout] (Controller Boot Thread) XXX boot: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.boot.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
01:19:51,265 INFO  [stdout] (Controller Boot Thread) XXX initial: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.initial.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
01:19:51,265 INFO  [stdout] (Controller Boot Thread) XXX from: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.CR2-SNAPSHOT/standalone/configuration/test -> /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.initial.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
01:19:51,267 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0082: Failed to create backup copies of configuration file /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.CR2-SNAPSHOT/standalone/configuration/test
	at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:488)
	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.successfulBoot(BackupXmlConfigurationPersister.java:94)
	at org.jboss.as.controller.AbstractControllerService.finishBoot(AbstractControllerService.java:449)
	at org.jboss.as.server.ServerService.boot(ServerService.java:367)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.nio.file.NoSuchFileException: /home/kwills/git/wildfly-core/build/target/wildfly-core-2.0.0.initial.CR2-SNAPSHOT/standalone/configuration/standalone_xml_history/test
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixCopyFile.copyFile(UnixCopyFile.java:243)
	at sun.nio.fs.UnixCopyFile.copy(UnixCopyFile.java:581)
	at sun.nio.fs.UnixFileSystemProvider.copy(UnixFileSystemProvider.java:253)
	at java.nio.file.Files.copy(Files.java:1274)
	at org.jboss.as.controller.persistence.FilePersistenceUtils.copyFile(FilePersistenceUtils.java:73)
	at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:482)
	... 5 more

This is due to ConfiguratioinFile.addSuffixToFile(historyBase, INITIAL) assuming that the right most . is part of a file suffix.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1313,,,,,,0.0,0.0,,1|hzykd3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Eliminate possible races in determining if a reconnecting server requires reload,WFCORE-990,12585436,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,20/Sep/15 10:18 AM,20/Sep/15 10:18 AM,29/Nov/16 3:53 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Tracking on the HostController as to whether a disconnected server requires reload is vulnerable to races where the slave HC reconnects to the master and makes its calculations and then further changes come in from the DC before the slave's server(s) have reconnected. Those changes should trigger the server going into reload required.

I think the cleanest way to handle this is when the server reconnects instead of replying with a simple boolean as to whether reload required state is needed, the response can be more complex, including, if the HC thinks reload is *not* required, the entire resource tree the HC would currently expect for the server. (I don't expect this to be a trivial task.) The server can then compare that tree to its own. This can be done in a transactional manner, with the server commiting the transaction when its check is completed. This ensures the HC's model controller lock is held throughout, and therefore further changes cannnot come in until the server is fully integrated.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzykb3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Premature registration of reconnecting server,WFCORE-989,12585427,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,18/Sep/15 11:11 PM,23/Oct/15 1:03 PM,29/Nov/16 3:53 PM,23/Oct/15 1:03 PM,2.0.0.CR1,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"ServerInventoryImpl.reconnectServer is registering the ProxyController for the reconnecting server with the DomainModelControllerService. The problem is that ProxyController is not yet in a state where it can forward requests to the server. That won't happen until the server calls back with a DomainServerProtocol.SERVER_RECONNECT_REQUEST and the ServerToHostProtocolHandler.ServerReconnectRequestHandler handles it. The effect is if a request for the server comes in during this window, it will fail. If that request is part of a domain operation rollout (because during the window the HC regarded the server as 'live' and instructed the DC to send rollout ops to it), then the domain rollout will be affected. This happened in the testsuite failure I just saw. Most significant logging is as follows:

{code}
2015-09-18 17:59:32,229 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR2-SNAPSHOT ""Kenny"" (Host Controller) started in 93ms - Started 48 of 51 services (15 services are lazy, passive or on-demand)
2015-09-18 17:59:32,247 INFO  [org.jboss.as.controller.management-operation] (Remoting ""slave:MANAGEMENT"" task-16) Initialized for 1849055188
2015-09-18 17:59:32,247 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-14) WFLYHC0021: Server [Server:main-three] connected using connection [Channel ID 08aa200b (inbound) of Remoting connection 27e3d90d to /127.0.0.1:49272]
2015-09-18 17:59:32,247 INFO  [org.jboss.as.host.controller] (Remoting ""slave:MANAGEMENT"" task-15) WFLYHC0021: Server [Server:other-two] connected using connection [Channel ID 02bd2646 (inbound) of Remoting connection 64a8b7f2 to /127.0.0.1:49273]
2015-09-18 17:59:32,247 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 34) Initialized for 1849055188
2015-09-18 17:59:32,252 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 34) sending prepared response for 1849055188  --- interrupted: false
2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Remoting ""slave:MANAGEMENT"" task-1) Initialized for 1933145457
2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Remoting ""slave:MANAGEMENT"" task-1) Initialized for 481103151
2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 36) Initialized for 1933145457
2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 37) Initialized for 481103151
2015-09-18 17:59:32,255 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 36) sending pre-prepare failed response for 1933145457  --- interrupted: false
2015-09-18 17:59:32,256 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 37) sending pre-prepare failed response for 481103151  --- interrupted: false
{code}

The HC completes boot. Then servers main-three and other-two register. The HC sends a prepared response to a request. This is the host rollout request to the slave from the DC with the response being the ops to invoke on the servers. The HC reports sending a ""pre-prepare failed response"" to two requests. These are the requests the DC has asked it to proxy to the servers.

The result of all this for the client is the following failure of a management op:

{code}
Failed operation:
{
    ""operation"" => ""add"",
    ""address"" => [(""extension"" => ""org.jboss.as.test.hc.extension"")]
}
Response:
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {
        ""main-server-group"" => {""host"" => {""slave"" => {""main-three"" => ""WFLYHC0153: Channel closed""}}},
        ""other-server-group"" => {""host"" => {""slave"" => {""other-two"" => ""WFLYHC0153: Channel closed""}}}
    }}},
    ""rolled-back"" => true,
    ""server-groups"" => {
        ""main-server-group"" => {""host"" => {
            ""master"" => {""main-one"" => {""response"" => {
                ""outcome"" => ""failed"",
                ""result"" => [(""HC"" => ""1.1.1"")],
                ""rolled-back"" => true
            }}},
            ""slave"" => {""main-three"" => {""response"" => {
                ""outcome"" => ""failed"",
                ""result"" => undefined,
                ""failure-description"" => ""WFLYHC0153: Channel closed"",
                ""rolled-back"" => true
            }}}
        }},
        ""other-server-group"" => {""host"" => {""slave"" => {""other-two"" => {""response"" => {
            ""outcome"" => ""failed"",
            ""result"" => undefined,
            ""failure-description"" => ""WFLYHC0153: Channel closed"",
            ""rolled-back"" => true
        }}}}}
    }
}
{code}

The ""WFLYHC0153: Channel closed"" failure is what is produced when an attempt is made to invoke on a disconnected proxy controller.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1086,,,,,,0.0,0.0,,1|hzyk93:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Host controller fails to roll out management operations if assertions are enabled,WFCORE-988,12585303,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jamezp,jamezp,17/Sep/15 5:22 PM,19/Nov/15 2:17 AM,29/Nov/16 3:53 PM,23/Oct/15 1:01 PM,,,,,,,2.0.0.CR8,,Domain Management,,,,,0,,,,,,"Enabling assertions, {{-ea}}, for the host controller then trying to execute an operation that needs to be rolled out to servers fails. The issue seems to be in the [{{OperationContextImpl}}|https://github.com/wildfly/wildfly-core/blob/2.0.0.CR1/controller/src/main/java/org/jboss/as/controller/OperationContextImpl.java#L826].

Replacing the assertion with an exception I see the stack trace below.

{code:title=Stack Trace}
[Host Controller] 14:08:33,124 DEBUG [org.jboss.as.host.controller] (Host Controller Service Threads - 8) failed to process task {
[Host Controller]     ""address"" => [
[Host Controller]         (""host"" => ""master""),
[Host Controller]         (""server"" => ""server-one""),
[Host Controller]         (""subsystem"" => ""logging"")
[Host Controller]     ],
[Host Controller]     ""operation"" => ""write-attribute"",
[Host Controller]     ""name"" => ""use-deployment-logging-config"",
[Host Controller]     ""value"" => true,
[Host Controller]     ""operation-headers"" => {
[Host Controller]         ""access-mechanism"" => ""NATIVE"",
[Host Controller]         ""domain-uuid"" => ""1763a478-a1ad-42b5-a206-03db6e8bbc69"",
[Host Controller]         ""execute-for-coordinator"" => true
[Host Controller]     }
[Host Controller] }: java.lang.RuntimeException: Thread.currentThread=Thread[Host Controller Service Threads - 8,5,Host Controller Service Threads], controllingThread=null, initiatingThreadThread[management-handler-thread - 2,5,management-handler-thread]
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResourceFromRoot(OperationContextImpl.java:832)
[Host Controller] 	at org.jboss.as.controller.transform.ResourceTransformationContextImpl.create(ResourceTransformationContextImpl.java:64)
[Host Controller] 	at org.jboss.as.controller.transform.TransformersImpl.transformOperation(TransformersImpl.java:88)
[Host Controller] 	at org.jboss.as.controller.TransformingProxyController$Factory$1.transformOperation(TransformingProxyController.java:102)
[Host Controller] 	at org.jboss.as.controller.TransformingProxyController$TransformingProxyControllerImpl.transformOperation(TransformingProxyController.java:153)
[Host Controller] 	at org.jboss.as.domain.controller.operations.coordination.MultiphaseOverallContext.transformServerOperation(MultiphaseOverallContext.java:176)
[Host Controller] 	at org.jboss.as.domain.controller.operations.coordination.DomainRolloutStepHandler$2.execute(DomainRolloutStepHandler.java:315)
[Host Controller] 	at org.jboss.as.domain.controller.plan.ServerTaskExecutor.executeTask(ServerTaskExecutor.java:83)
[Host Controller] 	at org.jboss.as.domain.controller.plan.ConcurrentServerGroupUpdateTask.execute(ConcurrentServerGroupUpdateTask.java:53)
[Host Controller] 	at org.jboss.as.domain.controller.plan.AbstractServerGroupRolloutTask$1.run(AbstractServerGroupRolloutTask.java:63)
[Host Controller] 	at org.jboss.as.domain.controller.plan.AbstractServerGroupRolloutTask$1.run(AbstractServerGroupRolloutTask.java:59)
[Host Controller] 	at java.security.AccessController.doPrivileged(Native Method)
[Host Controller] 	at javax.security.auth.Subject.doAs(Subject.java:360)
[Host Controller] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
[Host Controller] 	at org.jboss.as.domain.controller.plan.AbstractServerGroupRolloutTask.run(AbstractServerGroupRolloutTask.java:59)
[Host Controller] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
[Host Controller] 	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Host Controller] 	at java.lang.Thread.run(Thread.java:745)
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1086,,,,,,0.0,1.0,,1|hzyji7:,9223372036854775807,,,,"In the {{domain.conf}} add {{-ea}} to the {{HOST_CONTROLLER_JAVA_OPTIONS}} or just execute {{export HOST_CONTROLLER_JAVA_OPTIONS=""-ea""}} before starting domain. Then start up CLI and execute the following command.
{code}
/profile=default/subsystem=logging:write-attribute(name=use-deployment-logging-config, value=true)
{code}",,,,,,,"18/Sep/15 1:41 PM;brian.stansberry;The issue here (as James debugged) is the domain rollout stuff is run in threads unassociated with the OperationContext, but the transformation work those threads do is using a ref to the OC to read the model.

The OC should not be being handed out to other threads. The reads that need to happen for transformation should occur before the rollout tasks get started, with the result of the reads provided to the tasks, not the OC itself.",,,,,,,,,,,,,,,,,,,,,,,,,,
java.lang.StringIndexOutOfBoundsException when empty string is used in a resource address value,WFCORE-987,12585297,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,tremes,brian.stansberry,17/Sep/15 3:14 PM,02/Oct/15 11:46 AM,29/Nov/16 3:53 PM,02/Oct/15 11:46 AM,1.0.0.Alpha11,1.0.0.Alpha9,,,,,2.0.0.CR6,,Domain Management,,,,,0,,,,,,"Following copied from WFCORE-212 shows a StringIndexOutOfBounds being thrown when the empty string is the 'value' passed to PathElement.pathElement(key, value). The point of this JIRA is not to correct the reason for that empty string, but rather to fail cleanly (probably with the same logic used for the value == null case.)

Following steps to reproduce section you will encounter this exception:
{noformat}
15:25:04,304 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: java.lang.StringIndexOutOfBoundsException: String index out of range: 0
	at java.lang.String.charAt(String.java:646) [rt.jar:1.8.0_20]
	at org.jboss.as.controller.PathElement.<init>(PathElement.java:102) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.PathElement.pathElement(PathElement.java:67) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.PlaceholderResource$PlaceholderResourceEntry.<init>(PlaceholderResource.java:141) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.messaging.HornetQServerResource.getChildren(HornetQServerResource.java:184)
	at org.jboss.as.controller.registry.AbstractModelResource$DelegateResource.getChildren(AbstractModelResource.java:280) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:252) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:254) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:254) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:213) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.ModelControllerImpl.writeModel(ModelControllerImpl.java:640) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.OperationContextImpl.createPersistenceResource(OperationContextImpl.java:381) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:577) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:803) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:778) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:535) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:303) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1158) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:404) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:301) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.server.ServerService.boot(ServerService.java:364) [wildfly-server-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.server.ServerService.boot(ServerService.java:339) [wildfly-server-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:263) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_20]
{noformat}","WildFly-9.0.0.Alpha2-SNAPSHOT 2014-11-03, oracle-jdk 1.8.0_20",,,,,,,,,,,,,,,WFLY-5357,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1125,,,,,,0.0,0.0,,1|hzyjgv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add-user script should reject weak passwords,WFCORE-986,12585195,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Rejected,dlofthouse,mkopecky,mkopecky,17/Sep/15 5:25 AM,21/Sep/15 1:24 PM,29/Nov/16 3:53 PM,21/Sep/15 1:24 PM,2.0.0.Beta4,,,,,,2.0.0.CR2,,Security,,,,,0,,,,,,"*Description of problem:*
Add-user script should reject weak passwords. Users should use stronger passwords to improve security. Restriction of password should be same as in EAP 6.4.x.
* Restriction policy is defined in jboss-eap-7.0/bin/add-user.properties
** {{password.restriction=WARN}} should be replaced by {{password.restriction=REJECT}}

*How reproducible:*
Always

*Steps to Reproduce:*
# ./add-user.sh -u ccc -p ddd -s

*Actual results:*
No error.

*Expected results:*
{noformat}WFLYDM0053: Password must have at least 8 characters!{noformat}",,,,,,,,,,,,,,,,JBEAP-1094,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,1.0,,1|hzyiv3:,9223372036854775807,,,,,,,,,,,21/Sep/15 1:24 PM;dlofthouse;Current behaviour is as requested by [~jason.greene],,,,,,,,,,,,,,,,,,,,,,,,,,
different startup behaviour: commandline parameters and jboss.properties files,WFCORE-985,12470945,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,,herb,herb,23/Jul/12 5:16 AM,15/Dec/15 10:29 PM,29/Nov/16 3:53 PM,15/Dec/15 10:29 PM,,,,,,,,,Domain Management,,,,,0,,,,,,"Starting my domain with
${JBOSS_HOME}/bin/domain.sh -Djboss.domain.base.dir=/domain1
the host-controller.log and process-controller.log are written (as expected) to /domain1/log

But starting my domain with
${JBOSS_HOME}/bin/domain.sh --properties=/domain1/jboss.properties
where /domain1/jboss.properties contains following line
jboss.domain.base.dir=/domain1

the host-controller.log and process-controller.log are written to ${JBOSS_HOME}/domain/log

The same result (logfiles are written to ${JBOSS_HOME}/domain/log) with /domain1/jboss.properties with following two lines:
  jboss.domain.base.dir=/domain1
  jboss.domain.log.dir=/domain1/log

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hz49y7:,85346,,,,,,,,,,,"15/Dec/15 10:29 PM;brian.stansberry;I don't foresee us fixing this.

This is because the VM configures java.util.logging before the WildFly process has a chance to see the --properties param and parse the file. The properties that affect the logging behavior have to be passed via -D, either on the command line or via domain.conf.

To improve this we'd have to either:

1) Detect --properties in domain.sh | domain.ps1, open and parse the file in the script and pass -D to the VM launch. We're not going to do this.

2) Strip the .sh | .ps1 scripts down to almost nothing and launch a small ""launcher"" process that in turn has all the logic currently in the scripts, and in turn launches the regular process currently launched by the scripts. The launcher process could then deal with --properties. It's possible (not IMHO probable) we'll do the launcher process some day, and if we do we can revisit this.",,,,,,,,,,,,,,,,,,,,,,,,,,
"Scripts for running EAP as service on RHEL contains unsupported option ""reload"" in help message",WFCORE-984,12585059,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,mkopecky,mkopecky,16/Sep/15 4:25 AM,20/Oct/15 4:00 PM,29/Nov/16 3:53 PM,20/Oct/15 4:00 PM,2.0.0.Beta4,,,,,,2.0.0.CR8,,Scripts,,,,,0,,,,,,"*Description of problem:*
wildfly-init-redhat.sh contains reload option in help message, but this option is not supported by the script and returns usage message.

*How reproducible:*
Always

*Steps to Reproduce:*
# cd EAP_HOME/bin/init.d/
# ./wildfly-init-redhat.sh reload

*Actual results:*
{noformat}Usage: ./wildfly-init-redhat.sh {start|stop|status|restart|reload}{noformat}

*Expected results:*
Reload option is not in ""Usage message"" or reload option is supported by the script.

*Additional info:*
* Name of this script will be renamed in EAP (JBEAP-763)
* 6.x bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=977794
* Part of script (case for reload is missing):
{noformat}
...
case ""$1"" in
	start)
		start
		;;
	stop)
		stop
		;;
	restart)
		$0 stop
		$0 start
		;;
	status)
		status
		;;
	*)
		## If no parameters are given, print which are avaiable.
		echo ""Usage: $0 {start|stop|status|restart|reload}""
		exit 1
		;;
esac
{noformat}",,,,,,,,,,,,,,,,JBEAP-1078,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1176,,,,,,0.0,1.0,,1|hzyi27:,9223372036854775807,,,,,,,,,,,20/Oct/15 5:50 AM;ctomc;sent PR that removes the wrong message.,,,,,,,,,,,,,,,,,,,,,,,,,,
RemoteDomainConnectionService uses out of date HostInfo data when reconnecting,WFCORE-981,12585033,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,luck3y,brian.stansberry,brian.stansberry,15/Sep/15 9:02 PM,21/Sep/15 2:56 PM,29/Nov/16 3:53 PM,21/Sep/15 2:56 PM,2.0.0.Beta7,,,,,,2.0.0.CR2,,Domain Management,,,,,0,,,,,,"When RemoteDomainConnectionService starts, it calculates a ""hostInfo"" ModelNode that among other things includes data about what addresses the host is ignoring, and what server groups and socket binding groups are relevant to it if it is ignoring resources unrelated to its servers.

Problem is, this data is never updated if the host's config changes, so if the host needs to reconnect to the master, it sends out-of-date data to the master, and also uses out of date data to process the info that comes back from the master.

We need to figure out how to refresh that data for each connection to the master.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1091,,,,,,0.0,0.0,,1|hzyhwf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The capability registry fails to rollback properly,WFCORE-980,12585007,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ehugonnet,ehugonnet,ehugonnet,15/Sep/15 2:30 PM,17/Sep/15 9:33 AM,29/Nov/16 3:53 PM,16/Sep/15 12:37 PM,2.0.0.Beta7,,,,,,2.0.0.CR2,,Domain Management,,,,,0,,,,,,"If we register an already registered capability at a new RegistrationPoint and the operation rollbacks the registry still has the new RegistrationPoint.
The publishedFullRegistry should be a deep copy of the registry:

Reproducer working with the WFCORE-949 pr:
{code:java}
/socket-binding-group=standard-sockets/socket-binding=management-native:add(port=9999, interface=management)
/core-service=management/management-interface=native-interface:add(socket-binding=native-management, security-realm=ManagementRealm) 
/core-service=management/management-interface=native-interface:add(socket-binding=management-native, security-realm=ManagementRealm)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1073,,,,,,0.0,2.0,,1|hzyhrb:,9223372036854775807,,,,,,,,,,,"16/Sep/15 12:39 PM;brian.stansberry;I already resolved this, but can you add a unit test of this in the controller module test suite? AbstractCapabilityResolutionTestCase has infrastructure for this kind of testing.",17/Sep/15 9:33 AM;ehugonnet;https://github.com/wildfly/wildfly-core/pull/1076 for a simple test,,,,,,,,,,,,,,,,,,,,,,,,,
Build unnecessarily creates domain/data dir,WFCORE-978,12584713,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,11/Sep/15 11:16 AM,15/Sep/15 3:49 PM,29/Nov/16 3:53 PM,15/Sep/15 3:49 PM,2.0.0.Beta7,,,,,,2.0.0.CR1,,Server,,,,,0,,,,,,"The build has been creating a dir in the domain tree going all the way back to very early days when it wasn't clear there wouldn't be a ""deployments"" dir analogous to standalone/deployments:

https://github.com/wildfly/wildfly-core/commit/9d2b1ac81c29b629b0426836d4dbe743e016d73f

Since then the name of the dir has been tweaked twice as people tried to guess what the point of it was, leading via a kind of game of telephone to the build now creating domain/data/content, something completely different from any ""deployments"" dir used by a scanner.

We don't precreate standalone/data/content and shouldn't need to precreate domain/data/content.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1059,,,,,,0.0,0.0,,1|hzyg0n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Parameter completion for  :write-attribute is broken,WFCORE-977,12584625,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,aloubyansky,brian.stansberry,jason.greene,10/Sep/15 2:39 PM,10/Sep/15 5:36 PM,29/Nov/16 3:53 PM,10/Sep/15 5:36 PM,2.0.0.Beta7,,,,,,2.0.0.Beta7,,CLI,,,,,0,,,,,,"When I try to use tab completion to add parameters to ""write-attribute"" , it does not suggest any param values but instead just closes the parameter list.

For example:

:write-attribute(name=n)",,,,,,,,,,,,,,,,,,,,,WFCORE-942,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1054,,,,,,0.0,0.0,,1|hzyfhz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deployment fails with missing/unavailable dependencies,WFCORE-976,12564686,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,thomas.diesler,thomas.diesler,03/Mar/15 7:33 AM,09/Sep/15 7:11 PM,29/Nov/16 3:53 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Our testsuite bootstraps the server and then waits for the native management interface to become available on 8181

A subsequent deployment (intermittently) fails with 

{code}
domain-master> [Host Controller] [0m[0m05:09:40,678 INFO  [org.jboss.as.repository] (management-handler-thread - 2) JBAS014900: Content added at location /opt/jboss/wildfly/domain/data/content/ef/3743938a6b38a2ae473f12778fef7ad0ce464c/content[0m
domain-slave> [Server:server-one] [0m[31m05:09:41,654 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 5) JBAS014613: Operation (""deploy"") failed - address: ([(""deployment"" => ""domain-endpoint.war"")]) - failure description: {""JBAS014771: Services with missing/unavailable dependencies"" => [""jboss.deployment.unit.\""domain-endpoint.war\"" is missing [jboss.deployment.chains]""]}[0m
{code}

There seems to be a missing guarantee that allows the management endpoint to answer deployment requests when the deployment chain services are not up.

CrossLink: https://github.com/wildfly-extras/wildfly-camel/issues/175",,,,,,,,,,,,,,,,,,,,WFCORE-184,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzvapj:,9223372036854775807,,,,,,,,,,,03/Mar/15 1:32 PM;brian.stansberry;I assume WFLY-4401 is the same basic scenario as WFCORE-184.,"04/Mar/15 7:54 AM;thomas.diesler;Yes, it is relate to the same race. The management endpoint becomes available while the services it relies on are still starting up. IMHO, there should be a notion on BOOTSTRAP_COMPLETE that is a prerequisite for client connectors to become available. ",,,,,,,,,,,,,,,,,,,,,,,,,
Cli calls leak memory in Host Controller when reading children names in domain mode,WFCORE-974,12577224,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dmlloyd,michael.noack,michael.noack,07/Jul/15 9:06 AM,04/May/16 3:22 PM,29/Nov/16 3:53 PM,10/Sep/15 2:14 PM,,,,,,,2.0.0.Beta7,,Domain Management,Remoting,,,,0,,,,,,"Calling the cli using the command:
{{jboss-cli.sh --connect  --user=""myuser"" --password=""mypassword"" --command="":read-children-names(child-type=host)""}}
leaks memory to old gen. Eventually the host controller goes OOM if called to often.","CentOS 6.5:
# java -version
java version ""1.7.0_79""
OpenJDK Runtime Environment (rhel-2.5.5.2.el7_1-x86_64 u79-b14)
OpenJDK 64-Bit Server VM (build 24.79-b02, mixed mode)

CentOS 7.0:
# java -version
java version ""1.7.0_80""
Java(TM) SE Runtime Environment (build 1.7.0_80-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)",,,,,,,,,,,REM3-208,,,,,,,,,,,,,,,07/Jul/15 9:15 AM;michael.noack;host-controller-jvm.png;https://issues.jboss.org/secure/attachment/12390877/host-controller-jvm.png,,,,,User Experience,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1050,,,,,,1.0,9.0,,1|hzxb13:,9223372036854775807,,,,"- Download {{wildfly-9.0.0.Final.zip}}
- Unpack
- Create a management user
- Start wildfly using {{bin/domain.sh}}
- Call the script {{bin/jboss-cli.sh}} with the command {{:read-children-names(child-type=host)}} time and time again, example:
{{while true; do jboss-cli.sh --connect --user=""myuser"" --password=""mypassword"" --command="":read-children-names(child-type=host)"" && sleep 2; done}}
- Monitor the jvm and see lots of space taken in eden, propagated to old gen by gc and never getting collected from there",,,,,Workaround Exists,Use -Djboss.remoting.pooled-buffers=false on the command line to disable the byte buffer pooling.,"08/Jul/15 11:07 AM;aloubyansky;Since it's the HC which is running out of memory, it's not the CLI codebase.","08/Jul/15 4:44 PM;brian.stansberry;Thanks, Michael, for the report!

Preliminary indication is org.xnio.ByteBufferSlicePool is leaking itself to its 'localQueueHolder' ThreadLocal.

A ByteBufferSlicePool gets allocated each time a channel is opened; i.e. once per loop iteration in the ""Steps to reproduce"" script.","08/Jul/15 6:31 PM;brian.stansberry;Note that the description talks about connecting to a Host Controller, but the same problem would happen with a standalone server. The specific management operation invoked is not relevant; it's the process of connecting to the server that leads to the problem.","09/Jul/15 12:03 PM;michael.noack;Thanks a lot for handling the issue that fast. Looks like the workaround is working.

There is still memory leaking to old gen, but a lot less. Once old gen fills up, it looks like the jvm is able to collect most of it. It's hard to tell if everything gets collected after just two full gc events in 7 hours. I will have the test keep running over the weekend and see if the instance survives with reasonable amount of memory used in old gen on average.","13/Jul/15 6:06 AM;michael.noack;So I ran a stress test of 4 days doing as many cli operations as the VM would support per minute (roughly a hundred) on plain wildfly-9.0.0.Final using the workaround. The JVMs heap is still looking healthy. So it looks like the memory leak is really limited to the issue identified by Brian Stansberry.

Looking forward to repeat the test without the workaround once 10.0.0.Beta1 has been released.","13/Jul/15 9:45 AM;brian.stansberry;Thank you very much for testing that, Michael.",19/Apr/16 11:32 PM;proesler_ucsd;I noticed the zabbix monitoring on the Host Controller png.  Could someone provide the template or the URL to the template to monitor this?  The work around has worked splendidly however I would like to get this monitored in my zabbix as well.  This would be very helpful to our group as well.,"26/Apr/16 8:10 AM;michael.noack;[~proesler_ucsd] Sorry for the late reply. I had to first get approval to release the template and the relevant scripts and to be honest forgot about it once I got it for a few days.
 -Since github seems to have trouble at the moment, I published it to gitlab:- https://gitlab.com/noamik/wildfly-jvm-monitor

Edit:
I pushed the code and template to github: https://github.com/noamik/wildfly-jvm-monitor",04/May/16 3:22 PM;proesler_ucsd;Thank you very much Michael!!!,,,,,,,,,,,,,,,,,,
JMX - Non string attributes dont work well with expressions & min/max,WFCORE-973,12543947,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,elguardian,ctomc,ctomc,16/Jun/14 6:17 AM,10/Sep/15 7:44 AM,29/Nov/16 3:53 PM,,,,,,,,,,Domain Management,JMX,,,,0,,,,,,"See ModelControllerMBeanTestCase.java:255

problem is in conversion of attributes and when we have expressions jmx attribute type becomes String even if AD is of type INT
And if attribute has min/max setting mbean fails validation upon creation

I am not actually sure how we can fix this.",,,,,,,,,,,,,,,,,,,,,,,,,,,20/Aug/14 4:58 AM;elguardian;stacktrace.log;https://issues.jboss.org/secure/attachment/12384271/stacktrace.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,4.0,,1|hzrxy7:,9223372036854775807,,,,,,,,,,,"20/Aug/14 6:58 AM;elguardian;Attached the stack trace.
The SimpleTypeConverter calculates the opentype as String if the AD allows an expression. That makes the situation odd for simple types.  
The consistency of the attributes is checked during the creation of the openmbean. If these conversions from simple types (INT) to strings take place and there is a min-max constraint, then it could throw an exception.

Example: 
AD defined as INT (allows expressions) {defaultValue :5, minValue = 4, maxValue= 10}
 
Those numbers are converted to Strings. That means the creation fails: defaultValue > maxValue (String comparison ""5"" > ""10""). 

I cannot see a solution without overwriting the openmbean behavior (standard java rt lib).",09/Sep/15 6:27 PM;brian.stansberry;[~elguardian] Please make the preceding comment public.,"09/Sep/15 6:40 PM;brian.stansberry;I don't see how this situation:

AD defined as INT (allows expressions)
{defaultValue :5, minValue = 4, maxValue= 10}

results in the attached stack trace.

MBeanInfoFactory.getParameterInfos doesn't try to store minValue or maxValue in the descriptor if the parameter supports expressions.

Please provide a test case that reproduces the problem, or a full failure report from a current test case.","10/Sep/15 7:44 AM;elguardian;Hi [~brian.stansberry]

The example is already in the test case of JMX.  You need to uncomment a few things in the test case:

https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/jmx/src/test/java/org/jboss/as/jmx/ModelControllerMBeanTestCase.java#L290
https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/jmx/src/test/java/org/jboss/as/jmx/ModelControllerResourceDefinition.java#L211

I think the problem is in here (type converter is not taking into account the allowed expressions var of the model)
https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/jmx/src/main/java/org/jboss/as/jmx/model/MBeanInfoFactory.java#L298

This returns AD string opentype as the type converter allows expressions ¿¿?? 
https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/jmx/src/main/java/org/jboss/as/jmx/model/TypeConverters.java#L154
(variable expressions in TypeConverter object is true ->  all values for the openmbean will be converted)

After that it fails to construct the openmbean information. (OpenMBeanParameterInfoSupport). The opentype is String so default values are converted from INT to STRING.

It only happens with param4 because it is the only one with default value
https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/jmx/src/test/java/org/jboss/as/jmx/ModelControllerResourceDefinition.java#L210

I hope this helps.

",,,,,,,,,,,,,,,,,,,,,,,
"Deploying a CLI archive that contains ""module add"" commands results in ""WFLYCTL0155: steps may not be null"" when using the CLI GUI",WFCORE-970,12568495,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,paulnuk3,paulnuk3,15/Apr/15 10:19 AM,22/Sep/15 7:57 AM,29/Nov/16 3:53 PM,22/Sep/15 7:57 AM,,,,,,,2.0.0.CR4,,CLI,,,,,0,,,,,,"When using the CLI GUI to deploy a CLI archive that contains ""module add"" commands in its deploy.scr script, the following error message occurs:

{code}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0155: steps may not be null"",
    ""rolled-back"" => true
}
{code}

The modules still get created successfully even though the above error messages appears. Note that this error only occurs when using the CLI GUI. Using the CLI without the --gui option works fine.

Deploying the attached CLI archive using the CLI GUI will result in the above error message.
",,,,,,,,,,,,,,,,,,,,,,,,,,,15/Apr/15 10:20 AM;paulnuk3;install-mojarra-1.2_15.cli;https://issues.jboss.org/secure/attachment/12388907/install-mojarra-1.2_15.cli,,,,,Compatibility/Configuration,,,,,,,,,,,,,,,,,https://developer.jboss.org/wiki/StepsToAddAnyNewJSFImplementationOrVersionToWildFly#comment-14719,,,https://github.com/wildfly/wildfly-core/pull/1078,,,,,,1.0,4.0,,1|hzvwkv:,9223372036854775807,,,,"Running on Windows 7

Download WildFly 8.2.0 Final src

Build a multi-jsf module as documented here: 

https://developer.jboss.org/wiki/StepsToAddAnyNewJSFImplementationOrVersionToWildFly

Specifically:

cd c:\wildfly-8.2.0.Final-src\wildfly-8.2.0.Final-src\jsf\multi-jsf-installer
mvn -Djsf-version=1.2_15 -Pmojarra-1.2 clean assembly:single

The maven target builds a cli archive which you rename from zip to cli and then attempt to deploy from the command line/command line gui.

When you do this you get the following error:

deploy install-mojarra-1.2_15.cli
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""JBAS014746: steps may not be null"",
    ""rolled-back"" => true
}",,,,,,,15/Apr/15 10:20 AM;paulnuk3;Example file to deploy built by mvn,16/Apr/15 4:33 AM;paulnuk3;Tested on 9.0.0 Beta 2 as well - identical behaviour,"17/Apr/15 1:40 PM;fjuma;This error only seems to occur when using the CLI GUI. However, note that the new JSF implementation still gets installed successfully even though this error message occurs. To verify this, after seeing the error message, restart the server and execute the following CLI command:

{code}
/subsystem=jsf:list-active-jsf-impls()
{code}

You should see mojarra-1.2_15 in the output.

When the CLI GUI isn't used, the CLI archive deploys successfully, without any error messages, i.e., the following commands do work (verified this on Windows as well):

{code}
./bin/jboss-cli.sh --connect (for Windows, use .\bin\jboss-cli.bat --connect)
deploy install-mojarra-1.2_15.cli
{code}

I'm going to update this JIRA's title and description accordingly.","22/Apr/15 3:41 AM;paulnuk3;Confirmed that the deploy does work correctly for me, it's just a spurious error when using the GUI (no error on raw CLI)",,,,,,,,,,,,,,,,,,,,,,,
WriteAttributeHandler needs to add steps to the top of the queue,WFCORE-968,12584309,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,brian.stansberry,brian.stansberry,08/Sep/15 5:24 PM,08/Sep/15 7:27 PM,29/Nov/16 3:53 PM,08/Sep/15 7:27 PM,2.0.0.Beta6,,,,,,2.0.0.Beta7,,Domain Management,,,,,0,,,,,,"WriteAttributeHandler is adding a bunch of steps that make up elements of its Stage.MODEL execution, but it isn't adding them with the 'addFirst' param set to true. This means the effective order of model changes within a composite op is not going to match the logical order of the steps in the op, and step 2 might not execute with the expected starting state.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1045,,,,,,0.0,0.0,,1|hzydl3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
list-xxx and map-xxx do not work in a composite,WFCORE-967,12584305,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,kabirkhan,kabirkhan,08/Sep/15 3:50 PM,08/Sep/15 7:27 PM,29/Nov/16 3:53 PM,08/Sep/15 7:27 PM,2.0.0.Beta6,,,,,,2.0.0.Beta7,,Domain Management,,,,,1,,,,,,"When running e.g. a series of map-add operations in a composite, only the last step takes effect. e.g.:
{code}
Model Before: {
    ""deployment"" => undefined,
    ""subsystem"" => {""test-subsystem"" => {
        ""properties"" => {
            ""one"" => ""A"",
            ""two"" => ""B"",
            ""three"" => ""C""
        },
        ""test"" => ""Hello""
    }}
}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""map-remove"",
            ""address"" => [(""subsystem"" => ""test-subsystem"")],
            ""name"" => ""properties"",
            ""key"" => ""one""
        },
        {
            ""operation"" => ""map-remove"",
            ""address"" => [(""subsystem"" => ""test-subsystem"")],
            ""name"" => ""properties"",
            ""key"" => ""two""
        },
        {
            ""operation"" => ""map-remove"",
            ""address"" => [(""subsystem"" => ""test-subsystem"")],
            ""name"" => ""properties"",
            ""key"" => ""three""
        }
    ]
}
Model After: {
    ""deployment"" => undefined,
    ""subsystem"" => {""test-subsystem"" => {
        ""properties"" => {
            ""one"" => ""A"",
            ""two"" => ""B""
        },
        ""test"" => ""Hello""
    }}
}
{code}
The same happens with map-put, map-remove, list-add and list-remove when used in a composite. I have added some more tests to https://github.com/kabir/wildfly-core/blob/map-operation-composite/controller/src/test/java/org/jboss/as/controller/operation/global/CollectionOperationsTestCase.java to demonstrate the problem. These tests should be expanded to cover more of the map operations when used in a composite.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1045,,,,,,0.0,0.0,,1|hzydk7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
In domain mode non existing subhandler is saved to attributes.,WFCORE-966,12583440,Bug,Reopened,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,pcyprian,pcyprian,01/Sep/15 9:32 AM,18/Sep/15 12:38 PM,29/Nov/16 3:53 PM,,,,,,,,,,Logging,,,,,0,,,,,,"When you in domain mode in created async handler add non existing sub handler to attributes it is successfully saved. In standalone mode it is not possible (subhandler is not saved - saving operation failed).
1.Run EAP in domain mode (default profile)
2.Create async handler
3.Try to add non existing subhandler to async handler attributes
4.Try the same in standalone mode with standalone-full-ha profile",Running unsecured EAP 7.0.0 DR9 version in domain mode.,,,,,,,,,,,,,,,JBEAP-967,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzy97b:,9223372036854775807,,,,"1.Run EAP in domain mode (default profile)
2.Create async handler
3.Try to add non existing subhandler to async handler attributes
4.Try the same in standalone mode with standalone-full-ha profile",,,,,,,"08/Sep/15 6:13 AM;heiko.braun;It's a subsystem issue, not a UI problem: The verification of existing handlers rewquires a running server. In standalone this condition is explicitly given, in the domain (when using the 'default' profile) no server is runnning. 

If you try a different test fixture, based on a profile that has a running server, you'll see the same result in both standalone and domain.",08/Sep/15 8:25 AM;pjelinek;According to the last comment it's subsystem issue.,"18/Sep/15 12:38 PM;jamezp;The issue is the profile isn't running and therefore runtime stage steps are not run. In some cases validation only runs at runtime since it's the best place to validate whether or not something like a handler exists. Some thought would have to go into the best way to validate this. It won't allow the profile to actually boot as it would fail in the runtime stages.

I'll leave this unscheduled for now as it's likely fixable, just needs to be well thought out.",,,,,,,,,,,,,,,,,,,,,,,,
"""Writes closed"" when deploying application in domain",WFCORE-965,12584170,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,brian.stansberry,simkam,simkam,07/Sep/15 9:53 AM,21/Dec/15 11:04 AM,29/Nov/16 3:53 PM,21/Dec/15 11:04 AM,2.0.0.Beta6,,,,,,,,Domain Management,,,,,0,,,,,,"Some of our tests for large domain sometimes fail with error: ""Writes closed"". It happens only with some higher number of servers per host. 
{noformat}
Failed response:
{
    ""outcome"" => ""failed"",
    ""result"" => {
        ""step-1"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-2"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-3"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        }
    },
    ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {
        ""server-group-A"" => {""host"" => {
            ""perf31"" => {
                ""perf31-server-3"" => ""Writes closed"",
                ""perf31-server-5"" => ""Writes closed""
            },
            ""perf33"" => {""perf33-server-3"" => ""Writes closed""}
        }},
        ""server-group-B"" => {""host"" => {""perf32"" => {
            ""perf32-server-2"" => ""Writes closed"",
            ""perf32-server-6"" => ""Writes closed""
        }}}
    }}},
    ""rolled-back"" => true,
    ""server-groups"" => {
        ""server-group-A"" => {""host"" => {
            ""perf31"" => {
                ""perf31-server-1"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-3"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => ""Writes closed"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-5"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => ""Writes closed"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-7"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-9"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            },
            ""perf32"" => {
                ""perf32-server-1"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-3"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => undefined,
                    ""rolled-back"" => true
                }},
                ""perf32-server-5"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-7"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-9"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            },
            ""perf33"" => {
                ""perf33-server-1"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-3"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => ""Writes closed"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-5"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-7"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-9"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            }
        }},
        ""server-group-B"" => {""host"" => {
            ""perf31"" => {
                ""perf31-server-10"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-2"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => undefined,
                    ""rolled-back"" => true
                }},
                ""perf31-server-4"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => undefined,
                    ""rolled-back"" => true
                }},
                ""perf31-server-6"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf31-server-8"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            },
            ""perf32"" => {
                ""perf32-server-10"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-2"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => ""Writes closed"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-4"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => undefined,
                    ""rolled-back"" => true
                }},
                ""perf32-server-6"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => undefined,
                    ""failure-description"" => ""Writes closed"",
                    ""rolled-back"" => true
                }},
                ""perf32-server-8"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            },
            ""perf33"" => {
                ""perf33-server-10"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-2"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-4"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-6"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }},
                ""perf33-server-8"" => {""response"" => {
                    ""outcome"" => ""failed"",
                    ""result"" => {""step-1"" => {
                        ""outcome"" => ""failed"",
                        ""rolled-back"" => true
                    }},
                    ""failure-description"" => ""WFLYCTL0063: Composite operation was rolled back"",
                    ""rolled-back"" => true
                }}
            }
        }}
    }
}
{noformat}

I know this isn't detailed bug report, I didn't find easy way to reproduce it, other than running large domain tests. Tests are modified tests from https://github.com/wildfly/wildfly/blob/master/testsuite/domain/src/test/java/org/jboss/as/test/integration/domain/suites/DeploymentManagementTestCase.java .

I can provide other logs, outputs ...., just let me know which log categories would help. 

Also I tried to play a bit with remoting's HEARTBEAT interval (through subsystem configuration), but that doesn't help. ","domain
profile=default
1x domain controller without servers
3x slave, 10 servers each",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzycr3:,9223372036854775807,,,,,,,,,,,07/Sep/15 10:04 AM;ctomc;Do you maybe have stacktrace that occurs?,"08/Sep/15 7:01 AM;simkam;stacktrace from one of slaves
{noformat}
2015-09-08 06:47:23,049 DEBUG [org.jboss.as.protocol] (Host Controller Service Threads - 124) active-op (1367836977) failed org.jboss.as.controller.remote.TransactionalProtocolClientImpl$ExecuteRequestContext@541c0a2: org.jboss.remoting3.NotOpenException: Writes closed
        at org.jboss.remoting3.remote.RemoteConnectionChannel.openOutboundMessage(RemoteConnectionChannel.java:117)
        at org.jboss.remoting3.remote.RemoteConnectionChannel.writeMessage(RemoteConnectionChannel.java:306)
        at org.jboss.as.protocol.mgmt.AbstractMessageHandler$1.writeMessage(AbstractMessageHandler.java:214)
        at org.jboss.as.protocol.mgmt.AbstractManagementRequest.sendRequest(AbstractManagementRequest.java:51)
        at org.jboss.as.controller.remote.TransactionalProtocolClientImpl$CompleteTxRequest.sendRequestInternal(TransactionalProtocolClientImpl.java:290)
        at org.jboss.as.controller.remote.TransactionalProtocolClientImpl$CompleteTxRequest.access$500(TransactionalProtocolClientImpl.java:242)
        at org.jboss.as.controller.remote.TransactionalProtocolClientImpl$CompleteTxRequest$1.execute(TransactionalProtocolClientImpl.java:264)
        at org.jboss.as.protocol.mgmt.AbstractMessageHandler$1$1.doExecute(AbstractMessageHandler.java:176)
        at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}",21/Dec/15 11:04 AM;brian.stansberry;Turns out this was an environmental issue in the test lab; see recent comments on JBEAP-1042.,,,,,,,,,,,,,,,,,,,,,,,,
CapabilityRegistryResourceDefinition provides inconsistent ordering of output,WFCORE-961,12584077,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,04/Sep/15 6:16 PM,08/Sep/15 7:25 PM,29/Nov/16 3:53 PM,08/Sep/15 7:25 PM,2.0.0.Beta6,,,,,,2.0.0.Beta7,,Domain Management,,,,,0,,,,,,"The output from CapabilityRegistryResourceDefinition is inconsistently ordered. We want consistent output between reads.

The RegistrationPoints are stored in CapabilityRegistration in a LinkedHashSet, but when they are provided to CapabilityRegistryResourceDefinition they get put in a plain HashSet.

The capabilities themselves are not stored in any order, but when provided to CapabilityRegistryResourceDefinition they could be ordered.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1039,,,,,,0.0,0.0,,1|hzyc6v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CapabilityRegistryResourceDefinition is ignoring CapabilityScope in its reporting,WFCORE-960,12584075,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,brian.stansberry,brian.stansberry,04/Sep/15 6:00 PM,30/Jun/16 8:30 PM,29/Nov/16 3:53 PM,30/Jun/16 8:30 PM,2.0.0.Beta6,,,,,,3.0.0.Alpha3,,Domain Management,,,,,0,,,,,,"The keys for the different registrations in the CapabilityRegistry is their id, which is a combination of their name and their CapabilityScope. CapabilityRegistryResourceDefinition when it reports the registrations is ignoring the scope.

For WildFly Core 2.0.0.CR1 I'm going to disable registration of CapabilityRegistryResourceDefinition. We don't have specific management client use of this management API yet and it can still use some massaging, so committing ourselves to supporting the current API for many years isn't worth it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1554,,,,,,0.0,0.0,,1|hzyc6f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handling of ManagementResourceRegistration runtimeOnly is broken,WFCORE-959,12584074,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,04/Sep/15 5:55 PM,09/Sep/15 5:10 PM,29/Nov/16 3:53 PM,09/Sep/15 5:10 PM,2.0.0.Beta6,,,,,,2.0.0.Beta7,,Domain Management,,,,,0,,,,,,"NodeSubregistry is always passing 'false' as the runtimeOnly param for ConcreteResourceRegistrations it creates.

The param isn't actually needed, since the ResourceDefinition is also a param, and the value can be pulled from it.

Also, since we now have proper facilities for setting up a runtimeOnly ResourceDefinition, the MRR.setRuntimeOnly() method should be deprecated and all core uses of it converted.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1038,,,,,,0.0,0.0,,1|hzyc67:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wildfly not respecting subdeployment dependency order,WFCORE-957,12584046,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,briehman,briehman,04/Sep/15 12:48 PM,02/Mar/16 5:44 PM,29/Nov/16 3:53 PM,,,,,,,,,,Server,,,,,0,,,,,,"When loading an EAR with {{initialize-in-order}} set to {{true}} within the {{application.xml}} and subdeployment dependencies defined in{{jboss-deployment-structure.xml}}, Wildfly does not load the EAR modules in order as specified nor as defined by the dependencies.

I have attached both a [source repository|https://github.com/briehman/wildfly-deployment-order] and the generated EAR. The {{application.xml}} and {{jboss-deployment-structure.xml}} are as below:

{code}
<?xml version=""1.0"" encoding=""UTF-8""?>
<application xmlns=""http://java.sun.com/xml/ns/javaee"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd"" version=""6"">
  <display-name>ear</display-name>
  <initialize-in-order>true</initialize-in-order>
  <module>
    <web>
      <web-uri>webapp-one-1.0-SNAPSHOT.war</web-uri>
      <context-root>/one</context-root>
    </web>
  </module>
  <module>
    <web>
      <web-uri>webapp-two-1.0-SNAPSHOT.war</web-uri>
      <context-root>/two</context-root>
    </web>
  </module>
  <module>
    <web>
      <web-uri>webapp-three-1.0-SNAPSHOT.war</web-uri>
      <context-root>/three</context-root>
    </web>
  </module>
</application>
{code}

{code}
<jboss-deployment-structure xmlns=""urn:jboss:deployment-structure:1.2"">
    <sub-deployment name=""webapp-one-1.0-SNAPSHOT.war"">
    </sub-deployment>
    <sub-deployment name=""webapp-two-1.0-SNAPSHOT.war"">
        <dependencies>
            <module name=""deployment.wildfly-deployment-order.ear.webapp-one-1.0-SNAPSHOT.war"" />
        </dependencies>
    </sub-deployment>
    <sub-deployment name=""webapp-three-1.0-SNAPSHOT.war"">
        <dependencies>
            <module name=""deployment.wildfly-deployment-order.ear.webapp-two-1.0-SNAPSHOT.war"" />
        </dependencies>
    </sub-deployment>
</jboss-deployment-structure>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,04/Sep/15 12:41 PM;briehman;wildfly-deployment-order.ear;https://issues.jboss.org/secure/attachment/12392621/wildfly-deployment-order.ear,04/Sep/15 12:40 PM;briehman;wildfly-deployment-order.tar.gz;https://issues.jboss.org/secure/attachment/12392622/wildfly-deployment-order.tar.gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,0.0,,1|hzybzz:,9223372036854775807,,,,"Load the attached EAR in wildfly (or build from the attached source).
Wildfly does not load the modules in the order {{webapp-one -> webapp-two -> webapp-three}}. Instead, you may see something like:

{code}
11:27:31,046 INFO  MSC service thread 1-1 [deployment] JBAS015973: Starting subdeployment (runtime-name: ""webapp-two-1.0-SNAPSHOT.war"")
11:27:31,046 INFO  MSC service thread 1-1 [deployment] JBAS015973: Starting subdeployment (runtime-name: ""webapp-three-1.0-SNAPSHOT.war"")
11:27:31,047 INFO  MSC service thread 1-1 [deployment] JBAS015973: Starting subdeployment (runtime-name: ""webapp-one-1.0-SNAPSHOT.war"")
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Server is not responding after attempt to set parent of profile to non-existent profile,WFCORE-955,12583029,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,brian.stansberry,mkopecky,mkopecky,27/Aug/15 10:34 AM,04/Sep/15 9:33 AM,29/Nov/16 3:53 PM,04/Sep/15 9:33 AM,2.0.0.Beta5,,,,,,2.0.0.Beta6,,Domain Management,,,,,0,,,,,,"*Description of problem:*
Server is not responding after attempt to set parent of profile to non-existent profile. 

Server is not responding also after attempt to set parent of socket-binding-group to non-existent socket-binding-group.

This works correctly on wildfly-core (2.0.0.Beta4). But this occurs on wildfly (master branch) and on EAP 7.0.0.DR9. It may be some integration issue.

Priority of this jira tends to be critical.

*How reproducible:*
Always

*Steps to Reproduce (profile):*
# Get fresh EAP
# ./domain.sh
# ./jboss-cli.sh
## /profile=new:add()
## /profile=new:write-attribute(name=includes,value=\[nonsence\])
## /profile=new:remove

*Actual results:*
{noformat}
[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""java.lang.NullPointerException:null""
}
[domain@localhost:9990 /] /profile=new:remove

{noformat}
* server needs to be restarted

*Expected results:*
{noformat}
[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0369: Required capabilities are not available:
    org.wildfly.domain.profile.nonsence in context 'profiles'""},
    ""rolled-back"" => true
}
[domain@localhost:9990 /] /profile=new:remove
{
    ""outcome"" => ""success"",
    ""result"" => undefined,
    ""server-groups"" => undefined
}
{noformat}

*Steps to reproduce (socket-binding-group):*
# Get fresh EAP
# ./domain.sh
# ./jboss-cli.sh
## /profile=new:add()
## /socket-binding-group=testt:add(default-interface=public,includes=\[nonsence\])
## /profile=new:remove",,,,,,,,,,,,,,,,JBEAP-904,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1032,,,,,,0.0,3.0,,1|hzy6rj:,9223372036854775807,,,,,,,,,,,03/Sep/15 4:22 AM;mkopecky;[~kabirkhan]: this issue is still valid for Wildfly master (it use WF-Core 2.0.0.Beta5). Do you have time estimation for this issue?,"03/Sep/15 5:23 AM;kabirkhan;I am looking into it, but have no idea what is going on yet, so I have no estimate. I noticed that current WildFly Core master on its own works properly, and the place where it prints out the expected error message is at the following location:
{code}
requiredCapabilityMissing():3710, ControllerLogger_$logger {org.jboss.as.controller.logging}
validateCapabilities():353, OperationContextImpl {org.jboss.as.controller}
stageCompleted():267, OperationContextImpl {org.jboss.as.controller}
processStages():602, AbstractOperationContext {org.jboss.as.controller}
executeOperation():362, AbstractOperationContext {org.jboss.as.controller}
{code}

On WildFly master built both with the core version from master, and a snapshot from the core master, it fails with the NPE earlier in validateCapabilities():
{code}
storeIncludes():127, IncludingResourceCapabilityContext {org.jboss.as.controller.capability.registry}
getIncludingContexts():74, IncludingResourceCapabilityContext {org.jboss.as.controller.capability.registry}
resolveCapabilities():587, CapabilityRegistry {org.jboss.as.controller}
validateCapabilityRegistry():1212, ModelControllerImpl$ManagementModelImpl {org.jboss.as.controller}
validateCapabilities():277, OperationContextImpl {org.jboss.as.controller}
stageCompleted():267, OperationContextImpl {org.jboss.as.controller}
processStages():602, AbstractOperationContext {org.jboss.as.controller}
executeOperation():362, AbstractOperationContext {org.jboss.as.controller}
{code}

A side-effect of the NPE was that the controller write lock never got released (i.e. why the remove was hanging) and has a fix at https://github.com/wildfly/wildfly-core/compare/wildfly:master...kabir:WFLY-5225?expand=1.

To reproduce the NPE, I have removed all the servers from my local host.xml, and trimmed down the domain.xml. I can reproduce the NPE with the following domain.xml:
{code}
<?xml version='1.0' encoding='UTF-8'?>

<domain xmlns=""urn:jboss:domain:4.0"">

    <extensions>
        <extension module=""org.jboss.as.logging""/>
        <extension module=""org.wildfly.extension.io""/>
        <extension module=""org.wildfly.extension.undertow""/>
    </extensions>

    <system-properties>
        <property name=""java.net.preferIPv4Stack"" value=""true""/>
    </system-properties>

    <management>
        <access-control provider=""simple"">
            <role-mapping>
                <role name=""SuperUser"">
                    <include>
                        <user name=""$local""/>
                    </include>
                </role>
            </role-mapping>
        </access-control>
    </management>

    <profiles>
        <profile name=""default"">
            <subsystem xmlns=""urn:jboss:domain:logging:3.0"">
                <console-handler name=""CONSOLE"">
                    <level name=""INFO""/>
                    <formatter>
                        <named-formatter name=""COLOR-PATTERN""/>
                    </formatter>
                </console-handler>
                <periodic-rotating-file-handler name=""FILE"" autoflush=""true"">
                    <formatter>
                        <named-formatter name=""PATTERN""/>
                    </formatter>
                    <file relative-to=""jboss.server.log.dir"" path=""server.log""/>
                    <suffix value="".yyyy-MM-dd""/>
                    <append value=""true""/>
                </periodic-rotating-file-handler>
                <logger category=""com.arjuna"">
                    <level name=""WARN""/>
                </logger>
                <logger category=""org.apache.tomcat.util.modeler"">
                    <level name=""WARN""/>
                </logger>
                <logger category=""org.jboss.as.config"">
                    <level name=""DEBUG""/>
                </logger>
                <logger category=""sun.rmi"">
                    <level name=""WARN""/>
                </logger>
                <root-logger>
                    <level name=""INFO""/>
                    <handlers>
                        <handler name=""CONSOLE""/>
                        <handler name=""FILE""/>
                    </handlers>
                </root-logger>
                <formatter name=""PATTERN"">
                    <pattern-formatter pattern=""%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n""/>
                </formatter>
                <formatter name=""COLOR-PATTERN"">
                    <pattern-formatter pattern=""%K{level}%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n""/>
                </formatter>
            </subsystem>
            <subsystem xmlns=""urn:jboss:domain:io:1.1"">
                <worker name=""default""/>
                <buffer-pool name=""default""/>
            </subsystem>
            <subsystem xmlns=""urn:jboss:domain:undertow:3.0"">
                <buffer-cache name=""default""/>
                <server name=""default-server"">
                    <http-listener name=""default"" redirect-socket=""https"" socket-binding=""http""/>
                    <host name=""default-host"" alias=""localhost"">
                        <location name=""/"" handler=""welcome-content""/>
                        <filter-ref name=""server-header""/>
                        <filter-ref name=""x-powered-by-header""/>
                    </host>
                </server>
                <servlet-container name=""default"">
                    <jsp-config/>
                    <websockets/>
                </servlet-container>
                <handlers>
                    <file name=""welcome-content"" path=""${jboss.home.dir}/welcome-content""/>
                </handlers>
                <filters>
                    <response-header name=""server-header"" header-value=""WildFly/10"" header-name=""Server""/>
                    <response-header name=""x-powered-by-header"" header-value=""Undertow/1"" header-name=""X-Powered-By""/>
                </filters>
            </subsystem>
        </profile>
        <profile name=""new""/>
    </profiles>

    <interfaces>
        <interface name=""management""/>
        <interface name=""public""/>
        <interface name=""unsecure""/>
    </interfaces>

    <socket-binding-groups>
        <socket-binding-group name=""standard-sockets"" default-interface=""public"">
            <socket-binding name=""ajp"" port=""${jboss.ajp.port:8009}""/>
            <socket-binding name=""http"" port=""${jboss.http.port:8080}""/>
            <socket-binding name=""https"" port=""${jboss.https.port:8443}""/>
            <socket-binding name=""txn-recovery-environment"" port=""4712""/>
            <socket-binding name=""txn-status-manager"" port=""4713""/>
            <outbound-socket-binding name=""mail-smtp"">
                <remote-destination host=""localhost"" port=""25""/>
            </outbound-socket-binding>
        </socket-binding-group>
    </socket-binding-groups>

    <server-groups>
        <server-group name=""main-server-group"" profile=""default"">
            <jvm name=""default"">
                <heap size=""64m"" max-size=""512m""/>
            </jvm>
            <socket-binding-group ref=""standard-sockets""/>
        </server-group>
    </server-groups>

</domain>
{code}

If I comment out the undertow subsystem, I get the expected ""WFLYCTL0369: Required capabilities are not available: org.wildfly.domain.profile.nonsence in context 'profiles'"" message.
","03/Sep/15 11:22 AM;kabirkhan;[~brian.stansberry] Take https://github.com/wildfly/wildfly-core/compare/wildfly:master...kabir:WFLY-5225?expand=1 as my issue, and use the domain.xml above with all servers removed from host.xml.

The issue is that the undertow adds the capability profile=default/org.wildfly.undertow.listener.default which depends on org.wildfly.network.socket-binding.http, which is a ProfileChildCapabilityScope. n the loop in CapabilityRegistry.resolveCapabilities() it calls findSatisfactoryCapability() which returns a SatisfactoryCapability with a multipleCapabilities with size 1, and the only entry is now a SocketBindingGroupChildScope. Since the SatisfactoryCapability.multipleCapabilities != null it ends up calling dependentContest.getIncludingScopes() (the dependentContext is of type ProfileChildCapabilityScope), and so when it reaches storeIncludes() called with key='new' it blows up  since there is no 'nonsense' profile.

There also might be a slight race condition since if I don't debug I always get the NPE, and if I debug really slowly I think I have seen it give the 'proper' error message instead.

In core on its own this does not happen since there is no undertow causing this behaviour. 
",,,,,,,,,,,,,,,,,,,,,,,,
Server is not responding after attempt to set parent of profile to non-existent profile,WFCORE-954,12583843,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Duplicate Issue,kabirkhan,mkopecky,kabirkhan,03/Sep/15 10:30 AM,03/Sep/15 11:08 AM,29/Nov/16 3:53 PM,03/Sep/15 11:08 AM,2.0.0.Beta5,,,,,,2.0.0.Beta6,,Domain Management,,,,,0,,,,,,"This is a clone of WFLY-5225 to make sure that if the fix is in core, that we track it with this one.

*Description of problem:*
Server is not responding after attempt to set parent of profile to non-existent profile. 

Server is not responding also after attempt to set parent of socket-binding-group to non-existent socket-binding-group.

This works correctly on wildfly-core (2.0.0.Beta4). But this occurs on wildfly (master branch) and on EAP 7.0.0.DR9. It may be some integration issue.

Priority of this jira tends to be critical.

*How reproducible:*
Always

*Steps to Reproduce (profile):*
# Get fresh EAP
# ./domain.sh
# ./jboss-cli.sh
## /profile=new:add()
## /profile=new:write-attribute(name=includes,value=\[nonsence\])
## /profile=new:remove

*Actual results:*
{noformat}
[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""java.lang.NullPointerException:null""
}
[domain@localhost:9990 /] /profile=new:remove

{noformat}
* server needs to be restarted

*Expected results:*
{noformat}
[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0369: Required capabilities are not available:
    org.wildfly.domain.profile.nonsence in context 'profiles'""},
    ""rolled-back"" => true
}
[domain@localhost:9990 /] /profile=new:remove
{
    ""outcome"" => ""success"",
    ""result"" => undefined,
    ""server-groups"" => undefined
}
{noformat}

*Steps to reproduce (socket-binding-group):*
# Get fresh EAP
# ./domain.sh
# ./jboss-cli.sh
## /profile=new:add()
## /socket-binding-group=testt:add(default-interface=public,includes=\[nonsence\])
## /profile=new:remove",,,,,,,,,,,,,,,,WFCORE-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,1.0,,1|hzyatz:,9223372036854775807,,,,,,,,,,,03/Sep/15 11:08 AM;kabirkhan;Duplicate of WFCORE-955,,,,,,,,,,,,,,,,,,,,,,,,,,
LDAP context resource leaks in Picketbox,WFCORE-951,12583675,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,pskopek,jcacek,jcacek,03/Sep/15 5:44 AM,04/Jan/16 11:37 AM,29/Nov/16 3:53 PM,04/Jan/16 11:37 AM,2.0.0.Beta5,,,,,,2.0.5.Final,,Security,,,,,0,,,,,,"There are several {{InitialLdapContext}} resource leaks in LDAP related code in PicketBox.

The most critical is IMO leak in `LdapLoginModule.createLdapInitContext()` method. LDAP connections will stay open for customers who use administrators bind (i.e. {{java.naming.security.principal}} login module option for the Ldap login module).

The problematic code seems like:
{code:java}
InitialLdapContext ctx = null;
try
{
   //...
   ctx = new InitialLdapContext(env, null);
   if (PicketBoxLogger.LOGGER.isTraceEnabled())
   {
      PicketBoxLogger.LOGGER.traceSuccessfulLogInToLDAP(ctx.toString());
   }

   if (bindDN != null)
   {
      // Rebind the ctx to the bind dn/credentials for the roles searches
      PicketBoxLogger.LOGGER.traceRebindWithConfiguredPrincipal(bindDN);
      env.setProperty(Context.SECURITY_PRINCIPAL, bindDN);
      env.put(Context.SECURITY_CREDENTIALS, bindCredential);
      ctx = new InitialLdapContext(env, null);
   }
   // ...
}
finally
{
   // Close the context to release the connection
   if (ctx != null)
      ctx.close();
   // ...
}
{code}

The first constructed {{InitialLdapContext}} is not closed before creating the ""admin context"".

The other PicketBox classes which have weak handling of the {{InitialLdapContext}} are:
* {{LdapContextHandler}}
* {{LdapAttributeMappingProvider}}
",,,,,,,,,,,,,,,,JBEAP-989,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzyal3:,9223372036854775807,I'm going to resolve this against 2.0.5 although it may have been an early 2.0.x release. The related JBEAP issue is verified and the code for this is in sync between the branches so for the JBEAP to be fixed this one must be as well.,,,,,,,,,,09/Oct/15 2:54 PM;dlofthouse;[~pskopek] You have the JBEAP issue and PicketBox PR - could you please move this either to PicketBox or WildFly and link as appropriate for the PR.,"23/Oct/15 2:00 PM;brian.stansberry;What the status on this? It's an unscheduled Blocker, so it either has to be scheduled or made a non-blocker.

I suspect it's already fixed.",,,,,,,,,,,,,,,,,,,,,,,,,
Embedded server started non-modular use first passed --jboss-home value only,WFCORE-950,12583667,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,03/Sep/15 5:05 AM,16/Dec/15 5:39 PM,29/Nov/16 3:53 PM,16/Dec/15 5:39 PM,2.0.0.Beta4,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"First value passed as --jboss-home to embed server instance (must be an existing directory) is always used for modules lookup and server standard paths setup within single CLI session.

# Use wrong directory on first try, use correct directory on second try, embedded instance still tries to boot from wrong directory
{noformat}$ pwd
/home/pkremens/workspace/jboss-eap-7.0/bin/client
$ java -jar jboss-cli-client.jar 

[disconnected /] embed-server --jboss-home=/home/pkremens/workspace/jboss-eap-7.0/bin
Cannot start embedded server: WFLYEMB0014: Cannot load module org.jboss.vfs from: local module loader @500e80c2 (finder: local module finder @75670fc4 (roots: /home/pkremens/workspace/jboss-eap-7.0/bin/modules)): org.jboss.vfs:main

# server still tries to use /home/pkremens/workspace/jboss-eap-7.0/bin
[disconnected /] embed-server --jboss-home=/home/pkremens/workspace/jboss-eap-7.0    
Cannot start embedded server: WFLYEMB0014: Cannot load module org.jboss.vfs from: local module loader @500e80c2 (finder: local module finder @75670fc4 (roots: /home/pkremens/workspace/jboss-eap-7.0/bin/modules)): org.jboss.vfs:main
{noformat}
# Try to manage multiple EAP distros
{noformat}
/home/pkremens/workspace2
├── eap1
│   └── jboss-eap-7.0
└── eap2
    └── jboss-eap-7.0

$ java -jar jboss-cli-client.jar 

[disconnected /] embed-server --jboss-home=/home/pkremens/workspace2/eap1/jboss-eap-7.0 --server-config=eap1.xml --empty-config
[standalone@embedded /] stop-embedded-server 

[disconnected /] embed-server --jboss-home=/home/pkremens/workspace2/eap2/jboss-eap-7.0 --server-config=eap2.xml --empty-config

# jboss.server.*.dir point to eap1, but should point to eap2
[standalone@embedded /] /path=*:read-attribute(name=path)
...
            ""address"" => [(""path"" => ""jboss.server.log.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0

            ""address"" => [(""path"" => ""jboss.server.data.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/data""

            ""address"" => [(""path"" => ""jboss.server.base.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone""

            ""address"" => [(""path"" => ""jboss.server.config.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration""

            ""address"" => [(""path"" => ""jboss.server.temp.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/tmp""

            ""address"" => [(""path"" => ""jboss.controller.temp.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/tmp""

            ""address"" => [(""path"" => ""jboss.home.dir"")],
            ""result"" => ""/home/pkremens/workspace2/eap2/jboss-eap-7.0""
...
# Both configuration files were created in eap1 directory
$ find /home/pkremens/workspace2 | grep eap[12].xml
/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration/eap2.xml
/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration/eap1.xml
{noformat}
",,,,,,,,,,,,,,,,JBEAP-985,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,4.0,,1|hzyajb:,9223372036854775807,,,,,,,,,,,"03/Sep/15 8:58 AM;brian.stansberry;[~luck3y] I've scheduled this for 3 as I suspect it may not be easily solved, although it's fine to fix it for 2 if other stuff is done.

I suspect once all the modular classloading is set up once it can't be readily discarded.

A better failure would be good though.","19/Oct/15 2:51 PM;jamezp;I'm not sure where the PR so that's the only reason for the ""rejection"".","03/Dec/15 2:23 PM;luck3y;Note as part of this, a couple of other issues surfaced:

- Restarting with a new --jboss-home continued to reference some files / directories in the previous running instance's --jboss-home (Should be fixed in this change).
- The initial boot.log is always the one that continues to receive logging. (Fix in progress).
- ModuleLoader: once loaded with getBootModuleLoader() continue to reference the initial modules directory.","16/Dec/15 5:39 PM;brian.stansberry;There's more to do in this area, but that can be captured in a separate issue as I've merged what will be done for WF Core 2.0.5 and WildFly 10.0.0.",,,,,,,,,,,,,,,,,,,,,,,
Removing http-interface autocompletes but fails,WFCORE-949,12583637,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,pkremens,pkremens,03/Sep/15 1:08 AM,21/Sep/15 2:59 PM,29/Nov/16 3:53 PM,21/Sep/15 2:59 PM,2.0.0.Beta5,,,,,,2.0.0.CR2,,Domain Management,,,,,0,affects_elytron,,,,,"Executing /core-service=management/management-interface=http-interface:remove() autocompletes but does not succeed. 

This is a link to a paste of the server stacktrace.
http://pastebin.test.redhat.com/310136",,,,,,,,,,,,,,,,JBEAP-980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1089,,,,,,0.0,3.0,,1|hzyacv:,9223372036854775807,,,,"On a fresh installation of EAP:
1. Start the standalone server
2. Connect to it through jboss-cli.sh
3. Run /core-service=management/management-interface=http-interface:remove()

The command fails:
Communication error: java.lang.InterruptedException: java.lang.InterruptedException",,,,,,,08/Sep/15 2:41 PM;ehugonnet;Fixing by setting the server into reload-required mode to stop the socket effectively on reload.,14/Sep/15 12:20 PM;ehugonnet;Since removing this interface may impact the JMX subsystem we need a capability to define a management endpoint .,"17/Sep/15 2:54 PM;brian.stansberry;A possible workaround for this is to have the remove handlers for this and native-interface add a Stage.MODEL step to do a manual model validation. The step would check for the presence of the /subsystem=jmx/remoting-connector=jmx resource and if present, check for the presence of either /core-service=management/management-interface=native-interface or /core-service=management/management-interface=http-interface with http-upgrade=true.

The manual validation can be removed when the necessary capability stuff is done.

The handlers should put the process in restart-required; they shouldn't directly remove the services.

",,,,,,,,,,,,,,,,,,,,,,,,
Multiprocess wildcard read-resource-description does not work,WFCORE-948,12583632,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,brian.stansberry,brian.stansberry,02/Sep/15 9:43 PM,21/Nov/16 4:29 AM,29/Nov/16 3:53 PM,06/Oct/15 11:59 AM,2.0.0.Beta5,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"{code}
[domain@localhost:9990 /] /host=master/server=*/interface=public:read-resource-description
{
    ""outcome"" => ""failed"",
    ""result"" => [
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""*""),
                (""interface"" => ""public"")
            ],
            ""outcome"" => ""failed"",
            ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
            ""rolled-back"" => true
        },
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""server-one""),
                (""interface"" => ""public"")
            ],
            ""outcome"" => ""failed"",
            ""result"" => undefined,
            ""rolled-back"" => true
        },
        {
            ""address"" => [
                (""host"" => ""master""),
                (""server"" => ""server-two""),
                (""interface"" => ""public"")
            ],
            ""outcome"" => ""failed"",
            ""result"" => undefined,
            ""rolled-back"" => true
        }
    ],
    ""failure-description"" => ""WFLYCTL0285: Operation read-resource-description invoked against multiple target addresses failed at address [
    (\""host\"" => \""master\""),
    (\""server\"" => \""*\""),
    (\""interface\"" => \""public\"")
] with failure description WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
    ""rolled-back"" => true
}
{code}

In the HC log:

{code}
[Host Controller] 20:37:28,277 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""read-resource-description"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""server"" => ""*""),
[Host Controller]     (""interface"" => ""public"")
[Host Controller] ]): java.lang.NullPointerException
[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.getResourceRegistrationCheckForAlias(ReadResourceDescriptionHandler.java:391)
[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.doExecuteInternal(ReadResourceDescriptionHandler.java:189)
[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.doExecute(ReadResourceDescriptionHandler.java:161)
[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.access$300(ReadResourceDescriptionHandler.java:97)
[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$2.execute(ReadResourceDescriptionHandler.java:411)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:854)
{code}

The handling for this doesn't have the stuff I did for WFCORE-282.",,,,,,,,,,,,,,,,,,,,,WFCORE-2022,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1122,,,,,,0.0,0.0,,1|hzyabr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot start embedded host controller in non-modular classloading environment,WFCORE-945,12583562,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,luck3y,pkremens,pkremens,02/Sep/15 8:03 AM,21/Sep/15 4:17 AM,29/Nov/16 3:53 PM,21/Sep/15 3:58 AM,2.0.0.Beta4,,,,,,2.0.0.CR2,,CLI,Domain Management,,,,0,,,,,,"Trying to start embedded host controller inside CLI running i in non-modular classloading environment gives me NPE.
{noformat}
$ unzip -q jboss-eap-7.0.0.DR9.zip 
$ cd jboss-eap-7.0/bin/client/
$ pwd
/home/hudson/users-tmp/pkremens/jboss-eap-7.0/bin/client

$ java -jar jboss-cli-client.jar 
WARN: can't find jboss-cli.xml. Using default configuration values.
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.

[disconnected /] embed-server --jboss-home=/home/hudson/users-tmp/pkremens/jboss-eap-7.0
Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.
[standalone@embedded /] stop-embedded-server 

[disconnected /] embed-host-controller --jboss-home=/home/hudson/users-tmp/pkremens/jboss-eap-7.0
Failed to handle 'embed-host-controller --jboss-home=/home/hudson/users-tmp/pkremens/jboss-eap-7.0': java.lang.NullPointerException
{noformat}",,,,,,,,,,,,,,,,JBEAP-976,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,2.0,,1|hzy9xz:,9223372036854775807,,,,,,,,,,reinitialize the CLI session,"21/Sep/15 3:58 AM;luck3y;This currently works for me:

$ pwd
/home/kwills/git/wildfly/dist/target/wildfly-10.0.0.CR2-SNAPSHOT/bin/client

$  java -jar jboss-cli-client.jar 
WARN: can't find jboss-cli.xml. Using default configuration values.
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server --jboss-home=/home/kwills/git/wildfly/dist/target/wildfly-10.0.0.CR2-SNAPSHOT
Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.
[standalone@embedded /] ls 
core-service                               namespaces=[]                              
deployment                                 organization=undefined                     
...

[standalone@embedded /] stop-embedded-server 

[disconnected /] embed-host-controller --jboss-home=/home/kwills/git/wildfly/dist/target/wildfly-10.0.0.CR2-SNAPSHOT
02:39:38,539 INFO  [org.jboss.modules] (AeshProcess: 4) JBoss Modules version (unknown)
Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.
[domain@embedded /] ls
core-service                         launch-type=DOMAIN                   
deployment                           local-host-name=master               
...
[domain@embedded /] stop-embedded-host-controller 
[disconnected /] ","21/Sep/15 4:17 AM;pkremens;I can confirm, this works with the latest EAP build (based on WildFly Core 2.0.0.CR1).",,,,,,,,,,,,,,,,,,,,,,,,,
Parameter completion for :read-resource and :read-children-resources is broken,WFCORE-942,12583491,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,aloubyansky,brian.stansberry,brian.stansberry,01/Sep/15 4:48 PM,10/Sep/15 2:44 PM,29/Nov/16 3:53 PM,02/Sep/15 7:19 AM,2.0.0.Beta5,,,,,,2.0.0.Beta6,,CLI,,,,,0,,,,,,"When I try to use tab completion to add parameters to ""read-resource"" and ""read-children-resources"" operations, it does not suggest any params but instead just closes the parameter list.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1021,,,,,,0.0,3.0,,1|hzy9hz:,9223372036854775807,,,,,,,,,,,"01/Sep/15 6:38 PM;brian.stansberry;Seems there are other issues. From HipChat:

[5:02 PM] James R Perkins: Hmm... ...table-complete seems broken in CLI.
[5:29 PM] Scott Marlow: hmm, worked for me yesterday @jperkins
[5:30 PM] James R Perkins: I'm guessing it's recent. It somewhat works, but doing something like an :add(<TAB> just closes the parenthesis rather than showing parameters.
[5:31 PM] Scott Marlow: ahh, I was just hitting tab in /subsystem
[5:31 PM] James R Perkins: Yeah that part works. It might only be attribute names.

		5:32 PM
		James R Perkins didn't look for any recent changes
[5:34 PM] Scott Marlow: @jperkins I'm seeing the same now, entered "":read-resource-description("" and pressed tab, it just closes the parenthesis
[5:35 PM] James R Perkins: Now I actually have to remember attribute names :)","02/Sep/15 1:50 AM;aloubyansky;Sorry, the regression came with the PR for WFCORE-74.",02/Sep/15 7:19 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,
CLI gets fooled by early connection,WFCORE-940,12583256,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,pkremens,pkremens,31/Aug/15 8:20 AM,22/Sep/15 7:59 AM,29/Nov/16 3:53 PM,22/Sep/15 7:59 AM,2.0.0.Beta4,,,,,,2.0.0.CR4,,CLI,Domain Management,,,,0,,,,,,"CLI in confused by early connection to domain which is booting. CLI acts as I was connected to the standalone instance, some high level commands are not executable.

{noformat}
[pkremens@dhcp-10-40-5-149 bin]$ ./domain.sh
...
# run while domain is booting
[pkremens@dhcp-10-40-5-149 bin]$ ./jboss-cli.sh -c 
[standalone@localhost:9999 /]

# domain has fully booted

[standalone@localhost:9999 /] ls -l
ATTRIBUTE                VALUE                 TYPE   
launch-type              DOMAIN                STRING
...
[standalone@localhost:9999 /] shutdown --host=master
--host is not allowed in the standalone mode.
{noformat}",,,,,,,,,,,,,,,,JBEAP-952,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1079,,,,,,0.0,1.0,,1|hzy84f:,9223372036854775807,,,,,,,,,,,22/Sep/15 7:59 AM;aloubyansky;It should be fixed now. The CLI will be waiting until the server boot process has finished before displaying the prompt.,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded host controller should set launch type attribute to EMBEDDED,WFCORE-939,12583251,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,pkremens,pkremens,31/Aug/15 7:54 AM,18/Sep/15 8:29 PM,29/Nov/16 3:53 PM,18/Sep/15 8:29 PM,2.0.0.Beta4,,,,,,2.0.0.CR2,,CLI,Domain Management,,,,0,,,,,,"*DomainRootDefinition.java* always set launch type to {noformat}new LaunchTypeHandler(ServerEnvironment.LaunchType.DOMAIN){noformat} even if the host controller process is embedded. 

Looking into the LaunchType class, I believe that EMBEDDED value should be used.

{noformat}
    /** The manner in which a server can be launched */
    public static enum LaunchType {
        /** Launched by a Host Controller in a managed domain */
        DOMAIN(ProcessType.DOMAIN_SERVER),
        /** Launched from the command line */
        STANDALONE(ProcessType.STANDALONE_SERVER),
        /** Launched by another process in which the server is embedded */
        EMBEDDED(ProcessType.EMBEDDED_SERVER),
...
{noformat}
\\
*Additional info:*
{noformat}./standalone.sh
launch-type              STANDALONE
{noformat}
{noformat}./domain.sh
launch-type              DOMAIN
{noformat}
{noformat}[disconnected /] embed-server 
launch-type              EMBEDDED
{noformat}
{noformat}[disconnected /] embed-host-controller
launch-type              DOMAIN
{noformat}",,,,,,,,,,,,,,,,JBEAP-950,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1082,,,,,,0.0,1.0,,1|hzy83b:,9223372036854775807,,,,,,,,,,,"08/Sep/15 12:03 PM;brian.stansberry;Using ServerEnvironment.LaunchType to drive this attribute in the first place was incorrect IMO. If you look at the full use of the enum, it's clearly not related to HC processes.

Using ""DOMAIN"" for the standard non-embedded case isn't an ideal term, but since that's what we've reported in the past we should stick with that even if we change the enum to something HC-specific.",,,,,,,,,,,,,,,,,,,,,,,,,,
--std-out=discard for embedded host controller doesn't work,WFCORE-937,12583210,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,pkremens,pkremens,31/Aug/15 3:27 AM,22/Sep/15 7:49 PM,29/Nov/16 3:53 PM,22/Sep/15 7:49 PM,2.0.0.Beta4,,,,,,2.0.0.CR4,,CLI,Domain Management,,,,0,,,,,,"Embedded host controller always prints the logs to the console no matter which --std-out= value I choose.

{noformat}
[disconnected /] embed-host-controller --std-out=discard
09:22:06,627 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.3.Final
09:22:06,733 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final
09:22:06,758 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta4) starting
09:22:07,769 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=default/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
09:22:07,799 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=ha/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
09:22:07,824 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=full/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
09:22:07,843 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/profile=full-ha/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
09:22:08,067 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta4) (Host Controller) started in 1353ms - Started 25 of 27 services (8 services are lazy, passive or on-demand)
[domain@embedded /] stop-embedded-host-controller 
09:22:15,926 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta4) stopped in 5ms
[disconnected /] exit 
{noformat}",,,,,,,,,,,,,,,,JBEAP-942,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1109,,,,,,0.0,1.0,,1|hzy7un:,9223372036854775807,,,,,,,,,,,"22/Sep/15 1:49 PM;jamezp;The {{org.jboss.logmanager.console.ConsoleHandler}} initiates a static [{{stdout}} and {{stderr}}|https://github.com/jboss-logging/jboss-logmanager/blob/master/src/main/java/org/jboss/logmanager/handlers/ConsoleHandler.java#L35-L36] field. Since this class has already been initiated, it's using the ""correct""/default `System.out` stream.

In the [{{EmbedHostControllerHandler.configureLogContext()}}|https://github.com/wildfly/wildfly-core/blob/master/cli/src/main/java/org/jboss/as/cli/embedded/EmbedHostControllerHandler.java#L258-L278] we might need to exclude the console handler if `--std-out=discard` was defined. We should do this through the `LogContextConfiguration` API which I can help with if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,
"""Connection refused"" on FileSystemDeploymentServiceUnitTestCase and LoggingSubsystemRollbackTestCase on pure-IPv6",WFCORE-935,12583168,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,mkopecky,mkopecky,28/Aug/15 12:08 PM,12/Oct/15 11:51 AM,29/Nov/16 3:53 PM,02/Oct/15 11:18 AM,2.0.0.Beta4,,,,,,2.0.0.CR6,,Test Suite,,,,,0,,,,,,"*Description of problem:*
FileSystemDeploymentServiceUnitTestCase and LoggingSubsystemRollbackTestCase fail with ""java.net.ConnectException: Connection refused"" on pure-IPv6 machines.

*How reproducible:*
Always on pure-IPv6 machines

*Steps to Reproduce:*
# mvn install  -DfailIfNoTests=false  -Dtest=LoggingSubsystemRollbackTestCase,FileSystemDeploymentServiceUnitTestCase -DallTests -fae 

*Actual results:*
{noformat}
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:345)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at org.jboss.byteman.agent.submit.Submit$Comm.<init>(Submit.java:881)
	at org.jboss.byteman.agent.submit.Submit.submitRequest(Submit.java:787)
	at org.jboss.byteman.agent.submit.Submit.addScripts(Submit.java:603)
	at org.jboss.byteman.contrib.bmunit.BMUnit.loadScriptText(BMUnit.java:268)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$10.evaluate(BMUnitRunner.java:369)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$6.evaluate(BMUnitRunner.java:241)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:75)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}

*Expected results:*
No errors on output

*Affected tests:*
* org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase#testNoUndeployment
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackHandler
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackRemoveProfile
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackWriteAttribute
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackUpdateAttribute
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackCompositeLoggingProfile
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackLogger
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackRemove
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackAdd
* org.jboss.as.logging.LoggingSubsystemRollbackTestCase#testRollbackComposite",,,,,,,,,,,,,,,,JBEAP-939,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1135,,,,,,0.0,0.0,,1|hzy7lj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IPv6ScopeIdMatchUnitTestCase fails on some machines,WFCORE-934,12583163,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,brian.stansberry,mkopecky,mkopecky,28/Aug/15 11:36 AM,05/Feb/16 6:22 AM,29/Nov/16 3:53 PM,23/Nov/15 7:55 AM,2.0.0.Beta4,,,,,,,,Test Suite,,,,,0,,,,,,"*Description of problem:*
org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase#testNonLoopback in WildFly Core TS fails on Solaris11 SPARC.

*How reproducible:*
Always with this configuration on Solaris11 SPARC:
{noformat}
$ /usr/sbin/ifconfig -a
lo0: flags=2001000849<UP,LOOPBACK,RUNNING,MULTICAST,IPv4,VIRTUAL> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
net0: flags=100001000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4,PHYSRUNNING> mtu 1500 index 2
        inet 10.16.91.211 netmask fffff800 broadcast 10.16.95.255
net0:1: flags=100001000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4,PHYSRUNNING> mtu 1500 index 2
        inet 10.16.179.24 netmask fffff800 broadcast 10.16.183.255
net0:2: flags=100001000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4,PHYSRUNNING> mtu 1500 index 2
        inet 10.16.179.25 netmask fffff800 broadcast 10.16.183.255
net0:3: flags=100001000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4,PHYSRUNNING> mtu 1500 index 2
        inet 10.16.179.26 netmask fffff800 broadcast 10.16.183.255
net0:4: flags=100001000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4,PHYSRUNNING> mtu 1500 index 2
        inet 10.16.179.27 netmask fffff800 broadcast 10.16.183.255
lo0: flags=2002000849<UP,LOOPBACK,RUNNING,MULTICAST,IPv6,VIRTUAL> mtu 8252 index 1
        inet6 ::1/128 
net0: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 fe80::8:20ff:fe6d:eab1/10 
net0:1: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 fe80::8:20ff:fe6d:eab2/10 
net0:2: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 fe80::8:20ff:fe6d:eab0/10 
net0:3: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f::ffff:164/64 
net0:4: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f::ffff:165/64 
net0:5: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f::ffff:166/64 
net0:6: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f::ffff:167/64 
net0:7: flags=120002080841<UP,RUNNING,MULTICAST,ADDRCONF,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f:8:20ff:fe6d:eab0/64 
$
{noformat}

*Steps to Reproduce:*
# cd controller
# mvn test -fae -Dmaven.test.failure.ignore=true -DfailIfNoTests=false -Dtest=IPv6ScopeIdMatchUnitTestCase

*Actual results:*
* StackTrace:
{noformat}
java.lang.AssertionError: expected:</fe80:0:0:0:8:20ff:fe6d:eab0%net0:2> but was:<null>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.testNonLoopback(IPv6ScopeIdMatchUnitTestCase.java:129)
{noformat}

* Test output:
{noformat}
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab2%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address 2620:52:0:105f:8:20ff:fe6d:eab0%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab1%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address 2620:52:0:105f:0:0:ffff:167%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address 2620:52:0:105f:0:0:ffff:166%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address 2620:52:0:105f:0:0:ffff:165%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address 2620:52:0:105f:0:0:ffff:164%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab0%bogus, so cannot match it to any InetAddress
WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab0%net0:2, so cannot match it to any InetAddress
{noformat}",,,,,,,,,,,,,,,,JBEAP-937,,,,,WFCORE-794,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,8.0,,1|hzy7kf:,9223372036854775807,,,,,,,,,,,"28/Aug/15 12:15 PM;brian.stansberry;That stack trace does not match the code. Please clarify.

I believe the first line should be IPv6ScopeIdMatchUnitTestCase.java:128 but I am not certain.","28/Aug/15 12:30 PM;mkopecky;Yes, there should be IPv6ScopeIdMatchUnitTestCase.java:128. Sorry for misunderstanding, I probably used old version of wildfly-core.","28/Aug/15 12:40 PM;brian.stansberry;The ""WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab0%net0:2, so cannot match it to any InetAddress"" logging indicates that passing ""fe80:0:0:0:8:20ff:fe6d:eab0%net0:2"" to InetAddress.getByName() resulted in an UnknownHostException.
 
I can see how this test could fail if the setup() method stored a global IPv6 address in the ""addresses"" map, as passing a global IPv6 address string with a scope id appended into InetAddress.getByName() should result in UnknownHostException.

But fe80:0:0:0:8:20ff:fe6d:eab0 is a link-local IPv6 address. If passing that plus the the result of NetworkInterface.getName() appended as a scope-id to InetAddress.getByName() fails, that sounds like a JVM bug.",30/Aug/15 5:34 PM;brian.stansberry;[~mkopecky] WildFly Core master and the 2.0.0.Beta5 release has a tweak to this test that's meant to provide a bit better failure info. If you can still reproduce this can you post the failure stack trace and test output again? Thanks.,"31/Aug/15 4:01 AM;mkopecky;I can still reproduce this issue.

Failure stack trace with WildFly Core master:
{noformat}
java.lang.AssertionError: fe80:0:0:0:8:20ff:fe6d:eab0%net0:2 expected:</fe80:0:0:0:8:20ff:fe6d:eab0%net0:2> but was:<null>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.matchCriteriaTest(IPv6ScopeIdMatchUnitTestCase.java:142)
	at org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.testNonLoopback(IPv6ScopeIdMatchUnitTestCase.java:129)
{noformat}

Test output:
{noformat}
07:51:20,419 WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab2%bogus, so cannot match it to any InetAddress
07:51:20,463 WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab1%bogus, so cannot match it to any InetAddress
07:51:20,469 WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab0%bogus, so cannot match it to any InetAddress
07:51:20,473 WARN  (main) [org.jboss.as.controller.management-operation] <InetAddressMatchInterfaceCriteria.java:128> WFLYCTL0001: Cannot resolve address fe80:0:0:0:8:20ff:fe6d:eab0%net0:2, so cannot match it to any InetAddress
{noformat}

Java version (Solaris 11 SPARC):
{noformat}
$ java -version
java version ""1.8.0_40""
Java(TM) SE Runtime Environment (build 1.8.0_40-b25)
Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25, mixed mode)
$
{noformat}","31/Aug/15 10:40 AM;brian.stansberry;Looks like a JVM problem then. InetAddress.getByName(""fe80:0:0:0:8:20ff:fe6d:eab0%net0:2"") is not behaving in accordance with javadoc. It is throwing UnknownHostException when it should not. For a literal IPv6 address string that represents a link-local or site-local  it should only check the validity of the address format. The format is valid, as described at https://docs.oracle.com/javase/8/docs/api/java/net/Inet6Address.html#scoped which is linked in the InetAddress.getByName javadoc.

For an IPv6 literal address string with a scope_id appended, UnknownHostException should only be thrown if the address isn't a site-local or link-local address.

This test passes in the community CI runs: http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WildFlyCore&testNameId=5354999289145404852&tab=testDetails

There have been failures in the past. I haven't examined them all, but it looks like the failures were due to incorrectly testing global IPv6 addresses, which my patch fixed.

What's happening here is for an InetAddress 'address' obtained from inspecting the addresses available on the system, InetAddress.getByName(address.getHostAddress()) is throwing an UnknownHostException. That's clearly wrong.",18/Nov/15 3:55 PM;brian.stansberry;Note to self: perhaps the fact that there is a ':' in the scope-id (%net0:2) is relevant.,23/Nov/15 7:55 AM;mkopecky;Duplicite issue with WFCORE-794,,,,,,,,,,,,,,,,,,,
Embedded server start commands are lacking argument validation,WFCORE-933,12583128,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,luck3y,pkremens,pkremens,28/Aug/15 8:54 AM,21/Sep/15 2:59 PM,29/Nov/16 3:53 PM,21/Sep/15 2:59 PM,2.0.0.Beta4,,,,,,2.0.0.CR2,,CLI,Domain Management,,,,0,,,,,,"Commands for starting embedded instances are lacking argument validation.

{noformat}[disconnected /] embed-server foo
[standalone@embedded /]

[disconnected /] embed-server foo -foo
[standalone@embedded /]

[disconnected /] embed-server foo --foo
[standalone@embedded /]

[standalone@embedded /] stop-embedded-server foo
The command accepts 0 unnamed argument(s) but received: [foo]

[standalone@embedded /] stop-embedded-server -foo
Unrecognized arguments: [-foo]

[standalone@embedded /] stop-embedded-server --foo
Unrecognized arguments: [--foo]{noformat}

Same case for embedded host controller.",,,,,,,,,,,,,,,,JBEAP-931,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1088,,,,,,0.0,5.0,,1|hzy7d3:,9223372036854775807,,,,,,,,,,,"28/Aug/15 6:23 PM;brian.stansberry;I put some logic in there for that, but it was cut-and-paste from somewhere else and obviously wasn't done right.",28/Aug/15 6:56 PM;luck3y;I'll get a fix in for this in both embedded server types.,"03/Sep/15 5:20 AM;pkremens;Using configuration file without xml suffix blocks indefinitely, please take this into account during validation.
e.g.
{noformat}[disconnected /] embed-server --server-config=test --empty-config

""AeshProcess: 1@2471"" prio=5 tid=0x14 nid=NA waiting
  java.lang.Thread.State: WAITING
	  at java.lang.Object.wait(Object.java:-1)
	  at java.lang.Object.wait(Object.java:502)
	  at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)
	  at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)
	  at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:306)
	  at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)
	  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	  at java.lang.reflect.Method.invoke(Method.java:497)
	  at org.wildfly.core.embedded.EmbeddedServerReference.invokeOnServer(EmbeddedServerReference.java:80)
	  at org.wildfly.core.embedded.EmbeddedServerReference.start(EmbeddedServerReference.java:55)
	  at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:200)
	  at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	  at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:751)
	  at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)
	  at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)
	  at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
	  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	  at java.lang.Thread.run(Thread.java:745)
{noformat}","21/Sep/15 2:36 AM;luck3y;@pkremens I don't see the same blocking behaviour, this may have been resolved by another patch (for AESH etc). I've added some validation for embedded anyway, as it  will fail for other reasons, and opened https://issues.jboss.org/browse/WFCORE-991 to address those.
","21/Sep/15 3:00 AM;pkremens;You're right, re-tested with the latest EAP build (based on WildFly Core 2.0.0.CR1)  and this no longer blocks.",,,,,,,,,,,,,,,,,,,,,,
stop-embedded-server stops the embedded host controller and vice versa,WFCORE-932,12583124,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,luck3y,pkremens,pkremens,28/Aug/15 8:32 AM,23/Sep/15 8:56 PM,29/Nov/16 3:53 PM,23/Sep/15 8:56 PM,2.0.0.Beta4,,,,,,2.0.0.CR5,,CLI,Domain Management,,,,0,,,,,,"We have four new commands for controlling the lifecycle of embedded instances:
* *embed-server* - launch embedded standalone
* *stop-embedded-server* - stop embedded standalone
* *embed-host-controller* - launch embedded host
* *stop-embedded-host-controller* - stop embedded host
\\

I am able stop embedded standalone by *stop-embedded-host-controller* and embedded host controller by *stop-embedded-server*.

{noformat}
[disconnected /] embed-server 
[standalone@embedded /] stop-embedded-host-controller 
[disconnected /] embed-host-controller 
14:22:18,781 INFO  [org.jboss.modules] (AeshProcess: 15) JBoss Modules version 1.4.3.Final
[domain@embedded /] stop-embedded-server 
[disconnected /]
{noformat}
\\
A question comes to my mind, do we need two commands for stopping the embedded instance?
",,,,,,,,,,,,,,,,JBEAP-929,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1108,,,,,,0.0,0.0,,1|hzy7c7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded host-controller throws NPE on regular shutdown,WFCORE-931,12583118,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,28/Aug/15 8:00 AM,22/Sep/15 8:44 PM,29/Nov/16 3:53 PM,22/Sep/15 8:44 PM,2.0.0.Beta4,,,,,,2.0.0.CR4,,CLI,Domain Management,,,,0,,,,,,"Invoking the /host=master:shutdown operation on embedded host-controller gives me NPE.

*Standalone*
{noformat}
[standalone@embedded /] shutdown
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[standalone@embedded /] :shutdown
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0031: No operation named 'shutdown' exists at address []"",
    ""rolled-back"" => true
}
{noformat}
\\
*Domain*
Using operation style :shutdown throws NPE. Tab completion for this operation works, which could be a little bit misleading in this case.

{noformat}
[domain@embedded /] shutdown --host=master
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[domain@embedded /] /host=master:shutdown
13:34:57,512 ERROR [org.jboss.as.controller.management-operation] (AeshProcess: 3) WFLYCTL0013: Operation (""shutdown"") failed - address: ([(""host"" => ""master"")]): java.lang.NullPointerException
	at org.jboss.as.host.controller.DomainModelControllerService.stopLocalHost(DomainModelControllerService.java:911)
	at org.jboss.as.host.controller.DomainModelControllerService.stopLocalHost(DomainModelControllerService.java:903)
	at org.jboss.as.host.controller.operations.HostShutdownHandler$1.execute(HostShutdownHandler.java:89)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:846)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:637)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:362)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1296)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:395)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:212)
	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:661)
	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:651)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)
	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.execute(ThreadContextsModelControllerClient.java:59)
	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:85)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:728)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)
	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)
	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.NullPointerException"",
    ""rolled-back"" => true
}
[domain@embedded /] :read-resource
Failed to execute operation.: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available
[domain@embedded /] stop-embedded-host-controller 
13:35:19,252 ERROR [org.jboss.as.protocol] (AeshProcess: 5) WFLYPRT0003: Failed to close resource org.jboss.as.cli.embedded.ThreadContextsModelControllerClient@626966ee: java.lang.IllegalStateException: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.getActiveModelControllerClient(EmbeddedHostControllerFactory.java:331)
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.access$200(EmbeddedHostControllerFactory.java:225)
	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl$3.getDelegate(EmbeddedHostControllerFactory.java:309)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.close(DelegatingModelControllerClient.java:103)
	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.close(ThreadContextsModelControllerClient.java:139)
	at org.jboss.as.protocol.StreamUtils.safeClose(StreamUtils.java:66)
	at org.jboss.as.cli.impl.CommandContextImpl.disconnectController(CommandContextImpl.java:1165)
	at org.jboss.as.cli.embedded.StopEmbeddedHostControllerHandler.doHandle(StopEmbeddedHostControllerHandler.java:56)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:751)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)
	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)
	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{noformat}",,,,,,,,,,,,,,,,JBEAP-926,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1094,,,,,,0.0,3.0,,1|hzy7av:,9223372036854775807,,,,,,,,,,,11/Sep/15 5:44 AM;thofman;[~luck3y] I will take this in case you didn't start yet.,"11/Sep/15 6:49 AM;luck3y;I'm just about to work all of these embedded issues together, so I'd rather keep it.","11/Sep/15 7:10 AM;thofman;OK, reassigning back to you.",,,,,,,,,,,,,,,,,,,,,,,,
Missing help texts for embedded host controller,WFCORE-930,12583108,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,28/Aug/15 7:24 AM,22/Sep/15 8:44 PM,29/Nov/16 3:53 PM,22/Sep/15 8:44 PM,2.0.0.Beta4,,,,,,2.0.0.CR4,,CLI,Domain Management,,,,0,,,,,,"Help files for embedded host controller are missing.

{noformat}
[disconnected /] embed-host-controller --help
Failed to locate command description help/embed-host-controller.txt

[domain@embedded /] stop-embedded-host-controller --help
Failed to locate command description help/stop-embedded-host-controller.txt
{noformat}
",,,,,,,,,,,,,,,,JBEAP-919,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1100,,,,,,0.0,0.0,,1|hzy78v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI is terminated unexpectedly after type ""u"" on HPUX",WFCORE-929,12583098,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,stalep,mkopecky,mkopecky,28/Aug/15 6:40 AM,25/Jan/16 5:18 PM,29/Nov/16 3:53 PM,25/Jan/16 5:18 PM,2.0.0.Beta4,,,,,,2.0.8.Final,,CLI,,,,,0,,,,,,"*Description of problem:*
CLI is terminated unexpectedly after type ""qui"" on HPUX

*How reproducible:*
Always on HPUX

*Steps to Reproduce:*
# ./standalone.sh
# ./jboss-cli.sh -c
# qui
#* type ""qui"" in console to CLI, do not press ""enter""

*Actual results:*
CLI is terminated

*Expected results:*
CLI is not terminated",,,,,,,,,,,,,,,,JBEAP-916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1387,,,,,,0.0,6.0,,1|hzy76n:,9223372036854775807,,,,,,,,,,,"02/Oct/15 1:38 AM;dpospisil;My findings so far:
* Actually It's typing the 'u' character making the JVM to terminate
* The ""Aesh InputStream Reader"" seems to be causing the termination
* it happends somewhere on line AeshInputStream.readFromStream:126, it does not make it to line 127. Seems to be somewhere in JDK code. 

",05/Oct/15 8:52 AM;dpospisil;https://github.com/aeshell/aesh/blob/0.65.1/src/main/java/org/jboss/aesh/console/reader/AeshInputStream.java#L126,05/Oct/15 9:02 AM;aloubyansky;[~stalep] could you please give it a look? Any thoughts? Thanks.,"21/Jan/16 10:37 AM;stalep;thanks Petr for giving me access to the hpux box, i've managed to understand a bit better why this happens.
the previous version of aesh was setting the stty options: ""-ixon -icanon min 1"", the current version set these options: ""-ixon -icanon min 1 intr undef icrnl susp undef"".
so, with the new versions, pressing 'u' will terminate the java process. i havent debugged to find out which option that causes this yet, but ill have a 0.66.4-SNAPSHOT deployed within the evening for everyone to test.",21/Jan/16 6:17 PM;stalep;i've pushed out a 0.66.4-SNAPSHOT version that should fix this.,"22/Jan/16 2:35 AM;pkremens;0.66.4-SNAPSHOT fixes the issue, thanks!",,,,,,,,,,,,,,,,,,,,,
CLI is not terminated correctly with invalid address on HPUX,WFCORE-928,12583095,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,aloubyansky,mkopecky,mkopecky,28/Aug/15 6:32 AM,28/Aug/15 6:33 AM,29/Nov/16 3:53 PM,,2.0.0.Beta4,,,,,,,,CLI,,,,,0,,,,,,"*Description of problem:*
CLI is not terminated correctly with invalid address on HPUX.

*How reproducible:*
Always on HPUX

*Steps to Reproduce:*
# ./jboss-cli.sh -c --controller=nonsence

*Actual results:*
CLI is terminated after input on stdin.

*Expected results:*
CLI is terminated correctly.",,,,,,,,,,,,,,,,JBEAP-913,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,0.0,,1|hzy75z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ability to use proxy in MavenUtil,WFCORE-925,12582815,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,mkopecky,mkopecky,mkopecky,27/Aug/15 8:29 AM,28/Aug/15 7:15 PM,29/Nov/16 3:53 PM,28/Aug/15 7:15 PM,,,,,,,2.0.0.Beta5,,Test Suite,,,,,0,,,,,,"WildFly Core testsuite can be run on pure-IPv6 machines. Proxy could be used in that case.

But some tests use MavenUtil class for download some dependencies. And this class can not use proxy server. So these tests fail.

This MavenUtil should check ""proxyHost"" and ""proxyPort"" environment variables. If they are set, MavenUtil class should set proxy. If these variables are not set, proxy is not used. These variables are used by maven too.",,,,,,,,,,,,,,,,JBEAP-901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,0.0,,1|hzy6l3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unneeded cloning of model nodes when persisting the kernel configs,WFCORE-922,12582745,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,26/Aug/15 5:07 PM,24/Sep/15 4:00 AM,29/Nov/16 3:53 PM,28/Aug/15 6:36 PM,2.0.0.Beta4,,,,,,2.0.0.Beta5,,Domain Management,,,,,0,,,,,,"In the kernel part of domain.xml, host.xml and standalone.xml marshaling look to eliminate use of ModelNode.asPropertyList(), at least from spots where the ModelNode may be a large data structure. The asPropertyList() call results in a potentially expensive clone of data.",,,,,,,,,,,,,,,,,,,,,,,,WFCORE-921,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1257692,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1002,,,,,,0.0,0.0,,1|hzy66f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove n2 model node cloning in ServerOperationResolver,WFCORE-921,12582735,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,26/Aug/15 2:52 PM,24/Sep/15 4:00 AM,29/Nov/16 3:53 PM,28/Aug/15 6:36 PM,2.0.0.Beta4,,,,,,2.0.0.Beta5,,Domain Management,,,,,0,,,,,,"ServerOperationResolver gets called for each operation in a composite.

For each call it clones the configuration model.

It then calls node.asPropertyList() in various spots, which in turn results in a clone of the value of each Property. In particular it does this over the profiles, which means each profile gets cloned.

For very large configurations, this is extremely inefficient. One user was experimenting with adding 1000s of data sources and found it would take over an hour to complete the work. I was able to do it in 30 seconds by correcting these problems.

There are other areas where we may be incurring unneeded expense via calls to node.asPropertyList().",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1257692,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1002,,,,,,0.0,0.0,,1|hzy647:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""Could not initialize class java.lang.StringCoding"" on HP-UX",WFCORE-917,12578426,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,jason.greene,mkopecky,mkopecky,17/Jul/15 8:46 AM,22/Mar/16 8:58 AM,29/Nov/16 3:53 PM,22/Mar/16 8:58 AM,,,,,,,,,Server,,,,,0,,,,,,"*Description of problem:*
""NoClassDefFoundError: Could not initialize class java.lang.StringCoding"" occurs on HP-UX in a non-interactive mode of CLI

This is intermittent issue.

This exception occurs even without running domain server.

*How reproducible:*
2% on HP-UX

*Steps to Reproduce: (this reproducer always hits this issue)*
# ./domain.sh \# optional step
# {noformat}for (( i = 1; i <= 200 ; i++ )) ; do
./jboss-cli.sh -c command=""/profile=test:add""
./jboss-cli.sh -c command=""/profile=test:remove""
done{noformat}

*Actual results:*
{noformat}
Exception: java.lang.NullPointerException thrown from the UncaughtExceptionHandler in thread ""Finalizer""
Error occurred during initialization of VM
java.lang.NoClassDefFoundError: Could not initialize class java.lang.StringCoding
        at java.lang.String.<init>(String.java:534)
        at java.lang.String.<init>(String.java:554)
        at java.lang.System.initProperties(Native Method)
        at java.lang.System.initializeSystemClass(System.java:1164)
{noformat}

*Expected results:*
No errors",,,,,,,,,,,,,,,,JBEAP-451,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|hzxi73:,9223372036854775807,,,,,,,,,,,"12/Aug/15 6:14 AM;mkopecky;Same errors occurs intermittently on ""standalone.sh"" and ""domain.sh"", logs:
{noformat}
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /hudson_workspace/workspace/eap-7x-manu-startup-multiple-HP-UX/bf110154/workspace/manu.testsuite.eap.eap6.startup.MultipleStartupEap6/jboss-eap-7.0

  JAVA: /qa/tools/opt/hpux_ia//java8/bin/java

  JAVA_OPTS: -server -d64 -Xms64m -Xmx512m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true

=========================================================================

Error occurred during initialization of VM
java.lang.NoClassDefFoundError: Could not initialize class java.lang.StringCoding
	at java.lang.String.<init>(String.java:534)
	at java.lang.String.<init>(String.java:554)
	at java.lang.System.initProperties(Native Method)
	at java.lang.System.initializeSystemClass(System.java:1164)

Exception: java.lang.NullPointerException thrown from the UncaughtExceptionHandler in thread ""Finalizer""
{noformat}

JDK version: 1.8.0.01-hp-ux","11/Sep/15 11:10 AM;mkopecky;This issue is valid also for JDK ""1.8.0.02-hp-ux"".

This issue occurs also during EAP AS TS execution on HPUX.","04/Nov/15 5:54 AM;mkopecky;This issue is valid also for JDK ""1.8.0.03-hp-ux""","17/Nov/15 8:26 AM;gene.bradley;hi Marek,  are you using a LANG setting when running this?  ","23/Nov/15 6:50 AM;mkopecky;[~gene.bradley]: LANG property is set in environment:
{noformat}
$ env | grep LANG
LANG=en_US.utf8
$
{noformat}","22/Mar/16 8:58 AM;mkopecky;This issue is not valid for JDK ""1.8.0.04-hp-ux"", so this was not a bug in wildfly, it was bug in JDK. Moving to resolved and rejected.",,,,,,,,,,,,,,,,,,,,,
 Kerberos authentication into Management Console does not fallback correctly,WFCORE-916,12581641,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,mchoma,mchoma,18/Aug/15 1:52 AM,08/Oct/15 5:51 AM,29/Nov/16 3:53 PM,08/Oct/15 5:51 AM,2.0.0.Beta1,,,,,,2.0.0.CR7,,Domain Management,Security,,,,0,,,,,,"Fallback management realm is not taken into account for Kerberos authentication into Management Console. In cases when Kerberos authentication to Management Console is configured also with fallback mechanism (properties, security-domain...) and one of:

- realm in principal is not set correctly
- path to keytab is not set correctly

is set in EAP configuration and when user with valid kerberos ticket tries to access Management Console then fallback is not taken into account and user cant access management console.",,,,,,,,,,,,,,,,JBEAP-730,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1148,,,,,,0.0,2.0,,1|hzy02f:,9223372036854775807,,,,,,,,,,,"05/Oct/15 6:36 AM;dlofthouse;I will have a look and see if we can add some additional validation for the bad configuration, however in general these are not scenarios that fallback is supposed to be used for.

Fallback works by sending two simultaneous challenges to the client, one is SPNEGO and the other is either a HTTP Digest or HTTP Basic challenge - if the web browser is configured to support Kerberos it will use it, if not the browser decides to fallback to Digest / Basic.  Fallback is not a server side capability if the server subsequently discovers it is incorrectly configured.",05/Oct/15 9:26 AM;dlofthouse;I have added start up validation that the keytab does exist - beyond that however it is the responsibility of the administrator to test their installation.,,,,,,,,,,,,,,,,,,,,,,,,,
CLI's embed-host-controller command does not work in a non-modular CLI,WFCORE-907,12582396,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,24/Aug/15 9:46 PM,28/Aug/15 7:06 PM,29/Nov/16 3:53 PM,28/Aug/15 7:06 PM,2.0.0.Beta4,,,,,,2.0.0.Beta5,,CLI,,,,,0,,,,,,"EmbedHostControllerHandler assumes that ModuleLoader.forClass(getClass()) will return a classloader, but it only will if the CLI process is running in a modular environment. If it isn't, EmbedHostControllerHandler must take responsibility for setting up the modular classloading environment.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/991,,,,,,0.0,0.0,,1|hzy4jr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI command ""/host=master/server-config=server-one:remove"" did not work if used in a batch",WFCORE-905,12582384,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,wdfink,wdfink,24/Aug/15 3:16 PM,28/Aug/15 7:13 PM,29/Nov/16 3:53 PM,28/Aug/15 7:13 PM,,,,,,,2.0.0.Beta5,,Domain Management,,,,,0,,,,,,"If a server is removed from a batch the command will fail.
The same command will work correct if no batch is used

21:13:46,310 INFO  [org.jboss.as.process.Server:server-one.status] (reaper for Server:server-one) WFLYPC0011: Process 'Server:server-one' finished with an exit status of 0
[Host Controller] 21:13:46,351 INFO  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0027: Unregistering server server-one
[Host Controller] 21:13:46,392 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""stop"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""server-config"" => ""server-one"")
[Host Controller] ]) - failure description: ""WFLYCTL0216: Management resource '[
[Host Controller]     (\""host\"" => \""master\""),
[Host Controller]     (\""server-config\"" => \""server-one\"")
[Host Controller] ]' not found""

",Upstream 10.x.CR,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/993,,,,,,0.0,2.0,,1|hzy4h3:,9223372036854775807,,,,"If a default 10.x domain is started this command sequence will fail:
  batch
  /host=master/server-config=server-one:stop(blocking=true)
  /host=master/server-config=server-one:remove
  run-batch

",,,,,,,"24/Aug/15 3:46 PM;brian.stansberry;[~ehugonnet] A quick look at the history of ServerStopHandler makes me think this is due to the WFCORE-297 fix. At L90 it is trying to read the resource, which may be gone at that point.

I think simply putting that call in a try block and catching and ignoring any RuntimeException will probably fix the problem.","25/Aug/15 5:47 AM;ehugonnet;That is correct, we have a Resource.NoSuchResourceException thrown there.
",,,,,,,,,,,,,,,,,,,,,,,,,
Future returned from Bootstrap.startup(...0) and ServerService.getValue() may never complete,WFCORE-904,12582257,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,23/Aug/15 3:20 PM,28/Aug/15 7:21 PM,29/Nov/16 3:53 PM,28/Aug/15 7:21 PM,2.0.0.Beta4,,,,,,2.0.0.Beta5,,Domain Management,,,,,0,,,,,,"A test I'm writing that uses the CLI embed-server command hung forever:

{code}
""main"" #1 prio=5 os_prio=31 tid=0x00007fd461007800 nid=0x1303 in Object.wait() [0x0000000102c67000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)
	- locked <0x00000007b8d69eb0> (a org.jboss.as.server.FutureServiceContainer)
	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)
	- locked <0x00000007b8d69eb0> (a org.jboss.as.server.FutureServiceContainer)
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:306)
{code}

The boot.log showed boot did not complete:

{code}

2015-08-23 12:04:37,572 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""internal-model-validation"") failed - address: ([(""subsystem"" => ""xts"")]) - failure description: ""WFLYCTL0172: host is required""
2015-08-23 12:04:37,573 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}

The problem is the failure never results in operationFailed(...) being called on the AsyncFutureTask returned by ServerService.getValue().

This probably only affects the embedded CLI and WildFly Swarm; other code does not block on this future.

I would not be surprised if a similar problem exists with the Host Controller and the CLI's embed-host-controller command.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/988,,,,,,0.0,0.0,,1|hzy3mn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Graceful shutdown on server group doesn't take into account timeout,WFCORE-899,12582189,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,jason.greene,rhatlapa,jason.greene,21/Aug/15 10:01 AM,25/Aug/15 7:34 AM,29/Nov/16 3:53 PM,21/Aug/15 5:04 PM,,,,,,,2.0.0.Beta3,,Domain Management,,,,,0,,,,,,"The timeout for graceful shutdown in case of domain server groups isn't respected.

Steps to reproduce
# start server in domain (domain.sh)
# Deploy application which allows creating long running requests (you can use the one provided in attachment)
# Create request to server-one (in main server group), which shall take longer time then graceful shutdown for example 50s ({{curl -v http://127.0.0.1:8080/long-running-servlet/HeavyProcessing?duration=50000}})
# In the mean time call graceful shutdown on main server group ({{/server-group=main-server-group:stop-servers(timeout=5)}})


The request should be terminated by server after 5s, still it is fully processed with 200 status code.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,1.0,,1|hzy37z:,9223372036854775807,,,,,,,,,,,"25/Aug/15 7:34 AM;rhatlapa;Checked with WildFly 10.0.0.Beta2, which incorporates WildFly Core 2.0.0.Beta4 and I no longer see the issue => closing.",,,,,,,,,,,,,,,,,,,,,,,,,,
IPv6 address in security realm using Kerberos,WFCORE-897,12582005,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Optional,Out of Date,dlofthouse,mchoma,mchoma,20/Aug/15 9:21 AM,10/Nov/16 6:54 AM,29/Nov/16 3:53 PM,10/Nov/16 6:54 AM,,,,,,,3.0.0.Alpha13,,Security,,,,,0,,,,,,"When kerberos in realm is configured to use IPv6 address with square brackets, eg. [2620:52:0:2804:56ee:75ff:fe34:630e], EAP generates TGS-REQ for remote/2620:52:0:2804:56ee:75ff:fe34:630e instead of remote/[2620:52:0:2804:56ee:75ff:fe34:630e]. It cause failures when remote/[2620:52:0:2804:56ee:75ff:fe34:630e]@JBOSS.ORG is used in keytab.

This happens when such realm secures CLI or EJB remoting. It doesnt happen when used for securing management console.""",,,,,,,,,,,,,,,,JBEAP-783,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,2.0,,1|hzy24f:,9223372036854775807,,,,"1) Configure EAP7 to use IPV6. https://docs.jboss.org/author/display/WFLY8/Interfaces+and+ports

2) Generate remote.keytab with principal remote/[2620:52:0:2804:56ee:75ff:fe34:630e]@JBOSS.ORG

3) Configure security realm with IPv6 address [2620:52:0:2804:56ee:75ff:fe34:630e] 

            <security-realm name=""""TestKerberosRealm"""">
                <server-identities>
                    <kerberos>
                        <keytab principal=""""remote/[2620:52:0:2804:56ee:75ff:fe34:630e]@JBOSS.ORG"""" path=""""remote.keytab"""" relative-to=""""jboss.server.config.dir"""" debug=""""true""""/>
                    </kerberos>
                </server-identities>
                <authentication>
                    <kerberos/>
                </authentication>
            </security-realm>

4) Use this realm for securing CLI 

        <management-interfaces>
            <http-interface security-realm=""""TestKerberosRealm"""" http-upgrade-enabled=""""true"""">
                <socket-binding http=""""management-http""""/>
            </http-interface>
        </management-interfaces>

5) Try CLI
./jboss-cli.sh -Djavax.security.auth.useSubjectCredsOnly=false --controller=http-remoting://[2620:52:0:2804:56ee:75ff:fe34:630e]:9990

EAP generates TGS-REQ for remote/2620:52:0:2804:56ee:75ff:fe34:630e. ",,,,,,,16/Aug/16 4:55 AM;dlofthouse;Leaving unassigned as I am not planning to look into this one.,10/Nov/16 6:54 AM;dlofthouse;Resolving as out of date as we are migrating to Elytron for management security.,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot patch EAP once Docs are excluded from installation,WFCORE-896,12581971,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,aloubyansky,pkremens,pkremens,20/Aug/15 7:24 AM,03/Sep/15 12:49 PM,29/Nov/16 3:53 PM,03/Sep/15 11:53 AM,2.0.0.Beta1,,,,,,2.0.0.Beta6,,Patching ,,,,,0,,,,,,"EAP installer allows user to exclude some packs from installation. Docs directory is one of them. If user choose to do so, $JBOSS_HOME/docs directory is not present in distribution.

Trying to apply a patch (contains changes with docs files) on such a distribution gives me:
{noformat}
java.io.FileNotFoundException: /home/pkremens/workspace/jboss-eap-7.0/docs/schema/saml-schema-authn-context-xmldsig-2.0.xsd (No such file or directory)
{noformat}

This could block customers, who are using installer to get EAP, from consuming the patches for CP releases in future.

Patch was generated using:
https://github.com/jbossas/patch-gen

dr8_to_dr8x.zip patch.xml:
{code:xml}
<?xml version=""1.0"" ?>

<patch xmlns=""urn:jboss:patch:1.0"" id=""dr8_to_dr8x"">
    <description>
        No description available
    </description>
    <upgrade name=""EAP"" version=""7.0.0.Alpha1"" to-version=""7.0.0.Alpha1""/>
    <element id=""layer-base-dr8_to_dr8x"">
        <description>
            No description available
        </description>
        <upgrade name=""base""/>
    </element>
    <misc-files>
        <added path=""docs/schema/saml-schema-authn-context-xmldsig-2.1.xsd"" hash=""25d2e47a02d248101af86cff07daf9d51d8da379""/>
        <updated path=""docs/schema/saml-schema-ecp-2.0.xsd"" hash=""97984434c30816939c0f64b9388dc75d977a3b17"" new-hash=""fa7e234444b3c5d9ede81b4799dfaff8632d987a""/>
        <removed path=""docs/schema/saml-schema-authn-context-xmldsig-2.0.xsd"" hash=""25d2e47a02d248101af86cff07daf9d51d8da379""/>
    </misc-files>
</patch>
{code}",,,,,,,,,,,,,,,,JBEAP-775,,,,,,,,,,,20/Aug/15 7:24 AM;pkremens;dr8_to_dr8x.zip;https://issues.jboss.org/secure/attachment/12391879/dr8_to_dr8x.zip,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1013,,,,,,1.0,1.0,,1|hzy1xr:,9223372036854775807,,,,"\# Either use installer.jar or remove the docs directory manually
{noformat}unzip -q jboss-eap-7.0.0.DR8.zip{noformat}

\# Remove docs directory manually
{noformat}rm -rf jboss-eap-7.0/docs{noformat}

\# Patch the eap
{noformat}bash jboss-eap-7.0/bin/jboss-cli.sh command=""patch apply --override-all dr8_to_dr8x.zip""
java.io.FileNotFoundException: /home/pkremens/workspace/jboss-eap-7.0/docs/schema/saml-schema-authn-context-xmldsig-2.0.xsd (No such file or directory){noformat}
",,,,,,,"03/Sep/15 12:49 PM;aloubyansky;With the referenced PR merged, misc content modifications now have an additional attribute called condition. If the attribute is not present then the modification is considered to be required and the patch will be aborted if the modification could not be applied for some reason.
If the modification attribute is present then at application patch the condition will be evaluated and if the condition is satisfied, the modification will be applied, otherwise the modification will simply be skipped w/o aborting the whole patch.
This fix introduced a new patch.xml schema include the new attribute. And the patchgen tool (not tracked here) was also updated to support the generation of patch.xml files that may contain conditions.
The only condition added is the one checking for existence of a file system path relative to the installation root directory.",,,,,,,,,,,,,,,,,,,,,,,,,,
Empty properties list parsing leads to an error,WFCORE-894,12581946,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,tomekadamski,tomekadamski,tomekadamski,20/Aug/15 4:12 AM,21/Aug/15 3:54 PM,29/Nov/16 3:53 PM,21/Aug/15 3:54 PM,2.0.0.Beta2,,,,,,2.0.0.Beta3,,CLI,,,,,0,,,,,,PropertiesAttribute parser does not allow empty properties list which is redundant but valid.  What is more removing last property using map-remove operation leads to a configuration with empty properties tags.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/966,,,,,,0.0,0.0,,1|hzy1sn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Cli output of some tests contains only ""0: "" (instead of correct result)",WFCORE-892,12581875,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,mchoma,mkopecky,mkopecky,19/Aug/15 11:20 AM,21/Apr/16 4:37 AM,29/Nov/16 3:53 PM,25/Nov/15 2:13 PM,2.0.0.Beta2,,,,,,2.0.3.Final,,Test Suite,,,,,0,,,,,,"*Description of problem:*
Cli output of some tests in wildfly core contains only ""0: "" (instead of correct result)

*How reproducible:*
66% on RHEL && IBM JDK 8

*Affected tests found so far:*
* org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase#testWrongVaultPassword
** {noformat}java.lang.AssertionError: Password should be wrong
Expected: a string containing ""Keystore was tampered with, or password was incorrect""
     but: was ""0: ""
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:865)
	at org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase.testWrongVaultPassword(VaultPasswordsInCLITestCase.java:135){noformat}
* org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase#testRightVaultPassword
** {noformat}java.lang.AssertionError: Password should be right and authentication successful
Expected: a string containing ""\""outcome\"" => \""success\""""
     but: was ""0: ""
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:865)
	at org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase.testRightVaultPassword(VaultPasswordsInCLITestCase.java:148){noformat}
* org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase#testTrustedCLICertificate
* org.jboss.as.test.manualmode.management.cli.CustomVaultInCLITestCase#testWrongVaultPassword

*Steps to Reproduce:*
# mvn install -Dts.manualmode -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIP_1 -DfailIfNoTests=false -Dtest=VaultPasswordsInCLITestCase",,,,,,,,,,,,,,,,JBEAP-764,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1267,,,,,,0.0,3.0,,1|hzy1fz:,9223372036854775807,,,,,,,,,,,26/Aug/15 7:17 AM;fbogyai;Manual tests that are using CustomCLIExecutor are failing on IBM JDK 8 due to low timeouts. I have increased timeout for command execution and changed initial value of exitCode to non-zero for better testability.,"24/Nov/15 6:49 AM;mchoma;As stated in https://issues.jboss.org/browse/JBEAP-764, timeout issues still can be seen.","24/Nov/15 6:58 AM;mchoma;Default value (5s) is not enough sometimes, especially on java IBM8. Parameter --timeout has to be same as in with waiting mechanism in CustomCLIExecutor.",,,,,,,,,,,,,,,,,,,,,,,,
jboss-deployment-structure.xml resource root allows references outside the deployment,WFCORE-891,12581859,Bug,Pull Request Sent,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,elguardian,elguardian,elguardian,19/Aug/15 10:36 AM,20/Aug/15 10:51 AM,29/Nov/16 3:53 PM,,,,,,,,,,Server,,,,,0,,,,,,"The current code allows making references outside the deployment. This leads to misuse during deployment if users try to share the same library (outside the archive).

See WFCORE-700

Add a validation for resource-root. It must not allow references outside the deployment.

https://github.com/wildfly/wildfly-core/blob/2.0.0.Beta2/server/src/main/java/org/jboss/as/server/deployment/module/descriptor/JBossDeploymentStructureParser13.java#L770",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/971,,,,,,0.0,0.0,,1|hzy1cv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kerberos authentication for Management CLI should fallback when server principal is set incorrectly,WFCORE-889,12581801,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,olukas,olukas,19/Aug/15 4:52 AM,04/Dec/15 5:34 AM,29/Nov/16 3:53 PM,04/Dec/15 5:33 AM,,,,,,,2.0.4.Final,,Domain Management,,,,,0,,,,,,"In case when kerberos authentication is configured in security realm but principal attribute in keytab element is set incorrectly (e.g. remote/wrong_localhost@JBOSS.ORG, remote/localhost@WRONG_JBOSS.ORG or wrong_remote/localhost@JBOSS.ORG instead of remote/localhost@JBOSS.ORG) then authentication does not fallback into another authentication mechanism for user with valid kerberos ticket. In case when user does not have kerberos ticket then fallback is taken into account correctly.",,,,,,,,,,,,,,,,JBEAP-754,,REM3-212,WFCORE-1036,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,0.0,,1|hzy107:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to remove network interface in domain mode,WFCORE-888,12581680,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jkasik,jkasik,18/Aug/15 7:22 AM,20/Aug/15 8:43 AM,29/Nov/16 3:53 PM,20/Aug/15 8:43 AM,,,,,,,2.0.0.Beta3,,Domain Management,,,,,0,,,,,,"After I added new network interface and tried to remove it, I was unable to do so. But if I do :reload-servers, remove will success, though reload is not required after adding.",,,,,,,,,,,,,,,,JBEAP-740,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/965,,,,,,0.0,1.0,,1|hzy0an:,9223372036854775807,,,,"# start server in domain mode
# using CLI /interface=example:add(any-address=true)
# /interface=example:remove",,,,,Workaround Exists,:reload-servers after adding new network interface,18/Aug/15 3:31 PM;brian.stansberry;The problem is the add. It's not getting propagated to the servers when it should be. Looks like a simple missing '!'.,,,,,,,,,,,,,,,,,,,,,,,,,,
World readable audit.log file,WFCORE-885,12581568,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,istudens,olukas,olukas,17/Aug/15 8:24 AM,08/Sep/15 11:42 AM,29/Nov/16 3:53 PM,04/Sep/15 11:05 AM,2.0.0.Beta2,,,,,,2.0.0.Beta6,,Domain Management,,,,,0,,,,,,"Server logs sensitive information into a world readable audit.log file. This information could be used by a local attacker to gain otherwise protected information about user sessions etc.

This issue was originally reported as CVE in https://bugzilla.redhat.com/show_bug.cgi?id=1063642. EAP 6.x branches are fixed but same issue occurs in EAP 7 again.",,,,,,,,,,,,,,,,JBEAP-721,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,https://github.com/wildfly/wildfly-core/pull/1023,,,,,,0.0,2.0,,1|hzxzm7:,9223372036854775807,,,,"1) Start server and execute following CLI commands:
{noformat}
./jboss-cli.sh -c '/core-service=management/access=audit/logger=audit-log:write-attribute(name=enabled, value=true)'
./jboss-cli.sh -c "":shutdown""
{noformat}

2) Check output of command: 
{noformat}
ls -l ${SERVER_HOME}/standalone/data/audit-log.log
{noformat}",,,,,,,"25/Aug/15 9:16 AM;rsvoboda;[~brian.stansberry], hope you are the right person ;)","03/Sep/15 5:48 AM;istudens;I've prepared a port of Peter's commit to WildFly Core. 
As the current audit log code looks differently to EAP, it has to be a bit restructured.",,,,,,,,,,,,,,,,,,,,,,,,,
[9.x] CSRF vulnerability in the WFLY-2913 solution,WFCORE-883,12581265,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,jason.greene,brian.stansberry,brian.stansberry,14/Aug/15 4:31 PM,26/Oct/15 11:16 PM,29/Nov/16 3:53 PM,26/Oct/15 11:05 PM,,,,,,,1.0.2.Final,,Domain Management,Security,,,,0,,,,,,,,,,,,,,,,,,,,,,WFCORE-594,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzxz73:,9223372036854775807,,This issue is security relevant,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embedded server gets broken after operation on embedded host controller,WFCORE-881,12581083,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,pkremens,pkremens,13/Aug/15 5:21 AM,21/Aug/15 5:08 PM,29/Nov/16 3:53 PM,21/Aug/15 5:08 PM,2.0.0.Beta1,,,,,,2.0.0.Beta3,,CLI,Domain Management,,,,0,,,,,,"I am unable to use standalone embedded server once I invoke some operation on embedded host controller.

Quick steps to reproduce:
{noformat}
$ ./jboss-cli.sh 
[disconnected /] embed-host-controller
[domain@embedded /] /host=master:read-resource
[domain@embedded /] stop-embedded-host-controller 
[disconnected /] embed-server
[standalone@embedded /] stop-embedded-server 
Failed to handle 'stop-embedded-server': org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl cannot be cast to org.wildfly.core.embedded.HostController
{noformat}

Reproducible with wf-core 2.0.0.Beta1 build",,,,,,,,,,,,,,,,JBEAP-683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,,,0.0,0.0,,1|hzxy3r:,9223372036854775807,,,,"{noformat}
$ ./jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.

[disconnected /] embed-host-controller 
11:00:59,852 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.3.Final
...
11:01:01,201 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) (Host Controller) started in 1256ms - Started 25 of 27 services (8 services are lazy, passive or on-demand)

[domain@embedded /] /host=master:read-resource
{
    ""outcome"" => ""success"",
...
}

[domain@embedded /] stop-embedded-host-controller
11:01:13,778 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) stopped in 6ms

[disconnected /] embed-server
11:01:20,517 INFO  [org.jboss.as] (MSC service thread 2-7) WFLYSRV0049: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) starting
...
EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) started in 181ms - Started 35 of 48 services (19 services are lazy, passive or on-demand)

[standalone@embedded /] stop-embedded-server
Failed to handle 'stop-embedded-server': org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl cannot be cast to org.wildfly.core.embedded.HostController

[standalone@embedded /] :read-attribute(name=server-state)
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.

[standalone@embedded /] embed-server 
11:02:11,386 ERROR [org.jboss.msc] (AeshProcess: 7) MSC000010: Failed to register MBean with MBeanServer: javax.management.InstanceAlreadyExistsException: jboss.msc:type=container,name=jboss-as
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.jboss.msc.service.ServiceContainerImpl.<init>(ServiceContainerImpl.java:372)
	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:258)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:208)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.access$100(BootstrapImpl.java:198)
	at org.jboss.as.server.BootstrapImpl.<init>(BootstrapImpl.java:62)
	at org.jboss.as.server.Bootstrap$Factory.newInstance(Bootstrap.java:244)
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:275)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.wildfly.core.embedded.EmbeddedServerReference.invokeOnServer(EmbeddedServerReference.java:80)
	at org.wildfly.core.embedded.EmbeddedServerReference.start(EmbeddedServerReference.java:55)
	at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:200)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:751)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)
	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)
	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

11:02:11,388 INFO  [org.jboss.as] (MSC service thread 3-7) WFLYSRV0049: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) starting
11:02:11,424 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'enabled' in the resource at address '/subsystem=datasources/data-source=ExampleDS' is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
11:02:11,474 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.Beta1) started in 92ms - Started 35 of 48 services (19 services are lazy, passive or on-demand)

[standalone@embedded /] stop-embedded-server 
Failed to handle 'stop-embedded-server': org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl cannot be cast to org.wildfly.core.embedded.HostController
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jboss-deployment-structure.xml does not exclude-subsystem named logging,WFCORE-878,12566194,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Cannot Reproduce Bug,jamezp,gerry.matte,gerry.matte,17/Mar/15 6:30 PM,18/Aug/15 11:05 AM,29/Nov/16 3:53 PM,18/Aug/15 11:05 AM,,,,,,,,,,,,,,0,,,,,,"While attempting to use logback logging in a web application, I tried to use a jboss-deployment-structure.xml in my WEB-INF/classes folder to exclude the logging subsystem so that I could use logback configured in my webapp.  UPDATE: After moving jboss-deployment-structure.xml from WEB-INF/classes up to WEB-INF, and removing the 

That method failed to prevent the logging subsystem from being excluded from my deployment.

However, when I added the tag add-logging-api-dependencies value=""false"" to the logging subsystem, logback began to work.

I'm not sure if this solution would cause problems with other webapps - I would have preferred to use jboss-deployment-structure.xml instead so as to make the smallest change to my wildfly configuration.","Microsoft Windows 7, Oracle JDK 7, Eclipse Luna",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/921497,,,,,,,,,0.0,6.0,,1|hzvj7j:,9223372036854775807,,,,,,,,,,"add the tag add-logging-api-dependencies value=""false"" to the logging subsystem in the wildfly configuration file.  I'm not sure if this would have any negative effects on other webapps.","18/Mar/15 12:13 PM;gerry.matte;UPDATE: After moving jboss-deployment-structure.xml from WEB-INF/classes up to WEB-INF, and removing the tag add-logging-api-dependencies tag from standalone-full.xml, I confirmed that the problem still occurs.  

Although the server.log indicates that logback is being loaded with my webapp, my webapp logging is not processed by logback.  My application logging is handled by the logging subsystem instead of logback.

I was required to re-insert the tag add-logging-api-dependencies tag into the logging subsystem in standalone-full.xml.
",12/Aug/15 7:17 PM;jamezp;I'm not sure how I missed this before. Is this an EAR or WAR?,12/Aug/15 7:35 PM;gerry.matte;War,"12/Aug/15 8:04 PM;jamezp;I tested on WildFly 8.2.0.Final and 9.0.1.Final and the logging deployment unit processors definitely weren't executed. I put my {{jboss-deployment-structure.xml}} in {{WAR/WEB-INF}}.

{code:title=jboss-deployment-structure.xml}
<jboss-deployment-structure>
    <deployment>
        <!-- exclude-subsystem prevents a subsystems deployment unit processors running on a deployment -->
        <!-- which gives basically the same effect as removing the subsystem, but it only affects single deployment -->
        <exclude-subsystems>
            <subsystem name=""logging""/>
        </exclude-subsystems>
    </deployment>
</jboss-deployment-structure>
{code}","12/Aug/15 10:22 PM;gerry.matte;I concur.  
I have logback working now but I spent some time trying to determine what I changed to make it work in two war webapps.
I suspect my POM was misconfigured but it's been quite a while and I can't say with certainty what was the root cause.

Sorry ... I should have updated this JIIRA when I resolved the issue.","14/Aug/15 3:30 PM;brian.stansberry;For some reason JIRA has decided a completely unrelated PR for a different code base is relevant to this one. I'm doing a ""Reject Pull Request"" to try and clear that.",,,,,,,,,,,,,,,,,,,,,
Reload or Shutdown inside IF statement is performed before the if/else block batch is executed,WFCORE-876,12580927,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,gonthim,gonthim,12/Aug/15 3:52 AM,18/Sep/15 9:23 AM,29/Nov/16 3:53 PM,18/Sep/15 9:23 AM,2.0.0.Beta1,,,,,,2.0.0.CR2,,CLI,,,,,0,,,,,,"Executing a reload or shutdown inside an if/else block results in the reload or restart occurring before the other commands in the batch are executed.

{code}
if (outcome == success) of /subsystem=logging/logger=org.jboss.as.cli:read-resource()
   /subsystem=logging:write-attribute(name=use-deployment-logging-config
   shutdown --restart=true
end-if
{code}

This command will actually leave the server in a reload-required state. The shutdown, or reload, will occur before the write-attribute is executed.",,,,,,,,,,,,,,,,,,,,,WFCORE-533,,,,,,,,,,,,,,,,,,,,,,,,,,,,http://lists.jboss.org/pipermail/wildfly-dev/2015-September/004404.html,,,https://github.com/wildfly/wildfly-core/pull/1072,,,,,,0.0,2.0,,1|hzxx6v:,9223372036854775807,,,,,,,,,,,"12/Aug/15 7:34 AM;aloubyansky;The bodies of if-else and try-catch-finally are batches, i.e. each body will be translated into a composite operation.
When the CLI is in the batch mode, it doesn't execute entered operation requests but adds them to the batch until run-batch command is invoked. Commands that don't support batch mode are executed immediately outside the currently active batch (this is done support ls, cd and other commands).
reload and shutdown commands do not support batch mode because they need to perform some logic besides sending an operation request. So, in this case, :shutdown(restart=true) should have been used instead.

Or the bodies of control flow blocks should not be batches.",18/Sep/15 9:23 AM;aloubyansky;If-else and try-catch-finally are not starting batches implicitly any more.,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent alias treatment,WFCORE-874,12579456,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,heiko.braun,heiko.braun,27/Jul/15 9:54 AM,14/Aug/15 3:27 PM,29/Nov/16 3:53 PM,14/Aug/15 3:27 PM,,,,,,,2.0.0.Beta2,,Domain Management,,,,,0,,,,,,"Another related problem: The alias resources are shown by default in :read-children-types

{noformat}
[domain@localhost:9990 /] /profile=full/subsystem=infinispan/cache-container=*/invalidation-cache=web:read-children-types
{
    ""outcome"" => ""success"",
    ""result"" => [
        ""binary-keyed-jdbc-store"",
        ""component"",
        ""eviction"",
        ""expiration"",
        ""file-store"",
        ""locking"",
        ""mixed-keyed-jdbc-store"",
        ""remote-store"",
        ""store"",
        ""string-keyed-jdbc-store"",
        ""transaction""
    ]
}
{noformat}

but they are excluded from :read-resource-description 

{noformat}
[domain@localhost:9990 /] /profile=full/subsystem=infinispan/cache-container=*/invalidation-cache=web:read-resource-description
 [...]

 ""children"" => {
                ""store"" => {
                    ""description"" => ""A persistent store for a cache."",
                    ""model-description"" => undefined
                },
                ""component"" => {
                    ""description"" => ""A configuration component of a cache."",
                    ""model-description"" => undefined
                }
            }


{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/957,,,,,,0.0,3.0,,1|hzxo7b:,9223372036854775807,,,,,,,,,,,"27/Jul/15 9:58 AM;heiko.braun;My preferred solution would be to exclude aliases in all cases, unless explicitly requested by ""include-aliases=true"". ","12/Aug/15 10:42 AM;brian.stansberry;This is a plain old bug. The read-children-types operation takes the ""include-aliases"" param and its default value is 'false', so the behavior Heiko said he prefers is what *should* be happening.

A wild guess is this has something to do with singleton resources.

[~ehugonnet] before doing anything on this, please ping [~kabirkhan] in case he's looking at it.","13/Aug/15 5:15 PM;kabirkhan;[~ehugonnet] I am taking this. If you have started on this already, please let me know.",,,,,,,,,,,,,,,,,,,,,,,,
Resource alias operation inconsistencies,WFCORE-873,12579448,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,kabirkhan,heiko.braun,heiko.braun,27/Jul/15 9:16 AM,21/Aug/15 5:04 PM,29/Nov/16 3:53 PM,21/Aug/15 5:04 PM,,,,,,,2.0.0.Beta3,,Domain Management,,,,,0,,,,,,"Formlery we could request the ../eviction=EVICTION resource. I assume that with the resource name change a transformer kicks that redirects the request to the ../component"" => ""eviction resource. The response header however contains the wrong address, which prevents clients to correlate the request with the response. 

*In HAL this breaks the access control mechanism.*

{noformat}

[domain@localhost:9990 /] /profile=full/subsystem=infinispan/cache-container=*/invalidation-cache=*/eviction=EVICTION:read-resource-description
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""profile"" => ""full""),
            (""subsystem"" => ""infinispan""),
            (""cache-container"" => ""*""),
            (""invalidation-cache"" => ""*""),
            (""component"" => ""eviction"")
        ],
        ""outcome"" => ""success"",
 [...]
{noformat}",,,,,,,,,,,,,,,,,,,,,WFCORE-874,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/976,,,,,,0.0,9.0,,1|hzxo5r:,9223372036854775807,,,,,,,,,,,27/Jul/15 9:53 AM;ctomc;I think solution would be that alias response should also contain the new address from where the resource was read.,"27/Jul/15 9:56 AM;heiko.braun;A solution would be the response to contain the address of the requested resource. In our example the response address would then be :

{noformat}
/profile=full/subsystem=infinispan/cache-container=*/invalidation-cache=*/eviction=EVICTION:read-resource-description

returns

""address"" => [
            (""profile"" => ""full""),
            (""subsystem"" => ""infinispan""),
            (""cache-container"" => ""*""),
            (""invalidation-cache"" => ""*""),
            (""eviction"" => ""EVICTION"")
        ],
{noformat}","03/Aug/15 6:45 AM;kabirkhan;Another part of this, is that there is nothing in r-r-d's output indicating that this is an alias. So perhaps that is needed, and if something is an alias, should we put in both the 'real' and 'alias' addresses?",11/Aug/15 2:37 AM;heiko.braun;[~brian.stansberry] Can you comment on this? It's pretty important for HAL.,"11/Aug/15 6:14 PM;brian.stansberry;I don't know if we can do anything about this in the next few weeks, so if you can not use the alias that's better.","19/Aug/15 2:02 PM;kabirkhan;This appears to be quite deeply hidden in the ModelController. One of the first things to happen when an operation is called (I have only checked in standalone mode) is that the prepare step handler gets the operation entry for the 'eviction=EVICTION' (i.e. the alias address). 

What is returned from the resource registration registry is an AliasStepHandler with a reference to the AliasEntry. These two in conjunction change the r-r-d operation to use the real entry 'component=eviction' and execute the target operation. So by the time the r-r-d handler is called the operation has already been changed to have the target address, and there is no way to map from the real address back to the target address at the moment.

Two options would be to
1) add the reverse mapping from real address to possible aliases in the registry, but I don't think that is feasible (there could be several aliases pointing to the real address).
2) Use an OperationContext attachment and set that in the prepare step (or alias) handler, containing the alias so that interested handlers such as the r-r-d handler can get it from the OperationContext.

As you can probably guess my favourite is 2), but I would need to investigate further what happens in domain mode.","19/Aug/15 2:16 PM;brian.stansberry;I prefer 2) but perhaps with a twist.

Long ago I got a request for a more narrowly scoped context. Something scoped to the branch of the tree formed by addStep calls. Basically it facilitates communication between those ""related"" steps without affecting/being visible to unrelated steps.

If you can make 2) work without needing to get into that kind of thing, great. It's late in the release cycle for fundamental new stuff. But I suspect you may have issues related to scoping, e.g. in a composite op. If so, ^^^ is something to keep in mind.

I'm not sure what semantics of a more narrowly scoped context should be. Probably has a ref to a parent, root being the OC itself. And can automatically find attachments by searching up the tree. But what about the rules for modifications?","20/Aug/15 5:29 AM;kabirkhan;While reproducing with a test, and double-checking the CLI output, I also notice that there are two levels of result/outcome when using wildcards:
{code}
[standalone@localhost:9990 /] /subsystem=infinispan/cache-container=*/invalidation-cache=*/eviction=EVICTION:read-resource-description
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""infinispan""),
            (""cache-container"" => ""*""),
            (""invalidation-cache"" => ""*""),
            (""component"" => ""eviction"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => ""The cache eviction configuration."",
             ...
            },
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {}
        }
    }]
}
{code}
vs only one when using the non-wildcard address:
{code}
[standalone@localhost:9990 /] /subsystem=infinispan/cache-container=hibernate/invalidation-cache=entity/eviction=EVICTION:read-resource-description
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""description"" => ""The cache eviction configuration."",
        ""attributes"" => {
          ...
        },
        ""operations"" => undefined,
        ""notifications"" => undefined,
        ""children"" => {}
    }
}

{code}
I presume that is happening for a reason and will not touch that, since it sounds like the console is depending on this 'double' level when wildcard resources are used.","20/Aug/15 11:46 AM;brian.stansberry;[~kabirkhan] Right; please don't change that.

It's a manifestation of the fundamental mistake we made in having 'asterisk' mean two different things. So in r-r-d we can't readily differentiate between wanting the description of a single resource type whose value is 'asterisk' versus a wildcard request where we want descriptions of all resource types that match a pattern. The latter produces a list as the response, consistent with what read-resource does.

If we had used, for example, '?' to indicate a wildcard request instead of 'asterisk' then it wouldn't be ambiguous.

{code}/subsystem=infinispan/cache-container=*/invalidation-cache=*/eviction=EVICTION:read-resource-description{code}

would produce a non-list response.

{code}/subsystem=infinispan/cache-container=?/invalidation-cache=?/eviction=EVICTION:read-resource-description{code}

would produce a list response with a single element.

Some time over a beer we should discuss a strategy for eventually making this not ambiguous. But we'd have to introduce something new, while still supporting the old way for a long time, and then in some far off major release drop support for the old way.",,,,,,,,,,,,,,,,,,
Intermittent testsuite failures when writing to standalone.xml on Windows,WFCORE-871,12580707,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jason.greene,jason.greene,jason.greene,09/Aug/15 6:39 PM,09/Aug/15 6:40 PM,29/Nov/16 3:53 PM,09/Aug/15 6:40 PM,,,,,,,2.0.0.Beta1,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzxvvj:,9223372036854775807,,,,,,,,,,,09/Aug/15 6:40 PM;jason.greene;Fixed in wildfly build tools 1.1.0.Beta2,,,,,,,,,,,,,,,,,,,,,,,,,,
"Seeing frequent ""java.lang.UnsupportedOperationException: 'acl:acl' not supported as initial attribute"" on Solaris arch",WFCORE-870,12580488,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,06/Aug/15 8:09 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,06/Aug/15 12:50 PM,2.0.0.Alpha12,,,,,,2.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"I see the exception during e.g CDI TCK execution (but also during another tests execution as well) and it manifests as:
{noformat}
2015-08-03 07:14:38,692 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0009: Failed to store configuration to standalone-full.xml: java.lang.UnsupportedOperationException: 'acl:acl' not supported as initial attribute
	at sun.nio.fs.UnixFileModeAttribute.toUnixMode(UnixFileModeAttribute.java:74)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:210)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.createFile(Files.java:632)
	at org.jboss.as.controller.persistence.FilePersistenceUtils.createTempFileWithAttributes(FilePersistenceUtils.java:124)
	at org.jboss.as.controller.persistence.FilePersistenceUtils.writeToTempFile(FilePersistenceUtils.java:106)
	at org.jboss.as.controller.persistence.ConfigurationFilePersistenceResource.doCommit(ConfigurationFilePersistenceResource.java:55)
	at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.commit(AbstractFilePersistenceResource.java:58)
	at org.jboss.as.controller.ModelControllerImpl$4.commit(ModelControllerImpl.java:779)
	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:702)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:653)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:357)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1235)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:223)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}","solaris11-x64, solaris10-x64, jdk1.8",,,,,,,,,,,,,,,JBEAP-588,,,,,,,,,,,,,,,,,,,,,,,,,+,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/945,,,,,,0.0,0.0,,1|hzxukf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI if/else is not handling special characters strings with parenthesis,WFCORE-868,12580331,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,thofman,thofman,05/Aug/15 4:12 AM,19/Jan/16 8:19 AM,29/Nov/16 3:53 PM,10/Sep/15 5:35 PM,2.0.0.Alpha12,,,,,,2.0.0.Beta7,,CLI,,,,,0,,,,,,"When using CLI if-else scripting that uses a string that contains parenthesis it fails with the following message:

Failed to handle 'if (outcome == success && result.value != ""a64180c0)e7187af86b435229de904104"") of /system-property=test:read-resource': Unexpected operation at 49 in '(outcome == success && result.value != ""a64180c0)e7187af86b435229de904104"")'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1053,,,,,,0.0,11.0,,1|hzxtm7:,9223372036854775807,,,,"Create and run CLI script like the following:

if (outcome == success && result.value != ""a64180c0)e7187af86b435229de904104"") of /system-property=test:read-resource
/system-property=test:write-attribute(name=value,value=""a64180c0)e7187af86b435229de904104"")
end-if
if (outcome != success) of /system-property=test:read-resource
/system-property=test:add(value=""a64180c0)e7187af86b435229de904104"")
end-if",,,,,,,05/Aug/15 4:27 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from ASSIGNED to POST,07/Aug/15 8:10 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from POST to ASSIGNED,17/Aug/15 4:18 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from ASSIGNED to POST,20/Aug/15 6:27 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from POST to ASSIGNED,"03/Sep/15 10:03 AM;thofman;PR rejected, needs different solution.",03/Sep/15 10:36 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from ASSIGNED to NEW,15/Sep/15 10:03 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from NEW to ASSIGNED,17/Sep/15 8:48 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from ASSIGNED to POST,16/Dec/15 8:34 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from POST to MODIFIED,16/Dec/15 12:20 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from MODIFIED to ON_QA,19/Jan/16 8:19 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1249773|https://bugzilla.redhat.com/show_bug.cgi?id=1249773] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Schema for JBoss Product Installation Report does not contain information about its version,WFCORE-866,12580246,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mkopecky,mkopecky,04/Aug/15 8:21 AM,21/Aug/15 5:09 PM,29/Nov/16 3:53 PM,21/Aug/15 5:09 PM,2.0.0.Alpha11,,,,,,2.0.0.Beta3,,CLI,,,,,0,,,,,,"*Description of problem:*
Schema for JBoss Product Installation Report ( [EAP7-250|https://issues.jboss.org/browse/EAP7-250] ) does not contain information about its version. Schema version is in generated report, but not in schema.

*How reproducible:*
Always

*Steps to Reproduce:*
# get fresh EAP
# ./domain.sh
# ./jboss-cli.sh -c
# :read-operation-description(name=product-info)

*Actual results:*
Schema version is not in schema:
{noformat}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""operation-name"" => ""product-info"",
        ""description"" => ""Get product info report"",
        ""request-properties"" => {},
        ""reply-properties"" => {
            ""type"" => LIST,
            ""value-type"" => {""summary"" => {
                ""type"" => OBJECT,
                ""description"" => ""Summary of the current server installation."",
                ""expressions-allowed"" => false,
                ""required"" => false,
                ""nillable"" => true,
                ""value-type"" => {
                    ""report-version"" => {
                        ""type"" => STRING,
                        ""description"" => ""Version of the summary of the current server installation."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => false,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""node-name"" => {
                        ""type"" => STRING,
                        ""description"" => ""The name of the instance node."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""host-name"" => {
                        ""type"" => STRING,
                        ""description"" => ""The name to use for this host's host controller. Must be unique across the domain. If not set, defaults to the runtime value of InetAddress.getLocalHost().getHostName()."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""instance-identifier"" => {
                        ""type"" => STRING,
                        ""description"" => ""Unique Id of the server instance."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""product-name"" => {
                        ""type"" => STRING,
                        ""description"" => ""The name of the product that is being run by this server."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""product-community-identifier"" => {
                        ""type"" => STRING,
                        ""description"" => ""Indicates the type of distribution, if it is a Product or a Project."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => false,
                        ""default"" => ""Project"",
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""product-version"" => {
                        ""type"" => STRING,
                        ""description"" => ""The version of the product release that is being run by this server."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""product-home"" => {
                        ""type"" => STRING,
                        ""description"" => ""Installation directory of the current server instance."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""installation-date"" => {
                        ""type"" => STRING,
                        ""description"" => ""Installation date of the current server instance."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""last-update-date"" => {
                        ""type"" => STRING,
                        ""description"" => ""Date of the last update of the current product."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => true,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""host-operating-system"" => {
                        ""type"" => STRING,
                        ""description"" => ""The name of the Operating System."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => false,
                        ""min-length"" => 1L,
                        ""max-length"" => 2147483647L
                    },
                    ""jvm"" => {
                        ""type"" => OBJECT,
                        ""description"" => ""The JVM configuration for the server."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => false,
                        ""value-type"" => {
                            ""java-version"" => {
                                ""type"" => STRING,
                                ""description"" => ""The Java language version."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""min-length"" => 1L,
                                ""max-length"" => 2147483647L
                            },
                            ""jvm-version"" => {
                                ""type"" => STRING,
                                ""description"" => ""The complete build version of the JVM."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""min-length"" => 1L,
                                ""max-length"" => 2147483647L
                            },
                            ""jvm-vendor"" => {
                                ""type"" => STRING,
                                ""description"" => ""The vendor of the JVM."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""min-length"" => 1L,
                                ""max-length"" => 2147483647L
                            },
                            ""java-home"" => {
                                ""type"" => STRING,
                                ""description"" => ""Thepath to the JVM used by the server instance."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""min-length"" => 1L,
                                ""max-length"" => 2147483647L
                            }
                        }
                    },
                    ""host-cpu"" => {
                        ""type"" => OBJECT,
                        ""description"" => ""The description of the host CPU."",
                        ""expressions-allowed"" => false,
                        ""nillable"" => false,
                        ""value-type"" => {
                            ""host-cpu-arch"" => {
                                ""type"" => STRING,
                                ""description"" => ""The CPU architecture of the host."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""min-length"" => 1L,
                                ""max-length"" => 2147483647L
                            },
                            ""host-core-count"" => {
                                ""type"" => INT,
                                ""description"" => ""The number of cores available on the host.global.summary.java-home=The Java home."",
                                ""expressions-allowed"" => false,
                                ""nillable"" => true,
                                ""default"" => 1
                            }
                        }
                    }
                }
            }}
        },
        ""read-only"" => true,
        ""runtime-only"" => true
    }
}
{noformat}

*Expected results:*
Schema version should be in schema.",,,,,,,,,,,,,,,,JBEAP-584,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,https://github.com/wildfly/wildfly-core/pull/967,,,,,,0.0,2.0,,1|hzxt3j:,9223372036854775807,,,,,,,,,,,"11/Aug/15 5:40 AM;ehugonnet;report-version is the schema version, maybe the description is not that great ","11/Aug/15 8:20 AM;mkopecky;Yes, description could be better. But value of ""report-version"" is not in the schema (and it should be).",,,,,,,,,,,,,,,,,,,,,,,,,
Patching regression between WFCore 2.0.0.Alpha9 and Alpha11,WFCORE-865,12580216,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,aloubyansky,lthon,lthon,04/Aug/15 3:29 AM,05/Aug/15 5:59 AM,29/Nov/16 3:53 PM,05/Aug/15 5:00 AM,2.0.0.Alpha11,,,,,,,,Patching ,,,,,0,,,,,,"With WildFly 10.0.0.Alpha5 (Core 2.0.0.Alpha9):

{code}
./wildfly-10.0.0.Alpha5/bin/jboss-cli.sh --command=""patch apply test-patch-10.0.0.Alpha5.zip""
{
    ""outcome"" : ""success"",
    ""result"" : {}
}
./wildfly-10.0.0.Alpha5/bin/jboss-cli.sh --command=""patch history""
{
    ""outcome"" : ""success"",
    ""result"" : [{
        ""patch-id"" : ""test-patch"",
        ""type"" : ""cumulative"",
        ""applied-at"" : ""8/4/15 9:07 AM""
    }]
}
./wildfly-10.0.0.Alpha5/bin/jboss-cli.sh --command=""patch info""
Version:             undefined  
Cumulative patch ID: test-patch 
One-off patches:     none       
{code}

With WildFly 10.0.0.Alpha6 (Core 2.0.0.Alpha11):

{code}
./wildfly-10.0.0.Alpha6/bin/jboss-cli.sh --command=""patch apply test-patch-10.0.0.Alpha6.zip""
{
    ""outcome"" : ""success"",
    ""result"" : {}
}
./wildfly-10.0.0.Alpha6/bin/jboss-cli.sh --command=""patch history""
{
    ""outcome"" : ""success"",
    ""result"" : []
}
./wildfly-10.0.0.Alpha6/bin/jboss-cli.sh --command=""patch info""
Version:             undefined 
Cumulative patch ID: base      
One-off patches:     none      
{code}

With WildFly 10.0.0.Alpha6, based on {{patch history}} and {{patch info}}, it looks like the patch doesn't even apply, but that's not actually true, because trying to apply the patch once again results in

{code}
WFLYPAT0039: Requested WildFly version 10.0.0.Alpha6 did not match the installed version 10.0.0.Alpha6_PATCHED
{code}

So the patch in fact _is_ installed, it's just that neither {{patch history}} nor {{patch info}} doesn't show it like it used to.

The only reason I could come up with is that I use {{EAP}} as the {{<upgrade name=""..."">}}:

{code}
<upgrade name=""EAP"" version=""10.0.0.Alpha6"" to-version=""10.0.0.Alpha6_PATCHED""/>
{code}

However:

1. This used to work just fine in WildFly 10.0.0.Alpha5 and before.
2. If this is now considered wrong, the patch shouldn't even apply in the first place.",,,,,,,,,,,,,,,,,,,,,,,,,,,04/Aug/15 3:31 AM;lthon;test-patch-10.0.0.Alpha5.zip;https://issues.jboss.org/secure/attachment/12391476/test-patch-10.0.0.Alpha5.zip,04/Aug/15 3:31 AM;lthon;test-patch-10.0.0.Alpha6.zip;https://issues.jboss.org/secure/attachment/12391477/test-patch-10.0.0.Alpha6.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,3.0,,1|hzxssv:,9223372036854775807,,,,,,,,,,,"05/Aug/15 5:00 AM;aloubyansky;It's a consequence of https://issues.jboss.org/browse/WFCORE-830.

The patching module in the later version supports multiple patch streams, instead of assuming that every patch being applied comes from the same (identity) patch stream.

So, what happens here. Every patch stream has a name, for example: EAP, WildFly, BRMS, MyCustomLayer, etc. As specified in patch.xml, the patches attached to this issue target EAP (EAP patch stream).
The actual installation is not identified as the EAP though, it's WildFly (which is a different stream).
The patch is still accepted because there was no content conflict found and there is no notion of content boundaries between different patch streams, so the content coming from different patch streams may overlap (debatable but that was a conscious decision based on the time constraints).

So, now if you execute 'patch info --streams' you'll see WildFly and EAP streams displayed.

Every patching management operation now accepts (an optional) parameter/argument which identifies the target patch stream. So, if you added --patch-stream=EAP to patch info and history commands, you would see what you had expected.

In case --patch-stream argument is missing, the default patch stream is assumed as the target. The default patch stream is identified by values provided by org.jboss.as.version module, which in this case is WildFly.

So, the patches in this case targeted EAP but the info and history commands targeted WildFly which did not have any patch history.","05/Aug/15 5:53 AM;lthon;Hmm, this seems to be missing in {{patch --help}}.

I would probably expect that without a {{\-\-patch-stream}} argument, all patch streams would be printed, but maybe that's just me. Is there a way to achieve that manually? Something like {{\-\-patch-stream=*}}?","05/Aug/15 5:59 AM;aloubyansky;Not sure whether it makes much sense but my initial thought was to keep the previous commands (not requiring --patch-stream) to target the default patch stream, in a way, for backward compatibility.

Thanks for noticing the missing --help info! Will add the new stuff.",,,,,,,,,,,,,,,,,,,,,,,,
CLI echo command doesn't echo variables any more,WFCORE-864,12580130,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,gonthim,aloubyansky,aloubyansky,03/Aug/15 7:11 AM,03/Aug/15 8:13 AM,29/Nov/16 3:53 PM,03/Aug/15 8:13 AM,2.0.0.Alpha12,,,,,,,,CLI,,,,,0,,,,,,"This CLI log is produced by wildfly-core-2.0.0.Alpha11
[olubyans@fedovo bin]$ ./jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] echo

[disconnected /] set a=aa
[disconnected /] echo $a
aa

And this one is the current one (with the new Aesh)
[disconnected /] set a=aa
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] echo $a

You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] 

I've verified that the variables are set with set command. I guess Aesh is handling $xxx itself and just replaces them with nothing, as Aesh is unaware of the CLI variables.
There is EchoTestCase but, as it's not interactive, Aesh does not get involved there, I guess.",,,,,,,,,,,,,,,,,,,,WFCORE-854,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzxs9r:,9223372036854775807,,,,,,,,,,,03/Aug/15 8:13 AM;gonthim;Found this one last week while working on the testsuite refactoring.,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI keeps reminding it's disconnected after every executed command when it's disconnected,WFCORE-863,12580128,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gonthim,aloubyansky,aloubyansky,03/Aug/15 6:43 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,06/Aug/15 12:51 PM,2.0.0.Alpha12,,,,,,2.0.0.Alpha13,,CLI,,,,,0,,,,,,"'You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.' This line is printed by CLIAeshConsoleCallback() after every entered line when the CLI is not connected to the controller.
It used to be printed at the beginning of the session and in case the CLI looses the connection.

I wouldn't insist on keeping it like it used to be, btw. But I guess it makes sense to have some hint-warning like that.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/934,,,,,,0.0,0.0,,1|hzxs9b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong installation date in product info report,WFCORE-861,12580116,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mkopecky,mkopecky,03/Aug/15 3:21 AM,21/Aug/15 5:09 PM,29/Nov/16 3:53 PM,21/Aug/15 5:09 PM,2.0.0.Alpha11,,,,,,2.0.0.Beta3,,CLI,,,,,0,,,,,,"*Description of problem:*
Product info report shows wrong installation date in wildfly. Reported installation date is date of wildfly building.

*How reproducible:*
Always on EAP from zip installation

*Steps to Reproduce:*
# get fresh wildfly from git
# build wildfly
# ./standalone.sh
# ./jboss-cli.sh -c
# :product-info

*Actual results:*
installation-date is a date of wildfly building

*Expected results:*
If Product Install Date is not available, wildfly do not report it.

*Additional info:*
Installation date is reported correctly, when installer is used.",,,,,,,,,,,,,,,,JBEAP-571,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,https://github.com/wildfly/wildfly-core/pull/967,,,,,,0.0,5.0,,1|hzxs6n:,9223372036854775807,,,,,,,,,,,"11/Aug/15 6:08 AM;ehugonnet;Currently this is a 'best effort' value since there is no installation date for a server, the installation directory creation date is used as the installation date which explains the difference you see between those 2 installation processes.","11/Aug/15 9:00 AM;mkopecky;In my point of view, no date is better then incorrect date. Incorrect date could be confused for customers","11/Aug/15 11:26 AM;dlofthouse;I am not following how this would confuse customers, the steps to reproduce involve building a server which is not something we would expect customers to do.",11/Aug/15 11:27 AM;ehugonnet;I think Marek means that the reported installation date is the date we built the server instead of the date on which they unarchived it.,"11/Aug/15 11:48 AM;mkopecky;Customer can use zip installation of EAP (""building a server"" step is executed by productization team)",,,,,,,,,,,,,,,,,,,,,,
"Product info report show wrong ""host-cpu-arch"" on amd64 architecture with 32-bit version of java",WFCORE-859,12580112,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mkopecky,mkopecky,03/Aug/15 3:15 AM,21/Aug/15 5:08 PM,29/Nov/16 3:53 PM,21/Aug/15 5:08 PM,2.0.0.Alpha11,,,,,,2.0.0.Beta3,,CLI,,,,,0,,,,,,"*Description of problem:*
Product info report show wrong ""host-cpu-arch"" on amd64 architecture with 32-bit version of java (example: ""Linux 32-bit x86"" version of IBM JDK 8). Host-cpu-arch is probably generated by JDK version.

*Steps to Reproduce:*
# use 32bit java on 64bit architecture of CPU
# get fresh EAP from zip
# ./standalone.sh
# ./jboss-cli.sh -c
# :product-info

*Actual results:*
{noformat}
        ...
        ""host-cpu"" => {
            ""host-cpu-arch"" => ""x86"",
            ""host-core-count"" => 8
        },
        ...
{noformat}

*Expected results:*
Correct value for ""host-cpu-arch"":
{noformat}
        ...
        ""host-cpu"" => {
            ""host-cpu-arch"" => ""amd64"",
            ""host-core-count"" => 8
        },
        ...
{noformat}

*Additional info:*
Architecture from product report is architecture of java (not architecture of CPU). There should be at least something like ""host-cpu-arch (generated by JVM)"" in product report.",,,,,,,,,,,,,,,,JBEAP-569,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,https://github.com/wildfly/wildfly-core/pull/967,,,,,,0.0,0.0,,1|hzxs5r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CLI ends with NullPointerException after ""ls"" command and ""tab"" key",WFCORE-858,12580101,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,mkopecky,mkopecky,03/Aug/15 2:16 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,06/Aug/15 4:44 PM,2.0.0.Alpha11,,,,,,2.0.0.Alpha13,,CLI,,,,,0,,,,,,"*Description of problem:*
CLI ends with java.lang.NullPointerException after ""ls"" command and ""tab"" key

*How reproducible:*
100 %

*Steps to Reproduce:*
# ./standalone.sh
# ./jboss-cli.sh -c
# ls / -l
#* don't press ""enter"" key
# press ""tab"" key

*Actual results:*
{noformat}
java.lang.NullPointerException
	at org.jboss.as.cli.handlers.LsHandler.getOperationRequestAddress(LsHandler.java:402)
	at org.jboss.as.cli.handlers.LsHandler.access$000(LsHandler.java:52)
	at org.jboss.as.cli.handlers.LsHandler$1.canAppearNext(LsHandler.java:75)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:257)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:122)
	at org.jboss.aesh.console.Console.complete(Console.java:1227)
	at org.jboss.aesh.console.Console.parseOperation(Console.java:551)
	at org.jboss.aesh.console.Console.read(Console.java:453)
	at org.jboss.aesh.console.Console.read(Console.java:347)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:198)
	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1322)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:272)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.jboss.modules.Module.run(Module.java:308)
	at org.jboss.modules.Main.main(Main.java:487)
{noformat}

*Expected results:*
No errors on output",,,,,,,,,,,,,,,,JBEAP-560,,,,,,,,,,,,,,,,,,,,,,,,,,,,,?,,,,,,,https://github.com/wildfly/wildfly-core/pull/939,,,,,,0.0,1.0,,1|hzxs33:,9223372036854775807,,,,,,,,,,,06/Aug/15 12:47 PM;aloubyansky;Fixed and merged. Thanks!,,,,,,,,,,,,,,,,,,,,,,,,,,
A read-resource on a subsystem resource of a missing deployment returns a successful completion,WFCORE-857,12580075,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,jamezp,jamezp,31/Jul/15 4:40 PM,12/Jun/16 9:15 PM,29/Nov/16 3:53 PM,12/Jun/16 9:15 PM,,,,,,,3.0.0.Alpha2,,Domain Management,,,,,0,,,,,,"Executing the follow operation results in the operation succeeding even though  no deployment exists with the name.

{code}
[standalone@localhost:9990 /] /deployment=foo.war/subsystem=*:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => []
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1408,,,,,,0.0,0.0,,1|hzxrxz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent Disconnection from CLI After Reload in domain mode,WFCORE-855,12580049,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gonthim,gonthim,gonthim,31/Jul/15 10:52 AM,24/Sep/15 4:46 AM,29/Nov/16 3:53 PM,04/Aug/15 9:37 AM,2.0.0.Alpha12,,,,,,2.0.0.Alpha13,,CLI,,,,,0,,,,,,"Description of problem:
 CLI scripts for management of managed domain 

Version-Release number of selected component (if applicable):
 6.4.3.CP.CR1

How reproducible:
 Always

Steps to Reproduce:
Use CLI script:
:read-attribute(name=process-type)
reload --host=master
:read-attribute(name=process-type)
or commands option for script

Actual results:
6.4.3
./jboss-cli.sh -c commands=':read-attribute(name=process-type), reload --host=master, :read-attribute(name=process-type)'
{
    ""outcome"" => ""success"",
    ""result"" => ""Domain Controller""
}
Failed to establish connection in 6025ms

Expected results:
6.3.3
./jboss-cli.sh -c commands=':read-attribute(name=process-type), reload --host=master, :read-attribute(name=process-type)'
{
    ""outcome"" => ""success"",
    ""result"" => ""Domain Controller""
}
{
    ""outcome"" => ""success"",
    ""result"" => ""Domain Controller""
}


Additional info:
 - Follow up to https://bugzilla.redhat.com/show_bug.cgi?id=1232933
 - using --timeout doesn't workaround the problem",,;04/Aug/15 3:53 AM;gonthim;10800,,180,0,10800,"6,000%",180,0,10800,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1249031,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/928,,,,,,0.0,4.0,,1|hzxrs7:,9223372036854775807,,,,,,,,,,,02/Aug/15 2:13 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1249031|https://bugzilla.redhat.com/show_bug.cgi?id=1249031] from NEW to POST,26/Aug/15 2:35 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1249031|https://bugzilla.redhat.com/show_bug.cgi?id=1249031] from POST to MODIFIED,16/Sep/15 10:55 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1249031|https://bugzilla.redhat.com/show_bug.cgi?id=1249031] from MODIFIED to ON_QA,24/Sep/15 4:46 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1249031|https://bugzilla.redhat.com/show_bug.cgi?id=1249031] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
CLI Variables 'set' command broken,WFCORE-854,12580015,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gonthim,gonthim,gonthim,31/Jul/15 6:56 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,04/Aug/15 9:37 AM,2.0.0.Alpha12,,,,,,2.0.0.Alpha13,,CLI,,,,,0,,,,,,"Before AESH had 'export', added by the AESH upgrade, the CLI created 'set' to handle variables.

With the upgrade, the commands overlap and interfere.

Using commands, 'set name=value', and then 'echo $name', AESH will now search it's 'export' list for the variable. Which doesn't exist, so the variable is replaced with nothing. By the time the input processing gets to the CLI to search the 'set' variable list, the '$name' part of the string has been removed from the line by AESH's export processing.

Export didn't exist before the upgrade, so disabling it doesn't cause problems.

This was missed by the tests because part of the CLI actually bypasses AESH and most of the tests use that method.",,;31/Jul/15 6:57 AM;gonthim;120,;31/Jul/15 6:57 AM;gonthim;7080,7200,0,7200,100%,7200,0,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/925,,,,,,0.0,0.0,,1|hzxrkn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remoting Subsystem RemoteOutboundConnectionService is caching ConnectionURI causing issues when DNS changes,WFCORE-851,12579814,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,filippe.spolti,bmaxwell,bmaxwell,29/Jul/15 3:25 PM,26/Jan/16 1:54 PM,29/Nov/16 3:53 PM,16/Dec/15 5:36 PM,,,,,,,2.0.5.CR1,,Remoting,,,,,0,,,,,,"Description of problem:
EJB CLient was configured with DNS FQDN to configure access to a remote EJB. If run a simple test adding an entry in /etc/hosts file pointing that FQDN to localhost for tests everything works. However, after finish the tests and remove the entry, the client still connects to localhost instead of resolve the new IP address. Even adding networkaddress.cache.ttl=30 inside security settings didn't work too.

How reproducible:
Everytime you use DNS names to connect to a remote EJB.

Steps to Reproduce:
1. Configure a simple client that connects to a remote EJB using dns name
2. add an entry in /etc/hosts mapping the dns name to localhost
3. run the client code
4. remove the entry in /etc/hosts
5. run the client code again

Actual results:
EJB remote is still reached from localhost

Expected results:
After changing DNS record EJB will be reached in this new address",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1248156,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1229,,,,,,0.0,14.0,,1|hzxqcn:,9223372036854775807,,,,,,,,,,,30/Jul/15 1:01 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from NEW to ASSIGNED,30/Jul/15 1:43 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from ASSIGNED to NEW,10/Aug/15 11:20 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from NEW to CLOSED,18/Aug/15 5:24 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from CLOSED to NEW,27/Aug/15 10:04 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from NEW to CLOSED,06/Nov/15 1:04 PM;jira-bugzilla-migration;Spolti <fspolti@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from CLOSED to NEW,06/Nov/15 5:20 PM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from NEW to ASSIGNED,04/Dec/15 3:50 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from ASSIGNED to POST,10/Dec/15 2:57 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from POST to MODIFIED,16/Dec/15 12:20 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from MODIFIED to ON_QA,19/Jan/16 6:27 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from ON_QA to VERIFIED,21/Jan/16 9:34 AM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from VERIFIED to ASSIGNED,25/Jan/16 7:13 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from ASSIGNED to ON_QA,26/Jan/16 1:54 PM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1248156|https://bugzilla.redhat.com/show_bug.cgi?id=1248156] from ON_QA to VERIFIED,,,,,,,,,,,,,
AuditLogBootingLogTestCase fails on Windows,WFCORE-850,12579756,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,okotek,pkremens,pkremens,29/Jul/15 8:50 AM,28/Aug/15 4:57 AM,29/Nov/16 3:53 PM,28/Aug/15 4:57 AM,2.0.0.Alpha11,,,,,,,,Test Suite,,,,,0,,,,,,"org.jboss.as.test.manualmode.auditlog.AuditLogBootingLogTestCase starts failing on windows since 2.0.0.Alpha11 release, test passed with 2.0.0.Alpha9.

http://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-windows/20/RELEASE=7.x.0,jdk=java18_default,label_exp=eap-sustaining&&w2k8r2&&x86_64/testReport/org.jboss.as.test.manualmode.auditlog/AuditLogBootingLogTestCase/testBootIsLogged_2/

Suspicios message in logs
{noformat}
Caused by: java.nio.file.FileSystemException: C:\wildfly-core\testsuite\manualmode\target\wildfly-core\standalone\configuration\standalone.xml: 
The process cannot access the file because it is being used by another process.
{noformat}","Windows server 2008
java version ""1.8.0_40""
Java(TM) SE Runtime Environment (build 1.8.0_40-b25)
Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25, mixed mode)",,,,,,,,,,,,,,,JBEAP-537,,,,,,,,,,,29/Jul/15 8:53 AM;pkremens;TEST-org.jboss.as.test.manualmode.auditlog.AuditLogBootingLogTestCase.xml;https://issues.jboss.org/secure/attachment/12391389/TEST-org.jboss.as.test.manualmode.auditlog.AuditLogBootingLogTestCase.xml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|hzxpzj:,9223372036854775807,,,,"{noformat}
mvn clean install -Dtest=AuditLogBootingLogTestCase -DtestLogToFile=false  -Dts.manualmode -DfailIfNoTests=false
{noformat}",,,,,,,"28/Aug/15 4:57 AM;okotek;Fixed by Jason Greene, it was an issue with wildfly build tools leaking file descriptors.",,,,,,,,,,,,,,,,,,,,,,,,,,
XmlCompletionScannerTest fails with IBM JDK 8,WFCORE-849,12579738,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,mkopecky,mkopecky,29/Jul/15 6:32 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,06/Aug/15 12:50 PM,2.0.0.Alpha11,,,,,,2.0.0.Alpha13,,Test Suite,,,,,0,,,,,,"*Description of problem:*
org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest#testIncompleteDocument fails on IBM JDK 8

*How reproducible:*
100% on RHEL7 && IBM JDK 8
60% on RHEL6 && 64-bit && IBM JDK 8

*Steps to Reproduce:*
# get fresh wildfly-core
# cd deployment-scanner
# mvn test   -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIP_1  -DfailIfNoTests=false -Dtest=XmlCompletionScannerTest

*Actual results:*
{noformat}
Running org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest
Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.254 sec <<< FAILURE! - in org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest
testIncompleteDocument(org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest)  Time elapsed: 0.214 sec  <<< FAILURE!
java.lang.AssertionError: 
Expected: is <1>
     but: was <0>
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:865)
	at org.junit.Assert.assertThat(Assert.java:832)
	at org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest.testIncompleteDocument(XmlCompletionScannerTest.java:65)
{noformat}

*Expected results:*
No errors in output",,,,,,,,,,,,,,,,JBEAP-532,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/926,,,,,,0.0,2.0,,1|hzxpvj:,9223372036854775807,,,,,,,,,,,"29/Jul/15 6:34 AM;mkopecky;[~ehugonnet], not sure if the assignee shouldn't be you instead of Jason (you are author of XmlCompletionScannerTest)  ...","31/Jul/15 8:23 AM;ehugonnet;Since the test doesn't keep a strong reference on the logger it gets garbage collected during it.
",,,,,,,,,,,,,,,,,,,,,,,,,
"""XNIO001001: No XNIO provider found"" by some tests running with security manager",WFCORE-848,12579731,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,iweiss,pkremens,pkremens,29/Jul/15 4:58 AM,10/Oct/16 9:19 AM,29/Nov/16 3:53 PM,,2.0.0.Alpha11,,,,,,,,Test Suite,,,,,0,,,,,,"Some tests in wildfly-core fails due to ""XNIO001001: No XNIO provider found"" while run with security manager enabled.

{noformat}
mvn test -Dtest=SuspendResumeTestCase -Dsecurity.manager -DtestLogToFile=false

10:27:16,814 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC000001: Failed to start service jboss.test-undertow-server: org.jboss.msc.service.StartException in service jboss.test-undertow-server: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found
	at org.xnio.Xnio.doGetInstance(Xnio.java:238)
	at org.xnio.Xnio.getInstance(Xnio.java:181)
	at io.undertow.Undertow.start(Undertow.java:97)
	at org.wildfly.test.suspendresumeendpoint.TestUndertowService.start(TestUndertowService.java:94)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	... 3 more

10:27:16,816 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""deploy"") failed - address: ([(""deployment"" => ""web-suspend.jar"")]) - failure description: {""WFLYCTL0080: Failed services"" => {""jboss.test-undertow-server"" => ""org.jboss.msc.service.StartException in service jboss.test-undertow-server: Failed to start service
    Caused by: java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found""}}
10:27:16,817 ERROR [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0021: Deploy of deployment ""web-suspend.jar"" was rolled back with the following failure message: 
{""WFLYCTL0080: Failed services"" => {""jboss.test-undertow-server"" => ""org.jboss.msc.service.StartException in service jboss.test-undertow-server: Failed to start service
    Caused by: java.lang.IllegalArgumentException: XNIO001001: No XNIO provider found""}}
{noformat}

Affected tests found so far:
* org.wildfly.core.test.standalone.suspend.web.SuspendResumeTestCase
* org.jboss.as.test.integration.domain.suspendresume.DomainGracefulShutdownTestCase
* org.jboss.as.test.integration.domain.suspendresume.DomainSuspendResumeTestCase",,,,,,,,,,,,,,,,JBEAP-530,,JBEAP-6063,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzxptz:,9223372036854775807,,,,,,,,,,,"07/Oct/16 10:51 AM;iweiss;Hi [~jcacek], I talked about this with Brian and it seems there might be a need to get {{subsystem=security-manager}} into wildfly-core. WDYT?",10/Oct/16 2:07 AM;pkremens;FYI JBEAP-6063,"10/Oct/16 9:19 AM;jcacek;[~pkremens] Thanks for the comment.

[~iweiss] Yes, as comments show in the JIRA Petr had mentioned, we are eager to consume Widfly Security Manager from the Core.",,,,,,,,,,,,,,,,,,,,,,,,
Logging unit test fail to use byteman on hp-ux,WFCORE-847,12579714,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,jamezp,mkopecky,mkopecky,29/Jul/15 3:53 AM,29/Jul/15 3:59 AM,29/Nov/16 3:53 PM,29/Jul/15 3:59 AM,2.0.0.Alpha11,,,,,,,,Logging,Test Suite,,,,0,,,,,,"*Description of problem:*
org.jboss.as.logging.LoggingSubsystemRollbackTestCase from wildfly-core fails to load byteman agent on HP-UX.

*How reproducible:*
Always

*Actual results:*
{noformat}
Tests run: 7, Failures: 0, Errors: 1, Skipped: 3, Time elapsed: 1.622 sec <<< FAILURE! - in org.jboss.as.logging.LoggingSubsystemRollbackTestCase
org.jboss.as.logging.LoggingSubsystemRollbackTestCase(org.jboss.as.logging.LoggingSubsystemRollbackTestCase)  Time elapsed: 0.098 sec  <<< ERROR!
java.lang.Exception: BMUnit : Unable to identify test JVM process during agent load
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.loadAgent(BMUnitConfigState.java:500)
	at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.pushConfigurationState(BMUnitConfigState.java:669)
	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:73)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}

*Expected results:*
No errors on output","HP-UX eph-03 B.11.31 U ia64 4052756529
java version ""1.8.0.01-hp-ux""
Java(TM) SE Runtime Environment (build 1.8.0.01-hp-ux-rc2)
Java HotSpot(TM) 64-Bit Server VM (build 25.31-b07, mixed mode)",,,,,,,,,,,,,,,JBEAP-528,,,,,WFLY-4993,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzxpq7:,9223372036854775807,,,,,,,,,,,29/Jul/15 3:59 AM;mkopecky;Duplicate with https://issues.jboss.org/browse/WFCORE-843,,,,,,,,,,,,,,,,,,,,,,,,,,
"Some tests throws ""Permission check failed"" while run with security manager",WFCORE-846,12579704,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jcacek,pkremens,pkremens,29/Jul/15 2:41 AM,21/Apr/16 4:31 AM,29/Nov/16 3:53 PM,,2.0.0.Alpha11,,,,,,,,Test Suite,,,,,0,,,,,,"Some tests are failing to deploy an archive when testsuite run with security manager enabled.
{noformat}
08:03:07,171 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service test.deployment.trivial: org.jboss.msc.service.StartException in service test.deployment.trivial: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission ""(""java.util.PropertyPermission"" ""test.deployment.trivial.prop"" ""write"")"" in code source ""(vfs:/content/test-http-deployment.sar <no signer certificates>)"" of ""null"")
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:274)
	at org.wildfly.security.manager.WildFlySecurityManager.checkPermission(WildFlySecurityManager.java:176)
	at java.lang.System.setProperty(System.java:792)
	at org.jboss.as.test.deployment.trivial.ServiceActivatorDeployment.start(ServiceActivatorDeployment.java:80)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	... 3 more

08:03:07,173 ERROR [org.jboss.as.controller.management-operation] (XNIO-1 task-5) WFLYCTL0013: Operation (""add"") failed - address: ([{""deployment"" => ""test-http-deployment.sar""}]) - failure description: {""WFLYCTL0080: Failed services"" => {""test.deployment.trivial"" => ""org.jboss.msc.service.StartException in service test.deployment.trivial: Failed to start service
    Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.util.PropertyPermission\"" \""test.deployment.trivial.prop\"" \""write\"")\"" in code source \""(vfs:/content/test-http-deployment.sar <no signer certificates>)\"" of \""null\"")""}}
08:03:07,174 ERROR [org.jboss.as.server] (XNIO-1 task-5) WFLYSRV0021: Deploy of deployment ""test-http-deployment.sar"" was rolled back with the following failure message: 
{""WFLYCTL0080: Failed services"" => {""test.deployment.trivial"" => ""org.jboss.msc.service.StartException in service test.deployment.trivial: Failed to start service
    Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.util.PropertyPermission\"" \""test.deployment.trivial.prop\"" \""write\"")\"" in code source \""(vfs:/content/test-http-deployment.sar <no signer certificates>)\"" of \""null\"")""}}
{noformat}",,,,,,,,,,,,,,,,JBEAP-526,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzxpnz:,9223372036854775807,,,,"{noformat}
...wildfly-core/testsuite/standalone]$ mvn test -Dtest=HttpDeploymentUploadUnitTestCase -Dsecurity.manager -DtestLogToFile=false
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The ActiveOperationSupport shouldn't use assertions for state as assertions can be turned off,WFCORE-845,12579666,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,28/Jul/15 2:52 PM,17/Sep/15 8:39 PM,29/Nov/16 3:53 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,The [{{ActiveOperationSupport}}|https://github.com/wildfly/wildfly-core/blob/master/protocol/src/main/java/org/jboss/as/protocol/mgmt/ActiveOperationSupport.java#L151] uses assertions to validate if the remote protocol has been shutdown. These should throw an exception rather than an {{AssertionError}} which can be turned off.,,,,,,,,,,,,,,,,,,WFCORE-199,,,WFLY-4850,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzxpfj:,9223372036854775807,,,,,,,,,,,17/Sep/15 8:39 PM;brian.stansberry;The assertion discussed in WFCORE-845 needs to be disabled altogether until WFCORE-199 is fixed.,,,,,,,,,,,,,,,,,,,,,,,,,,
LoggingSubsystemRollbackTestCase fails on HP-UX during byteman initialization,WFCORE-843,12579478,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,jamezp,pkremens,pkremens,27/Jul/15 11:33 AM,09/Oct/15 12:22 AM,29/Nov/16 3:53 PM,08/Oct/15 4:06 PM,2.0.0.Alpha11,,,,,,,,Logging,,,,,0,,,,,,"org.jboss.as.logging.LoggingSubsystemRollbackTestCase fails on HP-UX
{noformat}
Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.15 sec <<< FAILURE! - in org.jboss.as.logging.LoggingSubsystemRollbackTestCase
org.jboss.as.logging.LoggingSubsystemRollbackTestCase(org.jboss.as.logging.LoggingSubsystemRollbackTestCase)  Time elapsed: 0.147 sec  <<< ERROR!
java.lang.Exception: BMUnit : Unable to identify test JVM process during agent load
        at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.loadAgent(BMUnitConfigState.java:500)
        at org.jboss.byteman.contrib.bmunit.BMUnitConfigState.pushConfigurationState(BMUnitConfigState.java:669)
        at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:73)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.junit.runners.Suite.runChild(Suite.java:127)
        at org.junit.runners.Suite.runChild(Suite.java:26)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
        at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:113)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:85)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:54)
        at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:134)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{noformat}","HP-UX eph-04 B.11.31 U ia64
java version ""1.8.0.01-hp-ux""
Java(TM) SE Runtime Environment (build 1.8.0.01-hp-ux-rc2)
Java HotSpot(TM) 64-Bit Server VM (build 25.31-b07, mixed mode)",,,,,,,,,,,,,,,JBEAP-513,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,7.0,,1|hzxobb:,9223372036854775807,,,,,,,,,,,29/Jul/15 2:40 PM;jamezp;Are there other byteman tests failing on HP-UX? The only fix I can think of would be to ignore these tests. I've got no way to test or debug on HP-UX.,30/Jul/15 12:39 AM;pkremens;There are some clustering tests failing due to same reason https://issues.jboss.org/browse/JBEAP-495,"08/Oct/15 1:33 AM;pkremens;Environment issue, see JBEAP-513. Not sure how to handle WF jiras, James, can you please resolve/close this? Thanks!","08/Oct/15 1:56 AM;pkremens;I am just a little bit confused by Exception in the output (happens on all platforms) 
{noformat}
Exception in thread ""Attach Listener"" Agent failed to start!
Running org.jboss.as.logging.LoggingSubsystemRollbackTestCase
Tests run: 12, Failures: 0, Errors: 0, Skipped: 2, Time elapsed: 2.658 sec - in org.jboss.as.logging.LoggingSubsystemRollbackTestCase
{noformat}
but since all tests passed I hope it's fine...","08/Oct/15 4:05 PM;jamezp;I looked at that wile debugging I found that error prints out when there's an attempt to initialize byteman twice via the entry point. I didn't look much further since it seemed to work, but if it becomes an issue I can look into it further.",08/Oct/15 4:06 PM;jamezp;Closing this as it seems to be fixed by an upgrade to the JDK.,"09/Oct/15 12:22 AM;pkremens;Not an issue, thanks for looking into that.",,,,,,,,,,,,,,,,,,,,
Patching module testsuite failure,WFCORE-841,12579359,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,aloubyansky,brian.stansberry,brian.stansberry,24/Jul/15 3:28 PM,10/Sep/15 9:57 PM,29/Nov/16 3:53 PM,10/Sep/15 9:57 PM,,,,,,,,,Patching ,,,,,0,,,,,,"When running the core build locally , the 'patching' module testsuite fails:

{code}
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
objc[58076]: Class JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/java and /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.
Running org.jboss.as.patching.cli.ContentConflictsUnitTestCase
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.892 sec - in org.jboss.as.patching.cli.ContentConflictsUnitTestCase
Running org.jboss.as.patching.cli.LocalPatchInfoPatchIdUnitTestCase
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.269 sec - in org.jboss.as.patching.cli.LocalPatchInfoPatchIdUnitTestCase
Running org.jboss.as.patching.cli.PatchInspectUnitTestCase
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.044 sec <<< FAILURE! - in org.jboss.as.patching.cli.PatchInspectUnitTestCase
testMain(org.jboss.as.patching.cli.PatchInspectUnitTestCase)  Time elapsed: 0.044 sec  <<< FAILURE!
java.lang.AssertionError: expected:<{Type=one-off, Description=this is one-off patch 1, Identity name=product, Identity version=version, Patch ID=e7221af6-a05f-49f9-bf24-e40501b54db6, Link=http://test.one}> but was:<{}>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.jboss.as.patching.cli.CLIPatchInfoUtil.assertPatchInfo(CLIPatchInfoUtil.java:76)
	at org.jboss.as.patching.cli.CLIPatchInfoUtil.assertPatchInfo(CLIPatchInfoUtil.java:57)
	at org.jboss.as.patching.cli.PatchInspectUnitTestCase.testMain(PatchInspectUnitTestCase.java:180)
{code}

If I clean and run the test by itself, it passes. It also passes on the CI jobs on brontes, but the log shows the tests excecute in a different order.

Given all that, my expectation is that one of the two tests that run locally before the failing one is leaving some sort of mess behind. I've found that @Ignoring org.jboss.as.patching.cli.LocalPatchInfoPatchIdUnitTestCase solves the problem, so I will send up a PR that does that as a workaround.

The problem does not occur with 2.0.0.Alpha11, and there are only two commits in master since then. One is an undertow upgrade, so it's almost certain the problem was introduced with the other: https://github.com/wildfly/wildfly-core/pull/904","$ java -version
java version ""1.8.0_45""
Java(TM) SE Runtime Environment (build 1.8.0_45-b14)
Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)

OS X Yosemite 10.10.4",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzxnmv:,9223372036854775807,,,,,,,,,,,24/Jul/15 3:30 PM;brian.stansberry;PR ignoring the test: https://github.com/wildfly/wildfly-core/pull/916,"27/Jul/15 9:47 AM;gonthim;I've ensured LocalPatchInfoPatchIdUnitTest is running first, and that only that one and PatchInspectUnitTestCase are running so nothing is between them, but I can't replicate it. I can't find a way the tests could interfere with each other either. Patch Inspect only seems to read an XML in the patch, so I'm not sure how an environment mess would effect it.

I can force this to happen in two ways.
1) Moving the bytestream reset below the ctx.handle at line 180. Which makes the entire byte stream empty.
2) Adding a newline character to the bytestream before the ctx.handle at line 180. Which messes up the output processing because no empty lines are expected.

But I can't figure out a race situation that could cause the first problem or where a spare newline character would come from to cause the second.

Is it possible to get the size of the byte array at PatchInspectUnitTestCase line 180? That would let me know if it's a newline or if the stream is empty. If it's a newline the output processing can be tweaked to ignore them even if I'm not sure where they're coming from.

Adding a short sleep between 179 and 180 would also test if this is a race condition of some kind. Possibly the streams is not getting updated fast enough to be turned into a byteArray and processed.

I've got a Fedora 22 and a Win7 environment, but haven't gotten it to show up on either one. No OSX to experiment with though.","30/Jul/15 7:31 AM;aloubyansky;Given the async nature of the new Aesh, your guess of the output being late is worth investigating. That would mean other tests could be affected too. [~brian.stansberry] have you seen this failure only in this test? And on this line?",10/Sep/15 9:57 PM;brian.stansberry;Doesn't fail any more for me.,,,,,,,,,,,,,,,,,,,,,,,
Don't store state in InMemoryAuditLogHandlerResourceDefinition,WFCORE-839,12579280,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,24/Jul/15 5:44 AM,21/Aug/15 5:09 PM,29/Nov/16 3:53 PM,21/Aug/15 5:09 PM,2.0.0.Alpha11,,,,,,2.0.0.Beta3,,Domain Management,,,,,0,,,,,,"https://github.com/wildfly/wildfly-core/pull/890#discussion_r35354989

 private static final Map<String, InMemoryAuditLogHander> histories = Collections.synchronizedMap(new HashMap<String, InMemoryAuditLogHander>());

We don't want to delay merging this PR for this, but once it's merged please send up a PR to make this a non-static field and have the InMemoryAuditLogHandlerResourceDefinition pass a ref to it to the handlers when it constructs them.

Having this be static is no big deal in this case, but I don't want anyone looking at kernel code and thinking that using static fields to store state is a good practice.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/924,,,,,,0.0,0.0,,1|hzxn5j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Running tearDown() method of custom server setup task throws AssertionError in ActiveOperationSupport ,WFCORE-837,12579204,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,ehugonnet,vchepeli,vchepeli,23/Jul/15 12:20 PM,28/Aug/15 9:19 AM,29/Nov/16 3:53 PM,24/Jul/15 1:30 PM,1.0.0.Final,1.0.1.Final,2.0.0.Alpha10,,,,,,Domain Management,,,,,0,,,,,,"Running tearDown() method of custom server setup tasks in AbstractNodeAuthentication abstract test:
      KerberosSystemPropertiesSetupTask.class,
      SecurityDomainsSetupTask.class,
      SecurityTraceLoggingServerSetupTask.class,
      KrbLdapServerSetupTask.class,
      Krb5ConfServerSetupTask.class
throws AssertionError. 
Example of SecurityTraceLoggingServerSetupTask
{code}
    @Override
    public void tearDown(ManagementClient managementClient, String containerId) throws Exception {
        if (categories == null || categories.isEmpty()) {
            return;
        }

        final List<ModelNode> updates = new ArrayList<ModelNode>();

        for (String category : categories) {
            if (category == null || category.length() == 0) {
                continue;
            }
            updates.add(Util.createRemoveOperation(PATH_LOGGING.append(""logger"", category)));
        }
        ModelNode op = Util.createEmptyOperation(""write-attribute"", PATH_LOGGING.append(""console-handler"", ""CONSOLE""));
        op.get(""name"").set(""level"");
        op.get(""value"").set(""INFO"");
        CoreUtils.applyUpdates(updates, managementClient.getControllerClient()); // Applying changes fails here
    }
{code}
and in ActiveOperationSupport:151 shutdown property is already true but should be still false
{code}
    protected <T, A> ActiveOperation<T, A> registerActiveOperation(final Integer id, A attachment, ActiveOperation.CompletedCallback<T> callback) {
        lock.lock(); try {
            // Check that we still allow registration
            assert ! shutdown; // Here it throws AssertionError
            final Integer operationId;
            if(id == null) {
                // If we did not get an operationId, create a new one
                operationId = operationIdManager.createBatchId();
            } else {
                // Check that the operationId is not already taken
                if(! operationIdManager.lockBatchId(id)) {
                    throw ProtocolLogger.ROOT_LOGGER.operationIdAlreadyExists(id);
                }
                operationId = id;
            }
            final ActiveOperationImpl<T, A> request = new ActiveOperationImpl<T, A>(operationId, attachment, getCheckedCallback(callback));
            final ActiveOperation<?, ?> existing =  activeRequests.putIfAbsent(operationId, request);
            if(existing != null) {
                throw ProtocolLogger.ROOT_LOGGER.operationIdAlreadyExists(operationId);
            }
            activeCount++; // condition.signalAll();
            return request;
        } finally {
            lock.unlock();
        }
    }
{code}

Stack trace is following
java.lang.AssertionError: null
        at org.jboss.as.protocol.mgmt.ActiveOperationSupport.registerActiveOperation(ActiveOperationSupport.java:151)
        at org.jboss.as.protocol.mgmt.ActiveOperationSupport.registerActiveOperation(ActiveOperationSupport.java:121)
        at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:121)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:80)
        at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdate(CoreUtils.java:177)
        at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdates(CoreUtils.java:172)
        at org.infinispan.test.integration.security.tasks.AbstractTraceLoggingServer","Arquillian, Wildfly-9.0.0.CR2",,,,,,,,,,,,,,,,,WFLY-5229,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|hzxmpb:,9223372036854775807,,,,"Source code is here: https://github.com/vchepeli/infinispan.git in ISPN-4502 branch 
1) checkout ISPN-4502 branch
2) run mvn clean install pl core -DskipTests to install core artifact into local repo
3) run mvn clean verify -pl integrationtests/security-it -Dit.test=NodeAuthenticationKrb*IT to run integration tests",,,,vchepeli,,,"23/Jul/15 1:12 PM;brian.stansberry;Does this fail always, or only intermittently?

If the former it's likely there's some problem in the test setup.","23/Jul/15 1:16 PM;brian.stansberry;Emmanuel, can you have a look at this?

I suspect what is happening is one of these server setup tasks is doing something such that the server closes the connection to the client, and that's why the 'shutdown' field is true.","24/Jul/15 6:37 AM;ctomc;Also upgrading to WildFly 9.0.0.Final would help, as it has wildfly-arquillian 1.0.0.Final that has quite few improvements over the one in CR2.","24/Jul/15 6:59 AM;vchepeli;Yes [~brian.stansberry] it fails always.  [~ctomc] we have wildfly-arquillian 1.0.0.Final as dependency in parent/pom.xml. I tried this and still not working. Two wildfly servers are started manually. I try dynamically reconfigure them and add security domains, trace logging, generating kerberos passwords etc. Problem could be when managementClient tries to connect to second server but first is already shutdowned and throws above issue because shutdown property is already set. Maybe there should be as many shutdown properties as servers available at moment   ","24/Jul/15 12:36 PM;ehugonnet;You can't have setup tasks that modify the model in  the teardown with manual mode tests.
Why ? Because the tasks are run when the test class is ending and all the deployments are removed but since you are in manual mode you have shut down the containers by then.
Even using an @AfterClass method isn’t a solution, so I'm afraid you have to restore your model in your last @Test method (or in an @AfterClass) like for example https://github.com/wildfly/wildfly/blob/master/testsuite/integration/manualmode/src/test/java/org/jboss/as/test/manualmode/web/ssl/HTTPSWebConnectorTestCase.java","28/Aug/15 9:11 AM;ehugonnet;Ok i've a solution by changing some code in wildfly-arquillian so that @AfterClass (junit) is run after the server setup tasks teardown.
",,,,,,,,,,,,,,,,,,,,,
Capability resolution does not properly deal with 'included' profiles and socket-binding-groups,WFCORE-834,12578822,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,21/Jul/15 3:12 PM,30/Jul/15 6:18 PM,29/Nov/16 3:53 PM,30/Jul/15 6:18 PM,2.0.0.Alpha10,,,,,,2.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Resolution of capabilities declared in the domain 'profile' and 'socket-binding-group' resource tree works properly when the resources don't include others. But once 'includes' are declared, the capability resolution won't understand the relationship between the including resource and the included ones, and capabilities declared in the included ones will not be resolvable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/917,,,,,,0.0,1.0,,1|hzxkk7:,9223372036854775807,,,,,,,,,,,24/Jul/15 4:08 PM;brian.stansberry;See the description of https://github.com/wildfly/wildfly-core/pull/917 for a summary of the design of the solution for this.,,,,,,,,,,,,,,,,,,,,,,,,,,
Access control exceptions missing for non-existent resources,WFCORE-832,12578735,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,harald.pehl,harald.pehl,21/Jul/15 7:36 AM,06/Oct/15 12:00 PM,29/Nov/16 3:53 PM,06/Oct/15 12:00 PM,,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"When asking for the access control metadata using (r-r-d) on *existing* resources I get an exceptions block: 

{code}
/server-group=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [(""server-group"" => ""*"")],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {
                ""deployment"" => {""model-description"" => undefined},
                ""jvm"" => {""model-description"" => undefined},
                ""deployment-overlay"" => {""model-description"" => undefined},
                ""system-property"" => {""model-description"" => undefined}
            },
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""management-subsystem-endpoint"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""profile"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""socket-binding-default-interface"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""socket-binding-group"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""socket-binding-port-offset"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""replace-deployment"" => {""execute"" => false},
                        ""stop-servers"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""restart-servers"" => {""execute"" => false},
                        ""resume-servers"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""suspend-servers"" => {""execute"" => false},
                        ""reload-servers"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""start-servers"" => {""execute"" => false},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true}
                    }
                },
                ""exceptions"" => {""[(\""server-group\"" => \""main-server-group\"")]"" => {
                    ""read"" => true,
                    ""write"" => true,
                    ""attributes"" => {
                        ""management-subsystem-endpoint"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""profile"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""socket-binding-default-interface"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""socket-binding-group"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""socket-binding-port-offset"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => true},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => true},
                        ""replace-deployment"" => {""execute"" => true},
                        ""stop-servers"" => {""execute"" => true},
                        ""remove"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => true},
                        ""map-put"" => {""execute"" => true},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""restart-servers"" => {""execute"" => true},
                        ""resume-servers"" => {""execute"" => true},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""suspend-servers"" => {""execute"" => true},
                        ""reload-servers"" => {""execute"" => true},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => true},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => true},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => true},
                        ""read-children-names"" => {""execute"" => true},
                        ""start-servers"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => true},
                        ""read-children-resources"" => {""execute"" => true}
                    },
                    ""address"" => [(""server-group"" => ""main-server-group"")]
                }}
            }
        }
    }]
}
{code}

However when using the same operation on *non-existng* resources I don't see an exception block:

{code}
/server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {}
            }
        }
    }]
}
{code}

Some notes on the domain: 
- Built from WildFly 10 master 
- No deployments present
- Role {{main-maintainer}} is a server group scoped role based on Maintainer and scoped to main-server-group
- Role {{other-monitor}} is a server group scoped role based on Monitor and scoped to other-server-group

What we would need is a way to *always* get the exceptions no matter whether the resource exists. In the console we create a so-called security context which uses wildcard r-r-d operations like the ones above. This security context is used later on to show / hide UI controls.",,,,,,,,,,,,,,,,WFLY-2318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1151,,,,,,0.0,12.0,,1|hzxk1z:,9223372036854775807,,,,,,,,,,,"21/Jul/15 10:49 AM;heiko.braun;the key here is two grouped  scoped roles with different perms each (monitor vs. maintainer)

- first case
now, when requesting a wildcard (server-group=*) we would expect the response to contain an exception clause. which it correctly does when the subresources actually exist

- second case
the second case document the same query but the sub resources (deployments) don't exist
from my point of view, since the RBAC meta data is static, it shouldn't matter wether or not the requested resources actually exist","21/Jul/15 1:04 PM;brian.stansberry;This comment is largely notes to myself / thinking out loud.

The handling of these ops is a bit of an unholy mess, due to the dual meaning of the 'star' character when dealing with 'read-resource-description'. The 'star' means ""give me results for all the descriptions that match this pattern"", which is why the result of the first op is a list, while the result of /server-group=main-server-group:read-resource-description will not be a list. But then then 'star' is also the value in the address element where the resource definition is actually registered. There it indicates the actual resource instances that use the definition can have arbitrary names.

This will take a bit of thought.

The good news is the value of the keys underneath 'exceptions' is the string form of a full path address, not just a single element. So without changing structure its possible to include {code}""exceptions""=> ""[(\""server-group\"" => \""main-server-group\""),(""deployment""=>""*""]""{code}as part of the result list item for 

{code}

    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" =>
{code}

I'll need to check whether that {code}""exceptions""=> ""[(\""server-group\"" => \""main-server-group\""),(""deployment""=>""*""]""{code} value is meant to be an absolute address or relative though. Hopefully absolute; if so there's no compatibility issue involved with fixing this; it just becomes a question of getting the correct data to the correct spot so it can be output.","28/Sep/15 12:07 PM;brian.stansberry;Kabir, can you have a look in case your other work on r-r-d has already fixed this? If not, feel free to reassign back to me. I'm just hoping. ;)","28/Sep/15 12:19 PM;kabirkhan;CLI to add the scoped roles is:
{code}
/core-service=management/access=authorization/server-group-scoped-role=main-maintainer:add(base-role=maintainer,server-groups=[main-server-group])
/core-service=management/access=authorization/server-group-scoped-role=other-monitor:add(base-role=monitor,server-groups=[other-server-group])
{code}
The WFCORE-994 work does not seem to fix this","28/Sep/15 12:24 PM;brian.stansberry;[~kabirkhan] with your WFCORE-994 branch, what's the result for this?

{code}
/server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{code}","28/Sep/15 12:25 PM;kabirkhan;Same as in the description:
{code}
[domain@localhost:9990 /] /server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {}
            }
        }
    }]
}
{code}",28/Sep/15 12:47 PM;brian.stansberry;Thanks. I assume the issue then is when it is working out the exceptions it is only based on the last PathElement in the target address. It's not realizing the server-group=a/deployment=* might be an exception.,"29/Sep/15 6:04 AM;kabirkhan;I have made changes to https://github.com/kabir/wildfly-core/commits/WFCORE-832 so the output is now
{code}
[domain@localhost:9990 /] /server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {""[(\""server-group\"" => \""main-server-group\""),(\""deployment\"" => \""*\"")]"" => {
                    ""read"" => true,
                    ""write"" => true,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => true
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => true},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => true},
                        ""remove"" => {""execute"" => true},
                        ""deploy"" => {""execute"" => true},
                        ""list-add"" => {""execute"" => true},
                        ""map-put"" => {""execute"" => true},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => true},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => true},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => true},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => true},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => true},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => true},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => true}
                    },
                    ""address"" => [
                        (""server-group"" => ""main-server-group""),
                        (""deployment"" => ""*"")
                    ]
                }}
            }
        }
    }]
}
{code}
-I am currently running tests locally to make sure I have not broken anything else.- +The existing core tests pass+
It would be good to get some feedback on this before going to the effort of writing proper tests.","29/Sep/15 10:49 AM;brian.stansberry;Edited to replace char '*' with 'x' to avoid JIRA formatting issues.

The basic format looks like what I expect if there's something about the server group that is different: there's an exception entry for server-group=main-server-group/deployment=x.

Are the contents of that exception entry correct given the roles involved? I'm just asking; I have no idea.

I'm curious what it looks like if main-server-group actually has a couple deployments. Intuitively I would expect two or 3 exception entries:

1) server-group=main-server-group/deployment=one 
2) server-group=main-server-group/deployment=two 
3) PERHAPS: server-group=main-server-group/deployment=x 

I might be wrong though; I'm a bit unclear about what drives the ""exceptions"". Is there one for every actual *resource* that has different perms? Or is it for some sort of ""address pattern"" kind of thing? The server-group=main-server-group/deployment=x address isn't an actual resource address, nor is it the address under which a resource definition is registered (that's server-group=x/deployment=x). It's kind of a mix of an actual resource address element (server-group=m-s-g) and the address under which a child def is registered (deployment=x).

It seems the exception has to be some sort of ""address pattern"" thing; otherwise there is no sensible result for the request you posted.

In that case, it seems logical that if there actually were deployment=one and deployment=two present, the result would still be the single exception entry you posted, for server-group=main-server-group/deployment=x. There is no need entries for server-group=main-server-group/deployment=one|two, as those are just concrete instances of the server-group=main-server-group/deployment=x address pattern.","29/Sep/15 4:35 PM;kabirkhan;They are each listed when there are several deployments. The following sequence of CLI commands starts with no deployments:
{code}
[domain@localhost:9990 /] /server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {""[(\""server-group\"" => \""main-server-group\""),(\""deployment\"" => \""*\"")]"" => {
                    ""read"" => true,
                    ""write"" => true,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => true
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => true},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => true},
                        ""remove"" => {""execute"" => true},
                        ""deploy"" => {""execute"" => true},
                        ""list-add"" => {""execute"" => true},
                        ""map-put"" => {""execute"" => true},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => true},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => true},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => true},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => true},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => true},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => true},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => true}
                    },
                    ""address"" => [
                        (""server-group"" => ""main-server-group""),
                        (""deployment"" => ""*"")
                    ]
                }}
            }
        }
    }]
}
[domain@localhost:9990 /] deploy ~/temp/Calendar.war
One of --disabled, --all-server-groups or --server-groups is missing.
[domain@localhost:9990 /] deploy ~/temp/Calendar.war --all-server-groups
[domain@localhost:9990 /] /server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {""[(\""server-group\"" => \""main-server-group\""),(\""deployment\"" => \""Calendar.war\"")]"" => {
                    ""read"" => true,
                    ""write"" => true,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => true
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => true
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => true},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => true},
                        ""remove"" => {""execute"" => true},
                        ""deploy"" => {""execute"" => true},
                        ""list-add"" => {""execute"" => true},
                        ""map-put"" => {""execute"" => true},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => true},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => true},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => true},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => true},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => true},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => true},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => true}
                    },
                    ""address"" => [
                        (""server-group"" => ""main-server-group""),
                        (""deployment"" => ""Calendar.war"")
                    ]
                }}
            }
        }
    }]
}
[domain@localhost:9990 /] deploy ~/temp/Calendar2.war --all-server-groups
[domain@localhost:9990 /] /server-group=*/deployment=*:read-resource-description(access-control=trim-descriptions,operations=true){roles=[main-maintainer,other-monitor]}
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""server-group"" => ""*""),
            (""deployment"" => ""*"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""description"" => undefined,
            ""access-constraints"" => {""application"" => {""deployment"" => {""type"" => ""core""}}},
            ""attributes"" => undefined,
            ""operations"" => undefined,
            ""notifications"" => undefined,
            ""children"" => {},
            ""access-control"" => {
                ""default"" => {
                    ""read"" => true,
                    ""write"" => false,
                    ""attributes"" => {
                        ""enabled"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""name"" => {
                            ""read"" => true,
                            ""write"" => false
                        },
                        ""runtime-name"" => {
                            ""read"" => true,
                            ""write"" => false
                        }
                    },
                    ""operations"" => {
                        ""read-children-types"" => {""execute"" => true},
                        ""whoami"" => {""execute"" => true},
                        ""map-clear"" => {""execute"" => false},
                        ""list-get"" => {""execute"" => true},
                        ""write-attribute"" => {""execute"" => false},
                        ""remove"" => {""execute"" => false},
                        ""deploy"" => {""execute"" => false},
                        ""list-add"" => {""execute"" => false},
                        ""map-put"" => {""execute"" => false},
                        ""read-attribute-group-names"" => {""execute"" => true},
                        ""redeploy"" => {""execute"" => false},
                        ""read-resource-description"" => {""execute"" => true},
                        ""read-resource"" => {""execute"" => true},
                        ""add"" => {""execute"" => false},
                        ""query"" => {""execute"" => true},
                        ""read-operation-description"" => {""execute"" => true},
                        ""map-get"" => {""execute"" => true},
                        ""list-clear"" => {""execute"" => false},
                        ""read-attribute"" => {""execute"" => true},
                        ""map-remove"" => {""execute"" => false},
                        ""read-attribute-group"" => {""execute"" => true},
                        ""undefine-attribute"" => {""execute"" => false},
                        ""read-children-names"" => {""execute"" => true},
                        ""read-operation-names"" => {""execute"" => true},
                        ""list-remove"" => {""execute"" => false},
                        ""read-children-resources"" => {""execute"" => true},
                        ""undeploy"" => {""execute"" => false}
                    }
                },
                ""exceptions"" => {
                    ""[(\""server-group\"" => \""main-server-group\""),(\""deployment\"" => \""Calendar2.war\"")]"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {
                            ""enabled"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""name"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""runtime-name"" => {
                                ""read"" => true,
                                ""write"" => true
                            }
                        },
                        ""operations"" => {
                            ""read-children-types"" => {""execute"" => true},
                            ""whoami"" => {""execute"" => true},
                            ""map-clear"" => {""execute"" => true},
                            ""list-get"" => {""execute"" => true},
                            ""write-attribute"" => {""execute"" => true},
                            ""remove"" => {""execute"" => true},
                            ""deploy"" => {""execute"" => true},
                            ""list-add"" => {""execute"" => true},
                            ""map-put"" => {""execute"" => true},
                            ""read-attribute-group-names"" => {""execute"" => true},
                            ""redeploy"" => {""execute"" => true},
                            ""read-resource-description"" => {""execute"" => true},
                            ""read-resource"" => {""execute"" => true},
                            ""add"" => {""execute"" => true},
                            ""query"" => {""execute"" => true},
                            ""read-operation-description"" => {""execute"" => true},
                            ""map-get"" => {""execute"" => true},
                            ""list-clear"" => {""execute"" => true},
                            ""read-attribute"" => {""execute"" => true},
                            ""map-remove"" => {""execute"" => true},
                            ""read-attribute-group"" => {""execute"" => true},
                            ""undefine-attribute"" => {""execute"" => true},
                            ""read-children-names"" => {""execute"" => true},
                            ""read-operation-names"" => {""execute"" => true},
                            ""list-remove"" => {""execute"" => true},
                            ""read-children-resources"" => {""execute"" => true},
                            ""undeploy"" => {""execute"" => true}
                        },
                        ""address"" => [
                            (""server-group"" => ""main-server-group""),
                            (""deployment"" => ""Calendar2.war"")
                        ]
                    },
                    ""[(\""server-group\"" => \""main-server-group\""),(\""deployment\"" => \""Calendar.war\"")]"" => {
                        ""read"" => true,
                        ""write"" => true,
                        ""attributes"" => {
                            ""enabled"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""name"" => {
                                ""read"" => true,
                                ""write"" => true
                            },
                            ""runtime-name"" => {
                                ""read"" => true,
                                ""write"" => true
                            }
                        },
                        ""operations"" => {
                            ""read-children-types"" => {""execute"" => true},
                            ""whoami"" => {""execute"" => true},
                            ""map-clear"" => {""execute"" => true},
                            ""list-get"" => {""execute"" => true},
                            ""write-attribute"" => {""execute"" => true},
                            ""remove"" => {""execute"" => true},
                            ""deploy"" => {""execute"" => true},
                            ""list-add"" => {""execute"" => true},
                            ""map-put"" => {""execute"" => true},
                            ""read-attribute-group-names"" => {""execute"" => true},
                            ""redeploy"" => {""execute"" => true},
                            ""read-resource-description"" => {""execute"" => true},
                            ""read-resource"" => {""execute"" => true},
                            ""add"" => {""execute"" => true},
                            ""query"" => {""execute"" => true},
                            ""read-operation-description"" => {""execute"" => true},
                            ""map-get"" => {""execute"" => true},
                            ""list-clear"" => {""execute"" => true},
                            ""read-attribute"" => {""execute"" => true},
                            ""map-remove"" => {""execute"" => true},
                            ""read-attribute-group"" => {""execute"" => true},
                            ""undefine-attribute"" => {""execute"" => true},
                            ""read-children-names"" => {""execute"" => true},
                            ""read-operation-names"" => {""execute"" => true},
                            ""list-remove"" => {""execute"" => true},
                            ""read-children-resources"" => {""execute"" => true},
                            ""undeploy"" => {""execute"" => true}
                        },
                        ""address"" => [
                            (""server-group"" => ""main-server-group""),
                            (""deployment"" => ""Calendar.war"")
                        ]
                    }
                }
            }
        }
    }]
}
[domain@localhost:9990 /] 
{code}

The following is a bit half-digested.... While I see what you are saying regarding folding Calendar.war and Calendar2.war together into deployment=x, I am also not sure if that is feasible when there are actual children. The main worry is if we have say 4 deployments, if three of them have the same exception and the fourth not, do we roll 3 of them together as deployment=x, and the last as deployment=unique? Also this could affect other things in other places? At the same time, it seems that things under server-group are slightly special due to the server scoped roles.","29/Sep/15 4:54 PM;brian.stansberry;Thanks.

I agree that rolling them up would be both difficult and could lead to other bugs.

I think what you have is ok, so long as there is a clear pattern that always applies and can be documented. Something like:

""If in the exceptions section there is an entry with a wildcard value in an element of its address, this indicates there is resource type definition registered under that exact element, but that there are no actual resource instances of that type. If there are actual resource instances of a type, there will be individual exceptions entries for those resources.""","06/Oct/15 7:50 AM;heiko.braun;+1

I agree with Brian. It needs to be predictable. Other then that it looks good to me.",,,,,,,,,,,,,,,
Content repo gc task can delete content in mid-upload,WFCORE-829,12578450,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,ehugonnet,brian.stansberry,brian.stansberry,17/Jul/15 10:10 AM,24/Nov/15 4:52 AM,29/Nov/16 3:53 PM,30/Sep/15 4:03 AM,2.0.0.Alpha10,,,,,,,,Domain Management,,,,,0,,,,,,"Description of problem:

if upload of an application takes more than 5 minutes, it is removed from repository by clean-obsolete-content.

- start the upload

[Host Controller] 15:44:05,456 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 1) JBAS014900: Content added at location /opt/jboss-eap-6.4/domain-dc/data/content/90/828120fc51e4b5f5ededbb5981198b4be93e64/content

- After 5 minutes, the content is removed:

[Host Controller] 15:49:32,111 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 33) JBAS014903: Content /opt/jboss-eap-6.4/domain-dc/data/content/90/828120fc51e4b5f5ededbb5981198b4be93e64 is obsolete and will be removed
[Host Controller] 15:49:32,113 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 33) JBAS014901: Content removed from location /opt/jboss-eap-6.4/domain-dc/data/content/90/828120fc51e4b5f5ededbb5981198b4be93e64/content

The reference for the deployment is added to domain.xml only after the upload is finished. ",,,,,,,,,,,,,,,,,,,,,WFCORE-999,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,10.0,,1|hzxicf:,9223372036854775807,,,,,,,,,,,17/Jul/15 10:10 AM;brian.stansberry;The likely problem here is AbstractDeploymentUploadHandler is not acquiring the exclusive lock (e.g. by calling context.acquireControllerLock()). As a result the background cleanup op isn't forced to wait.,17/Jul/15 10:15 AM;brian.stansberry;Likely fix is the last commit at https://github.com/bstansberry/wildfly-core/commits/WFCORE-829,"10/Aug/15 4:49 PM;brian.stansberry;Emmanuel, can you have a quick look at this? I believe the commit I linked will fix it, but I haven't thought hard.

We may need this fixed in order to handle a different issue reliably.","11/Aug/15 8:08 AM;ehugonnet;It should work but should we lock the model all while the upload is in progress (being more than 5 minutes) ?
Maybe we should either upload in a temp directory or create a .lock file which would 'protect' the file from cleaning ?
Also currently the 5 minutes delay is not configurable, maybe we should make it configurable ?","11/Aug/15 12:21 PM;brian.stansberry;I'm not overly concerned about the locking, as the upload is really an inherent part of whatever other op is going to use the uploaded content (e.g. the deployment add op.) I believe if the CLI were used for this instead of a pure HTTP client, the upload would happen as part of the execution of the deployment add itself. (IIRC the CLI attaches the content as a stream.)

That said, the temp file idea is interesting. It could perhaps be used with the deployment add handlers itself too, i.e. to get the over-the-network part of the upload out of the lock.

HOWEVER, while looking at this further since writing the above I'm confused about the initial report. Looking at DomainApiUploadHandler (which deals with the HTTP part of this) in both EAP 6 and WildFly it looks like the effect is to store the uploaded content to a temp file and then invoke the management op with the temp file attached as a stream. So the basic effect should already be what you suggest. So what is taking 5 mins without the lock held? Just the local FS copy from that temp file to the repo?

The .lock file idea is less tempting. Mostly because it adds complexity. If the system crashes in the middle of upload, the .lock file will be left around. Using a file in the jboss.server.tmp.dir is less of an issue as that dir gets wiped on reboot.","12/Aug/15 12:20 PM;brian.stansberry;NOTE: Readers of this JIRA should regard all the comments above as likely being completely off base. Just assume my initial comment about AbstractDeploymentUploadHandler was nothing more than a wild, likely wrong guess.","18/Aug/15 9:15 AM;ehugonnet;I can't reproduce it. The only 'way' to create such an issue seems to be uploading some content using  upload-deployment-bytes, upload-deployment-stream and upload-deployment-url operations without using the returned hash to create a deployment using it (thus without any reference).","22/Sep/15 11:15 AM;brian.stansberry;I'm not sure how successfully running :upload-deployment-url and then seeing the content deleted 8 mins later is a reproduction of this issue, other than the fact that the deletion was in 8 mins instead of 10. Those missing 2 mins may be a clue to something though!

But you shouldn't expect content to not be gc'd if all you do is run :upload-deployment-url. All that does is put some bits on the server FS, where they are then eligible for gc if no change is made to the persistent config to reference them (i.e. a /deployment=foo:add op).",30/Sep/15 4:03 AM;ehugonnet;The reopening is not correct as it is a bad usage of the API and NOT the same issue as the original one.,24/Nov/15 4:52 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1238813|https://bugzilla.redhat.com/show_bug.cgi?id=1238813] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,
Ehcache dependency version clash in the testsuite,WFCORE-822,12578173,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,asoldano,asoldano,15/Jul/15 10:51 AM,23/Jul/15 6:47 PM,29/Nov/16 3:53 PM,23/Jul/15 6:47 PM,,,,,,,2.0.0.Alpha11,,Test Suite,,,,,0,,,,,,"We currently have a problem with the transitive ehcache dependency in the WidFly integration testsuite.
The dependency comes from:
{noformat}
[INFO] +- org.wildfly:wildfly-testsuite-shared:jar:10.0.0.Alpha6-SNAPSHOT:test
...
[INFO] |  +- org.apache.directory.server:apacheds-core-annotations:jar:2.0.0-M15:test
[INFO] |  |  +- org.apache.directory.server:apacheds-core:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-core-shared:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-admin:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-authn:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-authz:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-changelog:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-collective:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-event:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-exception:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-journal:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-normalization:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-operational:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-referral:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-schema:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-subtree:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-interceptors-trigger:jar:2.0.0-M15:test
[INFO] |  |  |  |  \- org.apache.directory.api:api-ldap-extras-trigger:jar:1.0.0-M20:test
[INFO] |  |  |  +- org.apache.directory.api:api-ldap-extras-util:jar:1.0.0-M20:test
[INFO] |  |  |  \- bouncycastle:bcprov-jdk15:jar:140:test
[INFO] |  |  +- org.apache.directory.server:apacheds-core-api:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.server:apacheds-core-constants:jar:2.0.0-M15:test
[INFO] |  |  |  +- org.apache.directory.api:api-ldap-client-api:jar:1.0.0-M20:test
[INFO] |  |  |  +- org.apache.directory.api:api-ldap-extras-aci:jar:1.0.0-M20:test
[INFO] |  |  |  \- net.sf.ehcache:ehcache-core:jar:2.4.4:test
...
{noformat}

Now, the issue is that Apache CXF needs EHCache 2.7.1 or greater for WS-Security functionalites. Alternatively, it can properly work *without* EHCache, but in that case EHCache must not be available in the test classpath.

I tried upgrading the ehcache dependency, but I could not find a version that actually works. Version 2.7.1 is not usable because it pulls a bunch of terracotta components that are not on the jboss maven repository.
With more recent versions, instead, it looks like some ldap / login functionality do not work; the following tests fail:
org.jboss.as.test.integration.security.loginmodules.LdapLoginModuleTestCase
org.jboss.as.test.integration.security.loginmodules.LdapExtLikeAdvancedLdapLMTestCase
org.jboss.as.test.integration.security.loginmodules.LdapExtLoginModuleTestCase
org.jboss.as.test.integration.security.loginmodules.LdapExtPasswordCachingTestCase

with an error message saying
{noformat}
16:49:58,610 ERROR [org.jboss.as.arquillian.container.ServerSetupObserver] (main) Setup task failed during setup. Offending class 'org.jboss.as.test.integration.security.loginmodules.LdapExtLDAPServerSetupTask@5871a482': net.sf.ehcache.CacheException: Another unnamed CacheManager already exists in the same VM. Please provide unique names for each CacheManager in the config or do one of following:
1. Use one of the CacheManager.create() static factory methods to reuse same CacheManager with same name or create one if necessary
2. Shutdown the earlier cacheManager before creating new one with same name.
The source of the existing CacheManager is: [Programmatically configured]
        at net.sf.ehcache.CacheManager.assertNoCacheManagerExistsWithSameName(CacheManager.java:628)
        at net.sf.ehcache.CacheManager.init(CacheManager.java:392)
        at net.sf.ehcache.CacheManager.<init>(CacheManager.java:270)
        at org.jboss.as.test.integration.ldap.InMemoryDirectoryServiceFactory.init(InMemoryDirectoryServiceFactory.java:119)
        at org.apache.directory.server.core.factory.DSAnnotationProcessor.createDS(DSAnnotationProcessor.java:87)
        at org.apache.directory.server.core.factory.DSAnnotationProcessor.getDirectoryService(DSAnnotationProcessor.java:318)
        at org.jboss.as.test.integration.security.loginmodules.LdapExtLDAPServerSetupTask.createLdap2(LdapExtLDAPServerSetupTask.java:238)
        at org.jboss.as.test.integration.security.loginmodules.LdapExtLDAPServerSetupTask.setup(LdapExtLDAPServerSetupTask.java:125)
        at org.jboss.as.arquillian.container.ServerSetupObserver.handleBeforeDeployment(ServerSetupObserver.java:116)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
        at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
        at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
        at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:145)
        at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:116)
        at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
        at org.jboss.arquillian.container.impl.client.container.ContainerDeployController$3.call(ContainerDeployController.java:155)
        at org.jboss.arquillian.container.impl.client.container.ContainerDeployController$3.call(ContainerDeployController.java:128)
        at org.jboss.arquillian.container.impl.client.container.ContainerDeployController.executeOperation(ContainerDeployController.java:271)
        at org.jboss.arquillian.container.impl.client.container.ContainerDeployController.deploy(ContainerDeployController.java:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
...
{noformat}
",,,,,,,,,,,,,,,,,,,,,WFLY-4982,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/889,,,,,,0.0,2.0,,1|hzxgof:,9223372036854775807,,,,,,,,,,,"15/Jul/15 10:54 AM;asoldano;The only ""solution"" I could think about, if those tests cannot be modified to work with recent ehcache is to split the integration basic testsuite into 2 maven modules having different dependency trees...","15/Jul/15 1:10 PM;asoldano;For the records, this is serving as a workaround: https://github.com/asoldano/wildfly/commit/3e49583c8895d420568720e8b59861419d1c5ab0",,,,,,,,,,,,,,,,,,,,,,,,,
Attribute for-hosts for Security Realm with Kerberos does not select keytab in defined order,WFCORE-820,12577993,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,14/Jul/15 9:54 AM,28/Aug/15 4:14 AM,29/Nov/16 3:53 PM,23/Jul/15 6:43 PM,2.0.0.Alpha9,,,,,,2.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"This was cloned from https://bugzilla.redhat.com/show_bug.cgi?id=1228228

Attribute for-hosts for Security realm with Kerberos does not select keytab in order which is described in $EAP_SERVER/docs/schema/jboss-as-config_1_7.xsd (begin on line 456). 

According to this XSD hostname values from for-hosts attributes (steps 1. nad 2.) are iterated before values obtained from principal (steps 3. and 4.). In case when keytab element (denote as keytab1) contains for-hosts attribute with hostname EXAMPLE and some another keytab element (denote as keytab2) contains principal HTTP/EXAMPLE@SOMETHING.COM then keytab2 is selected instead of keytab1. It means step 3. is performed before step 2. 

Configuration for mentioned above example:

{code:xml}
<server-identities>
    <kerberos>
        <keytab principal=""HTTP/ANYVALUE@SOMETHING.COM"" path=""/path/to/krb1.keytab"" for-hosts=""EXAMPLE""/>
        <keytab principal=""HTTP/EXAMPLE@SOMETHING.COM"" path=""/path/to/krb2.keytab"" for-hosts=""SOMEHOST""/>
    </kerberos>
</server-identities>
{code}

In case when hostname in for-hosts contains also protocol (HTTP/EXAMPLE instead of EXAMPLE) then it works correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1228228,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/887,,,,,,0.0,1.0,,1|hzxfkv:,9223372036854775807,,,,,,,,,,,28/Aug/15 4:14 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1228228|https://bugzilla.redhat.com/show_bug.cgi?id=1228228] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,,,
"Error messages for profile and socket-binding-group includes should be in host-controller, not controller",WFCORE-816,12577821,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,13/Jul/15 7:31 AM,16/Jul/15 2:46 PM,29/Nov/16 3:53 PM,16/Jul/15 2:46 PM,2.0.0.Alpha9,,,,,,2.0.0.Alpha10,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/881,,,,,,0.0,0.0,,1|hzxelb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
One profile can have more ancestors with same submodules,WFCORE-815,12577775,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,13/Jul/15 3:57 AM,15/Jul/15 9:34 AM,29/Nov/16 3:53 PM,15/Jul/15 9:34 AM,2.0.0.Alpha9,,,,,,2.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"*Description of problem:*
One profile can have more ancestors with same submodules. It leads to {{WFLYCTL0212: Duplicate resource \[(""subsystem"" => ""subsystem_name"")\]}} . Hierarchical composition of profiles was added to AS with [EAP7-281|https://issues.jboss.org/browse/EAP7-281] and [WFCORE-382|https://issues.jboss.org/browse/WFCORE-382]

*How reproducible:*
Always

*Steps to Reproduce:*
# get fresh EAP
# ./domain.sh
# ./jboss-cli.sh -c
# /profile=mail-01:add
# /profile=mail-02:add
# /profile=mail-01/subsystem=mail:add
# /profile=mail-02/subsystem=mail:add
# /profile=default-new:add
# /profile=default-new:list-add(name=includes, value=mail-01)
# /profile=default-new:list-add(name=includes, value=mail-02)


*Actual results:*
No errors.

*Expected results:*
{noformat}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0401: Profile 'mail-01' defines subsystem 'mail' which is also defined in its ancestor profile 'mail-02'. Overriding subsystems is not supported""},
    ""rolled-back"" => true
}
{noformat}


*Workaround:*
Add any subsystem to default-new profile:
# /profile=mail-01:add
# /profile=mail-02:add
# /profile=mail-01/subsystem=mail:add
# /profile=mail-02/subsystem=mail:add
# /profile=default-new:add
# {color:green}/profile=default-new/subsystem=jdr:add{color}
# /profile=default-new:list-add(name=includes, value=mail-01)
# /profile=default-new:list-add(name=includes, value=mail-02)",,,,,,,,,,,,,,,,JBEAP-401,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/881,,,,,,0.0,0.0,,1|hzxeb3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractRemoveStepHandler doesn't let AttributeDefinitions record default capability requirements,WFCORE-813,12577746,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,10/Jul/15 6:38 PM,15/Jul/15 9:27 AM,29/Nov/16 3:53 PM,15/Jul/15 9:27 AM,2.0.0.Alpha8,,,,,,2.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"Similar to WFCORE-779, but for the remove handler.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/879,,,,,,0.0,0.0,,1|hzxe4v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The profile ""clone"" operation adds the subsystems to the cloned profile in reverse order",WFCORE-812,12577741,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,brian.stansberry,brian.stansberry,10/Jul/15 3:56 PM,16/Jul/15 2:47 PM,29/Nov/16 3:53 PM,16/Jul/15 2:47 PM,,,,,,,2.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"If you clone a profile and then look at the xml, the subsystems are in reverse order in the clone.

I didn't look to see if this issue continues at lower levels.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/882,,,,,,0.0,1.0,,1|hzxe3r:,9223372036854775807,,,,,,,,,,,10/Jul/15 5:01 PM;brian.stansberry;It may not be reverse order; it may be random order.,,,,,,,,,,,,,,,,,,,,,,,,,,
Audit log handler sub-resources cannot be removed in same op as the handler,WFCORE-810,12577721,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,10/Jul/15 11:54 AM,15/Jul/15 9:27 AM,29/Nov/16 3:53 PM,15/Jul/15 9:27 AM,2.0.0.Alpha6,,,,,,2.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"The various child resources under the management audit log syslog handler resources implement the runtime part of  ""remove"" by trying to read the resource tree starting at the parent and then constructing and registering a new audit log handler.

This will fail if the child resource and the parent audit log handler resource are both removed in separate steps in the same composite op. The read of the parent will fail as it will be gone by Stage.RUNTIME.

The composite thing is kind of an edge case (since just the parent can be removed) but it also interferes with WFCORE-808.",,,,,,,,,,,,,,,,,,,,,WFCORE-808,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/877,,,,,,0.0,0.0,,1|hzxdzb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can not parse an ObjectListAttributeDefinition of a PersistentResourceDefinition,WFCORE-809,12577683,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jmesnil,jmesnil,10/Jul/15 8:39 AM,23/Jul/15 6:48 PM,29/Nov/16 3:53 PM,23/Jul/15 6:48 PM,2.0.0.Alpha6,,,,,,2.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"My server resource defines an ""interceptors"" attribute:

{noformat}
        public static final ObjectTypeAttributeDefinition CLASS = ObjectTypeAttributeDefinition.Builder.of(""class"",
                create(""name"", ModelType.STRING, false)
                        .setAllowExpression(false)
                        .build(),
                create(""module"", ModelType.STRING, false)
                        .setAllowExpression(false)
                        .build())
                .build();

        public static final ObjectListAttributeDefinition INTERCEPTORS = ObjectListAttributeDefinition.Builder.of(""interceptors"", CLASS)
                .setAllowNull(true)
                .setAllowExpression(false)
                .setMinSize(1)
                .setMaxSize(Integer.MAX_VALUE)
                .build();
{noformat}

The ""interceptors"" is a LIST of ""class"" attribute which is an OBJECT composed of a ""name"" and ""module"" attribute.

I'm not sure what is the corresponding XML format for this attribute.
Ideally, I'd like to have this XML format:

{noformat}
    <server name=""default"" >
            ...
            <interceptors>
                <class name=""org.bar.MyInterceptor""
                       module=""org.bar"" />
                <class name=""org.baz.MyOtherInterceptor""
                       module=""org.baz"" />
            </interceptors>
            ...
      </server>
{noformat}

This XML can not be parsed and I have not found which XML representation can be parsed given my INTERCEPTORS definition.

The XML parsing fails with:

{noformat}
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[23,27]
Message: WFLYCTL0377: Unexpected element '{urn:jboss:domain:test:1.0}interceptors' encountered. Valid elements are: 'buffer-cache'
	at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:98)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:270)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:166)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:266)
	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:166)
	at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:41)
	at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:35)
{noformat}

Corresponding test case in wildly-core is in my branch at https://github.com/jmesnil/wildfly-core/tree/parse_ObjectListAttributeDefinition


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/908,,,,,,0.0,2.0,,1|hzxdqv:,9223372036854775807,,,,,,,,,,,"10/Jul/15 10:46 AM;ctomc;We don't have any convention / impl about how complex attributes should be persisted / marshaled in PRD.
for time being you will need to provide custom marshaller / persister for that attribute.","15/Jul/15 8:18 AM;jmesnil;I have not been able to provide a customer parser for this type of attribute.

It seems the PersistentResourceDefinition implementation does not support to have an attribute represented by an XML element.
The parser will look for management attributes:
* in XML attributes (and I can't represent a LIST of OBJECT in a single attribute)
* in a XML element if the attribute has an attribute group. But the XML element representing the attribute group can not include any children XML element

Once the PersistentResourceDefinition has looked in these places for attributes, it expects any other XML children elements to be represent children of the resources. But in this case, a XML element would also represent the XML representation of its ""interceptors"" attribute.",,,,,,,,,,,,,,,,,,,,,,,,,
Cannot read and list log files in sub-directory of jboss.server.log.dir,WFCORE-802,12576737,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,nziakova,nziakova,01/Jul/15 6:42 AM,06/Aug/15 4:45 PM,29/Nov/16 3:53 PM,06/Aug/15 12:51 PM,,,,,,,2.0.0.Alpha13,,Logging,,,,,0,,,,,,"Listing and reading log files using CLI or Web Console works only for log files placed in jboss.server.log.dir directly. It should be enabled to log files in sub-directories of jboss.server.log.dir, too.
",,,,,,,,,,,,,,,,JBEAP-379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/937,,,,,,0.0,0.0,,1|hzx84f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
file-handler configured via CLI should require file attribute during add operation,WFCORE-801,12577576,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jstourac,jstourac,09/Jul/15 9:59 AM,10/Jul/15 3:15 PM,29/Nov/16 3:53 PM,09/Jul/15 7:26 PM,,,,,,,2.0.0.Alpha8,,Logging,,,,,0,,,,,,"When adding file-handler via CLI I can add it without ""file"" element specified and operation is successfull. However when server reload is performed then configuration fails to parse and server stops with following error:
{code}
15:41:59,452 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)
	at org.jboss.as.server.ServerService.boot(ServerService.java:350)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:272)
	at java.lang.Thread.run(Thread.java:745)
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[98,13]
Message: WFLYCTL0133: Missing required attribute(s): FILE
	at org.jboss.as.controller.parsing.ParseUtils.missingRequired(ParseUtils.java:161)
	at org.jboss.as.logging.LoggingSubsystemParser_3_0.parseFileHandlerElement(LoggingSubsystemParser_3_0.java:522)
	at org.jboss.as.logging.LoggingSubsystemParser_3_0.readElement(LoggingSubsystemParser_3_0.java:151)
	at org.jboss.as.logging.LoggingSubsystemParser_3_0.readElement(LoggingSubsystemParser_3_0.java:96)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69)
	at org.jboss.as.server.parsing.StandaloneXml_4.parseServerProfile(StandaloneXml_4.java:540)
	at org.jboss.as.server.parsing.StandaloneXml_4.readServerElement(StandaloneXml_4.java:237)
	at org.jboss.as.server.parsing.StandaloneXml_4.readElement(StandaloneXml_4.java:140)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:69)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:47)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)
	... 3 more

15:41:59,453 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}

Expected behaviour is that adding operation on file-handler would require ""file"" element to be specified or whole operation fails with suitable error message.

Not sure if it is connected directly or is another problem but I would expect that when ""file"" element is required then it should not be nillable but when I run:
{code}
/subsystem=logging/file-handler=test:read-resource-description
{code}
I can see that nillable is enabled for it.",,,,,,,,,,,,,,,,JBEAP-414,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/873,,,,,,0.0,0.0,,1|hzxd3z:,9223372036854775807,,,,"{code}
[standalone@localhost:9990 /] /subsystem=logging/file-handler=test:add()
{""outcome"" => ""success""}
[standalone@localhost:9990 /] reload
Failed to establish connection in 6015ms: WFLYPRT0053: Could not connect to http-remoting://localhost:9990. The connection failed: Connection refused
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Parser support missing for EAP 6.3 version of 'skip-group-loading',WFCORE-798,12577316,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,brian.stansberry,brian.stansberry,07/Jul/15 3:42 PM,26/Aug/15 9:27 AM,29/Nov/16 3:53 PM,26/Aug/15 9:27 AM,2.0.0.Alpha6,,,,,,2.0.0.Beta6,,Domain Management,,,,,0,,,,,,"Trying to run WildFly full's ParseAndMarshalModelsTestCase against the EAP 6.3 configs results in failures like this:

{code}
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[37,21]
Message: WFLYCTL0197: Unexpected attribute 'skip-group-loading' encountered
	at org.jboss.as.controller.parsing.ParseUtils.unexpectedAttribute(ParseUtils.java:117)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseLocalAuthentication_1_3(ManagementXml_Legacy.java:2105)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseAuthentication_1_3(ManagementXml_Legacy.java:1486)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseSecurityRealm_1_3(ManagementXml_Legacy.java:779)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseSecurityRealms(ManagementXml_Legacy.java:649)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseManagement_1_5(ManagementXml_Legacy.java:224)
	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseManagement(ManagementXml_Legacy.java:151)
	at org.jboss.as.server.parsing.StandaloneXml_Legacy.readServerElement_1_4(StandaloneXml_Legacy.java:444)
	at org.jboss.as.server.parsing.StandaloneXml_Legacy.readElement(StandaloneXml_Legacy.java:136)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:66)
	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:47)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)
	... 136 more
{code}

The EAP 6.4 configs have this attribute but don't fail, so it seems the problem is isolated to the 6.3 schema parsing; i.e. urn:jboss:domain:1.6.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/992,https://github.com/wildfly/wildfly/pull/7988,,,,,0.0,2.0,,1|hzxbk7:,9223372036854775807,,,,,,,,,,,08/Jul/15 10:32 AM;brian.stansberry;https://github.com/wildfly/wildfly/pull/7720 has the EAP 6.3 tests. Currently @Ignored due to this issue.,25/Aug/15 8:39 AM;dlofthouse;I think this issue is a good issue to illustrate why we never ever try and do fancy XML version handling where we attempt to merge two major versions of a schema converging for a subset of the schema for a specific minor version ;-),,,,,,,,,,,,,,,,,,,,,,,,,
One profile can have more ancestors with same submodules,WFCORE-796,12577199,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,kabirkhan,mkopecky,mkopecky,07/Jul/15 7:17 AM,13/Jul/15 8:55 AM,29/Nov/16 3:53 PM,13/Jul/15 8:55 AM,2.0.0.Alpha6,,,,,,,,Domain Management,,,,,0,,,,,,"*Description of problem:*
One profile can have more ancestors with same submodules. It leads to {{WFLYCTL0212: Duplicate resource \[(""subsystem"" => ""subsystem_name"")\]}} . Hierarchical composition of profiles was added to AS with [EAP7-281|https://issues.jboss.org/browse/EAP7-281] and [WFCORE-382|https://issues.jboss.org/browse/WFCORE-382]

*How reproducible:*
Always

*Steps to Reproduce:*
# get fresh WildFly
# ./domain.sh
# ./jboss-cli.sh -c
# /profile=mail-01:add
# /profile=mail-02:add
# /profile=mail-01/subsystem=mail:add
# /profile=mail-02/subsystem=mail:add
# /profile=default-new:add
# /profile=default-new:list-add(name=includes, value=mail-01)
# /profile=default-new:list-add(name=includes, value=mail-02)


*Actual results:*
No errors.

*Expected results:*
{noformat}
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""WFLYCTL0401: Profile 'mail-01' defines subsystem 'mail' which is also defined in its ancestor profile 'mail-02'. Overriding subsystems is not supported""},
    ""rolled-back"" => true
}
{noformat}


*Workaround:*
Add any subsystem to default-new profile:
# /profile=mail-01:add
# /profile=mail-02:add
# /profile=mail-01/subsystem=mail:add
# /profile=mail-02/subsystem=mail:add
# /profile=default-new:add
# {color:green}/profile=default-new/subsystem=jdr:add{color}
# /profile=default-new:list-add(name=includes, value=mail-01)
# /profile=default-new:list-add(name=includes, value=mail-02)",,,,,,,,,,,,,,,,JBEAP-401,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzxavj:,9223372036854775807,,,,,,,,,,,"13/Jul/15 8:55 AM;kabirkhan;I did not notice that this had already been cloned, so I cloned this to https://issues.jboss.org/browse/WFCORE-815 and did the work against that.",,,,,,,,,,,,,,,,,,,,,,,,,,
Attribute groups (and allowedValues) not inherited by further attributes.,WFCORE-795,12577043,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,dlofthouse,dlofthouse,03/Jul/15 9:23 AM,05/Jul/15 3:50 PM,29/Nov/16 3:53 PM,05/Jul/15 3:50 PM,,,,,,,2.0.0.Alpha6,,Domain Management,,,,,0,affects_elytron,,,,,"Take the following attribute defintion: -

{code}
    static final SimpleAttributeDefinition PATH = new SimpleAttributeDefinitionBuilder(ElytronDescriptionConstants.PATH, ModelType.STRING, true)
        .setAllowExpression(true)
        .setMinSize(1)
        .setAttributeGroup(ElytronDescriptionConstants.FILE)
        .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES)
        .build();
{code}

If this is used as a basis for a new attribute: -

{code}
    static final SimpleAttributeDefinition PATH =
            new SimpleAttributeDefinitionBuilder(ElytronDescriptionConstants.PATH, FileAttributeDefinitions.PATH)
                    .setAttributeGroup(ElytronDescriptionConstants.FILE)
                    .setAllowNull(false)
                    .build();
{code}

The attribute group was not inherited and needed to be manually set again.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/858,,,,,,0.0,1.0,,1|hzx9xz:,9223372036854775807,,,,,,,,,,,03/Jul/15 9:30 AM;kabirkhan;Changed the title of this Jira since looking at the code it does not copy the allowedValues field either.,,,,,,,,,,,,,,,,,,,,,,,,,,
IPv6ScopeIdMatchUnitTestCase fails if some IPv6 subinterface exists,WFCORE-794,12577024,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pkremens,pkremens,pkremens,03/Jul/15 7:31 AM,18/Mar/16 4:04 PM,29/Nov/16 3:53 PM,18/Mar/16 4:04 PM,2.0.0.Alpha5,,,,,,3.0.0.Alpha1,,Test Suite,,,,,0,,,,,,"The test (org.jboss.as.controller.interfacesIPv6ScopeIdMatchUnitTestCase) keeps failing on one of our Solaris boxes with following interfaces:
{noformat}
/usr/sbin/ifconfig -a
...
lo0: flags=2002000849<UP,LOOPBACK,RUNNING,MULTICAST,IPv6,VIRTUAL> mtu 8252 index 1
        inet6 ::1/128 
net0: flags=120002000841<UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 fe80::221:28ff:feb3:20f2/10 
net0:1: flags=120002080841<UP,RUNNING,MULTICAST,ADDRCONF,IPv6,PHYSRUNNING> mtu 1500 index 2
        inet6 2620:52:0:105f:221:28ff:feb3:20f2/64 
net4: flags=120002000840<RUNNING,MULTICAST,IPv6,PHYSRUNNING> mtu 1500 index 3
        inet6 ::/0
{noformat}
*Error Message*
{noformat}
expected:</2620:52:0:105f:221:28ff:feb3:20f2%2> but was:<null>
{noformat}
*Stacktrace*
{noformat}
java.lang.AssertionError: expected:</2620:52:0:105f:221:28ff:feb3:20f2%2> but was:<null>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.testNonLoopback(IPv6ScopeIdMatchUnitTestCase.java:129)
{noformat}
Promlem is, that getByName returns null when resolving NetworkInterface by its subinterface name (net0:1 in this case). See following example.
{noformat}
Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();
while (interfaces.hasMoreElements()) {
    NetworkInterface nic = interfaces.nextElement();
    Enumeration<NetworkInterface> subInterfaces = nic.getSubInterfaces();
    while (subInterfaces.hasMoreElements()) {
        NetworkInterface subInterface = subInterfaces.nextElement();
        System.out.println(subInterface.getName());
        System.out.println(NetworkInterface.getByName(subInterface.getName()));
    }
}
{noformat}
----
{noformat}
em1:0
null
{noformat}
",,,,,,,,,,,,,,,,JBEAP-397,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1415,,,,,,0.0,1.0,,1|hzx9tz:,9223372036854775807,,,,,,,,,,,11/Feb/16 5:57 AM;pkremens;see JBEAP-397 for more info,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI history can store every command only once,WFCORE-791,12576883,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gonthim,pkremens,pkremens,02/Jul/15 7:30 AM,30/Aug/15 10:00 PM,29/Nov/16 3:53 PM,30/Aug/15 10:00 PM,2.0.0.Alpha5,,,,,,2.0.0.Beta6,,CLI,,,,,0,,,,,,"Commands logged in .jboss-cli-history file are overwritten every time. If we called command sometimes in the past, it is removed from history and appended to the end of the history file. ",,,,,,,,,,,,,,,,JBEAP-387,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/984,,,,,,0.0,4.0,,1|hzx90f:,9223372036854775807,,,,"* reproduce
{noformat}
rm ~/.jboss-cli-history
cd $JBOSS_HOME/bin
./standalone.sh &

./jboss-cli.sh -c
:read-attribute(name=server-state)
:read-attribute(name=product-name)
exit

./jboss-cli.sh -c
:read-attribute(name=product-name)
:read-attribute(name=running-mode)
exit

cat .jboss-cli-history
{noformat}
* Actual
{noformat}
:read-attribute(name=server-state)
:read-attribute(name=product-name)
:read-attribute(name=running-mode)
exit
{noformat}
* Expected
{noformat}
:read-attribute(name=server-state)
:read-attribute(name=product-name)
exit
:read-attribute(name=product-name)
:read-attribute(name=running-mode)
exit
{noformat}",,,,,,,"02/Jul/15 8:51 AM;aloubyansky;[~stalep] could you please comment on this? I guess, it depends on how you view the history, i.e. as an actual history or a vocabulary of the entered commands in the order they were executed.","07/Jul/15 1:24 AM;baranowb;Probably something like nix shell have, that is for instance 1000 entries with all commands that user punched in.","07/Aug/15 6:07 AM;gonthim;This behavior is different than nix shells. My bash shell won't put two identical commands in a row into the history file, but AESH actually removes the duplicate command from anywhere in the history list. If you duplicate a command 2 or 20 or 200 lines later, the first one is removed when the new one is inserted.

That seems like odd history behavior to me. It's not really a 'history' at all. Just a list of the 500 previous unique commands.","07/Aug/15 10:31 AM;gonthim;Talked to Stale about it. This is supposed to work like a shell history, but as described previously it currently doesn't.

Going to tweak it in AESH for a 0.63 release. ",,,,,,,,,,,,,,,,,,,,,,,
Executing a composite operation allowing services to restart fails if the first operation relies on a capability of a remove operation,WFCORE-788,12576841,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jamezp,jamezp,01/Jul/15 8:25 PM,02/Jul/15 9:03 PM,29/Nov/16 3:53 PM,02/Jul/15 9:03 PM,,,,,,,2.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"This does seem to be somewhat of an edge case as the only way to reproduce it is to add the {{allow-resource-service-restart=true}} header to a composite operation. The first operation must also need access to a capability provided by a resource being removed. It's likely an acceptable failure, but the failure isn't seen when executing the same composite operation again.

The issue seems to be that the [capability is removed|https://github.com/bstansberry/wildfly-core/blob/discard-model/controller/src/main/java/org/jboss/as/controller/capability/registry/RuntimeCapabilityRegistration.java#L81] on the first execution that fails and is rolled back. On the second execution of the composite operation there is no [capability registered|https://github.com/bstansberry/wildfly-core/blob/discard-model/controller/src/main/java/org/jboss/as/controller/ModelControllerImpl.java#L1369] registered in the {{RuntimeCapabilityRegistration}} so the [remove|https://github.com/bstansberry/wildfly-core/blob/discard-model/controller/src/main/java/org/jboss/as/controller/ModelControllerImpl.java#L1385] of the capability doesn't happen. This allows the first operation to pass.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/853,,,,,,0.0,2.0,,1|hzx8rb:,9223372036854775807,,,,"You'll need to build a local copy of https://github.com/wildfly/wildfly/pull/7682 then start a standalone server and CLI.

Execute the following command:
{code}
/subsystem=datasources/data-source=test:add(driver-name=h2,jndi-name=""java:jboss/datasources/Test"",connection-url=""jdbc:h2:~/tmp/db/test"",enabled=true)
{code}

Then we need to disable and remove the data-source in a batch operation.
{code}
batch
/subsystem=datasources/data-source=test:disable
/subsystem=datasources/data-source=test:remove
run-batch --headers={allow-resource-service-restart=true}
{code}

Execute the run-batch command again and there is no failure.",,,,,,,01/Jul/15 10:58 PM;brian.stansberry;The discard of the model isn't happening in this situation. https://github.com/wildfly/wildfly-core/pull/853 needs work.,02/Jul/15 3:18 PM;brian.stansberry;Maybe the discard of the model wasn't happening; maybe it was; I'm not sure. I'll fix that separately. But I think the main problem here is the clone of the CapabilityRegistry wasn't deep enough. The RuntimeCapabilityRegistration isn't cloned so mutations made by the first op are visible in the original registry even after the cloned registry is discarded.,,,,,,,,,,,,,,,,,,,,,,,,,
OSHs that remove capabilities cannot access the removed capability to restore runtime services during rollback,WFCORE-787,12576808,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,01/Jul/15 1:01 PM,02/Jul/15 9:04 PM,29/Nov/16 3:53 PM,02/Jul/15 9:04 PM,2.0.0.Alpha5,,,,,,2.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"If an OSH removes a capability in Stage.MODEL, then removes services associated with the capability, and then the operation rolls back, the OSH can't use the capability to figure out how to restore services.

This is a somewhat more difficult problem than what I addressed for actually removing the runtime services in [1]. That solution relied on making it easy for the remove step handler to use the capability it itself removed. But restoring services typically involves the remove handler calling out to utility code, often part of an add handler. Modifying that utility code to let the remove handler provide service names would be painful.

Instead I propose simply discarding the modified management model at the beginning of rollback, with the result that rollback handlers will see the capabilities as they existed before the op began.

See http://lists.jboss.org/pipermail/wildfly-dev/2015-July/004170.html for details.


[1]",,,,,,,,,,,,,,,,,,WFCORE-792,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,http://lists.jboss.org/pipermail/wildfly-dev/2015-July/004170.html,,,https://github.com/wildfly/wildfly-core/pull/853,,,,,,0.0,0.0,,1|hzx8jz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
standalone.sh does not handle correctly situation when CDPATH environment variable is set,WFCORE-784,12561973,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mplmc,mplmc,29/Jan/15 6:35 AM,30/Oct/15 12:17 PM,29/Nov/16 3:53 PM,30/Oct/15 12:17 PM,,,,,,,2.0.0.Final,,Scripts,,,,,0,,,,,,"bin/standalone.sh does not use ""shift"" correctly when parsing commandline option, failing with ""bin/standalone.sh: 34: shift: can't shift that many"" if ""--debug"" without a parameter is used on dash (default shell in debian)

Second issue is that the script does not handle correctly situation when CDPATH environment variable is set, failing completely.

Attaching patch that fixes both these issues.",,,,,,,,,,,,,,,,,,,,,,,,,,,29/Jan/15 6:36 AM;mplmc;bin-fix.patch;https://issues.jboss.org/secure/attachment/12387588/bin-fix.patch,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1175,,,,,,1.0,3.0,,1|hzutrb:,9223372036854775807,,,,,,,,,,,29/Jan/15 6:36 AM;mplmc;Patch to fix the issue,"07/Apr/15 5:54 PM;brian.stansberry;Tomaz, please move to WFCORE if this is still valid, else please resolve as Out of Date.",20/Oct/15 5:39 AM;ctomc;first one was addressed as part of WFCORE-659 second one is still valid.,,,,,,,,,,,,,,,,,,,,,,,,
 Intermittent Disconnection from CLI After Reload,WFCORE-783,12576556,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,gonthim,gonthim,gonthim,30/Jun/15 6:12 AM,18/Aug/15 8:37 AM,29/Nov/16 3:53 PM,07/Jul/15 10:42 AM,2.0.0.Alpha5,,,,,,2.0.0.Alpha8,,CLI,,,,,0,,,,,,"Race condition in server reload. The CLI only waits for a connection to be established and does not check the server status before continuing to execute commands. If the next command is executed before the server had completed the reload, failures occur.",,,,,,,,,,,,,,,,,,,,,WFCORE-855,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1232933,,,,,Perform,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/849,,,,,,0.0,5.0,,1|hzx70n:,9223372036854775807,,,,,,,,,,,07/Jul/15 10:40 AM;jira-bugzilla-migration;Joe Wertz <ewertz@redhat.com> changed the Status of [bug 1232933|https://bugzilla.redhat.com/show_bug.cgi?id=1232933] from ASSIGNED to POST,23/Jul/15 2:43 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1232933|https://bugzilla.redhat.com/show_bug.cgi?id=1232933] from POST to MODIFIED,28/Jul/15 11:14 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1232933|https://bugzilla.redhat.com/show_bug.cgi?id=1232933] from MODIFIED to ON_QA,31/Jul/15 4:28 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1232933|https://bugzilla.redhat.com/show_bug.cgi?id=1232933] from ON_QA to ASSIGNED,31/Jul/15 7:39 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1232933|https://bugzilla.redhat.com/show_bug.cgi?id=1232933] from ASSIGNED to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
AbstractAddStepHandler doesn't let AttributeDefinitions record default capability requirements,WFCORE-779,12576332,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,brian.stansberry,brian.stansberry,25/Jun/15 3:02 PM,10/Jul/15 3:16 PM,29/Nov/16 3:53 PM,08/Jul/15 7:05 PM,2.0.0.Alpha4,,,,,,2.0.0.Alpha8,,Domain Management,,,,,0,,,,,,"AbstractAddStepHandler.recordCapabilitiesAndRequirements(...) has this:

{code}
        ModelNode model = resource.getModel();
        for (AttributeDefinition ad : attributes) {
            if (model.hasDefined(ad.getName())) {
                ad.addCapabilityRequirements(context, model.get(ad.getName()));
            }
        }
{code}

That 'if' check removes the opportunity for an AD to register a requirement based on the default value of the attribute.

SimpleAttributeDefinition includes logic for doing that, so not giving it a chance to execute is inconsistent. AbstractWriteAttributeHandler also doesn't include any such limitation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/869,,,,,,0.0,0.0,,1|hzx5mf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remoting subsystem requires org.wildfly.io.worker.default capability even in a domain profile meant for servers with no io subsystem,WFCORE-778,12576200,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,24/Jun/15 2:12 PM,25/Jun/15 6:38 PM,29/Nov/16 3:53 PM,25/Jun/15 6:38 PM,,,,,,,2.0.0.Alpha5,,Domain Management,Remoting,,,,0,,,,,,"The remoting subsystem creates a requirement for the org.wildfly.io.worker.default capability if no specific worker capability is configured. The problem with this is in a domain profile meant for legacy slaves, there will be no io subsystem configured, so the capability will not be present. This is leading to failures in the mixed domain tests.

A not great solution is to not record the requirement on an HC if no specific worker capability is configured. The downside is if the io subsystem isn't configured and that profile is used on a current version server, the server configuration will be inconsistent and failures will occur at boot.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/836,,,,,,0.0,0.0,,1|hzx4un:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
handleDeployment() not called for each sub-deployment,WFCORE-776,12575936,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,jason.greene,rgaisford,rgaisford,22/Jun/15 9:16 PM,03/Feb/16 9:06 AM,29/Nov/16 3:53 PM,03/Feb/16 9:06 AM,2.0.0.Alpha5,,,,,,,,Server,,,,,0,,,,,,"When deploying an ear (test-ear.ear) with included jboss-deployment-structure.xml as shown below:

<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name=""org.hibernate"" slot=""main"" />
        </exclusions>
        <dependencies>
            <module name=""org.apache.log4j"" />
        </dependencies>
    </deployment>
    <sub-deployment name=""test-war.war"">
    	<exclusions>
            <module name=""org.jdom"" slot=""main"" />
        </exclusions>
    	<dependencies>
    		<module name=""org.apache.commons.collections"" />	
    	</dependencies>
    </sub-deployment>
    <sub-deployment name=""test-war2.war"">
    	<dependencies>
    		<module name=""org.apache.commons.collections"" />	
    	</dependencies>
    </sub-deployment>
</jboss-deployment-structure>

DeploymentStructureDescriptorParser.handleDeployment(...) only gets called for the ear deployment and for one of the war sub-deployments.  The war sub-deployment that does get processed appears to be random.  I would expect handleDeployment(...) to get called for the ear and each war.

I discovered this issue while working on WFCORE-648.   ",,,,,,,,,,,,,,,,,,,,,,,,,,,22/Jun/15 9:18 PM;rgaisford;test-ear.ear;https://issues.jboss.org/secure/attachment/12390621/test-ear.ear,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,2.0,,1|hzx393:,9223372036854775807,,,,Deploy the attached test-ear.ear.,,,,,,,"22/Jun/15 9:26 PM;rgaisford;I'll keep looking into this Jason, but if someone on your side is much more familiar with the code it may go quicker.","23/Jun/15 12:17 PM;rgaisford;You can close this issue as invalid.  I added some additional logging to SubDeploymentProcessor and DeploymentStructureDescriptorParser and was able to verify that everything is working as expected.  Given that this deployment activity is executing concurrently on multiple ""MSC service thread""/s, I was missing events while debugging through my IDE.  This concurrent execution also accounts for the ""random"" appearance of which wars I was seeing being processed via handleDeployment(...).

Apologies for the confusion.",,,,,,,,,,,,,,,,,,,,,,,,,
domain mode - server fails to start intermittently,WFCORE-775,12575902,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,22/Jun/15 12:55 PM,30/Jul/15 8:21 AM,29/Nov/16 3:53 PM,23/Jul/15 6:45 PM,,,,,,,2.0.0.Alpha11,,,,,,,0,,,,,,Server instances occasionally fail in domain mode using EAP 6.4.0. It appears to be due to the hashes being exchanged between the server instance and host controller.,EAP 6.4.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1245751,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/900,,,,,,0.0,9.0,,1|hzx31z:,9223372036854775807,,,,,,,,,,,22/Jun/15 12:58 PM;luck3y;See: https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/DomainServerCommunicationServices.java#L66,"17/Jul/15 2:43 PM;luck3y;Initial PR sent. This changes the authKey generation from a 16 byte array to a base 64 encoded string. The amount of information present remains the same, the string will be 24 bytes in length, however.

java.utils.Base64 is used, JDK8 only, backports would need to utilize an alternative encoder.",24/Jul/15 1:07 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from NEW to ASSIGNED,27/Jul/15 1:37 AM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from ASSIGNED to POST,27/Jul/15 2:43 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from POST to ASSIGNED,27/Jul/15 5:16 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from ASSIGNED to POST,28/Jul/15 8:55 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from POST to MODIFIED,28/Jul/15 11:14 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from MODIFIED to ON_QA,30/Jul/15 8:21 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1245751|https://bugzilla.redhat.com/show_bug.cgi?id=1245751] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,
Memory leak in JBoss CLI,WFCORE-774,12575304,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,jcacek,jcacek,17/Jun/15 7:49 AM,25/Aug/15 4:26 PM,29/Nov/16 3:53 PM,09/Jul/15 2:50 AM,1.0.0.CR6,2.0.0.Alpha4,,,,,2.0.0.Alpha8,,CLI,,,,,0,,,,,,"The JBoss CLI contains a memory leak related to CLI Kerberos authentication.

The {{org.jboss.as.cli.impl.CommandContextImpl}} class calls the {{initJaasConfig()}} in its constructor, 
which adds a new {{JaasConfigurationWrapper}} instance to {{javax.security.auth.login.Configuration}}.
It's done for every new {{CommandContext}} instance, so it consumes more and more memory. There is no cleanup for the registered 
configurations.

Moreover, the searches for appropriate 
login config take more and more time because they have to go through all the wrapped objects.
",,,,,,,,,,,,,,,,JBEAP-340,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1232736,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/866,,,,,,0.0,6.0,,1|hzwzbr:,9223372036854775807,,,,,,,,,,,"17/Jun/15 9:44 AM;brian.stansberry;Please file CLI bugs in WFCORE, as that is where the code is. We just end up moving ones filed here.",07/Jul/15 5:02 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1232736|https://bugzilla.redhat.com/show_bug.cgi?id=1232736] from NEW to ASSIGNED,08/Jul/15 5:32 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1232736|https://bugzilla.redhat.com/show_bug.cgi?id=1232736] from ASSIGNED to POST,23/Jul/15 4:43 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1232736|https://bugzilla.redhat.com/show_bug.cgi?id=1232736] from POST to MODIFIED,28/Jul/15 11:14 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1232736|https://bugzilla.redhat.com/show_bug.cgi?id=1232736] from MODIFIED to ON_QA,30/Jul/15 7:22 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1232736|https://bugzilla.redhat.com/show_bug.cgi?id=1232736] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
 ArrayIndexOutOfBoundsException occurs when a queue-length is 0 in the thread pool executor ,WFCORE-773,12575453,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pjurak,elguardian,elguardian,18/Jun/15 4:52 AM,28/Oct/16 11:55 AM,29/Nov/16 3:53 PM,20/Oct/16 2:25 PM,,,,,,,3.0.0.Alpha10,,,,,,,1,,,,,,BoundedQueueThreadPool does not support zero length queue setup.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1231070,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1865,,,,,,0.0,6.0,,1|hzx07z:,9223372036854775807,,,,,,,,,,,15/Sep/16 11:33 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1231070|https://bugzilla.redhat.com/show_bug.cgi?id=1231070] from ASSIGNED to NEW,19/Oct/16 9:31 AM;jira-bugzilla-migration;Petr Jurak <pjurak@redhat.com> changed the Status of [bug 1231070|https://bugzilla.redhat.com/show_bug.cgi?id=1231070] from ASSIGNED to POST,"19/Oct/16 4:01 PM;brian.stansberry;The linked PR fixing changes the management API description of the threads and jca subsystems. That's ok to do in a community major/EAP minor. We should bump the management API versions if the version has not been bumped already, but TBH I don't care that much. We don't actually use subsystem=threads any more.","20/Oct/16 1:27 AM;pjurak;Yes, this legacy system is not used anymore. The intention was to make this change because the source code still contains the old code.",20/Oct/16 8:21 AM;brian.stansberry;It actually is still used though in subsystem=jca. The threads module now is primarily used as util code for other subsystems whose config includes thread pool configuration elements.,28/Oct/16 11:55 AM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1231070|https://bugzilla.redhat.com/show_bug.cgi?id=1231070] from POST to CLOSED,,,,,,,,,,,,,,,,,,,,,
Server resources off the host resource allow the removal of deployments,WFCORE-771,12575386,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,luck3y,jamezp,jamezp,17/Jun/15 1:08 PM,10/May/16 4:10 PM,29/Nov/16 3:53 PM,06/May/16 10:20 AM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,2.2,,,,,"The following command succeeds, but leaves the deployment in a state that it can't be undeployed.
{code}
/host=master/server=server-two/deployment=wildfly-helloworld.war:remove
{code}

My guess is that operation should fail or further operations to remove the deployment should succeed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzwztj:,9223372036854775807,,,," # Deploy and application to a server-group (main-server-group is assumed here).
 # Remove the deployment from the {{/host=master/server=server-one/deployment=some.war:remove}}
 # Attempt to remove the deployment from {{/server-group=main-server-group/}} or attempt the {{undeploy}} CLI command which will end in an NPE.",,,,,,,"02/May/16 4:43 PM;brian.stansberry;The end user should not be able to directly execute any ops on a domain server that write to what would be persistent config on a standalone server. Only the HC can do that. That remove op should fail with:

{code}
""failure-description"" => ""WFLYCTL0249: Operation 'remove' targeted at resource '[(\""deployment\"" => \""some.war\"")]' was directly invoked by a user. User operations are not permitted to directly update the persistent configuration of a server in a managed domain.""
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,
Boot errors should hide the failure description if the failing operation is not accessible,WFCORE-769,12575352,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,17/Jun/15 10:18 AM,26/Jun/15 8:12 PM,29/Nov/16 3:53 PM,26/Jun/15 8:12 PM,2.0.0.Alpha4,,,,,,2.0.0.Alpha5,,Domain Management,,,,,0,,,,,,"The boot error collector reports whatever failure-description it was passed. Those can include pretty random info, and there's no good way to know what,so it could leak some sensitive information.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/826,,,,,,0.0,0.0,,1|hzwzm7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shutdown error in domain mode,WFCORE-765,12575117,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,hwellmann.de,hwellmann.de,16/Jun/15 7:16 AM,18/Jun/15 4:36 PM,29/Nov/16 3:53 PM,18/Jun/15 4:36 PM,1.0.0.CR6,2.0.0.Alpha4,,,,,1.0.0.CR7,2.0.0.Alpha5,Domain Management,,,,,0,,,,,,"h3. Scenario

* Download and unpack wildfly-dist-9.0.0.CR2.zip.
* Run bin/domain.sh and wait for servers to start.
* Hit Ctrl-C.

h3. Problem

The following error message appears for each configured server:

{noformat}
[Server:server-one] 13:10:34,966 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 30) WFLYCTL0190: Step handler org.jboss.as.server.operations.ServerDomainProcessShutdownHandler$1@25f7734b for operation {""operation"" => ""shutdown"",""address"" => [],""operation-id"" => -1,""timeout"" => -1} at address [] failed handling operation rollback -- org.jboss.msc.service.ServiceNotFoundException: Service service jboss.server.graceful-shutdown-service not found: org.jboss.msc.service.ServiceNotFoundException: Service service jboss.server.graceful-shutdown-service not found                                                                                                                                                            
[Server:server-one]     at org.jboss.msc.service.ServiceContainerImpl.getRequiredService(ServiceContainerImpl.java:669)
[Server:server-one]     at org.jboss.as.controller.OperationContextImpl$OperationContextServiceRegistry.getRequiredService(OperationContextImpl.java:2013)
[Server:server-one]     at org.jboss.as.server.operations.ServerDomainProcessShutdownHandler$1$1.handleResult(ServerDomainProcessShutdownHandler.java:102)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1401)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1381)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1332)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1292)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1180)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:937)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:885)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
[Server:server-one]     at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)
[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:218)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:174)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:137)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:133)
[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one]     at javax.security.auth.Subject.doAs(Subject.java:360)
[Server:server-one]     at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:153)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:149)
[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:149)
[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Server:server-one]     at java.lang.Thread.run(Thread.java:745)
[Server:server-one]     at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{noformat}

Tried on two different machines, both with Java 7 and Java 8. Also occurs with 9.0.0.CR1. Does not occur with 8.2.0.Final.
","Ubuntu 14.04 LTS, Oracle JDK 1.8.0_45",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/818,https://github.com/wildfly/wildfly-core/pull/819,,,,,0.0,1.0,,1|hzwy5r:,9223372036854775807,,,,See above. Reproducible always.,,,,,,,"16/Jun/15 7:29 PM;brian.stansberry;This happens because of the use of Ctrl-C.

Ctrl-C signals all the processes launched as a result of running domain.sh, not just the initial VM. So the servers have received the signal and have begun shutting down independent of the Host Controller telling them to do so. Services are being removed. The HC then, as part of its own shutdown, sends a command to the servers telling them to suspend. The handler for that command on the server is logging this exception because it's not finding the service container in the state it expects.

Fix is just to change the handler to ignore the missing services and not attempt a graceful suspend if they are not present. The only reason they wouldn't be present is because a shutdown is already underway..

Note that graceful shutdown doesn't work when you use Ctrl-C.",,,,,,,,,,,,,,,,,,,,,,,,,,
"Persisting an empty list [] gets read as a list with empty string [""""] resulting in IllegalArgumentException",WFCORE-763,12575174,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,pferraro,pferraro,pferraro,16/Jun/15 10:59 AM,18/Jun/15 4:36 PM,29/Nov/16 3:53 PM,18/Jun/15 4:36 PM,1.0.0.CR6,2.0.0.Alpha4,,,,,1.0.0.CR7,2.0.0.Alpha5,Domain Management,,,,,0,,,,,,"In short, the default AttributeParser/AttributeMarshaller for list attributes do not handle empty lists in a symmetric fashion.
e.g. if I persist an empty list to xml, and read it back again, using the default parser/marshaller, I should get back an empty list.  Instead I get back a list of size 1 containing an empty string.

Affects at least infinispan aliases and modcluster proxies...


(20:09:22) rhusar: pferraro: https://gist.github.com/rhusar/5eef22d7a6479f042a5d#file-gistfile1-txt-L23
(20:09:34) rhusar: pferraro: if i write an empy list, read it back -> empty list
(20:09:57) rhusar: pferraro: if i use the default writeAttribute, reload, read it back and i have a list of size 1 containing empty String..
(20:23:23) rhusar: pferraro: alright, this is also ""broken"" in the infiinispan subsystem aliases


(20:23:24) rhusar: pferraro: 20:22:55,775 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 40) WFLYCTL0013: Operation (""add"") failed - address: ([
(20:23:24) rhusar:     (""subsystem"" => ""infinispan""),
(20:23:24) rhusar:     (""cache-container"" => ""hibernate"")
(20:23:24) rhusar: ]): java.lang.IllegalArgumentException: Empty name segment is not allowed for infinispan
(20:23:24) rhusar: 	at org.jboss.msc.service.ServiceName.of(ServiceName.java:90)
(20:23:24) rhusar: 	at org.jboss.msc.service.ServiceName.append(ServiceName.java:117)
(20:23:24) rhusar: 	at org.wildfly.clustering.infinispan.spi.service.CacheContainerServiceName$1.getServiceName(CacheContainerServiceName.java:35)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerBuilder.build(CacheContainerBuilder.java:79)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerAddHandler.installRuntimeServices(CacheContainerAddHandler.java:165)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerAddHandler.performRuntime(CacheContainerAddHandler.java:82)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:309)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:130)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:822)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:620)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:373)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:349)
(20:23:24) rhusar: 	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)
(20:23:24) rhusar: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
(20:23:24) rhusar: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
(20:23:24) rhusar: 	at java.lang.Thread.run(Thread.java:745)
(20:23:24) rhusar: 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)",,,,,,,,,,,,,,,,WFLY-4779,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/812,https://github.com/wildfly/wildfly-core/pull/815,,,,,0.0,1.0,,1|hzwyjb:,9223372036854775807,,,,,,,,,Workaround Exists,"Configure the attribute with a default value of new ModelNode().setEmptyList().  When persisting, choose not to marshal default values.","16/Jun/15 11:38 AM;brian.stansberry;I was going to ask for a test case, but I like reassigning it to yourself even better!",,,,,,,,,,,,,,,,,,,,,,,,,,
Not possible to overlay non existing file in WAR,WFCORE-761,12575098,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,gaol,baranowb,baranowb,16/Jun/15 5:48 AM,01/Sep/16 8:13 AM,29/Nov/16 3:53 PM,01/Aug/16 12:47 PM,,,,,,,3.0.0.Alpha5,,Server,,,,,0,downstream_dependency,,,,,"It is either bug in how deployments are treated or how overlay/vfs work.

Steps to reproduce:
1. deploy undexploded war with jar inside
2. add overlay that will add non existing file in jar

Result: exception:
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018776: Failed to get content for deployment overlay WEB-INF/lib/overlayed.jar//META-INF/x/file.txt at WEB-INF/lib/overlayed.jar//META-INF/x/file.txt
    Caused by: java.io.FileNotFoundException: /content/shell.war/WEB-INF/lib/overlayed.jar/META-INF/x/file.txt""}}
    at org.jboss.as.test.integration.management.ManagementOperations.executeOperation(ManagementOperations.java:67)
    at org.jboss.as.test.integration.management.ManagementOperations.executeOperation(ManagementOperations.java:37)
    at org.jboss.as.test.integration.deployment.deploymentoverlay.jar.OverlayUtils.setupOverlay(OverlayUtils.java:76)
    at org.jboss.as.test.integration.deployment.deploymentoverlay.war.OverlayNonExistingResourceTestCase.testOverlay(OverlayNonExistingResourceTestCase.java:67)


Expectation:
 should work. It actually does work, if war is really exploded or
'if(exploded)' part in overlay is removed from overlay processor and everything is handled via: https://github.com/stuartwdouglas/wildfly-core/blob/a75af9118c4062fafb899b2c1109387a0748d925/server/src/main/java/org/jboss/as/server/deployment/DeploymentOverlayDeploymentUnitProcessor.java#L117



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1147352,https://bugzilla.redhat.com/show_bug.cgi?id=1287732,https://bugzilla.redhat.com/show_bug.cgi?id=1323240,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1332,,,,,,0.0,10.0,,1|hzwy1j:,9223372036854775807,,,,,,,,,,,28/Mar/16 4:42 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to MODIFIED,28/Mar/16 5:37 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1287732|https://bugzilla.redhat.com/show_bug.cgi?id=1287732] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from MODIFIED to POST,28/Mar/16 7:22 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1287732|https://bugzilla.redhat.com/show_bug.cgi?id=1287732] from MODIFIED to POST,25/Apr/16 1:46 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to MODIFIED,25/Apr/16 6:11 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from MODIFIED to ON_QA,05/May/16 8:09 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from ON_QA to VERIFIED,07/Jul/16 1:41 AM;jira-bugzilla-migration;Lin Gao <lgao@redhat.com> changed the Status of [bug 1287732|https://bugzilla.redhat.com/show_bug.cgi?id=1287732] from POST to MODIFIED,05/Aug/16 2:18 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1287732|https://bugzilla.redhat.com/show_bug.cgi?id=1287732] from MODIFIED to ON_QA,15/Aug/16 5:40 AM;jira-bugzilla-migration;Matej Novotny <manovotn@redhat.com> changed the Status of [bug 1287732|https://bugzilla.redhat.com/show_bug.cgi?id=1287732] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,
Adding an empty log category results in a StringOutOfBoundsException,WFCORE-760,12575046,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,blitman,jamezp,jamezp,15/Jun/15 4:09 PM,20/Jul/15 11:42 AM,29/Nov/16 3:53 PM,20/Jul/15 11:42 AM,,,,,,,2.0.0.Alpha11,,Logging,,,,,0,,,,,,When editing the XML you can leave a category for a logger blank or empty which results in a {{StringOutOfBoundsException}}. A better exception should be thrown.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/901,,,,,,0.0,1.0,,1|hzwxq7:,9223372036854775807,,,,,,,,,,,"15/Jun/15 4:41 PM;blitman;stack trace can be found here: http://pastebin.com/Tkf3A81r

Steps to recreate: Simply add a logger to a profile, separate from root-logger, with an empty category attribute
for instance
{code:xml}
<logger category="""">
 <level name=""ERROR""/>
</logger>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,
ClassNotFoundException: javax.sql.RowSet,WFCORE-758,12574995,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,jewellgm,jewellgm,15/Jun/15 10:49 AM,18/Jun/15 4:36 PM,29/Nov/16 3:53 PM,18/Jun/15 4:36 PM,,,,,,,1.0.0.CR7,2.0.0.Alpha5,Modules,,,,,0,,,,,,"I downloaded the WF9 CR2 release this morning and have been testing functionality.  A new exception has appeared with this release.  This did not happen with a source release that was downloaded and built between CR1 and CR2, so was just introduced in the last week or so.

We have a Flex application that is throwing the following exception as it's being loaded:

[BlazeDS]javax/sql/RowSet

{noformat}
java.lang.NoClassDefFoundError: javax/sql/RowSet
    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:198)
    at flex.messaging.messages.AbstractMessage.writeExternal(AbstractMessage.java:444)
    at flex.messaging.messages.AsyncMessage.writeExternal(AsyncMessage.java:140)
    at flex.messaging.messages.AcknowledgeMessage.writeExternal(AcknowledgeMessage.java:94)
    at flex.messaging.messages.AcknowledgeMessageExt.writeExternal(AcknowledgeMessageExt.java:55)
    at flex.messaging.io.amf.Amf3Output.writePropertyProxy(Amf3Output.java:594)
    at flex.messaging.io.amf.Amf3Output.writeCustomObject(Amf3Output.java:532)
    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:112)
    at flex.messaging.io.amf.Amf0Output.writeObject(Amf0Output.java:206)
    at flex.messaging.io.amf.AmfMessageSerializer.writeObject(AmfMessageSerializer.java:196)
    at flex.messaging.io.amf.AmfMessageSerializer.writeBody(AmfMessageSerializer.java:186)
    at flex.messaging.io.amf.AmfMessageSerializer.writeMessage(AmfMessageSerializer.java:142)
    at flex.messaging.endpoints.amf.SerializationFilter.invoke(SerializationFilter.java:198)
    at flex.messaging.endpoints.BaseHTTPEndpoint.service(BaseHTTPEndpoint.java:291)
    at flex.messaging.MessageBrokerServlet.service(MessageBrokerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:86)
    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)
    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58)
    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:72)
    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76)
    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:274)
    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:253)
    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:80)
    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:172)
    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:199)
    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:774)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: javax.sql.RowSet from [Module ""deployment.Test.ear.test.war:main"" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:205)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:455)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:404)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:385)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:130)
    ... 43 more
{noformat}

- See more at: https://developer.jboss.org/thread/260451#sthash.LJ3DCVsa.dpuf","Windows 7, Java 8u45 (64 bit)",,,,,,,,,,,WFCORE-561,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/808,https://github.com/wildfly/wildfly-core/pull/816,,,,,0.0,6.0,,1|hzwxev:,9223372036854775807,,,,,,,,,,,"15/Jun/15 10:53 AM;dmlloyd;From the other thread:

{quote}
This is a side-effect of the fix for WFCORE-561 (really the fix for the fix for WFCORE-561) - we don't have those RowSet classes implemented in the javax.sql JAR.  In order to do this, we have to also get implementations for all of the RowSet API, which also contains implementation.
 
In order to untangle this mess, we will have to either:
# Add a clean-room implementation of the RowSet API (and all its packages) to the javax.sql JAR, or:
# Create a JAR of the OpenJDK versions of these classes (with the right license terms).
{quote}
","15/Jun/15 4:19 PM;dmlloyd;Can you please try the patch at: https://github.com/dmlloyd/wildfly-core/tree/wfcore-758-rowset-api

You can build wildfly-core, or just apply the difference manually by updating your {{jboss-javax-sql-api_7.0_spec}} JAR and {{module.xml}} file.","15/Jun/15 4:46 PM;jewellgm;Just to confirm that I did everything needed: I built the entire wildfly-core, copied the new jboss-javax-sql-api_7.0_spec-2.0.0.Beta1.jar and module.xml files to the module javax/sql/api/main directory, and restarted.

With those changes, I no longer see the ClassNotFoundException, and my application appears to be deploying properly.","15/Jun/15 4:53 PM;dmlloyd;Great.  I will push up the changes, with one minor amendment (if you could retest the updated commit in the meantime I'd appreciate it).

The original commit ID was 139d49f and the updated one is 4226fe6.","15/Jun/15 5:07 PM;jewellgm;I copied the new javax/api/main/module.xml into my WF9 CR2 installation, and didn't see any error messages on restart.  Initial tests on my application have passed.

Thank you very much for the help!
",16/Jun/15 7:37 PM;dmlloyd;Forgot to submit to the 1.x branch.,,,,,,,,,,,,,,,,,,,,,
"Core management server shutting down a thread pool early, resulting in RejectedExecutionException",WFCORE-756,12574648,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ehugonnet,lthon,lthon,11/Jun/15 7:22 AM,24/Sep/15 7:26 PM,29/Nov/16 3:53 PM,24/Sep/15 7:26 PM,,,,,,,2.0.0.CR5,,Domain Management,,,,,0,,,,,,"In one of our tests, we've seen this exception during server shutdown:

{code}
2015-06-05 10:34:44,387 ERROR [org.xnio.listener] (XNIO-1 I/O-2) XNIO001007: A channel event listener threw an exception: java.util.concurrent.RejectedExecutionException: Task org.jboss.remoting3.remote.RemoteReadListener$1$1@5e7925db rejected from org.xnio.XnioWorker$TaskPool@3d00aa37[Shutting down, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 52]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)
	at org.xnio.XnioWorker.execute(XnioWorker.java:741)
	at org.jboss.remoting3.remote.RemoteReadListener$1.handleEvent(RemoteReadListener.java:54)
	...
{code}

This is a very basic test that only starts the server and then shuts it down using {{:shutdown}}.

After looking into this for a while, I believe that this is caused by the core management server ({{UndertowHttpManagementService}}) shutting down an XNIO worker (= thread pool) while the {{:shutdown}} management operation is still running (or, in fact, finishing, trying to close the network connection).

I have a Byteman-based reproducer that inserts artifical pauses to certain well-defined places. I'm not sure if this has some connection to the graceful shutdown system, but I believe that even if it does, something like this shouldn't happen.

Steps to reproduce:

# {{./bin/standalone.sh -c standalone-full-ha.xml}} and wait until it starts completely
# {{jps -v | grep ""&#92;-D&#92;\[Standalone&#92;\]""}} to figure out the PID of the newly started server
# {{bminstall.sh -b -Dorg.jboss.byteman.transform.all $PID}}
# {{bmsubmit.sh reproducer.btm}}, where {{reproducer.btm}} is a Byteman script reproduced below
# {{./bin/jboss-cli.sh -c}}
# {{:read-resource}} repeat few times
# {{:shutdown(timeout=1)}} (or plain {{:shutdown}})

The Byteman script:

{code}
RULE XnioWorker.TaskPool/ThreadPoolExecutor shutdown
CLASS java.util.concurrent.ThreadPoolExecutor
METHOD shutdown()
AFTER INVOKE advanceRunState
IF TRUE
DO Thread.sleep(10000)
ENDRULE

RULE Remoting onClose handler
CLASS org.jboss.remoting3.remote.RemoteReadListener$1
METHOD handleEvent(java.nio.channels.Channel)
AT ENTRY
IF TRUE
DO Thread.sleep(5000)
ENDRULE
{code}",,,,,,,,,,,,,,,,JBEAP-307,,,,,JBEAP-380,,,,,,22/Sep/15 7:21 AM;ehugonnet;server.log;https://issues.jboss.org/secure/attachment/12393104/server.log,22/Sep/15 5:12 AM;ehugonnet;server.log;https://issues.jboss.org/secure/attachment/12393099/server.log,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1096,,,,,,2.0,8.0,,1|hzwvan:,9223372036854775807,,,,,,,,,,,"11/Jun/15 7:42 AM;lthon;(The reproducer isn't 100%, but it demonstrates the exception pretty often. If {{:shutdown(timeout=1)}} doesn't work, {{:shutdown}} is worth trying.)","21/Sep/15 7:17 PM;dmlloyd;This should be highly mitigated by https://github.com/wildfly/wildfly-core/pull/1096 however there is a slight chance that these messages can appear in rare cases involving SSL.  Overall the occurrence should be greatly reduced with this PR.  Investigation continues, but we could potentially revisit the severity of the issue if things look OK.",21/Sep/15 8:41 PM;brian.stansberry;I'm going to be optimistic and say that David's remoting fix resolves this. :) If not we can reopen.,"22/Sep/15 4:17 AM;ehugonnet;Trying to reproduce this morning I got the following error :( :
10:15:12,144 ERROR [org.xnio.listener] (XNIO-1 I/O-1) XNIO001007: A channel event listener threw an exception: java.util.concurrent.RejectedExecutionException: Endpoint is not open
        at org.jboss.remoting3.EndpointImpl.executorUntick(EndpointImpl.java:200)
        at org.jboss.remoting3.EndpointImpl$TrackingExecutor.execute(EndpointImpl.java:700)
        at org.jboss.remoting3.remote.RemoteReadListener$1.handleEvent(RemoteReadListener.java:54)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
        at org.xnio.channels.TranslatingSuspendableChannel.close(TranslatingSuspendableChannel.java:906)
        at org.xnio.IoUtils.safeClose(IoUtils.java:134)
        at org.xnio.channels.TranslatingSuspendableChannel$3.handleEvent(TranslatingSuspendableChannel.java:133)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
        at org.xnio.ChannelListeners$DelegatingChannelListener.handleEvent(ChannelListeners.java:1092)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
        at org.xnio.StreamConnection.invokeCloseListener(StreamConnection.java:80)
        at org.xnio.Connection.writeClosed(Connection.java:117)
        at org.xnio.nio.AbstractNioStreamConnection.writeClosed(AbstractNioStreamConnection.java:47)
        at org.xnio.nio.NioSocketConduit.terminateWrites(NioSocketConduit.java:181)
        at org.xnio.nio.NioSocketConduit.truncateWrites(NioSocketConduit.java:191)
        at org.xnio.conduits.ConduitStreamSinkChannel.close(ConduitStreamSinkChannel.java:186)
        at org.xnio.IoUtils.safeClose(IoUtils.java:134)
        at org.xnio.conduits.WriteReadyHandler$ChannelListenerHandler.forceTermination(WriteReadyHandler.java:57)
        at org.xnio.nio.NioSocketConduit.forceTermination(NioSocketConduit.java:107)
        at org.xnio.nio.WorkerThread.run(WorkerThread.java:490)","22/Sep/15 4:48 AM;ehugonnet;I'm reproducing the problem with a different stack trace due to [~dmlloyd] upgrade of remoting.
","22/Sep/15 4:49 AM;ehugonnet;Attaching log file, org.xnio.nio is at trace level","22/Sep/15 7:21 AM;ehugonnet;Remoting at trace lavel
Xnio off","24/Sep/15 12:40 PM;dmlloyd;This should be properly fixed now.  If not, let's discuss further.",,,,,,,,,,,,,,,,,,,
bootTimeout for embedded server uses milis instead of nanos,WFCORE-755,12574623,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,baranowb,pkremens,pkremens,11/Jun/15 4:55 AM,16/Jul/15 2:45 PM,29/Nov/16 3:53 PM,16/Jul/15 2:45 PM,2.0.0.Alpha4,,,,,,2.0.0.Alpha10,,CLI,,,,,0,,,,,,"Value for --timeout argument needs to be set in microseconds instead of seconds.

{code:java}
// boot time is transformed into milis
Long bootTimeout = null;
String timeoutString = timeout.getValue(parsedCmd);
if (timeoutString != null) {
   bootTimeout = TimeUnit.SECONDS.toMillis(Long.parseLong(timeoutString));
}
...
// but expired is transformed into nanos
long expired = bootTimeout == null ? Long.MAX_VALUE : System.nanoTime() + bootTimeout;
{code}

Could be fixed by converting parsed timeoutString into nanos.",,,,,,,,,,,,,,,,JBEAP-304,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/875,,,,,,0.0,1.0,,1|hzwv53:,9223372036854775807,,,,"{noformat}
[disconnected /] embed-server --timeout=5
Embedded server did not exit 'starting' status within 5 seconds
[disconnected /] embed-server --timeout=5000
Embedded server did not exit 'starting' status within 5000 seconds
[disconnected /] embed-server --timeout=5000000
[standalone@embedded /]
{noformat}",,,,,,,"10/Jul/15 5:56 AM;baranowb;PR - bumped to miliseconds, I doubt we need nano resolution on this?",,,,,,,,,,,,,,,,,,,,,,,,,,
EAP fails to start with -bmanagement= option and with specific IP settings,WFCORE-754,12573531,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,ehugonnet,mkopecky,mkopecky,02/Jun/15 7:17 AM,18/Jun/15 4:37 PM,29/Nov/16 3:53 PM,18/Jun/15 4:37 PM,1.0.0.CR5,2.0.0.Alpha1,,,,,1.0.0.CR7,2.0.0.Alpha5,Domain Management,,,,,0,,,,,,"*Description of problem:*
* EAP fails to start with {{-bmanagement=}} option. IPv4 address is used in this option.
* Host Controller starts to listening on IPv4:9999
* Server:server-one probably resolve IPv4 address to host name. Server-one tries to connect to this host name. Hostname is resolved by ping ({{$ ping dev98}}) to IPv6 address, where host controller is not listening.
* This error doesn't occur, if hostname is resolved to IPv4 address by ping on machine.
* This error doesn't occur on EAP 6.4.0

*How reproducible:*
* windows

*Steps to Reproduce:*
Example on dev98 machine:
# ssh dev98
# ping dev98
{noformat}
Pinging dev98 [fe80::699a:d857:e5cc:e3b7%14] with 32 bytes of data:
Reply from fe80::699a:d857:e5cc:e3b7%14: time<1ms 
Reply from fe80::699a:d857:e5cc:e3b7%14: time<1ms 
Reply from fe80::699a:d857:e5cc:e3b7%14: time<1ms 
Reply from fe80::699a:d857:e5cc:e3b7%14: time<1ms 

Ping statistics for fe80::699a:d857:e5cc:e3b7%14:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 0ms, Average = 0ms
{noformat}
# ping -a 10.16.92.7
{noformat}
Pinging dev98 [10.16.92.7] with 32 bytes of data:
Reply from 10.16.92.7: bytes=32 time<1ms TTL=128
Reply from 10.16.92.7: bytes=32 time<1ms TTL=128
Reply from 10.16.92.7: bytes=32 time<1ms TTL=128
Reply from 10.16.92.7: bytes=32 time<1ms TTL=128

Ping statistics for 10.16.92.7:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 0ms, Average = 0ms
{noformat}
# domain.bat -bmanagement=10.16.92.7

*Actual results:*
{noformat}
.....
[Host Controller] 06:49:07,673 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) WFLYRMT0001: Listening on 10.16.92.7:9999
.....
[Server:server-one] 06:49:16,251 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 2) MSC000001: Failed to start service jboss.server-boot-operations: org.jboss.msc.service.StartException in service jboss.server-boot-operations: java.net.ConnectException: WFLYPRT0053: Could not connect to remote://dev98:9999. The connection failed
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.ServerBootOperationsService$1.run(ServerBootOperationsService.java:72)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Server:server-one] 	at java.lang.Thread.run(Thread.java:745)
[Server:server-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
[Server:server-one] Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remote://dev98:9999. The connection failed
[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:122)
[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:257)
[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:71)
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.HostControllerConnection.openConnection(HostControllerConnection.java:130)
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.HostControllerClient.resolveBootUpdates(HostControllerClient.java:85)
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.ServerBootOperationsService$1.run(ServerBootOperationsService.java:68)
[Server:server-one] 	... 4 more
{noformat}

*Expected results:*
  No errors",,,,,,,,,,,,,,,,JBEAP-237,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzwomf:,9223372036854775807,,,,,,,,,,,"10/Jun/15 9:41 AM;brian.stansberry;[~ehugonnet] I suspect this happens as a result of the https://issues.jboss.org/browse/WFCORE-75 work, specifically this:

https://github.com/wildfly/wildfly-core/pull/160/files#diff-babfb127f027f029cbafa7c367dc9c18R104

The IP address is being converted to a host name. Why was that necessary?",,,,,,,,,,,,,,,,,,,,,,,,,,
"When WFCORE is run as a service in linux, the working directory is ""/""",WFCORE-753,12574472,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,baranowb,baranowb,baranowb,10/Jun/15 3:39 AM,04/Mar/16 2:40 AM,29/Nov/16 3:53 PM,14/Aug/15 3:25 PM,,,,,,,2.0.0.Beta2,,Scripts,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1222855,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/802,,,,,,0.0,4.0,,1|hzwu8v:,9223372036854775807,,,,,,,,,,,10/Jun/15 3:53 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1222855|https://bugzilla.redhat.com/show_bug.cgi?id=1222855] from ASSIGNED to POST,23/Feb/16 4:12 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1222855|https://bugzilla.redhat.com/show_bug.cgi?id=1222855] from POST to MODIFIED,24/Feb/16 2:50 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1222855|https://bugzilla.redhat.com/show_bug.cgi?id=1222855] from MODIFIED to ON_QA,04/Mar/16 2:40 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1222855|https://bugzilla.redhat.com/show_bug.cgi?id=1222855] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Only one deployment overlay can be created for each deployment,WFCORE-752,12574391,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,09/Jun/15 10:36 AM,29/Jul/15 6:44 AM,29/Nov/16 3:53 PM,10/Jun/15 9:12 AM,1.0.0.CR5,2.0.0.Alpha4,,,,,1.0.0.CR6,2.0.0.Alpha5,Server,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1229711,https://bugzilla.redhat.com/show_bug.cgi?id=1233287,https://bugzilla.redhat.com/show_bug.cgi?id=1233294,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/798,https://github.com/wildfly/wildfly-core/pull/799,,,,,0.0,4.0,,1|hzwtrr:,9223372036854775807,,,,,,,,,,,09/Jun/15 11:38 AM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1229711|https://bugzilla.redhat.com/show_bug.cgi?id=1229711] from NEW to POST,23/Jul/15 4:41 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1229711|https://bugzilla.redhat.com/show_bug.cgi?id=1229711] from POST to MODIFIED,28/Jul/15 11:14 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1229711|https://bugzilla.redhat.com/show_bug.cgi?id=1229711] from MODIFIED to ON_QA,29/Jul/15 6:44 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1229711|https://bugzilla.redhat.com/show_bug.cgi?id=1229711] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Failed to initialize Aesh console while starting CLI on fresh Windows 2k8,WFCORE-751,12574354,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,pkremens,pkremens,09/Jun/15 8:45 AM,30/Sep/15 3:09 PM,29/Nov/16 3:53 PM,30/Sep/15 3:09 PM,2.0.0.Alpha4,,,,,,2.0.0.CR6,,CLI,,,,,0,,,,,,"Initializing interactive CLI session via jboss-cli.bat script fails during initializing of Aesh console. Non-interactive commands work.

>jboss-cli.bat -c 
fails
>jboss-cli.bat -c ""echo test""
works

Installing Microsoft Visual C++ 2008 Redistributable Package solves the problem

We encountered a similar issue in the past with EAP installer jar:\\
Bug 1190789 - Installer: Installation of EAP with installation script fails on Windows W2k8 servers","Windows Server 2008 64bit Service Pack 2
Oracle JDK 8_40 & 8_45",,,,,,,,,,,,,,,JBEAP-288,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/thread/241164,,,https://github.com/wildfly/wildfly-core/pull/1131,,,,,,0.0,1.0,,1|hzwtjj:,9223372036854775807,,,,"Get a fresh installation of Windows server 2k8, download JDK and set JAVA_HOME.
* start standalone server
* {noformat}C:\wildfly-core-2.0.0.Alpha4\dist\target\wildfly-core-2.0.0.Alpha4\bin>jboss-cli.bat -c
Failed to initialize Aesh console: Could not load library. Reasons: [no jansi64-1.9 in java.library.path, no jansi-1.9 in java.library.path, 
no jansi in java.library.path, C:\Users\Administrator\AppData\Local\Temp\jansi-64-1.9.dll: The application has failed to start because its 
side-by-side configuration is incorrect.  Please see the application event log for more detail]
Press any key to continue . . .{noformat}
",,,,,Workaround Exists,Install Microsoft Visual C++ 2008 Redistributable Package solves the issue,30/Sep/15 3:09 PM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
Add SELF_CONTAINED to ServerService.getProcessType(),WFCORE-749,12574247,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,luck3y,luck3y,08/Jun/15 1:06 PM,10/Jun/15 9:11 AM,29/Nov/16 3:53 PM,10/Jun/15 9:11 AM,,,,,,,1.0.0.CR6,2.0.0.Alpha5,Server,,,,,0,,,,,,"getProcessType(ServerEnvironment serverEnvironment) is missing SELF_CONTAINED, so will return ProcessType.EMBEDDED in this case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/790,https://github.com/wildfly/wildfly-core/pull/792,,,,,0.0,0.0,,1|hzwsw7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Standalone powershell script does't support --debug and -secmgr option,WFCORE-745,12574041,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,05/Jun/15 8:27 AM,07/Oct/15 3:48 PM,29/Nov/16 3:53 PM,07/Oct/15 3:48 PM,2.0.0.Alpha3,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"Standalone powershell script does't support --debug option. Also -secmgr option and SECMGR=true environment variable settings is missing in posershell script. 

*Steps to Reproduce:*
# .\standalone.ps1 --debug

*Actual results:*
Debug mode is not active

*Expected results:*
{noformat}
...
Listening for transport dt_socket at address: 8787
...
{noformat}",,,,,,,,,,,,,,,,JBEAP-279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwrnr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Unify add-user script functionality in windows (powershell, bat) and linux",WFCORE-744,12574037,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,05/Jun/15 8:22 AM,07/Oct/15 3:48 PM,29/Nov/16 3:53 PM,07/Oct/15 3:48 PM,2.0.0.Alpha3,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"PowerShell scripts ""add-user.ps1"" is missing in EAP 7, ""add-user.bat"" and ""add-user.sh"" are in JBOSS_HOME/bin. If user is able to ""add new user"" by add-user.bat or add-user.sh, user should be also able to ""add new user"" with add-user.ps1",,,,,,,,,,,,,,,,JBEAP-273,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwrmv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Powershell script for domain is not finised,WFCORE-743,12574036,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,05/Jun/15 8:22 AM,07/Oct/15 3:47 PM,29/Nov/16 3:53 PM,07/Oct/15 3:47 PM,2.0.0.Alpha3,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"domain.ps1 for now just calls domain.bat. Many arguments of domain.ps1 is not working, example:

* .\domain.ps1 --Foo
** Actual results: domain starts
** Expected results: Invalid option '--foo'. Use domain --help for information on valid command line arguments and their syntax.
* .\domain.ps1 --help
** Actual results: domain starts
** Expected results: domain prints help message",,,,,,,,,,,,,,,,JBEAP-274,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1118,,,,,,0.0,0.0,,1|hzwrmn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unify linux and PowerShell scripts for jboss-cli in printing environment information,WFCORE-742,12574035,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,05/Jun/15 8:22 AM,07/Oct/15 3:48 PM,29/Nov/16 3:53 PM,07/Oct/15 3:48 PM,2.0.0.Alpha3,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"Powershell script jboss-cli.ps1 prints environment information. 

*Steps to Reproduce:*
# .\jboss-cli.ps1

*Actual results:*
{noformat}
=========================================================================

  WildFly Bootstrap Environment

  JBOSS_HOME: C:\Users\Administrator\playground\7.0.0.DR3\jboss-eap-7.0

  JBOSS_BASE_DIR: C:\Users\Administrator\playground\7.0.0.DR3\jboss-eap-7.0\standalone

  JAVA: java

  JAVA_OPTS: -Xms64M -Xmx512M -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djava.ne
t.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Djboss.modules.system.pkgs=org.jboss.byteman

  JBOSS_MODULEPATH: C:\Users\Administrator\playground\7.0.0.DR3\jboss-eap-7.0\modules

=========================================================================

10:22:33,569 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.3.Final
10:22:33,959 INFO  [org.jboss.as.cli.CommandContext] (main) You are disconnected at the moment. Type 'connect' to connec
t to the server or 'help' for the list of supported commands.
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands
.
[disconnected /]
{noformat}

*Expected results:*
{noformat}
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] 
{noformat}

\\
\\
"".\jboss-cli.ps1 --help"" show too much logging information:

*Steps to Reproduce:*
# .\jboss-cli.ps1 --help

*Actual results:*
{noformat}
...
10:29:18,212 INFO  [org.jboss.as.cli.CommandContext] (main) Usage:
Usage:
10:29:18,215 INFO  [org.jboss.as.cli.CommandContext] (main)

10:29:18,216 INFO  [org.jboss.as.cli.CommandContext] (main)   jboss-cli.sh/jboss-cli.bat [--help] [--version] [--controller=host:port]
  jboss-cli.sh/jboss-cli.bat [--help] [--version] [--controller=host:port]
...
{noformat}

*Expected results:*
{noformat}
Usage:

  jboss-cli.sh/jboss-cli.bat [--help] [--version] [--controller=host:port]
...
{noformat}",,,,,,,,,,,,,,,,JBEAP-275,,,,WFCORE-1011,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwrmf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PowerShell script ""vault.ps1"" is missing",WFCORE-737,12574019,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,05/Jun/15 7:42 AM,07/Oct/15 3:47 PM,29/Nov/16 3:53 PM,07/Oct/15 3:47 PM,2.0.0.Alpha3,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"PowerShell scripts ""vault.ps1"" should be in JBOSS_HOME/bin",,,,,,,,,,,,,,,,JBEAP-266,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwriv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Memory leak in server management controller,WFCORE-736,12573984,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,s.lisovoy,s.lisovoy,05/Jun/15 4:33 AM,26/Aug/15 1:14 PM,29/Nov/16 3:53 PM,25/Aug/15 4:42 PM,,,,,,,2.0.0.Beta5,,Domain Management,Remoting,,,,1,memory_leak,memoryleak,remoting,,,"I have a simple thread that monitor remote wildfly process status. After some time client fails. Wildfly server also eat all memory and reports about connection errors. Some times wildfly also fails with fails with OutOfMemory exception.

Client code:
{code:java}
package ru.kamis.tests.xniomemoryleaks;

import org.jboss.as.controller.client.ModelControllerClient;
import org.jboss.as.controller.client.helpers.Operations;
import org.jboss.dmr.ModelNode;

public class OutOfMemoryDemo {
	public static void main(String[] args) throws Exception {
		
		for(int i=0; i<1000000; i++) {
			ModelControllerClient client = null;
			client = ModelControllerClient.Factory.create(""localhost"", 9990);
			
			ModelNode operation = Operations.createReadAttributeOperation(new ModelNode().setEmptyList(), ""server-state"");
			client.execute(operation);
			
			client.close();
			
			if(i % 1000 == 0) {
				System.out.println(""Processed: "" + i);
			}
		}
	}
}
{code}

Client output: 
{noformat}
июн 05, 2015 11:21:51 AM org.xnio.Xnio <clinit>
INFO: XNIO version 3.2.0.Final
июн 05, 2015 11:21:51 AM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.3.0.Final
июн 05, 2015 11:21:51 AM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 4.0.6.Final
Processed: 0
Processed: 1000
Processed: 2000
Processed: 3000
Processed: 4000
Processed: 5000
Exception in thread ""main"" java.io.IOException: java.net.ConnectException: JBAS012144: Could not connect to http-remoting://localhost:9990. The connection timed out
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:129)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)
	at ru.kamis.tests.xniomemoryleaks.OutOfMemoryDemo.main(OutOfMemoryDemo.java:12)
Caused by: java.net.ConnectException: JBAS012144: Could not connect to http-remoting://localhost:9990. The connection timed out
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:119)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:256)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70)
	at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:204)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient.getOrCreateChannel(RemotingModelControllerClient.java:148)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient$1.getChannel(RemotingModelControllerClient.java:67)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:117)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:92)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:236)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:141)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)
	... 2 more
{noformat}

Client libraries:
{code:xml}
<dependency>
	<groupId>org.wildfly</groupId>
	<artifactId>wildfly-controller-client</artifactId>
	<version>8.2.0.Final</version>
</dependency>
<dependency>
	<groupId>org.jboss.remoting</groupId>
	<artifactId>jboss-remoting</artifactId>
	<version>4.0.6.Final</version>
</dependency>
{code}

Project to reproduce error:
[https://github.com/lis0x90/jboss-remoting-momory-leak-reproduce]

Wildfly logs: 
{noformat}
...
2015-06-05 11:21:10,195 DEBUG [org.jboss.as.config] (MSC service thread 1-6) VM Arguments: -Dprogram.name=standalone.bat -Xms64M -Xmx512M -XX:MaxPermSize=256M -Djboss.remoting.leakdebugging=true -Duser.country=RU -Duser.language=en -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Dorg.jboss.boot.log.file=H:\java\wildfly-8.2.0.Final\standalone\log\server.log -Dlogging.configuration=file:H:\java\wildfly-8.2.0.Final\standalone\configuration/logging.properties 
...
2015-06-05 11:21:11,923 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.2.0.Final ""Tweek"" started in 2259ms - Started 194 of 246 services (86 services are lazy, passive or on-demand)
2015-06-05 11:22:51,726 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-2) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
2015-06-05 11:23:59,306 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-1) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
2015-06-05 11:24:02,527 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-1) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
2015-06-05 11:24:16,142 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-2) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
2015-06-05 11:24:21,312 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-1) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
2015-06-05 11:24:27,458 ERROR [org.jboss.remoting.remote.connection] (XNIO-1 I/O-2) JBREM000200: Remote connection failed: java.io.IOException: Программа на вашем хост-компьютере разорвала установленное подключение
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,05/Jun/15 4:34 AM;s.lisovoy;screenshot-1.png;https://issues.jboss.org/secure/attachment/12390123/screenshot-1.png,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/912538#912538,https://developer.jboss.org/message/903275#903275,https://developer.jboss.org/thread/251919,,,,,,,1.0,3.0,,1|hzwrbb:,9223372036854775807,,,,"* Start Wildfly 8.2.0.Final.
* Checkout code from GitHub [https://github.com/lis0x90/jboss-remoting-momory-leak-reproduce]
* Start jConsole to monitor Wildfly memory leak
* Run client code
* Some wait for more than 5000 connection attempts...",,,,,,"For a workaround, if this problem still occurs, set the following system property: {{-Djboss.remoting.pooled-buffers=false}}

This will use regular GC to manage buffers at a slight performance cost.",25/Aug/15 4:42 PM;brian.stansberry;I'm resolving this as the REM3 issue is marked fixed in 4.0.6 and WFCORE has been on 4.0.9 since April.,"26/Aug/15 4:22 AM;pkremens;I re-opened the JBEAP-283, assuming this one should be also re-opened.","26/Aug/15 1:14 PM;brian.stansberry;[~pkremens] I suspect on JBEAP-283 you are now seeing WFLY-4881, which is a different issue.",,,,,,,,,,,,,,,,,,,,,,,,
Unable to start server from path containing name with special char-jboss$eap,WFCORE-735,12573842,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,baranowb,mkopecky,mkopecky,04/Jun/15 4:41 AM,10/Jul/15 3:29 AM,29/Nov/16 3:53 PM,10/Jul/15 3:29 AM,,,,,,,,,Scripts,,,,,0,,,,,,"*Description of problem:*
Server is unable to start if JBOSS_HOME contaings dolar character ($). This issue is valid for standalone and domain.

*How reproducible:*
RHEL, HPUX, Solaris

*Steps to Reproduce:*
# \[mkopecky@localhost jboss$eap\]$ ./bin/standalone.sh 

*Actual results:*
{noformat}
....
Error: Unable to access jarfile /home/mkopecky/eap/7.0.0.DR3/jboss/jboss-modules.jar
[mkopecky@localhost jboss$eap]$
.....
{noformat}",,,,,,,,,,,,,,,,JBEAP-253,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzwqgn:,9223372036854775807,,,,,,,,,,,10/Jul/15 3:23 AM;baranowb;Special shell characters must not be used as part of path.,,,,,,,,,,,,,,,,,,,,,,,,,,
Host-controller and process-controller log files are not created for some special characters on path,WFCORE-734,12573839,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,baranowb,mkopecky,mkopecky,04/Jun/15 4:31 AM,10/Jul/15 3:31 AM,29/Nov/16 3:53 PM,10/Jul/15 3:31 AM,,,,,,,,,Scripts,,,,,0,,,,,,"*Description of problem:*
 Logging of host-controller and process-controller is not working once the $EAP_HOME is one of the following directories:
  - jboss%eap
  - jboss#eap \*
  - jboss?eap \*

\* - Unable to read the logging configuration message on server start and some console logs from Host Controller, but no logs to file

*How reproducible:*
Always on HPUX, Windows, RHEL, Solaris

*Steps to Reproduce:*
# Re-name the $JBOSS_HOME directory to jboss%eap
# start the domain

*Actual results:*
No logs from host-controller and process-controller (neither to console nor to file)

*Expected results:*
Host-controller and process-controller is logging as usual.",,,,,,,,,,,,,,,,JBEAP-251,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzwqfz:,9223372036854775807,,,,,,,,,,,10/Jul/15 3:31 AM;baranowb;Special character must not be used as part path.,,,,,,,,,,,,,,,,,,,,,,,,,,
TransformerAttachmentGrabber always returns null with map operations,WFCORE-731,12573808,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,rhusar,rhusar,rhusar,03/Jun/15 7:38 PM,05/Jun/15 4:17 AM,29/Nov/16 3:54 PM,05/Jun/15 4:17 AM,2.0.0.Alpha3,,,,,,2.0.0.Alpha4,,Test Suite,,,,,0,,,,,,"Kabir, this thing seems a bit fragile. IIUC this was deviced primarily to address the issue with map operations not being transformable, but org.jboss.as.subsystem.test.TransformerAttachmentGrabber doesn't work with map operations, the attachment is always null.

I think the problem is with the step order, in org.jboss.as.subsystem.test.TransformerAttachmentGrabber#execute because the real op being a map operation which does attach(...) happens after the attachment is grabbed, that map ops are runtime only org.jboss.as.controller.operations.global.MapOperations#MAP_CLEAR_DEFINITION",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/783,,,,,,0.0,3.0,,1|hzwq9j:,9223372036854775807,,,,,,,,,,,"04/Jun/15 2:49 AM;kabirkhan;KernelServices.executeAndGrabTransformerAttachment() and TransformerAttachmentGrabber are only for the subsystem tests, in order to be able to get hold of the attachment and pass that into the KernelServices.transformOperation() method. This is IIRC because in the test framework operations on the main controller and transformation are two separate steps. While in the real world a write would cause transformation to happen and be pushed to the servers.

I believe all you need to do is to overwrite the **standard** write handler for your attribute(s) which is where any map operation will end up.
{code}
class MyClusteringAttributeWriteHandler extends AbstractWriteAttributeHandler<Void> {
    .... 
       @Override
        protected void finishModelStage(OperationContext context, ModelNode operation, String attributeName, ModelNode newValue, ModelNode oldValue, Resource model) throws OperationFailedException {
            super.finishModelStage(context, operation, attributeName, newValue, oldValue, model);
            if (!context.isBooting()) {
                TransformerOperationAttachment attachment = TransformerOperationAttachment.getOrCreate(context);
                //Figure out what changed, and set in the TOA
                attachment.attachIfAbsent(MyClusteringAttachment.KEY, new MyClusteringAttachment(....));
            }
}
{code}
When figuring out what changed 'oldValue' should be the map before the write attribute takes place, 'newValue' should be the map with the write attribute taking place.

Of course there may be problems, so please provide more details if there are.","04/Jun/15 5:14 AM;rhusar;Thanks, this is uderstood and this is what I am doing. The only difference is whether im transforming a map operation or any other operation:

{code:java}org.jboss.as.controller.transform.OperationTransformer clearPropertiesTransformer = new org.jboss.as.controller.transform.OperationTransformer() {
    @Override
    public TransformedOperation transformOperation(TransformationContext context, PathAddress address, ModelNode operation) throws OperationFailedException {
        PropertiesAttachment attachment = context.getAttachment(PropertiesAttachment.KEY);

        return new TransformedOperation(operation, OperationResultTransformer.ORIGINAL_RESULT);
    }
};

// attachment = null
builder.addRawOperationTransformationOverride(MapOperations.MAP_CLEAR_DEFINITION.getName(), clearPropertiesTransformer);

// attachment OK
builder.addRawOperationTransformationOverride(""undefine-attribute"", clearPropertiesTransformer);
{code}

Thus, the attachment is grabbed *before* the the operation created the attachment.",04/Jun/15 8:21 PM;rhusar;Linking pull request that seems to do the job.,,,,,,,,,,,,,,,,,,,,,,,,
Some commands throws NPE on tab completion once disconnected,WFCORE-727,12573494,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,pkremens,pkremens,02/Jun/15 2:44 AM,10/Jun/15 6:10 AM,29/Nov/16 3:54 PM,10/Jun/15 6:10 AM,2.0.0.Alpha3,,,,,,1.0.0.CR6,2.0.0.Alpha5,CLI,,,,,0,,,,,,"Some commands throws NullPointerException when CLI is disconnected from controller and user tries to use tab completion (so far I found these: ls, read-attribute, read-operation).

No exception is thrown with 6.4.0.GA",,,,,,,,,,,,,,,,JBEAP-232,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/788,https://github.com/wildfly/wildfly-core/pull/796,,,,,0.0,1.0,,1|hzwoe7:,9223372036854775807,,,,"Use 'ls <tab>'
{noformat}
[pkremens@dhcp-10-40-4-189 bin] ./jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] ls java.lang.NullPointerException
	at org.jboss.as.cli.handlers.LsHandler$1.canAppearNext(LsHandler.java:77)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:161)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:122)
	at org.jboss.aesh.console.Console.complete(Console.java:1227)
	at org.jboss.aesh.console.Console.parseOperation(Console.java:551)
	at org.jboss.aesh.console.Console.read(Console.java:453)
	at org.jboss.aesh.console.Console.read(Console.java:347)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:198)
	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1327)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:272)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.jboss.modules.Module.run(Module.java:308)
	at org.jboss.modules.Main.main(Main.java:487)
{noformat}",,,,,,,10/Jun/15 6:10 AM;aloubyansky;The fix has been merged into 1.0.x and 2.0.x branches.,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI throws IAE on tab completion,WFCORE-724,12573410,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,pkremens,pkremens,01/Jun/15 8:03 AM,10/Jun/15 6:08 AM,29/Nov/16 3:54 PM,10/Jun/15 6:08 AM,2.0.0.Alpha3,,,,,,2.0.0.Alpha5,,CLI,,,,,0,,,,,,"CLI throws IAE on tab completion. 

https://issues.jboss.org/browse/WFCORE-672 - CLI tab-completion for attribute name path syntax

{noformat}
[standalone@localhost:9990 /]  /subsystem=jgroups/stack=udp/transport=UDP:write-attribute(name=properties.java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.getKeys(ModelValue.java:136)
	at org.jboss.dmr.ModelNode.keys(ModelNode.java:1373)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter$AttributeNamePathCallbackHandler.getCandidates(AttributeNamePathCompleter.java:165)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:112)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:96)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:229)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:122)
	at org.jboss.aesh.console.Console.complete(Console.java:1227)
	at org.jboss.aesh.console.Console.parseOperation(Console.java:551)
	at org.jboss.aesh.console.Console.read(Console.java:453)
	at org.jboss.aesh.console.Console.read(Console.java:347)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:198)
	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1327)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:272)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.jboss.modules.Module.run(Module.java:308)
	at org.jboss.modules.Main.main(Main.java:487)
{noformat}",,,,,,,,,,,,,,,,JBEAP-228,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/789,,,,,,0.0,1.0,,1|hzwnwf:,9223372036854775807,,,,"\# start EAP in standlone-full-ha profile
./standalone.sh -c standalone-full-ha.xml &
\# connect to cli
./jboss-cli.sh -c
\# use tab on
\[standalone@localhost:9990 /\] /subsystem=jgroups/stack=udp/transport=UDP:write-attribute(name=properties
\# use tab again
\[standalone@localhost:9990 /\] /subsystem=jgroups/stack=udp/transport=UDP:write-attribute(name=properties.",,,,,,,10/Jun/15 6:08 AM;aloubyansky;Affects only 2.0.x branch. The fix has been merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
JBoss CLI PowerShell script doesn't match the behavior of the others,WFCORE-720,12573157,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jamezp,jamezp,28/May/15 11:49 AM,07/Oct/15 3:47 PM,29/Nov/16 3:54 PM,07/Oct/15 3:47 PM,,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"The {{jboss-cli.ps1}} script doesn't match the behavior of the other {{jboss-cli.xx}} scripts. A startup message is echoed, the wrong logging.properties is used, the Swing packages aren't added for the GUI, etc.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1118,,,,,,0.0,0.0,,1|hzwmi7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
standalone.sh duplicates some options in JAVA_OPTS,WFCORE-717,12572932,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,mkopecky,mkopecky,27/May/15 8:16 AM,10/Jun/15 9:14 AM,29/Nov/16 3:54 PM,10/Jun/15 9:14 AM,2.0.0.Alpha2,,,,,,2.0.0.Alpha5,,Scripts,,,,,0,,,,,,"*Description of problem:*
standalone.sh  duplicates some options in JAVA_OPTS.

*Steps to Reproduce:*
# ./standalone.sh

*Actual results:*
...
JAVA_OPTS:  -server -XX:+UseCompressedOops  -server -XX:+UseCompressedOops -Xms64m ...
...

*Expected results:*
...
JAVA_OPTS:  -server -XX:+UseCompressedOops  -Xms64m ...
...

*Additional info:*
Option ""-server"" is set here:
{code:bash}
if [ ""$PRESERVE_JAVA_OPTS"" != ""true"" ]; then
   PREPEND_JAVA_OPTS=""$PREPEND_JAVA_OPTS -server""
   ...
   JAVA_OPTS=""$PREPEND_JAVA_OPTS $JAVA_OPTS""
fi
{code}
This part of code is in standalone.sh twice. 

Possible solutions:
* Remove first repetition of {{if [ ""$PRESERVE_JAVA_OPTS"" != ""true"" ]; then ....... fi}} (like EAP 6)
* Add {{PREPEND_JAVA_OPTS=""""}} after {{JAVA_OPTS=""$PREPEND_JAVA_OPTS $JAVA_OPTS""}} in first repetition of {{if [ ""$PRESERVE_JAVA_OPTS"" != ""true"" ]; then ....... fi}}",,,,,,,,,,,,,,,,JBEAP-194,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/768,,,,,,0.0,1.0,,1|hzwl53:,9223372036854775807,,,,,,,,,,,30/May/15 12:09 PM;lafr;https://github.com/wildfly/wildfly-core/pull/768,,,,,,,,,,,,,,,,,,,,,,,,,,
Once server in reload-required state capabilities no longer checked at stage Model.,WFCORE-716,12572910,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,dlofthouse,dlofthouse,27/May/15 6:21 AM,10/Jun/15 9:09 AM,29/Nov/16 3:54 PM,10/Jun/15 9:09 AM,2.0.0.Alpha2,,,,,,2.0.0.Alpha5,,Domain Management,,,,,0,affects_elytron,,,,,"Once a server is in the state reload-required capabilities and requirements are no longer checked e.g.: -

{noformat}
[standalone@localhost:9990 /] ./core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{noformat}

The following command is referencing a non-existent capability: -

{noformat}
[standalone@localhost:9990 /] ./core-service=management/management-interface=http-interface:write-attribute(name=security-domain, value=MgMtDom)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{noformat}

When I execute :reload it will fail: -

{noformat}
11:21:18,567 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""management-interface"" => ""http-interface"")
]): java.lang.IllegalStateException: WFLYCTL0364: Capability 'org.wildfly.security.security-domain.MgMtDom' is unknown.
	at org.jboss.as.controller.ModelControllerImpl$CapabilityRegistryImpl.getCapabilityRegistration(ModelControllerImpl.java:1388)
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/793,,,,,,0.0,1.0,,1|hzwl0f:,9223372036854775807,,,,,,,,,,,"08/Jun/15 3:55 PM;brian.stansberry;I don't think this has anything to do with reload-required.

Problem is the contents of the if/else block here are reversed:

https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/CapabilityReferenceRecorder.java#L88",,,,,,,,,,,,,,,,,,,,,,,,,,
Xalan Linkage error : TransformerConfigurationException for domain setup,WFCORE-715,12572898,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,jason.greene,renan.galang,renan.galang,27/May/15 4:18 AM,03/Oct/15 6:19 PM,29/Nov/16 3:54 PM,03/Oct/15 6:19 PM,1.0.1.Final,,,,,,2.0.0.CR7,,Scripts,,,,,0,,,,,,"Running into the same error as WFCORE-519, but on domain setup. Issue persists on 8.2-FINAL

	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:76)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:166)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:197)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:759)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.lawson.util.eli.xslt.LawXsltException: javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
	at com.lawson.util.eli.xslt.LawTransform.doTransform(LawTransform.java:148)
	at com.lawson.util.eli.xslt.LawTransform.transform(LawTransform.java:57)
	at com.lawson.servlet.Transform.doGet(Transform.java:218)
	... 42 more
Caused by: javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.defineTransletClasses(TemplatesImpl.java:390)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:404)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:439)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:792)
	at __redirected.__TransformerFactory.newTransformer(__TransformerFactory.java:132)
	at com.lawson.util.eli.xslt.LawTransform.doTransform(LawTransform.java:142)","Wildfly 8.2-Final Domain configuration
Wildfly 9.0.1-Final Domain configuration
JDK 1.8.0_45
Windows only",,,,,,,,,,,,,,,,,,,WFCORE-519,,,,,,,13/Aug/15 1:33 AM;renan.galang;Transform.war;https://issues.jboss.org/secure/attachment/12391666/Transform.war,13/Aug/15 1:30 AM;renan.galang;Transform.war;https://issues.jboss.org/secure/attachment/12391665/Transform.war,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1146,,,,,,2.0,11.0,,1|hzwkxr:,9223372036854775807,,,,,,,,,Workaround Exists,"insert the following elements (java-packages) into <Widlfly installation directory>/modules/system/layers/base/sun/jdk/main/modules.xml:

<path name=""com/sun/org/apache/xml/internal/serializer""/>
<path name=""com/sun/org/apache/xml/internal/dtm""/>
<path name=""com/sun/org/apache/xml/internal/dtm/ref""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc/dom""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc/runtime""/>","27/May/15 4:23 AM;renan.galang;I believe this is the same issue as WFCORE-519, but this is happening for domain configuration. I can confirm that the -jaxpmodule flag is no longer in the standalone scripts in the version we are using, but since we're using domain config, it doesn't have any effect. This is Windows only - we did not encounter the problem while working on Redhat Linux 7.2

Including Xalan in the EAR is not a viable choice for us, and the preference is not to modify WildFly's built in module definitions (as in the workaround).

Apologies if I have missed any details, as this is my first post here. Thanks!",27/May/15 6:06 AM;dlofthouse;Can you please try using the most recent WildFly 9 download - the issue you have referenced is fixed for WildFly 9 which is our next scheduled release.  There are no WildFly 8 releases scheduled so from the description so far this just sounds like a duplicate bug report for something already fixed but if you can test with 9 it will help verify if further work is required.,29/May/15 11:41 AM;dlofthouse;This is in relation to an issue already fixed upstream.,"13/Aug/15 1:29 AM;renan.galang;Issue is still occuring, tested on WildFly 9.0.1 final","13/Aug/15 1:31 AM;renan.galang;Attaching WAR file with a test servlet that I used to recreate the issue. Issue goes away when we follow a workaround suggested in WFCORE-519.

An other workaround, if the application must not be changed: insert the following elements (java-packages) into <Widlfly installation directory>/modules/system/layers/base/sun/jdk/main/modules.xml:
<path name=""com/sun/org/apache/xml/internal/serializer""/>
<path name=""com/sun/org/apache/xml/internal/dtm""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc/dom""/>
<path name=""com/sun/org/apache/xalan/internal/xsltc/runtime""/>

However we prefer not to tinker around with the built in wildfly module definitions.",13/Aug/15 1:34 AM;renan.galang;Please use updated WAR. thanks,13/Aug/15 7:47 PM;renan.galang;To access the servlet: /Transform/TransformerTest,21/Sep/15 5:14 AM;ctomc;[~renan.galang] what JDK version did you use? ,"21/Sep/15 7:44 PM;renan.galang;JDK 8 - I indicated the testing platforms and other thirdparty versions in the ""Environment"" field above. ",22/Sep/15 9:46 AM;ctomc;Sent pull request with more appropriate fix.,"24/Sep/15 6:07 PM;jason.greene;We'll get this fixed in WF10, and ill look into a patch release for 9",,,,,,,,,,,,,,,,
add-user scripts fails to create new user when -sc and -dc are used,WFCORE-711,12572555,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,rpelisse,mkopecky,mkopecky,25/May/15 3:43 AM,02/Nov/15 8:11 AM,29/Nov/16 3:54 PM,02/Nov/15 8:11 AM,2.0.0.Alpha2,,,,,,,,Domain Management,Scripts,,,,0,,,,,,"Description of problem:
  add-user scripts fails to create new user when -sc and -dc are used. 

How reproducible:
   always

Steps to Reproduce:
   1. EAP_HOME=`pwd`
   2. mkdir -p output/standalone/configuration
       mkdir -p output/domain/configuration
       touch output/standalone/configuration/mgmt-users.properties
       touch output/standalone/configuration/application-roles.properties
       touch output/standalone/configuration/application-users.properties
       touch output/domain/configuration/mgmt-users.properties
       touch output/domain/configuration/application-roles.properties
       touch output/domain/configuration/application-users.properties
   3. cd bin
   4. ./add-user.sh  --silent  -u eeee -p A1@bbb56 -r NewRealm -g user -dc $EAP_HOME/output/domain/configuration -sc $EAP_HOME/output/standalone/configuration
   
Actual results:
    * Error * 
   WFLYDM0106: File permissions problems found while attempting to update /home/mkopecky/playground/eap/7.0.0.DR2/jboss-eap-7.0/output/domain/configuration/mgmt-groups.properties file.

Expected results:
   No errors on output (like EAP 6).",,,,,,,,,,,,,,,,JBEAP-153,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwj4v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System.out usage may cause deadlock,WFCORE-707,12572459,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,ansur,ansur,22/May/15 3:32 AM,26/May/15 11:42 AM,29/Nov/16 3:54 PM,26/May/15 11:41 AM,,,,,,,1.0.0.Beta6,,Logging,,,,,2,,,,,,"We recently experienced a deadlock due to the logging subsystem, exactly as was detailed in this thread: https://developer.jboss.org/thread/241453

Our concern is that since we include a fairly large number of third-party components, we can't guarantee they're not using System.out or System.err somewhere, potentially causing a thread deadlock.

Are there plans to review this issue, or is the only way to guarantee not having such issues, to disable the logging subsystem?",,,,,,,,,,,,,,,,,,,,,,,,,,,26/May/15 3:27 AM;ansur;threaddump.txt;https://issues.jboss.org/secure/attachment/12389796/threaddump.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,6.0,,1|hzwikn:,9223372036854775807,,,,,,,,,,,22/May/15 12:58 PM;jamezp;Simply using {{System.out}} or {{System.err}} won't trigger a deadlock. The issue here was specific to the log4j {{ConsoleAppender}} and has been fixed in WildFly 9.x. If you're seeing a deadlock with something other than the {{ConsoleAppender}} please let me know. A thread dump would help too.,"26/May/15 3:30 AM;ansur;I've added a Thread Dump in attachment. This was taken on Wildfly 8.2.0.Final
C.f. line 10193, here hibernate uses a System.out to log the statement.","26/May/15 5:59 AM;ctomc;As James said, this was fixed in 9.x, so can you try with 9.0.0.CR1 if it still happens?",26/May/15 7:18 AM;matthieu.brouillard;Do you know a specific commit in 9.X that solved the issue. We're stuck on 8.2 and probably will need to apply manually a patch (if possible of course). Thanks.,26/May/15 11:38 AM;jamezp;As you can see in the thread dump the deadlock is happening because a {{ConsoleAppender}} is being used. Ideally you'd just not use a log4j {{ConsoleAppender}}. Short for that [downloading|https://repository.jboss.org/nexus/content/repositories/releases/org/jboss/logmanager/log4j-jboss-logmanager/1.1.2.Final/log4j-jboss-logmanager-1.1.2.Final.jar] the latest log4j-jboss-logmanager should fix this issue. You'd need to add the library in {{modules/system/layers/base/org/jboss/log4j/logmanager/main/}} and modify the {{modules/system/layers/base/org/jboss/log4j/logmanager/mainmodule.xml/}} file to reflect the new resource name. ,26/May/15 11:42 AM;ansur;Many thanks for the explanation - I'll do just that.,,,,,,,,,,,,,,,,,,,,,
Non exploded deployments are incorrectly marked as exploded,WFCORE-706,12572299,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,20/May/15 6:37 PM,22/May/15 1:04 PM,29/Nov/16 3:54 PM,22/May/15 1:04 PM,1.0.0.CR4,2.0.0.Alpha2,,,,,1.0.0.CR5,2.0.0.Alpha3,Server,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/753,https://github.com/wildfly/wildfly-core/pull/752,,,,,0.0,0.0,,1|hzwhmv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
periodic-size-rotating-file-handler is missing from logging profiles,WFCORE-702,12572140,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,19/May/15 2:15 PM,22/May/15 1:03 PM,29/Nov/16 3:54 PM,22/May/15 1:03 PM,1.0.0.CR4,,,,,,1.0.0.CR5,2.0.0.Alpha3,Logging,,,,,0,,,,,,"The {{periodic-size-rotating-file-handler}} was introduced in WildFly Core 1.x, but is missing from logging profiles.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/744,https://github.com/wildfly/wildfly-core/pull/745,,,,,0.0,0.0,,1|hzwgov:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent domain server status reports between server-config resource and server resource,WFCORE-701,12572117,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,yersan,brian.stansberry,brian.stansberry,19/May/15 11:06 AM,30/Mar/16 10:44 AM,29/Nov/16 3:54 PM,30/Mar/16 10:44 AM,1.0.0.CR4,2.0.0.Alpha2,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"When a managed server fails in some way, the server status reporting is inconsistent between the /host=<host>/server-config=<server> resources and the /host=<host>/server=<server> resource.

To reproduce, run domain.sh, find the pid of a server process, and kill -9 <thepid>. Then with the CLI:

{code}
[domain@localhost:9990 /] /host=master/server-config=server-two:read-attribute(name=status)
{
    ""outcome"" => ""success"",
    ""result"" => ""FAILED""
}
[domain@localhost:9990 /] /host=master/server=server-two:read-attribute(name=server-state)
{
    ""outcome"" => ""success"",
    ""result"" => ""STOPPED""
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzwgjr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jboss deployment structure error when two deployments share the same dependency,WFCORE-700,12572107,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,elguardian,elguardian,elguardian,19/May/15 10:08 AM,01/Sep/16 7:11 AM,29/Nov/16 3:54 PM,17/Aug/15 3:17 AM,2.0.0.Alpha2,,,,,,,,,,,,,0,,,,,,"When two deployments depend on the same library it could throw and IOException.
The problem is located in {code} org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12 {code}


* When it is executed in sequence
*# The first time is called with the argument ""path"", VFS is using RootFileSystem and it is considered a file.  
*# Once it is called the second time, VFS is using JavaZipFileSystem (is mounted during the first call) and this time is not considered a file.

* When is executed in parallel 
*# both of them are using RootFileSystem. The second time VirtualFile.isFile is called throws an exception (Caused by: java.io.IOException: VFS000017: Filesystem already mounted at mount point)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1120628,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/754,,,,,,0.0,8.0,,1|hzwghj:,9223372036854775807,,,,,,,,,,,19/May/15 10:41 AM;ctomc;Can this be reproduced on WildFly 10Alpha1?,"20/May/15 3:15 AM;elguardian;yes. you can reproduce the problem. 
I'm digging a bit and you can get these two stack traces (depending when the race condition happen)

{code}
09:12:58,005 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.""ShareLibTest.ear"".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit.""ShareLibTest.ear"".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment ""ShareLibTest.ear""
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:163)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0168: Error loading jboss-deployment-structure.xml from /home/egonzalez/redhat/github/wildfly/build/target/wildfly-10.0.0.Alpha2-SNAPSHOT/standalone/deployments/ShareLibTest.ear/META-INF/jboss-deployment-structure.xml
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:321)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:293)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.deploy(DeploymentStructureDescriptorParser.java:157)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:156)
	... 5 more
Caused by: javax.xml.stream.XMLStreamException: java.io.IOException: VFS000017: Filesystem already mounted at mount point """"/home/egonzalez/redhat/github/wildfly/build/target/wildfly-10.0.0.Alpha2-SNAPSHOT/standalone/mylib.jar""""
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResourceRoot(JBossDeploymentStructureParser12.java:771)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResources(JBossDeploymentStructureParser12.java:701)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseModuleStructureSpec(JBossDeploymentStructureParser12.java:347)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseDeployment(JBossDeploymentStructureParser12.java:263)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.readElement(JBossDeploymentStructureParser12.java:240)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.readElement(JBossDeploymentStructureParser12.java:69)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:315)
	... 8 more
Caused by: java.io.IOException: VFS000017: Filesystem already mounted at mount point """"/home/egonzalez/redhat/github/wildfly/build/target/wildfly-10.0.0.Alpha2-SNAPSHOT/standalone/mylib.jar""""
	at org.jboss.vfs.VFS.mount(VFS.java:123)
	at org.jboss.vfs.VFS.doMount(VFS.java:336)
	at org.jboss.vfs.VFS.mountZip(VFS.java:386)
	at org.jboss.vfs.VFS.mountZip(VFS.java:410)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResourceRoot(JBossDeploymentStructureParser12.java:761)
	... 16 more
{code}

And the second stack trace:

{code}
09:01:55,297 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.""ShareLibTest2.ear"".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit.""ShareLibTest2.ear"".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment ""ShareLibTest2.ear""
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:163)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0168: Error loading jboss-deployment-structure.xml from /home/egonzalez/redhat/github/wildfly/build/target/wildfly-10.0.0.Alpha2-SNAPSHOT/standalone/deployments/ShareLibTest2.ear/META-INF/jboss-deployment-structure.xml
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:321)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:293)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.deploy(DeploymentStructureDescriptorParser.java:157)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:156)
	... 5 more
Caused by: javax.xml.stream.XMLStreamException: java.util.zip.ZipException: zip file is empty
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResourceRoot(JBossDeploymentStructureParser12.java:771)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResources(JBossDeploymentStructureParser12.java:701)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseModuleStructureSpec(JBossDeploymentStructureParser12.java:347)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseDeployment(JBossDeploymentStructureParser12.java:263)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.readElement(JBossDeploymentStructureParser12.java:240)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.readElement(JBossDeploymentStructureParser12.java:69)
	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
	at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:315)
	... 8 more
Caused by: java.util.zip.ZipException: zip file is empty
	at java.util.zip.ZipFile.open(Native Method)
	at java.util.zip.ZipFile.<init>(ZipFile.java:220)
	at java.util.zip.ZipFile.<init>(ZipFile.java:150)
	at java.util.jar.JarFile.<init>(JarFile.java:166)
	at java.util.jar.JarFile.<init>(JarFile.java:130)
	at org.jboss.vfs.spi.JavaZipFileSystem.<init>(JavaZipFileSystem.java:90)
	at org.jboss.vfs.spi.JavaZipFileSystem.<init>(JavaZipFileSystem.java:77)
	at org.jboss.vfs.VFS.mountZip(VFS.java:386)
	at org.jboss.vfs.VFS.mountZip(VFS.java:410)
	at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.parseResourceRoot(JBossDeploymentStructureParser12.java:761)
	... 16 more
{code}","20/May/15 7:02 AM;elguardian;Testing a bit more I found another problem

The description of the problem:

a) Create a lib. This lib will access resources inside itself (i.e: reading a text file, properties, etc...)

b) create two applications with a jboss-deployment-structure.xml in the META-INF with a) as a dependency.

c) deploy both apps (exploded). (in sequence)

d) test the apps (both of them work). They can access those resources inside a)

e) undeploy the first application -> the shared lib is unmount

d) the second application is unusable as the lib is unmount and cannot read any of the files inside the lib.","06/Jul/15 1:01 PM;swd847;<resource-root> was only intended to be used to access files inside the deployment, it was not intended to allow access to external libraries. Why are you depending on the library using resource-root anyway? In general it is better to use a normal dependency, so that the classes are not loaded multiple times. 

","20/Jul/15 4:29 AM;elguardian;Hi [~stuartdouglas] 

The system was able to access external resource so I thought this was allowed. In any case if resource-root was designed to reference only within the deployment then I think this is still a bug because you can reference outside the deployment. ","22/Jul/15 10:52 AM;ctomc;Can you post files so we can reproduce this. I am interested in how you define dependency in jboss-deployment-structure.xm
and how your ""shared"" lib is defined / deployed","22/Jul/15 11:00 AM;ctomc;never mind my previous comment, saw the attached reproducer in BZ.

it would work for you if you would do something like this
{code:title=jboss-deployment-structure.xml}
<jboss-deployment-structure>
  <deployment>
<dependencies>
      <module name=""deployment.mylib.jar"" />
    </dependencies>
  </deployment>
</jboss-deployment-structure>
{code}
and add jboss-all.xml

{code:title=jboss-all.xml}
<jboss umlns=""urn:jboss:1.0"">
    <jboss-deployment-dependencies xmlns=""urn:jboss:deployment-dependencies:1.0"">
        <dependency name=""mylib.jar"" />
    </jboss-deployment-dependencies>
</jboss>
{code}

and have that for both ears. 
Also keep in mind that you will probably want to add deps for also sub modules of your ear ( <sub-deployment name=""myapp.war"">...)
",01/Sep/16 7:11 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1120628|https://bugzilla.redhat.com/show_bug.cgi?id=1120628] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,
CLI does not handle paths with a value of '/',WFCORE-697,12572016,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,swd847,swd847,18/May/15 7:21 PM,21/May/15 6:30 AM,29/Nov/16 3:54 PM,21/May/15 6:30 AM,2.0.0.Alpha2,,,,,,1.0.0.CR5,2.0.0.Alpha3,CLI,,,,,0,,,,,,"It does not appear to be possible to address nodes with a name of '/' in the CLI. This is used in the default undertow subsystem to serve the welcome content.

{code}
[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=*:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => [{
        ""address"" => [
            (""subsystem"" => ""undertow""),
            (""server"" => ""default-server""),
            (""host"" => ""default-host""),
            (""location"" => ""/"")
        ],
        ""outcome"" => ""success"",
        ""result"" => {
            ""handler"" => ""welcome-content"",
            ""filter-ref"" => undefined
        }
    }]
}

[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=\/:read-resource
Node type is not complete at index 71
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/740,https://github.com/wildfly/wildfly-core/pull/741,,,,,0.0,3.0,,1|hzwfxr:,9223372036854775807,,,,,,,,,,,19/May/15 7:19 AM;dmlloyd;Hmm this raises an interesting question: do we have a well-defined acceptable syntax for address value segments?  And does it map properly to all possible file names?  We might need some kind of encoding scheme or something...,"19/May/15 7:25 AM;aloubyansky;There is a type name validation in place (alphanumeric), resource names are not validated (they used to be, the old pattern is commented out, because we probably didn't come up with the rule).","19/May/15 8:55 AM;dmlloyd;Well that's definitely true for path element names... but, for path element values, the only rule I can see is that {{*}} denotes a wildcard (and that it's not null).",,,,,,,,,,,,,,,,,,,,,,,,
OutOfMemoryErrors when adding large deployment with audit logging enabled,WFCORE-695,12571787,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,jameslivingston,jameslivingston,14/May/15 8:51 PM,10/Nov/15 1:08 AM,29/Nov/16 3:54 PM,,1.0.0.CR4,,,,,,,,CLI,Domain Management,,,,0,,,,,,"When performing a deployment operation, audit logging will include the deployment content in the audit record (serialised as text). Since JsonAuditLogItemFormatter.createRecordText() creates the string in memory, large deployment will lead to an OutOfMemoryError such as

java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOf(Arrays.java:2367) [rt.jar:1.7.0_71]
        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130) [rt.jar:1.7.0_71]
        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114) [rt.jar:1.7.0_71]
        at java.lang.AbstractStringBuilder.appendCodePoint(AbstractStringBuilder.java:730) [rt.jar:1.7.0_71]
        at java.lang.StringBuilder.appendCodePoint(StringBuilder.java:242) [rt.jar:1.7.0_71]
        at org.jboss.dmr.ModelValue.jsonEscape(ModelValue.java:212) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.BytesModelValue.formatAsJSON(BytesModelValue.java:144) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ObjectModelValue.formatAsJSON(ObjectModelValue.java:247) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ListModelValue.formatAsJSON(ListModelValue.java:251) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ObjectModelValue.formatAsJSON(ObjectModelValue.java:247) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ListModelValue.formatAsJSON(ListModelValue.java:251) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ObjectModelValue.formatAsJSON(ObjectModelValue.java:247) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ListModelValue.formatAsJSON(ListModelValue.java:251) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.formatAsJSON(ModelNode.java:1520) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ObjectModelValue.formatAsJSON(ObjectModelValue.java:247) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelValue.writeJSONString(ModelValue.java:351) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelValue.toJSONString(ModelValue.java:340) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.dmr.ModelNode.toJSONString(ModelNode.java:1350) [jboss-dmr-1.2.0.Final-redhat-1.jar:1.2.0.Final-redhat-1]
        at org.jboss.as.controller.audit.JsonAuditLogItemFormatter.createRecordText(JsonAuditLogItemFormatter.java:135) [jboss-as-controller-7.4.2.Final-redhat-2.jar:7.4.2.Final-redhat-2]


A work-around is increasing the controller heap size, but it would be good if that was not required. If including the deployment content in the record is desired, perhaps there is a way to make it stream the record rather than building the entire string in memory at once.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzwekf:,9223372036854775807,,,,,,,,,,,"16/Sep/15 4:12 PM;brian.stansberry;[~aloubyansky] I don't think we can/should directly fix this in the audit logging layer; that's just a generic write of the contents of the mgmt op and fixing this would basically involve hard-coding a very specific deviation from the normal handling.

I think the main issue here is the CLI 'deploy' commands are shipping the deployment bytes to the server via base-64 encoded DMR (the ""bytes"" param to the op) instead of attaching a stream to the op.

I suspect it's done this way because attaching a stream is tricky since you need an Operation object scoped to whatever set of operations need to get run in a single request.","17/Sep/15 3:04 AM;aloubyansky;Bytes are attached only when deploy command is used in CLI batches. Otherwise, it's streams.","17/Sep/15 3:42 PM;brian.stansberry;Ah, good. I should have looked closer! Is there any CLI JIRA to improve that?

I'm reconsidering a bit doing nothing about this in the audit logging layer. Conceivably we could detect ModelType.BYTES and truncate the output if its too big. I don't think omitting it altogether is good; for example the 'hash' param for any deployment add op is ModelType.BYTES, and seeing what that value is is useful. Problem is there is no way to look the ModelNode's bytes in order to decide whether to manipulate like this except by calling node.asBytes() and that call results in a copy of the byte[].","17/Sep/15 4:41 PM;aloubyansky;There is no CLI Jira for that yet. I think I looked into supporting streams in cli batches at some point, which meant changing batch APIs and following decision to postpone. That would make sense though.

I think truncating would make sense for large values too as a guarding mechanism. Otherwise, if it's too big but has to be recorded in full, it would simply have to be logged/stored separately and referenced.
Or the log has to be fragmented. At least we could count the amount of data already written/logged. If it's critical then stop, persist, open another one and continue.",,,,,,,,,,,,,,,,,,,,,,,
Redeploy operation fails on deployments from the deployment scanner,WFCORE-694,12571744,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,ropalka,ropalka,14/May/15 11:40 AM,14/May/15 4:38 PM,29/Nov/16 3:54 PM,14/May/15 4:38 PM,1.0.0.CR4,,,,,,1.0.0.CR5,2.0.0.Alpha1,Domain Management,,,,,0,,,,,,"An application is deployed via deployment scanner.
On an attempt to redeploy it via jboss-cli the following error is displayed:
{code}
[standalone@localhost:9990 deployment=sample.war] :redeploy
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0155: runtime-name may not be null"",
    ""rolled-back"" => true
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/730,https://github.com/wildfly/wildfly-core/pull/731,,,,,0.0,0.0,,1|hzweb3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
read-children-names(include-aliases=true) can return phantom results,WFCORE-692,12571582,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pferraro,pferraro,pferraro,13/May/15 9:27 AM,15/May/15 5:04 PM,29/Nov/16 3:54 PM,15/May/15 5:04 PM,1.0.0.CR3,,,,,,1.0.0.CR5,2.0.0.Alpha1,Domain Management,,,,,0,,,,,,"If another resource exists with the same key as the target address of a resource alias, the read-children-names(include-aliases=true) operation can return phantom results.

Here's an example:
I have a alias registered that translates:
{noformat}/subsystem=infinispan/cache-container=*/local-cache=*/file-store=FILE_STORE{noformat}
to:
{noformat}/subsystem=infinispan/cache-container=*/local-cache=*/store=file{noformat}
Additionally, I have a resource named:
{noformat}/subsystem=infinispan/cache-container=*/local-cache=*/store=none{noformat}

If I create a cache that uses store=none, the results of a read-children-names(child-type=file-store, include-aliases=true) operation includes the FILE_STORE resource, even though the target resource (i.e. file=store) does not exist.
This additionally causes the /subsystem=infinispan:read-resource(include-aliases=true, recursive=true) operation to fail.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/728,https://github.com/wildfly/wildfly-core/pull/729,,,,,0.0,2.0,,1|hzwdcn:,9223372036854775807,,,,,,,,,,,"13/May/15 9:48 AM;kabirkhan;If you can add a test demonstrating the problem to AliasResourceTestCase (in WildFly core), and let me know the branch, that will move this up my stack of things to look at.","14/May/15 11:51 AM;pferraro;[~kabirkhan] BTW, the issue turned out to be far more specific to my use case than I initially assumed.  The key difference is that I have a non-aliased resource with the same path key, which causes the read-children-names operation to mistakenly decided that the target resource exists.",,,,,,,,,,,,,,,,,,,,,,,,,
Can not parse a wrapped properties attribute inside a group,WFCORE-691,12571577,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jmesnil,jmesnil,13/May/15 9:07 AM,27/Jul/15 10:29 AM,29/Nov/16 3:54 PM,23/Jul/15 6:46 PM,1.0.0.CR3,,,,,,2.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"Attribute definition is: 

{noformat}
        static final PropertiesAttributeDefinition WRAPPED_PROPERTIES_IN_GROUP = new PropertiesAttributeDefinition.Builder(
                ""wrapped-properties-in-group"", true)
                .setWrapXmlElement(true)
                .setWrapperElement(""wrapped-properties"")
                .setXmlName(""property"")
                .setAttributeGroup(""mygroup"")
                .setAllowExpression(true)
                .build();
{noformat}

Corresponding XML representation is:

{noformat}
        <mygroup other-attribute-in-group=""foo"">
            <wrapped-properties>
                <property name=""prop1"" value=""val1""/>
                <property name=""prop2"" value=""val2""/>
            </wrapped-properties>
        </mygroup>
{noformat}

XML parsing fails with:

{noformat}
Message: WFLYCTL0198: Unexpected element '{urn:jboss:domain:test:1.0}mygroup' encountered
        at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:89)
        at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:240)
        at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:159)
        at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:259)
        at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:159)
        at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:41)
        at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:35)
        at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
        at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
        at org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.testGroups(PersistentResourceXMLParserTestCas
e.java:147)
{noformat}",,,,,,,,,,,,,,,,,,,,,WFLY-4584,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzwdbj:,9223372036854775807,,,,,,,,,,,11/Jun/15 10:40 AM;jmesnil;messaging-activemq's jms-bridge resource have source-context and target-context attributes that can not be parsed.,,,,,,,,,,,,,,,,,,,,,,,,,,
patches with duplicate element patch-id values should be rejected,WFCORE-687,12571279,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,11/May/15 8:39 AM,13/May/15 5:01 PM,29/Nov/16 3:54 PM,13/May/15 5:01 PM,1.0.0.CR2,,,,,,1.0.0.CR4,2.0.0.Alpha1,Patching ,,,,,0,,,,,,"Patches that contain duplicate patch-id attribute values in 'element' elements in patch.xml can be applied but can't be rolled back.  An attempt to rollback such a patch will result in an error ""Content loader already registered for patch "" + patchID, thrown from IdentityPatchContext.recordContentLoader(patchID, contentLoader).

Current implementation should reject patches with duplicate element patch-id values (unless the value is 'base').
Adding support for duplicate element patch-id values is a more difficult task at this point. If we decide to support it after all, it'll be implemented under a different issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/708,https://github.com/wildfly/wildfly-core/pull/718,,,,,0.0,2.0,,1|hzwbkf:,9223372036854775807,,,,,,,,,,,12/May/15 5:53 AM;aloubyansky;Merged,13/May/15 3:34 AM;aloubyansky;Re-opening to backport to 1.x branch.,,,,,,,,,,,,,,,,,,,,,,,,,
CompositeIndexProcessor uses wrong module loader to load external annotation indexes,WFCORE-684,12571148,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,08/May/15 8:05 PM,24/Jun/15 2:53 AM,29/Nov/16 3:54 PM,12/May/15 4:27 PM,1.0.0.CR2,,,,,,1.0.0.CR3,,Server,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1220009,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/705,https://github.com/wildfly/wildfly-core/pull/706,,,,,0.0,5.0,,1|hzwb1z:,9223372036854775807,,,,,,,,,,,11/May/15 5:44 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1220009|https://bugzilla.redhat.com/show_bug.cgi?id=1220009] from NEW to ASSIGNED,13/May/15 1:21 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1220009|https://bugzilla.redhat.com/show_bug.cgi?id=1220009] from ASSIGNED to POST,15/Jun/15 4:51 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1220009|https://bugzilla.redhat.com/show_bug.cgi?id=1220009] from POST to MODIFIED,18/Jun/15 11:38 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1220009|https://bugzilla.redhat.com/show_bug.cgi?id=1220009] from MODIFIED to ON_QA,24/Jun/15 2:53 AM;jira-bugzilla-migration;hsvabek@redhat.com changed the Status of [bug 1220009|https://bugzilla.redhat.com/show_bug.cgi?id=1220009] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
ListModuleRootsHandler and ModuleLocationHandler don't handle PrivilegedActionException properly,WFCORE-683,12571132,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,yersan,brian.stansberry,brian.stansberry,08/May/15 12:57 PM,10/May/16 3:52 PM,29/Nov/16 3:54 PM,18/Mar/16 6:16 PM,1.0.0.CR1,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"The two inner class OSHs in ModuleLoadingResourceDefinition don't deal with exceptions properly. They invoke AccessController.doPrivileged and then deal with any PrivilegedActionException by rethrowing as OperationFailedException.

OperationFailedException represents a client mistake and is handled as such (e.g. isn't logged in the server log.) It shouldn't be thrown here unless the PrivilegedActionException.getCause() value is itself an OFE. Otherwise, the OSHs should throw a RuntimeException. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzwayf:,9223372036854775807,,,,,,,,,,,"15/Feb/16 4:32 PM;ctomc;instead of using reflection there is now proper api that is exposed via jmx.
example:
{code:java}
private static List<String> findResourcePaths(String moduleName) throws ModuleLoadException, ReflectiveOperationException {
        ModuleLoaderMXBean loader = ModuleInfoHandler.getMxBean(Module.getCallerModuleLoader());
        List<String> result = new LinkedList<>();
        for (ResourceLoaderInfo rl : loader.getResourceLoaders(moduleName)){
            if (rl.getLocation()!=null) {
                result.add(new File(URI.create(rl.getLocation())).toString());
             }
         }
        return result;
    }
{code}",15/Feb/16 5:07 PM;brian.stansberry;ModuleLoadingResourceDefinition is here: https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/controller/resources/ModuleLoadingResourceDefinition.java,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrectly timeout values in ControllerLogger method timeoutCompletingOperation and ControllerMessages method serviceInstallTimedOut,WFCORE-681,12570975,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,soul2zimate,soul2zimate,soul2zimate,07/May/15 5:09 AM,28/Mar/16 7:21 PM,29/Nov/16 3:54 PM,08/May/15 2:22 PM,1.0.0.CR1,,,,,,1.0.0.CR2,,Server,,,,,0,,,,,,"Incorrectly scaled timeout value passed to org.jboss.as.controller.ControllerLogger method timeoutCompletingOperation and org.jboss.as.controller.ControllerMessages method serviceInstallTimedOut

parameter value is ms, second is expected. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1219273,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/695,https://github.com/wildfly/wildfly-core/pull/696,,,,,0.0,3.0,,1|hzwa0f:,9223372036854775807,,,,,,,,,,,10/May/15 9:53 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1219273|https://bugzilla.redhat.com/show_bug.cgi?id=1219273] from ASSIGNED to POST,28/Mar/16 4:55 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1219273|https://bugzilla.redhat.com/show_bug.cgi?id=1219273] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1219273|https://bugzilla.redhat.com/show_bug.cgi?id=1219273] from MODIFIED to POST,,,,,,,,,,,,,,,,,,,,,,,,
"Remove the ""bundle"" notion from WildFly Core embedded module",WFCORE-677,12570914,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,06/May/15 12:01 PM,08/May/15 2:21 PM,29/Nov/16 3:54 PM,08/May/15 2:21 PM,1.0.0.CR1,,,,,,1.0.0.CR2,,Server,,,,,0,,,,,,The EmbeddedServerFactory create API includes the bundle path notion copied over from AS7. I don't want this in the WildFly Core API as we have no real support for the concept.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/690,https://github.com/wildfly/wildfly-core/pull/691,,,,,0.0,0.0,,1|hzw9mv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
data-source ..  --new-connection-sql  does not allow double qoutes in the SQL,WFCORE-676,12569130,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,tfonteyn,tfonteyn,22/Apr/15 4:24 AM,08/May/15 3:09 PM,29/Nov/16 3:54 PM,08/May/15 3:09 PM,1.0.0.CR1,,,,,,1.0.0.CR2,,CLI,,,,,0,,,,,,"Setting an SQL statement with double quotes in it from the CLI is not possible:

data-source --name=ExampleDS --new-connection-sql=""set role test identified by \""password\""""
","Wildfly ""master"" build on 2015-04-22",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/688,,,,,,0.0,2.0,,1|hzvzsv:,9223372036854775807,,,,"Try variations of this command:

data-source --name=ExampleDS --new-connection-sql=""set role test identified by \""password\""""

The intention is to use double quotes around the password as this is needed when the password contains special characters.

Several variations simply get refused, at best the xml ends up like:

<new-connection-sql>set role test identified by password""""</new-connection-sql>

=> two double quotes AFTER the password.

It is assumed this will happen in other places where the syntax is similar.",,,,,,"none that uses CLI commands
",22/Apr/15 4:32 AM;tfonteyn;Note this actually *works* in the EAP 6.4 GA release!,08/May/15 3:09 PM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,
add-user utility is losing disabled accounts,WFCORE-675,12570867,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,06/May/15 7:31 AM,08/May/15 2:23 PM,29/Nov/16 3:54 PM,08/May/15 2:23 PM,,,,,,,1.0.0.CR2,2.0.0.Alpha1,Domain Management,Scripts,,,,0,,,,,,"The add user utility has an option to disable users by commenting out their line in the properties file, this comment can later be removed to enable the user again - unfortunately when new users are added all of the commented out users are removed which means they can not later be enabled again.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzw9cv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RemotingSubsystemTransformersTestCase fails with inability to boot,WFCORE-674,12570793,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,jamezp,jamezp,05/May/15 5:46 PM,12/May/15 4:26 PM,29/Nov/16 3:54 PM,12/May/15 4:26 PM,,,,,,,2.0.0.Alpha1,,Remoting,,,,,0,,,,,,"It seems to fail consistently on Linux with JDK 8.

{code:title=Error}
testTransformersEAP620(org.jboss.as.remoting.RemotingSubsystemTransformersTestCase)  Time elapsed: 0.507 sec  <<< ERROR!
java.lang.IllegalArgumentException: WFLYCTL0289: No operation entry called 'add' registered at '[
    (""subsystem"" => ""remoting""),
    (""outbound-connection"" => ""generic-conn1"")
]'
	at org.jboss.as.controller.operations.validation.OperationValidator.throwOrWarnAboutDescriptorProblem(OperationValidator.java:548)
	at org.jboss.as.controller.operations.validation.OperationValidator.validateOperation(OperationValidator.java:122)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:321)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:308)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:271)
	at java.lang.Thread.run(Thread.java:745)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/686,,,,,,0.0,1.0,,1|hzw8x3:,9223372036854775807,,,,{{cd remoting/tests}} then {{mvn clean test -Dtest=RemotingSubsystemTransformersTestCase -Djboss.test.transformers.eap}},,,,,,,06/May/15 5:06 AM;kabirkhan;This seems to be a problem in the order the static initializers are called,,,,,,,,,,,,,,,,,,,,,,,,,,
Node type is not complete at index 0 after tab completion on an empty resource,WFCORE-670,12570489,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,aloubyansky,jamezp,jamezp,30/Apr/15 8:13 PM,28/Mar/16 7:21 PM,29/Nov/16 3:54 PM,05/May/15 3:58 PM,,,,,,,1.0.0.CR2,,CLI,,,,,0,,,,,,"Using something like {{/system-property=<TAB>}} with no system properties set results in future commands no longer working.

{code:title=Example Output}
[standalone@localhost:9990 /] /system-property=
The operation name is missing or the format of the operation request is wrong.
[standalone@localhost:9990 /]  
[standalone@localhost:9990 /] exit
Node type is not complete at index 0
[standalone@localhost:9990 /]
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1277320,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/676,https://github.com/wildfly/wildfly-core/pull/677,,,,,0.0,4.0,,1|hzw75j:,9223372036854775807,,,,,,,,,,,"30/Apr/15 8:31 PM;jamezp;I added a blocker flag, but IMO it just needs to be fixed by 1.0.0.Final.","01/May/15 4:24 PM;jamezp;It looks like this was the commit that introduced the issue, https://github.com/wildfly/wildfly-core/commit/4f9da95373c27b70fea193778e7baa9d162cf406#diff-93f2c59d2b103af3e5ebebeabf84b45bR312.",28/Mar/16 5:26 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1277320|https://bugzilla.redhat.com/show_bug.cgi?id=1277320] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1277320|https://bugzilla.redhat.com/show_bug.cgi?id=1277320] from MODIFIED to POST,,,,,,,,,,,,,,,,,,,,,,,
When host jvm name and server jvm name are same then the host jvm settings are ignored,WFCORE-665,12569778,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,jaysensharma,jaysensharma,27/Apr/15 3:39 AM,13/Oct/15 8:37 AM,29/Nov/16 3:54 PM,,1.0.0.Beta5,,,,,,,,Domain Management,,,,,0,,,,,,"- If the ""host.xml"" has the following JVM name defined 

{code}
    <jvms>
        <jvm name=""default"">
            <heap size=""200m"" max-size=""2000m""/>
            <permgen size=""256m"" max-size=""256m""/>
            <jvm-options>
                <option value=""-server""/>
            </jvm-options>
        </jvm>
        <jvm name=""Test"">
            <heap size=""300m"" max-size=""2500m""/>
            <permgen size=""128m"" max-size=""128m""/>
        </jvm>
    </jvms>
{code}

- If the server refers to the above JVM name as following:

{code}
    <servers>
        <server name=""server-one"" group=""main-server-group"" auto-start=""true"">
        <jvm name=""Test""/>
        </server>
    </servers>
{code}

- In above case when the server-one is booted that time  it takes the value from ""server-group"" (in this case main-server-group) defined in the domain.xml

{code}
    <server-groups>
        <server-group name=""main-server-group"" profile=""full"">
            <jvm name=""default"">
                <heap size=""64m"" max-size=""512m""/>
            </jvm>
{code}

So the JVM settings defined for JVM name ""Test"" is overridden by server-group values:

{code}
30201 jboss-modules.jar -agentpath:/usr/lib64/libabrt-java-connector.so=abrt=on -D[Server:server-one] -XX:PermSize=128m -XX:MaxPermSize=128m -Xms64m -Xmx512m -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Djboss.home.dir=/wildfly-9.0.0.CR1-SNAPSHOT -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.log.dir=/wildfly-9.0.0.CR1-SNAPSHOT/domain/servers/server-one/log -Djboss.server.temp.dir=/wildfly-9.0.0.CR1-SNAPSHOT/domain/servers/server-one/tmp -Djboss.server.data.dir=/wildfly-9.0.0.CR1-SNAPSHOT/domain/servers/server-one/data -Dlogging.configuration=file:/wildfly-9.0.0.CR1-SNAPSHOT/domain/servers/server-one/data/logging.properties
{code}

*NOTICE* the JVM runtime value is  -Xms64m -Xmx512m, where as it was supposed to be -Xms300m -Xmx2500m   as that is the ""Test"" jvm setting.",All,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1215605,,,,,Perform,,,,,,,,,,http://lists.jboss.org/pipermail/wildfly-dev/2015-April/003831.html,,,,,,,,,0.0,3.0,,1|hzw3jr:,9223372036854775807,,,,,,,,,,,"27/Apr/15 3:51 AM;jaysensharma;Pull Request is sent for Verification: 
https://github.com/wildfly/wildfly-core/pull/646

- I think that if the Host JVM name and the Server JVM names (like ""Test"") are same then we should first merge then the ""this.jvmElement"" should be formed, Else the server-group setting just overrides the ""Test"" settings as the ""Test"" JVMs actual values are defined at the Host JVM level, Server is simply referring to the Host JVM settings.
{code}
this.jvmElement = new JvmElement(jvmName,
-                resolveNilableExpressions(hostVM, expressionResolver, false),
-                resolveNilableExpressions(groupVM, expressionResolver, false),
-                resolveNilableExpressions(serverVM, expressionResolver, false));
{code}

host-controller/src/main/java/org/jboss/as/host/controller/ManagedServerBootCmdFactory.java",27/Apr/15 12:14 PM;brian.stansberry;Thanks for the report. I agree what we have now isn't ideal. I started a discussion at http://lists.jboss.org/pipermail/wildfly-dev/2015-April/003831.html.,13/Oct/15 8:37 AM;jira-bugzilla-migration;Ryan Emerson <remerson@redhat.com> changed the Status of [bug 1215605|https://bugzilla.redhat.com/show_bug.cgi?id=1215605] from NEW to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,
standalone.sh fails to start server with debug argument on solaris 10 and HP-UX hosts,WFCORE-659,12569271,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,23/Apr/15 4:31 AM,09/Jun/15 9:14 AM,29/Nov/16 3:54 PM,08/May/15 4:23 PM,1.0.0.Beta6,,,,,,1.0.0.CR1,,,,,,,0,,,,,,"Copy of https://bugzilla.redhat.com/show_bug.cgi?id=1064763

Description of problem:
 I am unable to start standalone server with --debug [PORT] argument on Solaris 10 hosts. 

SunOS 5.10 Generic_142910-17 i86pc i386 i86pc
[user@host bin]$ ./standalone.sh --debug
./standalone.sh: cannot shift
[user@host bin]$ ./standalone.sh --debug 8787
./standalone.sh: bad substitution

SunOS 5.10 Generic_118833-36 sun4v sparc SUNW,Sun-Fire-T1000
[user@host bin]$ ./standalone.sh --debug
./standalone.sh: cannot shift
[user@host bin]$ ./standalone.sh --debug 8787
./standalone.sh: bad substitution

Version-Release number of selected component (if applicable):
 EAP 6.3.0.DR0

How reproducible:
 Always

Steps to Reproduce:
 1. Navigate to $JBOSS_HOME/bin and run: ./standalone.sh --debug [PORT]

Actual results:
 Server fails to start

Expected results:
 Server will start with debugger attached to $PORT (8787 if no $PORT)","HP-UX, Solaris",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1064763,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/638,,,,,,0.0,4.0,,1|hzw0nj:,9223372036854775807,,,,,,,,,,,23/Apr/15 4:43 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1064763|https://bugzilla.redhat.com/show_bug.cgi?id=1064763] from ASSIGNED to POST,05/May/15 1:08 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1064763|https://bugzilla.redhat.com/show_bug.cgi?id=1064763] from POST to MODIFIED,14/May/15 7:15 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1064763|https://bugzilla.redhat.com/show_bug.cgi?id=1064763] from MODIFIED to ON_QA,15/May/15 4:41 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1064763|https://bugzilla.redhat.com/show_bug.cgi?id=1064763] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Auto generated module index problems,WFCORE-658,12568897,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,20/Apr/15 7:09 PM,21/Apr/15 9:52 PM,29/Nov/16 3:54 PM,21/Apr/15 9:52 PM,,,,,,,1.0.0.Beta5,,,,,,,0,,,,,,"- indexing errors are not ignored
- it attempts to index all resources, not just .class files",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/633,,,,,,0.0,0.0,,1|hzvywn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI embedded server does not always clean up properly,WFCORE-657,12568870,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,20/Apr/15 12:38 PM,08/May/15 4:26 PM,29/Nov/16 3:54 PM,08/May/15 4:26 PM,1.0.0.Beta1,,,,,,1.0.0.CR2,,CLI,,,,,0,,,,,,"While looking at some other test issues I noticed test logging that indicates that the server embedded in the CLI seems to not always be cleaning up properly, resulting in MSC leaving mbeans installed and subsequent mbean registration errors when the next attempt to launch happens.

Here's an example from a server.log; my impression is one test method attempts to create a server with an invalid --empty-config param, and when that fails the appropriate cleanup doesn't happen.

{code}
2015-04-20 11:27:44,020 ERROR [org.jboss.msc.service.fail] (MSC service thread 17-1) MSC000001: Failed to start service jboss.as.server-controller: org.jboss.msc.service.StartException in service jboss.as.server-controller: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
Caused by: java.lang.IllegalStateException: WFLYCTL0389: Could not create an empty configuration at file /Users/bstansberry/dev/wildfly/wildfly-core/testsuite/manualmode/target/wildfly-core/standalone/configuration/standalone-cli.xml as there is an existing non-empty configuration there
	at org.jboss.as.controller.persistence.ConfigurationFile.getBootFile(ConfigurationFile.java:242)
	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.<init>(BackupXmlConfigurationPersister.java:70)
	at org.jboss.as.server.Bootstrap$Configuration$1.createConfigurationPersister(Bootstrap.java:178)
	at org.jboss.as.server.ServerService.start(ServerService.java:241)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)
	... 3 more

2015-04-20 11:27:44,031 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.2.Final
2015-04-20 11:27:44,032 ERROR [org.jboss.msc] (main) MSC000010: Failed to register MBean with MBeanServer: javax.management.InstanceAlreadyExistsException: jboss.msc:type=container,name=jboss-as
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.jboss.msc.service.ServiceContainerImpl.<init>(ServiceContainerImpl.java:372)
	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:266)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:198)
	at org.jboss.as.server.BootstrapImpl$ShutdownHook.access$100(BootstrapImpl.java:188)
	at org.jboss.as.server.BootstrapImpl.<init>(BootstrapImpl.java:62)
	at org.jboss.as.server.Bootstrap$Factory.newInstance(Bootstrap.java:243)
	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:280)
	at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.wildfly.core.embedded.StandaloneServerIndirection.invokeOnServer(StandaloneServerIndirection.java:70)
	at org.wildfly.core.embedded.StandaloneServerIndirection.start(StandaloneServerIndirection.java:55)
	at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:201)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:676)
	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:163)
	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:177)
	at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.stdoutTest(CLIEmbedServerTestCase.java:219)
	at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.testStdOutEcho(CLIEmbedServerTestCase.java:199)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/682,https://github.com/wildfly/wildfly-core/pull/683,,,,,0.0,0.0,,1|hzvyqn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HttpManagement interface json.pretty=1 fails,WFCORE-653,12568779,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,19/Apr/15 7:05 AM,21/Apr/15 11:22 PM,29/Nov/16 3:54 PM,21/Apr/15 11:22 PM,,,,,,,1.0.0.Beta5,,Domain Management,,,,,0,,,,,,"*Don't work on this*
(This is a deliberate regression of https://issues.jboss.org/browse/WFLY-3371 which will be introduced for a few hours on Tuesday 21st April 2015, so I have something to fix during a JBug demo)

When attempting to call e.g. http://localhost:9990/management/subsystem/jmx?json.pretty=1

an IllegalStateException happens. Debugging shows this to happen on the following line of DomainApiHandler
{code}
operationParameterBuilder.pretty(dmr.hasDefined(""json.pretty"") && dmr.get(""json.pretty"").asBoolean());
{code}
The dmr access needs to take into account that the parameter is not necessarily a boolen.",,,,,,,,,,,,,,,,,,,,,,,,,,,20/Apr/15 11:56 AM;kabirkhan;HttpMgmtPrettyTestCase.java;https://issues.jboss.org/secure/attachment/12389009/HttpMgmtPrettyTestCase.java,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,1.0,,1|hzvy7r:,9223372036854775807,,,,,,,,,,,"20/Apr/15 11:57 AM;kabirkhan;Fix is 
{code}
            boolean pretty = false;
            if (dmr.hasDefined(JSON_PRETTY)) {
                String jsonPretty = dmr.get(JSON_PRETTY).asString();
                pretty = ""true"".equalsIgnoreCase(jsonPretty) || ""1"".equals(jsonPretty);

            }
            operationParameterBuilder.pretty(pretty);
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,
standalone.sh --debug flag swallows next argument if no port provided,WFCORE-652,12568754,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Duplicate Issue,,briehman,briehman,17/Apr/15 2:53 PM,09/Jun/15 9:15 AM,29/Nov/16 3:54 PM,09/Jun/15 9:15 AM,,,,,,,,,Scripts,,,,,0,,,,,,"When passing the {{--debug}} flag to the {{standalone.sh}} script, it will swallow the next argument if no port is provided. This occurs because the end of the argument processing loop performs a shift, but a debug flag with no port should not be shifted since the next argument is yet to be processed.

This can be alleviated by adding a dummy variable to the positional parameters that will be {{shift}}ed off.",,,,,,,,,,,,,,,,,,,,WFCORE-659,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/629,,,,,,0.0,1.0,,1|hzvy27:,9223372036854775807,,,,"1) Start the server using the following command {code}standalone.sh --debug  --server-config=standalone-full.xml{code}
2) Note that it starts up in standalone mode and not full. This is because the {{--server-config}} argument was lost.",,,,,,,09/Jun/15 9:15 AM;briehman;Fixed in linked issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
jboss-cli needs to support using PKCS11 (including FIPS mode) keystores/truststores,WFCORE-644,12568653,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,dlofthouse,dehort,dehort,16/Apr/15 5:06 PM,24/Nov/16 5:13 AM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,0,,,,,,"The cli's SSL configuration should be expanded to support using PKCS11 keystores/truststores.  Currently it does not appear to be possible to configure the keystore/truststore type in the jboss-cli.xml file.

This is problematic when the JVM is running in FIPS mode.

The cli throws the following exception on startup:

$ ./bin/jboss-cli.sh 
org.jboss.as.cli.CliInitializationException: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used
        at org.jboss.as.cli.impl.CommandContextImpl.initSSLContext(CommandContextImpl.java:541)
        at org.jboss.as.cli.impl.CommandContextImpl.<init>(CommandContextImpl.java:291)
        at org.jboss.as.cli.impl.CommandContextFactoryImpl.newCommandContext(CommandContextFactoryImpl.java:76)
        at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:294)
        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:277)
        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.jboss.modules.Module.run(Module.java:312)
        at org.jboss.modules.Main.main(Main.java:460)
Caused by: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used
        at sun.security.ssl.SSLContextImpl.chooseTrustManager(SSLContextImpl.java:126)
        at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:89)
        at javax.net.ssl.SSLContext.init(SSLContext.java:283)
        at org.jboss.as.cli.impl.CommandContextImpl.initSSLContext(CommandContextImpl.java:537)
        ... 11 more


It is possible to workaround the issue by setting the javax.net.ssl.keyStore / javax.net.ssl.trustStore system properties in the bin/jboss-cli.sh file:

JAVA_OPTS=""$JAVA_OPTS -Djavax.net.ssl.trustStore=NONE -Djavax.net.ssl.trustStoreType=PKCS11""                                                                          
JAVA_OPTS=""$JAVA_OPTS -Djavax.net.ssl.keyStore=NONE -Djavax.net.ssl.keyStoreType=PKCS11 -Djavax.net.ssl.keyStorePassword=imapassword""  
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1212634,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzvxhz:,9223372036854775807,,,,,,,,,,,23/Apr/15 12:53 AM;jira-bugzilla-migration;Joe Wertz <ewertz@redhat.com> changed the Status of [bug 1212634|https://bugzilla.redhat.com/show_bug.cgi?id=1212634] from NEW to ASSIGNED,15/Dec/15 11:16 AM;dlofthouse;From the WildFly Core perspective I would suggest leaving this one as it will in the future be picked up with Elytron configuration.,01/Jun/16 10:25 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1212634|https://bugzilla.redhat.com/show_bug.cgi?id=1212634] from ASSIGNED to NEW,23/Sep/16 12:39 PM;dlofthouse;[~aloubyansky] FYI I have taken this one as the Elytron changes make Elytron client configuration usable within the CLI and there we can perform advanced SSL configuration to cover this kind of scenario.,24/Nov/16 5:13 AM;jira-bugzilla-migration;Peter Palaga <ppalaga@redhat.com> changed the Status of [bug 1212634|https://bugzilla.redhat.com/show_bug.cgi?id=1212634] from NEW to CLOSED,,,,,,,,,,,,,,,,,,,,,,
"On Windows, setting the JAVA_OPTS variable is not",WFCORE-643,12568519,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Out of Date,,tom.kelley.optum,tom.kelley.optum,15/Apr/15 1:07 PM,28/Oct/16 9:36 AM,29/Nov/16 3:54 PM,28/Oct/16 9:36 AM,1.0.0.Beta4,,,,,,2.2.0.Final,,Scripts,,,,,0,,,,,,"{warn} This issue was copy/pasted from a github issue [here|https://github.com/wildfly/wildfly/issues/7352]. I apologize for 1) the issue duplication, 2) the length of the issue, 3) any poor communication that the transcription caused. {warn}

My company uses JBoss AS, and I have a copy on my local machine. In setting it up, I wrote a small script that lives in the bin directory and looks something like this:

{code}
@rem Delete current log file
del /F /Q ..\standalone\log\server.log
@rem Set Java Opts because I want to
set JAVA_OPTS=""-XX:+TieredCompilation -XX:+UseCompressedOops -Dprogram.name=standalone.bat -Xms1303M -Xmx1303M -XX:MaxPermSize=256M -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -agentlib:jdwp=transport=dt_socket,server=y,suspend=n""
@rem Set the new Java Home
set JAVA_HOME=C:\bin\java\jdk8_u40_64\jre
@rem Run Jboss
standalone.bat -c=standalone-full.xml --debug
{code}

I noticed when I was starting the server that the JAVA_OPTS in the debug text were not what I was passing in. I figured I could get to the bottom of what was going on, so I started digging in. My investigation led me to standalone.conf.bat, which looks like this:

{code}
rem Uncomment the following line to disable manipulation of JAVA_OPTS (JVM parameters)
rem set PRESERVE_JAVA_OPTS=true

if not ""x%JAVA_OPTS%"" == ""x"" (
  echo ""JAVA_OPTS already set in environment; overriding default settings with values: %JAVA_OPTS%""
  goto JAVA_OPTS_SET
)
{code}

This is very interesting. This snippet of code appears to be a bug. As someone who has worked with batch files, I believe that the correct code should look like this:

{code}
rem Uncomment the following line to disable manipulation of JAVA_OPTS (JVM parameters)
rem set PRESERVE_JAVA_OPTS=true

if not ""x""%JAVA_OPTS% == ""x"" (
  echo ""JAVA_OPTS already set in environment; overriding default settings with values: %JAVA_OPTS%""
  goto JAVA_OPTS_SET
)
{code}

You must be thinking, ""if you know how to do this, why don't you just make the change yourself? It seems trivial."" I would, but I'm not able to find the batch file in the source tree. It appears (to me) that the batch file is generated, and I don't know what to start looking for in order to fix this issue on my own.

As such, I've created a test batch file (meant to be run on Windows) that I've attached to this Issue. When the issue is fixed, it should output something like this:

{code}
Calling ""C:\bin\wildfly\src\wildfly\build\target\wildfly-9.0.0.CR1-SNAPSHOT\bin\standalone.conf.bat""
""JAVA_OPTS already set in environment; overriding default settings with values: ""Look at me. LOOK AT ME. I am the JAVA_OPTS now.""""
Setting JAVA property to ""C:\bin\java\jdk8_u40_64\jre\bin\java""
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: ""C:\bin\wildfly\src\wildfly\build\target\wildfly-9.0.0.CR1-SNAPSHOT""

  JAVA: ""C:\bin\java\jdk8_u40_64\jre\bin\java""

  JAVA_OPTS: ""-Dprogram.name=standalone.bat ""Look at me. LOOK AT ME. I am the JAVA_OPTS now.""""

===============================================================================

Error: Could not find or load main class Look at me. LOOK AT ME. I am the JAVA_OPTS now.
{code}

The batch file can be acquired [here|https://cloud.githubusercontent.com/assets/2186874/7147925/844bc00c-e2b3-11e4-8320-571fb732bc9f.jpg], just save the link as a batch file, or save it and change the extension (the same way that we get around email filters that don't let us send *.exe's). The way that I ran this was to put the batch file at the root of the Wildfly directory and then call it using window's CMD. The test case does several things:

1. Maven clean
2. Call build.bat
3. Set a JAVA_OPTS system variable
4. Call the standalone.bat in the new version of Wildfly that was created in step 2 (as long as the target dir is still wildfly-9.0.0.CR1-SNAPSHOT).

I would love to take lead on fixing this, but I'm not sure where to start. If someone could give me a point in the right direction, that would be great. Thanks.","Windows 7 x64, JRE was bundled with JDK 8 u40 x64.
Hardware specs:
CPU: Intel Core i7-3720QM CPU @ 2.60 GHz
RAM: 16.0 GB
GPU: NVIDIA Quadro K1000M
Others upon request.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzvwpb:,9223372036854775807,,,,"1. Download batch file from [here|https://cloud.githubusercontent.com/assets/2186874/7147925/844bc00c-e2b3-11e4-8320-571fb732bc9f.jpg]
2. Rename batch file to something logical (and something that ends in *.bat)
3. Move batch file to root of wildfly source tree
4. Run batch file",,,,,,,"15/Apr/15 2:51 PM;ctomc;since wildfly 9, codebase was split into two repos, wildfly-core and wildfly.
what you are looking for is in core, see: https://github.com/wildfly/wildfly-core/tree/master/core-feature-pack/src/main/resources/content/bin","15/Apr/15 3:18 PM;tom.kelley.optum;Thanks [~ctomc]! I'll get right on that. Unfortunately, I'm going to have to do this later tonight, since I'm at work right now, and work isn't 100% behind me donating my time while I'm on their clock. Would you be interested in code reviewing after my changes?","15/Apr/15 3:46 PM;ctomc;Sure, just send pull request whenever you manage to do so. I will take a look at the changes.
Tnx in advance.",20/Oct/15 5:29 AM;ctomc;I am tempted to close this issue as we now have fully working powershell scripts that improve upon batch ones.,,,,,,,,,,,,,,,,,,,,,,,
ReadOperationDescriptionHandler doesn't handle multi-process wildcard addresses nicely,WFCORE-642,12568410,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,14/Apr/15 1:14 PM,01/May/15 11:41 AM,29/Nov/16 3:54 PM,01/May/15 11:41 AM,,,,,,,1.0.0.CR1,,Domain Management,,,,,0,,,,,,"Getting WFCORE-282 to work surfaces a problem with :read-operation-description handling, which will get invoked in the background by the CLI whenever the user inputs a wildcard read op.

Problem is ReadOperationDescriptionHandler.getDescribedOp, which attempts to deal with cases where there is no resource registration for the target address. It checks if the request is for a wildcard address, and if so it sees if there are concrete registrations for that address, and if so whether they all use the same description. If yes, it provides the description.

This is broken in a couple ways:

1) It assumes the wildcard applies to the last element in the address, which may not be the case with ops that support wildcard addressing schemes.

2) It looks vulnerable to problems with proxy resources, particularly the /host=* case on the DC where there can be a normal ConcreteResourceRegistration for the local host=master child, and then ProxyControllerRegistration instances for the various host=slave-x registrations. I suspect this might lead to false results.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/623,,,,,,0.0,1.0,,1|hzvw33:,9223372036854775807,,,,,,,,,,,"14/Apr/15 2:58 PM;brian.stansberry;Example of an issue caused by this:

https://gist.github.com/heiko-braun/62097308030d0d4ff423",,,,,,,,,,,,,,,,,,,,,,,,,,
"The discovery-option ""module"" attribute should support undefined values",WFCORE-641,12568321,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,13/Apr/15 2:27 PM,21/Apr/15 9:54 PM,29/Nov/16 3:54 PM,21/Apr/15 9:54 PM,,,,,,,1.0.0.Beta5,,Domain Management,,,,,0,,,,,,"The xsd says the following for the discovery-optionType 'module' attribute:

{code}
        <xs:attribute name=""module"" type=""xs:string"" use=""optional"">
            <xs:annotation>
                <xs:documentation>
                    The module from which the DiscoveryOption implementation should be loaded. If not provided,
                    the DiscoveryOption implementation must be available from the Host Controller's own module.
                </xs:documentation>
            </xs:annotation>
        </xs:attribute>
{code}

But the MODULE attribute definition does not allow undefined.

But still, DiscoveryOptionAddHandler is coded as if undefined is allowed, but poorly so as it would pass an illegal null into ModuleIdentifier.fromString.

I like the behavior described in the xsd and think the AD and the handlers should be corrected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/618,,,,,,0.0,0.0,,1|hzvvkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Bad permissions on properties files when using add-user.bat for results in ""JBAS015234: No mgmt-groups.properties files found""",WFCORE-640,12518197,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,rgaisford,johnl4,johnl4,06/Nov/13 9:58 PM,21/Apr/15 11:19 AM,29/Nov/16 3:54 PM,21/Apr/15 11:19 AM,,,,,,,1.0.0.Beta5,,Scripts,,,,,1,,,,,,"Just getting started w/Wildfly after a long absence from Java.  Fresh download, trying to hit admin console, got instructed to use add-user to add an admin user.

c:\usr\local\wildfly-8.0.0.Beta1\bin>.\add-user.bat

What type of user do you wish to add?
 a) Management User (mgmt-users.properties)
 b) Application User (application-users.properties)
(a): a

 * Error *
JBAS015234: No mgmt-groups.properties files found.

Press any key to continue . . .

c:\usr\local\wildfly-8.0.0.Beta1\bin>echo %JBOSS_HOME%
C:\usr\local\wildfly-8.0.0.Beta1

c:\usr\local\wildfly-8.0.0.Beta1\bin>echo %JAVA_HOME%
C:\java\jdk1.7.0_45

c:\usr\local\wildfly-8.0.0.Beta1\bin>echo %M2_HOME%
C:\usr\local\Maven\3.1.1

c:\usr\local\wildfly-8.0.0.Beta1\bin>mvn -version
Apache Maven 3.1.1 (0728685237757ffbf44136acec0402957f723d9a; 2013-09-17 11:22:2
2-0400)
Maven home: C:\usr\local\Maven\3.1.1
Java version: 1.7.0_45, vendor: Oracle Corporation
Java home: C:\java\jdk1.7.0_45\jre
Default locale: en_US, platform encoding: Cp1252
OS name: ""windows 7"", version: ""6.1"", arch: ""x86"", family: ""windows""
c:\usr\local\wildfly-8.0.0.Beta1\bin>","Windows 7, 32-bit, jdk1.7.0_45",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/626,,,,,,0.0,12.0,,1|hzkobz:,180910,,,,,,,,,,,"06/Nov/13 11:06 PM;johnl4;Oy.

Ok, user error.

c:\usr\local isn't accessible to mere mortal users on my machine, you have to be admin (I have kids that use this machine).

My DOS cmd window wasn't running as admin.  (Yay, good habits.)

When I ran it as admin, I had no problems.","07/Nov/13 5:50 AM;dlofthouse;Going to keep this open for now, will review if we have an Java 7 options to detect if this is a missing file or a permissions issue and log a more appropriate error if we can.","26/Sep/14 11:57 PM;rameshkumar.junnuru;I am also not able to add user even i ran that as administrator

D:\jboss-as-7.1.0.Final\bin>add-user.bat
The filename, directory name, or volume label syntax is incorrect.
Press any key to continue . . .

D:\jboss-as-7.1.0.Final\bin>set J
JAVA_HOME=D:\Java\jdk1.7.0_25\bin;D:\Java\jdk1.7.0_25\lib;.;
JBOSS_HOME=D:\jboss-as-7.1.0.Final

D:\jboss-as-7.1.0.Final\bin>

Please let me know how i need to fix the issue.","29/Sep/14 4:14 AM;dlofthouse;Please take your question to the forums, this issue only remains open so we can review if we can detect permissions issues on the files.",02/Dec/14 6:28 AM;vish212950;Did you get an answer for this? I also ran into the same problem even though I am running as an administrator or using sudo to run the add-user command. ,02/Dec/14 8:22 AM;dlofthouse;Please use the forums for your questions not Jira.,"27/Mar/15 6:53 AM;dlofthouse;I have set this Jira to 'Awaiting Volunteers', should be quite a nice issue for someone who wants to contribute to WildFly to look into.

This Jira issue is open for one reason: -
  For an engineer to investigate if there is anything that can be done in Java 7 to detect permissions problems on these files and if so report a more meaningful error message if this is possible.

This may not actually be possible is file system permissions may hide the presence of the files making them appear missing.

For any other cases where this error is experienced causes are most likely to be one of the following: -
 - Some kind of PATH issue in relation to the location of the application server and the working dir.
 - The files really don't exist.
 - A permissions issue where the user running the script can not access the files due to permissions problems.

For diagnostics of why you experience the error please take the discussion to the forums.
","10/Apr/15 8:24 PM;rgaisford;I'm a first time contributor/developer, I'm interested in looking into this issue.","13/Apr/15 6:21 AM;dlofthouse;[~rgaisford] Sounds good and you are very welcome to take a look.  As I mention above it could be tricky as permissions can make a file or folder appear missing even though there but not accessible but certainly open to someone exploring the possibilities.

I am going to move this Jira issue to the WFCORE project in Jira as that is technically where the code lives: -

https://github.com/wildfly/wildfly-core

The code for the add user utility is under domain management and the entry point is a class called 'org.jboss.as.domain.management.security.adduser.AddUser', if you have not already seen it the following page should give you some starting points to get building a server  https://developer.jboss.org/wiki/HackingOnWildFly (Although do note it is WildFly Core you need to be working on not WildFly)

One final point I would only recommend working on this if you plan to work on it soon, that way it can reach WildFly 9 - for WildFly 10 there is going to be a lot of rework in this area possibly making a lot of this utility redundant.
","13/Apr/15 11:43 AM;rgaisford;Darran,

Regarding the timeliness, understood.  I spent a good deal of time over the weekend researching the issue, most notably trying to get my head around Windows file permissions.  I feel like I have a good handle on the permissions now and a reasonable Windows 7 test environment.  Regarding JDK7, I believe there were updates [1] that may allow AddUser code to check some permissions up front.

In order to limit the scope of the analysis/development I'm going to make some assumptions:

i) Will assume end user installed WildFly directory structure matches that generated by the WildFly build process
ii) Will assume end user file permissions do not prevent user from executing add-user.bat

Will do my best to get you updates (assuming there are some) quickly.

[1] http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6203387",14/Apr/15 4:57 PM;rgaisford;I'm code complete on this issue and have completed my developer level testing.  Looking to start on the unit tests.  I posted an email to wildfly-dev regarding the units test to be written...  Waiting for some feedback before proceeding.,"16/Apr/15 1:00 PM;rgaisford;I've completed the unit tests and coding, I've created a pull request via GitHub.",,,,,,,,,,,,,,,
ManagementPermissionAuthorizer is limited to the standard roles for its authorizeJmxOperation impl,WFCORE-639,12568183,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,10/Apr/15 12:29 PM,23/Jun/15 7:24 AM,29/Nov/16 3:54 PM,22/May/15 1:03 PM,,,,,,,2.0.0.Alpha3,,Domain Management,,,,,0,,,,,,"ManagementPermissionAuthorizer.authorizeJmxOperation uses hard coded decision making based on the standard 7 roles. This is inflexible and specifically doesn't allow scoped roles to function properly.

I believe the JmxPermissionFactory interface needs to be redone to use permissions instead of role names. It should have an API more like org.jboss.as.controller.access.permission.PermissionFactory, with getUserPermissions and getRequiredPermissions. Something like 

PermissionCollection getUserPermissions(Caller caller, Environment callEnvironment, JmxAction action)

PermissionCollection getRequiredPermissions(JmxAction action);

Then ManagementPermissionAuthorizer.authorizeJmxOperation does a permission match check similar to what it does for management resource permissions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1230394,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/662,,,,,,0.0,5.0,,1|hzvurj:,9223372036854775807,,,,,,,,,,,"15/Apr/15 6:46 PM;brian.stansberry;Emmanuel, we don't need to do this as part of this fix, but since we're changing APIs anyway it's worth considering. Should the JmxPermissionFactory interface go away? The new  getUserPermissions and getRequiredPermissions methods can go in the PermissionFactory interface. The existing JmxPermissionFactory.getUserRoles method will no longer be used. And the JmxPermissionFactory.isNonFacadeMBeansSensitive method is an odd fit and doesn't really belong in a ""permission factory"" interface.",10/Jun/15 3:50 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1230394|https://bugzilla.redhat.com/show_bug.cgi?id=1230394] from NEW to POST,15/Jun/15 5:19 PM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1230394|https://bugzilla.redhat.com/show_bug.cgi?id=1230394] from POST to MODIFIED,18/Jun/15 11:38 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1230394|https://bugzilla.redhat.com/show_bug.cgi?id=1230394] from MODIFIED to ON_QA,23/Jun/15 7:24 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1230394|https://bugzilla.redhat.com/show_bug.cgi?id=1230394] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
deployment runtime-name mismatch between content repo and server-group and logs,WFCORE-638,12567393,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,iankent,iankent,31/Mar/15 12:49 PM,10/Apr/15 3:48 PM,29/Nov/16 3:54 PM,10/Apr/15 3:48 PM,1.0.0.Beta3,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"We are continuously deploying web applications (wars) into our wildfly domain as part of our continuous deployment driven by Bamboo.
Each time an application build succeeds it will trigger a deployment to our wildfly domain.

If this is the first deployment we run this command.

{noformat}
jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command=""deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\
SHOT-b1.war --server-groups=A
{noformat}

For subsequent deployments we force a redeploy over existing deployment.

{noformat}
jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command=""deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\
SHOT-b2.war --force
jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command=""deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\
SHOT-b3.war --force
jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command=""deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\
SHOT-b4.war --force
etc....
{noformat}

Since upgrading to WildFly 8.2.0 we see a strange behaviour in the domain management web console (http://somehost:9990/console/App.html#domain-deployments).
The application runtime name in content repository is not the same as what is shown in the server group.

I will attach screenshots for an app named apollo.war. You will see from the screenshots that the content repository shows runtime name=apollo-0.1.12-SNAPSHOT-11\
03.war, but the
server group shows runtime-name=apollo-0.1.12-SNAPSHOT-1045.war. (The last number in runtime-name is the build number from bamboo)

The server.logs from wildfly show ""Deployed ""apollo.war"" (runtime-name : ""apollo-0.1.12-SNAPSHOT-1045.war"")""
However, we can tell by app capabilities that what is really deployed is apollo-0.1.12-SNAPSHOT-1103.war.

We are totally confused by this discrepency.",,,,,,,,,,,,,,,,,,,,,,,,,,,31/Mar/15 12:51 PM;iankent;Screen Shot 2015-03-31 at 12.49.20 PM.png;https://issues.jboss.org/secure/attachment/12388653/Screen+Shot+2015-03-31+at+12.49.20+PM.png,31/Mar/15 12:51 PM;iankent;Screen Shot 2015-03-31 at 12.49.45 PM.png;https://issues.jboss.org/secure/attachment/12388654/Screen+Shot+2015-03-31+at+12.49.45+PM.png,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/615,,,,,,2.0,1.0,,1|hzvq47:,9223372036854775807,,,,,,,,,,,"07/Apr/15 5:23 PM;brian.stansberry;I'm assigning this to the Domain Management component under the assumption that the console is just displaying what the server side management model provides.

Emmanuel, if this is still an issue with core master, please move this over to WFCORE JIRA.",,,,,,,,,,,,,,,,,,,,,,,,,,
Require placeholder resources for non-proxy runtime resources,WFCORE-635,12568082,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,09/Apr/15 6:08 PM,21/Apr/15 10:35 AM,29/Nov/16 3:54 PM,21/Apr/15 10:35 AM,,,,,,,1.0.0.Beta5,,Domain Management,,,,,0,,,,,,"ReadResourceHandler has a nullSafeReadResource method that returns a PlaceholderResource for any address whose MRR says it's runtime:

https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/ReadResourceHandler.java#L435

That basically allows devs to not bother creating runtime resources, but breaks things where there's an assumption that no resource object will be present when no actual resource exists. See discussion at https://github.com/wildfly/wildfly/pull/6607

This JIRA is to get rid of that behavior, restricting it to, at most, proxy resource cases.

See also WFCORE-580 which is a similar problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/614,,,,,,0.0,0.0,,1|hzvu5z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failures in SSLMasterSlaveOneWayTestCase,WFCORE-634,12568070,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,okotek,brian.stansberry,brian.stansberry,09/Apr/15 3:11 PM,10/Apr/15 4:22 PM,29/Nov/16 3:54 PM,10/Apr/15 4:22 PM,,,,,,,1.0.0.Beta4,,Domain Management,Test Suite,,,,0,,,,,,"This test is failing intermittently. I'm going to @Ignore it.

See http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WildFlyCore_PullRequest&testNameId=-2645804855533879466&tab=testDetails

Example failure:

{code}
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139)
    at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:155)
    at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:284)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)
    at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)
    at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)
    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)
    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
    at org.jboss.as.test.integration.domain.AbstractSSLMasterSlaveTestCase.executeOverHttp(AbstractSSLMasterSlaveTestCase.java:169)
    at org.jboss.as.test.integration.domain.AbstractSSLMasterSlaveTestCase.isHostStateRunning(AbstractSSLMasterSlaveTestCase.java:144)
    at org.jboss.as.test.integration.domain.AbstractSSLMasterSlaveTestCase.checkHostStatusOnMaster(AbstractSSLMasterSlaveTestCase.java:112)
    at org.jboss.as.test.integration.domain.AbstractSSLMasterSlaveTestCase.setOriginMasterManagementNativeInterfaceAndCheck(AbstractSSLMasterSlaveTestCase.java:96)
    at org.jboss.as.test.integration.domain.SSLMasterSlaveOneWayTestCase.setOriginMasterManagementNativeInterface(SSLMasterSlaveOneWayTestCase.java:100)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/611,,,,,,0.0,0.0,,1|hzvu3b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Erroneous name attribute on root-logger after add-handler operation ,WFCORE-633,12496729,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Won't Fix,jamezp,jamezp,jamezp,17/Jul/13 4:47 PM,09/Apr/15 7:18 PM,29/Nov/16 3:54 PM,09/Apr/15 7:18 PM,,,,,,,,,Logging,,,,,0,,,,,,"Execution of the {{add-handler}} operation adds a name attribute with the handlers name to the root-logger model.

{code}
""root-logger"" => {""ROOT"" => {
            ""filter"" => undefined,
            ""filter-spec"" => undefined,
            ""handlers"" => [
                ""FILE"",
                ""CONSOLE""
            ],
            ""level"" => ""INFO"",
            ""name"" => ""CONSOLE""
        }}

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1017881,https://bugzilla.redhat.com/show_bug.cgi?id=1032627,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly/pull/5689,,,,,,0.0,19.0,,1|hzhq93:,163851,,,,,,,,,,,"29/Oct/13 12:34 PM;jamezp;The name is added in the {{validateAndSet}} which should be assigning to the model. This should likely happen on a new model and the runtime needs a way to get the correct handler name to set or just use the {{setHandlers()}}, but needs to also include any previous handlers.

{code:java}
    static final OperationStepHandler ADD_HANDLER = new LoggerUpdateOperationStepHandler() {

        @Override
        public void updateModel(final ModelNode operation, final ModelNode model) throws OperationFailedException {
            HANDLER_NAME.validateAndSet(operation, model);
            model.get(HANDLERS.getName()).add(operation.get(HANDLER_NAME.getName()));
        }

        @Override
        public void performRuntime(final OperationContext context, final ModelNode operation, final LoggerConfiguration configuration, final String name, final ModelNode model) throws OperationFailedException {
            // Get the handler name
            final String handlerName = HANDLER_NAME.resolveModelAttribute(context, model).asString();
            final String loggerName = getLogManagerLoggerName(name);
            if (configuration.getHandlerNames().contains(handlerName)) {
                throw createOperationFailure(LoggingMessages.MESSAGES.handlerAlreadyDefined(handlerName));
            }
            LoggingLogger.ROOT_LOGGER.tracef(""Adding handler '%s' to logger '%s' at '%s'"", handlerName, getLogManagerLoggerName(loggerName), LoggingOperations.getAddress(operation));
            configuration.addHandlerName(handlerName);
        }
    };
{code}","29/Oct/13 12:45 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> made a comment on [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881]

I forgot to add. I think we should delay from EAP 6.2 because the workaround is easy enough. The error is only going to occur in composite operations when using multiple add-handler operations to the same logger. 

If we need to get this into 6.2 it is possible, but at this stage I'm not sure it's worth the change for the simple workaround. Also I doubt this use-case, adding handlers to the same logger in a composite operation, is used all that often. This same issue is present in EAP 6.1.x and it's the first time I've seen it.","29/Oct/13 2:03 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> made a comment on [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881]

A selected the incorrect flag, I should have nack'd this one. I apologize for that.","20/Nov/13 7:19 AM;jira-bugzilla-migration;rafael.ruiz@redhat.com made a comment on [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881]

I have same error with EAP 6.1.1. Regardless which category you add. Putting it outside batch it works.","20/Nov/13 8:52 AM;jira-bugzilla-migration;Rafael Ruiz <rafael.ruiz@redhat.com> made a comment on [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627]

+++ This bug was initially created as a clone of Bug #1017881 +++

Description of problem:

Any attempt to run /subsystem=logging/logger=org.jboss.as.quickstarts.logging:assign-handler(xxx on CLI under the batch gives the following error:

{""JBAS014653: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-2"" => ""JBAS011536: Handler XXXX is already assigned.""}}

This error doens't happen if the commands are not under a batch transaction


Steps to Reproduce:
1. Checkout https://github.com/jboss-developer/jboss-eap-quickstarts/tree/master/logging
2. Execute JBOSS_HOME/bin/jboss-cli.sh --connect --file=configure-logging.cli


Actual results:
{""JBAS014653: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-2"" => ""JBAS011536: Handler FATAL_QS_ASYNC is already assigned.""}}

Expected results:
The batch executed successfully


Additional info:

--- Additional comment from James Perkins on 2013-10-29 12:38:10 EDT ---

I'm giving this a devel_ack+, but I don't think we should target EAP 6.2 for the fix. I can see what the issue is, but it needs to be thought through a bit. We can work around it by using the handlers property.

Example:
/subsystem=logging/logger=org.jboss.as.quickstarts.logging:add(level=TRACE, handlers=[TRACE_QS_ASYNC,DEBUG_QS_ASYNC,INFO_QS_ASYNC,WARN_QS_ASYNC,ERROR_QS_ASYNC,FATAL_QS_ASYNC])

One additional note about the scripts, the :reload isn't needed. All logging operations, minus a write-attribute to the asyn-handler's queue-length, are applied at runtime.

--- Additional comment from James Perkins on 2013-10-29 12:45:44 EDT ---

I forgot to add. I think we should delay from EAP 6.2 because the workaround is easy enough. The error is only going to occur in composite operations when using multiple add-handler operations to the same logger. 

If we need to get this into 6.2 it is possible, but at this stage I'm not sure it's worth the change for the simple workaround. Also I doubt this use-case, adding handlers to the same logger in a composite operation, is used all that often. This same issue is present in EAP 6.1.x and it's the first time I've seen it.

--- Additional comment from James Perkins on 2013-10-29 14:03:39 EDT ---

A selected the incorrect flag, I should have nack'd this one. I apologize for that.

--- Additional comment from Rafael Ruiz on 2013-11-20 07:19:06 EST ---

I have same error with EAP 6.1.1. Regardless which category you add. Putting it outside batch it works.",08/Jan/14 7:48 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from NEW to POST,08/Jan/14 7:59 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627] from NEW to POST,09/Jan/14 5:30 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from POST to MODIFIED,10/Jan/14 8:59 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627] from POST to MODIFIED,21/Jan/14 6:04 PM;jamezp;Merged,11/Feb/14 6:54 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from MODIFIED to ON_QA,24/Feb/14 9:25 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from ON_QA to VERIFIED,03/Mar/14 9:41 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627] from MODIFIED to ON_QA,04/Mar/14 3:22 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627] from ON_QA to VERIFIED,02/Jun/14 8:49 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1032627|https://bugzilla.redhat.com/show_bug.cgi?id=1032627] from VERIFIED to CLOSED,28/Jun/14 11:44 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from VERIFIED to CLOSED,21/Nov/14 2:24 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from CLOSED to ASSIGNED,25/Nov/14 12:31 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1017881|https://bugzilla.redhat.com/show_bug.cgi?id=1017881] from ASSIGNED to CLOSED,09/Apr/15 7:18 PM;jamezp;See the comments on https://bugzilla.redhat.com/show_bug.cgi?id=1017881#c12 for the reason this won't be fixed.,,,,,,,,
Subsystem deployment undeployed at startup,WFCORE-632,12567949,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,ssilvert,ssilvert,08/Apr/15 1:40 PM,29/Aug/16 10:38 AM,29/Nov/16 3:54 PM,10/Apr/15 3:47 PM,1.0.0.Beta3,1.0.0.Beta4,,,,,1.0.0.Beta4,,Domain Management,,,,,0,affects_elytron,,,,,"{noformat}
@BrianStansberry The ""mixed approach"" doesn't seem to work any more. https://developer.jboss.org/wiki/ExtendingAS7
@BrianStansberry I'm using this to deploy keycloak WAR from the subsystem.
@BrianStansberry As soon as the server is started, something is calling stopService() on the Keycloak WAR.
Tomaz Cerar
1:15 PM
@StanSilvert are you still working on AS7? https://docs.jboss.org/author/display/WFLY8/Extending+WildFly+8
Stan Silvert
1:16 PM
@ctomc No. this is WildFly 9. It still works on WildFly 8.
Tomaz Cerar
1:16 PM
ah the war deployment, that could be regression
Brian Stansberry
1:17 PM
@ctomc how so?
Stan Silvert
1:17 PM
FYI. I did a Thread.dumpStack() and got this:
13:11:35,173 ERROR [stderr] (MSC service thread 1-3) java.lang.Exception: Stack trace
13:11:35,173 ERROR [stderr] (MSC service thread 1-3) at java.lang.Thread.dumpStack(Thread.java:1329)
13:11:35,174 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.Host.unregisterDeployment(Host.java:168)
13:11:35,176 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.stopContext(UndertowDeploymentService.java:
113)
13:11:35,179 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.stop(UndertowDeploymentService.java:100)
13:11:35,181 ERROR [stderr] (MSC service thread 1-3) at org.jboss.msc.service.Serv
iceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:2056)
13:11:35,184 ERROR [stderr] (MSC service thread 1-3)    at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:2017)
13:11:35,186 ERROR [stderr] (MSC service thread 1-3)    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
13:11:35,188 ERROR [stderr] (MSC service thread 1-3)    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
13:11:35,190 ERROR [stderr] (MSC service thread 1-3)    at java.lang.Thread.run(Thread.java:745)
Hide full text
Tomaz Cerar
1:18 PM
@BrianStansberry just reffering that war deployment from subsystem should still work
1:19 PM
Jason Greene joined the room.
Tomaz Cerar
1:19 PM
@StanSilvert what happens? as that thread dump makes no sense
Stan Silvert
1:21 PM
http://pastebin.com/xQ2DNzEe
The WAR is simply undeployed as soon as WildFly finishes startup.
Brian Stansberry
1:22 PM
@StanSilvert can you give me a link to your code that's doing the deploy stuff?
Stan Silvert
1:22 PM
just a sec
Stan Silvert
1:24 PM
https://github.com/keycloak/keycloak/tree/master/integration
The code that creates the operation is https://github.com/keycloak/keycloak/blob/master/integration
AuthServerUtil ^^^
click on the second link
1:27 PM
Darran Lofthouse left the room.
Brian Stansberry
1:27 PM
@StanSilvert are you doing overlay stuff? I see some code there re: overlays
Stan Silvert
1:28 PM
Yes, but not in this instance.
Brian Stansberry
1:28 PM
ok. I'm asking just because that would add more complexity, better scope for some service dependency going missing, triggering stop
Stan Silvert
1:29 PM
For this simple case there are no overlays.
Brian Stansberry
1:29 PM
@StanSilvert interesting, your log looks like it's a true undeploy op, not just a service stop
Tomaz Cerar
1:30 PM
@BrianStansberry should we use 6.x.0 or 6.x.latest for tranformers testing?
Tomaz Cerar goes get some diner
Stan Silvert
1:30 PM
@BrianStansberry If that's the case then maybe some condition is triggering my own undeploy operation.
@BrianStansberry I'll look into that and see what I find.
Brian Stansberry
1:31 PM
@ctomc 6.x.0 is ok by me; chasing CPs is too much hassle
@StanSilvert note this:
13:11:35,294 INFO [org.jboss.as.server] (DeploymentScanner-threads - 1) WFLYSRV0009: Undeployed ""main-auth-server.war"" (runtime-name: ""main-auth-server.war"")
the thread -- DeploymentScanner-threads - 1
looks like your deployment is exposed to the scanner?
oh, here's a guess!
the scanner sees ""persistent"" => false and treats it as under scanner control
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1271673,https://bugzilla.redhat.com/show_bug.cgi?id=1336569,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/604,,,,,,0.0,11.0,,1|hzvtd3:,9223372036854775807,,,,,,,,,,,"08/Apr/15 2:15 PM;brian.stansberry;A fix for WFCORE-65 will likely fix WFCORE-632 as well. If in a deployment resource in the model we store a non-persistent ""owner"" attribute (doesn't need to be persisted) with a value of type LIST of PROPERTY, the scanner can pass in its own address when adding deployments, and use that to ignore unrelated deployments.",08/Apr/15 2:24 PM;ssilvert;OK.  Do you have an ETA on WFCORE-65?  Right now this is holding up Keycloak/Elytron integration.  Even a temporary patch that makes it work again would be very helpful.,08/Apr/15 3:02 PM;brian.stansberry;I might do it this week; if not next. It looks quite straightforward.,08/Apr/15 9:21 PM;brian.stansberry;https://github.com/bstansberry/wildfly-core/commits/WFCORE-65 has a fix for this. I haven't added any test cases but I believe it should correct the problem.,02/Dec/15 1:09 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from NEW to ASSIGNED,04/Dec/15 2:25 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from ASSIGNED to POST,28/Mar/16 5:23 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from MODIFIED to POST,05/Aug/16 1:47 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from POST to MODIFIED,05/Aug/16 1:48 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from MODIFIED to ON_QA,29/Aug/16 10:38 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1271673|https://bugzilla.redhat.com/show_bug.cgi?id=1271673] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Wildcard operation inside composite is missing address node,WFCORE-631,12567912,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,brian.stansberry,harald.pehl,harald.pehl,08/Apr/15 8:22 AM,13/Apr/15 9:40 AM,29/Nov/16 3:54 PM,13/Apr/15 5:09 AM,,,,,,,,,Domain Management,,,,,0,,,,,,"The result of a composite operation which contains a {{read-resource}} operation with wildcards is missing the {{address}} node. 

{code:title=WildFly 9|borderStyle=solid}
[domain@localhost:9990 /] batch
[domain@localhost:9990 / #] /server-group=*/deployment=*:read-resource
[domain@localhost:9990 / #] run-batch --verbose
{
    ""outcome"" => ""success"",
    ""result"" => {""step-1"" => {
        ""outcome"" => ""success"",
        ""result"" => [{
            ""address"" => undefined,
            ""outcome"" => undefined,
            ""result"" => {
                ""enabled"" => false,
                ""name"" => ""jboss-as-login.war"",
                ""runtime-name"" => ""jboss-as-login.war""
            }
        }]
    }},
    ""server-groups"" => undefined
}
{code}

{code:title=WildFly 8.2.0|borderStyle=solid}
[domain@localhost:9990 /] batch
[domain@localhost:9990 / #] /server-group=*/deployment=*:read-resource
[domain@localhost:9990 / #] run-batch --verbose
{
    ""outcome"" => ""success"",
    ""result"" => {""step-1"" => {
        ""outcome"" => ""success"",
        ""result"" => [{
            ""address"" => [
                (""server-group"" => ""main-server-group""),
                (""deployment"" => ""test-application.war"")
            ],
            ""outcome"" => undefined,
            ""result"" => {
                ""enabled"" => false,
                ""name"" => ""test-application.war"",
                ""runtime-name"" => ""test-application.war""
            }
        }]
    }},
    ""server-groups"" => undefined
}
{code}

Executing the {{read-resource}} op itself yields the same result for WildFly 8.2.0.Final and 9",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzvt53:,9223372036854775807,,,,,,,,,,,"13/Apr/15 4:53 AM;ehugonnet;This seems to be fixed in WFCORE-Beta4 as I can't reproduce it anymore :
{code:title=WildFly 9 with WFCORE Beta4|borderStyle=solid}
ehsavoie@mjollnir:~/dev/wildfly/wildfly/dist/target/wildfly-9.0.0.CR1-SNAPSHOT/bin$ ./jboss-cli.sh -c
[domain@localhost:9990 /] batch
[domain@localhost:9990 / #] /server-group=*/deployment=*:read-resource
[domain@localhost:9990 / #]  run-batch --verbose
{
    ""outcome"" => ""success"",
    ""result"" => {""step-1"" => {
        ""outcome"" => ""success"",
        ""result"" => [{
            ""address"" => [
                (""server-group"" => ""main-server-group""),
                (""deployment"" => ""app.war"")
            ],
            ""outcome"" => ""success"",
            ""result"" => {
                ""enabled"" => true,
                ""name"" => ""app.war"",
                ""runtime-name"" => ""app-0.1-SNAPSHOT-b1.war""
            }
        }]
    }}
}
{code}",13/Apr/15 5:09 AM;harald.pehl;Can confirm that it is no longer an issue with WFCORE beta 4,"13/Apr/15 9:40 AM;brian.stansberry;Damn I'm good! ;)

Highly likely this was fixed as part of the WFCORE-282 work (see PR linked there), which took so long because I kept stumbling upon and sorting problems with the response structures, particularly the combination of wildcard reads and composites.",,,,,,,,,,,,,,,,,,,,,,,,
Response headers do not propagate through the domain,WFCORE-627,12567720,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,06/Apr/15 1:55 PM,10/Apr/15 4:22 PM,29/Nov/16 3:54 PM,10/Apr/15 4:22 PM,1.0.0.Beta2,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"There's no access-control response header here:

{code}
[domain@localhost:9999 /] /host=master/server=server-one/subsystem=datasources/data-source=ExampleDS:read-resource{roles=Monitor}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ....
    }
}
{code}

ProxyStepHandler needs to pass through response-header data.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/597,,,,,,0.0,0.0,,1|hzvrzj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Global list-get operation can inadvertently create list elements,WFCORE-626,12567707,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pferraro,pferraro,pferraro,06/Apr/15 11:53 AM,15/Apr/15 9:17 AM,29/Nov/16 3:54 PM,15/Apr/15 9:17 AM,1.0.0.Beta2,,,,,,1.0.0.Beta6,,Domain Management,,,,,0,,,,,,"Consider the following sequence of operations:

# :list-clear(name=attribute)
# :list-get(name=attribute, index=0)
# :list-add(name=attribute, value=test)
# :list-get(name=attribute, index=0)

#2 will return <undefined> as expected.  The expected result of #4 is ""test"".  However, it returns <undefined>.  This is because #2 will create the missing element at index 0 causing #3 to operate on index 1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/595,,,,,,0.0,4.0,,1|hzvrwn:,9223372036854775807,,,,,,,,,,,"07/Apr/15 6:07 AM;ctomc;Reopening and assigning to me to add test case for this.
Fix was already merged.",07/Apr/15 10:14 AM;pferraro;Thanks.  I didn't find any tests for these global operations - though I validated this particular fix against my tests for WFLY-4488.,"07/Apr/15 10:16 AM;ctomc;tests for global collection operations are in org.jboss.as.controller.operation.global.CollectionOperationsTestCase.

I agree that fix is correct, i just want to also add tests for this, for future proofing it.","09/Apr/15 7:33 AM;ctomc;Looking bit further into this, the fix that was done is not completely correct.
as *get-* operations should not invoke write-attribute afterwards and *should* be completely read-only and as such that extra ""get"" shouldn't matter.
I have it fixed locally as part of some other changes i am doing in same code.",,,,,,,,,,,,,,,,,,,,,,,
Error message in CLI if extension existing on the server is not present in the CLI instalaltion,WFCORE-625,12567675,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,ehugonnet,ehugonnet,03/Apr/15 10:46 AM,21/Apr/15 11:21 AM,29/Nov/16 3:54 PM,21/Apr/15 11:21 AM,1.0.0.Beta2,,,,,,1.0.0.Beta5,,CLI,Domain Management,,,,0,,,,,,"When using the jboss-cli from a WildFly-Core installation to manage a WildFly Full server you get error messages about missing extensions :
Errors caught while loading extensions:
1) Failed to load module org.jboss.as.clustering.infinispan for extension org.jboss.as.clustering.infinispan: org.jboss.as.clustering.infinispan:main
2) Failed to load module org.jboss.as.connector for extension org.jboss.as.connector: org.jboss.as.connector:main
3) Failed to load module org.jboss.as.ee for extension org.jboss.as.ee: org.jboss.as.ee:main
4) Failed to load module org.jboss.as.ejb3 for extension org.jboss.as.ejb3: org.jboss.as.ejb3:main
5) Failed to load module org.jboss.as.jaxrs for extension org.jboss.as.jaxrs: org.jboss.as.jaxrs:main
6) Failed to load module org.jboss.as.jdr for extension org.jboss.as.jdr: org.jboss.as.jdr:main
7) Failed to load module org.jboss.as.jpa for extension org.jboss.as.jpa: org.jboss.as.jpa:main
8) Failed to load module org.jboss.as.jsf for extension org.jboss.as.jsf: org.jboss.as.jsf:main
9) Failed to load module org.jboss.as.mail for extension org.jboss.as.mail: org.jboss.as.mail:main
10) Failed to load module org.jboss.as.naming for extension org.jboss.as.naming: org.jboss.as.naming:main
11) Failed to load module org.jboss.as.pojo for extension org.jboss.as.pojo: org.jboss.as.pojo:main
12) Failed to load module org.jboss.as.sar for extension org.jboss.as.sar: org.jboss.as.sar:main
13) Failed to load module org.jboss.as.security for extension org.jboss.as.security: org.jboss.as.security:main
14) Failed to load module org.jboss.as.transactions for extension org.jboss.as.transactions: org.jboss.as.transactions:main
15) Failed to load module org.jboss.as.webservices for extension org.jboss.as.webservices: org.jboss.as.webservices:main
16) Failed to load module org.jboss.as.weld for extension org.jboss.as.weld: org.jboss.as.weld:main
17) Failed to load module org.wildfly.extension.batch for extension org.wildfly.extension.batch: org.wildfly.extension.batch:main
18) Failed to load module org.wildfly.extension.bean-validation for extension org.wildfly.extension.bean-validation: org.wildfly.extension.bean-validation:main
19) Failed to load module org.wildfly.extension.security.manager for extension org.wildfly.extension.security.manager: org.wildfly.extension.security.manager:main
20) Failed to load module org.wildfly.extension.undertow for extension org.wildfly.extension.undertow: org.wildfly.extension.undertow:main
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/632,,,,,,0.0,2.0,,1|hzvrpj:,9223372036854775807,,,,,,,,,,,"03/Apr/15 11:03 AM;ehugonnet;This comes from ExtensionsLoader where the CLI is trying to load CommandHandlers from extension.
I'm wondering if marking this as an error is correct. Maybe a warning should be sufficient.","07/Apr/15 12:55 PM;aloubyansky;After the PR has been merged, it's going to look like this:

[olubyans@fedovo bin]$ cd . && ./jboss-cli.sh -c
Warning! There were errors trying to load extensions. For more details, please, execute 'extension-commands --errors'
[standalone@localhost:9990 /] extension-commands --errors
The following problems were encountered while looking for additional commands in extensions:
1) Module org.jboss.as.clustering.infinispan from extension org.jboss.as.clustering.infinispan available on the server couldn't be loaded locally: org.jboss.as.clustering.infinispan:main
2) Module org.jboss.as.connector from extension org.jboss.as.connector available on the server couldn't be loaded locally: org.jboss.as.connector:main
3) Module org.jboss.as.ee from extension org.jboss.as.ee available on the server couldn't be loaded locally: org.jboss.as.ee:main
4) Module org.jboss.as.ejb3 from extension org.jboss.as.ejb3 available on the server couldn't be loaded locally: org.jboss.as.ejb3:main
5) Module org.jboss.as.jaxrs from extension org.jboss.as.jaxrs available on the server couldn't be loaded locally: org.jboss.as.jaxrs:main
6) Module org.jboss.as.jdr from extension org.jboss.as.jdr available on the server couldn't be loaded locally: org.jboss.as.jdr:main
7) Module org.jboss.as.jpa from extension org.jboss.as.jpa available on the server couldn't be loaded locally: org.jboss.as.jpa:main
8) Module org.jboss.as.jsf from extension org.jboss.as.jsf available on the server couldn't be loaded locally: org.jboss.as.jsf:main
9) Module org.jboss.as.mail from extension org.jboss.as.mail available on the server couldn't be loaded locally: org.jboss.as.mail:main
10) Module org.jboss.as.naming from extension org.jboss.as.naming available on the server couldn't be loaded locally: org.jboss.as.naming:main
11) Module org.jboss.as.pojo from extension org.jboss.as.pojo available on the server couldn't be loaded locally: org.jboss.as.pojo:main
12) Module org.jboss.as.sar from extension org.jboss.as.sar available on the server couldn't be loaded locally: org.jboss.as.sar:main
13) Module org.jboss.as.security from extension org.jboss.as.security available on the server couldn't be loaded locally: org.jboss.as.security:main
14) Module org.jboss.as.transactions from extension org.jboss.as.transactions available on the server couldn't be loaded locally: org.jboss.as.transactions:main
15) Module org.jboss.as.webservices from extension org.jboss.as.webservices available on the server couldn't be loaded locally: org.jboss.as.webservices:main
16) Module org.jboss.as.weld from extension org.jboss.as.weld available on the server couldn't be loaded locally: org.jboss.as.weld:main
17) Module org.wildfly.extension.batch from extension org.wildfly.extension.batch available on the server couldn't be loaded locally: org.wildfly.extension.batch:main
18) Module org.wildfly.extension.bean-validation from extension org.wildfly.extension.bean-validation available on the server couldn't be loaded locally: org.wildfly.extension.bean-validation:main
19) Module org.wildfly.extension.security.manager from extension org.wildfly.extension.security.manager available on the server couldn't be loaded locally: org.wildfly.extension.security.manager:main
20) Module org.wildfly.extension.undertow from extension org.wildfly.extension.undertow available on the server couldn't be loaded locally: org.wildfly.extension.undertow:main
",,,,,,,,,,,,,,,,,,,,,,,,,
Result transformation for composite op failures is broken,WFCORE-624,12567668,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,03/Apr/15 10:06 AM,03/Apr/15 10:06 AM,29/Nov/16 3:54 PM,,1.0.0.Beta2,,,,,,,,Domain Management,,,,,0,,,,,,"CompositeOperationTransformer.CompositeResultTransformer works by analyzing the ""step-x"" entries in the remote response's ""result"" node, and then transforming that node.

This breaks down when the failure actually occurs in the remote CompositeOperationHandler, as will be the case if the step refers to a resource or operation that is undefined on that node. In that case there is no ""result"" node with steps, just a top level failure.

CompositeResultTransformer will actually add a ""result"" node with the expected error message in this case, but that basically works by luck. And the high level error message for the overall op will no be transformed.

Possible improvements:

1) CompositeOperationHandler sets up a result node in this case, so CompositeResultTransformer can process it.

2) CompositeResultTransformer can try and fix up the top level error message as well.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzvrnz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ModelControllerClient.Factory lacks some variants,WFCORE-623,12567666,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,lthon,lthon,03/Apr/15 9:15 AM,08/Apr/15 4:55 PM,29/Nov/16 3:54 PM,08/Apr/15 4:55 PM,1.0.0.Beta2,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"In the {{ModelControllerClient.Factory}} class, each factory method in fact has two varians: with a {{protocol}} as a first parameter, and without it. There are two exceptions -- two methods are lacking a {{protocol}}-less variant:

- {{ModelControllerClient create(final String protocol, final String hostName, final int port, final CallbackHandler handler, final SSLContext sslContext, final int connectionTimeout, final Map<String, String> saslOptions)}}
- {{ModelControllerClient create(final String protocol, final String hostName, final int port, final CallbackHandler handler, final SSLContext sslContext, final int connectionTimeout, final Map<String, String> saslOptions, final String clientBindAddress)}}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/600,,,,,,0.0,0.0,,1|hzvrnj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DomainOperationContext transformation assumes slave host and slave host's servers receive the same ops,WFCORE-622,12567626,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,02/Apr/15 4:18 PM,03/Sep/15 9:50 AM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"https://github.com/wildfly/wildfly-core/commit/f5c516f2#diff-dc2038399fc72656590c09fe73305791R151 assumes that the result transformer for the host request is appropriate for use with the subsequent requests to that host's servers during domain rollout.

That's a shaky supposition, as the server ops generated from a host request have no fixed relationship to the host request itself. Alignment is the norm but not a rule. In particular it can faill apart with composite ops where some steps in the composite are not relevant to all hosts.

Without this extra transformation, test at [1] fails. This indicates the server op is not getting the transformation registered at [2] applied. But if it's not getting the result transformation applied, wouldn't that mean relevant operation transformation isn't being applied as well? 

[1] https://github.com/wildfly/wildfly-core/blob/master/testsuite/domain/src/test/java/org/jboss/as/test/integration/domain/suites/OperationTransformationTestCase.java#L226

[2] https://github.com/wildfly/wildfly-core/blob/master/testsuite/domain/src/test/java/org/jboss/as/test/integration/domain/extension/VersionedExtension2.java#L108",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzvrfr:,9223372036854775807,,,,,,,,,,,"02/Apr/15 5:36 PM;brian.stansberry;I think there are three cases relevant to this basic problem:

1) An end user invokes an op /host=oldslave/server=a/subsystem=foo:op.

Here, perhaps the user understands that oldslave is using the old API, and therefore doesn't expect transformation. In that case, result transformation is invalid.

But if they do expect transformation, there's no reason to assume that operation transformation is not expected as well.

2) The slave HC itself generates the op, as part of domain rollout.

In this case, operation transformation is invalid, as the generated op is what the slave understands. But is result transformation valid? It may make the response consistent with current user expectations, or it may not, depending on the relationship to the operation transformation that may have gone along with the result transformation.

I think this is not a real case though, as custom result transformers don't make much sense for the add/remove/write-attribute ops generated as part of a domain rollout. Those ops return 'undefined.'

3) A wildcard read (see WFCORE-282). So, /host=*/server=*/subsystem=foo:read-attribute(name=bar). The user would likely expect a consistent response for all servers.

An example custom result transformer might be something that converts types, e.g.

{ ""time"" => 1, ""unit"" => ""seconds""} becomes 1000L because the attribute type or response value type has changed from complex to a simple ms value.

Another example is https://github.com/wildfly/wildfly/blob/8.x/jmx/src/main/java/org/jboss/as/jmx/JMXExtension.java#L239 which uses a result transformer to provide a value for a newly added attribute.",07/Apr/15 10:05 AM;brian.stansberry;https://github.com/wildfly/wildfly-core/pull/597 (for WFCORE-282) has  a partial workaround for this issue.,,,,,,,,,,,,,,,,,,,,,,,,,
HostControllerExecutionSupport.MultiStepOpExecutionSupport doesn't format nested composites correctly,WFCORE-619,12567570,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Apr/15 8:08 AM,10/Apr/15 4:21 PM,29/Nov/16 3:54 PM,10/Apr/15 4:21 PM,1.0.0.Beta2,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"The getFormattedDomainResult isn't processing nested composites correctly. It takes the response for the top level step and passes it into the HostControllerExecutionSupport for that step. That's fine for the simple response variants of HostControllerExecutionSupport, which just return the passed in node. But it fails if the support for that step is in turn MultiStepOpExecutionSupport, as it is expecting a response node's 'result' child, not the outer response node itself.

Solution is to detect this, clone the outer response node, and pass it's 'result' child into the child MultiStepOpExecutionSupport, replacing the outer response node's 'result' with the return value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/597,,,,,,0.0,0.0,,1|hzvr47:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid 'started in' values for embedded CLI server,WFCORE-617,12567232,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,pkremens,pkremens,30/Mar/15 7:21 AM,26/Jun/15 8:14 PM,29/Nov/16 3:54 PM,26/Jun/15 8:14 PM,,,,,,,2.0.0.Alpha5,,,,,,,0,,,,,,"Embedded CLI server use {{StartTimeHolder.START_TIME;}} as startTime property - used for server 'started in' time calculation.
{noformat}
$ ./jboss-cli.sh
# wait for 5-10s
[disconnected /] embed-server --std-out=echo
... started in 12241ms ...
[standalone@embedded /] stop-embedded-server
# wait for 5-10s
[disconnected /] embed-server --std-out=echo
... started in 26388ms ...
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzvp6f:,9223372036854775807,,,,,,,,,,,"09/Jun/15 12:23 PM;brian.stansberry;I'm going to fix this by storing a startTime value in HostControllerEnvironment and ServerEnvironment, which will drive this calculation on boot. The embedding app will then be able to set these values when creating the environment objects.",,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid package exclusion in security manager module.,WFCORE-615,12567014,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,26/Mar/15 11:50 AM,07/Apr/15 11:34 AM,29/Nov/16 3:54 PM,07/Apr/15 11:34 AM,1.0.0.Beta1,,,,,,1.0.0.Beta4,,Security,,,,,0,,,,,,"Has the following export exclusion defined: -

{code}
    <exports>
        <exclude path=""org/jboss/wildfly/security/manager/_private""/>
    </exports>
{code}

But should be: -

{code}
    <exports>
        <exclude path=""org/wildfly/security/manager/_private""/>
    </exports>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/583,,,,,,0.0,0.0,,1|hzvo1j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Using ? as control character in .inputrc causes CLI to terminate immediately. ,WFCORE-608,12566434,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,jaysensharma,jaysensharma,20/Mar/15 2:18 AM,23/Jun/15 8:31 AM,29/Nov/16 3:54 PM,13/May/15 5:02 PM,,,,,,,1.0.0.CR4,2.0.0.Alpha1,CLI,,,,,0,,,,,,"- When using  *[wildfly-8.2.0.Final]* When user has a '.inputrc' in the user home directory with the following content:

{code}
# Control characters
""\C-?"":   backward-delete-char
{code}

- The it fails with the the following Stack Trace:
{code}
./jboss-cli.sh 
java.lang.RuntimeException: ERROR parsing ? keys to aesh. Check your inputrc.
	at org.jboss.aesh.edit.mapper.KeyMapper.convertRandomControlKeys(KeyMapper.java:161)
	at org.jboss.aesh.edit.mapper.KeyMapper.mapRandomKeys(KeyMapper.java:138)
	at org.jboss.aesh.edit.mapper.KeyMapper.mapKeys(KeyMapper.java:108)
	at org.jboss.aesh.edit.mapper.KeyMapper.mapQuoteKeys(KeyMapper.java:49)
	at org.jboss.aesh.console.Config.parseInputrc(Config.java:127)
	at org.jboss.aesh.console.Console.reset(Console.java:150)
	at org.jboss.aesh.console.Console.<init>(Console.java:105)
	at org.jboss.aesh.console.Console.<init>(Console.java:101)
	at org.jboss.as.cli.impl.Console$Factory.getConsole(Console.java:85)
	at org.jboss.as.cli.impl.Console$Factory.getConsole(Console.java:78)
	at org.jboss.as.cli.impl.CommandContextImpl.initBasicConsole(CommandContextImpl.java:349)
	at org.jboss.as.cli.impl.CommandContextImpl.<init>(CommandContextImpl.java:296)
	at org.jboss.as.cli.impl.CommandContextFactoryImpl.newCommandContext(CommandContextFactoryImpl.java:76)
	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:273)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:253)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.jboss.modules.Module.run(Module.java:312)
	at org.jboss.modules.Main.main(Main.java:460)
{code}

- Expectation is that CLI should not have terminated suddenly rather the exception should have been handled in a proper way.
",Linux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1203997,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/577,https://github.com/wildfly/wildfly-core/pull/717,https://github.com/wildfly/wildfly-core/pull/716,,,,0.0,6.0,,1|hzvkn3:,9223372036854775807,,,,"On Linux Machine:

1.  Create a file in user home directory with name "".inputrc""

2.  Add the following entry inside the file "".inputrc""
{code}
# Control characters
""\C-?"":   backward-delete-char
{code}

3. Start jboss cli script.",,,,,,,26/Mar/15 11:32 AM;aloubyansky;The cli is now catching RuntimeException's from Aesh during the console initialization. And the next release of Aesh will not throw RuntimeException in this case.,09/Apr/15 2:22 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1203997|https://bugzilla.redhat.com/show_bug.cgi?id=1203997] from NEW to ASSIGNED,12/May/15 6:10 PM;brian.stansberry;[~aloubyansky] Please reschedule this to either 1.0.0.CR4 or 2.something. Thanks.,13/May/15 2:06 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1203997|https://bugzilla.redhat.com/show_bug.cgi?id=1203997] from ASSIGNED to MODIFIED,18/Jun/15 11:38 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1203997|https://bugzilla.redhat.com/show_bug.cgi?id=1203997] from MODIFIED to ON_QA,23/Jun/15 8:31 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1203997|https://bugzilla.redhat.com/show_bug.cgi?id=1203997] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
" After failed to deploy, remain deployment information in JBOSS_HOME/{standalone|domaine}/data/content directory",WFCORE-604,12566220,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,soul2zimate,soul2zimate,soul2zimate,18/Mar/15 5:19 AM,26/Mar/15 2:06 PM,29/Nov/16 3:54 PM,25/Mar/15 2:39 PM,1.0.0.Alpha19,,,,,,,,Domain Management,,,,,0,,,,,,"{noformat}
Description of problem:
===

- After failed to deploy, remain deployment information in JBOSS_HOME/{standalone|domaine}/data/content directory 
- Please see following reproduce steps.

How reproducible:
===

Steps to Reproduce:
1. Fail to deploy application via jboss-cli
2. Find deployment info in JBOSS_HOME/{standalone|domaine}/data/content, but there are no standalone.xml in <deployments> tag.
3. Fix deployment and success to deploy.
4. Find ""new"" deployment info in JBOSS_HOME/{standalone|domaine}/data/content, and the old deployment info will be still there.

- I know that as we changed application in step-3, its hash value was changed. And then, old info is remained in JBOSS_HOME/{standalone|domaine}/data/content. But I think it always happens and should be fixed.

Actual results:

- The deployment information which created when deploy was failed remains in JBOSS_HOME/{standalone|domaine}/data/content.

Expected results:

- The deployment information which created when deploy was failed should be removed if the deploy is failed.
{noformat}",,,,,,,,,,,,,,,,,,,,WFCORE-213,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/571,,,,,,0.0,4.0,,1|hzvjd3:,9223372036854775807,,,,,,,,,,reload / restart server or not doing deployment through CLI ,18/Mar/15 5:28 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1194251|https://bugzilla.redhat.com/show_bug.cgi?id=1194251] from NEW to ASSIGNED,25/Mar/15 2:37 PM;brian.stansberry;WFCORE-213 was implemented as the general solution to the category of problems described by WFCORE604.,25/Mar/15 2:39 PM;brian.stansberry;I don't see why anything beyond the garbage collection behavior in the WFCORE-213 fix is necessary.,26/Mar/15 2:06 PM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1194251|https://bugzilla.redhat.com/show_bug.cgi?id=1194251] from ASSIGNED to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Boot sometimes fails on restart when deployments are present in the deployments directory and the deployment scanner is in use,WFCORE-601,12566089,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,ehugonnet,swd847,swd847,17/Mar/15 6:54 AM,12/Aug/16 2:32 PM,29/Nov/16 3:54 PM,,,,,,,,,,Deployment Scanner,,,,,0,,,,,,"I observed this today, looks to be some kind of race in the deployment scanner on boot

{code}
21:52:08,618 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.1.Final
21:52:10,370 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.4.Final
21:52:10,440 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 9.0.0.Alpha2-SNAPSHOT (WildFly Core 1.0.0.Alpha19) starting
21:52:11,390 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 20) WFLYCTL0028: Attribute enabled is deprecated, and it might be removed in future version!
21:52:11,409 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0015: Re-attempting failed deployment mysql-ds.xml
21:52:11,413 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0015: Re-attempting failed deployment wildfly-ee7.war
21:52:11,488 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 3) WFLYDR0001: Content added at location /Users/stuart/workspace/wildfly/build/target/wildfly-9.0.0.Alpha2-SNAPSHOT/standalone/data/content/48/032d14f289775249a004205c059588ab0f44d4/content
21:52:11,504 INFO  [org.jboss.as.repository] (ServerService Thread Pool -- 3) WFLYDR0001: Content added at location /Users/stuart/workspace/wildfly/build/target/wildfly-9.0.0.Alpha2-SNAPSHOT/standalone/data/content/c6/7babde4791697ddc6509fbd43ba1ec25952d47/content
21:52:11,506 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 3) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""wildfly-ee7.war"")]) - failure description: ""WFLYCTL0212: Duplicate resource [(\""deployment\"" => \""wildfly-ee7.war\"")]""
21:52:11,509 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) ""WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations""
21:52:11,512 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""parallel-subsystem-boot"") failed - address: ([]) - failure description: ""\""WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations\""""
21:52:11,514 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
21:52:11,514 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1195,,,,,,0.0,9.0,,1|hzvimn:,9223372036854775807,,,,,,,,,,,17/Mar/15 6:59 AM;ctomc;[~ehugonnet] didn't you work on something like this?,"19/Mar/15 11:21 AM;ehugonnet;Hum I should not answer when in PTO.
Does the war needs the datasource ?","27/Mar/15 11:11 AM;ehugonnet;Ok found that war is coming from https://github.com/TechEmpower/FrameworkBenchmarks
",02/Apr/15 9:48 AM;ehugonnet;Leaving Stuart as assigned since I can't reproduce it locally.,26/Oct/15 4:30 PM;brian.stansberry;[~ehugonnet] Looks like I mistakenly reassigned this back to you when you'd unassigned it before due to not being able to reproduce. [~swd847] is this still an issue?,"26/Oct/15 5:08 PM;swd847;It is still an issue (I have seen it in the last month), but it is hard to reproduce with any sort of consistency.","26/Oct/15 6:22 PM;brian.stansberry;Perhaps there is both a wildfly-ee7.war.dodeploy and a wildfly-ee7.war.failed in the deployments dir, and it's trying to deploy it twice? The WFLYDS0015 message in the log indicates it found the .failed file, and the WFLYCTL0212 indicates two ops trying to add the deployment.",26/Oct/15 8:47 PM;swd847;Looks like it is caused by multiple marker files,"28/Oct/15 6:59 PM;brian.stansberry;Emmanuel, since you are looking into WFCORE-1074 as well, and Stuart's PR has a CI failure he can't reproduce, can you take this over? Thanks.",,,,,,,,,,,,,,,,,,
CLI unable to parse op where a list contains a list.,WFCORE-600,12566037,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,dlofthouse,dlofthouse,16/Mar/15 3:35 PM,20/Mar/15 2:09 AM,29/Nov/16 3:54 PM,20/Mar/15 2:09 AM,,,,,,,1.0.0.Beta1,,CLI,,,,,0,affects_elytron,,,,,"The CLI is incorrectly parsing commands where the parameter contains a list that contains a list.

Take the following command: -

{code}
./subsystem=elytron/provider-loader=pkcs#11:add(register=false, providers=[{ class-names=[sun.security.pkcs11.SunPKCS11], module=sun.jdk, property-list=[{key=a,value=b},{key=b,value=c}] }])
{code}

The following operation is created: -

{code}
{
    ""address"" => [
        (""subsystem"" => ""elytron""),
        (""provider-loader"" => ""pkcs#11"")
    ],
    ""operation"" => ""add"",
    ""register"" => false,
    ""providers"" => [{
        ""class-names"" => [""sun.security.pkcs11.SunPKCS11""],
        ""module"" => ""sun.jdk"",
        ""property-list"" => [
            {
                ""key"" => ""a"",
                ""value"" => ""b""
            },
            {
                ""key"" => ""b"",
                ""value"" => ""c""
            },
            ""}""
        ]
    }]
}
{code}

Note the additional ""}"" inside property-list.

Change the order of parameters to now be: -

{code}
./subsystem=elytron/provider-loader=pkcs#11:add(register=false, providers=[{ class-names=[sun.security.pkcs11.SunPKCS11],  property-list=[{key=a,value=b},{key=b,value=c}], module=sun.jdk }])
{code}

And the resulting operation is: -

{code}
{
    ""address"" => [
        (""subsystem"" => ""elytron""),
        (""provider-loader"" => ""pkcs#11"")
    ],
    ""operation"" => ""add"",
    ""register"" => false,
    ""providers"" => [
        {
            ""key"" => ""a"",
            ""value"" => ""b""
        },
        {
            ""key"" => ""b"",
            ""value"" => ""c""
        },
        (""module"" => ""sun.jdk }"")
    ]
}
{code}

Here the content of providers is completely wrong, also the value for 'module' is wrong and contains an additional '}'.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/574,,,,,,0.0,1.0,,1|hzvibz:,9223372036854775807,,,,,,,,,,,20/Mar/15 2:09 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
PrimitiveListAttributeDefinitions also missing opportunity to add type information from ObjectTypeAttributeDefinition,WFCORE-595,12565787,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,13/Mar/15 8:47 AM,16/Mar/15 6:51 AM,29/Nov/16 3:54 PM,16/Mar/15 6:50 AM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,affects_elytron,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/563,,,,,,0.0,0.0,,1|hzvguf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CSRF vulnerability in the WFLY-2913 solution,WFCORE-594,12565732,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,jason.greene,brian.stansberry,brian.stansberry,12/Mar/15 5:06 PM,26/Oct/15 11:16 PM,29/Nov/16 3:54 PM,26/Oct/15 11:10 PM,,,,,,,2.0.0.CR9,,Domain Management,Security,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,HAL-798,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1252885,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzvgif:,9223372036854775807,,This issue is security relevant,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent DMR response structure,WFCORE-593,12548407,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,ehugonnet,heiko.braun,heiko.braun,04/Aug/14 4:14 AM,13/Mar/15 11:42 AM,29/Nov/16 3:54 PM,13/Mar/15 11:37 AM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"{noformat}
{
    ""address"" => [
        (""profile"" => ""full""),
        (""subsystem"" => ""ejb3""),
        (""service"" => ""*"")
    ],
    ""operation"" => ""read-resource-description""
}


{
    ""outcome"" => ""success"",
    ""result"" => {
        ""outcome"" => ""failed"",
        ""failure-description"" => ""JBAS014883: No resource definition is registered for address [
    (\""profile\"" => \""full\""),
    (\""subsystem\"" => \""ejb3\""),
    (\""service\"" => \""*\"")
]"",
        ""rolled-back"" => true
    }
}
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzso9r:,9223372036854775807,,,,,,,,,,,04/Aug/14 4:15 AM;heiko.braun;Take a look at the response structure : outcome:success > result > outcome:failed,"04/Aug/14 11:17 AM;brian.stansberry;Do you have any more info on what the conditions were when this happened? Testing against master, the EAP 6.x branch and an EAP 6.2.2 build I have I get this:

{code}
[domain@localhost:9999 /] /profile=full/subsystem=ejb3/service=*:read-resource-description
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""JBAS014883: No resource definition is registered for address [
    (\""profile\"" => \""full\""),
    (\""subsystem\"" => \""ejb3\""),
    (\""service\"" => \""*\"")
]"",
    ""rolled-back"" => true
}
{code}

Was the 'rbac' provider enabled? Maybe that matters.

My EAP 6.x branch may be a a week or so out of date; I'll update and rebuild in case that matters.","12/Mar/15 4:34 PM;brian.stansberry;Emmanuel,

When you get a chance please try a bit to see if you can learn how to reproduce this, and if you can't please resolve it as Cannot Reproduce.",13/Mar/15 11:36 AM;ehugonnet;Can't reproduce it against current WildFly.,,,,,,,,,,,,,,,,,,,,,,,
Suspect handling of SaslPolicyResource attributes,WFCORE-592,12496231,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,11/Jul/13 4:01 PM,12/Mar/15 4:29 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,Remoting,,,,0,,,,,,"The SaslPolicyResource attribute all have a default value of ""true"" but their handling in the runtime OSH is resulting in ""true"" not being propagated to the remoting services if the attribute is undefined. And looking at how org.jboss.sasl works, it seems that for at least some of these the actual behavior if not set is ""false"". So either our metadata is wrong, or the intended value isn't getting passed to remoting. I expect its the former.

Either way, once the metadata is correct the OSH should be passing the AD's default value into remoting, not ignoring it.

See https://github.com/wildfly/wildfly/pull/4733/files#diff-28",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzhnnj:,163430,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
revertReloadRequired() throws a NPE is reloadRequired has not been called,WFCORE-591,12565684,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmesnil,jmesnil,jmesnil,12/Mar/15 10:57 AM,23/Sep/16 6:24 AM,29/Nov/16 3:54 PM,13/Mar/15 5:01 AM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"If an operation step handler calls org.jboss.as.controller.OperationContext#revertReloadRequired() when org.jboss.as.controller.OperationContext#reloadRequired() has not been called, it throws a NPE:

{noformat}
java.lang.NullPointerException
	at org.jboss.as.controller.ControlledProcessState.revertReloadRequired(ControlledProcessState.java:181)
	at org.jboss.as.controller.AbstractOperationContext.revertReloadRequired(AbstractOperationContext.java:1037)
	at org.jboss.as.controller.test.RevertReloadRequiredTestCase$TestResourceAddHandler.rollbackRuntime(RevertReloadRequiredTestCase.java:98)
	at org.jboss.as.controller.AbstractAddStepHandler$1$1.handleRollback(AbstractAddStepHandler.java:133)
	at org.jboss.as.controller.AbstractOperationContext$RollbackDelegatingResultHandler.handleResult(AbstractOperationContext.java:1419)
	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1385)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1367)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1323)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1283)
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1172)
	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:929)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:877)
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1182)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:205)
{noformat}

The NPE is caused by this.activeStep.restartStamp field which is set only when reloadRequired() (or restartRequired()) is called.

My OSH may call reloadRequired() or not depending on some runtime state and I could add some logic to make sure I call 
I can fix my handle to check that I call context.revertReloadRequired() only I had previously called reloadRequired () first.
However, in order to make the OperationContext more robust, I think that the revertReloadRequired() method should instead be a no-op if there is no reload required. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1294591,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/559,,,,,,0.0,10.0,,1|hzvg7r:,9223372036854775807,,,,,,,,,,,12/Mar/15 11:05 AM;jmesnil;PR for master branch,13/Mar/15 5:01 AM;jmesnil;PR merged in master branch,30/Dec/15 10:22 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from NEW to ASSIGNED,30/Dec/15 11:01 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from ASSIGNED to VERIFIED,31/Dec/15 3:53 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from VERIFIED to ASSIGNED,05/Jan/16 11:01 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from ASSIGNED to POST,28/Mar/16 5:45 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from POST to MODIFIED,28/Mar/16 7:31 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from MODIFIED to POST,22/Sep/16 9:33 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from MODIFIED to ON_QA,23/Sep/16 6:24 AM;jira-bugzilla-migration;Vlado Pakan <vpakan@redhat.com> changed the Status of [bug 1294591|https://bugzilla.redhat.com/show_bug.cgi?id=1294591] from POST to MODIFIED,,,,,,,,,,,,,,,,,
Wildfly does not log stack trace of an exception,WFCORE-587,12565269,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,09/Mar/15 10:16 AM,30/Jul/15 10:12 AM,29/Nov/16 3:54 PM,13/Mar/15 5:46 AM,1.0.0.Alpha19,,,,,,,,Logging,,,,,0,,,,,,"Copied from BZ 1198186:

AbstractOperationContext.java line 1159 seems to be ""swallowing"" exceptions. It's possible to get NullPointerException without a stack trace. This makes it impossible to trace the cause of the NPE. 

https://github.com/jbossas/jboss-eap/blob/2292b0a8763683d0fab03efc3de6a29b974c09eb/controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java#L1159

2015-02-27 12:53:26,587 TRACE [|] [org.jboss.modules] (MSC service thread 1-11) Finding class org.jboss.logging.DelegatingBasicLogger from Module ""org.picketbox:main"" from local module loader @416a8198 (finder: local module finder @376243b5 (roots: /usr/share/jbossas/modules,/usr/share/jbossas/modules/system/layers/base))
2015-02-27 12:53:26,586 ERROR [|] [org.jboss.as.controller.client] (ServerService Thread Pool -- 29) JBAS014781: Step handler org.jboss.as.controller.AbstractAddStepHandler$1@1e6a7c88 for operation {""operation"" => ""add"",""factory-class"" => ""org.hornetq.core.remoting.impl.netty.NettyConnectorFactory"",""param"" => [(""host"" => ""tp4.app.paypoint.net""),(""port"" => ""6495""),(""use-nio"" => ""true"")],""address"" => [(""subsystem"" => ""messaging""),(""hornetq-server"" => ""default""),(""connector"" => ""tp4"")],""socket-binding"" => undefined} at address [
    (""subsystem"" => ""messaging""),
    (""hornetq-server"" => ""default""),
    (""connector"" => ""tp4"")
] failed handling operation rollback -- java.lang.NullPointerException
2015-02-27 12:53:26,587 TRACE [|] [org.jboss.modules] (MSC service thread 1-4) Finding class org.jboss.remoting3.UnlockedReadHashMap$EntryIterator from Module ""org.jboss.remoting3:main"" from local module loader @416a8198 (finder: local module finder @376243b5 (roots: /usr/share/jbossas/modules,/usr/share/jbossas/modules/system/layers/base))",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1198186,,,,,Perform,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/546,,,,,,0.0,6.0,,1|hzvdqn:,9223372036854775807,,,,,,,,,,,09/Mar/15 10:25 AM;thofman;BZ Issue: https://bugzilla.redhat.com/show_bug.cgi?id=1198186,13/Mar/15 5:46 AM;thofman;Merged.,13/Mar/15 6:03 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1198186|https://bugzilla.redhat.com/show_bug.cgi?id=1198186] from ASSIGNED to POST,23/Jul/15 2:40 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1198186|https://bugzilla.redhat.com/show_bug.cgi?id=1198186] from POST to MODIFIED,28/Jul/15 11:13 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1198186|https://bugzilla.redhat.com/show_bug.cgi?id=1198186] from MODIFIED to ON_QA,30/Jul/15 10:12 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1198186|https://bugzilla.redhat.com/show_bug.cgi?id=1198186] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
CLI accepts operation requests with addresses ending on resource types,WFCORE-581,12564907,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,05/Mar/15 8:17 AM,19/May/15 7:26 AM,29/Nov/16 3:54 PM,11/Mar/15 6:33 PM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,CLI,,,,,0,,,,,,"It doesn't concern the tab-completion. But if the address is entered manually and ends on a resource type, the generated operation request will target the parent resource.

[standalone@localhost:9999 /] echo-dmr /subsystem=logging/file-handler=:remove
{
    ""address"" => [(""subsystem"" => ""logging"")],
    ""operation"" => ""remove""
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1169342,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/542,,,,,,0.0,6.0,,1|hzvc13:,9223372036854775807,,,,,,,,,,,11/Mar/15 6:33 PM;aloubyansky;Merged.,13/Mar/15 2:50 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1169342|https://bugzilla.redhat.com/show_bug.cgi?id=1169342] from NEW to ASSIGNED,13/Mar/15 3:32 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1169342|https://bugzilla.redhat.com/show_bug.cgi?id=1169342] from ASSIGNED to POST,28/Apr/15 5:02 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1169342|https://bugzilla.redhat.com/show_bug.cgi?id=1169342] from POST to MODIFIED,14/May/15 7:15 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1169342|https://bugzilla.redhat.com/show_bug.cgi?id=1169342] from MODIFIED to ON_QA,19/May/15 7:26 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1169342|https://bugzilla.redhat.com/show_bug.cgi?id=1169342] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
Recursive read-resource with include-runtime=true assumes all runtime singleton resources will be present.,WFCORE-580,12564882,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,dlofthouse,dlofthouse,05/Mar/15 4:50 AM,21/Apr/15 10:35 AM,29/Nov/16 3:54 PM,21/Apr/15 10:35 AM,1.0.0.Alpha19,,,,,,1.0.0.Beta5,,Domain Management,,,,,0,affects_elytron,,,,,"Take the following hierarchy: -

{code}
keystore=xxx
    alias=yyy
        certificate-chain=default
        certificate-chain=x509
{code}

keystore is a regular resource with storage=configuration.
alias is a regular resource with storage=runtime
certificate-chain=default and certificate-chain=x509 are regular resources with storage=runtime.

So alias represents a single alias from a Java KeyStore, this may or may not have a certificate chain and it may be a default chain or it may be an x509 chain.

The recursive read-resource is fine with regular resources such as alias as it has to rely on the underlying resource implementation to identify the instances that actually exist.

For the singleton resources however the following method is called: -

{code}
org.jboss.as.controller.operations.global.GlobalOperationHandlers.getChildAddresses(OperationContext, PathAddress, ImmutableManagementResourceRegistration, Resource, String)
{code}

Within this method the following check takes place: -

{code}
                if (resource != null && resource.hasChildren(childType)) {
                    Set<String> childNames = resource.getChildrenNames(childType);
                    if (element.isWildcard()) {
                        set.addAll(childNames);
                    } else if (childNames.contains(element.getValue())) {
                        set.add(element.getValue());
                    }
{code}

Up to this point all is fine, the children the resource claims are available are the only ones added.

But further down this happens: -

{code}
            if (!element.isWildcard()) {
                ImmutableManagementResourceRegistration childReg = registry.getSubModel(PathAddress.pathAddress(element));
                if (childReg != null && childReg.isRuntimeOnly()) {
                    set.add(element.getValue());
                }
            }
{code}

So even though the resource was previously checked and missing children excluded they are now added back.

The end result in this example is that the recursive read resource attempts to read for certificate-chain=default when it should only be reading for certificate-chain=x509 as already reported by the resource implementation.

From a discussion in HipChat yesterday there was general agreement this behaviour seems to be wrong, however support for Proxied resources may be (incorrectly) dependent on this.
",,,,,,,,,,,,,,,,,,,,,WFCORE-17,WFCORE-635,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/614,,,,,,0.0,1.0,,1|hzvbvj:,9223372036854775807,,,,,,,,,Workaround Exists,"I have been able to workaround this by not flagging the resource registrations for the singleton resources as being runtime resources.

In my case I have the parent regular resource 'alias' to halt any recursive reads that are not include-runtime=true so this workaround may not suit all situations.",05/Mar/15 5:08 AM;dlofthouse;Marking these two as related as improvements in how resources are marked as runtime resources could be related to the correct detection of which resources to automatically include in the recursive read resource.,,,,,,,,,,,,,,,,,,,,,,,,,,
ProxyMetadataSource does not return JDK8 'default' methods from interfaces,WFCORE-579,12564875,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,swd847,baranowb,baranowb,05/Mar/15 4:21 AM,28/Mar/16 7:21 PM,29/Nov/16 3:54 PM,16/Sep/15 3:40 PM,1.0.0.Alpha19,,,,,,2.0.0.CR1,,Server,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1196686,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,9.0,,1|hzvbtz:,9223372036854775807,,,,,,,,,,,05/Mar/15 5:16 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1196686|https://bugzilla.redhat.com/show_bug.cgi?id=1196686] from ASSIGNED to POST,12/Jun/15 4:52 AM;jim.ma;This is already fixed by https://github.com/wildfly/wildfly-core/pull/769.,"25/Jun/15 3:17 PM;brian.stansberry;It's possible that the WFCORE-725 patch dealt with this, although I haven't looked carefully enough to know.",22/Jul/15 6:09 AM;baranowb;current master does not seem to be fixed.,"16/Sep/15 3:40 PM;brian.stansberry;I'm guessing at the exact nature of the relationship between WFCORE-579 and WFCORE-725, but my understanding of the comments on the rejected PR for 579 is that 725 fixes 579.",04/Nov/15 1:10 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1196686|https://bugzilla.redhat.com/show_bug.cgi?id=1196686] from POST to ASSIGNED,04/Nov/15 4:47 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1196686|https://bugzilla.redhat.com/show_bug.cgi?id=1196686] from ASSIGNED to POST,28/Mar/16 4:51 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1196686|https://bugzilla.redhat.com/show_bug.cgi?id=1196686] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1196686|https://bugzilla.redhat.com/show_bug.cgi?id=1196686] from MODIFIED to POST,,,,,,,,,,,,,,,,,,
Where a complex attribute contains a Object type that contains an ObjectList the value type of the ObjectList is not returned in the resource description.,WFCORE-577,12564842,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,04/Mar/15 12:56 PM,05/Mar/15 10:14 AM,29/Nov/16 3:54 PM,05/Mar/15 10:14 AM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,affects_elytron,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/538,,,,,,0.0,0.0,,1|hzvbmv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""jboss-deployment-structure.xml"" with schema location fails to deploy",WFCORE-568,12563743,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,swd847,wolfgangknauf,wolfgangknauf,19/Feb/15 2:54 PM,03/Mar/15 9:13 PM,29/Nov/16 3:54 PM,03/Mar/15 9:13 PM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,Server,,,,,0,,,,,,"A ""jboss-deployment-structure.xml"" with a schemaLocation attribute will fail to deploy.

This is a sample file:
<jboss-deployment-structure xmlns=""urn:jboss:deployment-structure:1.1""
    xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""urn:jboss:deployment-structure:1.1 http://www.jboss.org/schema/jbossas/jboss-deployment-structure-1_1.xsd"">

...
</jboss-deployment-structure>

And this is the deployment error:
And this is the parse exception:

Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[3,129]
Message: JBAS018754: Unexpected content of type 'element start', name is '{urn:jboss:deployment-structure:1.1}jboss-deployment-structure', text is: 'null'
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.unexpectedContent(JBossDeploymentStructureParser11.java:1129) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.readElement(JBossDeploymentStructureParser11.java:211) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.readElement(JBossDeploymentStructureParser11.java:69) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:316) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    ... 8 more

The schemaLocation attribute makes sense, because Eclipse will be able to validate the file,and you have code completion. With the JBossTools plugin, the ""xmlns"" attribute is enough to get all this, because JBossTools adds this file to the xml catalog.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/919020,,,https://github.com/wildfly/wildfly-core/pull/525,,,,,,0.0,0.0,,1|hzv4l3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invoking shutdown command for slave HC results in CLI disconnecting,WFCORE-567,12564259,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,brian.stansberry,brian.stansberry,25/Feb/15 4:02 PM,28/Feb/15 1:42 AM,29/Nov/16 3:54 PM,28/Feb/15 1:42 AM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,CLI,,,,,0,,,,,,"Connect the CLI to the master in a domain with a slave HC and shut down the slave. CLI disconnects:

{code}
[domain@localhost:9990 /] shutdown --host=slave
[disconnected /]
{code}",,,,,,,,,,,,,,,,,,,,WFCORE-67,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/530,,,,,,0.0,2.0,,1|hzv88v:,9223372036854775807,,,,,,,,,,,"27/Feb/15 6:11 AM;aloubyansky;This was supposed to be fixed before. https://github.com/aloubyansky/wildfly-core/commit/a2d3bc62188df66e61f42a26fd65cee8d801bdc1

introduced boolean isMaster(ModelControllerClient client, String host) method for that.",28/Feb/15 1:42 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,
space- and comma-separated attribute marshaller are broken,WFCORE-566,12564243,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmesnil,jmesnil,jmesnil,25/Feb/15 1:04 PM,26/Feb/15 9:02 AM,29/Nov/16 3:54 PM,26/Feb/15 9:02 AM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,The AttributeMarshaller's STRING_LIST and COMMA_STRING_LIST are broken as they override marshallAsElement while it's their marshallAsAttribute method (inherited from DefaultAttributeMarshaller) that is called.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/526,,,,,,0.0,2.0,,1|hzv85b:,9223372036854775807,,,,,,,,,,,26/Feb/15 4:15 AM;jmesnil;PR for master branch,26/Feb/15 9:02 AM;jmesnil;PR meged in master branch,,,,,,,,,,,,,,,,,,,,,,,,,
StaticDiscoveryResourceDefinition allows undefined values for its attributes,WFCORE-565,12564235,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,brian.stansberry,brian.stansberry,25/Feb/15 12:11 PM,26/Feb/15 5:33 PM,29/Nov/16 3:54 PM,26/Feb/15 5:33 PM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"StaticDiscoveryResourceDefinition reuses the AttributeDefinitions from RemoteDomainControllerAddHandler, but those ADs allow undefined. That's appropriate for that OSH, but not for the StaticDiscoveryResourceDefinition ADs.

Also, the RemoteDomainControllerAddHandler AD's could use some clarification and validation as well, e.g. use setRequires(...) on the builder such that each of protocol, host, port requires the other two. So none are required, but if any is set all 3 must be.

The StaticDiscovery constructor should validate inputs with assert statements and javadoc its parameters, include whether null is allowed. (A null protocol or host will result in an IAE in discover(), so the current code does not support null.)

The DiscoveryOption interface should document whether the 3 ""get"" methods can return null.",,,,,,,,,,,,WFCORE-75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/501,,,,,,0.0,3.0,,1|hzv83r:,9223372036854775807,,,,,,,,,,,25/Feb/15 1:45 PM;brian.stansberry;DiscoveryOptionStrategy.DiscoveryOptionComparator will fail if protocol or port are null for any DiscoveryOption. ,"25/Feb/15 2:12 PM;brian.stansberry;The ""get"" methods from DiscoveryOption can legitimately return null before the ""discover()"" method is invoked. The uses of DiscoveryOptionStrategy.DiscoveryOptionComparator are not properly dealing with that.

We need to rethink the DiscoveryOption sorting, as there's sorting going on before discovery has taken place.",26/Feb/15 5:33 PM;aloubyansky;All done except for the static discovery protocol attribute which should allow undefined values after all.,,,,,,,,,,,,,,,,,,,,,,,,
setXmlWrapperElement() doesn't work properly with multiple resource children,WFCORE-564,12564065,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,24/Feb/15 8:09 AM,05/Mar/15 5:40 PM,29/Nov/16 3:54 PM,05/Mar/15 5:40 PM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,XML Frameworks,,,,,0,,,,,,"{noformat}Jeff Mesnil 12:13 @ctomc hi tomaz. The setXmlWrapperElement() method in persistent xml builder API is supposed to add a XML wrapper around all the resource's XML elements, right? and not around each resource element.
ie it looks like <wrapper><res /><res /></wrapper> and not <wrapper><res /></wrapper><wrapper><res /></wrapper>
Tomaz Cerar 12:17 hmm, you are right also around resources
it would be <wrapper> <res /> <res/> </wrapper>
just remembered i had that in 1.0 xsd of undertow subsystem
Jeff Mesnil 12:20 yes, I want to wrap some resources (eg queue) in a wrapper (<queues>). But the persistent XM parser is broken (it wants one wrapper around each resource)
the XML persister is working as expected though
Tomaz Cerar @jmesnil you are right it is broken, i can reproduce it also on undertow-1.0.xml test case
i just had one resource under it so it passed{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/529,,,,,,0.0,0.0,,1|hzv73j:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong order of elements in jboss-cli.xml,WFCORE-562,12564045,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dpospisil,dpospisil,dpospisil,24/Feb/15 5:30 AM,28/Mar/16 7:21 PM,29/Nov/16 3:54 PM,24/Feb/15 10:10 AM,1.0.0.Alpha19,,,,,,1.0.0.Beta1,,CLI,,,,,0,,,,,,File bin/jboss-cli.xml has an incorrect order of elements. <history> tag should be before <resolve-parameter-values> tag. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1195132,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/521,,,,,,0.0,3.0,,1|hzv6zb:,9223372036854775807,,,,,,,,,,,26/Feb/15 4:45 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1195132|https://bugzilla.redhat.com/show_bug.cgi?id=1195132] from ASSIGNED to POST,28/Mar/16 4:50 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1195132|https://bugzilla.redhat.com/show_bug.cgi?id=1195132] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1195132|https://bugzilla.redhat.com/show_bug.cgi?id=1195132] from MODIFIED to POST,,,,,,,,,,,,,,,,,,,,,,,,
Class loading problem with XAResource and XADataSource,WFCORE-561,12563969,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,dmlloyd,dmlloyd,23/Feb/15 11:06 AM,03/Feb/16 7:36 AM,29/Nov/16 3:54 PM,28/May/15 5:47 PM,,,,,,,1.0.0.CR6,2.0.0.Alpha3,Modules,,,,,0,,,,,,"We define the JTA API in a module ({{java.transaction.api}}) but we neglect to redefine those classes in the {{javax.sql}} package which reference that API, including {{XADataSource}}, which can cause {{LinkageError}} and strange CCEs under certain circumstances.

The isolated subgraph of classes from that package need to be added to either the {{java.transaction.api}} module or a new {{javax.sql.api}} module.  Then measures must be taken to prevent the JDK's version of these classes from leaking out, a task complicated by the presence of the rowset API classes also sharing that package.

One solution is to ensure that the {{javax.api}} module includes a re-exported dependency on the module with the relocated classes which takes precedence over the system dependency, ensuring that the system classes never become visible.  Another solution is to modify JBoss Modules to implement an XML mapping of the class filter concept, and then add class filter expressions to the {{module.xml}} of the {{javax.api}} module.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Medium,,,,https://github.com/wildfly/wildfly-core/pull/517,https://github.com/wildfly/wildfly-core/pull/762,https://github.com/wildfly/wildfly-core/pull/763,,,,0.0,9.0,,1|hzv6in:,9223372036854775807,,,,,,,,,,,"23/Feb/15 11:29 AM;dmlloyd;Since this has to be in wildfly-core and the transaction API is in wildfly proper, we'll have to do a new spec API.","27/May/15 7:02 AM;mikemike;I got the following LinkageError:

Caused by: java.lang.LinkageError: loader constraint violation: loader (instance of <bootloader>) previously initiated loading for a different type with name ""javax/sql/PooledConnection""
	at java.lang.Class.getDeclaredMethods0(Native Method)
	at java.lang.Class.privateGetDeclaredMethods(Class.java:2531)
	at java.lang.Class.privateGetPublicMethods(Class.java:2651)
	at java.lang.Class.privateGetPublicMethods(Class.java:2661)
	at java.lang.Class.privateGetPublicMethods(Class.java:2667)
	at java.lang.Class.getMethods(Class.java:1467)
	at bitronix.tm.utils.PropertyUtils.getSetter(PropertyUtils.java:311)
	at bitronix.tm.utils.PropertyUtils.setDirectProperty(PropertyUtils.java:217)
	at bitronix.tm.utils.PropertyUtils.setProperty(PropertyUtils.java:83)
	at bitronix.tm.resource.common.XAPool.createXAFactory(XAPool.java:304)
	at bitronix.tm.resource.common.XAPool.<init>(XAPool.java:63)
	at bitronix.tm.resource.jdbc.PoolingDataSource.buildXAPool(PoolingDataSource.java:101)
	at bitronix.tm.resource.jdbc.PoolingDataSource.init(PoolingDataSource.java:88)
	at de.abc.def.config.DataSourceConfig.kairosDS(DataSourceConfig.java:91)
	at de.abc.def.config.DataSourceConfig$$EnhancerBySpringCGLIB$$c92e01ec.CGLIB$kairosDS$2(<generated>)
	at de.abc.def.config.DataSourceConfig$$EnhancerBySpringCGLIB$$c92e01ec$$FastClassBySpringCGLIB$$c45f5607.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:312)
	at de.abc.def.config.DataSourceConfig$$EnhancerBySpringCGLIB$$c92e01ec.kairosDS(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)
	... 46 more

We are using programmatic Bitronix datasources inside our application. I found out (by -verbose:class) that the PooledConnection is loaded twice by the following Classes:

1. [Loaded javax.sql.PooledConnection from jar:file:/D:/development/jboss/wildfly-9.0.0.CR1/modules/system/layers/base/javax/sql/api/main/jboss-javax-sql-api_7.0_spec-1.0.0.Final.jar!/]
2. [Loaded javax.sql.PooledConnection from C:\Program Files\Java\jdk1.7.0_51\jre\lib\rt.jar]


What do I have to do exactly to get my application working on Wildfly?
","27/May/15 8:10 AM;dmlloyd;It looks like maybe some recent changes might have reintroduced this, or perhaps I didn't fix it properly to begin with.",27/May/15 8:50 AM;mikemike;I tried with wildfly-9.0.0.CR1. Can I do anything to work around?,"27/May/15 8:52 AM;dmlloyd;Try editing your ""modules/system/layers/base/javax/api/main/module.xml"" file and remove just the one line that references the ""javax/sql"" path.  If that fixes the problem, then my patch will also fix it.","27/May/15 10:19 AM;mikemike;It seems working. Thank you a lot. You made my day!

Now I have to update resteasy. Why has wildfly 9 not the newest resteasy version 3.0.9 (released since Sep. 2014) ?",27/May/15 10:26 AM;dmlloyd;That I couldn't tell you.  You should probably open a separate JIRA for that in the WFLY project.,"27/May/15 10:47 AM;mikemike;Done! 
https://issues.jboss.org/browse/WFLY-4689","27/May/15 7:42 PM;dmlloyd;Note that this patch might cause the RowSet API to disappear.  The fix for that is going to have to involve implementing class filtering in the module.xml file to let those classes ""peek"" through - or else copying the entire RowSet API into the javax.sql JAR (which might not be possible if it has cascading dependencies; some analysis is required).",,,,,,,,,,,,,,,,,,
Incorrect wildcard handling in OperationContextImpl.getAuthorizationResource(PathAddress address),WFCORE-560,12563745,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,19/Feb/15 4:37 PM,18/Nov/15 3:58 PM,29/Nov/16 3:54 PM,,1.0.0.Alpha18,,,,,,,,Domain Management,,,,,0,,,,,,"Problem is 2nd and 3rd lines here:

{code}
            if (element.isWildcard()) {
                model = Resource.Factory.create();
                final Set<Resource.ResourceEntry> children = model.getChildren(element.getKey());
                for (final Resource.ResourceEntry entry : children) {
                    model.registerChild(entry.getPathElement(), entry);
                }
            } else {
{code}

Problem is ""model"" will have no children because it was just reassigned to a new Resource. The lines need to be swapped.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/510,,,,,,0.0,0.0,,1|hzv4lj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ModelControllerClientOperationHandler doesn't manage the clientRequestExecutor properly ,WFCORE-553,12563598,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,18/Feb/15 6:23 PM,19/May/15 6:24 AM,29/Nov/16 3:54 PM,06/Mar/15 7:29 AM,1.0.0.Alpha1,1.0.0.Alpha18,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"ModelControllerClientOperationHandler's constructor creates a ThreadPoolExecutor for handling client requests and then the class doesn't clean it up.

In addition, an instance of ModelControllerClientOperationHandler is created per channel, not one per ModelControllerClientOperationHandlerFactoryService. I know I at least thought of the thread pool as being per remote management interface, not per channel.

Making it be per ModelControllerClientOperationHandlerFactoryService and cleaning it up in that service's stop would be the easiest fix, but the pool settings may not be appropriate if we do that, so tread carefully.",,,,,,,,,,,,WFLY-3225,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1199319,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/506,,,,,,0.0,6.0,,1|hzv3o7:,9223372036854775807,,,,,,,,,,,"18/Feb/15 6:29 PM;brian.stansberry;The WFLY-3225 fix is what introduced WFCORE-553. Prior to that fix the pool was scoped to the factory service, not the handler.",13/Mar/15 5:40 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1199319|https://bugzilla.redhat.com/show_bug.cgi?id=1199319] from NEW to ASSIGNED,13/Mar/15 8:49 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1199319|https://bugzilla.redhat.com/show_bug.cgi?id=1199319] from ASSIGNED to POST,30/Apr/15 5:35 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1199319|https://bugzilla.redhat.com/show_bug.cgi?id=1199319] from POST to MODIFIED,14/May/15 7:15 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1199319|https://bugzilla.redhat.com/show_bug.cgi?id=1199319] from MODIFIED to ON_QA,19/May/15 6:24 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1199319|https://bugzilla.redhat.com/show_bug.cgi?id=1199319] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
SaslResource and SaslPolicyResource don't deal with the parent resource correctly,WFCORE-552,12563590,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,brian.stansberry,brian.stansberry,18/Feb/15 4:26 PM,07/Mar/15 8:26 AM,29/Nov/16 3:54 PM,07/Mar/15 8:26 AM,1.0.0.Alpha1,1.0.0.Alpha18,,,,,1.0.0.Beta1,,Domain Management,Remoting,,,,0,,,,,,"SaslResource and SaslPolicyResource represent child configuration under a parent connector or http-connector resource. But their handlers (particularly add and remove) do not reflect this. They simply store config changes to the model and return without making runtime changes. So only if they are executed at boot or in a composite with the connector add op is their configuration data properly included in the runtime.

PropertyResource is a similar child of the connector resources, but it uses RestartParentResourceAddHandler, RestartParentWriteAttributeHandler and RestartParentResourceRemoveHandler.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/523,,,,,,0.0,0.0,,1|hzv3mf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
discovery-option and static-discovery resources miss add operation descriptions,WFCORE-551,12563514,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,aloubyansky,aloubyansky,aloubyansky,18/Feb/15 9:26 AM,18/Feb/15 9:49 AM,29/Nov/16 3:54 PM,18/Feb/15 9:49 AM,1.0.0.Alpha18,,,,,,,,Domain Management,,,,,0,,,,,,"Add operations for each of these resources require arguments but the descriptions are missing in the model.
To be able to invoke those operation from the CLI, the validation of operation requests has to be switched off.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzv35r:,9223372036854775807,,,,,,,,,,,18/Feb/15 9:49 AM;aloubyansky;Appears to be fixed already.,,,,,,,,,,,,,,,,,,,,,,,,,,
Issue with adding server-group and server-config in one composite operation,WFCORE-549,12563427,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,,olegkor,brian.stansberry,17/Feb/15 3:53 PM,27/Apr/16 11:30 AM,29/Nov/16 3:54 PM,27/Apr/16 11:30 AM,,,,,,,,,Domain Management,,,,,0,,,,,,"I used such request to add two server-groups and four servers

{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""socket-binding-port-offset"" => 0,
            ""status"" => ""STOPPED"",
            ""auto-start"" => false,
            ""group"" => ""primary-server-group"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""address"" => [
                (""host"" => ""node02""),
                (""server-config"" => ""system2-server1"")
            ]
        },
        {
            ""operation"" => ""stop"",
            ""name"" => ""server"",
            ""value"" => ""system2-server1"",
            ""address"" => [
                (""host"" => ""node02""),
                (""server-config"" => ""system2-server1"")
            ]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-port-offset"" => 150,
            ""status"" => ""STOPPED"",
            ""auto-start"" => false,
            ""group"" => ""secondary-server-group"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""address"" => [
                (""host"" => ""node02""),
                (""server-config"" => ""system2-server2"")
            ]
        },
        {
            ""operation"" => ""stop"",
            ""name"" => ""server"",
            ""value"" => ""system2-server2"",
            ""address"" => [
                (""host"" => ""node02""),
                (""server-config"" => ""system2-server2"")
            ]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-port-offset"" => 0,
            ""status"" => ""STOPPED"",
            ""auto-start"" => false,
            ""group"" => ""primary-server-group"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""address"" => [
                (""host"" => ""node01""),
                (""server-config"" => ""system1-server1"")
            ]
        },
        {
            ""operation"" => ""stop"",
            ""name"" => ""server"",
            ""value"" => ""system1-server1"",
            ""address"" => [
                (""host"" => ""node01""),
                (""server-config"" => ""system1-server1"")
            ]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-port-offset"" => 150,
            ""status"" => ""STOPPED"",
            ""auto-start"" => false,
            ""group"" => ""secondary-server-group"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""address"" => [
                (""host"" => ""node01""),
                (""server-config"" => ""system1-server2"")
            ]
        },
        {
            ""operation"" => ""stop"",
            ""name"" => ""server"",
            ""value"" => ""system1-server2"",
            ""address"" => [
                (""host"" => ""node01""),
                (""server-config"" => ""system1-server2"")
            ]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""profile"" => ""default"",
            ""address"" => [(""server-group"" => ""primary-server-group"")]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""profile"" => ""default"",
            ""address"" => [(""server-group"" => ""secondary-server-group"")]
        }
    ]
}

And I received such result:

{
    ""outcome"" => ""success"",
    ""result"" => {
        ""step-1"" => {""outcome"" => ""success""},
        ""step-2"" => {
            ""outcome"" => ""success"",
            ""result"" => ""STOPPED""
        },
        ""step-3"" => {""outcome"" => ""success""},
        ""step-4"" => {
            ""outcome"" => ""success"",
            ""result"" => ""STOPPED""
        },
        ""step-5"" => {""outcome"" => ""success""},
        ""step-6"" => {
            ""outcome"" => ""success"",
            ""result"" => ""STOPPED""
        },
        ""step-7"" => {""outcome"" => ""success""},
        ""step-8"" => {
            ""outcome"" => ""success"",
            ""result"" => ""STOPPED""
        },
        ""step-9"" => undefined,
        ""step-10"" => undefined
    },
    ""server-groups"" => undefined
}


But, when I checked admin console, there were no server-groups.
The same with domain.xml on DC side.

So server-groups wasn't addedd.
But if I try to add server-groups one more time:

{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""profile"" => ""default"",
            ""address"" => [(""server-group"" => ""primary-server-group"")]
        },
        {
            ""operation"" => ""add"",
            ""socket-binding-group"" => ""standard-sockets"",
            ""profile"" => ""default"",
            ""address"" => [(""server-group"" => ""secondary-server-group"")]
        }
    ]
}

I will get such result:

{
    ""outcome"" => ""failed"",
    ""result"" => {
        ""step-1"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-2"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        }
    },
    ""failure-description"" => {""host-failure-descriptions"" => {
        ""node02"" => {""JBAS014653: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""JBAS014803: Duplicate resource [(\""server-group\"" => \""primary-server-group\"")]""}},
        ""node01"" => {""JBAS014653: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""JBAS014803: Duplicate resource [(\""server-group\"" => \""primary-server-group\"")]""}}
    }},
    ""rolled-back"" => true
}

Then I need to restart DC to restore server. And after that, I can successuflly add server-groups.

So, after first request, JBoss AS stuck on some uncommited state.","JBoss EAP 6.1.0 GA 
DC and two HC",,,,,,,,,,,,,,,JBEAP-64,,,,,,,,,,,,,,,,,,,,,,,,,?,?,,?,?,?,,,,,,,,,,,,0.0,3.0,,1|hzv2mv:,9223372036854775807,,,,"# create file with batch
{noformat}
/host=node0/server-config=system2-server1:add(socket-binding-port-offset=0, auto-start=false, group=primary-server-group, socket-binding-group=standard-sockets)
/host=node0/server-config=system2-server1:stop(server=system2-server1)
/host=node0/server-config=system2-server2:add(socket-binding-port-offset=150, auto-start=false, group=secondary-server-group, socket-binding-group=standard-sockets)
/host=node0/server-config=system2-server2:stop(server=system2-server2)
/host=node1/server-config=system1-server1:add(socket-binding-port-offset=0, auto-start=false, group=primary-server-group, socket-binding-group=standard-sockets)
/host=node1/server-config=system1-server1:stop(server=system1-server1)
/host=node1/server-config=system1-server2:add(socket-binding-port-offset=150, auto-start=false, group=secondary-server-group, socket-binding-group=standard-sockets)
/host=node1/server-config=system1-server2:stop(server=system1-server2)
/server-group=primary-server-group:add(socket-binding-group=standard-sockets, profile=default)
/server-group=secondary-server-group:add(socket-binding-group=standard-sockets, profile=default)
{noformat}
# start DC
{{/tmp/jboss-eap-6.1/bin/domain.sh --host-config=host-master.xml}}
# start HC1 
{{./bin/domain.sh --host-config=host-slave.xml -Djboss.domain.master.address=127.0.0.1 -Djboss.management.native.port=19999}}
# start HC2
{{/tmp/jboss-eap-6.1/bin/domain.sh --host-config=host-slave1.xml -Djboss.domain.master.address=127.0.0.1 -Djboss.management.native.port=29999}}
# connect to cli and run batch
{{run-batch --file=/tmp/batch}}

it ends with _The batch executed successfully_ but server groups are not created",,,,,,,"17/Feb/15 3:55 PM;brian.stansberry;This was originally reported against EAP 6.1 and 6.2, so the first step in addressing it should be validating whether it is a problem with the current WildFly Core.","27/Apr/16 10:48 AM;simkam;I'm able to reproduce this with EAP 6.1.0, but I'm not with WildFly Core built from master branch. I think this can be closed. ","27/Apr/16 11:30 AM;brian.stansberry;Thanks, Martin.",,,,,,,,,,,,,,,,,,,,,,,,
Changing append on a file handler indicates a reload is required when it should be a runtime change,WFCORE-548,12563417,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,17/Feb/15 2:49 PM,10/Apr/15 4:25 PM,29/Nov/16 3:54 PM,10/Apr/15 4:25 PM,,,,,,,1.0.0.Beta4,,Logging,,,,,0,,,,,,"Changing the {{append}} attribute at runtime results in the following output:
{code}
[standalone@localhost:9990 /] /subsystem=logging/periodic-rotating-file-handler=FILE:write-attribute(name=append,value=false)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}
{code}

A {{reload}} operation does not stop a file from being appended to. Either the behavior needs to change or the {{process-state}} should be ""restart-required"".

The issue is likely the file name is checked during boot and hasn't changed therefore the it's not set which would cause the stream to the file to be closed and reopened without the append.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/610,,,,,,0.0,2.0,,1|hzv2l3:,9223372036854775807,,,,,,,,,,,"17/Feb/15 4:14 PM;dmlloyd;Maybe we should make this not require reload *or* restart?  Changing the ""append"" setting shouldn't cause any immediate behavioral change since the file is already open.  Turning off ""append"" shouldn't (for example) make the file suddenly disappear, and turning it on won't change anything either.  It should be safe to just let the change happen IMO.",17/Feb/15 4:18 PM;jamezp;That's a good point and probably makes the most sense. We'll just have to make sure to document as in a composite operation changing the append before a file would result in the previous file being cleared.,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to overlay resource in subunit/zip/jar file,WFCORE-547,12563352,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,baranowb,baranowb,17/Feb/15 5:10 AM,01/Sep/16 8:13 AM,29/Nov/16 3:54 PM,12/Mar/15 9:18 PM,1.0.0.Alpha18,,,,,,1.0.0.Beta1,,Server,,,,,0,,,,,,"It is possible to overlay resource directly in deployed jar, however, same resource can not be properly overlayed if said jar is deployed as part of ear ( possibly war as well ).

Example:
jar (xxx.jar):
/org/test/ejb/EJBImpl.class
/org/test/ejb/resourceToOverlya.txt

ear(yyy.ear) - war seems to be the subject of this as well
/xxx.jar

Overlay #1( over jar)
overlay target: xxx.jar/org/test/ejb/resourceToOverlya.txt
Result: proper deployment(EJB is deployed), resource has been overlayed

Overlay #2( over jar inside ear )
overlay target: org/test/ejb/resourceToOverlya.txt
Result: bad deployment, no EJB deployed, overlay target has been overlayed


Reason of such outcome is that VFS.exists() does not recognize JavaZipFileSystem$ZipNode/Entry as zipped archive and does not dive into children.

So what happens in here is as follows. When EAR is deployed OverlayProcessor kicks in at:
https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/DeploymentOverlayDeploymentUnitProcessor.java#L107
For this example ear/jar pair, first pair of values:
mountPoint: /content/yyy.ear/xxx.jar/org/test/ejb/resourceToOverlya.txt
parent:  /content/yyy.ear/xxx.jar/org/test/ejb
Outcome of exists() call == false, should be true.
this will iterate up to parent == /content/yyy.ear/xxx.jar

At this point, 'createParents' contain some entries and 
https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/DeploymentOverlayDeploymentUnitProcessor.java#L114
will create tmp/virtual mounts for:
- /content/yyy.ear/xxx.jar/org/test/ejb
- /content/yyy.ear/xxx.jar/org/test
- /content/yyy.ear/xxx.jar/org

What it will essentially do is create overlay for whole 'org' package! The VirtualFile.getChildren() will return tmp mounted VirtualFile for 'org' entry: https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/VirtualFile.java#L335

There is part of code which should remove 'submount' if there is directory entry: https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/VirtualFile.java#L345 however ( if I remember correctly) 'org' tmp mount ends up twice in 'submounts'
When VirtualFile.getChildren is called for 'this' == /content/yyy.ear/xxx.jar ( in this case it is properly removed) and when 'this' ==  /content/yyy.ear/xxx.jar/org - in which case it derails getChildren and diverts into tmp mount.


Now about https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/spi/JavaZipFileSystem.java#L355

What happens here, for ear deployment - it dives recursively into 'find' until 'target' is equal to '/content/yyy.ear/xxx.jar' at this target.getParent() == 'mountPoint' == '/content/yyy.ear'.

At this point 'find' will get result ZipNode == /content/yyy.ear and fetch child 'xxx.jar' and pop back up one notch in the call stack. However the 'xxx.jar' entry does not have any children, hence there is no way to fetch next child in line 'org'.
",,,,,,,,,,,,,,,,,,,,,,,,,WFCORE-129,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1147352,https://bugzilla.redhat.com/show_bug.cgi?id=1323240,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/550,,,,,,0.0,7.0,,1|hzv27j:,9223372036854775807,,,,,,,,,,,12/May/15 2:36 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to NEW,15/Jun/15 6:38 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from NEW to POST,28/Mar/16 4:42 PM;jira-bugzilla-migration;Sat6QE Jenkins <sat6-jenkins@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to MODIFIED,28/Mar/16 7:21 PM;jira-bugzilla-migration;Mike McCune <mmccune@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from MODIFIED to POST,25/Apr/16 1:46 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to MODIFIED,25/Apr/16 6:11 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from MODIFIED to ON_QA,05/May/16 8:09 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
Inconsistent stage for adding/updating/removing system properties,WFCORE-545,12563313,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,brian.stansberry,brian.stansberry,16/Feb/15 12:13 PM,16/Mar/15 6:44 AM,29/Nov/16 3:54 PM,22/Feb/15 12:29 PM,1.0.0.Alpha18,,,,,,1.0.0.Alpha19,,Domain Management,,,,,0,,,,,,"SystemPropertyAddHandler and SystemPropertyValueWriteAttributeHandler both update the VM property map during Stage.MODEL, while SystemPropertyRemoveHandler waits until Stage.RUNTIME.

This can lead to unintuitive behavior in a composite op, e.g. if a user does a remove and then an add in a batch to change the value. The remove will actually update the runtime after the add, resulting in the prop being unset.

The SystemPropertyAddHandler and SystemPropertyValueWriteAttributeHandler behavior is non-standard as they change non-model information in Stage.MODEL, but that was done deliberately (I forget exactly why.) So the fix should be to adapt SystemPropertyRemoveHandler.

This is minor because the remove + add in a composite workflow is a harder-to-use alternative to using a single write-attribute op.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1190918,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/507,,,,,,0.0,1.0,,1|hzv1z3:,9223372036854775807,,,,,,,,,,,16/Mar/15 6:44 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1190918|https://bugzilla.redhat.com/show_bug.cgi?id=1190918] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent handling of system properties. ,WFCORE-544,12563262,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,ehugonnet,ehugonnet,16/Feb/15 6:17 AM,27/Feb/15 7:47 AM,29/Nov/16 3:54 PM,23/Feb/15 8:49 PM,,,,,,,1.0.0.Alpha19,,,,,,,0,,,,,,"Description of problem:
Having a domain with a single server group and two eap hosts (all on localhost), following system property cause server to fail on startup:
<property name=""org.jbpm.designer.perspective"" value=""${org.jbpm.designer.perspective:full}""/>

The problem occurs only in definition with possibility to override default value - <property name=""X"" value=""${Y:default}""/>, where X = Y

Please see the error message in attached server log excerpt.

More interesting is the fact that the issue shows with domain mode only, standalone mode works with properties defined as above.",,,,,,,,,,,,DMR-18,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1192467,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/498,,,,,,0.0,4.0,,1|hzv1nr:,9223372036854775807,,,,,,,,,,,18/Feb/15 5:53 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1192467|https://bugzilla.redhat.com/show_bug.cgi?id=1192467] from ASSIGNED to POST,18/Feb/15 9:07 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1192467|https://bugzilla.redhat.com/show_bug.cgi?id=1192467] from POST to MODIFIED,25/Feb/15 1:33 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1192467|https://bugzilla.redhat.com/show_bug.cgi?id=1192467] from MODIFIED to ON_QA,27/Feb/15 7:47 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1192467|https://bugzilla.redhat.com/show_bug.cgi?id=1192467] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Bad equals test in WFLY-3306 fix,WFCORE-541,12563088,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,12/Feb/15 6:40 PM,13/Feb/15 12:40 PM,29/Nov/16 3:54 PM,13/Feb/15 12:40 PM,1.0.0.Alpha17,,,,,,1.0.0.Alpha18,,Domain Management,,,,,0,,,,,,"GlobalOperationHandler L458 has this:

{code}
if ((validChildType == null || validChildType.equals(validChildType))
{code}

The second test is silly; should be using var 'type'.",,,,,,,,,,,,WFLY-3306,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/489,,,,,,0.0,0.0,,1|hzv0hb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CVE-2014-7849 WildFly Domain Management: Limited RBAC authorization bypass,WFCORE-540,12563056,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,12/Feb/15 12:43 PM,16/Jul/15 5:17 PM,29/Nov/16 3:54 PM,12/Feb/15 7:22 PM,1.0.0.Alpha1,,,,,,1.0.0.Alpha18,,Domain Management,,,,,0,,,,,,"It was discovered that the Role Based Access Control (RBAC) implementation did not sufficiently verify all authorization conditions that are required by the Maintainer role to perform certain administrative actions. An authenticated user with the Maintainer role could use this flaw to add, modify, or undefine a limited set of attributes and their values, which otherwise cannot be written to.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/486,,,,,,0.0,0.0,,1|hzv0af:,9223372036854775807,,This issue is security relevant,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ReadResourceHandler always invokes a recursive read for runtime-only resouces,WFCORE-539,12563043,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jamezp,jamezp,12/Feb/15 12:05 PM,20/Feb/15 7:56 PM,29/Nov/16 3:54 PM,13/Feb/15 12:40 PM,,,,,,,1.0.0.Alpha18,,Domain Management,,,,,0,,,,,,The [ReadResourceHandler|https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/ReadResourceHandler.java#L413-L417|] invokes a recursive read which in turn clones each resource if the it's a runtime-only resource. For the deployment scanner this is invoking a recursive call every scan.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/490,https://github.com/wildfly/wildfly-core/pull/512,,,,,0.0,0.0,,1|hzv08f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sanitize origins  ports in CORS,WFCORE-536,12562858,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,10/Feb/15 12:06 PM,23/Feb/15 8:40 PM,29/Nov/16 3:54 PM,23/Feb/15 8:40 PM,1.0.0.Alpha17,,,,,,1.0.0.Alpha19,,Domain Management,,,,,0,,,,,,When checking the origins we should remove the port if the port is the default one so that we ensure we have a correct matching,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/481,,,,,,0.0,0.0,,1|hzuz4f:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing default configuration for allowed origins (CORS),WFCORE-535,12562831,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,harald.pehl,harald.pehl,harald.pehl,10/Feb/15 7:37 AM,11/Feb/15 4:10 AM,29/Nov/16 3:54 PM,10/Feb/15 1:13 PM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"WFCORE-302 adds support for CORS. However it's missing a default configuration for allowed origins. Without it the console does no longer work ootb. 

The default list for allowed origins should at least contain 
- http://127.0.0.1:9990
- http://localhost:9990",,,,,,,,,,,,,,,,,,WFCORE-536,,,WFCORE-302,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzuyy7:,9223372036854775807,,,,,,,,,,,10/Feb/15 7:47 AM;dlofthouse;I think a better solution would be an 'allow-same-origin' option otherwise there is going to be an additional attribute administrators need to update in parallel to their network configuration and bind address.,10/Feb/15 1:13 PM;harald.pehl;WFCORE-536 takes care of this.,11/Feb/15 4:10 AM;ehugonnet;Until WFCORE-536 you may add http://localhost:9990 in the allowed origins list as a workaround.,,,,,,,,,,,,,,,,,,,,,,,,
Deployment scanner runtime-failure-causes-rollback attribute is not stored to the model,WFCORE-534,12562681,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,07/Feb/15 8:39 PM,08/Feb/15 6:40 PM,29/Nov/16 3:54 PM,08/Feb/15 6:40 PM,1.0.0.Alpha16,,,,,,1.0.0.Alpha17,,Domain Management,,,,,0,,,,,,The runtime-failure-causes-rollback is never stored to the model in the add op.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/478,,,,,,0.0,0.0,,1|hzuy1r:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The KeyTabService does not cancel it's PathManager callback registration.,WFCORE-532,12562511,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,05/Feb/15 10:21 AM,06/Feb/15 5:18 AM,29/Nov/16 3:54 PM,06/Feb/15 5:18 AM,,,,,,,1.0.0.Alpha17,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/474,,,,,,0.0,0.0,,1|hzux1z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ModelTestModelDescriptionValidator does not take into account that an attribute can also have an attribute-group,WFCORE-529,12562394,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,04/Feb/15 6:13 AM,05/Feb/15 3:34 AM,29/Nov/16 3:54 PM,05/Feb/15 3:34 AM,,,,,,,1.0.0.Alpha17,,Test Suite,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/471,,,,,,0.0,0.0,,1|hzuwdb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""patch apply"" over a CommandContext bound to existing ModelControllerClient fails",WFCORE-526,12562083,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,lthon,lthon,30/Jan/15 7:18 AM,06/Feb/15 5:15 AM,29/Nov/16 3:54 PM,06/Feb/15 5:15 AM,,,,,,,1.0.0.Alpha17,,CLI,Patching ,,,,0,,,,,,"I'm trying to apply a patch programmatically, using CLI as the API (which might be a bad idea, but all I'm doing is using public methods and interfaces). I already have a {{ModelControllerClient}}, so I create a {{CommandContext}} and bind it to my client:

{code}
ModelControllerClient client = ...;
CommandContext cliContext = CommandContextFactory.getInstance().newCommandContext();
cliContext.bindClient(client);
{code}

Then, I try to invoke the {{patch apply}} operation like this:

{code}
cliContext.handle(""patch apply path/to/patch.zip"");
{code}

This results in an exception:

{code}
Exception in thread ""main"" org.jboss.as.cli.CommandLineException: Failed to handle 'patch apply /home/lthon/Downloads/jboss-eap-6.3.3.CP.CR2-patch.zip'
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:660)
	at cz.ladicek.wildfly.PatchingErrorReproducer.main(PatchingErrorReproducer.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)
Caused by: java.lang.IllegalStateException: failed to resolve a jboss.home.dir use the --distribution attribute to point to a valid installation
	at org.jboss.as.patching.cli.PatchHandler.getJBossHome(PatchHandler.java:545)
	at org.jboss.as.patching.cli.PatchHandler.createPatchOperationTarget(PatchHandler.java:518)
	at org.jboss.as.patching.cli.PatchHandler.doHandle(PatchHandler.java:275)
	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:651)
	... 6 more
{code}

The reason is that the patching CLI code, specifically the {{PatchHandler.createPatchOperationTarget}} method, reads {{CommandContext.getControllerHost()}} to find out if it is connected to a running server. In my case, {{getControllerHost()}} returns {{null}} because it was initialized using already-existing {{ModelControllerClient}}.

IMHO, patching code should use a more intelligent method to find out if it is connected to a running server.

Alternatively, this could be formulated as a bug of the core CLI code, because the {{getControllerHost()}} method is documented to _return the host the controller client is connected to or null if the connection hasn't been established yet_, which is arguably a lie when {{CommandContext.bindClient}} is used.

For reproducing, the ""client"" application depends on {{org.wildfly.core:wildfly-controller-client:1.0.0.Alpha16}} and {{org.wildfly.core:wildfly-patching:1.0.0.Alpha16}}, while the server is a clean build from current WildFly master (commit {{2ea95a18}}).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/469,,,,,,0.0,1.0,,1|hzuufz:,9223372036854775807,,,,,,,,,,,"06/Feb/15 5:15 AM;aloubyansky;This is fixed by checking whether the ModelControllerClient is not null, which is a proper way to check the connection status.",,,,,,,,,,,,,,,,,,,,,,,,,,
HTTPSConnectionWithCLITestCase leaves process CLI process,WFCORE-524,12561862,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,28/Jan/15 5:31 AM,09/Feb/15 12:32 PM,29/Nov/16 3:54 PM,09/Feb/15 12:32 PM,,,,,,,1.0.0.Alpha17,,Test Suite,,,,,0,,,,,,"The {{testDefaultCLIConfiguration}} test outputs the following which expects a response:
{code}
INFO  [org.jboss.modules] JBoss Modules version 1.4.1.Final
INFO  [org.xnio] XNIO version 3.3.0.Final
INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.3.0.Final
INFO  [org.jboss.remoting] JBoss Remoting version 4.0.5.Final
INFO  [org.jboss.as.cli.CommandContext] Unable to connect due to unrecognised server certificate
Unable to connect due to unrecognised server certificate
INFO  [org.jboss.as.cli.CommandContext] Subject    - CN=server
Subject    - CN=server
INFO  [org.jboss.as.cli.CommandContext] Issuer     - CN=server
Issuer     - CN=server
INFO  [org.jboss.as.cli.CommandContext] Valid From - Wed Oct 30 11:06:26 CET 2013
Valid From - Wed Oct 30 11:06:26 CET 2013
INFO  [org.jboss.as.cli.CommandContext] Valid To   - Tue Oct 25 12:06:26 CEST 2033
Valid To   - Tue Oct 25 12:06:26 CEST 2033
INFO  [org.jboss.as.cli.CommandContext] MD5 : 70:7a:47:8e:7f:a9:10:7e:3a:98:9e:20:f9:22:1e:0e
MD5 : 70:7a:47:8e:7f:a9:10:7e:3a:98:9e:20:f9:22:1e:0e
INFO  [org.jboss.as.cli.CommandContext] SHA1 : 0b:42:9d:fd:d4:c9:7c:4e:f0:e7:1f:9d:4b:c4:5d:e9:1c:79:12:23
SHA1 : 0b:42:9d:fd:d4:c9:7c:4e:f0:e7:1f:9d:4b:c4:5d:e9:1c:79:12:23
INFO  [org.jboss.as.cli.CommandContext] 

Accept certificate? [N]o, [T]emporarily, [P]ermenantly :
{code}

On Linux the process is not destroyed and left running in the background.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/459,,,,,,0.0,0.0,,1|hzut47:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BlockingNotificationMBeanServer will NPE if resolvedDomain or expressionsDomain are not configured,WFCORE-522,12561623,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,23/Jan/15 7:39 PM,17/Feb/15 8:42 AM,29/Nov/16 3:54 PM,12/Feb/15 5:59 PM,1.0.0.Alpha16,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"If the jmx subsystem <expose-resolved-model/> and/or  <expose-expression-model/> settings are not configured, but <remoting-connector/> is BlockingNotificationMBeanServer will throw NPEs in isInExposedModelControllerDomains due to passing null into java.util.regex.Pattern.matcher(...).

Simply null checks will fix the problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1185496,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/454,,,,,,0.0,4.0,,1|hzurrj:,9223372036854775807,,,,,,,,,,,23/Jan/15 8:47 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1185496|https://bugzilla.redhat.com/show_bug.cgi?id=1185496] from NEW to POST,26/Jan/15 6:44 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1185496|https://bugzilla.redhat.com/show_bug.cgi?id=1185496] from POST to MODIFIED,06/Feb/15 6:22 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1185496|https://bugzilla.redhat.com/show_bug.cgi?id=1185496] from MODIFIED to ON_QA,17/Feb/15 8:42 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1185496|https://bugzilla.redhat.com/show_bug.cgi?id=1185496] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
setting the local to english in CLI commands on non-english systems does not produce english output,WFCORE-521,12548948,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,rpelisse,tfonteyn,tfonteyn,08/Aug/14 7:08 AM,04/Mar/16 3:43 AM,29/Nov/16 3:54 PM,23/Jan/15 5:24 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"A German (or french etc...) system must be used to reproduce.
It is likely this is not limited to MacOS, but I do not have a non-english Linux system available

An out of the box install of wildfly/EAP:

Without configuration, the log file is in German as expected.

Using these CLI comands:

:read-operation-description(name=stop-servers,locale=de_DE) -> german
:read-operation-description(name=stop-servers,locale=en_US) -> german
:read-operation-description(name=stop-servers,locale=fr_FR) -> french

So we cannot get the CLI to produce english output

when configuring JAVA_OPTS in domain.conf with:

JAVA_OPTS=""$JAVA_OPTS -Duser.language=en -Duser.country=DE -Duser.encoding=utf-8

The log is now in English -> works as expected; and:
:read-operation-description(name=stop-servers,locale=de_DE) -> german
:read-operation-description(name=stop-servers,locale=en_US) -> english

So it seems we have a bug where the locale set to start the domain takes precedence over the locale set in the CLI command (but only when English is asked)

I presume this is because English is the default locale.
",Tested on MacOS running in German,,,,,,,,,,,,,,,,,,,,WFLY-4228,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1128132,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/429,,,,,,0.0,12.0,,1|hzsr8v:,9223372036854775807,,,,,,,,,,,"16/Dec/14 10:03 AM;rpelisse;I've just tested on my ""french"" linux (Fedora 21) system, with standalone and there is the same kind of behavior. In the example below, while I've asked for english, I'm still getting french:

 /subsystem=pojo:read-operation-description(name=""add"", locale=""en_US"")
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""operation-name"" => ""add"",
        ""description"" => ""Ajoute le sous-système pojo"",
        ""request-properties"" => {},
        ""reply-properties"" => {},
        ""read-only"" => false,
        ""restart-required"" => ""all-services""
    }
}

However, asking for German however works:

[standalone@localhost:9999 /] /subsystem=pojo:read-operation-description(name=""add"", locale=""de_DE"")
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""operation-name"" => ""add"",
        ""description"" => ""Pojo-Untersystem hinzufügen"",
        ""request-properties"" => {},
        ""reply-properties"" => {},
        ""read-only"" => false,
        ""restart-required"" => ""all-services""
    }
}

I'm going to take a look at this issue - being a french speaker living in Germany, I'm well equipped to deal with this kind of issue :) ","26/Dec/14 12:19 PM;rpelisse;Ok, I've found out the root cause. The issue is that when one ask for en_US, it does find any bundled resources with this prefix - because this is considered the default (hence no appropriate extension):

$ find . -name ""LocalDescriptions*"" | grep org.jboss.as.pojo.LocalDescriptions 
./pojo/src/main/resources/org/jboss/as/pojo/LocalDescriptions_de.properties
./pojo/src/main/resources/org/jboss/as/pojo/LocalDescriptions_fr.properties
./pojo/src/main/resources/org/jboss/as/pojo/LocalDescriptions.properties   ==> This one contains 'en_US' but not the extension
....

However, as default is French (or German), when ask specifically for en_US, no bundle is found, and the JDK falls back to the default Locale (FR or DE), not English. 

IMHO, the best way to fix that would be to modify the build to copy './pojo/src/main/resources/org/jboss/as/pojo/LocalDescriptions.properties' into ./pojo/src/main/resources/org/jboss/as/pojo/LocalDescriptions.properties_en'. There would be duplication, but only in the generated artefact, and it does sound less cumbersome than having to modify Wildfly code to handle this 'edge cases'.

Or maybe someone has a better idea ?
","02/Jan/15 10:45 AM;ehugonnet;The default locale is expected to be en_US, maybe we should have zanata produce the en properties file instead of 'just' a default one.","06/Jan/15 11:35 AM;rpelisse;Zanata is in fact not in charge of building the resources bundles files, so it can't really help us here. As discussed with other developers on chat, I've changed all the call to Locale.getDefault() to Locale.ROOT, which fixes *part* of the issue. Indeed, if I now request an empty locale, I no longer get a French / German answer. 

However, because the bundle is still not found, if I request en_US (or en_UK for that matter), I still get an answer localized in French. I think I can fix it, and we will work on that.

Also, I feel that the partial fix is actually an other issue so I'll probably create a separate issue for it (""Wildfly locale should fallback to ROOT rather than default to ensure the root bundle are used instead of any localized one""), and link it to this one.","07/Jan/15 12:22 PM;rpelisse;Ok, switching to ROOT has not fix the issue, because when we request for the locale ""en_US"" we still end up in the same pitfall - there is no bundle for it. I have a fix however, that simply test if language is 'en' and if so, switch to ""ROOT"".",08/Jan/15 5:50 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from NEW to POST,"13/Jan/15 9:57 AM;rpelisse;The PR mentioned above is for Wildfly 9.x/master, but I've also made a [PR for the 8.x branch|https://github.com/wildfly/wildfly/pull/7086].
",02/Apr/15 2:34 AM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from POST to MODIFIED,10/Jun/15 4:15 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from MODIFIED to POST,23/Feb/16 4:13 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from POST to MODIFIED,24/Feb/16 2:52 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from MODIFIED to ON_QA,04/Mar/16 3:43 AM;jira-bugzilla-migration;Peter Mackay <pmackay@redhat.com> changed the Status of [bug 1128132|https://bugzilla.redhat.com/show_bug.cgi?id=1128132] from ON_QA to VERIFIED,,,,,,,,,,,,,,,
Random NPE in org.jboss.as.controller.OperationContextImpl.createTargetAttribute,WFCORE-520,12561581,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,bmaxwell,bmaxwell,23/Jan/15 11:22 AM,15/Jun/16 8:18 AM,29/Nov/16 3:54 PM,20/Feb/15 1:20 PM,1.0.0.Alpha9,,,,,,1.0.0.Alpha19,,Domain Management,,,,,0,,,,,,"A NullPointerException randomly occurs in org.jboss.as.controller.OperationContextImpl.createTargetAttribute(OperationContextImpl.java:1172) when getMBeanCount is called over and over.

See attached server.log and reproducer
{noformat}
00:16:01,315 ERROR [org.jboss.as.controller.management-operation] (pool-2-thread-2) WFLYCTL0013: Operation (""check-default-resource-access"") failed - address: ([
    (""core-service"" => ""management""),
    (""service"" => ""management-operations""),
    (""active-operation"" => ""-1652526387"")
]): java.lang.NullPointerException
	at org.jboss.as.controller.OperationContextImpl.createTargetAttribute(OperationContextImpl.java:1172) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:1136) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:130) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$CheckResourceAccessHandler.execute(ReadResourceDescriptionHandler.java:467) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:700) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:535) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:303) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1158) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:328) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:197) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.ResourceAccessControlUtil.getResourceAccess(ResourceAccessControlUtil.java:85) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:51) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.RootResourceIterator.iterate(RootResourceIterator.java:43) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.getMBeanCount(ModelControllerMBeanHelper.java:105) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.getMBeanCount(ModelControllerMBeanServerPlugin.java:154) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.PluggableMBeanServerImpl.getMBeanCount(PluggableMBeanServerImpl.java:561) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.BlockingNotificationMBeanServer.getMBeanCount(BlockingNotificationMBeanServer.java:143) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.remotingjmx.protocol.v2.ServerProxy$GetMBeanCountHandler.handle(ServerProxy.java:655)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1$1.run(ServerCommon.java:153)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:75) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:70) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_51]
	at javax.security.auth.Subject.doAs(Subject.java:415) [rt.jar:1.7.0_51]
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor.handleEvent(ServerInterceptorFactory.java:70) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1.run(ServerCommon.java:149)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_51]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_51]
	at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_51]
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,23/Jan/15 11:24 AM;bmaxwell;JMXTest.java;https://issues.jboss.org/secure/attachment/12387509/JMXTest.java,23/Jan/15 11:26 AM;bmaxwell;server.log;https://issues.jboss.org/secure/attachment/12387510/server.log,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1185118,https://bugzilla.redhat.com/show_bug.cgi?id=1192181,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/509,,,,,,2.0,10.0,,1|hzuri7:,9223372036854775807,,,,"Using attached JMXTest: 
javac -cp $JBOSS_HOME/bin/client/jboss-client.jar com/jboss/examples/jmx/JMXTest.java
java -cp $JBOSS_HOME/bin/client/jboss-client.jar:. com.jboss.examples.jmx.JMXTest

Using a couple of threads: 
Open connection to remote jmx
Invoke getMBeanCount()
Close Connection
Repeat",,,,,,,"23/Jan/15 11:24 AM;bmaxwell;javac -cp $JBOSS_HOME/bin/client/jboss-client.jar com/jboss/examples/jmx/JMXTest.java
java -cp $JBOSS_HOME/bin/client/jboss-client.jar:. com.jboss.examples.jmx.JMXTest","23/Jan/15 12:37 PM;ctomc;What version does this occur in? you marked alpha15, but stacktrace is from alpha9","26/Jan/15 6:03 AM;bmaxwell;[~ctomc] ah yes, it looks like this version below.  Somewhere I thought I saw alpha 15, but it looks like my build from master was using Alpha9

    <groupId>org.wildfly</groupId>
    <artifactId>wildfly-parent</artifactId>
    <version>9.0.0.Alpha2-SNAPSHOT</version>

<version.org.wildfly.core>1.0.0.Alpha9</version.org.wildfly.core>","11/Feb/15 10:52 PM;bmaxwell;Happens in 1.0.0.Alpha17 also.  authResp.targetResource.getResource() is null for some reason.

{noformat}
23:22:42,508 ERROR [org.jboss.as.controller.management-operation] (pool-1-thread-2) WFLYCTL0013: Operation (""check-resource-access"") failed - address: ([
    (""core-service"" => ""management""),
    (""service"" => ""management-operations""),
    (""active-operation"" => ""-1768331301"")
]): java.lang.NullPointerException
	at org.jboss.as.controller.OperationContextImpl.createTargetAttribute(OperationContextImpl.java:1206)
	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:1159)
	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:130)
	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$CheckResourceAccessHandler.execute(ReadResourceDescriptionHandler.java:477)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:743)
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:578)
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1181)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:361)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:204)
	at org.jboss.as.jmx.model.ResourceAccessControlUtil.getResourceAccess(ResourceAccessControlUtil.java:85)
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:51)
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61)
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61)
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61)
	at org.jboss.as.jmx.model.RootResourceIterator.iterate(RootResourceIterator.java:43)
	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.getMBeanCount(ModelControllerMBeanHelper.java:106)
	at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.getMBeanCount(ModelControllerMBeanServerPlugin.java:158)
	at org.jboss.as.jmx.PluggableMBeanServerImpl.getMBeanCount(PluggableMBeanServerImpl.java:561)
	at org.jboss.as.jmx.BlockingNotificationMBeanServer.getMBeanCount(BlockingNotificationMBeanServer.java:143)
	at org.jboss.remotingjmx.protocol.v2.ServerProxy$GetMBeanCountHandler.handle(ServerProxy.java:655)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1$1.run(ServerCommon.java:153)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:75)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:70)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor.handleEvent(ServerInterceptorFactory.java:70)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1.run(ServerCommon.java:149)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
{noformat}",12/Feb/15 10:56 AM;brian.stansberry;It's because the resource has disappeared. The resource represents a transient object. I'll figure out a fix.,13/Feb/15 3:10 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1185118|https://bugzilla.redhat.com/show_bug.cgi?id=1185118] from ASSIGNED to VERIFIED,20/Feb/15 3:11 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1192181|https://bugzilla.redhat.com/show_bug.cgi?id=1192181] from NEW to POST,20/Feb/15 11:28 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1192181|https://bugzilla.redhat.com/show_bug.cgi?id=1192181] from POST to MODIFIED,25/Feb/15 1:33 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1192181|https://bugzilla.redhat.com/show_bug.cgi?id=1192181] from MODIFIED to ON_QA,26/Feb/15 8:08 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1192181|https://bugzilla.redhat.com/show_bug.cgi?id=1192181] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,
Xalan Linkage error : TransformerConfigurationException,WFCORE-519,12559243,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dmlloyd,skay088,skay088,11/Dec/14 5:49 AM,04/Jan/16 1:01 AM,29/Nov/16 3:54 PM,23/Jan/15 9:07 AM,,,,,,,1.0.0.Alpha16,,Scripts,,,,,0,,,,,,"Please note that this bug wasn't present on JBoss 7.1 / same WAR artifact

This is full staktrace from our applicaion.

11:13:32,130 SEVERE ch.mitsa.credoc.ui.views.messages.MessagesTable (default task-9) Error getting message payload: : javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.defineTransletClasses(TemplatesImpl.java:369) rt.jar:1.7.0_71
at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:383) rt.jar:1.7.0_71
at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:418) rt.jar:1.7.0_71
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:765) rt.jar:1.7.0_71
at _redirected.TransformerFactory.newTransformer(_TransformerFactory.java:132) jboss-modules.jar:1.3.3.Final
at ch.mitsa.credoc.format.swift.impl.SwiftFormatter.getPrettyPrintedPayload(SwiftFormatter.java:196)
at ch.mitsa.credoc.engine.service.OutputService.getPrettyPrintedMessage(OutputService.java:54)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) rt.jar:1.7.0_71
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) rt.jar:1.7.0_71
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) rt.jar:1.7.0_71
at java.lang.reflect.Method.invoke(Method.java:606) rt.jar:1.7.0_71
at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)
at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)
at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:407)
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:82) wildfly-weld-8.2.0.Final.jar:8.2.0.Final
(...)","Wildfly 8.1 & 8.2-Final
JDK 1.7.0_45 &  1.7.0_71
Windows & Linux ",,,,,,,,,,,,,,,,,,,,WFCORE-715,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/thread/242194,,,,,,,,,0.0,13.0,,1|hzuef3:,9223372036854775807,,,,,,,,,,,"11/Dec/14 5:51 AM;skay088;Hope this help / our current 'workaround' consist in embeeding Xalan within our WAR :
No bug encountered with that workaround :

<dependency>
			<groupId>xalan</groupId>
			<artifactId>xalan</artifactId>
			<version>2.7.2</version>
			<exclusions>
				<exclusion>
					<groupId>xml-apis</groupId>
					<artifactId>xml-apis</artifactId>
				</exclusion>
			</exclusions>
		</dependency>","11/Dec/14 12:50 PM;dmlloyd;It looks like (on windows at least) this was probably introduced by this commit: https://github.com/wildfly/wildfly/commit/ab3d35ea which re-introduced the defunct ""-jaxpmodule"" flag (but only to the windows .bat scripts).
","20/Jan/15 4:05 PM;yfeng1998;I want to add something -- I see the same error, but in different scenarios. I have two servers A and B in the cluster. There is some XSL processing work in the server. When A processes it or when B processes it, it all works fine. But when I start using Infinispan's DistributedExecutorService to distribute work in the cluster, the error happen and it only happens on remote server. E.g. if server A is executing and distribute the same task to A and B, A works fine (including the XSL work), and B always gets error. If server B is executing, then B works fine and A gets this Linkage error. Any ideas?","22/Jan/15 5:02 PM;skay088;If you are embeeding XML implementation in your app (have a look in your jars), you'll not encounter that bug / but face risks of side effects / depending on xml impl version. I would say : you should not embeed an XML impl / though by chance this is working ok / like my workaround.
Now Infinitispan's is using Wildfly's buggy Xalan module with DistributedExecutorService. And when distributing objects over clusters, this issue is occuring,
So according your issue, this means a blocking bug for infinityspan in cluster mode.
David : should we set priority as ""blocker""  ?
",22/Jan/15 9:31 PM;dmlloyd;Can you confirm that the system throwing the exception is always a Windows system?,22/Jan/15 9:45 PM;dmlloyd;I have submitted https://github.com/wildfly/wildfly-core/pull/452 for the jaxpmodule problem if that's what the problem turns out to be.,"22/Jan/15 10:09 PM;yfeng1998;Yes, it is tested on Windows 7.",23/Jan/15 9:07 AM;dmlloyd;Should be all fixed in the WildFly upstream.,"20/Feb/15 12:15 AM;Jokser;Hi everyone,

I have reproduced this bug on Linux (CentOS 7). On Windows after removing -jaxpmodule flag from standalone.bat everything works well but not on Linux. I'm using Switchyard on Wildfly 8.1 and this exception comes from Switchyard sources.
Stacktrace:

Can not register application admin api: java.lang.RuntimeException: java.io.IOException: javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
	at org.switchyard.config.BaseConfiguration.getString(BaseConfiguration.java:355) [switchyard-config-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.config.BaseConfiguration.toString(BaseConfiguration.java:372) [switchyard-config-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.config.model.BaseModel.toString(BaseModel.java:421) [switchyard-config-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.admin.base.BaseComponentService.getComponentImplementationConfiguration(BaseComponentService.java:126) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.BaseComponentService.<init>(BaseComponentService.java:60) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.ComponentServiceWithOperations.<init>(ComponentServiceWithOperations.java:48) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.BaseWsdlComponentService.<init>(BaseWsdlComponentService.java:40) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.BaseApplication.addComponents(BaseApplication.java:213) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.BaseApplication.<init>(BaseApplication.java:68) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.SwitchYardBuilder.applicationDeployed(SwitchYardBuilder.java:121) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.admin.base.SwitchYardBuilder.notify(SwitchYardBuilder.java:109) [switchyard-admin-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.internal.EventManager.publish(EventManager.java:52) [switchyard-runtime-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.deploy.internal.Deployment.doInit(Deployment.java:133) [switchyard-deploy-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.deploy.internal.AbstractDeployment.init(AbstractDeployment.java:139) [switchyard-deploy-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]
	at org.switchyard.as7.extension.deployment.SwitchYardDeployment.start(SwitchYardDeployment.java:155) [switchyard-deploy-wildfly-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.as7.extension.services.SwitchYardService.start(SwitchYardService.java:78) [switchyard-deploy-wildfly-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_31]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_31]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_31]
Caused by: java.io.IOException: javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
	at org.switchyard.common.xml.XMLHelper.write(XMLHelper.java:875) [switchyard-common-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.config.DOMConfiguration.write(DOMConfiguration.java:742) [switchyard-config-2.0.0.Beta1.jar:2.0.0.Beta1]
	at org.switchyard.config.BaseConfiguration.getString(BaseConfiguration.java:352) [switchyard-config-2.0.0.Beta1.jar:2.0.0.Beta1]
	... 20 more
Caused by: javax.xml.transform.TransformerConfigurationException: Translet class loaded, but unable to create translet instance.
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.defineTransletClasses(TemplatesImpl.java:369) [rt.jar:1.8.0_31]
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:383) [rt.jar:1.8.0_31]
	at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:418) [rt.jar:1.8.0_31]
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:767) [rt.jar:1.8.0_31]
	at __redirected.__TransformerFactory.newTransformer(__TransformerFactory.java:132) [jboss-modules.jar:1.3.3.Final]
	at org.switchyard.common.xml.XMLHelper.write(XMLHelper.java:864) [switchyard-common-2.0.0.Beta1.jar:2.0.0.Beta1]
	... 22 more","29/Apr/15 10:20 AM;bbodnar;An other workaround, if the application must not be changed: insert the following elements (java-packages) into <Widlfly installation directory>/modules/system/layers/base/sun/jdk/main/modules.xml:

	  <path name=""com/sun/org/apache/xml/internal/serializer""/>
	  <path name=""com/sun/org/apache/xml/internal/dtm""/>
	  <path name=""com/sun/org/apache/xalan/internal/xsltc""/>
	  <path name=""com/sun/org/apache/xalan/internal/xsltc""/>
	  <path name=""com/sun/org/apache/xalan/internal/xsltc/dom""/>
	  <path name=""com/sun/org/apache/xalan/internal/xsltc/runtime""/>
","05/May/15 2:30 AM;skay088;Hurrah !
THank you very much Barnabas - this is exactly what we need !
Should your resolution go to a more visible /  official documentation !
Very best regards","23/Oct/15 1:17 AM;tc7;This saved my bacon too.

Here's what is working for me (Wildfly 9.01 in domain mode using full-ha profile with xmlunit v1.6)

    <!-- include JDK dependencies (rt.jar) for xalan -->
    <system export=""true"">
      <paths>
          <path name=""com/sun/org/apache/xml/internal/dtm""/>
_          <path name=""com/sun/org/apache/xml/internal/dtm/ref""/>_
          <path name=""com/sun/org/apache/xml/internal/serializer""/>
          <path name=""com/sun/org/apache/xalan/internal/xsltc""/>
          <path name=""com/sun/org/apache/xalan/internal/xsltc/dom""/>
          <path name=""com/sun/org/apache/xalan/internal/xsltc/runtime""/>
      </paths>
    </system>
","04/Jan/16 1:01 AM;sbennettmcleish;Confirmed working for Wildfly 9.0.1, Java 1.8.0_65 on Win7 & Amazon Linux.
Thanks to Barnabas for solution.",,,,,,,,,,,,,,
jboss-deployment-structure-1_0.xsd Error: 'Attribute name is not allowed to appear in element 'sub-deployment',WFCORE-516,12561322,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,rob.stryker,rob.stryker,21/Jan/15 1:37 AM,23/Jan/15 5:54 PM,29/Nov/16 3:54 PM,23/Jan/15 5:54 PM,,,,,,,1.0.0.Alpha16,,Modules,,,,,0,,,,,,"

When the projects

    mail-ear from the Seam example mail [1]
    tasks-ear from the Seam example tasks [2]

are imported into JBDS the error

Attribute 'name' is not allowed to appear in element 'sub-deployment'

will be shown for the file jboss-deployment-structure.xml.
It is caused by the bug in jboss-deployment-structure-1_0.xsd; see AS7-1345
This bug should be IMHO ignored and the error shouldn't be shown.

[1] https://github.com/seam2/jboss-seam/tree/Seam_2_3/examples/mail
[2] https://github.com/seam2/jboss-seam/tree/Seam_2_3/examples/tasks


https://github.com/wildfly/wildfly-core/pull/442/files",,,,,,,,,,,,,,,,,,,,,JBIDE-19029,AS7-1345,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/442/files,,,,,,0.0,2.0,,1|hzupzz:,9223372036854775807,,,,,,,,,,,21/Jan/15 1:41 AM;rob.stryker;Linking JBIDE issue. ,"21/Jan/15 2:02 AM;rob.stryker;While AS7-1345  fixed the issue in version 1,.1 of the schema, the fact is that several example projects are still using the 1.0 schema file in their various descriptors. We can't force the example projects to update, and even if we could, it would make those example projects no longer valid for older versions of wildfly. 

Assuming there's no issue with changing this (ie backwards compatability), I think it should still be fixed in the 1.0 version of the schema. 

If there *is* an issue with the schema, then there's not much we can do aside from try to strong-arm the various example projects to use the newer schema. 

 We in JBoss Tools could also just update our copy of the schema, but this would make it no longer match the official version and I think that's the wrong path to go. ",,,,,,,,,,,,,,,,,,,,,,,,,
ConfigurationFile.successfulBoot() may try to write in an unwriteable dir,WFCORE-515,12561319,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,yersan,brian.stansberry,brian.stansberry,20/Jan/15 9:29 PM,21/Mar/16 10:18 PM,29/Nov/16 3:54 PM,21/Mar/16 10:18 PM,,,,,,,3.0.0.Alpha1,,Domain Management,,,,,0,,,,,,"ConfigurationFile.successfulBoot() creates a temp file when persistOriginal is false. It locates it in the same directory as mainFile, but in the !persistOriginal case, mainFile may point to any location, not necessarily to something in the configuration dir, and its directory may not be writable by the WildFly process.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzupzb:,9223372036854775807,,,,,,,,,,,"20/Jan/15 9:58 PM;brian.stansberry;ConfigurationFilePersistenceResource.doCommit() seems to be doing the same thing, calling FilePersistenceUtils.createTempFile(fileName), where ""fileName"" is the same as ConfigurationFile.mainFile.",01/Mar/16 6:55 PM;yersan;[~brian.stansberry] Any suggestions about what to do if there is no enough rights to write in mainFile location? ,"02/Mar/16 11:56 AM;brian.stansberry;The configuration dir should be fine.

https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/persistence/ConfigurationFile.java#L458",,,,,,,,,,,,,,,,,,,,,,,,
ConfigurationFile.snapshot() stores the wrong file when config persistence is disabled,WFCORE-514,12561317,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,20/Jan/15 9:04 PM,22/Jan/15 10:27 PM,29/Nov/16 3:54 PM,22/Jan/15 10:27 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"ConfigurationFile.snapshot() always uses mainFile as the source of the snapshot, but when --read-only-server-config and the domain equivalents are used, that file isn't updated as config changes are made. In this case lastFile should be used.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/448,,,,,,0.0,0.0,,1|hzupyv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ConfigurationFile does invalid reload when special config file names are specified,WFCORE-513,12561316,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,20/Jan/15 8:58 PM,22/Jan/15 10:26 PM,29/Nov/16 3:54 PM,22/Jan/15 10:26 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"ConfigurationFile records the value passed by -c or --[server|host|domain]-config and uses it to determine the boot file to use whenever it needs to boot. This is ok during initial boot, but it reuses it during reloads.

This breaks down when specials values like ""initial"", ""boot"", ""v1"" or some snapshot are used. The reload ends up reading from the original file again, not from the latest persisted one, and any changes made are lost.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/448,,,,,,0.0,0.0,,1|hzupyn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Unit test FileSystemDeploymentServiceUnitTestCase fails on IBM JDK ,WFCORE-507,12561070,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,ehugonnet,ehugonnet,ehugonnet,16/Jan/15 9:01 AM,10/Feb/15 7:53 AM,29/Nov/16 3:54 PM,20/Jan/15 5:16 AM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Test Suite,,,,,0,,,,,,"Always on IBM JDK org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.testNoUndeployment fails with:
   - java.net.ConnectException: Connection refused
   - java.lang.UnsupportedOperationException: cannot get the capability, performing dispose of the retransforming environment",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1182466,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/438,,,,,,0.0,4.0,,1|hzuokn:,9223372036854775807,,,,,,,,,,,16/Jan/15 9:15 AM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 1182466|https://bugzilla.redhat.com/show_bug.cgi?id=1182466] from NEW to POST,20/Jan/15 8:50 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1182466|https://bugzilla.redhat.com/show_bug.cgi?id=1182466] from POST to MODIFIED,06/Feb/15 6:22 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1182466|https://bugzilla.redhat.com/show_bug.cgi?id=1182466] from MODIFIED to ON_QA,10/Feb/15 7:53 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1182466|https://bugzilla.redhat.com/show_bug.cgi?id=1182466] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Incoherence in core dist between domain.xml and  host(-slave).xml,WFCORE-506,12560983,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,ehugonnet,ehugonnet,ehugonnet,15/Jan/15 8:58 AM,16/Jan/15 4:10 AM,29/Nov/16 3:54 PM,16/Jan/15 4:10 AM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"host.xml and host-slave.xml reference a other-server-group which is not defined in domain.xml.
Provide either correct host files or domain.xml to be able to use the dist in domain mode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/435,,,,,,0.0,0.0,,1|hzuo1z:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix double redeployment due to .failed file and a artifact with newer timestamp.,WFCORE-505,12560943,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,15/Jan/15 3:07 AM,15/May/15 3:54 AM,29/Nov/16 3:54 PM,23/Jan/15 5:23 PM,1.0.0.Alpha15,,,,,,1.0.0.Beta5,,Server,,,,,0,,,,,,"Issue found and described in https://bugzilla.redhat.com/show_bug.cgi?id=1169239

steps to reproduce:

1. deploy a ""Test.war""
2. Change something in ""Test.war"" to fail it.
3. ""Test.war.failed"" file will be created.
4. stop JBoss EAP.
5. Revert the changes done in ""Test.war"" so that it will deploy successfully. 
6. Now there are two files (""Test.war.failed"" and ""Test.war"", due to correction, Test.war must have a newer timestamp than Test.war.failed)in deployment directory. 
7. Restart JBoss EAP, it will fail with below Error :

The problem happens as a result of redundant redeployment in next reboot. During servert reboot, it will try to redeploy the application due to found .failed file, it also will try to redeploy same application because Test.war has a newer timestamp to see the problem. This will cause server startup failure as:

{noformat}
ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 18) JBAS014613: Operation (""add"") failed - address: ([(""deployment"" => ""Test.war"")]) - failure description: ""JBAS014803: Duplicate resource [(\""deployment\"" => \""Test.war\"")]
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1169239,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/434,https://github.com/wildfly/wildfly-core/pull/630,,,,,0.0,4.0,,1|hzuntz:,9223372036854775807,,,,,,,,,,,06/Mar/15 4:29 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1169239|https://bugzilla.redhat.com/show_bug.cgi?id=1169239] from NEW to POST,04/May/15 12:45 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1169239|https://bugzilla.redhat.com/show_bug.cgi?id=1169239] from POST to MODIFIED,14/May/15 7:15 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1169239|https://bugzilla.redhat.com/show_bug.cgi?id=1169239] from MODIFIED to ON_QA,15/May/15 3:54 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1169239|https://bugzilla.redhat.com/show_bug.cgi?id=1169239] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
RBAC does not let server-group scoped roles read all hosts,WFCORE-504,12560938,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,14/Jan/15 11:59 PM,17/Feb/15 7:33 AM,29/Nov/16 3:54 PM,21/Jan/15 8:55 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"The RBAC implementation is not allowing a server-group scoped role to read resources in the host=* tree unless one of these is true:

1) the host only contains a server mapped to the server group
2) the host doesn't contain any servers.

This is consistent with handling of other ""mappable"" things but is contrary to the docs, which declare

""In addition to these privileges, users in a server-group scoped role will have non-sensitive read privileges (equivalent to the Monitor role) for resources other than those listed above.""

but don't list these host resources.

It's also unintuitive, as the s-g-s-r is actually allowed to add a server on the host, but can't read the other host resources before doing so.

Also, asking the DC for the list of host names will include the host, but trying to read its root resource will result in a NoSuchResourceException.

The issue dates back to 8.0, but recent changes to the console have resulted in this breaking console behavior.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1178810,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/433,,,,,,0.0,4.0,,1|hzunt3:,9223372036854775807,,,,,,,,,,,15/Jan/15 10:24 AM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1178810|https://bugzilla.redhat.com/show_bug.cgi?id=1178810] from ASSIGNED to POST,26/Jan/15 6:42 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1178810|https://bugzilla.redhat.com/show_bug.cgi?id=1178810] from POST to MODIFIED,06/Feb/15 6:22 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1178810|https://bugzilla.redhat.com/show_bug.cgi?id=1178810] from MODIFIED to ON_QA,17/Feb/15 7:33 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1178810|https://bugzilla.redhat.com/show_bug.cgi?id=1178810] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Child resources under the deployment=XXX resource should be marked as runtime-only,WFCORE-503,12560934,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,brian.stansberry,brian.stansberry,14/Jan/15 8:24 PM,22/Jan/15 10:25 PM,29/Nov/16 3:54 PM,22/Jan/15 10:25 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"Underneath a deployment resource there can be a large tree of runtime-only resources. Those resources are not getting the correct value for their isRuntime() property.

DeploymentModelUtils.getOrCreate() should call Resource.Factory.create(true) instead of just Resource.Factory.create().

Note this may break the console if it is doing a recursive read of deployment resources and not including the include-runtime=true param.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/402,,,,,,0.0,2.0,,1|hzuns7:,9223372036854775807,,,,,,,,,,,"15/Jan/15 9:06 AM;brian.stansberry;Hi Tomaz,

Please coordinate with Harald or Heiko on this so we don't break the console. There's probably no issue, but if there is all they need to do is add include-runtime=true to requests that want to read below the deployment=* node.",15/Jan/15 3:53 PM;ctomc;Console should be fine at least looking at the code: fine https://github.com/hal/core/blob/master/gui/src/main/java/org/jboss/as/console/client/shared/deployment/DeploymentStore.java#L220,,,,,,,,,,,,,,,,,,,,,,,,,
ServerGroupAddHandler should add a separate step to validate profile and socket-binding-group refs,WFCORE-501,12560851,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,13/Jan/15 11:52 AM,16/Jan/15 10:44 AM,29/Nov/16 3:54 PM,16/Jan/15 10:44 AM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"Validating references directly will imply specific ordering, in this case profile and socket-binding-group will have to be added before this handler executes. Postponing the validation to the next step will remove such a requirement.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/432,,,,,,0.0,1.0,,1|hzun9z:,9223372036854775807,,,,,,,,,,,16/Jan/15 10:44 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
domain mode: remove a path entry from a server instance fails,WFCORE-500,12560828,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,tfonteyn,tfonteyn,13/Jan/15 8:10 AM,16/Feb/15 8:08 AM,29/Nov/16 3:54 PM,21/Jan/15 8:53 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"Adding a ""path"" to a ""server-config"" in domain mode (works fine) and then remove it again results in a NullPointerException",Wildfly master build 2015-01-13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1181618,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/443,,,,,,0.0,5.0,,1|hzun4v:,9223372036854775807,,,,"in domain mode (DC started, no servers started)

/host=master/server-config=i1/path=foo.bar:add(path=""/tmp"")
=> success

/host=master/server-config=i1/path=foo.bar:remove

[[Host Controller] 13:19:02,569 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""remove"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""server-config"" => ""i1""),
[Host Controller]     (""path"" => ""foo.bar"")
[Host Controller] ]): java.lang.NullPointerException
[Host Controller]       at org.jboss.as.controller.services.path.PathManagerService.removePathEntry(PathManagerService.java:181)
[Host Controller]       at org.jboss.as.controller.services.path.PathRemoveHandler$1.execute(PathRemoveHandler.java:90)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:743)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:578)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)
[Host Controller]       at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1181)
[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:357)
[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:216)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:220)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:147)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:169)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:165)
[Host Controller]       at java.security.AccessController.doPrivileged(Native Method)
[Host Controller]       at javax.security.auth.Subject.doAs(Subject.java:415)
[Host Controller]       at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:165)
[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
[Host Controller]       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
[Host Controller]       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
[Host Controller]       at java.lang.Thread.run(Thread.java:745)
[Host Controller]       at org.jboss.threads.JBossThread.run(JBossThread.java:320)",,,,,Workaround Exists,manually edit the xml,"13/Jan/15 8:12 AM;tfonteyn;Debugging showed this:

/host=master/server-config=i1/path=foo.bar:add(path=""/tmp"")

org.jboss.as.controller.services.path:  PathAddHandler.java

public void execute(final OperationContext context, final ModelNode operation) throws OperationFailedException {
        final ModelNode model = resource.getModel();
        PathAddress address = PathAddress.pathAddress(operation.get(OP_ADDR));
        final String name = address.getLastElement().getValue();
        pathAttribute.validateAndSet(operation, model);
        RELATIVE_TO.validateAndSet(operation, model);

        if (services) {

validateAndSet adds the path to the server, and ""services==false"" ==> all fine

---------------------------------------------------------------

/host=master/server-config=i1/path=foo.bar:remove

org.jboss.as.controller.services.path:  PathRemoveHandler.aja

    public void execute(OperationContext context, ModelNode operation) throws OperationFailedException {

        final PathAddress address = PathAddress.pathAddress(operation.require(OP_ADDR));
        final String name = address.getLastElement().getValue();

        final ModelNode model = Resource.Tools.readModel(context.readResource(PathAddress.EMPTY_ADDRESS));

        if (model.get(READ_ONLY.getName()).asBoolean(false)) {
            throw ControllerMessages.MESSAGES.cannotRemoveReadOnlyPath(name);
        }

        context.removeResource(PathAddress.EMPTY_ADDRESS);

        if (services) {


context.removeResource   removed the path, BUT ""services==true"" ... which ends up looking for the path in the pathEntries of the domain controller and fails to find it... obvious as it was never there.",19/Jan/15 2:53 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1181618|https://bugzilla.redhat.com/show_bug.cgi?id=1181618] from NEW to POST,21/Jan/15 4:40 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1181618|https://bugzilla.redhat.com/show_bug.cgi?id=1181618] from POST to MODIFIED,06/Feb/15 6:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1181618|https://bugzilla.redhat.com/show_bug.cgi?id=1181618] from MODIFIED to ON_QA,16/Feb/15 8:08 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1181618|https://bugzilla.redhat.com/show_bug.cgi?id=1181618] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
System properties are broken in domain mode,WFCORE-499,12560803,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,swd847,swd847,12/Jan/15 8:54 PM,23/Sep/15 9:38 AM,29/Nov/16 3:54 PM,06/Feb/15 6:21 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha17,,Domain Management,,,,,0,,,,,,"There seems to be some weirdness in how system properties are being propagated to domain mode servers, and in many cases they are not being applied. 

This appears to be an issue with the boot time handling of system properties.

The only way I could get the property to be applied was to start the server first, then add the property using boot-time=false, although even in this case the property will disappear if the domain is restarted or the server is reloaded. 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1257301,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/463,,,,,,0.0,4.0,,1|hzumzb:,9223372036854775807,,,,,,,,,,,"30/Jan/15 6:32 AM;ehugonnet;The ""boot-time"" attribute is not defined for standalone servers, thus also for managed servers.
",01/Sep/15 8:33 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1257301|https://bugzilla.redhat.com/show_bug.cgi?id=1257301] from POST to MODIFIED,16/Sep/15 10:55 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1257301|https://bugzilla.redhat.com/show_bug.cgi?id=1257301] from MODIFIED to ON_QA,23/Sep/15 9:38 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1257301|https://bugzilla.redhat.com/show_bug.cgi?id=1257301] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
OperationStepHandlers for audit log handler add ops prematurely validate,WFCORE-497,12560780,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,12/Jan/15 11:35 AM,14/Jan/15 12:35 PM,29/Nov/16 3:54 PM,14/Jan/15 12:35 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Domain Management,,,,,0,,,,,,"SyslogAuditLogHandlerAddHandler and FileAuditLogHandlerAddHandler are doing reference validation directly in populateModel. This should instead be done in a separate step, removing the requirement to have the add op for the formatter occur before the add op for the handler, so long as both ops occur within the set of ops handled by the same OperationContext.

This will simplify booting from a filesystem tree instead of xml, removing the need to persist ordering information about formatter/handler in the FS.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/427,,,,,,0.0,0.0,,1|hzumuf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add-user.sh - if password contains § it is not possible to log into the webinterface,WFCORE-496,12560758,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,doev,doev,12/Jan/15 8:55 AM,10/Nov/16 6:52 AM,29/Nov/16 3:54 PM,10/Nov/16 6:52 AM,,,,,,,3.0.0.Alpha13,,Domain Management,Security,,,,0,,,,,,,"wheezy, Firefox 34.0.5, Chrome 36.0.1985.125",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzumpz:,9223372036854775807,,,,,,,,,,"add-user.sh - if password contains § it is not possible to log into the webinterface

I tested it with different keyboard layouts (de/us).","10/Nov/16 6:52 AM;dlofthouse;Management authentication is being moved to Elytron, this issue should be re-opened if the problem remains once the migration is complete.",,,,,,,,,,,,,,,,,,,,,,,,,,
"WFLY won't startup due to ""WFLYCTL0212: Duplicate resource [(\""deployment\"" => \""xxx.war\"")]""",WFCORE-495,12560722,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,soul2zimate,soul2zimate,soul2zimate,12/Jan/15 3:48 AM,07/Jun/16 12:41 PM,29/Nov/16 3:54 PM,23/Jan/15 5:27 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,Server,,,,,0,,,,,,"WFLY won't startup due to ""WFLYCTL0212: Duplicate resource [(\""deployment\"" => \""xxx.war\"")]""

If you firstly deploy a .war application by CLI command, then deploy 2nd time same .war application by copying it to /depolyment directory. After server restart, it shows:
{noformat}
15:26:26,913 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0049: WildFly Full 9.0.0.Alpha2-SNAPSHOT (WildFly Core 1.0.0.Alpha15) starting
15:26:27,133 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""xxx.war"")]) - failure description: ""WFLYCTL0212: Duplicate resource [(\""deployment\"" => \""xxx.war\"")]""
15:26:27,136 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
15:26:27,138 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.
15:26:27,153 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Full 9.0.0.Alpha2-SNAPSHOT (WildFly Core 1.0.0.Alpha15) stopped in 4ms
{noformat}

steps to reproduce:

1. start wildfly and deploy a .war application by CLI.
2. copy same .war application to /deployment directory
3. restart wildfly to see the error message. 

This happens because step 2 does a ""full-replace-deployment"" operation which does not remove content from standalone/data/content/aa/2d0425dd53572294d591b56efdee2680539eaf/content and deployment info from configuration file(standalone.xml). Therefore, you will have xxx.war in standalone/data/content and configuration file(standalone.xml), also a xxx.war and xxx.war.deployed file inside /standalone/deployments. A second time server restart will cause a duplicate resource error.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/441,,,,,,0.0,0.0,,1|hzumhz:,9223372036854775807,,,,,,,,,,"Before restart, manually removing first deployment from configuration file (standalone.xml)",,,,,,,,,,,,,,,,,,,,,,,,,,,
fix JMX ObjectNameAddressUtil#toPathAddress,WFCORE-492,12560334,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jmesnil,jmesnil,jmesnil,06/Jan/15 11:46 AM,12/Jan/15 8:33 AM,29/Nov/16 3:54 PM,06/Jan/15 5:17 PM,1.0.0.Alpha15,,,,,,1.0.0.Alpha16,,,,,,,0,,,,,,"The code in ObjectNameAddressUtil#toPathAddress is wrong: it must look for the childAddress's submodel, not the address of the registry itself.

The current code fails with the exception:

org.jboss.as.controller._private.OperationFailedRuntimeException: WFLYCTL0071: Duplicate path element 'subsystem' found [ ""WFLYCTL0071: Duplicate path element 'subsystem' found"" ]
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1113908,https://bugzilla.redhat.com/show_bug.cgi?id=1179387,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/419,,,,,,0.0,3.0,,1|hzukkv:,9223372036854775807,,,,,,,,,,,06/Jan/15 11:49 AM;jmesnil;PR for master branch,06/Jan/15 12:10 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1179387|https://bugzilla.redhat.com/show_bug.cgi?id=1179387] from NEW to CLOSED,12/Jan/15 8:33 AM;jira-bugzilla-migration;Ondřej Kalman <okalman@redhat.com> changed the Status of [bug 1113908|https://bugzilla.redhat.com/show_bug.cgi?id=1113908] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,,
"The ""access-mechanism"" field in the active-operation resources is always undefined",WFCORE-489,12560060,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,24/Dec/14 8:42 AM,17/Mar/16 6:50 PM,29/Nov/16 3:54 PM,10/Apr/15 3:48 PM,1.0.0.Alpha15,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"The ""access-mechanism"" field in core-service=management/service=active-operations/active-operation=* is always undefined. The code that sets it is using the wrong var:

{code}
ModelNode accessMechanismNode = model.get(ACCESS_MECHANISM);
if (accessMechanism != null) {
    accessMechanismNode.set(accessMechanismNode.toString());
}
{code}

It should be accessMechanism.toString()",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/607,,,,,,0.0,3.0,,1|hzuixj:,9223372036854775807,,,,,,,,,,,18/Mar/15 4:20 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from NEW to ASSIGNED,16/Feb/16 1:35 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from ASSIGNED to NEW,17/Mar/16 6:50 PM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from NEW to ASSIGNED,,,,,,,,,,,,,,,,,,,,,,,,
Failures of undeploy of a partially failed deployment,WFCORE-488,12560043,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,arcivanov,arcivanov,23/Dec/14 6:04 PM,07/Mar/15 8:28 AM,29/Nov/16 3:54 PM,07/Mar/15 8:28 AM,,,,,,,1.0.0.Beta1,,CLI,Domain Management,,,,0,,,,,,"{noformat}
[domain@localhost:9990 /] undeploy 2e3b75f2-88ff-4eb9-a8b1-9107c452309e.ear --all-relevant-server-groups
Undeploy failed: JBAS010839: Operation failed or was rolled back on all servers.
{noformat}

There are several issues at play here:
# Insufficient information is displayed along with JBAS010839
# No actual failure logged either in DC or in individual host's logs
# Failure to find a deployment unit on a particular host should not result in a failure of a domain-wide undeploy in DeploymentUndeployHandler

I'll start in a reverse order of causation:

In DeploymentUndeployHandler.execute
{noformat}
    public void execute(OperationContext context, ModelNode operation) throws OperationFailedException {
        ModelNode model = context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS).getModel();
...
{noformat}

OperationContextImpl.readResourceForUpdate calls OperationContextImpl.requireChild:
{noformat}
    private static Resource requireChild(final Resource resource, final PathElement childPath, final PathAddress fullAddress) {
        if (resource.hasChild(childPath)) {
            return resource.requireChild(childPath);
        } else {
            PathAddress missing = PathAddress.EMPTY_ADDRESS;
            for (PathElement search : fullAddress) {
                missing = missing.append(search);
                if (search.equals(childPath)) {
                    break;
                }
            }
            throw ControllerMessages.MESSAGES.managementResourceNotFound(missing);
        }
    }
{noformat}

The exception generated by {{throw ControllerMessages.MESSAGES.managementResourceNotFound(missing);}}: 
# does not propagate from the host to DC and to CLI
# is not logged with any level (not even TRACE) either on host or DC
# should be handled within DeploymentUndeployHandler not to fail the undeploy operation in case of a partially failed deployment (e.g. EAR with unsatisfied CDI dependencies).




",,,,,,,,,,,,,,,,,,,,,WFLY-4212,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/513,,,,,,0.0,10.0,,1|hzuitr:,9223372036854775807,,,,,,,,,,,"23/Dec/14 7:06 PM;brian.stansberry;In what process did the ""throw ControllerMessages.MESSAGES.managementResourceNotFound(missing)"" occur? 

Any idea why the deployment resource was not present there?

Re:  ""1. does not propagate from the host to DC and to CLI""

Are you saying it doesn't propagate to the DC? Or just that it's not propagated to the CLI? Or just that it's not *reported* by the CLI? The CLI has an issue with not providing full details of failures in its output from high level commands.","23/Dec/14 8:08 PM;brian.stansberry;Answering one of my own questions...

> In what process did the ""throw ControllerMessages.MESSAGES.managementResourceNotFound(missing)"" occur?

It had to have been on a server, as that is the only place DeploymentUndeployHandler is registered.","23/Dec/14 8:13 PM;arcivanov;Firstly, while I appreciate moving this to WFCORE, this affects 8.2.0.Final first and foremost and that's what should be targeted for a fix primarily as far as I'm concerned, since I'm trying to move to WFLY 8.2.0.Final.

The process where exception is generated is a domain-controlled server on one of the domain hosts, the exception is ""org.jboss.as.controller.NoSuchResourceException: JBAS014807: Management resource '[(""deployment"" => ""7d829f16-ebd3-4c57-a14f-55e732e2e975.ear"")]' not found""

It definitely doesn't propagate to CLI. I'll get back to you on whether it gets to DC as an exception, in a form of {{step.response.get(FAILURE_DESCRIPTION).set(failDesc)}} or not at all.

The reason the deployment resource was not present is a subject of a different regression bug I'm going to be filing. An Arquillian EAR containing a WAR, an EJB jar and a utility jar in the EAR/lib containing CDI beans injected by EJB jar fails to deploy due to 8.2.0.Final WELD not recognizing any of the synthetic beans in the utility jar as such and failing to inject them into the EJB. This is a regression from 8.1.0.Final since the same test has no issues deploying there.

Why this partial deployment state is inconsistent between the DC and domain-controlled servers is a mystery and may be a result of some other domain-management bug.

My next step will be to come up with an isolated reproducible test and filing CDI regression bug.","23/Dec/14 8:17 PM;arcivanov;>> Answering one of my own questions...
Correct. I'm currently connected with a debugger to both the DC and on of the server-group servers, so if you have further questions let me know. :)","23/Dec/14 8:27 PM;arcivanov;I am sitting right now inside {{DeploymentRemoveHandler$1$1.handleResult(OperationContext$ResultAction, OperationContext, ModelNode) line: 80}}
{noformat}
               context.completeStep(new OperationContext.ResultHandler() {
                    @Override
                    public void handleResult(ResultAction resultAction, OperationContext context, ModelNode operation) {
                        if (resultAction != ResultAction.ROLLBACK) {
                            removeContent(name, deploymentHashes);
                        }
                    }
                });
{noformat}

and introspecting {{operation}} or {{context}} I cannot find any failure information except for {{resultAction}} being {{ROLLBACK}}.

So I would say the failure information is not getting to the DC altogether, rather than a simply CLI.

{{context.activeStep.outcome}} is undefined for all ModelNodes recursively.","23/Dec/14 8:33 PM;arcivanov;Inside {{AbstractOperationContext$Step.finalizeInternal() line: 1015}} {{response.get(FAILURE_DESCRIPTION)}} is 'undefined', so I'd say the error information definitely does not arrive onto DC.","23/Dec/14 9:28 PM;brian.stansberry;I'm sorry to say we are not actively working on further 8.x releases, so it's quite unlikely this will be fixed there.

There shouldn't be anything in DeploymentRemoveHandler$1$1.handleResult(OperationContext$ResultAction, OperationContext, ModelNode) line: 80 on the DC, as that step is the local DC execution of the remove, which doesn't have a failure.

I expect BlockingQueueOperationListener.operationFailed to be invoked on the DC.","23/Dec/14 11:21 PM;arcivanov;>> we are not actively working on further 8.x releases
If need be I'll backport and create a patch myself, not a problem. 

That said, I find it peculiar that the latest stable release of the container is abandoned as soon as it is released. I understand this is a community product and RH officially provides no support but it still is targeted at the enterprise audience so even though 9.0 will be the next latest and greatest, until it is so we still need to use 8.x versions as a current platform and bugs like this have to be fixed somehow. 

Maybe community patching/Service Pack effort should be initiated? I have no problem assembling my own WLFY with controlled patches applied, but it may be too cumbersome/advanced for some users.

>> I expect BlockingQueueOperationListener.operationFailed to be invoked on the DC.
{{ServerUpdatePolicy.recordServerResult(ServerIdentity, ModelNode) line: 140}} receives the failure information, but the failure information doesn't seem propagate/attach to the originating operation/step.
","20/Feb/15 3:30 PM;brian.stansberry;The failure information is correctly getting back to the master HC, but DomainFinalResultHandler ends up discarding it because the slave HCs are reporting failures as well. Basically the scenario I speculated on at https://issues.jboss.org/browse/AS7-4597?focusedCommentId=12688863&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12688863.

So I need to work out how to better handle that.","23/Feb/15 1:14 PM;brian.stansberry;Here's where I expect to end up with this (reflected in the linked pull request):

1) It would be good to know how the deployment ended up not installed on one server, but installed elsewhere. Hopefully with a reproducer. Unless a rollout plan specified that, that's a bug. But we should treat that as a separate bug.

2) Once a server gets out of sync with the domain config (say because you made a change with a rollout plan that allowed this), you can get failures like you report if you try and make further changes. Options are:

a) stop the server that is inconsistent before making the changes
b) specify a rollout plan that will not rollback if 1 server fails in the given server group. See ""Rollout plans"" in https://developer.jboss.org/wiki/JBossAS7Command-lineOperationRequestFormat and https://docs.jboss.org/author/display/WFLY9/Admin+Guide#AdminGuide-OperationswithaRolloutPlan .

The linked PR includes tests of 2)b). It worked as expected.

Alternatives to the current behavior are to no longer send config changes to servers that are out of sync and basically force the user to restart them. That can introduce it's own problems though, and requires a lot of care. I'm not sure it's a good idea. See WFCORE-368.

3) There was a bug that resulted in ""server-groups"" data not getting reported to the client when this failure occurs, contrary to what's specified in https://docs.jboss.org/author/display/WFLY9/Admin+Guide#AdminGuide-MultiServerResponses. The data was received properly on the master HC, but it misinterpreted what occurred as a failure applying the change to the slave HCs and assumed no server results were available, so it did not include them. The linked PR fixes this.

4) The linked PR also changes how the top level ""failure-description"" for the response is generated, attempting to extract useful data from the server results and including it in the top level failure-description. This will help improve the error reporting from CLI high level commands and similar clients, where the full response may not be displayed to the user, only the failure-description.

5) If I learn of any possibility for another 8.x release, I'll be happy to backport any commits on this to the 8.x branch.",,,,,,,,,,,,,,,,,
Standalone.bat not support log dir with spaces in path (jboss.server.log.dir),WFCORE-485,12556308,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jamezp,ducquoc_vn,ducquoc_vn,30/Oct/14 2:38 AM,12/May/15 2:38 AM,29/Nov/16 3:54 PM,17/Dec/14 11:33 AM,,,,,,,1.0.0.Alpha14,,Logging,Scripts,,,,0,,,,,,"I tried to specify a custom log folder for WildFly, by overriding property  jboss.server.log.dir 
https://docs.jboss.org/author/display/WFLY8/Command+line+parameters

But it only works for folder without space in path. The ones with space when used with ""jboss.server.log.dir"" will prevent wildfly from starting. 

Working: 
C:\>start C:\wildfly-8.1.0.Final\bin\standalone.bat 
C:\>start C:\wildfly-8.1.0.Final\bin\standalone.bat -Djboss.server.log.dir=""C:\Windows""

Not working (server can not start):
C:\>start C:\wildfly-8.1.0.Final\bin\standalone.bat -Djboss.server.log.dir=""C:\Program Files""

(More info:
JBoss AS 7.1 works: 
C:\> start C:\jboss-as-7.1.1.Final\bin\standalone.bat -Djboss.server.log.dir=""C:\Program Files""

JBoss EAP 6 and WildFly 8.0 not working either:
C:\> start C:\jboss-eap-6.2\bin\standalone.bat -Djboss.server.log.dir=""C:\Program Files""
C:\> start C:\wildfly-8.0.0.Final\bin\standalone.bat -Djboss.server.log.dir=""C:\Program Files""

Aready tried setting jboss.server.log.dir=""C:\Program Files"" in JAVA_OPTS but did not work either. Should have been fixed in WFLY-1358 or WFLY-2348.
)",Windows 7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/374,,,,,,0.0,5.0,,1|hztx6v:,9223372036854775807,,,,"1/ Download WildFly 8.1.0 Final for windows (zip)
2/ Extract it to C:\wildfly-8.1.0.Final
3/ try to start server with custom log dir containing spaces:
C:\>start C:\wildfly-8.1.0.Final\bin\standalone.bat -Djboss.server.log.dir=""C:\Program Files""
",,,,,,,16/Dec/14 4:29 PM;jamezp;This should be working upstream,"17/Dec/14 9:23 AM;ducquoc_vn;Thank you for the reply, but can you please specify the version in which the app server is ""working""; or the Git branch that works ?

I am a developer and I think I can fix it by editing the standalone.bat  . If I manage to do that, may I create a pull request for merging ? (at least backport for some old versions).","17/Dec/14 11:30 AM;jamezp;Looks like it's only fixed upstream, https://github.com/wildfly/wildfly-core/blob/master/core-feature-pack/src/main/resources/content/bin/standalone.bat. We won't be back porting it to the 8.x branch as it's frozen.",17/Dec/14 11:31 AM;jamezp;This may have been the PR that fixed it as it contained several script changes. The end result is that the script now works :),"21/Dec/14 11:07 PM;ducquoc_vn;I've checked the new script on 8.1.0.Final and jboss-eap-6.2. It works both !
Thank you :) .",,,,,,,,,,,,,,,,,,,,,,
OperationContext.getResourceRegistrationForUpdate().registerAlias(...) throws AssertionError,WFCORE-484,12559721,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,pferraro,pferraro,16/Dec/14 6:11 PM,22/Dec/14 7:18 PM,29/Nov/16 3:54 PM,22/Dec/14 7:18 PM,1.0.0.Alpha14,,,,,,1.0.0.Alpha15,,Domain Management,,,,,0,,,,,,"OperationContext.getResourceRegistrationForUpdate().registerAlias(...) throws the following:
{noformat}
java.lang.AssertionError: Unknown alias type
	at org.jboss.as.controller.registry.AbstractResourceRegistration.registerAlias(AbstractResourceRegistration.java:503)
	at org.jboss.as.controller.registry.DelegatingManagementResourceRegistration.registerAlias(DelegatingManagementResourceRegistration.java:310)
	at org.jboss.as.clustering.jgroups.subsystem.TransportResourceDefinition$5$1.execute(TransportResourceDefinition.java:360)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:728)
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:563)
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1163)
	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:421)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:304)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:256)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:299)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:266)
	at java.lang.Thread.run(Thread.java:745)
{noformat}

This is because OperationContext.getResourceRegistrationForUpdate() returns a DelegatingManagementResourceRegistration, which does not extend AbstractResourceRegistration - so the assertion fails.

Is there a technical reason why this should not work?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/405,,,,,,0.0,0.0,,1|hzugvz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The testFormats() tests in the HandlerOperationsTestCase needs to ensure colors are being used,WFCORE-479,12498350,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jamezp,jamezp,jamezp,09/Aug/13 3:45 PM,16/Dec/14 4:36 PM,29/Nov/16 3:54 PM,,,,,,,,,,Logging,,,,,0,,,,,,In environments like Windows colored log output is not turned on by default. The test needs to take this into account and not assume that colored output will be printed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hziebb:,167751,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log4j ConsoleAppender won't display messages with per-deployment logging,WFCORE-478,12500124,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Out of Date,jamezp,jamezp,jamezp,05/Sep/13 12:22 PM,30/Sep/15 6:28 PM,29/Nov/16 3:54 PM,30/Sep/15 6:28 PM,,,,,,,,,Logging,,,,,6,,,,,,"Add the following log4j.properties file to a deployment and try to log.
{code}
# Root logger option
log4j.rootLogger=INFO, stdout

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://community.jboss.org/thread/229578,,,,,,,,,0.0,12.0,,1|hzipe7:,169427,,,,,,,,,,,17/Feb/14 6:26 AM;bugflux;Same problem here,17/Feb/14 11:52 AM;jamezp;Same problem in 8.0.0.Final?,17/Feb/14 11:56 AM;bugflux;I'm using 8.0.0.Final and can't seem to get per-deployment log4j appending to stdout. DailyRollingFileAppender is working.,"17/Oct/14 6:09 AM;vicropa;I think priority of this bug is not minor. This is very important, I wait this be fixed soon.","02/Mar/15 2:45 AM;arslnmsd;Is there a workaround for this until a proper fix is available?
",02/Mar/15 11:47 AM;jamezp;Don't use a {{ConsoleAppender}} :D Seriously though I'm not sure as I haven't dug into it yet. If you could explain your use case though maybe we could figure out a workaround.,"03/Mar/15 6:39 AM;geert.coelmont;Working with per-deployment configurable ConsoleAppender is IMHO essential for flexible development.
Suppose my development environment consists of several projects, each deployed to my local Wildfly server, that share a common utility project (deployed as a Jar in each of the applications). Suppose today I'm working on a single one of these projects and in the context of that I want to debug a class Foo from the utility project. I could add Foo to the log4j.properties of my current project and redeploy only this project. I would then see (in my development env. console) logging generated by Foo only from within this one project. Other deployed projects using Foo would not generate logging and thus not clutter my console output.
Currently I'm forced to alter the server's standalone.xml logging section, which impacts all other deployments, causing a lot of output that I don't want to see. This apart from the burden of having to restart the whole server with each change of logging settings.
Not sure what alternatives to ConsoleAppender exist that would allow me to do the same.","03/Mar/15 6:58 AM;arslnmsd;I agree with Geert and I am facing the same problem (use case).

I am using Eclipse and I found a plugin that does something similar to what a tail command does in Linux. So I can configure a DailyRollingFileAppender in log4j and tail it using the Eclipse plugin.

That is OK for me for the time being.","03/Mar/15 12:01 PM;jamezp;Because of the way the {{ConsoleAppender}} works and the fact the WildFly wraps {{System.out}} and {{System.err}} there are potential deadlocks with using a {{ConsoleAppender}} with per-deployment logging.

If you're not using any other special appenders you could just use a {{logging.properties}} file and the {{org.jboss.logmanager.handlers.ConsoleHandler}}. This will work the same regardless of the logging facade you use. The JBoss Log Manager {{logging.properties}} file looks similar to a log4j one. Here's an example of one using the {{ConsoleHandler}}

{code}
# Additional logger names to configure (root logger is always configured)
loggers=org.jboss.as.logging

# Root logger level
logger.level=INFO
# Root logger handlers
logger.handlers=CONSOLE

logger.org.jboss.as.logging.level=TRACE

# Console handler configuration
handler.CONSOLE=org.jboss.logmanager.handlers.ConsoleHandler
handler.CONSOLE.properties=autoFlush
handler.CONSOLE.level=TRACE
handler.CONSOLE.autoFlush=true
handler.CONSOLE.formatter=PATTERN

# Formatter pattern configuration
formatter.PATTERN=org.jboss.logmanager.formatters.PatternFormatter
formatter.PATTERN.properties=pattern
formatter.PATTERN.pattern=%d{HH:mm:ss,SSS} %-5p [%c] %s%e%n
{code}

Another option would be use a [jboss-deployment-structure.xml to exclude the logging subsystem|https://docs.jboss.org/author/display/WFLY8/How+To#HowTo-HowdoIusemyownversionoflog4j%3F]. You'd then need to provide your own version of log4j in your deployment. That should get around the possible deadlock if you'd rather use log4j appenders.

A third option would be to use [logging profiles|https://docs.jboss.org/author/display/WFLY8/Logging+Configuration#LoggingConfiguration-LoggingProfiles]. With these you can isolate the logging configuration per-deployment. I would advise not writing to the same file, e.g. {{server.log}}, though in each profile. Using a console handler should be fairly safe assuming {{System.out}} and/or {{System.err}} use appropriate locking.

As to changing the standalone.xml I hope you're not manually changing it :) It's much better to use CLI or some sort of management interface to make changes like that. They happen at runtime so there's no need to restart the server.","04/Mar/15 7:51 AM;geert.coelmont;Thanks James, very useful. I've opted for the second option and this is working nicely.",08/Mar/15 4:47 AM;arslnmsd;Thanks James!,30/Sep/15 6:28 PM;jamezp;This was fixed at some point likely with the of org.jboss.logmanager:log4j-jboss-logmanager:1.1.2.Final.,,,,,,,,,,,,,,,
RootSubsystemOperationsTestCase fails if log directory wasn't properly cleaned,WFCORE-477,12508911,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,28/Oct/13 6:24 PM,16/Dec/14 4:34 PM,29/Nov/16 3:54 PM,,,,,,,,,,Logging,,,,,0,,,,,,"Some test appears to not be cleaning up the {{target/logs}} directory which causes the tests to fail. While tests should be cleaning up after themselves, the test in the {{RootSubsystemOperationsTestCase}} should also not look for empty directories, but look for the files that _shouldn't_ be there.

Files left  behind:
{code}
[root@build01 logging]# ls -l target/logs/
total 0
-rw-r--r-- 1 root root 0 Oct 28 23:00 another.log
-rw-r--r-- 1 root root 0 Oct 28 23:00 anotherProfile.log
-rw-r--r-- 1 root root 0 Oct 28 23:00 fileHandler.log
-rw-r--r-- 1 root root 0 Oct 28 23:00 profileFileHandler.log
-rw-r--r-- 1 root root 0 Oct 28 23:00 server.log
-rw-r--r-- 1 root root 0 Oct 28 23:00 sizeLogger.log
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzjeen:,173478,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Redhat/Debian script problem when deleting Console Handler,WFCORE-476,12541729,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jamezp,marcial.atienzar,marcial.atienzar,23/May/14 10:19 AM,16/Dec/14 5:56 PM,29/Nov/16 3:54 PM,,,,,,,,,,Scripts,,,,,0,,,,,,"The scripts to start wildfly as service on redhat/debian use this code:
{code}
until [ $count -gt $STARTUP_WAIT ]
		do
			grep 'JBAS015874:' ""$JBOSS_CONSOLE_LOG"" > /dev/null
			if [ $? -eq 0 ] ; then
				launched=1
				break
			fi
			sleep 1
			count=$((count + 1));
		done
{code}

But if you have delete console handler in production enviroment, and increase the startup_wait because you have more applications deployed on server, it takes to start all the time specified on STARTUP_WAIT",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hznw47:,199665,,,,"Connect to cli and launch this:
{code}
connect

batch

/subsystem=logging/console-handler=CONSOLE:remove
/subsystem=logging/root-logger=ROOT:remove-handler(name=CONSOLE)
reload

run-batch
{code}

run wildfly-init-debian.sh or wildfly-init-redhat.sh as service",,,,,,,14/Jul/14 11:51 AM;jamezp;This probably doesn't really work at all in WildFly 9 as the message id's have changed. We'll have to come up with something new anyway.,"16/Dec/14 2:01 PM;jorsol;This is due to the wait it takes to start and check if started successfully.

 ¨[~jamezp] do you know a reliable way to check if the server is running, maybe using jboss-cli?",16/Dec/14 2:04 PM;jamezp;Not really as there is no way to know what the address and port the management resources are bound to. This will actually break in WildFly 10 anyway. Ideally you'd want to check the process rather than the stdout anyway.,"16/Dec/14 3:14 PM;jorsol;In that case I can make the check to the process status and not verify the log output.... but this way it will return OK right away even if there is an error in the start, for example problems of permissions, etc. Since the process is really started but not fully operational.

BTW is a bad practice to remove the console handler since it makes difficult to diagnose possible problems on startup.",,,,,,,,,,,,,,,,,,,,,,,
"Custom formatter property changes not written to, but overriden by logging.properties",WFCORE-474,12554054,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,vsevolodgolovanov,vsevolodgolovanov,02/Oct/14 1:46 PM,11/May/16 7:19 PM,29/Nov/16 3:54 PM,,,,,,,,,,Logging,,,,,0,,,,,,"When you first add custom formatter with properties to standalone.xml, on server start property values get correctly resolved and written to logging.properties.
If you change property values in standalone.xml of an existing custom formatter, that was flushed to logging.properties before, then on the next server start new values don't get written to logging.properties and formatter instance gets the old values from logging.properties.

For properties with static values that are defined in standalone.xml there is a workaround: change the custom formatter name each time you change a property value.
But with more dynamic properties, e.g. that rely on system properties, it's not so simple...",Wildfly 8.1.0.Final,,,,,,,,,,,,,,,,,,,,,,,,,,29/Nov/14 4:13 PM;vsevolodgolovanov;standalone.xml;https://issues.jboss.org/secure/attachment/12386650/standalone.xml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,3.0,,1|hztjs7:,9223372036854775807,,,,"# Create custom formatter with properties.
{code}
<custom-formatter class=""my.Formatter"" module=""my.module"">
	<properties>
		<property name=""pattern"" value=""%d{HH:mm:ss,SSS} %-5p [%c{1}] (%t) %s%E%n"" />
		<property name=""dynamicProperty"" value=""${someSystemProperty}"" />
	</properties>
</custom-formatter>
{code}
# Start server.
# Stop server.
# Change properties' values.
# Start server.
Notice that:
* logging.properties contain old values;
* formatter class instance has old values.",,,,,,Use the CLI {{write-attribute}} operation to write new properties.,"21/Nov/14 9:47 AM;ander.parra;Hello Vsevolod Golovanov.
Please, could you attach your standalone.xml for that I will simulate this problem.
Thank you!","29/Nov/14 4:13 PM;vsevolodgolovanov;[~ander.parra], [^standalone.xml] - it's just a fresh standalone.xml with the following added:
{code}
<formatter name=""ZZZZ"">
	<custom-formatter class=""org.jboss.logmanager.formatters.PatternFormatter"" module=""org.jboss.logmanager"">
		<properties>
			<property name=""pattern"" value=""1"" />
		</properties>
	</custom-formatter>
</formatter>
{code}
No more configuration or code needed to reproduce.","11/May/16 7:19 PM;jamezp;At this point there's no way to be notified if system property has been changed. You'd have to execute a reload to have the {{logging.properties}} file rewritten or restart the container.

Note to self when looking at this issue have a look at the {{ProcessEnvironmentSystemPropertyUpdater}}. It's possible this isn't meant to be used by subsystems.",,,,,,,,,,,,,,,,,,,,,,,,
updating non existing and adding existing misc content with override on,WFCORE-465,12534425,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,07/Mar/14 10:22 AM,08/May/15 6:09 AM,29/Nov/16 3:54 PM,08/May/15 6:09 AM,,,,,,,1.0.0.CR1,,Patching ,,,,,0,,,,,,"Rolling back a patch applied with override on which had an instruction to add a misc content that had existed before will fail because the opposite rolling back action for ADD is assumed to be REMOVE while in this case it has to be MODIFY to rollback to the previous version of the misc content.

A similar scenario will fail for the file update task. I.e. rolling back a patch applied with override on which had an instruction to modify a non-existing misc content will fail.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzmptr:,192762,,,,,,,,,,,"08/May/15 6:09 AM;aloubyansky;The fix was mered April 3, 2014. https://github.com/wildfly/wildfly-core/commit/52d07464467faa1b636466e03e599fe043c6eb0e",,,,,,,,,,,,,,,,,,,,,,,,,,
ProcessController's BufferedReader.readLine() usage allows unbounded memory usage,WFCORE-464,12559528,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,jameslivingston,jameslivingston,14/Dec/14 11:14 PM,18/Nov/15 4:00 PM,29/Nov/16 3:54 PM,,1.0.0.Alpha14,,,,,,,,Domain Management,,,,,0,,,,,,"org.jboss.as.process.ManagedProcess$ReadTask.run() uses readLine() to read a line of output from the manage process' standard output/error streams, which cause the whole line to be loaded into memory.

Badly written applications may dump excessive amounts of data out in a single line, which would cause the process controller to temporarily use a large amount of memory to process it, potentially leading to an OutOfMemoryError. Practically speaking, with the default -Xmx512m it would require around 128 million characters in a single line to trigger, which is obviously very high.


Were an OOME to occur, it would almost certainly cause the stream to be closed, and ""IOException: Broken pipe"" exceptions to occur in the child process, which for WildFly would be caught an ignored by JBoss Logging. A hostile managed process exploiting this would be almost impossible.


A reasonable solution would probably be to limit size of the buffer read, causing it to split lines over a certain size (a few megabytes?). That would not likely cause any practical problems.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1114419,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzufpb:,9223372036854775807,,,,,,,,,,,"23/Dec/14 8:56 PM;brian.stansberry;https://github.com/bstansberry/wildfly-core/compare/limit-readLine is something I did on this quite a while ago, but I have no time to develop tests of this, and this would need considerable testing to make the change amount to a net reduction in risk.",,,,,,,,,,,,,,,,,,,,,,,,,,
Include additional sun.jdk dependencies ,WFCORE-455,12559143,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,mmusaji,mmusaji,10/Dec/14 7:00 AM,31/Mar/15 3:04 PM,29/Nov/16 3:54 PM,31/Mar/15 3:04 PM,1.0.0.Alpha14,,,,,,1.0.0.Alpha15,,Modules,,,,,0,,,,,,"Include the following out of the box for sun.jdk module

- for working with javax.sql.rowset.RowSetProvider
                 <path name=""com/sun/rowset""/>
                 <path name=""com/sun/rowset/providers""/>

- for working with java.lang.invoke.MethodHandleProxies
                 <path name=""sun/invoke""/>

This affects EAP customers using CP releases when overlays override changes made in the original module.xml. For sun.jdk classes, the above packages should be included out of the box.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1172577,https://bugzilla.redhat.com/show_bug.cgi?id=1172681,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/388,,,,,,0.0,11.0,,1|hzudtb:,9223372036854775807,,,,,,,,,,,10/Dec/14 10:08 AM;jira-bugzilla-migration;Mustafa Musaji <mmusaji@redhat.com> changed the Status of [bug 1172681|https://bugzilla.redhat.com/show_bug.cgi?id=1172681] from NEW to POST,10/Dec/14 10:10 AM;ctomc;What JDK is having problems with this? Vendor / Version?,10/Dec/14 12:05 PM;mmusaji;Oracle JDK 1.7,"11/Dec/14 8:05 AM;ctomc;Great, as JDK6 is bit different and you mention problem on EAP as well.
Just making sure JDK7+ fixes get to upstream.",17/Dec/14 5:11 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1172577|https://bugzilla.redhat.com/show_bug.cgi?id=1172577] from NEW to POST,17/Dec/14 9:35 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1172577|https://bugzilla.redhat.com/show_bug.cgi?id=1172577] from POST to MODIFIED,19/Dec/14 4:09 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1172681|https://bugzilla.redhat.com/show_bug.cgi?id=1172681] from POST to MODIFIED,09/Jan/15 3:46 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1172577|https://bugzilla.redhat.com/show_bug.cgi?id=1172577] from MODIFIED to ON_QA,12/Jan/15 6:53 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1172577|https://bugzilla.redhat.com/show_bug.cgi?id=1172577] from ON_QA to VERIFIED,16/Jan/15 6:25 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1172681|https://bugzilla.redhat.com/show_bug.cgi?id=1172681] from MODIFIED to ON_QA,19/Jan/15 6:47 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1172681|https://bugzilla.redhat.com/show_bug.cgi?id=1172681] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
ResolveExpressionHandler is overly simplistic in expression resolution,WFCORE-451,12558933,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,08/Dec/14 11:16 AM,10/Dec/14 3:39 AM,29/Nov/16 3:54 PM,09/Dec/14 3:54 PM,1.0.0.Alpha14,,,,,,1.0.0.Alpha15,,Domain Management,,,,,0,,,,,,"ResolveExpressionHandler deliberately does not make use of the full range of expression resolutions sources, because by design the intent is not to support vault resolution.

However, the way it implements that limitation is by simply calling ModelNode.resolve(). That is overly restrictive, as DMR alone does not support other valid resolution features, i.e. nested expressions and recursive resolution.

Fix is to switch the handler to use an ExpressionResolver impl, just one that doesn't plug in the vault resolver.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1171809,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/383,,,,,,0.0,4.0,,1|hzucjz:,9223372036854775807,,,,,,,,,,,08/Dec/14 2:09 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1171809|https://bugzilla.redhat.com/show_bug.cgi?id=1171809] from NEW to POST,09/Dec/14 9:53 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1171809|https://bugzilla.redhat.com/show_bug.cgi?id=1171809] from POST to MODIFIED,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1171809|https://bugzilla.redhat.com/show_bug.cgi?id=1171809] from MODIFIED to ON_QA,10/Dec/14 3:39 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1171809|https://bugzilla.redhat.com/show_bug.cgi?id=1171809] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Using parent system properties in child properties fails in domain server launch,WFCORE-450,12558902,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,samppaa,samppaa,08/Dec/14 6:27 AM,31/Jul/15 3:37 AM,29/Nov/16 3:54 PM,16/Dec/14 10:39 AM,,,,,,,1.0.0.Alpha15,,Domain Management,,,,,0,,,,,,"Using wildfly domain I would like to define some properties in domain.xml and then be able to use these properties when defining others in server-group or server level. Currently this leads to JBAS014802: Cannot resolve expression.

More detailed example:

{code:xml|title=domain.xml}
<domain>
    <system-properties>
        <property name=""foo"" value=""bar""/>
    </system-properties>
    ...
    <server-group name=""g1"">
        <system-properties>
            <property name=""g1_foo"" value=""${foo}""/>
        </system-properties>
    </server-group>
</domain>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,09/Dec/14 1:38 AM;samppaa;domain.xml.patch;https://issues.jboss.org/secure/attachment/12386753/domain.xml.patch,09/Dec/14 1:34 AM;samppaa;host-controller.log;https://issues.jboss.org/secure/attachment/12386752/host-controller.log,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1230980,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/387,,,,,,2.0,9.0,,1|hzucd3:,9223372036854775807,,,,,,,,,,,"08/Dec/14 9:52 AM;brian.stansberry;Please provide the full details of the exception.

This feels more like a bug than a feature request, but I can't be sure without more information.",09/Dec/14 1:31 AM;samppaa;I was originally using WF 8.1.0 but now I tested this on Wildfly 8.2.0.Final and result was same failure as well. I'll attach the stacktrace and patch to domain.xml that makes it fail.,09/Dec/14 1:34 AM;samppaa;Stacktrace of the failure,09/Dec/14 1:38 AM;samppaa;Changes to domain.xml in WF 8.2.0.Final,"09/Dec/14 4:13 PM;brian.stansberry;This is failing because the code that is working out the command to launch the server VM is resolving all expressions in the resource trees for the new server's server-config and server-group. That logic should not try to resolve the value of a child system-property resource if that resource has a ""boot-time"" attribute set to ""false"".

[~samppaa] once I fix this, for it to work you'd need to have this in the config for the server-group:

{code}
<system-properties>
    <property name=""g1_foo"" value=""${foo}"" boot-time=""false""/>
</system-properties>
{code}

The ""boot-time"" param tells the Host Controller not to try and pass the system property to the server as part of VM launch using -D, but rather to make it part of its post-boot config. If the Host Controller needs to pass the property to the server as part of VM launch, the HC has to be able to resolve it locally, i.e. using a property passed to the HC process from the command line or via editing bin/domain.conf. ",17/Jun/15 7:23 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1230980|https://bugzilla.redhat.com/show_bug.cgi?id=1230980] from ASSIGNED to POST,24/Jul/15 8:37 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1230980|https://bugzilla.redhat.com/show_bug.cgi?id=1230980] from POST to MODIFIED,28/Jul/15 11:14 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1230980|https://bugzilla.redhat.com/show_bug.cgi?id=1230980] from MODIFIED to ON_QA,31/Jul/15 3:37 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1230980|https://bugzilla.redhat.com/show_bug.cgi?id=1230980] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,
"MBeanRegistrationService throws NameNotFoundException ""java:comp/BeanManager"" when starting/stoping the MBean",WFCORE-449,12558819,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,zhfeng,zhfeng,zhfeng,05/Dec/14 11:00 AM,05/Dec/14 6:16 PM,29/Nov/16 3:54 PM,05/Dec/14 6:16 PM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,,,,,,0,JMX,,,,,"This issue happens if you create an MBean in your EJB and deploy the EJB. The steps to reproduce the issue is the following:
{code}
git clone https://github.com/zhfeng/test_jmx_ejb
cd test_jmx_ejb
mvn clean install
{code}
After starting the wildfly server, copy the test_jmx_ejb-1.0.jar to the deployment directory of the wildfly and you will see the exception 

{code}
11:39:30,064 ERROR [org.jboss.as.weld] (MSC service thread 1-8) WFLYWELD0002: Failed to tear down Weld contexts: javax.naming.NameNotFoundException: java:comp/BeanManager
	at org.jboss.as.naming.InitialContext$DefaultInitialContext.findContext(InitialContext.java:187)
	at org.jboss.as.naming.InitialContext$DefaultInitialContext.lookup(InitialContext.java:231)
	at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:188)
	at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:184)
	at javax.naming.InitialContext.lookup(InitialContext.java:411) [rt.jar:1.7.0_21]
	at javax.naming.InitialContext.lookup(InitialContext.java:411) [rt.jar:1.7.0_21]
	at org.jboss.as.weld.arquillian.WeldContextSetup.teardown(WeldContextSetup.java:108)
	at org.jboss.as.jmx.MBeanRegistrationService.start(MBeanRegistrationService.java:106) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_21]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_21]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_21]
{code}

It looks like the JavaNamespaceSetup teardown happens before the WeldContextSetup so it throws NameNotFoundException in the WeldContextSetup teardown.

The possible fix is to reverse calling the setupActions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/380,,,,,,0.0,0.0,,1|hzubuv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI unable to load JAAS configuration on IBM JDK due to ClassNotFoundException,WFCORE-448,12558797,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,05/Dec/14 5:36 AM,15/Dec/14 5:45 AM,29/Nov/16 3:54 PM,05/Dec/14 11:22 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/379,,,,,,0.0,4.0,,1|hzubq7:,9223372036854775807,,,,,,,,,,,05/Dec/14 10:25 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1168921|https://bugzilla.redhat.com/show_bug.cgi?id=1168921] from ASSIGNED to POST,07/Dec/14 12:45 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1168921|https://bugzilla.redhat.com/show_bug.cgi?id=1168921] from POST to MODIFIED,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1168921|https://bugzilla.redhat.com/show_bug.cgi?id=1168921] from MODIFIED to ON_QA,15/Dec/14 5:45 AM;jira-bugzilla-migration;Ondrej Kotek <okotek@redhat.com> changed the Status of [bug 1168921|https://bugzilla.redhat.com/show_bug.cgi?id=1168921] from ON_QA to CLOSED,,,,,,,,,,,,,,,,,,,,,,,
JAVA_OPTS environment variable not used for domain mode on Windows,WFCORE-444,12558615,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jcacek,jcacek,jcacek,03/Dec/14 2:22 AM,23/Dec/14 3:13 PM,29/Nov/16 3:54 PM,23/Dec/14 3:13 PM,,,,,,,1.0.0.Alpha15,,Scripts,,,,,0,,,,,,"When I use JAVA_OPTS as an environment variable (i.e. configured before starting the AS) it's not propagated when used in domain mode on windows (domain.bat).

For standalone mode (standalone.bat) it works.

For Linux/Unix it works in both cases (standalone.sh, domain.sh).

Steps to reproduce:
{code}
SET ""JAVA_OPTS=...MyOwnJavaOptsConfig...""
domain.bat
{code}

Actual result:
The configured JAVA_OPTS are not used.

Expected result:
Provided JAVA_OPTS are used for the process controller and host controller processes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1170051,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/373,,,,,,0.0,4.0,,1|hzuamn:,9223372036854775807,,,,,,,,,,,03/Dec/14 2:34 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1170051|https://bugzilla.redhat.com/show_bug.cgi?id=1170051] from NEW to POST,05/Dec/14 6:41 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1170051|https://bugzilla.redhat.com/show_bug.cgi?id=1170051] from POST to MODIFIED,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1170051|https://bugzilla.redhat.com/show_bug.cgi?id=1170051] from MODIFIED to ON_QA,11/Dec/14 2:17 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1170051|https://bugzilla.redhat.com/show_bug.cgi?id=1170051] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Domain directory-grouping should group directories by server name when set to by-server,WFCORE-443,12558605,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,02/Dec/14 6:00 PM,17/Dec/14 1:50 PM,29/Nov/16 3:54 PM,17/Dec/14 1:50 PM,,,,,,,1.0.0.Alpha15,,Domain Management,,,,,0,,,,,,Currently if the {{/host=master/directory-grouping=by-server}} is set the same directory will be used for all servers if the {{jboss.server.xxx.dir}} is overridden. For example of the {{jboss.server.log.dir}} is overridden all servers in the group write to the same {{server.log}} file. They should be in {{$jboss.server.log.dir/server-name/}} directory.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/912168,,,https://github.com/wildfly/wildfly-core/pull/404,,,,,,0.0,0.0,,1|hzuakv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractMultiTargetHandler-based handlers do not propagate failures to the top level failure-description,WFCORE-442,12558594,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Dec/14 2:15 PM,28/May/15 5:46 PM,29/Nov/16 3:54 PM,28/May/15 5:46 PM,1.0.0.Alpha13,,,,,,2.0.0.Alpha3,,Domain Management,,,,,0,,,,,,"An example is worth a thousand words:

{code}
[standalone@localhost:9990 /] /path=*:query(where={read-only=1})
{
    ""outcome"" => ""failed"",
    ""result"" => [
        {
            ""address"" => [(""path"" => ""jboss.server.temp.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.server.temp.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/tmp"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""user.home"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""user.home"",
                ""path"" => ""/Users/hbraun"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.server.base.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.server.base.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""java.home"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""java.home"",
                ""path"" => ""/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk/Contents/Home/jre"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""user.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""user.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.server.data.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.server.data.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/data"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.home.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.home.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.server.log.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.server.log.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/log"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.server.config.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.server.config.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/configuration"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""rolled-back"" => true
        },
        {
            ""address"" => [(""path"" => ""jboss.controller.temp.dir"")],
            ""outcome"" => ""failed"",
            ""result"" => {
                ""name"" => ""jboss.controller.temp.dir"",
                ""path"" => ""/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/tmp"",
                ""read-only"" => true,
                ""relative-to"" => undefined
            },
            ""failure-description"" => ""Illegal argument for attribute 'read-only'. Expected type BOOLEAN"",
            ""rolled-back"" => true
        }
    ],
    ""rolled-back"" => true
}
{code}

One item in the set has a failure description but the overall response does not.

ReadResourceDescriptionHandler handles similar things but has logic for creating an overall failure-description.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/759,,,,,,0.0,3.0,,1|hzuaif:,9223372036854775807,,,,,,,,,,,"02/Dec/14 3:01 PM;brian.stansberry;I haven't looked carefully, but a likely place to put this is in the ResultHandler that GlobalOperationHandlers.ModelAddressResolver passes to OperationContext.completeStep.

Note that it is *critical* in this work to make sure we don't leak resource addresses via a failure description that RBAC is trying to hide. The current stuff in that ResultHandler is about that requirement, and must not be broken. Use git annotate to understand the history and purpose of that code.","01/May/15 11:05 AM;brian.stansberry;This will likely go to 2.0.0.Alpha1, but perhaps it will be simple and safe enough to do in 1.0.0.CR2.","21/May/15 11:34 AM;brian.stansberry;Emmanuel had a commit in his WFCORE-287 work to address this, but there was a lot of other work in the same area in master so it's not in. I'll have to see if it can still be used or massaged a bit and used, etc.

https://github.com/ehsavoie/wildfly-core/commit/ad5f28cae338fcdd5a01aad7ea38e34a70ae9d3a

Here's the key bits in case that commit gets flushed out of that repo. In GlobalOperationHandlers (but note that this diff is against some unknown previous version of it in Emmanuel's branch):

{code}
@@ -217,6 +219,34 @@ public void handleResult(OperationContext.ResultAction resultAction, OperationCo
                         }
                     }
                 });
+
+                context.completeStep(new OperationContext.RollbackHandler() {
+                    @Override
+                    public void handleRollback(OperationContext context, ModelNode operation) {
+                        if (!context.hasFailureDescription()) {
+                            String op = operation.require(OP).asString();
+                            Map<PathAddress, ModelNode> failures = new HashMap<PathAddress, ModelNode>();
+                            for (ModelNode resultItem : result.asList()) {
+                                if (resultItem.hasDefined(FAILURE_DESCRIPTION)) {
+                                    final PathAddress failedAddress = PathAddress.pathAddress(resultItem.get(ADDRESS));
+                                    ModelNode failedDesc = resultItem.get(FAILURE_DESCRIPTION);
+                                    failures.put(failedAddress, failedDesc);
+                                }
+                            }
+
+                            if (failures.size() == 1) {
+                                Map.Entry<PathAddress, ModelNode> entry = failures.entrySet().iterator().next();
+                                if (entry.getValue().getType() == ModelType.STRING) {
+                                    context.getFailureDescription().set(ControllerLogger.ROOT_LOGGER.wildcardOperationFailedAtSingleAddress(op, entry.getKey(), entry.getValue().asString()));
+                                } else {
+                                    context.getFailureDescription().set(ControllerLogger.ROOT_LOGGER.wildcardOperationFailedAtSingleAddressWithComplexFailure(op, entry.getKey()));
+                                }
+                            } else if (failures.size() > 1) {
+                                context.getFailureDescription().set(ControllerLogger.ROOT_LOGGER.wildcardOperationFailedAtMultipleAddresses(op, failures.keySet()));
+                            }
+                        }
+                    }
+                });
             } else {
                 doExecute(context, operation, filteredData, ignoreMissingResource, predicate);
             }
{code}",,,,,,,,,,,,,,,,,,,,,,,,
Strange address handling in ReadResourceDescriptionHandler,WFCORE-441,12558592,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,brian.stansberry,brian.stansberry,02/Dec/14 1:16 PM,28/May/15 5:48 PM,29/Nov/16 3:54 PM,28/May/15 5:48 PM,,,,,,,2.0.0.Alpha3,,Domain Management,,,,,0,,,,,,"https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/operations/global/ReadResourceDescriptionHandler.java#L427 is suspect. AFAICT that operation variable will be from the original op that triggered the multi-part request. So its address is not the address of the bit that had the failure, but the use of that address implies the intent is that it is the bit that had the failure.

Perhaps it should be resultItem.get(OP_ADDR) ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/759,,,,,,0.0,0.0,,1|hzuahz:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong format of IPv6 addresses in log entries,WFCORE-439,12558576,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,02/Dec/14 9:51 AM,10/Dec/14 7:57 AM,29/Nov/16 3:54 PM,05/Dec/14 11:51 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,,,,,,0,,,,,,"IPv6 addresses in log files are in a wrong format, the [ ] are missing:
{noformat}
09:18:44,203 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://2620:52:0:105f::ffff:2:9990
{noformat}
It should be:
{noformat}
http://[2620:52:0:105f::ffff:2]:9990 {noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=900564,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/370,,,,,,0.0,4.0,,1|hzuaef:,9223372036854775807,,,,,,,,,,,02/Dec/14 12:59 PM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 900564|https://bugzilla.redhat.com/show_bug.cgi?id=900564] from ASSIGNED to POST,03/Dec/14 8:20 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 900564|https://bugzilla.redhat.com/show_bug.cgi?id=900564] from POST to MODIFIED,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 900564|https://bugzilla.redhat.com/show_bug.cgi?id=900564] from MODIFIED to ON_QA,10/Dec/14 7:57 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 900564|https://bugzilla.redhat.com/show_bug.cgi?id=900564] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
The CLI freezes in phase of requesting username/password,WFCORE-438,12558573,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,02/Dec/14 9:36 AM,13/Jan/15 1:22 AM,29/Nov/16 3:54 PM,09/Dec/14 9:07 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha15,,CLI,,,,,0,,,,,,CLI doesn't terminate ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1169300,https://bugzilla.redhat.com/show_bug.cgi?id=1169864,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/369,,,,,,0.0,12.0,,1|hzuadr:,9223372036854775807,,,,"Run following command:

./jboss-cli.sh -c << EOF
/core-service=management/security-realm=ManagementRealm/authentication=local:remove
reload
EOF",,,,,,"This is copy of EAP issue https://bugzilla.redhat.com/show_bug.cgi?id=1169300

CLI freezes during username prompt when the input is provided by unix redirection. Expected behaviour is that CLI terminates with the end of input.",02/Dec/14 10:09 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1169864|https://bugzilla.redhat.com/show_bug.cgi?id=1169864] from NEW to ASSIGNED,02/Dec/14 10:10 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from ASSIGNED to POST,03/Dec/14 3:55 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1169864|https://bugzilla.redhat.com/show_bug.cgi?id=1169864] from ASSIGNED to POST,03/Dec/14 8:20 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from POST to MODIFIED,09/Dec/14 9:07 AM;aloubyansky;Merged.,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from MODIFIED to ON_QA,10/Dec/14 4:41 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from ON_QA to ASSIGNED,10/Dec/14 7:10 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from ASSIGNED to POST,15/Dec/14 9:57 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1169864|https://bugzilla.redhat.com/show_bug.cgi?id=1169864] from POST to CLOSED,22/Dec/14 7:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from POST to MODIFIED,09/Jan/15 3:45 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from MODIFIED to ON_QA,13/Jan/15 1:22 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1169300|https://bugzilla.redhat.com/show_bug.cgi?id=1169300] from ON_QA to VERIFIED,,,,,,,,,,,,,,,
Fix AuditLogFieldsOfLogTestCase,WFCORE-434,12552112,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,ctomc,ctomc,13/Sep/14 5:41 PM,15/Apr/15 9:21 AM,29/Nov/16 3:54 PM,15/Apr/15 9:21 AM,,,,,,,1.0.0.Alpha19,,Domain Management,Test Suite,,,,0,,,,,,"Test started to fail with:
{noformat}
java.lang.IllegalArgumentException: Invalid character: -
    at org.jboss.dmr.JSONParserImpl.invalid(JSONParserImpl.java:136)
    at org.jboss.dmr.JSONParser.yyLex(JSONParser.java:596)
    at org.jboss.dmr.JSONParser.yyParse(JSONParser.java:662)
    at org.jboss.dmr.ModelNode.fromJSONString(ModelNode.java:1390)
    at org.jboss.as.test.manualmode.auditlog.AuditLogFieldsOfLogTestCase.testAuditLoggingFields(AuditLogFieldsOfLogTestCase.java:106)
{noformat}
message was (notice the extra ""-""  in front)
{noformat}
 - ﻿{
    ""type"" : ""core"",
    ""r/o"" : false,
    ""booting"" : false,
    ""version"" : ""9.0.0.Alpha1"",
    ""user"" : ""IAmAdmin"",
    ""domainUUID"" : null,
    ""access"" : ""NATIVE"",
    ""remote-address"" : ""127.0.0.1/127.0.0.1"",
    ""success"" : true,
    ""ops"" : [{
        ""operation"" : ""write-attribute"",
        ""address"" : [
            {
                ""core-service"" : ""management""
            },
            {
                ""access"" : ""audit""
            },
            {
                ""logger"" : ""audit-log""
            }
        ],
        ""name"" : ""log-boot"",
        ""value"" : true,
        ""operation-headers"" : {
            ""caller-type"" : ""user"",
            ""access-mechanism"" : ""NATIVE""
        }
    }]
}
{noformat}",,,,,,,,,,,,,,,,,,WFCORE-172,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzt8hj:,9223372036854775807,,,,,,,,,,,"15/Oct/14 4:24 AM;jcacek;The problem is not in the Test, but in the auditlog code which uses ""WildFly Full"" value as an application name (APP-NAME header field). It's not allowed to use space in the value, because the space is a header field separator in SysLog messages. Look at Syslog message format - http://tools.ietf.org/html/rfc5424#section-6

Please revert the test-hack after the APP-NAME header field value is fixed (WFLY-3979).",,,,,,,,,,,,,,,,,,,,,,,,,,
jboss-cli should set -Djava.awt.headless=true,WFCORE-417,12501378,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,aloubyansky,robinr,robinr,24/Sep/13 7:48 AM,01/Dec/14 4:56 PM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,0,,,,,,"On OS X using jboss-cli.sh will cause focus to shift making it very inconvenient to do other things while scripts that talk to jboss execute.

There is a workaround: export JAVA_OPTS=-Djava.awt.headless=true before invoking the cli, but I see no reason for the CLI not do this itself. This also applied to the adduser.sh script.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzixk7:,170756,,,,,,,,,,,"24/Sep/13 7:50 AM;dlofthouse;The CLI also has a GUI mode, I would expect adding -Djava.awt.headless=true to break that.","24/Sep/13 9:06 AM;robinr;Only if --gui is not passed as an option.
",,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent tab completion behaviour between commands and arguments,WFCORE-416,12479612,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Won't Fix,jmesnil,jmesnil,jmesnil,21/Nov/12 9:11 AM,02/Apr/15 9:20 AM,29/Nov/16 3:54 PM,02/Apr/15 9:20 AM,,,,,,,,,CLI,,,,,0,,,,,,"When tab is used for completion, the behavior changes when there is only 1 remaining candidate.

For commands, when the completion leads to a single candidate, a whitespace is appended and we can proceed to the arguments
For arguments using a TabCompleter, when the completion leads to a single candidate, no whitespace is appended and we have to type it to be able to proceed to the next argument
 
Example:

* deployment-over<TAB>
=> will complete to deployment-overlay<WHITESPACE><CURSOR> (a whitespace is appended to the single candidate)

* deployment-overlay a<TAB>
=> will complete to deployment-overlay add<CURSOR> (no whitespace appended even though add is the only candidate matched) 
",,,,,,,,,,,,,,,,,,AESH-29,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hz8da7:,109222,,,,,,,,,,,"21/Nov/12 11:06 AM;jmesnil;The issue is in jreadline Console[1].
It will only append a space after the completion if the completion corresponds to the beginning of the buffer line.

for deployment-over<TAB>, this works:
* full completion => deployment-overlay
* buffer line     => deployment-overlay
=> a white space is appended

for deployment-over a<TAB>, this does not work, since the completion is only for add:
* full completion => add
* buffer line     => deployment-overlay add
=> no whitespace appended

[1] https://github.com/qmx/jreadline/blob/master/src/main/java/org/jboss/jreadline/console/Console.java#L1053","21/Nov/12 11:26 AM;aloubyansky;Jeff, for jreadline-related issues, please, create issues for Aesh project (which is the next generation of jreadline) in our jira.","07/Dec/12 5:41 AM;jmesnil;Using the CLI on the master branch after Aesh 0.26 has been integrated, I don't see the expected fix:

{noformat}
[standalone@localhost:9999 /] deployment-overlay a<CURSOR><TAB>
=> autocompletes to ./deployment-overlay add<CURSOR>
   and not the expected ./deployment-overlay add<WHITESPACE><CURSOR>
{noformat}

Beside, I think we have some regressions wrt to completions:

{noformat}
[standalone@localhost:9999 /] ./deployment-<CURSOR><TAB>
=> this does not autocomplete to ./deployment-overlay=<CURSOR>

while 
[standalone@localhost:9999 /] ./deployment-o<CURSOR><TAB>
=> *does* autocomplete to ./deployment-overlay=<CURSOR>
{noformat}

I am not sure this was the observed behaviour before Aesh 0.26","05/Feb/13 9:45 AM;aloubyansky;The problem here is that it's not always good and expected to have a whitespace added after the single candidate.
Generally speaking, whitespace is only a specific example of a separator. There might be other separators expected, especially talking about the operation request format with /, =, :, etc as separators. We discussed this we Stale at the time and I think there is some API in Aesh supporting alternative separators.

But anyway, just adding a whitespace after a single choice as a rule will introduce other problems.",,,,,,,,,,,,,,,,,,,,,,,
Pressing up-arrow crashed CLI on windows,WFCORE-415,12497737,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,nickarls,nickarls,01/Aug/13 4:04 AM,09/Jan/15 10:49 AM,29/Nov/16 3:54 PM,09/Jan/15 10:49 AM,,,,,,,1.0.0.Alpha15,,CLI,,,,,0,,,,,,"Pressing the up-arrow in the CLI on windows crashes it with

{code}
[standalone@localhost:9990 /] java.lang.NumberFormatException: For input string:
 ""1B""
        at java.lang.NumberFormatException.forInputString(NumberFormatException.
java:65)
        at java.lang.Integer.parseInt(Integer.java:492)
        at java.lang.Integer.<init>(Integer.java:677)
        at org.fusesource.jansi.AnsiOutputStream.write(AnsiOutputStream.java:120
)
        at java.io.FilterOutputStream.write(FilterOutputStream.java:125)
        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
        at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
        at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
        at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
        at java.io.PrintWriter.flush(PrintWriter.java:320)
        at org.jboss.aesh.terminal.WindowsTerminal.writeToStdOut(WindowsTerminal
.java:88)
        at org.jboss.aesh.console.Console.drawLine(Console.java:1011)
        at org.jboss.aesh.console.Console.redrawLine(Console.java:990)
        at org.jboss.aesh.console.Console.getHistoryElement(Console.java:753)
        at org.jboss.aesh.console.Console.parseOperation(Console.java:556)
        at org.jboss.aesh.console.Console.read(Console.java:446)
        at org.jboss.aesh.console.Console.read(Console.java:346)
        at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:177)
        at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.
java:1198)
        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:270)
        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.jboss.modules.Module.run(Module.java:270)
        at org.jboss.modules.Main.main(Main.java:411)
{code}",,,,,,,,,,,,,,,,,,AESH-96,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hziamn:,167153,,,,,,,,,,,"09/Jan/15 10:49 AM;aloubyansky;This issues was fixed with the inclusion of Aesh 0.33.14, which contains the fix for AESH-96.",,,,,,,,,,,,,,,,,,,,,,,,,,
Issue in Interactive mode on cygwin not working.,WFCORE-414,12468584,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,aloubyansky,caliginouspierson,caliginouspierson,11/Jun/12 5:52 PM,26/Feb/16 6:32 AM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,4,,,,,,"After connecting to standalone server on localhost, Cgywin doesn't response to input.","Windows 7, windows2k8, Cygwin 1.7.15",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,7.0,,1|hz1ntj:,70099,,,,"<$JBOSS_HOME>/bin
./jboss-cli.sh

When prompted, connect

You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] connect

Doesn't response to keyboard input with expected Connected to localhost:9999
",,,,,,,"12/Jun/12 1:55 PM;aloubyansky;Yes, it's completely broken in cygwin, apparently. Not only connect. Any command, tab-completion doesn't work too.","20/Jun/12 4:49 AM;stalep;i tested jreadline in cygwin and as suspected cygwin uses the same keycodes as on posix systems and not the windows keycodes. this is the reason why jboss-cli is completely broken within cygwin.
- setting property os.name to != windows should help, but after a initial test changing the stty didnt work the same way as on other posix systems.

this is not a jboss-cli issue, but rather something that must be implemented in jreadline.",21/Jan/14 2:52 PM;akostadinov;FYI this still affects current wildfly nightly.,"21/Jan/14 4:23 PM;stalep;yes, æsh need a way to check if it is running in a cygwin shell. currently it doesnt do that that and assumes that it is in windows cmd.","03/Dec/14 3:47 AM;stalep;i did look into this a while ago and from what i could see there is now way for java to know that it is running under cygwin. eg, the system.os property etc is windows, same with other properties.
ive tried different approaches to detect if it runs under cygwin, but never found a way for it to work reliably. - if anyone got any tips i would be very happy to hear about them.

in the script thats used to start jboss-cli, if you somehow can check there if its running under cygwin you could set some runtime properties for æsh so that it should work. ive tested that locally and it did work.","03/Dec/14 9:43 AM;akostadinov;The standard wildfly sh scripts should be already detecting that they run under cygwin. I'd suggest using same approach.
https://github.com/wildfly/wildfly/blob/master/build.sh","04/Dec/14 9:27 AM;RiskySeven;cygwin bash respects $OSTYPE.

-bash-V9_0_1 /usr/local/sde/env
$env|grep OSTYPE
OSTYPE=cygwin



",,,,,,,,,,,,,,,,,,,,
[cli] exit against remote server fails,WFCORE-413,12495151,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,jdenise,rob.stryker,rob.stryker,26/Jun/13 10:16 AM,02/Nov/16 1:48 PM,29/Nov/16 3:54 PM,02/Nov/16 1:48 PM,,,,,,,,,CLI,,,,,0,,,,,,"Using ./jboss-cli.sh from a local wildfly alpha2 against a remote wildfly alpha2 connects and functions properly. A call to exit freezes entirely. 

jstack to be attached",,,,,,,,,,,,,,,,,,,,,,,,,,,26/Jun/13 10:17 AM;rob.stryker;WFLY-1591.stack.txt;https://issues.jboss.org/secure/attachment/12363454/WFLY-1591.stack.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,2.0,,1|hzhh73:,162383,,,,,,,,,,,26/Jun/13 10:17 AM;rob.stryker;jstack of the frozen local cli process,"02/Nov/16 1:48 PM;jdenise;This bug can't be reproduced anymore. Quitting the CLI doesn't freeze the process.
In case you are observing the behavior, please feel free to re-open.
Thanks.
JF",,,,,,,,,,,,,,,,,,,,,,,,,
Pressing the tab key whilst entering a username for authentication deadlocks the CLI,WFCORE-412,12543368,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,dlofthouse,dlofthouse,10/Jun/14 12:11 PM,12/Jan/15 8:53 AM,29/Nov/16 3:54 PM,12/Jan/15 8:53 AM,,,,,,,1.0.0.Alpha16,,CLI,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10/Jun/14 12:11 PM;dlofthouse;cli_deadlock.txt;https://issues.jboss.org/secure/attachment/12383041/cli_deadlock.txt,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/424,,,,,,1.0,2.0,,1|hzo62n:,201273,,,,"Attempt to connect to the server using a username/password based authentication mechanism.
When prompted for a username press tab.
The CLI will now be deadlocked.",,,,,,,"10/Jun/14 12:11 PM;dlofthouse;Attaching a thread dump of the deadlock.

From a quick look it appears there is an attempt to automatically complete the username!!",03/Jul/14 10:15 AM;aloubyansky;This will require a new Aesh release. This worked https://github.com/aloubyansky/wildfly-core/commit/4e3f60992cfe9ab087842758a307fe03210512a8,,,,,,,,,,,,,,,,,,,,,,,,,
Syntax error when applying patch and exiting jboss-cli,WFCORE-411,12542911,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,ArunGupta,ArunGupta,05/Jun/14 6:45 AM,26/Feb/15 10:58 AM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,Patching ,,,,0,,,,,,"[disconnected /] patch apply
../wildfly-8.1.0.Final-update/wildfly-8.1.0.Final.patch
{
    ""outcome"" : ""success"",
    ""result"" : {}
}
[disconnected /]
[disconnected /]
[disconnected /]
[disconnected /] exit


logging.configuration already set in JAVA_OPTS
./bin/jboss-cli.sh: line 81: syntax error near unexpected token `fi'
./bin/jboss-cli.sh: line 81: `fi'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzo387:,200824,,,,,,,,,,,"19/Feb/15 8:05 AM;brian.stansberry;Alexey,

I'm not sure if this relates to patching or not; may just be a CLI script issue?","26/Feb/15 9:44 AM;aloubyansky;The problem is that the patch updates, i.e. replaces jboss-cli.sh with a new version. So, after the cli process quits, the script continues its execution from the next line after the one launching the cli process. In the newly installed version of jboss-cli.sh at that line it is trying to add logging.configuration again.","26/Feb/15 10:36 AM;brian.stansberry;Ouch. That implies the whole approach of using the CLI as the patching tool is problematic. And allowing the server to be running is problematic as well, as the same problem can happen with standalone.sh, domain.sh, etc.

Using a separate package manager and not supporting the server continuing to run doesn't have that problem, although the question of how to update the package manager software itself still exists.","26/Feb/15 10:43 AM;dmlloyd;Separate package manager can cope by anticipating the situation and pre-initializing all classes it will need for the upgrade operation, so that if its JAR goes away, it can still finish the operation.","26/Feb/15 10:55 AM;dmlloyd;I guess that doesn't answer the problem, but I envisioned that the launchers for the patch tool would be single-line affairs.  Though it wouldn't hurt to add a line to the top saying:

{code}
# Line numbers must be preserved
{code}

or some such.",,,,,,,,,,,,,,,,,,,,,,
alias --help print nothing on jboss-cli,WFCORE-410,12495578,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,sewatech,sewatech,02/Jul/13 4:16 PM,23/Mar/15 9:31 AM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,0,,,,,,"I have no output when I call this :

[standalone@localhost:9990 /] alias --help
[standalone@localhost:9990 /]
","MacOS X, JDK 1.7.0_09",,,,,,,,,,,,,,,,,,,,WFCORE-427,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=980099,https://bugzilla.redhat.com/show_bug.cgi?id=1139111,https://bugzilla.redhat.com/show_bug.cgi?id=1134282,,,Perform,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzhjqf:,162794,,,,,,,,,,,"22/Jul/13 9:58 AM;jira-bugzilla-migration;pkremens@redhat.com made a comment on [bug 980099|https://bugzilla.redhat.com/show_bug.cgi?id=980099]

Hi, this will not work, there is no [-p] option and I wasn't able to add more aliases on single line eg. 
alias cd=""cd subsystem=logging"" ls=""ls -l""

creates 
alias cd='cd subsystem=logging"" ls=""ls -l'
not 
alias cd='cd subsystem=logging'
alias ls='ls -l'","22/Jul/13 10:03 AM;jira-bugzilla-migration;Ståle W. Pedersen <spederse@redhat.com> made a comment on [bug 980099|https://bugzilla.redhat.com/show_bug.cgi?id=980099]

yes, i know it doesnt support -p and more that one alias on a single line, it was more meant as a general help msg example.
- ill try to implement that though later :)","22/Jul/13 10:29 AM;jira-bugzilla-migration;pkremens@redhat.com made a comment on [bug 980099|https://bugzilla.redhat.com/show_bug.cgi?id=980099]

I see :), than something like this would be IMO sufficient.",13/Oct/14 1:12 PM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1134282|https://bugzilla.redhat.com/show_bug.cgi?id=1134282] from NEW to CLOSED,23/Mar/15 9:31 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 980099|https://bugzilla.redhat.com/show_bug.cgi?id=980099] from NEW to CLOSED,,,,,,,,,,,,,,,,,,,,,,
Intermittent connection TimeOut with CLI using https-remoting,WFCORE-409,12539707,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,fbogyai,fbogyai,02/May/14 8:57 AM,01/Dec/14 4:56 PM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,2,,,,,,"When the management http-interface is secured to use https and the CLI is using https-remoting to connect, sometimes it hangs which leads to connection timeout. This occurs approximately in 1 out of 10 times if you try to connect with CLI in a short time. 
{code}
org.jboss.as.cli.CliInitializationException: Failed to connect to the controller
	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:278)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:253)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.jboss.modules.Module.run(Module.java:312)
	at org.jboss.modules.Main.main(Main.java:460)
Caused by: org.jboss.as.cli.CommandLineException: The controller is not available at localhost:9993
	at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:1028)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:840)
	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:819)
	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:276)
	... 8 more
Caused by: java.io.IOException: java.net.ConnectException: JBAS012144: Could not connect to https-remoting://localhost:9993. The connection timed out
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:129)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)
	at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:1005)
	... 11 more
Caused by: java.net.ConnectException: JBAS012144: Could not connect to https-remoting://localhost:9993. The connection timed out
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:119)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:256)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70)
	at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:204)
	at org.jboss.as.cli.impl.CLIModelControllerClient.getOrCreateChannel(CLIModelControllerClient.java:169)
	at org.jboss.as.cli.impl.CLIModelControllerClient$2.getChannel(CLIModelControllerClient.java:129)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:117)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:92)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:236)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:141)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)
	... 13 more
{code}

This problem also causes intermittent test failures in testsuite, for example: 
http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&testNameId=-1990154013938634315&tab=testDetails
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hznk1z:,197694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Resource description for platform mbean properties that throw UnsupportedOperationException should say nillable=""true""",WFCORE-406,12472925,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,brian.stansberry,brian.stansberry,22/Aug/12 9:17 PM,01/Sep/16 1:41 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Some platform mbean getters are documented to throw a UOE on some VMs. The read-resource handler will catch the UOE and leave the attribute undefined, but the description says it's not nillable.

Specifically, PlatformMBeanDescriptions.getThreadingResource()'s THREAD_CPU_TIME_ENABLED attribute, although there may well be others.

This leads to this unit test failure on jvms where the UOE is thrown:

failure message=""thread-cpu-time-enabled is undefined"" 
 type=""junit.framework.AssertionFailedError"">junit.fra mework.AssertionFailedError: thread-cpu-time-enabled is undefined
          at junit.framework.Assert.fail(Assert.java:50)
          at junit.framework.Assert.assertTrue(Assert.java:20)
          at 
 org.jboss.as.platform.mbean.PlatformMBeanResourceUnitTestCase.validateResource(PlatformMBeanResourceUn
 itTestCase.java:595)
          at org.jboss.as.platform.mbean.PlatformMBeanResourceUnitTestCase.basicResourceTest(PlatformMBeanResourceUnitTestCase.java:563)
          at 
 org.jboss.as.platform.mbean.PlatformMBeanResourceUnitTestCase.testThreadingMXBean(PlatformMBeanResourceUnitTestCase.java:340)","FreeBSD, OpenJDK 1.6",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hz4son:,88383,,,,,,,,,,,"23/Aug/12 11:55 AM;brian.stansberry;The :read-resource text description for such an attribute should include something like ""May be 'undefined' if the VM does not support this property."" Documents why what seems like a simple boolean or something may not have a value.

I believe I handled this properly in at least some cases, so have a look and make the handling (e.g. the text description) consistent.",13/Nov/12 5:17 AM;yerenkow;Can confirm on FreeBSD 9.0 with openjdk6 / openjdk7,"01/Sep/16 1:41 PM;brian.stansberry;I'm unscheduling this to try and get the 3.0 task list down to bugs, EAP 7.1 features or stuff we know is coming. Let me know if it's likely to happen for 3.0 Beta1.",,,,,,,,,,,,,,,,,,,,,,,,
Domain rollout operation timeouts,WFCORE-378,12529138,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,10/Jan/14 4:24 PM,16/Dec/15 5:49 PM,29/Nov/16 3:54 PM,16/Dec/15 5:49 PM,,,,,,,2.0.5.CR1,,Domain Management,,,,,0,,,,,,"Portion of the parent task related to rolling out changes to a domain.

The expectation is that single process timeouts (WFLY-2741) will handle most failure conditions related to domain rollouts (e.g. if a single server hangs, preventing completion of the rollout, eventually that server will time out, allowing the domain wide rollout to continue.) Timeouts in the domain rollout code serve as a second line of defense:

1) In case of protocol or other problems that prevent the calling process learning about the timeout on the remote process
2) In case of bugs in the single process timeout handling on the remote process
3) In mixed domain cases where remote hosts are running previous versions and do not have the timeout function

Potential places to add timeouts:

DomainSlaveHandler->HostControllerUpdateTask.ProxyOperationListener.retrievePreparedOperation()
-- where the master HC waits for responses from slaves

RollingServerGroupUpdateTask.run() -> ServerTaskExecutor.ServerOperationListener.retrievePreparedOperation()
-- timeout here means 1 server didn't respond, but need to move on to next

ConcurrentServerGroupUpdateTask.run() -> ServerTaskExecutor.ServerOperationListener.retrievePreparedOperation()
-- timeout here means none of the remaining servers have responded w/in the timeout

DomainRolloutStepHandler.finalizeOp() -> future.get()
---- the ServerGroupUpdateTask should fail in the normal phase, so any timeout here would indicate a problem committing the tx or a comms problem getting back the response",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1305,,,,,,0.0,0.0,,1|hzlrdz:,187222,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
inconsistent usage of min/max-occurs in model description,WFCORE-365,12470576,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,emuckenhuber,emuckenhuber,17/Jul/12 2:46 AM,10/Sep/15 2:08 PM,29/Nov/16 3:54 PM,10/Sep/15 2:05 PM,,,,,,,2.0.0.Beta7,,Domain Management,,,,,0,,,,,,"The usages of min/max-occurs in the model description are not consistent - e.g. missing in ResourceDescription, mostly wrong when used in the descriptionProvider or outdated examples in the documentation.

I'll attach a simple patch which should actually fix that issue in line with the documentation [1] (incl. recursive usage) and the usage of the CLI (ls -l). However there might be more to it.

[1] https://docs.jboss.org/author/display/AS71/Description+of+the+Management+Model",,,,,,,,,,,,,,,,,,WFLY-5241,,,,,,,,,17/Jul/12 2:47 AM;emuckenhuber;patch.txt;https://issues.jboss.org/secure/attachment/12355706/patch.txt,,,,,"Documentation (Ref Guide, User Guide, etc.)",,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1014,,,,,,1.0,3.0,,1|hz44af:,84429,,,,,,,,,,,"18/Jul/12 5:39 AM;ctomc;Provided patch is just half solution, as this info should also be present on MRR...","18/Jul/12 5:56 AM;emuckenhuber;Ideally, yes. You still have access to that information using the model description itself, so we have some flexibility when to change the APIs.","10/Sep/15 2:08 PM;brian.stansberry;The code now matches the specification in https://docs.jboss.org/author/display/WFLY10/Admin+Guide#AdminGuide-DescriptionoftheManagementModel which differs from the poorly thought out spec in previous releases. The cardinality information is now part of the data for each resource definition (alongside description, attributes, operations, children, etc) and isn't part of the description of the ""child-type"".",,,,,,,,,,,,,,,,,,,,,,,,
Hangs in mixed domain testsuite,WFCORE-364,12494340,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,brian.stansberry,brian.stansberry,brian.stansberry,14/Jun/13 6:12 PM,04/Sep/15 7:04 PM,29/Nov/16 3:54 PM,04/Sep/15 7:04 PM,,,,,,,,,Domain Management,,,,,0,,,,,,"http://lightning.mw.lab.eng.bos.redhat.com/jenkins/job/wildfly-param-pull/7449/console

https://dl.dropboxusercontent.com/u/712508/mixed-hang-debug.zip contains details.

30805.dump is the client and shows the problem is occurring in the @After cleanup of MixedDomainDeploymentTest as it removes deployments from the domain.

""main"" prio=10 tid=0xf7605c00 nid=0x7856 in Object.wait() [0xf776e000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0xe50275f0> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at java.lang.Object.wait(Object.java:503)
	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)
	- locked <0xe50275f0> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)
	- locked <0xe50275f0> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.get(AbstractDelegatingAsyncFuture.java:100)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)
	at org.jboss.as.controller.client.helpers.domain.impl.DomainClientImpl.execute(DomainClientImpl.java:81)
	at org.jboss.as.test.integration.domain.mixed.MixedDomainDeploymentTest.removeDeployment(MixedDomainDeploymentTest.java:441)
	at org.jboss.as.test.integration.domain.mixed.MixedDomainDeploymentTest.cleanDeployments(MixedDomainDeploymentTest.java:343)
	at org.jboss.as.test.integration.domain.mixed.MixedDomainDeploymentTest.confirmNoDeployments(MixedDomainDeploymentTest.java:163)

31894.dump shows the master HC. management-handler-thread is blocking on the way out (after sending the commit or rollback) waiting for a final result response from the slave.

""management-handler-thread - 1"" prio=10 tid=0xca0efc00 nid=0x7cdd in Object.wait() [0xc7469000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0xeb6d6558> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at java.lang.Object.wait(Object.java:503)
	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)
	- locked <0xeb6d6558> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)
	- locked <0xeb6d6558> (a org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.get(AbstractDelegatingAsyncFuture.java:100)
	at org.jboss.as.domain.controller.operations.coordination.DomainSlaveHandler.finalizeOp(DomainSlaveHandler.java:215)
	at org.jboss.as.domain.controller.operations.coordination.DomainSlaveHandler.access$000(DomainSlaveHandler.java:58)
	at org.jboss.as.domain.controller.operations.coordination.DomainSlaveHandler$1.handleResult(DomainSlaveHandler.java:179)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleRollback(AbstractOperationContext.java:805)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:763)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:738)

(Note that the ""handleRollback"" method name is a red-herring -- the method should be renamed to a ""handleResult"" as it now is called no matter what the result.)

31986.dump is the slave HC. It shows it is blocking in stage DONE after having sent operationPrepared to the master, waiting for commit or rollback.

""domain-connection-threads - 1"" prio=10 tid=0xc91a8400 nid=0x7d1a waiting on condition [0xc87fe000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xea1fd410> (a java.util.concurrent.CountDownLatch$Sync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:994)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1303)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:236)
	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ProxyOperationControlProxy.operationPrepared(TransactionalProtocolOperationHandler.java:173)
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:337)
	at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:211)
	at org.jboss.as.domain.controller.operations.coordination.ServerOperationsResolverHandler.execute(ServerOperationsResolverHandler.java:128)


Indication is the commit or rollback message is getting lost. There are no threads shown sending or receiving it.",,,,,,,,,,,,,,,,,,,,,,,,,,,14/Jun/13 8:23 PM;wolfc;testsuite-hang1-server.txt;https://issues.jboss.org/secure/attachment/12363211/testsuite-hang1-server.txt,14/Jun/13 8:23 PM;wolfc;testsuite-hang2-client.txt;https://issues.jboss.org/secure/attachment/12363212/testsuite-hang2-client.txt,14/Jun/13 8:23 PM;wolfc;testsuite-hang2-server.txt;https://issues.jboss.org/secure/attachment/12363213/testsuite-hang2-server.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,4.0,,1|hzhctz:,161673,,,,,,,,,,,14/Jun/13 8:23 PM;wolfc;Looks similar to earlier hangs I've seen on EAP 6.1. Attaching the dumps I got so far.,"01/Apr/14 9:59 AM;brian.stansberry;Bumping to 9, but this is likely out-of-date as I'm no longer seeing these issues in CI.",31/Aug/15 1:20 PM;brian.stansberry;I still think this is out of date.,04/Sep/15 7:04 PM;brian.stansberry;I haven't heard any cases of this for a long time.,,,,,,,,,,,,,,,,,,,,,,,
ManagementResourceRegistration.getOverrideModel never returns null,WFCORE-363,12531538,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,08/Feb/14 11:12 PM,29/Nov/16 3:32 PM,29/Nov/16 3:54 PM,,,,,,,,3.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"ManagementResourceRegistration.getOverrideModel ends up returning the wildcard registration if there is no override registration. This isn't correct.

The fix isn't trivial because fixing it results in nasty failures in the smoke tests. From looking at the uses of this method (which all involve a null check) I assume there are some bugs in the code that calls this method that get exposed once it does what it should.

This bug is the cause of the initial failure of my WFLY-2880 fix.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzm5zb:,189594,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix jvm management model for server and groups,WFCORE-362,12464275,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,emuckenhuber,emuckenhuber,17/Apr/12 5:22 AM,06/May/16 10:57 AM,29/Nov/16 3:54 PM,06/May/16 10:57 AM,,,,,,,,,Domain Management,,,,,0,rhq,,,,,"We need to update the JVM child resource definition for server-groups and servers to only allow a single JVM configuration (i.e. configuration=JVM) resource. Currently only the first configured VM is used, where the name is the reference to the corresponding host level JVM.",,,,,,,,,,,,,,,,,,,,,WFCORE-384,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1533,,,,,,0.0,3.0,,1|hz0kg7:,63724,,,,,,,,,,,"28/Aug/12 5:36 AM;emuckenhuber;I started some initial work here: https://github.com/emuckenhuber/jboss-as/tree/AS7-4532

Missing things are to update the alias registry to allow conversion of a ""jvm=myJVM:add()"" to ""configuration=jvm:add(jvm-ref=myJVM)"". We also need to figure out how to properly describe different types as part of the model-descriptions (AS7-5181)","14/Aug/15 4:13 PM;brian.stansberry;I'm not sure ""configuration=JVM"" is worth it, versus simply limiting the number of jvm=* resources to 1.","06/May/16 10:57 AM;luck3y;WFCORE-1527 has been opened to address the missing parent on an ignoring slave, so resolving this one.",,,,,,,,,,,,,,,,,,,,,,,,
CLONE - Config XML with <interface ...><any-ipv4-address /></interface> + -Djava.net.preferIPv4Stack=false produces binding to ANY address (error),WFCORE-361,12472421,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,ehugonnet,pjanouse,pjanouse,13/Aug/12 11:30 PM,16/Jan/15 4:11 AM,29/Nov/16 3:54 PM,16/Jan/15 4:11 AM,,,,,,,1.0.0.Beta1,,Domain Management,,,,,0,,,,,,"The same situation is with every shipped and supported configuration/profile. As base for my explanation I'm using standalone.xml. Standalone.xml declares xmlns as:
{code}
<server xmlns=""urn:jboss:domain:1.3"">
{code}
The real XSD file which defined elements is jboss-eap-6.0/docs/schema/jboss-as-config_1_3.xsd.

The very common Linux system has implemented and enabled dualstack in these days. If we instruct AS instance to bind to +any+ IPv4 address via {code}<interface name=""public"">
    <any-ipv4-address />
</interface>{code}

The real result is to bind running AS instance to +any+ IP address, not only in IPv4 address space but in IPv6 too!

With default setting (= -Djava.net.preferIPv4Stack=true), result is correct - it is bound to ANY IPv4 addresses only.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hz4ocf:,87679,,,,,,,,,,,"11/Sep/12 1:24 PM;brian.stansberry;AFAICT in the absence of -Djava.net.preferIPv4Stack=true there is no way to tell the VM to bind a socket to all IPv4 addresses, but only to IPv4 addresses.

So, all we can is check when we see this <any-ipv4-address/> and fail if we don't see -Djava.net.preferIPv4Stack=true.

But, testing on Windows shows that this problem doesn't exist there, which makes my proposed fix problematic; i.e. rejecting <any-ipv4-address/> without a corresponding -Djava.net.preferIPv4Stack=true would break things on Windows.

The <any-ipv4-address/> and <any-ipv6-address/> config elements basically don't have any value, since in the end the behavior we'll support will be what <any-address/> plus the -Djava.net.preferIPv4Stack specifies. So those elements will likely be removed in AS 8.","02/Dec/14 4:14 PM;brian.stansberry;Emmanuel, once WFCORE-400 is resolved, please just resolve this one as Out of Date.",,,,,,,,,,,,,,,,,,,,,,,,,
Domain reflects jboss.server.xy properties,WFCORE-350,12447180,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,rsvoboda,rsvoboda,16/Sep/11 8:24 AM,28/Oct/16 10:23 AM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Domain reflects jboss.server.xy properties, tested with jboss.server.log.dir property.

The same server.log file is used for both server-one and server-two. Only file boot.log is created in  domain/servers/server-one/log and domain/servers/server-two/log directory. In my case file server.log contains log only for server-one, there is no log for server-two.


I think jboss.server.xy properties shouldn't be reflected in domain instances.
Even structure of https://docs.jboss.org/author/display/AS71/Command+line+parameters implies that jboss.server.xy properties are used for Standalone.

Reproducer of my steps:
{code}
 rm -rf domain/servers
 bin/domain.sh -Djboss.server.log.dir=/tmp/
 ls -aR domain/servers/server-one/log
 ls -aR domain/servers/server-two/log
 ls -l /tmp/server*
{code}",,,,,,,,,,,,,,,,,JBPAPP6-1559,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hyuc07:,27358,,,,,,,,,,,"16/Sep/11 10:52 AM;brian.stansberry;This is pretty minor. I'll gladly accept a patch.

This basically means if the user passes an undocumented property to domain.sh and gets odd results, they shouldn't do that. The solution is to track properties that come in from the command line separately from those that come in from domain.xml/host.xml and if the former contain any of these jboss.server.xxx properties, filter them out from what gets passed on to the server VM. ModelCombiner.getServerLaunchCommand() can probably do the filtering as it processes environment.getHostSystemProperties().",,,,,,,,,,,,,,,,,,,,,,,,,,
"Spurious server dirs created when directory-grouping=""by-type"" is set",WFCORE-321,12484874,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jamezp,brian.stansberry,brian.stansberry,13/Feb/13 6:27 PM,01/Dec/14 3:52 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"Add directory-grouping=""by-type"" to the <host><servers> element in the stock host.xml and run domain.sh. The following empty directories are created:

$JBOSS_HOME/domain/servers/server-one
$JBOSS_HOME/domain/servers/server-two

The content that would normally be in those dirs if directory-grouping=""by-type"" wasn't set appears to all be going where it should (e.g. under domain/data, domain/log etc) so the only issue here is the empty directories.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hypqyv:,567,,,,,,,,,,,"13/Aug/13 5:05 PM;jamezp;After a review of the code and some thought about this I think it might be best to actually create the directories even if they are not used. My reasoning for this is upstream projects or subsystems might expect the {{jboss.server.base.dir}} to return a valid directory. If we do not create these directories then there will not be a valid {{jboss.server.base.dir}} and the responsibility would rely on the consumer of the property to create the directory.

I do however think we should be passing the {{jboss.server.base.dir}} to the servers when creating the launch commands. I think relying on the hard-coded value could be problematic in the future. I'll send a PR with the change soon, but I think this is what we should do; https://github.com/jamezp/wildfly/commit/d8ff4b72d953dcc3dec0e13a4b6043a1f9cf9731. I also think we should just leave the ServerEnvironment in charge of creating the directory if it does not exist.  ","14/Aug/13 2:18 PM;brian.stansberry;I think your point about creating the directories is solid. But I have doubts about using $JBOSS_HOME/domain/servers/<server-name> when directory-grouping=""by-type"". Perhaps $JBOSS_HOME/domain/data/servers/<server-name> or $JBOSS_HOME/domain/tmp/servers/<server-name>. Use the existing writable areas associated with the HC process.  The point of the whole by-type thing was to get all file writing into locations that map into the File Hierarchy Standard for Unix systems, particularly with RPM-based distributions of the server. The domain/data and domain/tmp dirs should already be set up for that. So we should make sure this file fits in as well.

I recommend you discuss this with Fernando Nasser and pick the appropriate location based on the expected semantics for the data we'll be storing in these dirs. Alternatives:

1) Since we have no idea what some upstream code might be writing here, assume it's meant to survive system and process restart. Put it in domain/data.

2) We don't expect anyone to actually write anything here, and if they do they are wrong and should use jboss.server.data.dir, jboss.server.tmp.dir or jboss.server.log.dir. So treat this like all other tmp files that may not survive system or process restart. Put it in domain/tmp.

3) Something else you guys come up with that fits in with what we are doing for FHS compliance.

I'm ok with any of these.",,,,,,,,,,,,,,,,,,,,,,,,,
Cardinality constraints on children are not enforced after parsing,WFCORE-320,12428674,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,,brian.stansberry,brian.stansberry,23/Jan/11 12:53 PM,01/Dec/14 3:52 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"The parsers enforce cardinality constraints on child elements in the model, but they aren't enforced thereafter. So, for example, a second ""socket-binding-group"" could be added to a standalone server via a management operation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hys53b:,14576,,,,,,,,,,,20/May/11 11:02 AM;brian.stansberry;Work on this can be limited to a few specific cases; e.g. the socket-binding-group on an individual server.,14/Apr/14 2:57 AM;swd847;Is this still relevant? I think that most resources that have a cardinality constrain have it enforced by forcing the resource to be registered under a specific name. ,"15/Apr/14 12:33 PM;brian.stansberry;Yes, it's still relevant since not *every* case is as you describe. But is quite minor.",,,,,,,,,,,,,,,,,,,,,,,,
Metrics/operations missing in platform mbean core-service,WFCORE-319,12464119,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,pilhuhn,pilhuhn,14/Apr/12 11:57 AM,01/Dec/14 3:52 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,rhq,,,,,"The platform mbean(s) exposes more metrics that what is currently available at core-service=platform-mbean

- Active Thread Count
- Active Thread Group Count
- JVM Free memory
- JVM Total memory
 
OS metrics -- java.lang:type=OperatingSystem 
- Free Physical Memory -- FreePhysicalMemorySize
- Free Swap Memory     -- FreeSwapSpaceSize 
- Process CPU Time     -- ProcessCpuTime
- Committed Virtual Memory  -- CommittedVirtualMemorySize
- open files  --OpenFileDescriptorCount

Threading
- SuspendedThreadCount
- DeadLockedThreadCount

Memory  -- java.lang:type=Memory
- operation to trigger gc  -- gc


And probably more",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|hz0933:,61883,,,,,,,,,,,15/Apr/12 3:28 PM;brian.stansberry;Where are these exposed in the JDK API?,15/Apr/12 4:14 PM;pilhuhn;I've added some locations to the original description. Not sure about the others. Perhaps threading subsystem?,"16/Apr/12 10:53 AM;brian.stansberry;Re: the GC one, it's exposed:

[standalone@localhost:9999 /] /core-service=platform-mbean/type=memory:gc
{""outcome"" => ""success""}
","16/Apr/12 10:55 AM;brian.stansberry;Re the others, none of them appear in the java.lang.management package *MXBean interfaces in http://docs.oracle.com/javase/7/docs/api/ . My guess is they are vendor specific additions to the standard API?",16/Apr/12 11:13 AM;pilhuhn;I see them all in jconsole,"16/Apr/12 11:24 AM;brian.stansberry;The platform-mbean resources are statically coded against the JDK API; they are not dynamically generated based on the whatever the JMX mbeans expose.

They theoretically could be, but not in the next 2 weeks.",,,,,,,,,,,,,,,,,,,,,
Failed to start server when -backup -cached-dc are used together,WFCORE-317,12462391,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,luck3y,rbertoncelj,rbertoncelj,24/Mar/12 6:19 AM,27/Jul/16 2:30 PM,29/Nov/16 3:54 PM,27/Jul/16 2:30 PM,3.0.0.Alpha4,,,,,,3.0.0.Alpha4,,Domain Management,,,,,15,,,,,,"When starting a slave host controller with *-backup -cached-dc* at the same time, the servers fail to start. Tested with 7.1.1.Final and 7.1.2.Final-SNAPSHOT today.

Also tried starting only with -backup first (starts OK) and then for the second time with both options, to make sure that cached configuration is already present if it would help, but it didn't.

Host controller should determine availability of domain controller and either backup domain configuration or use the cached one if domain controller is unavailable.

{code}
10:35:36,093 INFO  [org.jboss.modules] (main) JBoss Modules version 1.1.1.GA
10:35:36,176 INFO  [org.jboss.msc] (main) JBoss MSC version 1.0.2.GA
10:35:36,225 INFO  [org.jboss.as] (MSC service thread 1-3) JBAS015899: JBoss AS 7.1.2.Final-SNAPSHOT ""Brontes"" starting
10:35:36,612 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) JBAS010930: Cannot load the domain model using using --backup
10:35:36,617 INFO  [org.xnio] (MSC service thread 1-6) XNIO Version 3.0.3.GA
10:35:36,631 INFO  [org.xnio.nio] (MSC service thread 1-6) XNIO NIO Implementation Version 3.0.3.GA
10:35:36,649 INFO  [org.jboss.remoting] (MSC service thread 1-6) JBoss Remoting version 3.2.4.GA
10:35:36,970 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) JBAS010907: Failed to start server (server-one): java.util.NoSuchElementException: No child 'server-group' exists
	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:362) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:298) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.dmr.ModelNode.require(ModelNode.java:812) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.as.host.controller.ModelCombiner.<init>(ModelCombiner.java:139) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.createManagedServer(ServerInventoryImpl.java:474) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:160) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:150) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService$DelegatingServerInventory.startServer(DomainModelControllerService.java:521) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler.cleanStartServers(StartServersHandler.java:114) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler.access$300(StartServersHandler.java:50) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler$1.execute(StartServersHandler.java:94) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.executeDirect(PrepareStepHandler.java:122) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.execute(PrepareStepHandler.java:74) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:121) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService.startServers(DomainModelControllerService.java:443) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService.boot(DomainModelControllerService.java:403) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_30]

10:35:36,989 INFO  [org.jboss.as.remoting] (MSC service thread 1-8) JBAS017100: Listening on /127.0.0.1:29999
10:35:37,015 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) JBAS010907: Failed to start server (server-two): java.util.NoSuchElementException: No child 'server-group' exists
	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:362) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:298) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.dmr.ModelNode.require(ModelNode.java:812) [jboss-dmr-1.1.1.Final.jar:1.1.1.Final]
	at org.jboss.as.host.controller.ModelCombiner.<init>(ModelCombiner.java:139) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.createManagedServer(ServerInventoryImpl.java:474) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:160) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:150) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService$DelegatingServerInventory.startServer(DomainModelControllerService.java:521) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler.cleanStartServers(StartServersHandler.java:114) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler.access$300(StartServersHandler.java:50) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.operations.StartServersHandler$1.execute(StartServersHandler.java:94) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.executeDirect(PrepareStepHandler.java:122) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.execute(PrepareStepHandler.java:74) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:121) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService.startServers(DomainModelControllerService.java:443) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.host.controller.DomainModelControllerService.boot(DomainModelControllerService.java:403) [jboss-as-host-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
	at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_30]

10:35:37,082 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.2.Final-SNAPSHOT ""Brontes"" (Host Controller) started in 1249ms - Started 11 of 11 services (0 services are passive or on-demand)
{code}

",,,,,,,,,,,,,,,,,,,,,WFCORE-316,AS7-4413,WFCORE-338,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1685,,,,,,0.0,4.0,,1|hyzrdz:,59016,,,,"1. Configure a domain controller (no special config, just use host-master.xml and also add management user/password for slave host)
2. Configure a slave host controller (no special config, just use host-slave.xml and set host name, mgmt password and address of domain controller)
3. Start domain controller
4. Start slave host controller with -backup -cached-dc.
5. Host controller fails to start the servers.",,,,,,,"05/Apr/12 4:33 AM;mmartinez-gonzalez;Same problem here, when starting a slave host with --cached-dc I obtain same error. Happening with 7.1.1.Final version.",05/Apr/12 9:08 AM;kabirkhan;I think the original intent was to only be able to use one or the other? If that is the case we need to validate that better on startup,"05/Apr/12 9:34 AM;mmartinez-gonzalez;Hi Kabir,

yes, that sounds possible. Anyway it would be very useful to be able to use both options together. I have done more tests and found this:

- When a slave host is started with --cached-dc option it won't register to Domain Controller although it's available. domain.sh help says ""If this host is not the Domain Controller and cannot contact the Domain Controller at boot, boot using a locally cached copy of the domain configuration (see --backup)"" and this is not really happening because slave host never contact to DC with --cached-dc --> AS7-4412

- Also, when a slave host is started with --cached-dc option, executing ""jboss-cli.sh -c command=/host=$SLAVE_HOSTNAME:shutdown --controller=$DOMAIN_CONTROLLER_HOST:$DOMAIN_CONTROLLER_PORT --user=$HOSTNAME --password=$PASSWORD"" will stop the Domain Controller instead stopping slave host. If I execute the same command without using --cached-dc option when starting slave host, it will shutdown the slave host as I expected. I am not really sure about what should do this command (stopping DC or slave -I think it should stop slave host-) but it's kind of weird the behaviour depending on the --cached-dc option.  --> AS7-4413

I'll open two new issues to see if these are bugs and can be solved (I'll update with JIRA numbers and link them to this issue).

Thank you!","01/Apr/15 12:53 PM;brian.stansberry;Ken, I'm assigning this as one of several in the general area of how various Host Controllers interact. We should look at them in total and come up with a strategy, not do them piecemeal.",,,,,,,,,,,,,,,,,,,,,,,
NPE executing domain operation,WFCORE-315,12499957,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,heiko.braun,heiko.braun,04/Sep/13 10:36 AM,06/Oct/15 11:59 AM,29/Nov/16 3:54 PM,06/Oct/15 11:59 AM,,,,,,,2.0.0.CR7,,Domain Management,,,,,0,,,,,,"{noformat}
[ERROR] Request
[ERROR] {
[ERROR]     ""operation"" => ""composite"",
[ERROR]     ""address"" => [],
[ERROR]     ""steps"" => [
[ERROR]         {
[ERROR]             ""address"" => [(""server-group"" => ""*"")],
[ERROR]             ""operation"" => ""read-resource-description"",
[ERROR]             ""access-control"" => ""trim-descriptions"",
[ERROR]             ""operations"" => true
[ERROR]         },
[ERROR]         {
[ERROR]             ""address"" => [
[ERROR]                 (""host"" => ""master""),
[ERROR]                 (""server"" => ""*"")
[ERROR]             ],
[ERROR]             ""operation"" => ""read-resource-description"",
[ERROR]             ""access-control"" => ""trim-descriptions"",
[ERROR]             ""operations"" => true
[ERROR]         },
[ERROR]         {
[ERROR]             ""address"" => [(""extension"" => ""*"")],
[ERROR]             ""operation"" => ""read-resource-description"",
[ERROR]             ""access-control"" => ""trim-descriptions"",
[ERROR]             ""operations"" => true
[ERROR]         }
[ERROR]     ],
[ERROR]     ""operation-headers"" => {""roles"" => ""OPERATOR""}
[ERROR] }

{noformat}


leads to  


{noformat}
[Host Controller] 16:34:53,544 ERROR [org.jboss.as.controller.management-operation] (XNIO-1 task-12) JBAS014612: Operation (""composite"") failed - address: ([]): java.lang.NullPointerException
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.HostControllerExecutionSupport$Factory.create(HostControllerExecutionSupport.java:167)
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.HostControllerExecutionSupport$Factory.create(HostControllerExecutionSupport.java:181)
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.OperationSlaveStepHandler.addSteps(OperationSlaveStepHandler.java:108)
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.OperationCoordinatorStepHandler.executeTwoPhaseOperation(OperationCoordinatorStepHandler.java:201)
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.OperationCoordinatorStepHandler.execute(OperationCoordinatorStepHandler.java:124)
[Host Controller]   at org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.execute(PrepareStepHandler.java:103)
[Host Controller]   at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:610) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:488) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:277) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:272) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:257) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:142) [wildfly-controller-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:154) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$2.run(SubjectDoAsHandler.java:96) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$2.run(SubjectDoAsHandler.java:92) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_17]
[Host Controller]   at javax.security.auth.Subject.doAs(Subject.java:415) [rt.jar:1.7.0_17]
[Host Controller]   at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:92) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:86) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:50) [undertow-core-1.0.0.Beta12.jar:1.0.0.Beta12]
[Host Controller]   at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:87) [wildfly-domain-http-interface-8.0.0.Beta1-SNAPSHOT.jar:8.0.0.Beta1-SNAPSHOT]
[Host Controller]   at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:52) [undertow-core-1.0.0.Beta12.jar:1.0.0.Beta12]
[Host Controller]   at io.undertow.server.HttpHandlers.executeRootHandler(HttpHandlers.java:36) [undertow-core-1.0.0.Beta12.jar:1.0.0.Beta12]
[Host Controller]   at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:614) [undertow-core-1.0.0.Beta12.jar:1.0.0.Beta12]
[Host Controller]   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_17]
[Host Controller]   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_17]
[Host Controller]   at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_17]
[Host Controller] 


{noformat}",,,,,,,,,,,,,,,,,,,,,WFCORE-998,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1122,,,,,,0.0,10.0,,1|hziodr:,169263,,,,,,,,,,,"04/Sep/13 11:07 AM;heiko.braun;the error seems to be related to the wildcard usage: (""server"" => ""*"")","04/Sep/13 3:22 PM;brian.stansberry;Did this work before? Looking at the code, I doubt it.","04/Sep/13 3:38 PM;heiko.braun;Right, that was my Impression as well. The piece of code that reveils the error has been changed recently. The strange thing is, that the ops don't fail when being executed indepentently.","05/Sep/13 10:53 AM;brian.stansberry;If this can be worked around, please do so, as this will likely be difficult to fix and will take a while.","05/Sep/13 1:05 PM;brian.stansberry;I'm leaving this scheduled for 8.0.0.CR1 primarily as a reminder to look into it, but please do not count on it being resolved then.","12/Nov/13 10:40 AM;emuckenhuber;For further reference. The problem here is seems to be the server=*:read-resource-description causing the NPE. The operation can usually be executed, since it's handled as part of the multi-target part of the read-resource-description. As part of a composite operation this would be executed as a 2-phase operation and the handling for wildcard targets is missing.",13/Nov/13 11:38 PM;brian.stansberry;https://github.com/wildfly/wildfly/pull/5463 made the failure more explicit.,"27/Nov/13 11:16 AM;brian.stansberry;Emanuel, I'm assigning to you as the dependent issue is assigned to you.","28/Sep/15 12:19 PM;brian.stansberry;Kabir, this is the same as the other one. If by chance your other work fixed this, please take credit. :) If not it's fine to assign back.","28/Sep/15 12:32 PM;kabirkhan;I see this in CLI, so I think it works fine
{code}
[domain@localhost:9990 /] batch
[domain@localhost:9990 / #] /server-group=*:read-resource-description(access-control=trim-descriptions, operations=true)
[domain@localhost:9990 / #] /host=master/server=*:read-resource-description(access-control=trim-descriptions, operations=true)
[domain@localhost:9990 / #] /extension=*:read-resource-description(access-control=trim-descriptions, operations=true)
[domain@localhost:9990 / #] run-batch --headers={roles=[operator]}
The batch executed successfully
{code}
Also https://github.com/wildfly/wildfly-core/pull/1122 adds a test for using {code}/host=*/server=*:r-r-d{code}",,,,,,,,,,,,,,,,,
DefaultOperationDescriptionProvider uses incorrect call to create reply parameter description,WFCORE-313,12532445,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,17/Feb/14 8:35 PM,08/Jul/16 7:32 PM,29/Nov/16 3:54 PM,08/Jul/16 7:32 PM,,,,,,,3.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"When creating reply descriptions, DefaultOperationDescriptionProvider calls attributeDescriptionResolver.getOperationParameterDescription instead of attributeDescriptionResolver.getOperationReplyValueTypeDescription.

A fix needs to not break compatibility for existing users of the incorrect behavior; i.e. call the correct method in a try block, catch any MissingResourceException, and if caught call the incorrect method.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1274,,,,,,0.0,2.0,,1|hzmbx3:,190504,,,,,,,,,,,"18/Feb/14 7:15 AM;brian.stansberry;In the more commonly used code path it calls AttributeDefinition.addOperationParameterDescription(...) which in turn calls descriptionResolver.getOperationParameterDescription(). So fixing this is a bit more complex. AttributeDefinition itself doesn't expose the necessary API for distinguishing reply elements from operation parameters.

There's also the issue of distinguishing deprecation descriptions for the two cases. ResourceDescriptionResolver itself doesn't expose a method for getting reply parameter deprecation data.

I was originally planning on fixing this quickly, but given how the above expands the scope of the task considerably, I'm going to wait. It's not particularly urgent; it would only cause problems if an operation had a parameter ""foo"" and a reply element also named ""foo"" and the description text needed to be different between the two or the deprecation data needed to be different.","28/Apr/15 12:41 PM;ctomc;We do have some extra info on OperationDefinition that tells us what are parameters and what are reply attributes.
And it also know how to handle deprecated attributes.",,,,,,,,,,,,,,,,,,,,,,,,,
system properties are trim()'d and loose whitespace,WFCORE-309,12536154,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,tfonteyn,tfonteyn,26/Mar/14 8:05 AM,31/Oct/16 2:35 PM,29/Nov/16 3:54 PM,02/Feb/15 9:07 PM,,,,,,,1.0.0.Alpha17,,Domain Management,,,,,0,,,,,,"When a system property was defined as:
  /system-property=foo:add(value=""    spaces  "");

it gets written with the correct spaces around it to the configuration file.
When the configuration is read the value gets trimmed and the prefix/suffix of spaces is lost.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/394,,,,,,0.0,8.0,,1|hzmzr3:,194379,,,,"package org.jboss.as.controller;

public class SimpleAttributeDefinition extends AttributeDefinition {
...
private ModelNode parse(final String value) throws OperationFailedException  {
        final String trimmed = value == null ? null : value.trim();

I can see how this could be fixed by checking on PROPERTY (or STRING?) *before* creating the node. If prop|string -> use ""value"", otherwise use ""trimmed""

I can do a pull request easily but can someone give me feedback first if this is a good idea ?",,,,,,,"26/Mar/14 8:36 AM;brian.stansberry;AIUI you are suggesting using different logic for ModelType.PROPERTY?

That won't work; very few attributes are of type PROPERTY. I'm quite sure a system property resource's value attribute is type STRING.

I'm opposed to changing the AttributeDefinition.parse method, at least for EAP 6.3.x. That will effect nearly every attribute in the system and could produce undesired changes in behavior.","26/Mar/14 9:21 AM;tfonteyn;it would be for STRING as it looks.

But I agree that while the change is trivial, it would have system-wide (potential) repercussions.
","26/Mar/14 12:10 PM;brian.stansberry;Ah, I see. So you a proposing limiting the ""no trim"" behavior to types that store a string, STRING and the elements in in PROPERTY (perhaps just the value.)

I'd be open to trying this in WF 9, but it should not go into EAP 6 until it has been in the wild for a long time. Not in 6.3.x.","26/Mar/14 12:18 PM;tfonteyn;yup, that's it indeed.

I'll get a pull request done for WildFly,  but I understand the high risk /postponing for EAP","09/Apr/14 4:07 PM;brian.stansberry;Note that the org.jboss.as.controller.AttributeParser class has logic equivalent to that in SimpleAttributeDefinition, as does ListAttributeDefinition and MapAttributeDefinition. Any subclass of AttributeDefinition should be checked.","01/Dec/14 3:30 PM;brian.stansberry;Tom, you mentioned sending up a PR for this. Do you still intend to do that? If not, please reassign back to me.

We should do this soon if we want it in WF 9.","02/Dec/14 9:23 AM;tfonteyn;Brian, not enough free time sadly... passing it back to you :(",10/Dec/14 11:21 AM;ehugonnet;Need to take value that can be expression into account ,,,,,,,,,,,,,,,,,,,
"Future returned by ModelControllerClient executeAsync does not provide reliable return value from ""cancel""",WFCORE-305,12540951,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,15/May/14 3:26 PM,19/Feb/15 8:01 AM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,DelegatingCancellableAsyncFuture.asyncCancel does not block waiting for the response to the cancel request. As result it is a race whether the status is not reliably set to CANCELLED before that value is tested to determine whether to return true/false.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hznrl3:,198922,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mod_proxy incompatible with logout mechanism,WFCORE-292,12465139,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jason.greene,jason.greene,jason.greene,26/Apr/12 2:53 PM,01/Dec/14 3:14 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,2,,,,,,"We need to either outlaw proxies, or to make sure the console works with them.",,,,,,,,,,,,,,,,,,,,,AS7-4623,,,,,,26/Apr/12 4:17 PM;jsightler;Screenshot_proxy_logs.png;https://issues.jboss.org/secure/attachment/12353699/Screenshot_proxy_logs.png,26/Apr/12 4:08 PM;jsightler;apache_mod_proxy_mgmt.conf;https://issues.jboss.org/secure/attachment/12353698/apache_mod_proxy_mgmt.conf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,10.0,,1|hz0s33:,64961,,,,,,,,,,,"26/Apr/12 3:55 PM;jason.greene;Reverse proxying works as expected if ProxyPreserveHost is set

",26/Apr/12 3:55 PM;jason.greene;Now testing forward proxying,"26/Apr/12 4:08 PM;jsightler;In my scenario, the frontend proxy (apache httpd, reverse proxy mode) is exposing the endpoint as SSL. The JBoss management interface itself is listening on HTTP. I am also currently testing EAP6B1, though I can try a more recent one to recreate the issue if needed.

My rule is rewriting the Location redirect to workaround the earlier issue. apache configurations for this are attached.

","26/Apr/12 4:21 PM;jsightler;I have also attached a screenshot of the requests and headers involved in a problematic scenario. If I hit cancel on the dialog that pops up. The Location header of the first response appears to set the Location header correctly, but the second request (from the redirect) still keeps the first credentials.

If I hit cancel, it loads an HTML page that appears to be attempting to do a Javascript redirect back to http://192.168.56.33/. This content-type (as seen in the screenshot) is text/plain, though, so I just see the code on the screen.

This is all with Firefox 10.0.4 under RHEL 6.2.

I'd be happy to test any scenarios or builds that you think would work better.",26/Apr/12 4:54 PM;jason.greene;What happens if you remove those Location blocks?,"26/Apr/12 6:12 PM;jsightler;At the moment, everything breaks if I remove those due to other issues with EAPB1. Do you have a build of AS7.x that you can recommend for me to try? I tried this build:
https://ci.jboss.org/hudson/job/JBoss-AS-7.x-latest/899/

It failed through the proxy as it tried to load some resource from /management on port 80, though.
",04/May/12 12:37 AM;jason.greene;I think this might be a console issue with URL generation. Deferring to 7.2,23/Apr/13 6:13 PM;jason.greene;Correcting migration,24/Jun/13 9:26 AM;jsightler;I now believe that my logout issues relate to BASIC authentication. It seems that the LogoutHandler does not work correctly when provided with BASIC authentication headers.,30/Jun/14 11:18 AM;ctomc;Is this still issue with WildFly 8.1?,,,,,,,,,,,,,,,,,
The SecurityRealmService should only perform a generic mapping to RealmUser if really required.,WFCORE-286,12558257,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,26/Nov/14 1:06 PM,10/Dec/14 10:17 AM,29/Nov/16 3:54 PM,27/Nov/14 9:27 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,If there is a more accurate way to calculate the RealmUser then use it.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1168595,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/365,,,,,,0.0,4.0,,1|hzu8lj:,9223372036854775807,,,,,,,,,,,27/Nov/14 7:15 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1168595|https://bugzilla.redhat.com/show_bug.cgi?id=1168595] from ASSIGNED to POST,28/Nov/14 2:09 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1168595|https://bugzilla.redhat.com/show_bug.cgi?id=1168595] from POST to MODIFIED,02/Dec/14 3:56 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1168595|https://bugzilla.redhat.com/show_bug.cgi?id=1168595] from MODIFIED to ON_QA,10/Dec/14 10:17 AM;jira-bugzilla-migration;Ondrej Kotek <okotek@redhat.com> changed the Status of [bug 1168595|https://bugzilla.redhat.com/show_bug.cgi?id=1168595] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
cli tab completion gets confused by double slash,WFCORE-285,12557423,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,aloubyansky,tfonteyn,tfonteyn,14/Nov/14 9:25 AM,23/Sep/15 6:51 AM,29/Nov/16 3:54 PM,03/Dec/14 2:09 PM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,Using two slashes in a CLI path and hitting TAB confuses the auto-completion,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1164277,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/363,,,,,,0.0,6.0,,1|hzu3s7:,9223372036854775807,,,,"Start wildfly in domain mode.
start the CLI
type:    /host=master//
and hit TAB
[domain@orac.usersys.redhat.com:9999 /] /host=master//
core-service               deployment-overlay         host                       management-client-content  profile                    socket-binding-group
deployment                 extension                  interface                  path                       server-group               system-property

so it sees the "" /host=master//"" as just ""/"" and shows the keyswords for ""/""

",,,,,Workaround Exists,,18/Nov/14 5:59 AM;soul2zimate;PR to handle potential multiple slashes at the end of command.,31/Mar/15 10:17 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1164277|https://bugzilla.redhat.com/show_bug.cgi?id=1164277] from NEW to ASSIGNED,31/Mar/15 10:18 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1164277|https://bugzilla.redhat.com/show_bug.cgi?id=1164277] from ASSIGNED to POST,26/Aug/15 2:37 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1164277|https://bugzilla.redhat.com/show_bug.cgi?id=1164277] from POST to MODIFIED,16/Sep/15 10:55 PM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1164277|https://bugzilla.redhat.com/show_bug.cgi?id=1164277] from MODIFIED to ON_QA,23/Sep/15 6:51 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1164277|https://bugzilla.redhat.com/show_bug.cgi?id=1164277] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
SASL_SERVER and SASL_PROTOCOL options not being passed all the way to Remoting,WFCORE-283,12558229,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,26/Nov/14 8:14 AM,10/Dec/14 10:21 AM,29/Nov/16 3:54 PM,27/Nov/14 5:48 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,Domain Management,Remoting,Security,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/362,,,,,,0.0,4.0,,1|hzu8fr:,9223372036854775807,,,,,,,,,,,26/Nov/14 12:01 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1168313|https://bugzilla.redhat.com/show_bug.cgi?id=1168313] from ASSIGNED to POST,27/Nov/14 8:20 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1168313|https://bugzilla.redhat.com/show_bug.cgi?id=1168313] from POST to MODIFIED,02/Dec/14 3:56 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1168313|https://bugzilla.redhat.com/show_bug.cgi?id=1168313] from MODIFIED to ON_QA,10/Dec/14 10:21 AM;jira-bugzilla-migration;Ondrej Kotek <okotek@redhat.com> changed the Status of [bug 1168313|https://bugzilla.redhat.com/show_bug.cgi?id=1168313] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
"Unable to check result ""undefined"" in cli",WFCORE-281,12558025,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,gonthim,gonthim,gonthim,24/Nov/14 4:32 AM,13/Jan/15 1:54 AM,29/Nov/16 3:54 PM,04/Dec/14 4:33 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"if-else constructs in the CLI can't compare against undefined attribute results.

Attempt to create any 'if (result == undefined)' algorithms will always return false. The value-comparison can't handle undefined attributes. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1158602,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/359,,,,,,0.0,5.0,,1|hzu77z:,9223372036854775807,,,,,,,,,,,24/Nov/14 4:33 AM;jira-bugzilla-migration;Joe Wertz <ewertz@redhat.com> changed the Status of [bug 1158602|https://bugzilla.redhat.com/show_bug.cgi?id=1158602] from NEW to ASSIGNED,04/Dec/14 4:33 AM;gonthim;PR Merged,15/Dec/14 11:58 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1158602|https://bugzilla.redhat.com/show_bug.cgi?id=1158602] from ASSIGNED to MODIFIED,09/Jan/15 3:45 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1158602|https://bugzilla.redhat.com/show_bug.cgi?id=1158602] from MODIFIED to ON_QA,13/Jan/15 1:54 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1158602|https://bugzilla.redhat.com/show_bug.cgi?id=1158602] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Recursive resolution breaks expression escaping,WFCORE-280,12530143,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,jamezp,jamezp,22/Jan/14 2:05 PM,23/Dec/14 3:18 PM,29/Nov/16 3:54 PM,23/Dec/14 3:18 PM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,In DMR expressions can be escaped with {{$$}}. Two passes are made in the [ExpressionResolverImpl|https://github.com/wildfly/wildfly/blob/master/controller/src/main/java/org/jboss/as/controller/ExpressionResolverImpl.java#L119]. The first pass changes {code}$${key}{code} to {code}${key}{code}. The second pass fully expands the expression.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/358,,,,,,0.0,0.0,,1|hzlx5j:,188165,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Revisit error message for an authentication failure.,WFCORE-278,12536929,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,02/Apr/14 9:03 AM,17/Sep/15 10:31 AM,29/Nov/16 3:54 PM,17/Sep/15 10:31 AM,,,,,,,2.0.0.CR2,,CLI,Domain Management,Remoting,Security,,0,,,,,,"After authentication fails in the CLI the following error message is output: -

{code}
Unable to authenticate against controller at localhost:9990: Authentication failed: the server presented no authentication mechanisms
{code}

This text is a bit misleading, what it actually means is all mechanisms presented have either been excluded or attempted and now no further mechanisms are available to try.",,,,,,,,,,,,,,,,,,REM3-199,WFCORE-279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzn4fz:,195137,,,,,,,,,,,"17/Sep/15 10:31 AM;dlofthouse;The linked updates mean that a more meaningful error message is now displayed: -


{noformat}
Password: Failed to connect to the controller: Unable to authenticate against controller at localhost:9990: Authentication failed: all available authentication mechanisms failed:
   DIGEST-MD5: Server rejected authentication
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,
whoami operation failed when rbac enabled but no roles assigned,WFCORE-276,12557958,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Won't Fix,dlofthouse,dlofthouse,dlofthouse,21/Nov/14 1:35 PM,24/Nov/14 2:43 PM,29/Nov/16 3:54 PM,24/Nov/14 2:43 PM,,,,,,,1.0.0.Alpha14,,CLI,Domain Management,,,,0,,,,,,"Need to double check this is either the CLI making a call in addition to the whoami op and that call is failing or something being accessed by whoami is causing the failure.

Here is the failure for a user with no roles: -

{noformat}
[standalone@localhost:9990 /] [darranl@localhost bin]$ ./jboss-cli.sh -c --no-local-auth
Authenticating against security realm: ManagementRealm
Username: UserTwo
Password: 
[standalone@localhost:9990 /] :whoami
{
    ""outcome"" => ""success"",
    ""result"" => {""identity"" => {
        ""username"" => ""UserTwo"",
        ""realm"" => ""ManagementRealm""
    }}
}
[standalone@localhost:9990 /] :whoami(verbose=true)
Failed to get the list of the operation properties: ""WFLYCTL0313: Unauthorized to execute operation 'read-operation-description' for resource '[]' -- ""WFLYCTL0332: Permission denied""""
[standalone@localhost:9990 /] 
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzu6yf:,9223372036854775807,,,,,,,,,,,"24/Nov/14 2:43 PM;dlofthouse;Marking as 'Won't Fix' as this failure is happening during the validation of a low level command, the recommended approach is to use a high level command.

Within the CLI a high level command 'connection-info' already exists which amongst other things outputs the resulting role information from whoami so there is no benefit in adding another high level command to duplicate this.",,,,,,,,,,,,,,,,,,,,,,,,,,
" The description of the default scanner attribute ""scan-enabled"" is incorrect. ",WFCORE-271,12557898,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,21/Nov/14 3:32 AM,27/Nov/14 4:12 AM,29/Nov/16 3:54 PM,27/Nov/14 4:12 AM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"Description of problem: The description of the 'scan-enabled' attribute states ""Flag indicating that all scanning (including initial scanning at startup) should be disabled."" The default value of this attribute is ""true"", therefore I believe the description is incorrect.

I propose that the description be changed to: ""Flag indicating if all scanning (including initial scanning at startup) is enabled.""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1162982,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/356,,,,,,0.0,4.0,,1|hzu6lb:,9223372036854775807,,,,,,,,,,,21/Nov/14 4:50 AM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 1162982|https://bugzilla.redhat.com/show_bug.cgi?id=1162982] from NEW to POST,21/Nov/14 10:16 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1162982|https://bugzilla.redhat.com/show_bug.cgi?id=1162982] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1162982|https://bugzilla.redhat.com/show_bug.cgi?id=1162982] from MODIFIED to ON_QA,26/Nov/14 2:23 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1162982|https://bugzilla.redhat.com/show_bug.cgi?id=1162982] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
 CLI freezes and it's not possible to terminate it (using Ctrl-C) in some cases,WFCORE-269,12557798,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,thofman,thofman,thofman,20/Nov/14 6:51 AM,01/Dec/14 4:47 AM,29/Nov/16 3:54 PM,27/Nov/14 7:49 AM,,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"This is copy of https://bugzilla.redhat.com/show_bug.cgi?id=1149099

Description:

The CLI freezes in phase of requesting username/password in some cases.

Reproducer
==========
Run following command:

./jboss-cli.sh -c << EOF
/core-service=management/security-realm=ManagementRealm/authentication=local:remove
reload
EOF",,,,,,,,,,,,,,,,,,,,,WFCORE-203,,,,,,,,,,,User Experience,,https://bugzilla.redhat.com/show_bug.cgi?id=1149099,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/351,,,,,,0.0,8.0,,1|hzu5zj:,9223372036854775807,,,,"Run following command:

./jboss-cli.sh -c << EOF
/core-service=management/security-realm=ManagementRealm/authentication=local:remove
reload
EOF",,,,jcacek,Workaround Exists,- close affected terminal,20/Nov/14 6:56 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from ASSIGNED to POST,20/Nov/14 7:08 AM;thofman;PR: https://github.com/wildfly/wildfly-core/pull/351,20/Nov/14 6:25 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from MODIFIED to ON_QA,26/Nov/14 4:19 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from ON_QA to ASSIGNED,27/Nov/14 7:49 AM;aloubyansky;Merged.,01/Dec/14 4:32 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from ASSIGNED to ON_QA,01/Dec/14 4:47 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1149099|https://bugzilla.redhat.com/show_bug.cgi?id=1149099] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,
CLI GUI fails if connecting to AS7 or EAP6,WFCORE-268,12557734,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ssilvert,ssilvert,ssilvert,19/Nov/14 2:55 PM,20/Nov/14 12:41 PM,29/Nov/16 3:54 PM,20/Nov/14 12:41 PM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"If you try to use a WildFly version CLI GUI to connect to AS7 or EAP6, you will get a failure.  The reason is because CLI GUI tries to do a list-log-files operation, which does not exist in those older AS versions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/346,,,,,,0.0,0.0,,1|hzu5lb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI prints output twice if using cli client jar,WFCORE-267,12557733,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,pkremens,ssilvert,ssilvert,19/Nov/14 2:47 PM,21/Jan/16 7:05 AM,29/Nov/16 3:54 PM,05/Dec/14 6:16 PM,1.0.0.Alpha13,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"If you are using the [CLI client jar|https://developer.jboss.org/wiki/UsingTheCLIRemoteClientJar], all output is printed twice.  This is because JBoss logging is not set up and by default CommandContextImpl is printing log messages to standard out.  The output will look something like this:
{code}
[standalone@localhost:9999 /] :read-children-types
Nov 19, 2014 8:57:19 AM org.jboss.as.cli.impl.CommandContextImpl printLine
INFO: {
    ""outcome"" => ""success"",
    ""result"" => [
        ""core-service"",
        ""deployment"",
        ""deployment-overlay"",
        ""extension"",
        ""interface"",
        ""path"",
        ""socket-binding-group"",
        ""subsystem"",
        ""system-property""
    ]
}
{
    ""outcome"" => ""success"",
    ""result"" => [
        ""core-service"",
        ""deployment"",
        ""deployment-overlay"",
        ""extension"",
        ""interface"",
        ""path"",
        ""socket-binding-group"",
        ""subsystem"",
        ""system-property""
    ]
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1149526,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/347,https://github.com/wildfly/wildfly-core/pull/378,,,,,0.0,6.0,,1|hzu5l3:,9223372036854775807,,,,,,,,,,"You can work around this issue by assuming JDK logging and setting a JDK log file with -Djava.util.logging.config.file=logging.properties.  In the file, set logger.org.jboss.as.cli.level=OFF.",04/Dec/14 1:54 PM;jamezp;Replacement PR coming.,04/Dec/14 3:47 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1149526|https://bugzilla.redhat.com/show_bug.cgi?id=1149526] from NEW to ASSIGNED,04/Dec/14 4:16 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1149526|https://bugzilla.redhat.com/show_bug.cgi?id=1149526] from ASSIGNED to POST,05/Dec/14 6:39 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1149526|https://bugzilla.redhat.com/show_bug.cgi?id=1149526] from POST to MODIFIED,09/Dec/14 6:17 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1149526|https://bugzilla.redhat.com/show_bug.cgi?id=1149526] from MODIFIED to ON_QA,10/Dec/14 7:14 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1149526|https://bugzilla.redhat.com/show_bug.cgi?id=1149526] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
add-user not escaping the backslash '\' character in usernames.,WFCORE-265,12557715,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,19/Nov/14 1:07 PM,20/Nov/14 6:07 AM,29/Nov/16 3:54 PM,20/Nov/14 6:07 AM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/345,,,,,,0.0,0.0,,1|hzu5h3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
server-name and sasl-protocol on the management interfaces don't fully support expressions.,WFCORE-264,12557692,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,19/Nov/14 8:19 AM,20/Nov/14 5:37 AM,29/Nov/16 3:54 PM,20/Nov/14 5:37 AM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/344,,,,,,0.0,0.0,,1|hzu5c7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cancelling management op on slave HC tree is broken,WFCORE-263,12557651,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jameslivingston,jameslivingston,19/Nov/14 1:24 AM,10/May/16 4:01 PM,29/Nov/16 3:54 PM,05/Apr/16 4:05 PM,1.0.0.Alpha9,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"If you have a DC with a slave HC, and perform a management operation which gets stuck, non-progressing operations will be reported for both the DC and the slave HC via:
/host=master/core-service=management/service=management-operations:find-non-progressing-operation
/host=slave/core-service=management/service=management-operations:find-non-progressing-operation

Cancelling the operation under /host=master works as expected, pushing the cancellation down to the slave and the controllers become responsive again.


If however you attempt to cancel the operation under /host=slave, it goes bad. { ""outcome"" => ""success"", ""result"" => undefined } is reported in the CLI, but the controllers are still unresponsive.

Running :find-non-progressing-operation against the slave will report the {outcome=success,result=undefined} rather than that no non-progressing operations were found, and active-operation=*:read-resource() shows it as not cancelled.

Once you attempt to cancel it on a slave, attempting to cancel it under /host=master will report success, but leave the slave op in a weird state, and things requiring the controller lock (such as the web UI) will still not respond.",,,,,,,,,,,,,,,,,,,,,,,,,,,20/Nov/14 12:28 AM;jameslivingston;unundeployable.zip;https://issues.jboss.org/secure/attachment/12386545/unundeployable.zip,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1202610,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1252,,,,,,1.0,10.0,,1|hzu53z:,9223372036854775807,,,,"1) Create a deployment with code that runs on shutdown (e.g. @PreDestroy method on @Startup @Singleton EJB, or servlet destroy() method), which blocks forever
2) Deploy it to a server instance running under the slave HC
3) Attempt to undeploy it
4) use the CLI to cancel the long-running operation via the /host=master tree (works) or /host=slave tree (does not)",,,,,,,"19/Nov/14 9:47 AM;brian.stansberry;""rather than that no non-progressing operations were found, and active-operation=*:read-resource() shows it as not cancelled.""

What happens if you invoke the ""cancel"" operation on active-operation=xxx resource with the problematic operation?","20/Nov/14 12:18 AM;jameslivingston;Doing that works correctly.

My understanding is that in this setup, there is a composite op running on the DC, a composite op running on the slave HC(s), and an op per server instance to do the undeployment. Cancelling the DC op works correctly, and tells the server instance to interrupt and it rolls back (obviously the web container thread to undeploy is still blocked). Cancelling the per-server op works correctly, as it triggers a rollback of the HC op and then DC op.

If you cancel the HC op, it says it does so and the HC op disappears, but the per-server op looks like it is still running. Cancelling that per-server op gets it back to a working state.


I'm not sure why, but it looks like if you tell it to cancel the HC-level op (rather than the DC op), it is not cancelling the per-server op.","20/Nov/14 12:30 AM;jameslivingston;I've attached a simple reproducer with an @Startup @Singleton EJB that block forever in it's @PreDestroy. To use:
1) build with maven
2) start the host-master and host-slave configurations we ship
3) Deploy it and assign to the main group which runs on the slave HC
4) Attempt to remove the deployment
5) Poke around in the CLI","23/Dec/14 10:18 PM;brian.stansberry;Looking at the list of active operations on the slave HC confirms my expectation as to what was going on here:

{code}
[domain@localhost:9990 /] /host=slave/core-service=management/service=management-operations:read-resource(recursive=true,include-runtime=true)
{
    ""outcome"" => ""success"",
    ""result"" => {""active-operation"" => {
        ""24068422"" => {
            ""access-mechanism"" => undefined,
            ""address"" => [
                (""host"" => ""slave""),
                (""server"" => ""server-one"")
            ],
            ""caller-thread"" => ""Host Controller Service Threads - 11"",
            ""cancelled"" => false,
            ""exclusive-running-time"" => -1L,
            ""execution-status"" => ""executing"",
            ""operation"" => ""composite"",
            ""running-time"" => 78500204000L
        },
        ""1273140711"" => {
            ""access-mechanism"" => ""undefined"",
            ""address"" => [],
            ""caller-thread"" => ""Host Controller Service Threads - 10"",
            ""cancelled"" => false,
            ""exclusive-running-time"" => 78542647000L,
            ""execution-status"" => ""completing"",
            ""operation"" => ""composite"",
            ""running-time"" => 78544658000L
        },
        ""542652524"" => {
            ""access-mechanism"" => ""undefined"",
            ""address"" => [
                (""host"" => ""slave""),
                (""core-service"" => ""management""),
                (""service"" => ""management-operations"")
            ],
            ""caller-thread"" => ""Host Controller Service Threads - 17"",
            ""cancelled"" => false,
            ""exclusive-running-time"" => -1L,
            ""execution-status"" => ""executing"",
            ""operation"" => ""read-resource"",
            ""running-time"" => 4639000L
        }
    }}
}
{code}

The third op is just the CLI read-resource request itself, so ignore that.

The others are normal for a domain op that is being rolled out to servers and hasn't yet completed.

The 2nd one (1273140711) was actually invoked first. It was a request from the DC to the slave telling it to update its own model. It has ""execution-status"" => ""completing"" because it has prepared the update to the model and is waiting for an instruction from the DC telling it to commit the transaction. This request is actually fine.

The 1st one (24068422) is the problematic one. The DC has gotten the prepared notification from the 1273140711 op and has proceeded to roll out the change to the servers. It sends a request to the slave which they then proxy on to the servers. The slave is just acting as a proxy. This is the request that is actually stuck, as the server is not responding.

The problem is find-non-progressing-operation and cancel-non-progressing-operation are identifying the 1273140711 op as the problematic one.

{code}
[domain@localhost:9990 /] /host=slave/core-service=management/service=management-operations:find-non-progressing-operation
{
    ""outcome"" => ""success"",
    ""result"" => ""1273140711""
}
{code}

Canceling that one doesn't unstick anything, as the DC is not yet blocking waiting for a response to its commit/rollback.

I'll need to give some thought as to how to get find-non-progressing-operation and cancel-non-progressing-operation to identify the 24068422 op as the problematic one, or at least to decide that they don't know which of the two is the problem, forcing the user to investigate further.","23/Dec/14 10:24 PM;brian.stansberry;The 1273140711 is identified as the problematic one because it is the op that holds the exclusive write lock on the HC process, and it has been holding it for a long time. The HC is simply acting as a proxy for the 24068422 op, so there is no need for it to acquire the exclusive write lock.",18/Mar/15 4:20 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from NEW to ASSIGNED,29/Apr/15 4:12 PM;brian.stansberry;Reopening. The test I added introduced instability in the testsuite. I don't know if that was due to the test or the fix; in any case I reverted the patch.,"19/Nov/15 3:29 PM;brian.stansberry;I'm rejecting my own PR as at this point I'm just collecting CI test run data, not proposing it for merging.",16/Feb/16 1:35 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from ASSIGNED to NEW,17/Mar/16 6:50 PM;jira-bugzilla-migration;Romain Pelisse <rpelisse@redhat.com> changed the Status of [bug 1202610|https://bugzilla.redhat.com/show_bug.cgi?id=1202610] from NEW to ASSIGNED,,,,,,,,,,,,,,,,,
Incorrect LoginModule name used for Kerberos with IBM JDK and incorrect case for useKeytab,WFCORE-260,12557571,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,17/Nov/14 2:33 PM,08/Dec/14 9:08 AM,29/Nov/16 3:54 PM,20/Nov/14 5:38 AM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1161589,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/340,,,,,,0.0,9.0,,1|hzu4mf:,9223372036854775807,,,,,,,,,,,17/Nov/14 2:34 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from NEW to ASSIGNED,18/Nov/14 12:07 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from ASSIGNED to POST,19/Nov/14 5:38 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from MODIFIED to ON_QA,27/Nov/14 8:43 AM;jira-bugzilla-migration;Ondrej Lukas <olukas@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from ON_QA to ASSIGNED,27/Nov/14 10:48 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from ASSIGNED to POST,28/Nov/14 4:58 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from POST to MODIFIED,02/Dec/14 3:56 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from MODIFIED to ON_QA,08/Dec/14 9:08 AM;jira-bugzilla-migration;Ondrej Lukas <olukas@redhat.com> changed the Status of [bug 1161589|https://bugzilla.redhat.com/show_bug.cgi?id=1161589] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,
Boot time only system properties should not modify the runtime only the model,WFCORE-255,12544718,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,24/Jun/14 2:44 PM,14/Nov/14 6:00 PM,29/Nov/16 3:54 PM,,,,,,,,,,Domain Management,,,,,0,,,,,,"The three properties {{jboss.server.base.dir}}, {{jboss.server.config.dir}} and {{jboss.server.log.dir}} are allowed to be overridden for servers. They cannot be set as a system-property resource, but can be overridden via {{JAVA_OPTS}} or the command line. For a domain server these values need to be allowed to be set as a {{boot-time=true}} system property.

The {{add}}, {{write-attribute}} and {{remove}} operations should not modify the runtime, but should modify the model. It's debatable whether the server should be put in a {{restart-required}} state. Currently similar resources do _not_ set the server state to {{restart-required}}. For now we should stick with the same state.

{code}
[domain@localhost:9999 /] /host=master/system-property=jboss.server.log.dir:add(boot-time=true,value=""/var/log"")
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => ""JBAS010839: Operation failed or was rolled back on all servers."",
    ""rolled-back"" => true,
    ""server-groups"" => {""main-server-group"" => {""host"" => {""master"" => {
        ""server-one"" => {""response"" => {
            ""outcome"" => ""failed"",
            ""failure-description"" => ""JBAS015845: System property jboss.server.log.dir cannot be set via the xml configuration file or from a management client; it's value must be known at initial process start so it can only set from the commmand line"",
   
         ""rolled-back"" => true
        }},
        ""server-two"" => {""response"" => {
            ""outcome"" => ""failed"",
            ""failure-description"" => ""JBAS015845: System property jboss.server.log.dir cannot be set via the xml configuration file or from a management client; it's value must be known at initial process start so it can only set from the commmand line"",
            ""rolled-back"" => true
        }}
    }}}}
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzs2nr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
logging-profiles doesn't work with Apache Common Logging,WFCORE-254,12554514,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jamezp,welle,welle,08/Oct/14 6:15 AM,24/Nov/16 10:47 AM,29/Nov/16 3:54 PM,15/Sep/16 9:47 PM,,,,,,,3.0.0.Alpha8,,Logging,,,,,0,,,,,,The logging for one logging-profile ends up in another logging-profile from time to time. It's not sporadic as all logging will end up in the wrong place when things go wrong.,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Oct/14 6:16 AM;welle;87905.tar;https://issues.jboss.org/secure/attachment/12385643/87905.tar,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1164063,https://bugzilla.redhat.com/show_bug.cgi?id=1374457,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1799,https://github.com/wildfly/wildfly/pull/9188,,,,,1.0,4.0,,1|hztmh3:,9223372036854775807,,,,See the attached testcase.,,,,,Workaround Exists,"Update the module ""org.apache.commons.logging"" (which is an alias to ""org.slf4j.jcl-over-slf4j"") to include and use ""commons-logging-1.2.jar"" instead.",25/Nov/14 3:02 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1164063|https://bugzilla.redhat.com/show_bug.cgi?id=1164063] from NEW to CLOSED,"17/Dec/14 5:28 PM;jamezp;The issue is again with jcl-over-slf4j. At this point we might need to fork it.

jcl-over-slf4j uses a static instance and a map to find the logger. Because of this a logger with the same name will return the first logger created no matter which log context it was created on.

For a workaround you should be able exclude org.apache.commons.logging with a jboss-deployment-structure.xml and include a jcl-over-slfj4 library in each WAR deployment.

Note this issue will only appear if loggers with the same name are desired on deployments that use a new log context. For example per-deployment logging that uses commons-logging or logging-profiles that use commons-logging.","17/Dec/14 6:34 PM;dmlloyd;Yeah we definitely will have to discontinue usage of that project.  Rather than fork it though, we might as well just create a direct jcl-jboss-logmanager bridge instead and cut out the middleman.  It can use similar caching strategies to the slf4j-jboss-logmanager project.",10/Sep/16 12:36 AM;jamezp;I've got a local implementation of this with just implementing the {{org.apache.commons.logging.Log}} and {{org.apache.commons.logging.LogFactory}}. I need to test it with WildFly and decide the level the project should be compiled to. Currently WildFly uses jboss-logmanager 2.0.4.Final which targets Java 7. If this project will be required for JBoss EAP 6 then it will need to work with Java 6 as well.,,,,,,,,,,,,,,,,,,,,,,,
Remoting subsystem sasl-protocol and server-name should support expressions,WFCORE-253,12557470,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,14/Nov/14 2:37 PM,20/Nov/14 5:37 AM,29/Nov/16 3:54 PM,20/Nov/14 5:37 AM,,,,,,,1.0.0.Alpha14,,Remoting,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/332,https://github.com/wildfly/wildfly-core/pull/344,,,,,0.0,1.0,,1|hzu46n:,9223372036854775807,,,,,,,,,,,19/Nov/14 8:17 AM;dlofthouse;An additional change is needed to the validators.,,,,,,,,,,,,,,,,,,,,,,,,,,
add-user for user admin / password admin says password must not match username but should say should,WFCORE-248,12538806,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,22/Apr/14 2:44 PM,17/Nov/14 5:33 AM,29/Nov/16 3:54 PM,17/Nov/14 5:33 AM,,,,,,,1.0.0.Alpha13,,Domain Management,Scripts,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/328,,,,,,0.0,0.0,,1|hznf6v:,196889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add-user.bat failing when JBOSS_HOME does not match current folder,WFCORE-247,12557012,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,dlofthouse,juergen.zimmermann,juergen.zimmermann,10/Nov/14 6:04 AM,14/Nov/14 9:43 AM,29/Nov/16 3:54 PM,14/Nov/14 9:43 AM,,,,,,,1.0.0.Alpha13,,Domain Management,Scripts,,,,0,,,,,,"When I invoke ""add-user.bat <args>"", then I'm getting this Windows error message (in German):
{code}
""that"" kann syntaktisch an dieser Stelle nicht verarbeitet werden.
{code}

The solution is to remove the brackets in line 34, i.e. before:
{code}
echo   WARNING: The JBOSS_HOME (""%SANITIZED_JBOSS_HOME%"") that this script uses points to a different installation than the one that this script resides in (""%RESOLVED_JBOSS_HOME%""). Unpredictable results may occur.
{code}

After:
{code}
echo   WARNING: The JBOSS_HOME ""%SANITIZED_JBOSS_HOME%"" that this script uses points to a different installation than the one that this script resides in ""%RESOLVED_JBOSS_HOME%"". Unpredictable results may occur.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://developer.jboss.org/message/909659,,,https://github.com/wildfly/wildfly-core/pull/324,,,,,,0.0,0.0,,1|hzu1g7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Not started servers need a placeholder resource when added,WFCORE-243,12557145,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,11/Nov/14 10:59 AM,12/Nov/14 1:21 PM,29/Nov/16 3:54 PM,12/Nov/14 1:21 PM,1.0.0.Alpha12,,,,,,1.0.0.Alpha13,,Domain Management,,,,,0,,,,,,"In ServerAddHandler where the server resource is created, a placeholder should be added. I.e. instead of context.createResource(...) below

        context.addStep(runningServerAdd, new OperationStepHandler() {
            @Override
            public void execute(final OperationContext context, final ModelNode operation) throws OperationFailedException {
                context.createResource(PathAddress.EMPTY_ADDRESS);
                context.stepCompleted();
            }
        }, OperationContext.Stage.MODEL, true);

context.addResource(PathAddress.EMPTY_ADDRESS, PlaceholderResource.INSTANCE) should be used instead. Otherwise, servers that are not started at boot will be missing runtime proxies and will be considered as parts of the persistent model.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/318,,,,,,0.0,0.0,,1|hzu293:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
the deployment content is deleted if first undeploy and then deploy the same application using CLI batch,WFCORE-242,12557097,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,jaysensharma,jaysensharma,11/Nov/14 12:10 AM,19/Jan/15 6:56 AM,29/Nov/16 3:54 PM,05/Dec/14 11:52 AM,,,,,,,1.0.0.Alpha14,,CLI,Domain Management,,,,0,,,,,,"- If deploy and undeploy CLI commands executed in a batch mode then it causes missing  deployment inside the ""data/content"" directory which leads to the following error:

{code}
[Host Controller] 10:33:42,387 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""example.war"")]) - failure description: ""WFLYDC0058: No deployment content with hash d85f1e3106bc8a49838a0dccae9e80819c25e02c is available in the deployment content repository for deployment 'example.war'. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuraiton file and restart.""
[Host Controller] 10:33:42,390 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1162444,https://bugzilla.redhat.com/show_bug.cgi?id=1163173,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/339,,,,,,0.0,19.0,,1|hzu1yn:,9223372036854775807,,,,"- 1. Take a fresh WildFly 9 and start the domain mode.
- 2. Deploy any simple application to it as following:
{code}
deploy /PATH/TO/example.war --name=example.war --server-groups=main-server-group
{code}

- 3. Check the application is working and accessible and the contetns are present inside the ""domain/servers/server-one/data/content"" and ""domain/servers/server-two/data/content""

- 4. Now run the following command sequence in batch mode using CLI.
{code}
batch
undeploy example.war --server-groups=main-server-group
deploy /PATH/TO/example.war --name=example.war --server-groups=main-server-group
run-batch
{code}

- 5.  Check the domain.xml file that it has the deployment entry properly inside it. However the Content of this WAR is missing from the server's content directory which  ""domain/servers/server-one/data/content"" and ""domain/servers/server-two/data/content"",  So when attempt to restart the domain next time it leads to the following error:

{code}
[Host Controller] 10:33:42,387 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""example.war"")]) - failure description: ""WFLYDC0058: No deployment content with hash d85f1e3106bc8a49838a0dccae9e80819c25e02c is available in the deployment content repository for deployment 'example.war'. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuraiton file and restart.""
[Host Controller] 10:33:42,390 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{code}",,,,,,- Do not run the deploy and undeploy CLI commands together inside the same CLI batch run.,"11/Nov/14 9:19 AM;brian.stansberry;Adding --force to the ""deploy"" command will allow you to skip the ""undeploy"" command.","11/Nov/14 9:22 AM;brian.stansberry;Emmanuel, I'm assigning this to you as it's so related to the content repo gc issues you've tackled.

It's possible this is a CLI issue though. The ""undeploy"" and ""deploy"" commands are high level commands, not low level ops. So it's possible the actual low level commands that the CLI sends out are happening in a different order than you'd expect from looking at the batch in the description. I suggest you test that first by tracking what ops the server receives.",13/Nov/14 2:40 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1163173|https://bugzilla.redhat.com/show_bug.cgi?id=1163173] from NEW to ASSIGNED,"14/Nov/14 12:55 PM;ehugonnet;[Host Controller] 18:53:49,120 INFO  [org.jboss.as.deployment] (management-handler-thread - 2) ServerGroupDeploymentUndeployHandler is undeploying something {
[Host Controller]     ""operation"" => ""undeploy"",
[Host Controller]     ""address"" => [
[Host Controller]         (""server-group"" => ""main-server-group""),
[Host Controller]         (""deployment"" => ""wildfly-ejb-in-war.war"")
[Host Controller]     ],
[Host Controller]     ""operation-headers"" => {
[Host Controller]         ""caller-type"" => ""user"",
[Host Controller]         ""access-mechanism"" => ""NATIVE"",
[Host Controller]         ""domain-uuid"" => ""79e6a653-cf73-4d4f-a9b7-df0a83795da3""
[Host Controller]     }
[Host Controller] } 
[Host Controller] 18:53:49,125 INFO  [org.jboss.as.deployment] (management-handler-thread - 2) ServerGroupDeploymentRemoveHandler is removing something {
[Host Controller]     ""operation"" => ""remove"",
[Host Controller]     ""address"" => [
[Host Controller]         (""server-group"" => ""main-server-group""),
[Host Controller]         (""deployment"" => ""wildfly-ejb-in-war.war"")
[Host Controller]     ],
[Host Controller]     ""operation-headers"" => {
[Host Controller]         ""caller-type"" => ""user"",
[Host Controller]         ""access-mechanism"" => ""NATIVE"",
[Host Controller]         ""domain-uuid"" => ""79e6a653-cf73-4d4f-a9b7-df0a83795da3""
[Host Controller]     }
[Host Controller] } 
[Host Controller] 18:53:49,136 INFO  [org.jboss.as.deployment] (management-handler-thread - 2) ServerGroupDeploymentAddHandler is adding something {
[Host Controller]     ""operation"" => ""add"",
[Host Controller]     ""address"" => [
[Host Controller]         (""server-group"" => ""main-server-group""),
[Host Controller]         (""deployment"" => ""wildfly-ejb-in-war.war"")
[Host Controller]     ],
[Host Controller]     ""operation-headers"" => {
[Host Controller]         ""caller-type"" => ""user"",
[Host Controller]         ""access-mechanism"" => ""NATIVE"",
[Host Controller]         ""domain-uuid"" => ""79e6a653-cf73-4d4f-a9b7-df0a83795da3""
[Host Controller]     }
[Host Controller] } 
[Host Controller] 18:53:49,143 INFO  [org.jboss.as.deployment] (management-handler-thread - 2) ServerGroupDeploymentDeployHandler is enabling something {
[Host Controller]     ""operation"" => ""deploy"",
[Host Controller]     ""address"" => [
[Host Controller]         (""server-group"" => ""main-server-group""),
[Host Controller]         (""deployment"" => ""wildfly-ejb-in-war.war"")
[Host Controller]     ],
[Host Controller]     ""operation-headers"" => {
[Host Controller]         ""caller-type"" => ""user"",
[Host Controller]         ""access-mechanism"" => ""NATIVE"",
[Host Controller]         ""domain-uuid"" => ""79e6a653-cf73-4d4f-a9b7-df0a83795da3""
[Host Controller]     }
[Host Controller] } 
[Server:server-one] 18:53:49,252 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 20) DeploymentUndeployHandler is undeploying something {
[Server:server-one]     ""operation"" => ""undeploy"",
[Server:server-one]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-one]     ""operation-headers"" => {}
[Server:server-one] } 
[Server:server-two] 18:53:49,263 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 12) DeploymentUndeployHandler is undeploying something {
[Server:server-two]     ""operation"" => ""undeploy"",
[Server:server-two]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-two]     ""operation-headers"" => {}
[Server:server-two] } 
[Server:server-one] 18:53:49,267 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 20) DeploymentAddHandler is adding something {
[Server:server-one]     ""operation"" => ""add"",
[Server:server-one]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-one]     ""operation-headers"" => {},
[Server:server-one]     ""runtime-name"" => ""wildfly-ejb-in-war.war"",
[Server:server-one]     ""content"" => [{""hash"" => bytes {
[Server:server-one]         0x5e, 0x4b, 0x77, 0x2f, 0xb7, 0xc3, 0x95, 0xc3,
[Server:server-one]         0xc3, 0x00, 0xda, 0xd6, 0xe9, 0x3e, 0x3d, 0x8c,
[Server:server-one]         0x7e, 0xcd, 0xea, 0x20
[Server:server-one]     }}]
[Server:server-one] } 
[Server:server-one] 18:53:49,270 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 20) DeploymentDeployHandler is enabling something {
[Server:server-one]     ""operation"" => ""deploy"",
[Server:server-one]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-one]     ""operation-headers"" => {}
[Server:server-one] } 
[Server:server-one] 18:53:49,280 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 20) DeploymentRemoveHandler is removing something {
[Server:server-one]     ""operation"" => ""remove"",
[Server:server-one]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-one]     ""operation-headers"" => {}
[Server:server-one] } 
[Server:server-two] 18:53:49,284 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 12) DeploymentAddHandler is adding something {
[Server:server-two]     ""operation"" => ""add"",
[Server:server-two]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-two]     ""operation-headers"" => {},
[Server:server-two]     ""runtime-name"" => ""wildfly-ejb-in-war.war"",
[Server:server-two]     ""content"" => [{""hash"" => bytes {
[Server:server-two]         0x5e, 0x4b, 0x77, 0x2f, 0xb7, 0xc3, 0x95, 0xc3,
[Server:server-two]         0xc3, 0x00, 0xda, 0xd6, 0xe9, 0x3e, 0x3d, 0x8c,
[Server:server-two]         0x7e, 0xcd, 0xea, 0x20
[Server:server-two]     }}]
[Server:server-two] } 
[Server:server-two] 18:53:49,286 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 12) DeploymentDeployHandler is enabling something {
[Server:server-two]     ""operation"" => ""deploy"",
[Server:server-two]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-two]     ""operation-headers"" => {}
[Server:server-two] } 
[Server:server-one] 18:53:49,299 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0022: Unregistered web context: /wildfly-ejb-in-war
[Server:server-two] 18:53:49,303 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0022: Unregistered web context: /wildfly-ejb-in-war
[Server:server-two] 18:53:49,293 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 12) DeploymentRemoveHandler is removing something {
[Server:server-two]     ""operation"" => ""remove"",
[Server:server-two]     ""address"" => [(""deployment"" => ""wildfly-ejb-in-war.war"")],
[Server:server-two]     ""operation-headers"" => {}
[Server:server-two] } 
",14/Nov/14 12:58 PM;ehugonnet;So it looks like the commands on the servers are not runned in the expected order.,"14/Nov/14 2:27 PM;brian.stansberry;The way this works is after the HC executes the normal operation steps (you've logged some of that), a step that executes ServerOperationsResolverHandler is executed. It calls ServerOperationResolver, whose job is to translate the HC-level ops into a set of ops to invoke on the servers.* So the first place to look is there, to confirm it is producing the correct sequence of operations to execute on the servers. HostControllerExecutionSupport.Factory and HostControllerExecutionSupport.MultiStepOpExecutionSupport are good places to look, as they deal with composites.

* ServerOperationsResolverHandler adds the op ModelNodes as data on the response, making it available to whatever HC is controlling rollout of the overall op across the domain. In this case that would be the master HC. The controlling HC then tells the servers to execute. It's possible the problem is there, but it's better to start with ServerOperationsResolverHandler.",17/Nov/14 11:15 AM;ehugonnet;The content is removed in a ResultHandler thus the effective removal is done after adding the deployment resource.,"17/Nov/14 12:15 PM;ehugonnet;This has nothing to do with the CLI nor the ordering of operations on the server side, so I'm decreasing the priority.
This behaviour is incorrect but there is a simple workaround using --force in the deploy command to avoid it.

With the fix, you'll need to start the deployment after the batch :
{code}
batch
undeploy example.war --server-groups=main-server-group
deploy /PATH/TO/example.war --name=example.war --server-groups=main-server-group
/server-group=main-server-group/deployment=example.war:redeploy
run-batch
{code}
",25/Nov/14 8:05 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from NEW to ASSIGNED,25/Nov/14 9:17 AM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from ASSIGNED to POST,26/Nov/14 5:45 AM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from POST to ASSIGNED,26/Nov/14 6:22 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from ASSIGNED to POST,26/Nov/14 12:43 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from POST to MODIFIED,02/Dec/14 3:56 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from MODIFIED to ON_QA,03/Dec/14 3:52 AM;jira-bugzilla-migration;Tomas Hofman <thofman@redhat.com> changed the Status of [bug 1163173|https://bugzilla.redhat.com/show_bug.cgi?id=1163173] from ASSIGNED to POST,05/Dec/14 9:29 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1162444|https://bugzilla.redhat.com/show_bug.cgi?id=1162444] from ON_QA to VERIFIED,07/Jan/15 3:13 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1163173|https://bugzilla.redhat.com/show_bug.cgi?id=1163173] from POST to MODIFIED,16/Jan/15 6:25 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1163173|https://bugzilla.redhat.com/show_bug.cgi?id=1163173] from MODIFIED to ON_QA,19/Jan/15 6:56 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1163173|https://bugzilla.redhat.com/show_bug.cgi?id=1163173] from ON_QA to VERIFIED,,,,,,,,
"HTTP Management interface, enabled true in schema, false in model definition.",WFCORE-241,12557134,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,11/Nov/14 9:04 AM,17/Nov/14 5:31 AM,29/Nov/16 3:54 PM,17/Nov/14 5:31 AM,,,,,,,1.0.0.Alpha13,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/323,,,,,,0.0,0.0,,1|hzu26n:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Socket binding remove does not respect allow-resource-service-restart,WFCORE-239,12557083,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,10/Nov/14 3:29 PM,02/Dec/14 4:12 PM,29/Nov/16 3:54 PM,02/Dec/14 4:12 PM,,,,,,,1.0.0.Alpha13,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/314,,,,,,0.0,0.0,,1|hzu1vr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up Remoting Subsystem attribute definitions.,WFCORE-238,12557069,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,10/Nov/14 12:11 PM,11/Nov/14 6:24 AM,29/Nov/16 3:54 PM,11/Nov/14 6:24 AM,,,,,,,1.0.0.Alpha13,,Remoting,,,,,0,,,,,,,,,,,,,,,,,,,,,,WFLY-4068,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/313,,,,,,0.0,0.0,,1|hzu1sf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent synchronization in ConfigurationFile,WFCORE-235,12556988,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,,brian.stansberry,brian.stansberry,09/Nov/14 11:23 AM,09/Nov/14 11:23 AM,29/Nov/16 3:54 PM,09/Nov/14 11:23 AM,1.0.0.Alpha11,,,,,,,,Domain Management,,,,,0,,,,,,"ConfigurationFile synchronizes on itself in some places and not in others. This may cause problems, particularly with the history dir.

The one that comes to mind is successfulBoot is synchronized, but all the methods called by ConfigurationFilePersistenceResource are not. The latter is called with the controller lock held, but the former is not. So there's a possibility of two threads interacting with the files concurrently if an operation executes immediately after boot.

The deployment scanner schedules such an op, so it's possible. Currently the schedule is for 200 ms after deployment-scanner add runs during boot.
",,,,,,,,,,,,,,,,,,,,WFCORE-234,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzu1av:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent synchronization in ConfigurationFile,WFCORE-234,12556987,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,09/Nov/14 11:10 AM,16/Sep/16 8:15 PM,29/Nov/16 3:54 PM,,1.0.0.Alpha11,,,,,,,,Domain Management,,,,,0,,,,,,"ConfigurationFile synchronizes on itself in some places and not in others. This may cause problems, particularly with the history dir.

The one that comes to mind is successfulBoot is synchronized, but all the methods called by ConfigurationFilePersistenceResource are not. The latter is called with the controller lock held, but the former is not. So there's a possibility of two threads interacting with the files concurrently if an operation executes immediately after boot.

The deployment scanner schedules such an op, so it's possible. Currently the schedule is for 200 ms after deployment-scanner add runs during boot.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzu1an:,9223372036854775807,,,,,,,,,,,03/May/15 6:46 PM;esantana;This should not be closed as his duplicate is? (WFCORE-235),"04/May/15 9:35 AM;brian.stansberry;I accidentally opened the same issue twice, so I closed one. The issue itself isn't resolved.","01/Sep/16 1:42 PM;brian.stansberry;I'm unscheduling this to try and get the 3.0 task list down to bugs, EAP 7.1 features or stuff we know is coming. Let me know if it's likely to happen for 3.0 CR1.",,,,,,,,,,,,,,,,,,,,,,,,
Subsystem ordering is lost during marshalling,WFCORE-233,12556985,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,brian.stansberry,brian.stansberry,brian.stansberry,09/Nov/14 8:46 AM,09/Nov/14 3:11 PM,29/Nov/16 3:54 PM,09/Nov/14 3:11 PM,1.0.0.Alpha11,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"When standalone.xml gets persisted following some post-boot change, the original ordering of subsystems is lost. We don't want to change config files in this way.

I don't recall how we retained the original subsystem ordering with parallel boot, but something there has broken.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/308,,,,,,0.0,1.0,,1|hzu1a7:,9223372036854775807,,,,,,,,,,,"09/Nov/14 9:03 AM;brian.stansberry;AS7-2561 is the original issue for getting this correct. This was the solution:

https://github.com/wildfly/wildfly/pull/610/files

That code is still there.",,,,,,,,,,,,,,,,,,,,,,,,,,
Unclean shutdown of deployment scanner,WFCORE-232,12556976,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,07/Nov/14 4:27 PM,29/Feb/16 1:33 PM,29/Nov/16 3:54 PM,10/Apr/15 4:19 PM,1.0.0.Alpha11,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,"I happened to see this in a testsuite log file:

{code}
2014-11-07 02:59:41,808 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0012: Scan of /opt/buildAgent/work/8feb0abb503148fe/testsuite/manualmode/target/deployment-test-bc636b67-df54-462d-9a13-3618a1755d3f threw Exception: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@146a4b2 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@e6cbcd[Shutting down, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 3]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2048)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:821)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:325)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:530)
	at java.util.concurrent.ScheduledThreadPoolExecutor.execute(ScheduledThreadPoolExecutor.java:619)
	at org.jboss.as.controller.ModelControllerImpl$3.executeAsync(ModelControllerImpl.java:669)
	at org.jboss.as.controller.ModelControllerImpl$3.executeAsync(ModelControllerImpl.java:605)
	at org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.deploy(DefaultDeploymentOperations.java:61)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:449)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$UndeployScanRunnable.run(FileSystemDeploymentService.java:538)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

DeploymentScannerService is calling stopScanner() on the scanner and then is shutting down the executor. But stopScanner does not wait for in progress tasks to complete, nor do the in-progress tasks recognize that shutdown is occurring and handle any problems differently (e.g. don't toss the above in the log.)

Waiting for tasks to complete could be tricky, e.g. imagine this race:

1) Admin submits op to shutdown/reload, which has the controller lock and is now stopping services.
2) Scan job kicks off, finds changes and wants to modify the model, so the task is blocking waiting for the controller lock.

Deadlock.

Now, this may not be a problem, as server reload tells MSC to remove the root service on the way out (i.e. after the bit where it blocks for stability) and then MSC threads take over, allowing the op thread to continue and release the lock. The shutdown handler spawns a thread to call System.exit.

But ^^^ is just a quick look, so be cautious! ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/461,,,,,,0.0,2.0,,1|hzu187:,9223372036854775807,,,,,,,,,,,29/Feb/16 8:58 AM;ozizka;I'm working with EAP 7 Beta. Un/Deploying using wildfly maven plugin. EAP sometimes gets to a state when writes this exception repeatedly and can't deploy and run the app.,"29/Feb/16 1:33 PM;brian.stansberry;[~ozizka] If you see this with WildFly 10.0.0.Final or the latest EAP 7 ER, please file a new JRIA with details.",,,,,,,,,,,,,,,,,,,,,,,,,
Failure by ProcessController to launch a server vm is not logged,WFCORE-230,12556967,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,07/Nov/14 12:46 PM,01/May/15 11:02 AM,29/Nov/16 3:54 PM,01/May/15 11:02 AM,1.0.0.Alpha11,,,,,,1.0.0.CR1,,Domain Management,,,,,0,,,,,,"In a domain configuration, if a server is associated with an incorrectly configurated jvm java-home (e.g. domain.xml -> server-groups -> jvm), it will fail silently (no error shown in logs). For example:

```
<server-group name=""mySrvrGrp"" profile=""full"">
  <jvm name=""my-default"" java-home=""/usr/java/wrongPath"">
    <heap size=""1024m"" max-size=""4096m""/>
    <permgen size=""256m"" max-size=""256m""/>
    <stack size=""256k""/>
```
",,,,,,,,,,,,,,,,,,,,,PRODMGT-1008,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/657,,,,,,0.0,5.0,,1|hzu167:,9223372036854775807,,,,,,,,,,,"07/Nov/14 1:51 PM;brian.stansberry;DefaultJvmUtils is detecting this and throwing an exception on the HC, during execution of ManagedServer.ProcessAddTask. But ManagedServer.internalSetState is catching the exception and logging it at DEBUG.

Simplest fix would be to change that log level to ERROR, but I'll need to check with Emanuel re: the thinking behind using debug there and in other spots in ManagedServer.",25/Feb/15 3:36 AM;ehugonnet;Should we just log it at the server level or should some error message goes back to the HC so that it could log it?,"25/Feb/15 10:01 AM;brian.stansberry;The HC should log it. The server cannot, because the problem is that the start of the server process failed.","26/Feb/15 4:51 AM;ehugonnet;This seems to be the case since 2012 at least.
Found no evidence on why it shouldn't be this way","28/Apr/15 10:45 AM;brian.stansberry;[~ehugonnet] Will you be able to do anything on this in the next couple days? If not, please reschedule to 10.0.0.Alpha1.",,,,,,,,,,,,,,,,,,,,,,
"server-config operations ""leaks"" to server's resources",WFCORE-229,12556953,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,jmesnil,jmesnil,07/Nov/14 10:20 AM,16/Dec/14 10:37 AM,29/Nov/16 3:54 PM,16/Dec/14 10:37 AM,1.0.0.Alpha11,,,,,,1.0.0.Alpha15,,Domain Management,,,,,0,,,,,,"Start a regular domain

Any operations on server children with the same names that server-config operations (:start, :stop, :restart, :kill) are executed instead of being rejected because the actual resources at the operation address does not define them.

Examples:

{noformat}
[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:start
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.util.NoSuchElementException: No child 'undertow' exists"",
    ""rolled-back"" => true
}

=>

[Host Controller] 16:15:30,231 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 15) WFLYCTL0013: Operation (""restart"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""server"" => ""server-one""),
[Host Controller]     (""subsystem"" => ""undertow"")
[Host Controller] ]) - failure description: ""WFLYHC0047: Cannot restart server undertow as it is not currently started; it is STOPPED""
[Host Controller] 16:18:43,764 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 18) WFLYCTL0013: Operation (""start"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""server"" => ""server-one""),
[Host Controller]     (""subsystem"" => ""undertow"")
[Host Controller] ]): java.util.NoSuchElementException: No child 'undertow' exists
[Host Controller]       at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:369)
[Host Controller]       at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:299)
[Host Controller]       at org.jboss.dmr.ModelNode.require(ModelNode.java:870)
[Host Controller]       at org.jboss.as.host.controller.ManagedServerBootCmdFactory.<init>(ManagedServerBootCmdFactory.java:93)
[Host Controller]       at org.jboss.as.host.controller.ServerInventoryImpl.createBootFactory(ServerInventoryImpl.java:629)
[Host Controller]       at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:200)
[Host Controller]       at org.jboss.as.host.controller.operations.ServerStartHandler$1.execute(ServerStartHandler.java:110)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:728)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:563)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)
[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)
[Host Controller]       at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1160)
[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:356)
[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:215)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:220)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:147)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:169)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:165)
[Host Controller]       at java.security.AccessController.doPrivileged(Native Method)
[Host Controller]       at javax.security.auth.Subject.doAs(Subject.java:422)
[Host Controller]       at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94)
[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:165)
[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)
[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)
[Host Controller]       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[Host Controller]       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[Host Controller]       at java.lang.Thread.run(Thread.java:745)
[Host Controller]       at org.jboss.threads.JBossThread.run(JBossThread.java:320)

[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:stop
{
    ""outcome"" => ""success"",
    ""result"" => ""STOPPED""
}

[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:kill
{""outcome"" => ""success""}
{noformat}

If the corresponding server-config resource is actually stopped, the operations fail because there is no resource at the operation's address.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/352,,,,,,0.0,1.0,,1|hzu13b:,9223372036854775807,,,,,,,,,,,"07/Nov/14 10:52 AM;brian.stansberry;I'm pretty sure this isn't server-config stuff leaking. It's most likely in the ProxyControllerRegistration for server=server-one, which gets the start/stop handler registered. It seems like that handler is being provided for any ""start"" op for that registration *or it's children*, rather than only being provided for that registration.

I'm not sure why though.",,,,,,,,,,,,,,,,,,,,,,,,,,
RejectedExecutionException when closing ModelControllerClient client,WFCORE-227,12556896,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,asoldano,asoldano,07/Nov/14 3:02 AM,25/Jun/15 11:23 AM,29/Nov/16 3:54 PM,23/Dec/14 3:16 PM,1.0.0.Alpha11,,,,,,1.0.0.Alpha15,,Domain Management,Remoting,,,,0,,,,,,"After wildfly-core 1.0.0.Alpha11 has been included in WFLY master, I'm seeing hundreds of the following exceptions in the logs when running the JBossWS-CXF testsuite:

{noformat}
Exception in thread ""Remoting ""management-client"" task-4"" java.util.concurrent.RejectedExecutionException: Task org.jboss.remoting3.remote.RemoteConnectionChannel$3@5651c0c2 rejected from org.xnio.XnioWorker$TaskPool@11462cd4[Shutting down, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 4]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2048)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:821)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1372)
	at org.xnio.XnioWorker.execute(XnioWorker.java:741)
	at org.jboss.remoting3.remote.RemoteConnectionChannel.receiveMessage(RemoteConnectionChannel.java:363)
	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:107)
	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:451)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
{noformat}

The exception is logged just after the org.jboss.as.webservices.deployer.RemoteDeployer calls the RemotingModelControllerClient#close method.
The issue seems to be related to some kind of race condition, as trying to reproduce it with an attached debugger is not possible.",,,,,,,,,,,,,,,,,,,,,,,,,REM3-205,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1193926,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/321,,,,,,0.0,6.0,,1|hzu0qv:,9223372036854775807,,,,,,,,,,,07/Nov/14 3:10 AM;asoldano;http://jbossws-qa.jboss.org:8180/hudson/job/CXF-CORE-AS-9.0.0/191/console,"12/Nov/14 12:38 PM;brian.stansberry;David, per chat discussion it looks like you are looking at this in terms of a remoting change. If there's anything we must do to mitigate this, let me know.

I find it a bit odd that RemotingModelControllerClient.close() is calling channelAssociation.shutdownNow *after* closing the channel and endpoint, and if were done first perhaps the result could be that ManagementChannelReceiver stops registering itself after each message. But there's probably still a race there anyway and I don't want to start mucking with this stuff unless I need to.",09/Mar/15 12:08 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1193926|https://bugzilla.redhat.com/show_bug.cgi?id=1193926] from NEW to POST,21/May/15 5:15 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1193926|https://bugzilla.redhat.com/show_bug.cgi?id=1193926] from POST to MODIFIED,18/Jun/15 11:38 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1193926|https://bugzilla.redhat.com/show_bug.cgi?id=1193926] from MODIFIED to ON_QA,25/Jun/15 11:23 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1193926|https://bugzilla.redhat.com/show_bug.cgi?id=1193926] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
DeploymentStatusHandler reads the model incorrectly,WFCORE-226,12556884,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,06/Nov/14 8:43 PM,09/Nov/14 6:30 PM,29/Nov/16 3:54 PM,09/Nov/14 6:30 PM,1.0.0.Alpha11,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"DeploymentStatusHandler is calling Resource.Tools.readModel() to get the mode instead of the simple Resource.getModel().

This fails because the resource is runtime-only and Resource.Tools.readModel() ignore runtime-only.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/293,,,,,,0.0,0.0,,1|hzu0o7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Scanner deployments are getting persisted to standalone.xml,WFCORE-221,12556768,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,05/Nov/14 10:03 PM,09/Nov/14 6:32 PM,29/Nov/16 3:54 PM,09/Nov/14 6:32 PM,1.0.0.Alpha11,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,Shouldn't happen.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/293,,,,,,0.0,0.0,,1|hztzyn:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cli system props specified with -Dxxx for jboss-cli.sh/bat are ignored,WFCORE-220,12542774,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,aloubyansky,aloubyansky,04/Jun/14 10:08 AM,13/Nov/14 8:36 AM,29/Nov/16 3:54 PM,09/Nov/14 6:30 PM,,,,,,,1.0.0.Alpha12,,CLI,Scripts,,,,0,,,,,,"E.g. ./jboss-cli.sh -Djboss.cli.config=<PATH>/jboss-cli.xml

The system property won't be set, instead the argument will treated as simply a command line argument.
This has to be fixed in the scripts themselves launching the CLI.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1103620,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/249,https://github.com/wildfly/wildfly-core/pull/292,,,,,0.0,15.0,,1|hzo2fb:,200693,,,,,,,,,,,"04/Jun/14 11:02 AM;aloubyansky;Tomaz, this is my commit for jboss-cli.sh https://github.com/aloubyansky/wildfly/commit/8a2efa677b78f6ed96fc21f3aa02e565cb513bb3",16/Oct/14 8:43 AM;gonthim;Couldn't find [~aloubyansky]'s original commit in wildfly-core. Moved that solution in and created a .bat solution.,20/Oct/14 12:30 AM;jira-bugzilla-migration;Joe Wertz <ewertz@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from NEW to ASSIGNED,20/Oct/14 1:57 AM;jira-bugzilla-migration;Joe Wertz <ewertz@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ASSIGNED to POST,20/Oct/14 8:38 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from POST to MODIFIED,20/Oct/14 5:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from MODIFIED to ON_QA,21/Oct/14 7:12 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ON_QA to ASSIGNED,24/Oct/14 5:13 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ASSIGNED to MODIFIED,27/Oct/14 4:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from MODIFIED to ON_QA,29/Oct/14 5:50 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ON_QA to ASSIGNED,05/Nov/14 7:29 PM;jamezp;Pull request was merged along with https://github.com/wildfly/wildfly-core/pull/260. I'm sending a PR to revert these commits as it will be easier to handle setting the system properties from the CLI entry point.,05/Nov/14 8:31 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ASSIGNED to POST,07/Nov/14 8:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from POST to MODIFIED,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from MODIFIED to ON_QA,13/Nov/14 8:36 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1103620|https://bugzilla.redhat.com/show_bug.cgi?id=1103620] from ON_QA to VERIFIED,,,,,,,,,,,,
wildfly web management console hangs during deploy from cli,WFCORE-218,12556656,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,iankent,iankent,04/Nov/14 1:53 PM,28/Nov/16 3:52 PM,29/Nov/16 3:54 PM,,1.0.0.Alpha1,,,,,,,,Domain Management,,,,,0,,,,,,"We are running wildfly in domain mode with the following configuration.

host A running domain controlller
host B running host controller with one app sever
host C running host controller with one app server
host D running host controller with one app server

When we deloy war using jboss-cli the web console is blocked for usage until deploy completes. I have run jvisualvm and it does not appear that domain controller process is starved for resources (cpu, memory, threads).",,,,,,,,,,,,,,,,,,,,,WFCORE-586,,,,,,11/Nov/14 3:03 PM;iankent;threaddump-1415735255304.tdump;https://issues.jboss.org/secure/attachment/12386299/threaddump-1415735255304.tdump,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,5.0,,1|hztzdb:,9223372036854775807,,,,,,,,,,,"05/Nov/14 4:23 PM;brian.stansberry;Please provide version information, and also thread dumps from each of the hosts (all processes on each host; e.g. from  killall -3 java).","11/Nov/14 2:52 PM;iankent;I am using WildFly 8.1.0.Final.

When I am deploying a war via jboss-cli the wildfly management console is not available. I just get a spinning icon.
I used jvisual vm to connect to jmx of domain controller java process.
service:jmx:http-remoting-jmx://[host]:9990

I did a thread dump using jvisualvm and it is attached.","14/Nov/14 10:59 AM;brian.stansberry;The thread dump shows 2 console request threads blocking waiting for the exclusive controller lock that is held by the thread executing the deployment op.

The console request threads are asking for the exclusive lock so they can execute a 2-phase domain wide operation. All such ops get the exclusive lock so they can prevent domain topology changes during execution.

There are two ways I want to improve this:

1) I believe when the console sends a composite operation, it is getting routed into the 2-phase domain wide operation path more often than is necessary. Improving this needs to be done carefully, but should be a relatively straightforward change and probably will have the biggest impact, as most of the CRUD screens in the console don't need to invoke ops that involve more than the domain controller.

2) Look into having a separate lock for the domain topology, and not using the exclusive controller lock to guard it. That requires care though, as now there will be two separate locks involved in operation execution. We need to be certain that all code paths always acquire them in the same order or we'll be vulnerable to deadlocks. I believe the correct order should be 1) topology lock 2) controller lock. There are relatively few points where a topology lock would be needed, and I believe they are all at the outer edge of operation execution. So it's much simpler to control those points and ensure they always get topology before doing anything that could need the controller lock.

This second step will be more important once the feature discussed at http://lists.jboss.org/pipermail/wildfly-dev/2014-October/003241.html comes in, as that will result in numerous read operations that truly need the domain topology lock.","14/Nov/14 11:12 AM;brian.stansberry;A third possibility is to not do 2) above but instead focus on discriminating 2-phase ops that are purely reads from those that may involve writes. Evaluate to what degree topology stability is important to different cases, and see if the need for acquiring a lock to ensure it can be dropped in important cases.

The biggest issue is if a 2-phase read is executing but one of the target processes leaves the domain, that needs to be handled in a reasonable fashion. This requirement already applies in the case of a target process crashing though.","28/Nov/16 2:54 PM;brian.stansberry;I briefly considered not holding any long lasting topology lock and simply getting the set of hosts under a short lived lock. But that is not reliable:

1) T1 is doing a domain-wide write, on DC OperationCoordinatorStepHandler gathers the registered servers and creates DomainSlaveHandler to do the HC rollout.
2) New HC starts, connects, gets exclusive lock, starts registration stuff.
3) T1 gets to the Stage.MODEL handler that detects a write, tries to get exclusive lock, blocks
4) New HC reg is completed, exclusive lock released
5) T1 gets lock, proceeds
6) T1 gets to DomainSlaveHandler, rolls out the change to the set of slaves provided in 1) above, which does not include New HC.
7) New HC misses the update.

The situation with servers I believe is simpler. There the set of host and server proxies is a ref to the complete, dynamically updated set. Which servers get called depends on the rollout plan. The rollout plan is created after Stage.MODEL, so the exclusive lock will be held when it is created. So any ""New Server"" joining in a race with the change will either a) block in registration acquiring the exclusive lock until after the change is complete or b) cause the change to block in Stage.MODEL until reg is complete, with New Server then being picked up by DomainRolloutStepHandler the same as if it had been registered before the change op even began.

The way the server case is handled by DomainRolloutStepHandler suggests a possible easy fix for the host case as well. DomainSlaveHandler should be constructed with a ref to the complete dynamically updated map of host proxies (the way DomainRolloutStepHandler is). It should also be given the set of host names to update, or null if the update is global. If the list of host names is not null, that means the op only targets particular hosts, with no possibility of that set being added to in the course of execution. So, if if the change is global, the write lock in a Stage.MODEL step will ensure that any new host is either registered before DomainSlaveHandler executes, or is blocking waiting for the change op to complete. If the change is not global, the registration of a new slave is irrelevant to DomainSlaveHandler; it just works with the set of hosts it knows about.


Reads still need some thought though. The current behavior of overly aggressively taking the exclusive lock prevents some possible scenarios, like a client periodically reading a bunch of metrics getting a failure because a host or server is removed by another op in the middle of the read. This could be a real scenario now that things like multi-process reads and the query op are supported.",,,,,,,,,,,,,,,,,,,,,,
Add ModelValidator to ensure resource model is correct,WFCORE-216,12556621,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,maeste,maeste,04/Nov/14 6:43 AM,08/Dec/14 5:46 AM,29/Nov/16 3:54 PM,07/Nov/14 9:01 AM,,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"Currently there is no validation of ""requires"" and ""alternatives"" that are specified in attribute metadata / AttributeDefinition
ModelValidator should be added as extra step handler that executes on end of MODEL phase to ensure resource model is correct.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1023064,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/298,,,,,,0.0,4.0,,1|hztz5z:,9223372036854775807,,,,,,,,,,,11/Nov/14 10:38 AM;jira-bugzilla-migration;Tomaz Cerar <tcerar@redhat.com> changed the Status of [bug 1023064|https://bugzilla.redhat.com/show_bug.cgi?id=1023064] from ASSIGNED to POST,29/Nov/14 2:15 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1023064|https://bugzilla.redhat.com/show_bug.cgi?id=1023064] from POST to MODIFIED,02/Dec/14 3:56 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1023064|https://bugzilla.redhat.com/show_bug.cgi?id=1023064] from MODIFIED to ON_QA,08/Dec/14 5:46 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1023064|https://bugzilla.redhat.com/show_bug.cgi?id=1023064] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Missing jboss-threads in jboss-cli-client.jar,WFCORE-214,12556594,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,03/Nov/14 3:50 PM,03/Nov/14 3:52 PM,29/Nov/16 3:54 PM,03/Nov/14 3:52 PM,,,,,,,,,Domain Management,,,,,0,,,,,,"The client jar jboss-cli-client.jar is missing the org.jboss.threads classes, even though those are a dep of ModelControllerClient.

Perhaps the CLI's call paths don't use those classes, but that's an accident waiting to happen, plus it prevents use of this jar as a general purpose management client, when otherwise it could be used that way.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hztz07:,9223372036854775807,,,,,,,,,,,03/Nov/14 3:52 PM;brian.stansberry;It's there. Never mind.,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean unreferenced items from the content repository,WFCORE-213,12488052,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,26/Mar/13 10:22 AM,25/Mar/15 2:37 PM,29/Nov/16 3:54 PM,21/Nov/14 2:51 AM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,1,,,,,,"The algorithm for removing unused deployments from the content repository is based on doing this as part of undeploy operation execution. This doesn't cover cases where the content is never explicitly undeployed. For example:

1) Scanner content that is updated when the server is offline; the old content will not have been ""undeployed"" during shutdown, and on startup the new content will be installed.

2) Similar issues with deployments generated from module resources (see ""A Mixed Approach on https://community.jboss.org/wiki/ExtendingAS7). When the server shuts down, there is no ""subsystem remove"" as part of shutdown, so the content added during start will not be removed.

Note that the content repository can include things other than deployments. Currently it also includes management-client-content (specifically rollout plans) and can potentially include anything. This is why it's a ""content repository"" and not a ""deployment repository."" The solution for this needs to deal with all cases.",,,,,,,,,,,,,,,,,,,,,,,,,WFCORE-211,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1124689,https://bugzilla.redhat.com/show_bug.cgi?id=1018026,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/284,,,,,,0.0,11.0,,1|hzgax3:,155557,,,,,,,,,,,"26/Mar/13 10:29 AM;brian.stansberry;A possible simple solution to this is to pass the value of the ""persistent"" attribute from the deployment resource into the repo and use it to track non-persistent deployments and remove them when the content repo service stops. This is a bit dodgy though. It doesn't cover cases where the service isn't stopped during shutdown; e.g. a hard kill or where -Xrs is passed to the JVM thus disabling shutdown hook execution. The latter seems to be used in init.d scripts. (The MSC service container is stopped via a shutdown hook; it is that which causes services to stop.). A background process that periodically cleans unreferenced content may work better.
",31/Jul/14 8:21 PM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1124689|https://bugzilla.redhat.com/show_bug.cgi?id=1124689] from NEW to CLOSED,07/Sep/14 11:32 PM;claudio4j;What about cleaning data/content/<hash> on startup ? Check the list of deployments in domain.xml/standalone.xml and remove those unlisted.,"08/Sep/14 10:56 AM;brian.stansberry;Yes, the solution will be something like that, although I don't want it as blocking part of boot (we highly value boot time) but rather a side task kicked off during boot.

Emmanuel Hugonnet is working on this; he's working on a related Bugzilla and I just saw now he wasn't assigned to this JIRA.

I just updated the title and description a bit to highlight the fact that this isn't just about deployments.",13/Nov/14 2:53 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1163634|https://bugzilla.redhat.com/show_bug.cgi?id=1163634] from NEW to ASSIGNED,19/Nov/14 2:15 AM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 1018026|https://bugzilla.redhat.com/show_bug.cgi?id=1018026] from NEW to POST,20/Nov/14 10:27 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1018026|https://bugzilla.redhat.com/show_bug.cgi?id=1018026] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1018026|https://bugzilla.redhat.com/show_bug.cgi?id=1018026] from MODIFIED to ON_QA,26/Nov/14 8:28 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1018026|https://bugzilla.redhat.com/show_bug.cgi?id=1018026] from ON_QA to ASSIGNED,26/Nov/14 9:33 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1018026|https://bugzilla.redhat.com/show_bug.cgi?id=1018026] from ASSIGNED to VERIFIED,15/Dec/14 9:48 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1163634|https://bugzilla.redhat.com/show_bug.cgi?id=1163634] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,
HC is over eager to remove its content,WFCORE-211,12556521,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,03/Nov/14 5:18 AM,21/Nov/14 2:50 AM,29/Nov/16 3:54 PM,21/Nov/14 2:50 AM,1.0.0.Alpha10,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"If you deploy the same war twice (same hash with different names) on a domain then undeploy one the content is removed from the HC while it is still referenced and potentially useable.
The content is not removed from the servers content directory.
To reproduce :
deploy /home/ehsavoie/dev/wildfly/quickstart/ejb-in-war/target/wildfly-ejb-in-war.war --runtime-name=first.war --server-groups=main-server-group --name=first.war
deploy /home/ehsavoie/dev/wildfly/quickstart/ejb-in-war/target/wildfly-ejb-in-war.war --runtime-name=second.war --server-groups=main-server-group --name=second.war
undeploy first.war --all-relevant-server-groups




",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/284,,,,,,0.0,0.0,,1|hztylj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IO error during deployment scanning triggers undeployment,WFCORE-210,12556503,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,jameslivingston,jameslivingston,03/Nov/14 12:07 AM,02/Dec/14 3:20 AM,29/Nov/16 3:54 PM,20/Nov/14 5:54 PM,1.0.0.Alpha10,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"If an IO error such as reaching the file descriptor limit occurs during deployment scanning, the scanner continues with an empty deployment list causing it to undeploy applications.

This occurs because FileSystemDeploymentService.scanDirectory() treats File.listFiles() returning null as an empty list rather than an error. http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29 notes that it returns an empty array if the directory is empty, and null if it is not a directory or an IO error occurs.

It should instead respond to a null return value by aborting the scanner run, with a log message, and not proceed to undeploy applications.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1159709,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/290,,,,,,0.0,5.0,,1|hztyhj:,9223372036854775807,,,,,,,,,,,03/Nov/14 9:06 AM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1159709|https://bugzilla.redhat.com/show_bug.cgi?id=1159709] from NEW to ASSIGNED,20/Nov/14 8:00 PM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1159709|https://bugzilla.redhat.com/show_bug.cgi?id=1159709] from ASSIGNED to POST,21/Nov/14 10:21 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1159709|https://bugzilla.redhat.com/show_bug.cgi?id=1159709] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1159709|https://bugzilla.redhat.com/show_bug.cgi?id=1159709] from MODIFIED to ON_QA,02/Dec/14 3:20 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1159709|https://bugzilla.redhat.com/show_bug.cgi?id=1159709] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
do not export api if excluded within jboss-deployment-structure.xml,WFCORE-209,12556433,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,,matlach,matlach,31/Oct/14 9:49 AM,09/May/16 5:36 AM,29/Nov/16 3:54 PM,04/May/16 4:18 AM,,,,,,,2.0.0.Final,,Server,,,,,3,,,,,,"I'm currently trying to upgrade JPA 2.0 to JPA 2.1 in JBoss EAP 6.3 by leveraging the jboss-deployment-structure.xml:
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<jboss-deployment-structure>
    <deployment>
        <exclude-subsystems>
            <subsystem name=""jpa"" />
            <subsystem name=""webservices"" />
            <subsystem name=""weld"" />
        </exclude-subsystems>
        <exclusions>
            <module name=""javax.persistence.api"" />
            <module name=""org.hibernate"" />
        </exclusions>
    </deployment>
</jboss-deployment-structure>
{code}

When trying to deploy my war (containing all hibernate 4.3.6 jars) I get the following error:
{quote}
Caused by: java.lang.NoSuchMethodError: javax.persistence.Table.indexes()[Ljavax/persistence/Index;
	at org.hibernate.cfg.annotations.EntityBinder.processComplementaryTableDefinitions(EntityBinder.java:936) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:824) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.cfg.Configuration$MetadataSourceQueue.processAnnotatedClassesQueue(Configuration.java:3788) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3742) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1410) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1844) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl$4.perform(EntityManagerFactoryBuilderImpl.java:850) [hibernate-entitymanager-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl$4.perform(EntityManagerFactoryBuilderImpl.java:843) [hibernate-entitymanager-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.withTccl(ClassLoaderServiceImpl.java:398) [hibernate-core-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:842) [hibernate-entitymanager-4.3.6.Final.jar:4.3.6.Final]
	at org.hibernate.jpa.HibernatePersistenceProvider.createContainerEntityManagerFactory(HibernatePersistenceProvider.java:152) [hibernate-entitymanager-4.3.6.Final.jar:4.3.6.Final]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:290) [spring-orm-3.2.11.RELEASE.jar:3.2.11.RELEASE]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310) [spring-orm-3.2.11.RELEASE.jar:3.2.11.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1573) [spring-beans-3.2.11.RELEASE.jar:3.2.11.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1511) [spring-beans-3.2.11.RELEASE.jar:3.2.11.RELEASE]
	... 23 more
{quote}

{{Index}} was introduced with JPA 2.1 and even though:
1. my application bundle the correct JPA jar
2. my application excluded the javax.persistence.api
3. my application excluded the jpa subsystem
I get a conflict.

The only way I made it possible to upgrade the JPA version was to explicitely state to not export the javax.persistence.api (see workaround). This way of doing thing though is not portable (as it impacts all other war deployed in the JBoss server) and is critical in our situation.

The issue might/is probably not be related to jboss-modules component but I was not able to find within the jboss sources the explicit line of code responsible of reading the jboss-deployment-structure.xml.

If you can point me out the correct component it will be a pleasure to help resolve the issue.",JBoss EAP 6.3 + Spring 3.2.11.RELEASE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,4.0,,1|hzty27:,9223372036854775807,,,,,,,,,Workaround Exists,"
*workaround 1*
update the javaee/api/main.module.xml as followed:
{code:xml}
<!--<module name=""javax.persistence.api"" export=""true""/>-->
<module name=""javax.persistence.api"" export=""false""/>
{code}

though this is non-portable.

*workaround 2*
update jboss-deployment-structure.xml as followed:

{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<jboss-deployment-structure>
    <deployment>
        <exclude-subsystems>
            <subsystem name=""jpa"" />
        </exclude-subsystems>
        <exclusions>
            <!-- WFCORE-209 workaround -->
            <module name=""javaee.api"" />
            <!-- --------------------- -->
            <module name=""javax.persistence.api"" />
            <module name=""org.hibernate"" />
        </exclusions>
        <dependencies>
            <!-- WFCORE-209 workaround -->
            <module name=""javax.activation.api"" export=""true""/>
            <module name=""javax.annotation.api"" export=""true""/>
            <module name=""javax.ejb.api"" export=""true""/>
            <module name=""javax.el.api"" export=""true""/>
            <module name=""javax.enterprise.api"" export=""true""/>
            <module name=""javax.enterprise.deploy.api"" export=""true""/>
            <module name=""javax.inject.api"" export=""true""/>
            <module name=""javax.interceptor.api"" export=""true""/>
            <module name=""javax.jms.api"" export=""true""/>
            <module name=""javax.jws.api"" export=""true""/>
            <module name=""javax.mail.api"" export=""true""/>
            <module name=""javax.management.j2ee.api"" export=""true""/>
            <!-- <module name=""javax.persistence.api"" export=""true""/> -->
            <module name=""javax.resource.api"" export=""true""/>
            <module name=""javax.rmi.api"" export=""true""/>
            <module name=""javax.security.auth.message.api"" export=""true""/>
            <module name=""javax.security.jacc.api"" export=""true""/>
            <module name=""javax.servlet.api"" export=""true""/>
            <module name=""javax.servlet.jsp.api"" export=""true""/>
            <module name=""javax.transaction.api"" export=""true""/>
            <module name=""javax.validation.api"" export=""true""/>
            <module name=""javax.ws.rs.api"" export=""true""  services=""export""/>
            <module name=""javax.xml.bind.api"" export=""true""/>
            <module name=""javax.xml.registry.api"" export=""true""/>
            <module name=""javax.xml.soap.api"" export=""true""/>
            <module name=""javax.xml.ws.api"" export=""true""/>
    
            <!-- This one always goes last. -->
            <module name=""javax.api"" export=""true""/>
            <!-- --------------------- -->
        </dependencies>
    </deployment>
</jboss-deployment-structure>
{code}

this is fully portable",25/Aug/15 10:38 AM;ctomc;This should be in fixed / changed in WildFly 9 as result of WFLY-3440 ,"04/May/16 4:14 AM;antoine.rey;I've got the same Issue with JBoss 6.4 EAP. 
The workarround 1 works fine but this is non-portable.
The workarround 2 works with WAR but not EAR. Do you have any idea?",04/May/16 4:18 AM;ctomc;Fixed in WildFly 9.,"09/May/16 5:36 AM;antoine.rey;To complete the workarround 2 with an EAR (works on JBoss 6.4 EAP) :
{code}
<jboss-deployment-structure xmlns=""urn:jboss:deployment-structure:1.2"">
    <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
    <deployment>
        <exclusions>
            <!-- Permet d'exclure javax.validation.api -->
            <module name=""javaee.api"" />
            <module name=""org.hibernate.validator""/>
        </exclusions>
        <exclude-subsystems>
            <subsystem name=""jaxrs"" />
            <subsystem name=""datasources"" />
            <subsystem name=""ejb3"" />
            <subsystem name=""infinispan"" />
            <subsystem name=""jca"" />
            <subsystem name=""logging"" />
            <subsystem name=""jdr"" />
            <subsystem name=""jpa"" />
            <subsystem name=""jsf"" />
            <subsystem name=""mail"" />
            <subsystem name=""threads"" />
            <subsystem name=""pojo"" />
            <subsystem name=""sar"" />
            <subsystem name=""transactions"" />
            <subsystem name=""webservices"" />
            <subsystem name=""weld"" />
        </exclude-subsystems>
        <dependencies>
            <module name=""javax.annotation.api"" />
            <module name=""javax.el.api"" />
            <module name=""javax.jms.api"" />
            <module name=""javax.jws.api"" />
            <module name=""javax.mail.api"" />
            <module name=""javax.resource.api"" />
            <module name=""javax.servlet.api"" />
            <module name=""javax.servlet.jsp.api"" />
            <module name=""javax.transaction.api"" />
            <module name=""javax.xml.bind.api"" />
            <module name=""javax.xml.registry.api"" />
            <module name=""javax.xml.soap.api"" />
            <module name=""javax.xml.ws.api"" />
        </dependencies>
    </deployment>
    <sub-deployment name=""your-webapp.war"">
        <local-last value=""true"" />
        <dependencies>
            <module name=""deployment.jpa2.1""/>
        </dependencies>
        <exclusions>
            <module name=""javaee.api"" />
        </exclusions>
    </sub-deployment>
    <module name=""deployment.jpa2.1"" >
        <module-alias name=""jpa2.1""/>
        <resources>
            <resource-root path=""hibernate-jpa-2.1-api-1.0.0.Final.jar"" />
        </resources>
    </module>
</jboss-deployment-structure>
{code}",,,,,,,,,,,,,,,,,,,,,,,
write- and undefine-attribute operations are registered as runtime-only,WFCORE-207,12556355,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,emuckenhuber,emuckenhuber,emuckenhuber,30/Oct/14 11:24 AM,05/Nov/14 4:13 PM,29/Nov/16 3:54 PM,05/Nov/14 4:13 PM,1.0.0.Alpha10,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"The write-attribute and undefine-attribute operation are registered as runtime-only, which is not correct and was probably done unintentionally.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/281,,,,,,0.0,0.0,,1|hztxhb:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Exporting a value for LAUNCH_JBOSS_IN_BACKGROUND doesn't exit the script,WFCORE-206,12556191,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,jamezp,jamezp,jamezp,28/Oct/14 11:43 AM,20/Oct/15 11:30 AM,29/Nov/16 3:54 PM,20/Oct/15 11:30 AM,,,,,,,,,Scripts,,,,,0,,,,,,"There should be the ability to launch a server in a new process by setting the {{LAUNCH_JBOSS_IN_BACKGROUND}} environment variable. At least in standalone a new process is launched, but the script waits to exit until the launched process exits.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hztwh3:,9223372036854775807,I'll close this one as a duplicate then and move the other to core.,,,,,,,,,,20/Oct/15 5:52 AM;ctomc;there is related issue this WFLY-5540,,,,,,,,,,,,,,,,,,,,,,,,,,
ManagedDMRContentTypeResource does not use a map with consistent ordering for storing content,WFCORE-205,12556144,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,27/Oct/14 7:01 PM,06/Nov/14 2:27 AM,29/Nov/16 3:54 PM,28/Oct/14 11:07 AM,1.0.0.Alpha10,,,,,,1.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"ManagedDMRContentTypeResource.content is used for generating an overall hash for the stored content, but it does not use consistent ordering (i.e. it needs to be a LinkedHashMap or perhaps a TreeMap.) The result is when another node in the domain receives an update it may calculate a different overall hash.

This is surfacing as failures in https://bugzilla.redhat.com/show_bug.cgi?id=1078062 when the master and slave are running on different JVM releases. Different VM releases often have different ordering behavior when iterating over the unordered collections.

I believe this is unlikely to result in real-world problems since any backup will persist its own version of the hash to its local copy of domain.xml, so there won't be any mismatch. The importance of the overall hash is that it allows the process to find the content in the repo when it is added.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1078062,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/273,,,,,,0.0,5.0,,1|hztw6v:,9223372036854775807,,,,,,,,,,,27/Oct/14 7:05 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1078062|https://bugzilla.redhat.com/show_bug.cgi?id=1078062] from NEW to ASSIGNED,27/Oct/14 9:27 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1078062|https://bugzilla.redhat.com/show_bug.cgi?id=1078062] from ASSIGNED to POST,28/Oct/14 10:41 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1078062|https://bugzilla.redhat.com/show_bug.cgi?id=1078062] from POST to MODIFIED,03/Nov/14 5:20 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1078062|https://bugzilla.redhat.com/show_bug.cgi?id=1078062] from MODIFIED to ON_QA,06/Nov/14 2:27 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1078062|https://bugzilla.redhat.com/show_bug.cgi?id=1078062] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
CLI instance hanging around after test suite run,WFCORE-203,12556056,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,aloubyansky,swd847,swd847,26/Oct/14 7:18 PM,20/Nov/14 7:30 AM,29/Nov/16 3:54 PM,,,,,,,,,,CLI,,,,,0,,,,,,"After a test suite run I see a CLI instance that has locked up. The issue is that remoting is not shutting down cleanly for some reason, which causes the shutdown hook thread to block. 

Even though the remoting threads are deamon threads, the shutdown thread is not, so it is actually the shutdown thread the is preventing the JVM from terminating. 


Relevant stack traces are:

{noformat}

""Remoting ""cli-client"" I/O-1"" daemon prio=5 tid=0x00007feefb966000 nid=0x5903 waiting on condition [0x0000000120d7d000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0x00000007acd20818> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.jboss.aesh.console.reader.ConsoleInputSession$1.read(ConsoleInputSession.java:39)
	at org.jboss.aesh.terminal.POSIXTerminal.read(POSIXTerminal.java:95)
	at org.jboss.aesh.console.Console.read(Console.java:397)
	at org.jboss.aesh.console.Console.read(Console.java:346)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:178)
	at org.jboss.as.cli.impl.CommandContextImpl.readLine(CommandContextImpl.java:750)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSSLFailure(CommandContextImpl.java:966)
	at org.jboss.as.cli.impl.CommandContextImpl.access$500(CommandContextImpl.java:170)
	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager$1.run(CommandContextImpl.java:1636)
	at org.jboss.as.protocol.GeneralTimeoutHandler.suspendAndExecute(GeneralTimeoutHandler.java:45)
	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager.checkServerTrusted(CommandContextImpl.java:1631)
	at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:827)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1328)
	at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:153)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:808)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:806)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1227)
	- locked <0x00000007ac085000> (a sun.security.ssl.SSLEngineImpl)
	at org.xnio.ssl.JsseSslConduitEngine.handleHandshake(JsseSslConduitEngine.java:542)
	- locked <0x00000007ac085000> (a sun.security.ssl.SSLEngineImpl)
	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:313)
	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:203)
	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:98)
	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:72)
	at org.xnio.conduits.ConduitStreamSinkChannel.write(ConduitStreamSinkChannel.java:150)
	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:297)
	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:284)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.conduits.WriteReadyHandler$ChannelListenerHandler.writeReady(WriteReadyHandler.java:65)
	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:93)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:539)

{noformat}

{noformat}
""Thread-2"" prio=5 tid=0x00007feefa0ca800 nid=0x440b in Object.wait() [0x0000000121177000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x00000007ac03d518> (a java.lang.Object)
	at java.lang.Object.wait(Object.java:503)
	at org.jboss.remoting3.spi.AbstractHandleableCloseable.close(AbstractHandleableCloseable.java:177)
	- locked <0x00000007ac03d518> (a java.lang.Object)
	at org.jboss.as.cli.impl.CLIModelControllerClient$1.shutdown(CLIModelControllerClient.java:98)
	at org.jboss.as.cli.impl.CliShutdownHook$1.run(CliShutdownHook.java:50)
	- locked <0x00000007abd8b4a8> (a java.util.ArrayList)
	at java.lang.Thread.run(Thread.java:744)
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hztvo7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deadlock when shutdown Wildfly server during CLI client connection,WFCORE-202,12555975,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,soul2zimate,soul2zimate,24/Oct/14 5:33 AM,25/Nov/14 10:36 AM,29/Nov/16 3:54 PM,17/Nov/14 7:38 AM,1.0.0.Alpha10,,,,,,1.0.0.Alpha13,,CLI,,,,,0,,,,,,"Creating upstream issue as the same deadlock can be found in WFLY.
Descirption as comment 5 in [BZ1142538|https://bugzilla.redhat.com/show_bug.cgi?id=1142538]

{noformat}
The following deadlock still exists.

Steps to Reproduce:
1. Prepare a running EAP instance with secured management port - optionally in VM
2. Execute export JAVA_OPTS=""-agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=y""
3. In the same terminal, execute ""bin/jboss-cli.sh --connect --controller=$EAP_IP --user=admin --password=password ':read-resource'""
4. From yet another terminal, execute ""jdb -attach localhost:8787""
5. In JDB: 
5.a. Create breakpoint: ""stop in org.xnio.channels.FramedMessageChannel.receive(java.nio.ByteBuffer)""
5.b. Resume all threads: ""resume""
5.c. [Execute five times] Wait until breakpoint is hit and execute ""resume"". Either set timeout or be fast so that timeout does not occur first
6. Execute ""kill -9 $EAP_PID"" - optionally in VM
7. In JDB:
8.a. Remove breakpoint: ""clear org.xnio.channels.FramedMessageChannel.receive(java.nio.ByteBuffer)""
8.b. Resume all threads: ""resume""
9. Now dump the stack trace of jboss-cli.sh: ""kill -3 $JBOSS_CLI_PID""




Found one Java-level deadlock:
=============================
""Remoting ""cli-client"" read-1"":
  waiting to lock monitor 0x00007ff9c829b558 (object 0x0000000783433408, a java.lang.String),
  which is held by ""main""
""main"":
  waiting to lock monitor 0x00007ff9c8333c48 (object 0x00000007851ae6e0, a java.util.ArrayDeque),
  which is held by ""Remoting ""cli-client"" read-1""

Java stack information for the threads listed above:
===================================================
""Remoting ""cli-client"" read-1"":
        at org.jboss.as.cli.impl.CLIModelControllerClient$ChannelCloseHandler.handleClose(CLIModelControllerClient.java:286)
        - waiting to lock <0x0000000783433408> (a java.lang.String)
        at org.jboss.as.cli.impl.CLIModelControllerClient$ChannelCloseHandler.handleClose(CLIModelControllerClient.java:269)
        at org.jboss.remoting3.spi.SpiUtils.safeHandleClose(SpiUtils.java:54)
        at org.jboss.remoting3.spi.AbstractHandleableCloseable$CloseHandlerTask.run(AbstractHandleableCloseable.java:501)
        at org.jboss.remoting3.spi.AbstractHandleableCloseable.runCloseTask(AbstractHandleableCloseable.java:406)
        at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeComplete(AbstractHandleableCloseable.java:277)
        at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:532)
        at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:359)
        at org.jboss.remoting3.remote.RemoteConnectionHandler.closeAllChannels(RemoteConnectionHandler.java:392)
        - locked <0x00000007851ae6e0> (a java.util.ArrayDeque)
        at org.jboss.remoting3.remote.RemoteConnectionHandler.handleConnectionClose(RemoteConnectionHandler.java:109)
        at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:81)
        - locked <0x00000007851ae6e0> (a java.util.ArrayDeque)
        at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:45)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
        at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)
        at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
        at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)
        at org.xnio.ssl.JsseConnectedSslStreamChannel.handleReadable(JsseConnectedSslStreamChannel.java:183)
        at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
        at org.xnio.nio.NioHandle.run(NioHandle.java:90)
        at org.xnio.nio.WorkerThread.run(WorkerThread.java:198)
""main"":
        at org.jboss.remoting3.remote.RemoteConnectionChannel.receiveMessage(RemoteConnectionChannel.java:361)
        - waiting to lock <0x00000007851ae6e0> (a java.util.ArrayDeque)
        at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.connectionOpened(FutureManagementChannel.java:217)
        at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:78)
        - locked <0x0000000784978a00> (a org.jboss.as.protocol.ProtocolConnectionManager)
        at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:204)
        at org.jboss.as.cli.impl.CLIModelControllerClient.getOrCreateChannel(CLIModelControllerClient.java:160)
        - locked <0x0000000783433408> (a java.lang.String)
        at org.jboss.as.cli.impl.CLIModelControllerClient$2.getChannel(CLIModelControllerClient.java:120)
        at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:123)
        at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:98)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:236)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:141)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)
        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)
        at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:980)
        at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:841)
        at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:817)
        at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:282)
        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:250)
        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:483)
        at org.jboss.modules.Module.run(Module.java:312)
        at org.jboss.modules.Main.main(Main.java:460)
{noformat}

It can be easily reproduce with Eclipse as:
{noformat}
1 start Wildfly
2 uncomment ""JAVA_OPTS=""$JAVA_OPTS -agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=y"" in jboss-cli.sh and connect to server
3 add two break points at
    CLIModelControllerClient$ChannelCloseHandler [line: 285] - handleClose(Channel, IOException)
    RemoteConnectionChannel [line: 360] - receiveMessage(Receiver)
4 connect to 8787 from eclipse debug
5 shutdown Wildfly

A deadlock between ""main"" and ""cli-client"" is in Eclipse debug stack.
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1151960,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/312,,,,,,0.0,9.0,,1|hztv73:,9223372036854775807,,,,,,,,,,,"24/Oct/14 6:04 AM;soul2zimate;I have investigated this issue a bit since it was firstly found in EAP 6.3.2.CP.CR1 by QE.

The deadlock happens when CLI creates connection to server, meanwhile, before the first thread finishes its creation, another thread tries to close channel due to server shutdown or process kill.

""main"" thread firstly locks *strategy lock* to continue channel creation, it's blocked by *connection lock* (inside remoting3) during message receive.
""cli-client"" worker thread locks firstly *connection lock*, and it's blocked by the *strategy lock* during handleClose().

Not sure if this is adequate, I think we may move *_return strategy.getChannel();_* outside the synchronized block [CLIModelControllerClient.java#L166|https://github.com/wildfly/wildfly-core/blob/b7241fed52e776a93d7d65c53ba4e42b3a2afddc/cli/src/main/java/org/jboss/as/cli/impl/CLIModelControllerClient.java#L166], in that case, it won't lock the strategy ""lock"" for further close action, if close happens during that connection period, CLI client will get an IOException due to Channel closed since server is shutdown. 
[~aloubyansky] Is this a possible change for CLIModelControllerClient? ","24/Oct/14 8:31 AM;aloubyansky;Thanks for looking into this issue! I think if we move that line out of the synchronized block, the strategy could be null at that point.","28/Oct/14 5:30 AM;soul2zimate;I think the CLIModelControllerClient.handleClose action should not be blocked under this condition, as ""main"" is waiting on some message receive to complete, however, server is already down at this moment.
What if adding a new boolean variable to indicate channel creation completion. When server is shutdown before finishing channel creation, ChannelCloseHandler can directly handle the close action. Something may like [242507|http://pastebin.test.redhat.com/242507] .And CLIModelControllerClient.getOrCreateChannel() will see ""IOException: WFLYPRT0054: Channel closed"" as a consequence","07/Nov/14 4:51 PM;aloubyansky;Chao, thanks a lot for your efforts. I came up with this fix and tested it. There was another NPE in CommandContextImpl.handleClose(), although it was not critical in this case. I'd appreciate if you reviewed it too. Thanks!",16/Nov/14 7:11 PM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1151960|https://bugzilla.redhat.com/show_bug.cgi?id=1151960] from NEW to POST,17/Nov/14 7:38 AM;aloubyansky;The PR has been merged.,19/Nov/14 1:53 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1151960|https://bugzilla.redhat.com/show_bug.cgi?id=1151960] from POST to MODIFIED,25/Nov/14 3:29 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1151960|https://bugzilla.redhat.com/show_bug.cgi?id=1151960] from MODIFIED to ON_QA,25/Nov/14 10:36 AM;jira-bugzilla-migration;Hynek Mlnarik <hmlnarik@redhat.com> changed the Status of [bug 1151960|https://bugzilla.redhat.com/show_bug.cgi?id=1151960] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,
UnboundedQueueThreadPool's keep-alive param is currently useless,WFCORE-201,12555947,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,Takis,jameslivingston,jameslivingston,24/Oct/14 12:37 AM,13/Jul/16 11:00 AM,29/Nov/16 3:54 PM,,1.0.0.Alpha10,,,,,,,,,,,,,0,,,,,,"UnboundedQueueThreadPoolService currently sets the number of core thread and the maximum threads to the same value. As core threads are never removed, the keep-alive time parameter is useless.

Either the core threads should be lowered (to 0?) to allow timeouts, or the keep-alive parameter removed/deprecated.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1106790,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,6.0,,1|hztv13:,9223372036854775807,,,,,,,,,,,24/Oct/14 7:55 AM;dmlloyd;The reason this is left in is that it is intended to be supported.,"03/Nov/14 1:04 AM;jameslivingston;Any preference for adding a core-threads parameter (so schema change etc), or just setting the executor's core-threads to 0?",05/Nov/14 12:58 AM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1106790|https://bugzilla.redhat.com/show_bug.cgi?id=1106790] from NEW to ASSIGNED,05/Nov/14 1:05 AM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1106790|https://bugzilla.redhat.com/show_bug.cgi?id=1106790] from ASSIGNED to NEW,05/Oct/15 9:39 AM;Takis;Proposed PR is sent here... https://issues.jboss.org/browse/WFLY-5332 (proposal of a modified jboss thread pool executor),13/Jul/16 11:00 AM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1106790|https://bugzilla.redhat.com/show_bug.cgi?id=1106790] from NEW to CLOSED,,,,,,,,,,,,,,,,,,,,,
Domain graceful shutdown may attempt to use an AbstractMessageHandler that is shutdown,WFCORE-199,12555940,Bug,Reopened,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,brian.stansberry,brian.stansberry,23/Oct/14 5:12 PM,26/Oct/15 12:30 PM,29/Nov/16 3:54 PM,,1.0.0.Alpha10,,,,,,,,Domain Management,,,,,0,,,,,,"ManagedServer during shutdown tries to send a ""shutdown"" op to the remote server, triggering a graceful suspend.

Problem is, the TransactionalProtocolClient it uses is using a ManagementChannelHandler that may have been shut down. The service that controls the lifecycle of the ManagementChannelHandler (i.e. ManagementChannelOpenListenerService) is written to ensure that it isn't shutdown open until incoming requests complete, but there is nothing preventing shutdown when client uses are desired.

The specific area where this can be a problem is the assert !shutdown at

https://github.com/wildfly/wildfly-core/blob/master/protocol/src/main/java/org/jboss/as/protocol/mgmt/ActiveOperationSupport.java#L151

One possible solution is to distinguish locally initiated active operations from remote ones. AIUI the goal is to reject further remote ones.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hztuzj:,9223372036854775807,,,,,,,,,,,"20/Sep/15 2:31 PM;brian.stansberry;Rejecting the pull request, as the pull request was not meant as a fix for this issue; it just references it in a commit message.",26/Oct/15 12:29 PM;brian.stansberry;This issue is not fixed. The https://github.com/wildfly/wildfly-core/pull/1086 pull request simply worked around a testsuite failure by removing an assert.,,,,,,,,,,,,,,,,,,,,,,,,,
Hang in HostController shutdown when CTRL-C is used,WFCORE-196,12555937,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,23/Oct/14 5:01 PM,31/Oct/14 10:06 PM,29/Nov/16 3:55 PM,31/Oct/14 10:06 PM,1.0.0.Alpha10,,,,,,1.0.0.Alpha11,,Domain Management,,,,,0,,,,,,"It is fairly easy to produce a hang in domain mode shutdown by launching domain.sh and then soft killing the process with CTRL-C.

If this hang happens, a thread dump will show this

{code}
[Host Controller] ""Remoting ""localhost:MANAGEMENT"" task-16"" prio=5 tid=0x00007fa07423b800 nid=0x3b0b waiting for monitor entry [0x000000010bce6000]
[Host Controller]    java.lang.Thread.State: BLOCKED (on object monitor)
[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.callbackUnregistered(ManagedServer.java:417)
[Host Controller] 	- waiting to lock <0x00000007f7946a30> (a org.jboss.as.host.controller.ManagedServer)
[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl$1.handleClose(ServerInventoryImpl.java:461)
[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl$1.handleClose(ServerInventoryImpl.java:456)
[Host Controller] 	at org.jboss.remoting3.spi.SpiUtils.safeHandleClose(SpiUtils.java:54)
[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable$CloseHandlerTask.run(AbstractHandleableCloseable.java:501)
[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.runCloseTask(AbstractHandleableCloseable.java:406)
[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeComplete(AbstractHandleableCloseable.java:277)
[Host Controller] 	at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:532)
[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.close(AbstractHandleableCloseable.java:153)
[Host Controller] 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleEnd(ManagementChannelReceiver.java:127)
[Host Controller] 	at org.jboss.remoting3.remote.RemoteConnectionChannel$2.run(RemoteConnectionChannel.java:282)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
[Host Controller] 	at java.lang.Thread.run(Thread.java:744)


[Host Controller] ""Host Controller Service Threads - 13"" prio=5 tid=0x00007fa072cbc800 nid=0xa903 waiting on condition [0x000000010d93a000]
[Host Controller]    java.lang.Thread.State: WAITING (parking)
[Host Controller] 	at sun.misc.Unsafe.park(Native Method)
[Host Controller] 	- parking to wait for  <0x00000007f61e5480> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[Host Controller] 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
[Host Controller] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
[Host Controller] 	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
[Host Controller] 	at org.jboss.as.controller.remote.BlockingQueueOperationListener.retrievePreparedOperation(BlockingQueueOperationListener.java:88)
[Host Controller] 	at org.jboss.as.controller.remote.TransactionalProtocolHandlers.executeBlocking(TransactionalProtocolHandlers.java:76)
[Host Controller] 	at org.jboss.as.host.controller.ManagedServer$ServerStopTask.execute(ManagedServer.java:846)
[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.internalSetState(ManagedServer.java:531)
[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.stop(ManagedServer.java:259)
[Host Controller] 	- locked <0x00000007f7946a30> (a org.jboss.as.host.controller.ManagedServer)
[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl.stopServers(ServerInventoryImpl.java:339)
[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl.shutdown(ServerInventoryImpl.java:437)
[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryService$1.run(ServerInventoryService.java:124)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
[Host Controller] 	at java.lang.Thread.run(Thread.java:744)
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}

The 2nd thread is blocking waiting for a prepared response from one of the servers. The first thread is trying to send a notification that the channel connecting to the server has been closed. The first thread will never unblock because the 2nd thread can't proceed and deliver the information that the channel is closed.

This happens because all the processes (PC, HC, servers) respond to the CTRL-C. So the server is shutting down in parallel and has closed the channel.

In theory this could happen for other reasons too, though. Anything that results in closing the channel while the ManagedServer lock is held.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/265,,,,,,0.0,0.0,,1|hztuyv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Syslog reconnect timeout does not take effect at runtime,WFCORE-191,12555708,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,21/Oct/14 1:14 PM,29/Oct/14 5:04 AM,29/Nov/16 3:55 PM,28/Oct/14 11:40 AM,1.0.0.Alpha10,,,,,,1.0.0.Alpha11,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1148433,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/257,,,,,,0.0,5.0,,1|hzttlr:,9223372036854775807,,,,,,,,,,,21/Oct/14 1:15 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1148433|https://bugzilla.redhat.com/show_bug.cgi?id=1148433] from NEW to ASSIGNED,21/Oct/14 1:20 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1148433|https://bugzilla.redhat.com/show_bug.cgi?id=1148433] from ASSIGNED to POST,24/Oct/14 5:13 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1148433|https://bugzilla.redhat.com/show_bug.cgi?id=1148433] from POST to MODIFIED,27/Oct/14 4:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1148433|https://bugzilla.redhat.com/show_bug.cgi?id=1148433] from MODIFIED to ON_QA,29/Oct/14 5:04 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1148433|https://bugzilla.redhat.com/show_bug.cgi?id=1148433] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
TLS syslog uses plain connection if no truststore or client-cert-store is configured,WFCORE-190,12555707,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,kabirkhan,kabirkhan,kabirkhan,21/Oct/14 12:23 PM,03/Nov/14 7:23 AM,29/Nov/16 3:55 PM,28/Oct/14 11:40 AM,1.0.0.Alpha10,,,,,,1.0.0.Alpha11,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1154970,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/257,,,,,,0.0,0.0,,1|hzttlj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Default config needs to be based on latest version of the management schema,WFCORE-186,12555468,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,dlofthouse,dlofthouse,dlofthouse,17/Oct/14 1:20 PM,28/Oct/14 6:34 AM,29/Nov/16 3:55 PM,28/Oct/14 6:34 AM,,,,,,,1.0.0.Alpha11,,Domain Management,,,,,0,,,,,,Somehow in recent changes it has dropped back to version 2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/253,,,,,,0.0,0.0,,1|hzts67:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Api returns internal server error instead of not found for non-existing path,WFCORE-185,12468578,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,brian.stansberry,pilhuhn,pilhuhn,11/Jun/12 3:39 PM,06/Aug/15 1:46 PM,29/Nov/16 3:55 PM,,,,,,,,3.0.0.Beta1,,Domain Management,,,,,1,rhq,,,,,"When I try to e.g. /subsystem=foo:read-resource the api returns a 500 internal server error.
In http-land, the return code for ""not found"" is normally 404.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hz1njz:,70056,,,,,,,,,,,"11/Jun/12 4:42 PM;ips;+1. 

From the HTTP 1.1 spec:

10.4 Client Error 4xx

The 4xx class of status code is intended for cases in which the client seems to have erred. Except when responding to a HEAD request, the server SHOULD include an entity containing an explanation of the error situation, and whether it is a temporary or permanent condition. These status codes are applicable to any request method. User agents SHOULD display any included entity to the user. 

<snip>

10.5 Server Error 5xx

Response status codes beginning with the digit ""5"" indicate cases in which the server is aware that it has erred or is incapable of performing the request. Except when responding to a HEAD request, the server SHOULD include an entity containing an explanation of the error situation, and whether it is a temporary or permanent condition. User agents SHOULD display any included entity to the user. These response codes are applicable to any request method.

10.5.1 500 Internal Server Error

The server encountered an unexpected condition which prevented it from fulfilling the request. 

<snip>


Based on these definitions, neither 500 nor any 5xx code is appropriate to return when the client requests a non-existent management resource. It's a client error, so a 4xx code should be returned. 400 (Bad Request) is probably the best fit out of the spec-defined client error codes. 404 (""The server has not found anything matching the Request-URI"") isn't ideal since the request URI (/management) is perfectly valid; it's the request body that has issues.

Unfortunately, always returning a 400 does not give the client any way to distinguish between different types of client errors (e.g. mgmt resource not found, invalid attribute or operation name). There are a couple ways we could provide the client with a more specific status:

1) Define some custom 4xx codes, e.g.:

490: Management resource not found
491: Management attribute not found
492: Management operation not found

or IIS-style:

400.1: Management resource not found
400.2: Management attribute not found
400.3: Management operation not found

2) Return a 400 response but include a custom HTTP header with a sub status code which gives a more detailed description of the client error, e.g.:

JBoss-Status-Subcode: 1 Management resource not found
JBoss-Status-Subcode: 2 Management attribute not found
JBoss-Status-Subcode: 3 Management operation not found
","11/Jun/12 4:50 PM;brian.stansberry;This will require some hackery, as the HTTP handling layer has no clue what the error was.","15/Sep/14 3:06 PM;brian.stansberry;I'm scheduling this, as I want to make sure it gets done in 9.","17/Oct/14 2:39 PM;brian.stansberry;A 404 is fine for missing resources when GET is used, since the resource address as part of the Request-URI; agreed that it's not good for a POST.

What's the benefit of ""Management attribute not found"" and ""Management operation not found""?  I can see a custom response code or header for ""Management resource not found"" since 404 is inappropriate for POST and what resources are available changes over time. But if the resource address is valid, the set of attributes and operations exposed by a resource is not something that is changing around a lot. So I don't see the value for a client of such a code/header over simply reading the failure details from the response body.","28/Apr/15 10:42 AM;brian.stansberry;(Status note) https://github.com/bstansberry/wildfly-core/tree/WFCORE-185 is a now quite out of date branch with work on this. The big implementation issue here is properly propagating status codes back to the master and on to the user in a managed domain. That branch was starting to feel hacky, and I had other critical priorities, so I moved off of it.",,,,,,,,,,,,,,,,,,,,,,
Add attribute to specify enabled-protocols for HTTPS within domain management.,WFCORE-180,12555440,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dlofthouse,dlofthouse,dlofthouse,17/Oct/14 10:40 AM,10/Nov/14 12:12 PM,29/Nov/16 3:55 PM,28/Oct/14 6:28 AM,,,,,,,1.0.0.Alpha11,,Domain Management,Security,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/251,,,,,,0.0,4.0,,1|hztrzz:,9223372036854775807,,,,,,,,,,,21/Oct/14 9:24 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1153854|https://bugzilla.redhat.com/show_bug.cgi?id=1153854] from ASSIGNED to POST,28/Oct/14 10:43 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1153854|https://bugzilla.redhat.com/show_bug.cgi?id=1153854] from POST to MODIFIED,03/Nov/14 5:20 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1153854|https://bugzilla.redhat.com/show_bug.cgi?id=1153854] from MODIFIED to ON_QA,10/Nov/14 12:12 PM;jira-bugzilla-migration;Radim Hatlapatka <rhatlapa@redhat.com> changed the Status of [bug 1153854|https://bugzilla.redhat.com/show_bug.cgi?id=1153854] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
ContentRepositoryImpl should not call File.deleteOnExit,WFCORE-178,12555375,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,16/Oct/14 4:28 PM,21/Nov/14 2:54 AM,29/Nov/16 3:55 PM,21/Nov/14 2:54 AM,,,,,,,1.0.0.Alpha14,,Domain Management,,,,,0,,,,,,"ContentRepositoryImpl.removeContent calls File.deleteOnExit if it can't delete the content or parent dirs. This is very wrong:

1) The grandparent dir may have other children completed unrelated to the item being removed.
2) The content in question may have been restored before process exit. For example, a deployment is undeployed, and then a while later the same bits are uploaded again.
3) File.deleteOnExit is a small memory leak. This one's relatively minor.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/284,,,,,,0.0,0.0,,1|hztrkv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in DomainGracefulShutdownTestCase,WFCORE-177,12555362,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,brian.stansberry,brian.stansberry,16/Oct/14 3:09 PM,09/Nov/14 6:28 PM,29/Nov/16 3:55 PM,09/Nov/14 6:28 PM,,,,,,,1.0.0.Alpha12,,,,,,,0,,,,,,"Intermittent failure, e.g. 

http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildTypeId=WildFlyCore_PullRequest&buildId=26382

Test history shows a couple other failures.

Looking at the server logs for that failure, I see this in the main-one log:

{code}
18:53:21,273 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 5) WFLYSRV0010: Deployed ""web-suspend.jar"" (runtime-name : ""web-suspend.jar"")
18:53:21,297 INFO  [stdout] (XNIO-1 task-1) Attempting 1 HttpServerExchange{ GET /web-suspend}
18:53:22,287 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 5) WFLYSRV0211: Suspending server
18:53:22,338 INFO  [stdout] (XNIO-1 task-2) Attempting 2 HttpServerExchange{ GET /web-suspend}
18:53:22,345 INFO  [stdout] (XNIO-1 I/O-1) Rejected 2 HttpServerExchange{ GET /web-suspend}
18:53:22,351 INFO  [stdout] (XNIO-1 task-4) Skipping request 3 HttpServerExchange{ GET /web-suspend}
18:53:22,391 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment web-suspend.jar (runtime-name: web-suspend.jar) in 6ms
18:53:22,460 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Core 1.0.0.Alpha10-SNAPSHOT ""Kenny"" stopped in 20ms
{code}

Note the ""Skipping request 3"" line -- so that request was received.

The client side failure though was as if the connection was refused:

{code}
java.io.IOException: java.util.concurrent.ExecutionException: java.net.ConnectException: Connection refused
    at java.util.concurrent.FutureTask.report(FutureTask.java:122)
    at java.util.concurrent.FutureTask.get(FutureTask.java:202)
    at org.jboss.as.test.integration.common.HttpRequest.execute(HttpRequest.java:50)
    at org.jboss.as.test.integration.common.HttpRequest.get(HttpRequest.java:80)
    at org.jboss.as.test.integration.domain.suspendresume.DomainGracefulShutdownTestCase.testGracefulShutdownDomainLevel(DomainGracefulShutdownTestCase.java:129)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:763)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:633)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1323)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)
    at org.jboss.as.test.integration.common.HttpRequest.processResponse(HttpRequest.java:150)
    at org.jboss.as.test.integration.common.HttpRequest.access$000(HttpRequest.java:44)
    at org.jboss.as.test.integration.common.HttpRequest$1.call(HttpRequest.java:77)
    at org.jboss.as.test.integration.common.HttpRequest$1.call(HttpRequest.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:744)
{code}

So, perhaps:

1) A race, where unblocking the suspend resulted in the service stopping and the fake undertow going away before the response went out? With the client interpreting that as a connect failure? We've had plenty of those kinds of problems with management ops when we reload/shutdown the server.

2) The SuspendResumeHandler doesn't actually write any response to request 3, so maybe that's a problem? This seems unlikely, and if it were a problem I'd think it would be consistent.

3) ???",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/288,,,,,,0.0,1.0,,1|hztrhz:,9223372036854775807,,,,,,,,,,,"04/Nov/14 6:32 PM;swd847;The issue looks to be 1, I have changed the latch release to be done after the relevant request has been written out",,,,,,,,,,,,,,,,,,,,,,,,,,
role-mapping=x/include=y boot operation is generated with the wrong address,WFCORE-176,12555341,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,aloubyansky,aloubyansky,16/Oct/14 10:17 AM,07/Nov/14 5:44 AM,29/Nov/16 3:55 PM,07/Nov/14 5:44 AM,,,,,,,1.0.0.Alpha12,,Domain Management,,,,,0,,,,,,"This is the request which is generated by the xml parser

{""operation"" => ""add"",
""type"" => ""user"",
""name"" => ""$local"",
""address"" => [
(""core-service"" => ""management""),
(""access"" => ""authorization""),
(""role-mapping"" => ""SuperUser""),
""include"",
""user-$local""
]

include and user-$local are added separately, not as a pair.
ManagementXml.parseRole(...) line 3345 adds include
then parsePrincipal(...) line 3428 adds the alias.",,,,,,,,,,,,,,,,,,,,,,,,,,,16/Oct/14 10:34 AM;aloubyansky;diff.txt;https://issues.jboss.org/secure/attachment/12385840/diff.txt,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/299,,,,,,1.0,1.0,,1|hztrdb:,9223372036854775807,,,,,,,,,,,16/Oct/14 10:34 AM;aloubyansky;Attached is a possible fix.,,,,,,,,,,,,,,,,,,,,,,,,,,
Running WF from build directory on Windows fails due to unresolved maven references,WFCORE-175,12545835,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,nickarls,nickarls,08/Jul/14 7:55 AM,16/Oct/14 8:51 AM,29/Nov/16 3:55 PM,16/Oct/14 8:51 AM,1.0.0.Alpha9,,,,,,1.0.0.Alpha10,,Modules,,,,,0,,,,,,"Running WF from the build directory on a Windows host fails due to the clustering module.xml

    <resources>
        <artifact name=""org.wildfly:wildfly-clustering-infinispan:9.0.0.Alpha1-SNAPSHOT""/>
    </resources>

in the dist directory the section is correctly resolved as

    <resources>
        <resource-root path=""wildfly-clustering-infinispan-9.0.0.Alpha1-SNAPSHOT.jar""/>
    </resources>

and WF can be run from there",,,,,,,,,,,,,,,,,,MODULES-194,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/246,,,,,,0.0,2.0,,1|hzs9g7:,9223372036854775807,,,,,,,,,Workaround Exists,run the AS from the dist directory,24/Jul/14 6:00 AM;ctomc;for for jboss modules sent.,16/Oct/14 8:51 AM;ctomc;WildFly core is now upgraded to jboss-modules 1.4,,,,,,,,,,,,,,,,,,,,,,,,,
Add periodic-size-rotating-file-handler to the allowed set of files to be read,WFCORE-174,12555287,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,jamezp,jamezp,jamezp,15/Oct/14 4:54 PM,05/Nov/14 2:43 PM,29/Nov/16 3:55 PM,05/Nov/14 2:43 PM,,,,,,,,,Logging,,,,,0,,,,,,The {{periodic-size-rotating-file-handler}} needs to be added to the allowed file types to be read and listed with the {{read-log-file}} and {{list-log-files}} operations.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1153360,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hztr1j:,9223372036854775807,,,,,,,,,,,05/Nov/14 2:42 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1153360|https://bugzilla.redhat.com/show_bug.cgi?id=1153360] from ASSIGNED to CLOSED,05/Nov/14 2:43 PM;jamezp;See https://issues.jboss.org/browse/WFCORE-197,,,,,,,,,,,,,,,,,,,,,,,,,
BindingGroupAddHandler should not validate the interface ref in the initial step,WFCORE-173,12555271,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,15/Oct/14 12:37 PM,17/Oct/14 11:44 AM,29/Nov/16 3:55 PM,17/Oct/14 11:44 AM,,,,,,,1.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"BindingGroupAddHandler does this in the initial step:

SocketBindingGroupResourceDefinition.validateDefaultInterfaceReference(context, model);

It actually adds a step to do other validation, so ^^^ should be moved there.

Doing this removes the requirement to run interface add ops before the socket-binding-group add ops, e.g. in non-xml-parsing based boots or in a post-boot composite operation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/248,,,,,,0.0,0.0,,1|hztqy7:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong application name used for Syslog logging,WFCORE-172,12555184,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jcacek,jcacek,15/Oct/14 4:27 AM,12/Jul/16 6:25 AM,29/Nov/16 3:55 PM,21/May/15 9:09 AM,,,,,,,1.0.0.CR4,,Logging,,,,,0,,,,,,"The auditlog code uses ""WildFly Full"" value as an application name (APP-NAME header field) for syslog logging. 

It's not allowed to use space in the value, because the space is a header field separator in syslog messages. Look at syslog message format - http://tools.ietf.org/html/rfc5424#section-6
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hztqev:,9223372036854775807,,,,,,,,,,,15/Oct/14 4:34 AM;jcacek;The {{org.jboss.logmanager.handlers.SyslogHandler.createRFCXXXXHeader(ExtLogRecord)}} methods could check the provided APP-NAME value.,"21/May/15 9:09 AM;ctomc;afaik, this was fixed some time ago.",,,,,,,,,,,,,,,,,,,,,,,,,
File handlers should not allow already existing directories as a file name,WFCORE-171,12555264,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,15/Oct/14 11:55 AM,30/Oct/14 4:19 AM,29/Nov/16 3:55 PM,23/Oct/14 1:30 PM,,,,,,,1.0.0.Alpha11,,Logging,,,,,0,,,,,,"File handler resources allow existing directories to be used as the path name for the file. An exception is thrown in the logmanager, but the operation succeeds. Validation of the path should be done in the operations. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=915670,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/263,,,,,,0.0,5.0,,1|hztqwn:,9223372036854775807,,,,,,,,,,,15/Oct/14 11:55 AM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 915670|https://bugzilla.redhat.com/show_bug.cgi?id=915670] from NEW to ASSIGNED,22/Oct/14 9:08 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 915670|https://bugzilla.redhat.com/show_bug.cgi?id=915670] from ASSIGNED to POST,24/Oct/14 5:12 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 915670|https://bugzilla.redhat.com/show_bug.cgi?id=915670] from POST to MODIFIED,27/Oct/14 4:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 915670|https://bugzilla.redhat.com/show_bug.cgi?id=915670] from MODIFIED to ON_QA,30/Oct/14 4:19 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 915670|https://bugzilla.redhat.com/show_bug.cgi?id=915670] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
recursive read-resource doesn't work anymore,WFCORE-167,12555103,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Rejected,ctomc,ctomc,ctomc,14/Oct/14 8:21 AM,14/Oct/14 8:30 AM,29/Nov/16 3:55 PM,14/Oct/14 8:30 AM,1.0.0.Alpha9,,,,,,1.0.0.Alpha10,,CLI,Domain Management,,,,0,,,,,,"Executing 

{noformat}
/extension=org.jboss.as.logging:read-resource(recursive=true)
{noformat}
results in 
{noformat}
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""module"" => ""org.jboss.as.logging"",
        ""subsystem"" => undefined
    }
}
{noformat}
while there are children defined under subsystem.
for example going to child element it show it

{noformat}
[standalone@localhost:9990 /] cd /extension=org.jboss.as.logging/subsystem=logging
[standalone@localhost:9990 subsystem=logging] ls -l
ATTRIBUTE VALUE
TYPE
management-major-version 3
INT
management-micro-version 0
INT
management-minor-version 0
INT
...
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hztpx3:,9223372036854775807,,,,,,,,,,,"14/Oct/14 8:30 AM;ctomc;Semantics of this have changed, as we properly marked this resources as run time, we need to add include-runtime=true to read-resouce.",,,,,,,,,,,,,,,,,,,,,,,,,,
LDAP caching for security realm not caching where a user does not exist on the server.,WFCORE-166,12555007,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,dlofthouse,dlofthouse,13/Oct/14 1:00 PM,04/Nov/14 3:45 AM,29/Nov/16 3:55 PM,13/Oct/14 1:12 PM,,,,,,,1.0.0.Alpha10,,Domain Management,Security,,,,0,,,,,,"Where the caches are configured within the security realms to cache failures missing users are not cached.

This is due to an IOException being used to report the missing user instead of a NamingException - we deliberately do not cache an IOException as that could also be as a result of the server being temporarily unavailable,",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1150608,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hztpc7:,9223372036854775807,,,,,,,,,,,13/Oct/14 1:12 PM;dlofthouse;Double checked and upstream is already using NamingException.,13/Oct/14 1:38 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1150608|https://bugzilla.redhat.com/show_bug.cgi?id=1150608] from ASSIGNED to POST,14/Oct/14 5:42 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1150608|https://bugzilla.redhat.com/show_bug.cgi?id=1150608] from POST to MODIFIED,20/Oct/14 5:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1150608|https://bugzilla.redhat.com/show_bug.cgi?id=1150608] from MODIFIED to ON_QA,04/Nov/14 3:45 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1150608|https://bugzilla.redhat.com/show_bug.cgi?id=1150608] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Load sun.rmi.server.UnicastServerRef failed in ServletContextListener.contextInitialized,WFCORE-164,12547710,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,zhs,zhs,29/Jul/14 4:28 AM,28/Oct/14 11:40 AM,29/Nov/16 3:55 PM,28/Oct/14 11:40 AM,,,,,,,1.0.0.Alpha11,,Modules,,,,,0,,,,,,"Jotm is used for JTA, since I want it works on most Servlet containers. Jotm depend on sun.rmi.server.UnicastServerRef, it can't be loaded by WildFly 8.1.0.Final, the same project works in Jetty 9.

Stack trace from test project:
2014-07-29 11:53:20,317 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./test: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./test: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_17]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_17]
	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_17]
Caused by: java.lang.NoClassDefFoundError: sun/rmi/server/UnicastServerRef
	at test.TestServletContextListener.contextInitialized(TestServletContextListener.java:10)
	at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:173)
	at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:190)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:87)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.start(UndertowDeploymentService.java:72)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	... 3 more
Caused by: java.lang.ClassNotFoundException: sun.rmi.server.UnicastServerRef from [Module ""deployment.test.war:main"" from Service Module Loader]
	at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:213) [jboss-modules.jar:1.3.3.Final]
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:459) [jboss-modules.jar:1.3.3.Final]
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:408) [jboss-modules.jar:1.3.3.Final]
	at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:389) [jboss-modules.jar:1.3.3.Final]
	at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:134) [jboss-modules.jar:1.3.3.Final]
	... 10 more

I did some debugging, some variables' state in org.jboss.modules.Module.loadModuleClass method:
systemPackages : [java., sun.reflect., __redirected.]
className : sun.rmi.server.UnicastServerRef
path : sun/rmi/server
paths : some paths point to wildfly/modules/system/layers/base
loaders : null
fallbackLoader : null
","Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/242,,,,,,0.0,0.0,,1|hzskgn:,9223372036854775807,,,,"Add this class:
public class TestServletContextListener implements ServletContextListener {

	@Override
	public void contextInitialized(ServletContextEvent sce) {
		sun.rmi.server.UnicastServerRef ref = new sun.rmi.server.UnicastServerRef();
		System.out.println(""ref="" + ref);
	}

	@Override
	public void contextDestroyed(ServletContextEvent sce) {
	}

}

In web.xml
	<listener>
		<listener-class>test.TestServletContextListener</listener-class>
	</listener>
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add-user only escaping first occurrence of special characters,WFCORE-163,12554996,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,13/Oct/14 10:08 AM,26/Nov/14 8:42 AM,29/Nov/16 3:55 PM,13/Oct/14 1:14 PM,,,,,,,1.0.0.Alpha10,,Domain Management,Security,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1150020,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/241,,,,,,0.0,4.0,,1|hztp9r:,9223372036854775807,,,,,,,,,,,13/Oct/14 10:56 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1150020|https://bugzilla.redhat.com/show_bug.cgi?id=1150020] from ASSIGNED to POST,14/Oct/14 4:28 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1150020|https://bugzilla.redhat.com/show_bug.cgi?id=1150020] from POST to MODIFIED,25/Nov/14 11:19 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1150020|https://bugzilla.redhat.com/show_bug.cgi?id=1150020] from MODIFIED to ON_QA,26/Nov/14 8:42 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1150020|https://bugzilla.redhat.com/show_bug.cgi?id=1150020] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Host controller hangs and can not be stopped if Managed Server is killed after establishing MBean connection.,WFCORE-162,12554952,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,emuckenhuber,jaysensharma,jaysensharma,13/Oct/14 5:41 AM,13/Oct/14 12:26 PM,29/Nov/16 3:55 PM,13/Oct/14 12:26 PM,1.0.0.Alpha9,,,,,,1.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"- If the following sequence of events hapens then the Host controller process hangs and it can not be stopped using ""CTRL+C"" command. (only kill -9 works)

*Step-1).* Start the default ""wildfly-9.0.0.Alpha1"" in domain mode using ""./domain.sh"" script.  (it should start server-one, server-two, Host controller and process controller)

*Step-2).* Open the JConsole using ""wildfly-9.0.0.Alpha1/bin/jconsole.sh"" script. 

*Step-3).* In JConsole connect to ""server-one"" and then nevigate to ""MBeans"" tab just to check if the MBeans are  visible in jconsole or not.

*Step-4).* Now kill the ""server-one"" process using ""kill  -9  $PID"" command

*Step-5).* Once server-one is killed try stopping the Host Controller process  using ""CTRL+C"". Press CTRL+C in the terminal where the ""./domain.sh"" script is being executed. 

Users will notice that the CTRL+C signal is also not able to kill the host controller process. 

*Thread Dumps Atached*",Linux,,,,,,,,,,,,,,,,,,,,,,,,,,13/Oct/14 5:42 AM;jaysensharma;Host_Controller_ThreadDumps.txt;https://issues.jboss.org/secure/attachment/12385780/Host_Controller_ThreadDumps.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,4.0,,1|hztp07:,9223372036854775807,,,,Mentioned in issue description.,,,,,Workaround Exists,"kill the host controller using ""kill -9 $PID""","13/Oct/14 5:44 AM;jaysensharma;Used JDK:

java -version
java version ""1.7.0_51""
Java(TM) SE Runtime Environment (build 1.7.0_51-b13)
Java HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)
","13/Oct/14 5:47 AM;jaysensharma;Some of the BLOCKED Threads on Host Controller can be seen as following:

{code}
""main"" prio=10 tid=0x00007fe60c009800 nid=0x34d0 waiting for monitor entry [0x00007fe613c51000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at java.lang.Shutdown.exit(Shutdown.java:212)
	- waiting to lock <0x00000000e0897418> (a java.lang.Class for java.lang.Shutdown)
	at java.lang.Runtime.exit(Runtime.java:109)
	at java.lang.System.exit(System.java:962)
	at org.jboss.as.host.controller.SystemExiter$DefaultExiter.exit(SystemExiter.java:54)
	at org.jboss.as.host.controller.SystemExiter.exit(SystemExiter.java:41)
	at org.jboss.as.host.controller.Main.exit(Main.java:172)
	at org.jboss.as.host.controller.Main.main(Main.java:115)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.jboss.modules.Module.run(Module.java:312)
	at org.jboss.modules.Main.main(Main.java:460)


""SIGINT handler"" daemon prio=10 tid=0x00007fe5e800e800 nid=0x3709 waiting for monitor entry [0x00007fe601d8f000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at java.lang.Shutdown.exit(Shutdown.java:212)
	- waiting to lock <0x00000000e0897418> (a java.lang.Class for java.lang.Shutdown)
	at java.lang.Terminator$1.handle(Terminator.java:52)
	at sun.misc.Signal$1.run(Signal.java:212)
	at java.lang.Thread.run(Thread.java:744)

""SIGINT handler"" daemon prio=10 tid=0x00007fe5e8004000 nid=0x36b2 in Object.wait() [0x00007fe60106a000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x00000000e08971b8> (a org.jboss.as.host.controller.HostControllerBootstrap$ShutdownHook)
	at java.lang.Thread.join(Thread.java:1280)
	- locked <0x00000000e08971b8> (a org.jboss.as.host.controller.HostControllerBootstrap$ShutdownHook)
	at java.lang.Thread.join(Thread.java:1354)
	at java.lang.ApplicationShutdownHooks.runHooks(ApplicationShutdownHooks.java:106)
	at java.lang.ApplicationShutdownHooks$1.run(ApplicationShutdownHooks.java:46)
	at java.lang.Shutdown.runHooks(Shutdown.java:123)
	at java.lang.Shutdown.sequence(Shutdown.java:167)
	at java.lang.Shutdown.exit(Shutdown.java:212)
	- locked <0x00000000e0897418> (a java.lang.Class for java.lang.Shutdown)
	at java.lang.Terminator$1.handle(Terminator.java:52)
	at sun.misc.Signal$1.run(Signal.java:212)
	at java.lang.Thread.run(Thread.java:744)
{code}","13/Oct/14 6:00 AM;nikhilmone;Tested on latest openjdk, issue reprodeuced here too :

{code} 
$ java -version
java version ""1.7.0_65""
OpenJDK Runtime Environment (fedora-2.5.2.5.fc20-x86_64 u65-b17)
OpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)
{code} ",13/Oct/14 12:26 PM;emuckenhuber;This should be fixed WildFly core upstream now. Thanks for noticing and reporting!,,,,,,,,,,,,,,,,,,,,,,,
JMX monitoring is extremely memory inefficient,WFCORE-161,12553168,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,janssk77,janssk77,23/Sep/14 7:04 PM,20/Jan/15 3:44 AM,29/Nov/16 3:55 PM,31/Oct/14 10:06 PM,,,,,,,1.0.0.Alpha11,,Domain Management,,,,,1,,,,,,"When reading any JMX attribute(s), I have noticed a noticeable impact on the performance of our system. After attaching a profiler, I see that getting a single attribute of a JMX bean (either using remoting or using jconsole) is generating thousands of objects, that have to cleaned up by the GC. For instance, 6000 instances of the ModelNode class are created.

A clone is made of the complete management model before executing any JMX operation. This happens in the OperationContextImpl.readResourceFromRoot class.

More background on associated forum thread",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1150304,https://bugzilla.redhat.com/show_bug.cgi?id=1154868,,,,Perform,,,,,,,,,,https://developer.jboss.org/message/904819,,,https://github.com/wildfly/wildfly-core/pull/258,,,,,,0.0,11.0,,1|hztejr:,9223372036854775807,,,,,,,,,,,26/Sep/14 1:24 PM;kabirkhan;[~jmesnil] Assigning to you since you already opened a PR :-),"26/Sep/14 2:44 PM;kabirkhan;Seems the PR was done by Brian, not Jeff :-)",21/Oct/14 3:03 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1150304|https://bugzilla.redhat.com/show_bug.cgi?id=1150304] from NEW to POST,24/Oct/14 5:13 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1150304|https://bugzilla.redhat.com/show_bug.cgi?id=1150304] from POST to MODIFIED,27/Oct/14 4:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1150304|https://bugzilla.redhat.com/show_bug.cgi?id=1150304] from MODIFIED to ON_QA,04/Nov/14 6:03 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1150304|https://bugzilla.redhat.com/show_bug.cgi?id=1150304] from ON_QA to VERIFIED,11/Nov/14 10:42 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1154868|https://bugzilla.redhat.com/show_bug.cgi?id=1154868] from NEW to ASSIGNED,18/Nov/14 2:50 AM;jira-bugzilla-migration;Panagiotis Sotiropoulos <psotirop@redhat.com> changed the Status of [bug 1154868|https://bugzilla.redhat.com/show_bug.cgi?id=1154868] from ASSIGNED to POST,19/Dec/14 4:10 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1154868|https://bugzilla.redhat.com/show_bug.cgi?id=1154868] from POST to MODIFIED,16/Jan/15 6:26 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1154868|https://bugzilla.redhat.com/show_bug.cgi?id=1154868] from MODIFIED to ON_QA,20/Jan/15 3:44 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1154868|https://bugzilla.redhat.com/show_bug.cgi?id=1154868] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Bash scripts should not attempt to expand argument properties,WFCORE-160,12554876,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,10/Oct/14 2:04 PM,27/Nov/14 6:05 AM,29/Nov/16 3:55 PM,14/Oct/14 7:52 PM,,,,,,,1.0.0.Alpha10,,Scripts,,,,,0,,,,,,"Scripts that parse the command line arguments use a pattern like
{code}
while [ ""$#"" -gt 0 ]
do
    case ""$1"" in
      *)
          CLI_OPTS=""$CLI_OPTS \""$1\""""
          ;;
    esac
    shift
done
{code}

The {{CLI_OPTS=""$CLI_OPTS \""$1\""""}} should be {{CLI_OPTS=""$CLI_OPTS '$1'""}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1145960,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/238,,,,,,0.0,12.0,,1|hztonr:,9223372036854775807,,,,,,,,,,,10/Oct/14 3:00 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ON_QA to POST,11/Oct/14 9:36 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from POST to MODIFIED,13/Oct/14 5:10 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from MODIFIED to ON_QA,22/Oct/14 6:34 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ON_QA to ASSIGNED,06/Nov/14 12:44 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ASSIGNED to POST,07/Nov/14 8:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from POST to MODIFIED,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from MODIFIED to ON_QA,13/Nov/14 8:45 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ON_QA to ASSIGNED,21/Nov/14 7:35 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ASSIGNED to POST,24/Nov/14 1:54 PM;jira-bugzilla-migration;Jason T. Greene <jason.greene@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from MODIFIED to ON_QA,27/Nov/14 6:05 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1145960|https://bugzilla.redhat.com/show_bug.cgi?id=1145960] from ON_QA to VERIFIED,,,,,,,,,,,,,,,
Handlers can be created with the same name as an existing handler,WFCORE-159,12554758,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,09/Oct/14 7:16 PM,08/Jun/16 11:47 PM,29/Nov/16 3:55 PM,04/Nov/14 12:41 PM,,,,,,,1.0.0.Alpha12,,Logging,,,,,0,,,,,,"Handlers can be created with the same name as an existing handler. This was done to reconfigure differences in the logging subsystem XML and the logging.properties file. The problem is it will replace a handler during an {{ADD}} operation if the same name is used on another parent resource.

{code}
/subsystem=logging/async-handler=CONSOLE:add(queue-length=10,overflow-action=BLOCK)
{code}

This will replace the default console handler with the new one keeping the existing console-handler resource. The next boot also fails with no indication on the console.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1151256,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/235,,,,,,0.0,4.0,,1|hztnxj:,9223372036854775807,,,,"Boot a default instance of WildFly and execute the following CLI command.
{code}
/subsystem=logging/async-handler=CONSOLE:add(queue-length=10,overflow-action=BLOCK)
{code}
",,,,,,,09/Oct/14 8:40 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1151256|https://bugzilla.redhat.com/show_bug.cgi?id=1151256] from ASSIGNED to POST,07/Nov/14 8:56 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1151256|https://bugzilla.redhat.com/show_bug.cgi?id=1151256] from POST to MODIFIED,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1151256|https://bugzilla.redhat.com/show_bug.cgi?id=1151256] from MODIFIED to ON_QA,12/Nov/14 7:32 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1151256|https://bugzilla.redhat.com/show_bug.cgi?id=1151256] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Handlers should not be allowed to be removed if they're assigned to another handler or logger,WFCORE-158,12554751,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,09/Oct/14 5:48 PM,12/Nov/14 7:26 AM,29/Nov/16 3:55 PM,04/Nov/14 12:41 PM,,,,,,,1.0.0.Alpha12,,Logging,,,,,0,,,,,,Handlers can currently be removed even if the handler is assigned to a logger or another handler. This allows an invalid {{logging.properties}} file to be written and will fail to start the server on the next boot.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1007333,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/234,,,,,,0.0,5.0,,1|hztnvz:,9223372036854775807,,,,,,,,,,,09/Oct/14 6:02 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1007333|https://bugzilla.redhat.com/show_bug.cgi?id=1007333] from NEW to ASSIGNED,09/Oct/14 8:40 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1007333|https://bugzilla.redhat.com/show_bug.cgi?id=1007333] from ASSIGNED to POST,07/Nov/14 8:56 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1007333|https://bugzilla.redhat.com/show_bug.cgi?id=1007333] from POST to MODIFIED,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1007333|https://bugzilla.redhat.com/show_bug.cgi?id=1007333] from MODIFIED to ON_QA,12/Nov/14 7:26 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1007333|https://bugzilla.redhat.com/show_bug.cgi?id=1007333] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Patching does not process subdirectories,WFCORE-154,12554466,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,baranowb,baranowb,baranowb,08/Oct/14 1:08 AM,20/Jan/15 4:26 AM,29/Nov/16 3:55 PM,15/Oct/14 7:11 AM,1.0.0.Alpha9,,,,,,1.0.0.Alpha10,,Patching ,,,,,0,,,,,,"If patched resource is in subdirectory of moduleRoot, it is not included as part of patch, even though it is present in patch zip.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1134735,https://bugzilla.redhat.com/show_bug.cgi?id=1136365,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/231,https://github.com/jbossas/jboss-eap/pull/1790,https://github.com/jbossas/jboss-eap/pull/1789,,,,0.0,8.0,,1|hztm73:,9223372036854775807,,,,,,,,,,,09/Oct/14 7:17 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1134735|https://bugzilla.redhat.com/show_bug.cgi?id=1134735] from ASSIGNED to POST,09/Oct/14 7:17 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1136365|https://bugzilla.redhat.com/show_bug.cgi?id=1136365] from ASSIGNED to POST,15/Oct/14 6:48 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1134735|https://bugzilla.redhat.com/show_bug.cgi?id=1134735] from POST to MODIFIED,20/Oct/14 5:23 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1134735|https://bugzilla.redhat.com/show_bug.cgi?id=1134735] from MODIFIED to ON_QA,10/Nov/14 9:36 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1134735|https://bugzilla.redhat.com/show_bug.cgi?id=1134735] from ON_QA to VERIFIED,11/Nov/14 3:29 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1136365|https://bugzilla.redhat.com/show_bug.cgi?id=1136365] from POST to MODIFIED,16/Jan/15 6:27 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1136365|https://bugzilla.redhat.com/show_bug.cgi?id=1136365] from MODIFIED to ON_QA,20/Jan/15 4:26 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1136365|https://bugzilla.redhat.com/show_bug.cgi?id=1136365] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,
Rewriting the property attribute on custom handlers or formatters does not unset values,WFCORE-152,12554446,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,07/Oct/14 2:41 PM,07/Oct/14 2:41 PM,29/Nov/16 3:55 PM,,,,,,,,,,Logging,,,,,0,,,,,,"I'm not setting a target for this as likely part of this needs to be solved in the logmanager. Currently rewriting properties does not unset properties that have been removed from the property map. It seems simple enough to just pass a {{null}} value to the property and then remove the property, but this won't work for primitives.

From the WildFly perspective there is know way from the configuration API to determine the type for a property to set. This is the part that should probably be handled in the logmanager. WildFly will need to set the value to {{null}} once this is solved on the logmanager side.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hztm2v:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Undefining suffix on size-rotating-file-handler sets invalid value on suffix,WFCORE-150,12554418,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,07/Oct/14 12:06 PM,20/Oct/14 4:45 AM,29/Nov/16 3:55 PM,14/Oct/14 7:51 PM,,,,,,,1.0.0.Alpha10,,Logging,,,,,0,,,,,,When the suffix is undefined ({{undefine-attribute(name=suffix)}}) on a {{size-rotating-file-handler}} the value {{undefined}} gets written to the suffix which is invalid. The value needs to be set to null if undefined.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/229,,,,,,0.0,4.0,,1|hztlwn:,9223372036854775807,,,,"1. start out-of-box standalone and connect to CLI
 2. Add size handler
{code}
./subsystem=logging/size-rotating-file-handler=SIZE:add(file={relative-to=""jboss.server.log.dir"", path=""size.log""}, suffix=HH, max-backup-index=2, rotate-size=1k)
./subsystem=logging/root-logger=ROOT:add-handler(name=SIZE)
{code}
 3. Reload a server once or twice to see that rotation works as expected
{code}
[pkremens@dhcp-4-200 log]$ ll
-rw-rw-r--. 1 pkremens pkremens   475 Oct  2 15:43 size.log
-rw-rw-r--. 1 pkremens pkremens  1029 Oct  2 15:43 size.log15.1
-rw-rw-r--. 1 pkremens pkremens  1067 Oct  2 15:43 size.log15.2
{code}
 4. Now undefine the suffix attribute and reload a server
{code}
./subsystem=logging/size-rotating-file-handler=SIZE:undefine-attribute(name=suffix)
{code}",,,,,,,07/Oct/14 3:11 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1148842|https://bugzilla.redhat.com/show_bug.cgi?id=1148842] from ASSIGNED to POST,08/Oct/14 8:09 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1148842|https://bugzilla.redhat.com/show_bug.cgi?id=1148842] from POST to MODIFIED,13/Oct/14 5:10 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1148842|https://bugzilla.redhat.com/show_bug.cgi?id=1148842] from MODIFIED to ON_QA,20/Oct/14 4:45 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1148842|https://bugzilla.redhat.com/show_bug.cgi?id=1148842] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
"Failures in 'resolve-expression"" op appear in server log",WFCORE-149,12554279,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,brian.stansberry,brian.stansberry,06/Oct/14 11:08 AM,10/May/16 3:55 PM,29/Nov/16 3:55 PM,21/Mar/16 9:00 PM,,,,,,,2.2.0.CR1,3.0.0.Alpha1,Domain Management,,,,,0,,,,,,"I happened to notice this in a server log:

11:53:48,854 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""resolve-expression"") failed - address: ([]) - failure description: ""WFLYCTL0211: Cannot resolve expression 'expression \""${unresolvable}\""' -- java.lang.IllegalStateException: Failed to resolve expression: ${unresolvable}""

That failure shouldn't end up in the server log; it's just a client mistake unrelated to server operation.

A guess is that it's logged because the OFE has the ISE attached as a cause, in which case a simple fix is to not attach the ISE, which adds no value.

Note the handler has a catch block above the one that throws this OFE that handles a SecurityException case. In that case it *may* be appropriate for something to appear in the logs, assuming tracing how the SE can happen indicates it could be triggered by a user fishing for an exploit. In that case a direct WARN in the log from the ResolveExpressionHandler instead of attaching the SE to the OFE and letting the OperationContext log an ERROR may be more appropriate.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/1354,,,,,,0.0,1.0,,1|hztl13:,9223372036854775807,,,,,,,,,,,"06/Oct/14 11:12 AM;brian.stansberry;My theory about the logging happening because a cause was attached is incorrect. It's logged because it happens at Stage.RUNTIME. RUNTIME OFEs are logged as there is the potential they have disrupted the server.

Solution is to not throw the OFE but rather to use context.getFailureDescription() to report the failure to the client.",,,,,,,,,,,,,,,,,,,,,,,,,,
CLI run-batch command cannot process files with comments or blank lines,WFCORE-145,12554005,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,02/Oct/14 9:28 AM,26/Nov/14 8:02 AM,29/Nov/16 3:55 PM,26/Nov/14 8:02 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"In the JBoss CLI tool, the ""run-batch --file=script.cli"" command cannot
successfully process lines that start with ""#"" or blank lines. Comments and
blank lines help readability when creating cli batch scripts.

However, running the batch file containing comments/blank lines as a parameter
to jboss-cli.sh works just fine (./jboss-cli.sh -c --file=script.cli). This
difference in accepted syntax creates some confusion for users who are new to
the CLI tool.",,,,,,,,,,,,,,,,,,WFCORE-146,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1148642,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/250,https://github.com/wildfly/wildfly-core/pull/357,,,,,0.0,7.0,,1|hztjhj:,9223372036854775807,,,,,,,,,,,02/Oct/14 9:32 AM;aloubyansky;To be able to run the testsuite we need WFCORE-146 fixed.,20/Nov/14 11:21 AM;jira-bugzilla-migration;Alexey Loubyansky <olubyans@redhat.com> changed the Status of [bug 1148642|https://bugzilla.redhat.com/show_bug.cgi?id=1148642] from NEW to POST,21/Nov/14 12:24 PM;aloubyansky;The second PR fixes the verbose argument handling.,24/Nov/14 3:23 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1148642|https://bugzilla.redhat.com/show_bug.cgi?id=1148642] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1148642|https://bugzilla.redhat.com/show_bug.cgi?id=1148642] from MODIFIED to ON_QA,26/Nov/14 7:07 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1148642|https://bugzilla.redhat.com/show_bug.cgi?id=1148642] from ON_QA to VERIFIED,26/Nov/14 8:02 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,
WhoAmI operation definition does not need setReplyValueType on response,WFCORE-143,12553967,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,02/Oct/14 5:50 AM,07/Oct/14 12:03 PM,29/Nov/16 3:55 PM,07/Oct/14 12:03 PM,,,,,,,1.0.0.Alpha9,,Domain Management,Security,,,,0,,,,,,The reply type is STRING so setReplyValueType is not required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/221,,,,,,0.0,0.0,,1|hztj9b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The Resource for a deployment whose 'persistent' attribute is 'false' does not return 'true' from isRuntime(),WFCORE-140,12553888,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,01/Oct/14 1:21 PM,08/Oct/14 11:17 AM,29/Nov/16 3:55 PM,08/Oct/14 11:17 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha10,,Domain Management,,,,,0,,,,,,"Scanner managed deployments have the deployment resource's 'persistent' attribute set to 'false'. This results in the StandaloneXml not persisting the resource to XML, but that depends on custom logic in StandaloneXml that reads the attribute.

The Resource for these deployments should return 'true' from isRuntime() so callers can decided about this without needing internal knowledge of the resource attributes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/219,,,,,,0.0,0.0,,1|hztisf:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a new error message for suffix attribute on size-rotating-file-handler ,WFCORE-136,12553763,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,jamezp,jamezp,30/Sep/14 11:46 AM,09/Oct/14 9:49 AM,29/Nov/16 3:55 PM,07/Oct/14 11:40 AM,,,,,,,1.0.0.Alpha9,,Logging,,,,,0,,,,,,"As part of WFCORE-113, the suffix attribute on size-rotating-file-handler has a little bit different functionality than on other handlers (seconds or milliseconds are allowed). However the validation error message is the same as on other handlers (""seconds or milliseconds are not allowed"").",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1147806,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/211,,,,,,0.0,4.0,,1|hzti1j:,9223372036854775807,,,,,,,,,,,30/Sep/14 1:06 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1147806|https://bugzilla.redhat.com/show_bug.cgi?id=1147806] from ASSIGNED to POST,01/Oct/14 3:04 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1147806|https://bugzilla.redhat.com/show_bug.cgi?id=1147806] from POST to MODIFIED,07/Oct/14 8:40 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1147806|https://bugzilla.redhat.com/show_bug.cgi?id=1147806] from MODIFIED to ON_QA,09/Oct/14 9:49 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1147806|https://bugzilla.redhat.com/show_bug.cgi?id=1147806] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Make sure CLIWrapper doesn't use default encoding,WFCORE-134,12553677,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ehugonnet,ehugonnet,ehugonnet,30/Sep/14 8:12 AM,26/Nov/14 5:59 AM,29/Nov/16 3:55 PM,30/Sep/14 4:20 PM,,,,,,,1.0.0.Alpha9,,,,,,,0,,,,,,"CLIWrapper is using the default encoding which might lead to issue with non US locales.
Also take advantage of this fix to remove some hard coded strings from tests.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=980923,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/210,,,,,,0.0,7.0,,1|hzthin:,9223372036854775807,,,,,,,,,,,30/Sep/14 2:22 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from POST to MODIFIED,07/Oct/14 8:39 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from MODIFIED to ON_QA,27/Oct/14 10:27 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from ON_QA to ASSIGNED,21/Nov/14 12:10 PM;jira-bugzilla-migration;Emmanuel Hugonnet (ehsavoie) <ehugonne@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from ASSIGNED to POST,22/Nov/14 5:45 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from POST to MODIFIED,25/Nov/14 3:28 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from MODIFIED to ON_QA,26/Nov/14 5:59 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 980923|https://bugzilla.redhat.com/show_bug.cgi?id=980923] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,
CLI -connect option throws full stacktrace exception,WFCORE-133,12553649,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,gonthim,gonthim,gonthim,30/Sep/14 4:31 AM,03/Dec/14 2:07 PM,29/Nov/16 3:55 PM,03/Dec/14 2:07 PM,1.0.0.Alpha8,,,,,,1.0.0.Alpha14,,CLI,,,,,0,,,,,,"Full stacktrace is printed for exceptions that occur before the CLI connects to a server.

Instead, only the exception messages should be printed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/209,,,,,,0.0,1.0,,1|hzthcn:,9223372036854775807,,,,,,,,,,,30/Sep/14 11:47 AM;brian.stansberry;Please link this to the BZ so we know where the request is coming from. Thanks.,,,,,,,,,,,,,,,,,,,,,,,,,,
BoundedQueueThreadPoolWriteAttributeHandler does not deal with undefined core-threads correctly,WFCORE-132,12553627,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,29/Sep/14 8:58 PM,24/Oct/14 4:31 AM,29/Nov/16 3:55 PM,01/Oct/14 4:18 PM,1.0.0.Alpha8,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"BoundedQueueThreadPoolWriteAttributeHandler doesn't deal with undefined values for core-threads correctly. It assumes the attribute will be defined, and that's not required.

The attribute doesn't have a fixed default value. Instead, the behavior in add is to set the runtime value to match max-threads of core-threads is undefined. BoundedQueueThreadPoolWriteAttributeHandler should do the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1147067,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/207,,,,,,0.0,4.0,,1|hzth7r:,9223372036854775807,,,,,,,,,,,29/Sep/14 9:09 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1147067|https://bugzilla.redhat.com/show_bug.cgi?id=1147067] from NEW to POST,01/Oct/14 3:01 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1147067|https://bugzilla.redhat.com/show_bug.cgi?id=1147067] from POST to MODIFIED,07/Oct/14 8:40 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1147067|https://bugzilla.redhat.com/show_bug.cgi?id=1147067] from MODIFIED to ON_QA,24/Oct/14 4:31 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1147067|https://bugzilla.redhat.com/show_bug.cgi?id=1147067] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
Overlay does not work for subunits in exploded deployments.,WFCORE-129,12553534,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,baranowb,baranowb,baranowb,29/Sep/14 1:47 AM,12/May/15 2:56 AM,29/Nov/16 3:55 PM,12/May/15 2:55 AM,1.0.0.Alpha8,,,,,,1.0.0.Beta1,,Server,,,,,0,,,,,,"If deployment is exploded and has subdeployments overlay wont work on files contained in said subdeployments.

Reproducers: https://github.com/baranowb/wildfly/tree/WFCORE-83-TESTS",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1147353,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/334,https://github.com/wildfly/wildfly/pull/6961,,,,,0.0,8.0,,1|hztgnb:,9223372036854775807,,,,,,,,,,,29/Sep/14 1:50 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from NEW to ASSIGNED,29/Sep/14 1:57 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147353|https://bugzilla.redhat.com/show_bug.cgi?id=1147353] from NEW to ASSIGNED,30/Sep/14 1:35 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147353|https://bugzilla.redhat.com/show_bug.cgi?id=1147353] from ASSIGNED to NEW,06/Oct/14 9:35 AM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1147353|https://bugzilla.redhat.com/show_bug.cgi?id=1147353] from NEW to CLOSED,18/Nov/14 4:24 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from ASSIGNED to POST,"01/May/15 11:47 AM;brian.stansberry;I'm rescheduling items not completed out of 1.0.0 and into 2.0. It sounds like this might be already done though as part of WFCORE-547. If so, please resolve.",12/May/15 2:36 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1147352|https://bugzilla.redhat.com/show_bug.cgi?id=1147352] from POST to NEW,12/May/15 2:55 AM;baranowb;WFCORE-547 incorporates fix for this.,,,,,,,,,,,,,,,,,,,
Nonexistent ldap group causes authentication to fail in security-realm ,WFCORE-128,12543104,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dehort,dehort,06/Jun/14 1:47 PM,13/Mar/15 3:03 PM,29/Nov/16 3:55 PM,30/Sep/14 7:53 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"The LdapGroupSearcher code will fail if it tries to lookup a group that 
does not exist on the local ldap server.

This can happen when the ldap systems are configured as trusted domains.  
Even though the security-realm is not configured to use the trusted domain
(it is configured to only look at a single ldap server), the 
user's entry on one ldap server could point at a group that exists on 
the other (trusted) ldap server.

The LdapGroupSearcher code attempts to lookup this role and it fails.  This 
failure is sent back to the http server which results in an HTTP 500 error
and leaves the user with no way to authenticate/login.

There is currently not a way to tell the group searcher code to ignore the 
group/role that cannot be found.

2014-06-06 12:44:39,819 TRACE [org.jboss.as.domain.management.security] (XNIO-1 task-1) Group found with distinguishedName=cn=TestManagedRole,ou=People,dc=my-ds-domain,dc=com
2014-06-06 12:44:39,821 TRACE [org.jboss.as.domain.management.security] (XNIO-1 task-1) Failure supplementing Subject: javax.naming.NameNotFoundException: [LDAP: error code 32 - No Such Object]; remaining name 'cn=TestManagedRole,ou=People,dc=my-ds-domain,dc=com'
        at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3112) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:3033) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2840) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.c_getAttributes(LdapCtx.java:1332) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:231) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:139) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:127) [rt.jar:1.7.0_45]
        at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) [rt.jar:1.7.0_45]
        at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) [rt.jar:1.7.0_45]
        at org.jboss.as.domain.management.security.LdapGroupSearcherFactory$PrincipalToGroupSearcher.search(LdapGroupSearcherFactory.java:256) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapGroupSearcherFactory$PrincipalToGroupSearcher.search(LdapGroupSearcherFactory.java:191) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapCacheService$NoCacheCache.search(LdapCacheService.java:223) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroupEntries(LdapSubjectSupplementalService.java:218) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroups(LdapSubjectSupplementalService.java:195) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroups(LdapSubjectSupplementalService.java:188) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.supplementSubject(LdapSubjectSupplementalService.java:163) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.SecurityRealmService$1.createSubjectUserInfo(SecurityRealmService.java:200) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:155) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:120) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at io.undertow.security.impl.BasicAuthenticationMechanism.authenticate(BasicAuthenticationMechanism.java:110) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at org.jboss.as.domain.http.server.security.AuthenticationMechanismWrapper.authenticate(AuthenticationMechanismWrapper.java:57) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:281) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:298) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:268) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:131) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:106) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:99) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:50) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_45]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_45]
        at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_45]

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1105677,https://bugzilla.redhat.com/show_bug.cgi?id=1105619,https://bugzilla.redhat.com/show_bug.cgi?id=1127938,https://bugzilla.redhat.com/show_bug.cgi?id=1128176,https://bugzilla.redhat.com/show_bug.cgi?id=1143052,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/205,,,,,,0.0,11.0,,1|hzo4i7:,201014,,,,"Create a user in ldap that has a ""bogus"" group.  Log into the admin console as that user.  Once the LdapGroupSearcher code looks up the user, it will fail when it attempts to lookup the ""bogus"" group.",,,,,,,06/Jun/14 2:19 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1105677|https://bugzilla.redhat.com/show_bug.cgi?id=1105677] from NEW to ASSIGNED,06/Jun/14 5:12 PM;jira-bugzilla-migration;Derek Horton <dehort@redhat.com> changed the Status of [bug 1105619|https://bugzilla.redhat.com/show_bug.cgi?id=1105619] from NEW to POST,12/Jun/14 4:45 AM;jira-bugzilla-migration;Carlo de Wolf <cdewolf@redhat.com> changed the Status of [bug 1105619|https://bugzilla.redhat.com/show_bug.cgi?id=1105619] from POST to CLOSED,20/Aug/14 2:08 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1128176|https://bugzilla.redhat.com/show_bug.cgi?id=1128176] from NEW to POST,21/Aug/14 7:14 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1128176|https://bugzilla.redhat.com/show_bug.cgi?id=1128176] from POST to MODIFIED,02/Sep/14 5:23 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1128176|https://bugzilla.redhat.com/show_bug.cgi?id=1128176] from ON_QA to VERIFIED,29/Sep/14 7:40 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1105677|https://bugzilla.redhat.com/show_bug.cgi?id=1105677] from ASSIGNED to POST,30/Sep/14 7:53 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1105677|https://bugzilla.redhat.com/show_bug.cgi?id=1105677] from POST to MODIFIED,07/Oct/14 8:39 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1105677|https://bugzilla.redhat.com/show_bug.cgi?id=1105677] from MODIFIED to ON_QA,13/Oct/14 2:37 PM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1128176|https://bugzilla.redhat.com/show_bug.cgi?id=1128176] from VERIFIED to CLOSED,14/Oct/14 1:57 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1105677|https://bugzilla.redhat.com/show_bug.cgi?id=1105677] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,
Security realm cache definitions not possible for LDAP prinicipal to group group loading.,WFCORE-125,12553322,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,25/Sep/14 6:07 AM,02/Oct/14 4:16 AM,29/Nov/16 3:55 PM,29/Sep/14 10:14 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha9,,Domain Management,Security,,,,0,,,,,,"
It's not possible to configure LDAP cache in security realms under ""authorization=ldap/group-search=principal-to-group""

Possible reason:
The LdapCacheResourceDefinition is not registered under the org.jboss.as.domain.management.security.PrincipalToGroupResourceDefinition

When I try to add the cache configuration manually to standalone.xml, server doesn't start and reports:

15:23:44,619 ERROR [org.jboss.as.controller] (Controller Boot Thread) JBAS014629: No resource definition is registered for address [
    (""core-service"" => ""management""),
    (""security-realm"" => ""JBossTest""),
    (""authorization"" => ""ldap""),
    (""group-search"" => ""principal-to-group""),
    (""cache"" => ""by-search-time"")
]
15:23:44,621 FATAL [org.jboss.as.server] (Controller Boot Thread) JBAS015957: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1146117,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/204,,,,,,0.0,4.0,,1|hztfev:,9223372036854775807,,,,,,,,,,,26/Sep/14 12:08 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1146117|https://bugzilla.redhat.com/show_bug.cgi?id=1146117] from ASSIGNED to POST,29/Sep/14 5:26 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1146117|https://bugzilla.redhat.com/show_bug.cgi?id=1146117] from POST to MODIFIED,29/Sep/14 6:59 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1146117|https://bugzilla.redhat.com/show_bug.cgi?id=1146117] from MODIFIED to ON_QA,02/Oct/14 4:16 AM;jira-bugzilla-migration;Josef Cacek <jcacek@redhat.com> changed the Status of [bug 1146117|https://bugzilla.redhat.com/show_bug.cgi?id=1146117] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
The yes/no checking in add-user converts the users input to lower case but not the translated values.,WFCORE-124,12553255,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,24/Sep/14 12:25 PM,02/Oct/14 5:41 AM,29/Nov/16 3:55 PM,25/Sep/14 2:33 AM,,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"The end result is if the translated value contains upper case characters the users input will not match, as an example for German ja and Ja - whatever the user inputs it will be converted to 'ja' but is always compared to 'Ja'.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=901193,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/198,,,,,,0.0,4.0,,1|hztf2f:,9223372036854775807,,,,,,,,,,,24/Sep/14 2:21 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 901193|https://bugzilla.redhat.com/show_bug.cgi?id=901193] from ASSIGNED to POST,26/Sep/14 8:05 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 901193|https://bugzilla.redhat.com/show_bug.cgi?id=901193] from POST to MODIFIED,29/Sep/14 6:59 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 901193|https://bugzilla.redhat.com/show_bug.cgi?id=901193] from MODIFIED to ON_QA,02/Oct/14 5:41 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 901193|https://bugzilla.redhat.com/show_bug.cgi?id=901193] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
"Logging color ""clear"" not accepted by logging subsystem",WFCORE-123,12553164,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,klape,klape,23/Sep/14 6:58 PM,22/Dec/14 7:19 PM,29/Nov/16 3:55 PM,22/Dec/14 7:19 PM,,,,,,,1.0.0.Alpha15,,Logging,,,,,0,,,,,,"{{clear}} is a valid color in the JBoss LogManager {{ColorMap}} class, but it is not accepted in the logging subsystem {{color-map}} attribute pattern.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/407,,,,,,0.0,2.0,,1|hzteiv:,9223372036854775807,,,,,,,,,,Generally {{white}} can be used in place of {{clear}}.,"20/Oct/14 11:42 AM;simonstrom;If 'clear' should be accepted can we just add it to the regexp in PatternFormatterResourceDeffinition.java?

And we should also test it. But I could not think of a way to test it.","20/Oct/14 11:48 AM;klape;Yeah, adding clear to that regexp was the fix I had in mind.  It can be tested by trying to use {{clear}} in the {{color-map}} attribute in the logging subsystem.",,,,,,,,,,,,,,,,,,,,,,,,,
Almost all system property access is outside of a PrivilegedAction,WFCORE-118,12552995,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Rejected,dlofthouse,dlofthouse,dlofthouse,22/Sep/14 12:40 PM,09/Nov/15 11:45 AM,29/Nov/16 3:55 PM,29/Sep/14 10:29 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hztdhz:,9223372036854775807,,,,,,,,,,,29/Sep/14 10:29 AM;dlofthouse;After discussion this is not applicable.,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in add-user help text,WFCORE-117,12552946,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,22/Sep/14 7:08 AM,01/Oct/14 9:44 AM,29/Nov/16 3:55 PM,25/Sep/14 2:34 AM,1.0.0.Alpha8,,,,,,1.0.0.Alpha9,,Domain Management,Security,,,,0,,,,,,"There is a typo in help message of add-user tool.

Version-Release number of selected component (if applicable):
 EAP 6.4.0.DR1.1

How reproducible:
 Always

Steps to Reproduce:
1. ./add-user.sh --help

Actual results:
...
    -sc <value>                         Define the location the server config 
                                        directory.
...


Expected results:
...
    -sc <value>                         Define the location of the server config 
                                        directory.
...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1145036,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/197,,,,,,0.0,4.0,,1|hztd87:,9223372036854775807,,,,,,,,,,,24/Sep/14 11:40 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1145036|https://bugzilla.redhat.com/show_bug.cgi?id=1145036] from ASSIGNED to POST,26/Sep/14 8:05 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1145036|https://bugzilla.redhat.com/show_bug.cgi?id=1145036] from POST to MODIFIED,29/Sep/14 6:59 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1145036|https://bugzilla.redhat.com/show_bug.cgi?id=1145036] from MODIFIED to ON_QA,01/Oct/14 9:44 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1145036|https://bugzilla.redhat.com/show_bug.cgi?id=1145036] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
CLI NullPointerException reconnecting after server restart,WFCORE-115,12552731,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,dlofthouse,dlofthouse,19/Sep/14 4:49 AM,30/Sep/14 7:44 AM,29/Nov/16 3:55 PM,30/Sep/14 7:44 AM,,,,,,,1.0.0.Alpha9,,CLI,,,,,0,,,,,,"It is always possible this is in code I have added to the CLI so feel free to assign it back if that turns out to be the case ;-)

Steps: -
 - Start wildfly-core
 - Start the CLI and connect to the local server, either with -c or connect command.
 - Shut down server with Ctrl-C and start again
 - Enter command in CLI

Result: -

{noformat}
[standalone@localhost:9990 /] connect
Failed to handle 'connect': java.lang.NullPointerException
{noformat}

Restarting the CLI it is able to connect.","This is based on a clean build this morning, latest commit 83f1bca9ecb6b7676c3882400d2a6889e9ef0b61
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/203,,,,,,0.0,2.0,,1|hztc1r:,9223372036854775807,,,,,,,,,,,"26/Sep/14 10:00 AM;aloubyansky;Actually, the restart is not required to reproduce this. This was a consequence of the PR for https://issues.jboss.org/browse/WFCORE-73",30/Sep/14 7:44 AM;aloubyansky;Merged now.,,,,,,,,,,,,,,,,,,,,,,,,,
Get RuntimeVaultReader into WildFly Core,WFCORE-114,12552696,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Blocker,Done,ehugonnet,brian.stansberry,brian.stansberry,18/Sep/14 3:54 PM,20/May/15 4:32 AM,29/Nov/16 3:55 PM,08/May/15 2:20 PM,1.0.0.Alpha8,,,,,,1.0.0.CR2,,Domain Management,,,,,0,,,,,,"The only real implementation of AbstractVaultReader isn't in wildfly-core; it's in the wildfly-full security subsystem module.

This means WildFly Core currently doesn't really support vault expressions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/679,https://github.com/wildfly/wildfly-core/pull/680,,,,,0.0,3.0,,1|hztbuf:,9223372036854775807,,,,,,,,,,,"14/Apr/15 10:39 AM;ctomc;Whoever is doing this, lets just make sure we don't bring picketbox dependency in when this is moved.","01/May/15 11:14 AM;brian.stansberry;I'm deferring this to CR2, although it may get bumped to 2.0.0.Alpha1. The question is whether we want to bump the size of core by the ~940Kb of picketbox.

Emmanuel, your PR might be valid anyway, as it allows someone building off core to get vault support simply by installing the module. Right now they'd have to go to Full to get vault support.

Elytron may end up being nearly as big as picketbox, so trying to avoid the weight in 1.0.0 may just be delaying the inevitable.

As a tradeoff, we can consider aggressively dropping jboss-common-core, in 1.0, which in production code is only used by domain-management module for Base64. In 2.0 that will switch to JDK 8 provided code. For 1.x we could just fork Base64 stuff into domain-management and drop the 650Kb jboss-common-core.",01/May/15 1:15 PM;ctomc;This change doesn't really require us to bundle picketbox into distro. It is just compile dependency. which is fine.,,,,,,,,,,,,,,,,,,,,,,,,
Long server shut-dow with unresponsive client with opened JNDI Context,WFCORE-112,12551338,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dmlloyd,mnovak,mnovak,08/Sep/14 7:33 AM,20/Jan/15 5:32 AM,29/Nov/16 3:55 PM,03/Oct/14 10:14 AM,,,,,,,,,,,,,,0,remoting,,,,,"Description of problem:
If client with opened JNDI context is disconnected from network, then clean shutdown (ctrl-c) of server takes 15 minutes.
This scenario takes place, when network connections is lost between JMS clients with JNDI context and server. 

Version-Release number of selected component (if applicable):
jboss-remoting-3.3.3.Final-redhat-1.jar

How reproducible:
always

Steps to Reproduce:
1. Start EAP 6.3.1.CP.CR1 on first machine
2. Start client which creates JNDI context on second machine (use attached JNDIContext.java)
3. Disconnect network between client and server
4. Try to cleanly shutdown EAP 6.3.1.CP.CR1 server (by ctrl-c)

Actual results:
It takes 15 minutes for server to shutdown.

Expected results:
Server should shutdown almost immediately.",,,,,,,,,,,,,,,,,,,,,,,,,,,08/Sep/14 7:34 AM;mnovak;JNDIContext.java;https://issues.jboss.org/secure/attachment/12384757/JNDIContext.java,17/Sep/14 3:35 AM;elguardian;testcase.zip;https://issues.jboss.org/secure/attachment/12385164/testcase.zip,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1149618,https://bugzilla.redhat.com/show_bug.cgi?id=1149623,https://bugzilla.redhat.com/show_bug.cgi?id=1149621,,,Perform,,,,,,,,,,,,,https://github.com/jboss-remoting/jboss-remoting/pull/24,,,,,,2.0,24.0,,1|hzt4un:,9223372036854775807,,,,,,,,,,,"17/Sep/14 3:35 AM;elguardian;Attached the maven project to reproduce the problem.
{noformat}
mvn compile
mvn exec:java -Dexec.mainClass=""example.Test""
{noformat}
for shuting down the network (in linux) during the test
{noformat}
ip link set lo down (disconnection)
ip link set lo up (restore the connection)
{noformat}","17/Sep/14 8:31 AM;dmlloyd;This is not a remoting problem, it's a container problem.  Do not move this bug again.","17/Sep/14 9:22 AM;elguardian;The problem is that the container is waiting the remoting component to shut down. This is not happening because the opened connection has been broken and it's not possible to close it normally. The OS closes the socket (triggered by a timeout - 15 min). After that, the EndpointService signals the server as complete and the server shuts down completely.
The test case attached uses the component only and it shows the same behavior. ","17/Sep/14 10:43 AM;dmlloyd;The Remoting server integration component does not adequately handle this situation on the server side, and this code is in WildFly, not in Remoting itself.",19/Sep/14 5:54 AM;elguardian;This is happening in both sides client and server. The client has the same problem during the closeAsync operation.,30/Sep/14 5:18 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1139197|https://bugzilla.redhat.com/show_bug.cgi?id=1139197] from NEW to ASSIGNED,06/Oct/14 5:16 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1139202|https://bugzilla.redhat.com/show_bug.cgi?id=1139202] from NEW to ASSIGNED,06/Oct/14 5:34 AM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1149623|https://bugzilla.redhat.com/show_bug.cgi?id=1149623] from NEW to CLOSED,06/Oct/14 9:22 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1139197|https://bugzilla.redhat.com/show_bug.cgi?id=1139197] from ASSIGNED to MODIFIED,03/Nov/14 5:55 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1139202|https://bugzilla.redhat.com/show_bug.cgi?id=1139202] from ASSIGNED to MODIFIED,06/Nov/14 9:39 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1149618|https://bugzilla.redhat.com/show_bug.cgi?id=1149618] from NEW to ASSIGNED,06/Nov/14 10:22 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1149618|https://bugzilla.redhat.com/show_bug.cgi?id=1149618] from ASSIGNED to POST,07/Nov/14 8:51 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1149618|https://bugzilla.redhat.com/show_bug.cgi?id=1149618] from POST to MODIFIED,11/Nov/14 4:39 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1149621|https://bugzilla.redhat.com/show_bug.cgi?id=1149621] from NEW to ASSIGNED,11/Nov/14 6:02 AM;jira-bugzilla-migration;Enrique Gonzalez Martinez <egonzale@redhat.com> changed the Status of [bug 1149621|https://bugzilla.redhat.com/show_bug.cgi?id=1149621] from ASSIGNED to POST,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1139202|https://bugzilla.redhat.com/show_bug.cgi?id=1139202] from MODIFIED to ON_QA,11/Nov/14 9:00 AM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1149618|https://bugzilla.redhat.com/show_bug.cgi?id=1149618] from MODIFIED to ON_QA,12/Nov/14 9:59 AM;jira-bugzilla-migration;Marek Kopecky <mkopecky@redhat.com> changed the Status of [bug 1149618|https://bugzilla.redhat.com/show_bug.cgi?id=1149618] from ON_QA to VERIFIED,12/Nov/14 3:14 PM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1149621|https://bugzilla.redhat.com/show_bug.cgi?id=1149621] from POST to MODIFIED,14/Nov/14 10:19 AM;jira-bugzilla-migration;Ondřej Kalman <okalman@redhat.com> changed the Status of [bug 1139202|https://bugzilla.redhat.com/show_bug.cgi?id=1139202] from ON_QA to VERIFIED,16/Jan/15 6:26 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1149621|https://bugzilla.redhat.com/show_bug.cgi?id=1149621] from MODIFIED to ON_QA,16/Jan/15 6:27 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1139197|https://bugzilla.redhat.com/show_bug.cgi?id=1139197] from MODIFIED to ON_QA,20/Jan/15 3:43 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1149621|https://bugzilla.redhat.com/show_bug.cgi?id=1149621] from ON_QA to VERIFIED,20/Jan/15 5:32 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> changed the Status of [bug 1139197|https://bugzilla.redhat.com/show_bug.cgi?id=1139197] from ON_QA to VERIFIED,,,
Property expressions resolved before the PatternFormatter can resolve them,WFCORE-110,12502502,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,,jamezp,jamezp,jamezp,08/Oct/13 7:22 PM,11/Nov/16 4:28 PM,29/Nov/16 3:55 PM,,,,,,,,,,Logging,,,,,1,,,,,,System property expressions defined in {{pattern-formatter}} or {{formatter}} attributes are processed by the {{AttributeDefinition}} rather than left and processed by the {{PatternFormatter}}. This results in invalid pattern values being used and stops the server from logging.,,,,,,,,,,,,,,,,,,LOGMGR-144,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzj43b:,171815,,,,"Define a pattern formatter with a property expression embedded;
{code}
%${example.property:defaultValue}
{code}

The AD will resolve it and you'll end up with {{%defaultValue}} in the pattern.",,,,,,Don't use system properties in the formatter.,08/Oct/13 7:23 PM;dmlloyd;This is correct behavior.  It is not correct to leave expression parsing until a later stage and in fact will become disallowed in the future.,"08/Oct/13 7:28 PM;jamezp;So a logging format pattern like the following should not be allowed?

{code}
%d{yyyy-MM-dd HH:mm:ss,SSS} %${server.name:localhost} %-5p [%c] (%t) %s%E%n
{code}

Maybe for the pattern I should have chose something better then {{%$}}. It just seemed the logical thing to do to keep it standard with our other property expressions.",16/Sep/14 2:08 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 994744|https://bugzilla.redhat.com/show_bug.cgi?id=994744] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect use of ReloadRequiredWriteAttributeHandler for host resources,WFCORE-108,12545165,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,soul2zimate,brian.stansberry,brian.stansberry,30/Jun/14 4:36 PM,05/Nov/14 8:51 AM,29/Nov/16 3:55 PM,30/Sep/14 4:12 PM,,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,"ReloadRequiredWriteAttributeHandler inherits the default behavior of AbstractWriteAttributeHandler.requiresRuntime(), which is to only process Stage.RUNTIME if context.isNormalServer(). So any use in host resources needs to override that behavior. This isn't done in at least some places. See https://bugzilla.redhat.com/show_bug.cgi?id=1085228 for an example.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1085228,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/81,,,,,,0.0,10.0,,1|hzs58n:,9223372036854775807,,,,,,,,,,,"09/Jul/14 9:21 AM;brian.stansberry;What needs to happen here first is an analysis of the resources in the tree starting at /host=* but ignoring /host=*/server=* to look for cases where

1) the :add handler for the resource updates the runtime at boot. Ignore cases where the resource is just storing data for use on a server it creates, without making use of it in the HC's own runtime
2) One or more attributes use ReloadRequiredWriteAttributeHandler
3) but they don't override requiresRuntime to use an appropriate check.

I don't see any reason why the OperationContext interface needs to be changed.

The resources not under /host=* are not relevant as they only update the model. Stuff under /core-service=management may be an exception but that can be examined later.

Once that first part is done we can look into other similar cases.",27/Oct/14 3:13 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from NEW to ASSIGNED,27/Oct/14 8:09 AM;jira-bugzilla-migration;Chao Wang <chaowan@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ASSIGNED to POST,29/Oct/14 4:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from POST to MODIFIED,03/Nov/14 5:20 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from MODIFIED to ON_QA,05/Nov/14 8:42 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ON_QA to VERIFIED,05/Nov/14 8:42 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ON_QA to VERIFIED,05/Nov/14 8:42 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ON_QA to VERIFIED,05/Nov/14 8:42 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ON_QA to VERIFIED,05/Nov/14 8:51 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1085228|https://bugzilla.redhat.com/show_bug.cgi?id=1085228] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,
"logging-profile works for a servlet, but doesn't for a JSP",WFCORE-101,12525384,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jamezp,osamu.nagano,osamu.nagano,17/Nov/13 8:52 PM,25/Sep/14 10:27 AM,29/Nov/16 3:55 PM,18/Sep/14 12:39 PM,,,,,,,1.0.0.Alpha9,,Logging,,,,,0,,,,,,"Suppose the following logging-profile has been set in logging subsystem, and a web app has a proper entry in its MANIFEST.MF ({{Logging-Profile: logone}}).  Then all messages via ""com.example.logone"" logger should go into a file, logone.log.  It does so with a logger got in a servlet, but it doesn't work a logger got in a JSP.

{code}
            <logging-profiles>
                <logging-profile name=""logone"">
                    <file-handler name=""logone"">
                        <level name=""INFO""/>
                        <file relative-to=""jboss.server.log.dir"" path=""logone.log""/>
                    </file-handler>
                    <logger category=""com.example.logone"">
                        <level name=""INFO""/>
                    </logger>
                    <root-logger>
                        <level name=""INFO""/>
                        <handlers>
                            <handler name=""logone""/>
                        </handlers>
                    </root-logger>
                </logging-profile>
            </logging-profiles>
{code}",,,,,,,,,,,,,,,,,,,,,LOGMGR-111,,,,,,17/Nov/13 8:54 PM;osamu.nagano;logone.zip;https://issues.jboss.org/secure/attachment/12378989/logone.zip,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1031448,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/180,,,,,,1.0,9.0,,1|hzkuyn:,181987,,,,"# Set the logging-profile in the description to a standalone instance.
# Deploy attached web app, logone/target/logone.war.
# Access a servlet, {{curl http://localhost:8080/logone/HogeServlet}}.  Its log message appears in standalone/log/logone.log, as expected.
# Access a JSP, {{curl http://localhost:8080/logone/index.jsp}}.  Its log message appears in standalone/log/server.log and CONSOLE, unexpectedly.",,,,,,,"17/Nov/13 8:54 PM;osamu.nagano;A maven project with a binary, target/logone.war.","17/Nov/13 9:00 PM;osamu.nagano;Loggers are acquired as {{Logger logger = Logger.getLogger(""com.example.logone"")}} via java.util.logger API in both cases.  As in the output responses, {{ClassLoader}} and {{LogManager}} are the same but {{org.jboss.logmanager.LogContext}} is different.","17/Nov/13 9:10 PM;osamu.nagano;Similar issue, but not sure if it is the same.","04/Aug/14 3:42 AM;dpospisil;The issue seems to be in ClassLoaderLogContextSelector. The LogContextSelector scans caller stacktrace to see if there is a class for which a classloader has a registered logging context. In other words it scan a stacktrace for a class from given deployment. In case of JSP page, there is no such class as the JSP servlet handler is loaded using custom classloader. Posible solution is to scan for parent CL as well.

",04/Aug/14 5:46 AM;jira-bugzilla-migration;Dominik Pospisil <dpospisi@redhat.com> changed the Status of [bug 1031448|https://bugzilla.redhat.com/show_bug.cgi?id=1031448] from NEW to ASSIGNED,11/Sep/14 4:18 PM;jira-bugzilla-migration;James Perkins <jperkins@redhat.com> changed the Status of [bug 1031448|https://bugzilla.redhat.com/show_bug.cgi?id=1031448] from ASSIGNED to POST,17/Sep/14 3:38 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1031448|https://bugzilla.redhat.com/show_bug.cgi?id=1031448] from POST to MODIFIED,23/Sep/14 8:44 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1031448|https://bugzilla.redhat.com/show_bug.cgi?id=1031448] from MODIFIED to ON_QA,25/Sep/14 10:27 AM;jira-bugzilla-migration;Nikoleta Ziakova <nziakova@redhat.com> changed the Status of [bug 1031448|https://bugzilla.redhat.com/show_bug.cgi?id=1031448] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,
standalone.bat script does not parse JAVA_OPTS containing '|' symbol properly,WFCORE-99,12552197,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jaysensharma,jaysensharma,15/Sep/14 10:55 AM,07/Nov/14 9:03 AM,29/Nov/16 3:55 PM,07/Nov/14 9:03 AM,1.0.0.Alpha6,,,,,,1.0.0.Alpha9,,Scripts,,,,,0,,,,,,"*Scenario -1*
- With the following line of JAVA_OPTS in ""standalone.bat.conf"" file 
{code}
set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost|127.0.0.1|10.10.10.*""
{code}


Error while starting WildFly
{code}
C:\wildfly-9.0.0.Alpha1-SNAPSHOT\bin>standalone.bat
Calling ""C:\wildfly-9.0.0.Alpha1-SNAPSHOT\bin\standalone.conf.bat""
Setting JAVA property to ""C:\JDKs\jdk1.7.0_67\bin\java""
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
{code}


*Scenario -2*
- In Windows  ""^"" sign is the escape character so we tried altering the JAVA_OPTS as following in the ""standalone.bat.conf"" file:

{code}
set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost^|127.0.0.1^|10.10.10.*""
{code}

Now WildFly server starts but still we see the following messages in windows console:
{code}
C:\wildfly-9.0.0.Alpha1-SNAPSHOT\bin>standalone.bat
Calling ""C:\wildfly-9.0.0.Alpha1-SNAPSHOT\bin\standalone.conf.bat""
Setting JAVA property to ""C:\JDKs\jdk1.7.0_67\bin\java""
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: ""C:\wildfly-9.0.0.Alpha1-SNAPSHOT""

  JAVA: ""C:\JDKs\jdk1.7.0_67\bin\java""

  JAVA_OPTS: ""-client -Dprogram.name=standalone.bat -Xms64M -Xmx512M -XX:MaxPermSize=256M -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=
org.jboss.byteman -Dhttp.nonProxyHosts=localhost^|127.0.0.1^|10.10.10.*""

===============================================================================

15:50:35,453 INFO  [org.jboss.modules] (main) JBoss Modules version 1.3.4.Final
15:50:35,781 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.2.Final
15:50:35,953 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly 1.0.0.Alpha5 ""Kenny"" starting
{code}

*NOTE*: It is also not possible to pass such JAVA_OPTS via command line, because it causes the same error:

{code}
C:\wildfly-9.0.0.Alpha1-SNAPSHOT\bin>standalone.bat -Dhttp.nonProxyHosts=localhost|127.0.0.1|10.10.10.*

'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
{code}",Windows OS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1145185,https://bugzilla.redhat.com/show_bug.cgi?id=1149971,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,3.0,,1|hzt90v:,9223372036854775807,,,,"- Edit the ""wildfly-9.0.0.Alpha1-SNAPSHOT\bin\standalone.conf.bat"" by adding the following line of entry in it:
{code}
set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost|127.0.0.1|10.10.10.*""
{code}

OR

{code}
set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost^|127.0.0.1^|10.10.10.*""
{code}

- Restart WildFly and notice the error messages in the Windows Console.",,,,,,,"15/Sep/14 11:04 AM;jaysensharma;- I edited the ""standalone.bat"" script a bit as mentioned in the pull request [1] and it works after editing i used the following format of JAVA_OPTS using '^' escape character.
{code}
set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost^|127.0.0.1^|10.10.10.*""
{code}
 
- As i am not good in windows scripting.  So not sure if the the fix which i used at my end is OK or not, But that worked for me hence sending a pull request for review.

[1] https://github.com/wildfly/wildfly-core/pull/179",23/Sep/14 2:29 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1145185|https://bugzilla.redhat.com/show_bug.cgi?id=1145185] from NEW to ASSIGNED,07/Oct/14 12:53 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1149971|https://bugzilla.redhat.com/show_bug.cgi?id=1149971] from ASSIGNED to CLOSED,,,,,,,,,,,,,,,,,,,,,,,,
Remoting is using the wrong protocol names,WFCORE-98,12552191,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Duplicate Issue,dlofthouse,dmlloyd,dmlloyd,15/Sep/14 10:22 AM,10/Sep/15 4:36 PM,29/Nov/16 3:55 PM,10/Sep/15 4:36 PM,,,,,,,,,Domain Management,Remoting,,,,0,,,,,,"The Remoting protocol names are presently:

* remoting
* http-remoting
* https-remoting

They should be:

* remote
* remote+http
* remote+https

respectively.",,,,,,,,,,,,,,,,,,,,WFCORE-296,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzt8zr:,9223372036854775807,,,,,,,,,,,10/Sep/15 2:32 PM;brian.stansberry;Isn't this a duplicate of WFCORE-296?,,,,,,,,,,,,,,,,,,,,,,,,,,
Bash scripts don't allow for spaces in the JBOSS_HOME directory,WFCORE-97,12552038,Bug,Closed,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Out of Date,jamezp,jamezp,jamezp,12/Sep/14 9:14 PM,17/Dec/14 4:31 PM,29/Nov/16 3:55 PM,17/Dec/14 4:31 PM,,,,,,,,,Scripts,,,,,0,,,,,,If there is a space in the {{JBOSS_HOME}} directory {{standalone.sh}} fails to start. All scripts should be reviewed to ensure they work with valid directories.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzt8fr:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PrimitiveListAttributeDefinition.Builder copy constructor does not copy the listValidator,WFCORE-95,12551828,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,jmesnil,jmesnil,jmesnil,11/Sep/14 7:57 AM,19/Sep/14 2:37 AM,29/Nov/16 3:55 PM,19/Sep/14 2:37 AM,1.0.0.Alpha5,,,,,,1.0.0.Alpha9,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/170,,,,,,0.0,2.0,,1|hzt77b:,9223372036854775807,,,,,,,,,,,11/Sep/14 8:12 AM;jmesnil;PR for master branch,19/Sep/14 2:37 AM;jmesnil;PR merged in master branch,,,,,,,,,,,,,,,,,,,,,,,,,
cli deploy command with unpaired quotation mark causes StringIndexOutOfBoundsException,WFCORE-92,12551409,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,jaysensharma,jaysensharma,09/Sep/14 1:58 AM,19/Sep/14 4:41 AM,29/Nov/16 3:55 PM,11/Sep/14 8:32 AM,1.0.0.Alpha5,1.0.0.Alpha6,,,,,1.0.0.Alpha6,,CLI,,,,,0,,,,,,"- CLI ""deploy"" command with open quote and tab for completion results in a ""StringIndexOutOfBoundsException"" exception

- Type 'connect' to connect to the server or 'help' for the list of supported commands.
{code}
[disconnected /] connect
[standalone@localhost:9999 /] deploy ""d<Tab>

[standalone@localhost:9990 /] deploy ""djava.lang.StringIndexOutOfBoundsException: String index out of range: -1
        at java.lang.String.substring(String.java:1958)
        at org.jboss.as.cli.handlers.WindowsFilenameTabCompleter.complete(WindowsFilenameTabCompleter.java:54)
        at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:229)
        at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)
        at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)
        at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)
        at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:102)
        at org.jboss.aesh.console.Console.complete(Console.java:1155)
        at org.jboss.aesh.console.Console.parseOperation(Console.java:550)
        at org.jboss.aesh.console.Console.read(Console.java:452)
        at org.jboss.aesh.console.Console.read(Console.java:346)
        at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:178)
        at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1283)
        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:254)
        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.jboss.modules.Module.run(Module.java:312)
        at org.jboss.modules.Main.main(Main.java:460)
Press any key to continue . . .
{code}",* Windows Operating System is Must *,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1139515,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/165,,,,,,0.0,5.0,,1|hzt58v:,9223372036854775807,,,,"- Use a *Windows OS* (like Windows 2008 R2) and install WildFly in it.
- Using ""jboss-cli.bat""  script connect to JBoss and then try the following command which contains incomplete quotation mark then press tab.
{code}
deploy ""test<TAB>
{code}",,,,,,"- Use paired """" quotation mark with deploy cli command.","09/Sep/14 2:12 AM;jaysensharma;Pull Request Sent:  
https://github.com/wildfly/wildfly-core/pull/165",11/Sep/14 12:33 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1139515|https://bugzilla.redhat.com/show_bug.cgi?id=1139515] from NEW to POST,15/Sep/14 3:59 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1139515|https://bugzilla.redhat.com/show_bug.cgi?id=1139515] from POST to MODIFIED,16/Sep/14 3:16 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1139515|https://bugzilla.redhat.com/show_bug.cgi?id=1139515] from MODIFIED to ON_QA,19/Sep/14 4:41 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1139515|https://bugzilla.redhat.com/show_bug.cgi?id=1139515] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Rare fail of org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestCase due to TimeoutException,WFCORE-86,12551176,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dpospisil,dpospisil,dpospisil,05/Sep/14 4:36 AM,19/Sep/14 4:22 AM,29/Nov/16 3:55 PM,08/Sep/14 4:39 AM,,,,,,,,,Domain Management,,,,,0,,,,,,"
java.lang.Exception: Http request failed.
	at org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestCase.checkURL(RolloutPlanTestCase.java:423)
	at org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestCase.testRollbackAcrossGroupsRolloutPlan(RolloutPlanTestCase.java:322)
...
Caused by: java.util.concurrent.TimeoutException
	at java.util.concurrent.FutureTask.get(FutureTask.java:201)
	at org.jboss.as.test.integration.common.HttpRequest.execute(HttpRequest.java:50)
	at org.jboss.as.test.integration.common.HttpRequest.get(HttpRequest.java:80)
	at org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestCase.checkURL(RolloutPlanTestCase.java:420)
	... 43 more

Standard Output

[Host Controller] &#27;[0m&#27;[0m14:49:48,985 INFO  [org.jboss.as.repository] (management-handler-thread - 3) JBAS014900: Content added at location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/master/data/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content&#27;[0m
[Server:main-two] 14:49:49,579 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:test-one] 14:49:49,583 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:main-one] 14:49:49,586 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:main-three] 14:49:49,698 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:main-one] 14:49:49,696 INFO  [org.jboss.web] (ServerService Thread Pool -- 73) JBAS018210: Register web context: /RolloutPlanTestCase
[Server:main-one] 14:49:49,710 INFO  [org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestServlet] (ServerService Thread Pool -- 73) RolloutServlet initialized: 1401389389710
[Server:main-three] 14:49:49,791 INFO  [org.jboss.web] (ServerSe[Server:main-two] 14:49:49,762 INFO  [org.jboss.web] (ServerService Thread Pool -- 58) JBAS018210: Register web context: /RolloutPlanTestCase
[Server:main-two] 14:49:49,788 INFO  [org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestServlet] (ServerService Thread Pool -- 58) RolloutServlet initialized: 1401389389786
[Server:test-one] 14:49:49,784 INFO  [org.jboss.web] (ServerService Thread Pool -- 21) JBAS018210: Register web context: /RolloutPlanTestCase
rvice Thread Pool -- 67) JBAS018210: Register web context: /RolloutPlanTestCase
[Server:main-three] 14:49:49,804 INFO  [org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestServlet] (ServerService Thread Pool -- 67) RolloutServlet initialized: 1401389389803
[Server:test-one] 14:49:49,820 INFO  [org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestServlet] (ServerService Thread Pool -- 21) RolloutServlet initialized: 1401389389820
[Server:other-two] 14:49:49,891 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:other-two] 14:49:50,826 INFO  [org.jboss.web] (ServerService Thread Pool -- 71) JBAS018210: Register web context: /RolloutPlanTestCase
[Server:other-two] 14:49:50,845 INFO  [org.jboss.as.test.integration.domain.management.cli.RolloutPlanTestServlet] (ServerService Thread Pool -- 71) RolloutServlet initialized: 1401389390845
[Server:main-two] 14:49:51,172 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018559: Deployed ""RolloutPlanTestCase.war"" (runtime-name : ""RolloutPlanTestCase.war"")
[Server:test-one] 14:49:51,174 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018559: Deployed ""RolloutPlanTestCase.war"" (runtime-name : ""RolloutPlanTestCase.war"")
[Server:main-one] 14:49:51,169 INF[Server:other-two] 14:49:51,180 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018559: Deployed ""RolloutPlanTestCase.war"" (runtime-name : ""RolloutPlanTestCase.war"")
[Server:main-three] 14:49:51,180 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018559: Deployed ""RolloutPlanTestCase.war"" (runtime-name : ""RolloutPlanTestCase.war"")
O  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018559: Deployed ""RolloutPlanTestCase.war"" (runtime-name : ""RolloutPlanTestCase.war"")
[Server:main-two] 14:50:11,333 INFO  [org.jboss.web] (ServerService Thread Pool -- 66) JBAS018224: Unregister web context: /RolloutPlanTestCase
[Server:test-one] 14:50:11,346 INFO  [org.jboss.web] (ServerService Thread Pool -- 58) JBAS018224: Unregister web context: /RolloutPlanTestCase
[Server:main-three] 14:50:11,376 INFO  [org.jboss.web] (ServerService Thread Pool -- 69) JBAS018224: Unregister web context: /RolloutPlanTestCase
[Server:main-two] 14:50:11,388 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015877: Stopped deployment RolloutPlanTestCase.war (runtime-name: RolloutPlanTestCase.war) in 62ms
[Server:test-one] 14:50:11,397 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015877: Stopped deployment RolloutPlanTestCase.war (runtime-name: RolloutPlanTestCase.war) in 59ms
[Server:main-three] 14:50:11,548 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015877: Stopped deployment RolloutPlanTestCase.war (runtime-name: RolloutPlanTestCase.war) in 175ms
[Server:other-two] 14:50:11,634 INFO  [org.jboss.web] (ServerService Thread Pool -- 78) JBAS018224: Unregister web context: /RolloutPlanTestCase
[Server:other-two] 14:50:11,704 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment RolloutPlanTestCase.war (runtime-name: RolloutPlanTestCase.war) in 132ms
[Server:main-one] 14:50:11,748 INFO  [org.jboss.web] (ServerService Thread Pool -- 78) JBAS018224: Unregister web context: /RolloutPlanTestCase
[Server:main-one] 14:50:11,763 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment RolloutPlanTestCase.war (runtime-name: RolloutPlanTestCase.war) in 385ms
[Server:main-three] 14:50:12,225 INFO  [org.jboss.as.repository] (host-controller-connection-threads - 1) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/slave/data/servers/main-three/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content
[Server:main-three] 14:50:12,226 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018558: Undeployed ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:test-one] 14:50:12,217 INFO  [org.jboss.as.repository] (host-controller-connection-threads - 1) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/master/servers/test-one/data/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content
[Server:test-one] 14:50:12,218 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018558: Undeployed ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:main-two] 14:50:12,218 INFO  [org.jboss.as.repository] (host-controller-connection-threads - 1) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/master/servers/main-two/data/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content
[Server:main-two] 14:50:12,219 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018558: Undeployed ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:main-one] 14:50:12,221 INFO  [org.jboss.as.repository] (host-controller-connection-threads - 1) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/master/servers/main-one/data/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content
[Server:main-one] 14:50:12,223 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018558: Undeployed ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Server:other-two] 14:50:12,237 INFO  [org.jboss.as.repository] (host-controller-connection-threads - 1) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/slave/data/servers/other-two/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content
[Server:other-two] 14:50:12,252 INFO  [org.jboss.as.server] (host-controller-connection-threads - 1) JBAS018558: Undeployed ""RolloutPlanTestCase.war"" (runtime-name: ""RolloutPlanTestCase.war"")
[Host Controller] &#27;[0m&#27;[0m14:50:12,261 INFO  [org.jboss.as.repository] (management-handler-thread - 4) JBAS014901: Content removed from location /mnt/hudson_workspace/workspace/eap-6x-as-testsuite-RHEL-matrix-OracleJDK7/378ed68b/jboss-eap-6.3-src/testsuite/domain/target/domains/CLITestSuite/master/data/content/65/679323a365c7fcc3e6453a9fa3e114cfcd7ecb/content&#27;[0m
ERROR [org.jboss.as.cli.CommandContext] {
    ""outcome"" => ""failed"",
    ""failure-description"" => {""domain-failure-description"" => ""JBAS014807: Management resource '[
    (\""socket-binding-group\"" => \""standard-sockets\""),
    (\""socket-binding\"" => \""test-binding\"")
]' not found""},
    ""rolled-back"" => true
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1103052,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly/pull/6675,,,,,,0.0,3.0,,1|hzt3x3:,9223372036854775807,,,,,,,,,,,08/Sep/14 7:58 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1103052|https://bugzilla.redhat.com/show_bug.cgi?id=1103052] from ASSIGNED to MODIFIED,16/Sep/14 3:14 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1103052|https://bugzilla.redhat.com/show_bug.cgi?id=1103052] from MODIFIED to ON_QA,19/Sep/14 4:22 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1103052|https://bugzilla.redhat.com/show_bug.cgi?id=1103052] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,,
EAR deployment overlay did not work if there is no related resource included in the ear,WFCORE-83,12547622,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,wdfink,wdfink,28/Jul/14 10:51 AM,10/Dec/14 8:01 AM,29/Nov/16 3:55 PM,05/Sep/14 12:41 AM,,,,,,,1.0.0.Alpha6,,,,,,,0,,,,,,"It is possible to overlay WEB-inf/lib/xy.jar without having xy.jar included in the war file.

If an EAR file is used a module in the lib directory can not be added in the same way. But overlay is working if the lib/xy.jar is available.",,,,,,,,,,,,,,,,,,,,,,,,,,,28/Jul/14 10:53 AM;wdfink;reproducer.zip;https://issues.jboss.org/secure/attachment/12384002/reproducer.zip,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1145364,https://bugzilla.redhat.com/show_bug.cgi?id=1055229,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/152,,,,,,1.0,8.0,,1|hzsjy7:,9223372036854775807,,,,"Use the attached reproducer.zip.
See the README file for the different steps",,,,,,,26/Sep/14 5:34 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1145364|https://bugzilla.redhat.com/show_bug.cgi?id=1145364] from NEW to POST,26/Sep/14 7:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1145364|https://bugzilla.redhat.com/show_bug.cgi?id=1145364] from POST to MODIFIED,29/Sep/14 6:59 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1145364|https://bugzilla.redhat.com/show_bug.cgi?id=1145364] from MODIFIED to ON_QA,30/Sep/14 8:08 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1145364|https://bugzilla.redhat.com/show_bug.cgi?id=1145364] from ON_QA to VERIFIED,03/Oct/14 3:52 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ASSIGNED to MODIFIED,03/Oct/14 3:57 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ASSIGNED to MODIFIED,05/Dec/14 7:12 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from MODIFIED to ON_QA,10/Dec/14 8:01 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,
Defining a HTTP management interface with secure-port or https socket binding but not security realm causes NullPointerException,WFCORE-82,12551022,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,03/Sep/14 1:18 PM,26/Sep/14 6:53 AM,29/Nov/16 3:55 PM,09/Sep/14 7:09 AM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"There are actually two checks that need to be performed: -
 1 - If a secure port is required then a security realm must be associated with the interface.
 2 - That security realm must supply an SSLContext

For #1 that can at least be validated in the model at the end of stage MODEL.  This will need to be validated for both standalone mode and domain mode - each of these use independent resource definitions.

#2 will have to wait until RUNTIME where we have the opportunity to check that the injected realm does supply a SSLContext.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=908236,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/156,,,,,,0.0,6.0,,1|hzt2zj:,9223372036854775807,,,,,,,,,,,"04/Sep/14 12:24 PM;ctomc;all non socket-binding attributes (http-port, https-port, interface, secure-interface) need to be removed as they are beyond legacy
and just add more complexity when implementing things like this.",04/Sep/14 12:29 PM;dlofthouse;Absolutely not - the scope of this is to add validation to fix the NPE.  If additional changes are required in this area please raise a new Jira issue but overall these attributes can not be removed in EAP.,04/Sep/14 1:51 PM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 908236|https://bugzilla.redhat.com/show_bug.cgi?id=908236] from ASSIGNED to POST,16/Sep/14 9:16 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 908236|https://bugzilla.redhat.com/show_bug.cgi?id=908236] from POST to MODIFIED,23/Sep/14 8:44 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 908236|https://bugzilla.redhat.com/show_bug.cgi?id=908236] from MODIFIED to ON_QA,26/Sep/14 6:53 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 908236|https://bugzilla.redhat.com/show_bug.cgi?id=908236] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,
ExplodedDeploymentMarker is not set for sub deployments,WFCORE-79,12550739,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,31/Aug/14 8:23 PM,30/Oct/14 4:47 AM,29/Nov/16 3:55 PM,02/Sep/14 9:01 PM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,Server,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzt19z:,9223372036854775807,,,,,,,,,,,30/Oct/14 4:46 AM;jacobilsoe;We're seeing issue WFLY-3765 in WildFly 8.1.0.Final. How was this fixed in 9.0.0.Alpha1? I can't see any code changes related to this (WFCORE-79) issue.,,,,,,,,,,,,,,,,,,,,,,,,,,
read-resource recursive-depth has no effect when recursive=true,WFCORE-76,12550535,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,arcivanov,brian.stansberry,28/Aug/14 3:47 PM,12/Sep/14 3:21 PM,29/Nov/16 3:55 PM,12/Sep/14 3:21 PM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"The code inside ReadResourceHandler.doExecuteInternal(OperationContext context, ModelNode operation) goes as follows:

{noformat}
final int recursiveDepth = operation.get(ModelDescriptionConstants.RECURSIVE_DEPTH).asInt(0);
final boolean recursive = recursiveDepth > 0 || operation.get(ModelDescriptionConstants.RECURSIVE).asBoolean(false);
{noformat}

The [documentation|https://docs.jboss.org/author/display/WFLY8/Global+operations] states:

recursive-depth – (int) – The depth to which information about child resources should be included *if recursive is {{true}*. If not set, the depth will be unlimited; i.e. all descendant resources will be included.

The logic, however, as implemented goes - either recursive-depth is greater than zero OR recursive is true.

The proper implementation should be:

{noformat}
final int recursiveDepth = operation.get(ModelDescriptionConstants.RECURSIVE_DEPTH).asInt(0);
final boolean recursive =  operation.get(ModelDescriptionConstants.RECURSIVE).asBoolean(false) && 
                (!operation.get(ModelDescriptionConstants.RECURSIVE_DEPTH).isDefined() || recursiveDepth > 0);
{noformat}

The above snippet works as follows: recurs IF recursive is set AND (either recursive-depth is not defined OR recursive-depth is greater than 0).
  ","Linux aimobile-sm.servicemesh.com 3.15.7-200.fc20.x86_64 #1 SMP Mon Jul 28 18:50:26 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
",,,,,,,,,,,,,,,WFLY-3705,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/139,,,,,,0.0,5.0,,1|hzt02f:,9223372036854775807,,,,"./jboss-cli.sh -c > depth1.txt <<EOF
:read-resource(recursive=true, proxies=true, recursive-depth=1, include-runtime=true)
EOF

./jboss-cli.sh -c > depth2.txt <<EOF
:read-resource(recursive=true, proxies=true, recursive-depth=2, include-runtime=true)
EOF

Observe no substantive content difference between depth1.txt and depth2.txt.
",,,,,,,"28/Aug/14 4:06 PM;arcivanov;Oops, sorry, linked wrong pull request.","28/Aug/14 4:29 PM;brian.stansberry;I'm forward-porting the WildFly 8.x PR, unless you have one already for wildfly-core/master.",28/Aug/14 4:44 PM;brian.stansberry;I'll gladly drop PR #138 if you have already have one.,"28/Aug/14 5:29 PM;arcivanov;I added PR #139. Sorry, we apparently, bumped into each other.
","28/Aug/14 5:33 PM;arcivanov;#138 is not correct - IT test changed location and it had changes in logic as well, which PR #139 correctly mirrors.",,,,,,,,,,,,,,,,,,,,,,
deploy --force fails in CLI GUI,WFCORE-72,12550306,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ssilvert,ssilvert,ssilvert,26/Aug/14 10:09 PM,18/Sep/14 12:27 PM,29/Nov/16 3:55 PM,18/Sep/14 12:27 PM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,CLI,,,,,0,,,,,,The --force flag is not working with the deploy command in CLI GUI.  The CLI CommandContextImpl is generating the wrong DMR request.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/133,,,,,,0.0,1.0,,1|hzsypz:,9223372036854775807,,,,,,,,,,,18/Sep/14 12:26 PM;brian.stansberry;Re-opening to correct fix version.,,,,,,,,,,,,,,,,,,,,,,,,,,
ProtocolLogger is used outside org.jboss.as.protocol module but isn't available,WFCORE-71,12550293,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,26/Aug/14 3:34 PM,03/Sep/14 12:13 PM,29/Nov/16 3:55 PM,03/Sep/14 12:13 PM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"The ProtocolLogger class is used in a few places in host-controller and server, but the module.xml for the org.jboss.as.protocol module specifically excludes it from being exported.

The uses aren't complex enough to justify exporting the class, so I'll just change them.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/131,,,,,,0.0,0.0,,1|hzsyn3:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException adding KeyStore to realm with {allow-resource-service-restart=true},WFCORE-69,12550097,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,23/Aug/14 10:27 AM,19/Sep/14 9:39 AM,29/Nov/16 3:55 PM,27/Aug/14 4:34 AM,1.0.0.Alpha4,,,,,,1.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"Executing the following CLI commands: -

{code:title=CLI Commands}
./core-service=management/security-realm=SSLRealm:add
./core-service=management/security-realm=SSLRealm/server-identity=ssl:add(keystore-password=keystore_password, keystore-relative-to=jboss.server.config.dir, keystore-path=server.keystore){allow-resource-service-restart=true}
{code}

Results in the following NullPointerException being recorded: -

{noformat}
15:23:28,074 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 6) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""core-service"" => ""management""),
    (""security-realm"" => ""SSLRealm""),
    (""server-identity"" => ""ssl"")
]): java.lang.NullPointerException
	at org.jboss.as.domain.management.security.SecurityRealmAddHandler.addSSLServices(SecurityRealmAddHandler.java:596) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]
	at org.jboss.as.domain.management.security.SecurityRealmAddHandler.installServices(SecurityRealmAddHandler.java:188) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]
	at org.jboss.as.domain.management.security.SecurityRealmParentRestartHandler.recreateParentService(SecurityRealmParentRestartHandler.java:66) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]
	at org.jboss.as.controller.RestartParentResourceHandlerBase$1.execute(RestartParentResourceHandlerBase.java:74) [wildfly-controller-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:664) [wildfly-controller-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1073866,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/126,,,,,,0.0,4.0,,1|hzsxif:,9223372036854775807,,,,,,,,,,,23/Aug/14 11:15 AM;jira-bugzilla-migration;Darran Lofthouse <darran.lofthouse@redhat.com> changed the Status of [bug 1073866|https://bugzilla.redhat.com/show_bug.cgi?id=1073866] from ASSIGNED to POST,29/Aug/14 7:52 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1073866|https://bugzilla.redhat.com/show_bug.cgi?id=1073866] from POST to MODIFIED,16/Sep/14 3:15 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1073866|https://bugzilla.redhat.com/show_bug.cgi?id=1073866] from MODIFIED to ON_QA,19/Sep/14 9:39 AM;jira-bugzilla-migration;Pavel Janousek <pjanouse@redhat.com> changed the Status of [bug 1073866|https://bugzilla.redhat.com/show_bug.cgi?id=1073866] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
CLI shutting down a slave disconnects from the master,WFCORE-67,12549992,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,22/Aug/14 5:26 AM,27/Feb/15 6:11 AM,29/Nov/16 3:55 PM,27/Aug/14 3:14 AM,1.0.0.Alpha4,,,,,,1.0.0.Alpha6,,CLI,,,,,0,,,,,,"If I issue a shutdown command for a slave HC, the CLI gets disconnected:

[domain@localhost:9999 /] shutdown --host=slave-a
[disconnected /] shutdown --host=slave-b
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[disconnected /] cd /
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[disconnected /] connect
[domain@localhost:9999 /] shutdown --host=slave-b
[disconnected /]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzswwn:,9223372036854775807,,,,,,,,,,,27/Aug/14 3:14 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
Filesystem deployment scanner deployment failure removes other scanners ' deployments,WFCORE-65,12549947,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,ehugonnet,ehugonnet,21/Aug/14 12:40 PM,14/Oct/15 9:06 AM,29/Nov/16 3:55 PM,10/Apr/15 3:47 PM,1.0.0.Alpha5,,,,,,1.0.0.Beta4,,Domain Management,,,,,0,,,,,,There is no way to associate a deployment to a specific scanner thus if one deployment fails for a scanner during startup all deployments not persistent will be removed ,,,,,,,,,,,,,,,,,,,,,WFCORE-632,,,,WFCORE-64,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/604,,,,,,0.0,1.0,,1|hzswmn:,9223372036854775807,,,,,,,,,,,"08/Apr/15 2:17 PM;brian.stansberry;A fix for WFCORE-65 will likely fix WFCORE-632 as well. If in a deployment resource in the model we store a non-persistent ""owner"" attribute (doesn't need to be persisted) with a value of type LIST of PROPERTY, the scanner can pass in its own address when adding deployments, and use that to ignore unrelated deployments.

Any ""owner"" attribute should be treated like the ""persistent"" attribute -- not part of the ""add"" API description for a resource, not modifiable, not persisted to xml.",,,,,,,,,,,,,,,,,,,,,,,,,,
Filesystem deployment scanner deployment failure removes unrelated deployments,WFCORE-64,12549081,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,JessHolle,JessHolle,11/Aug/14 11:19 AM,27/Jul/16 1:08 PM,29/Nov/16 3:55 PM,04/Sep/14 2:45 AM,1.0.0.Alpha5,,,,,,1.0.0.Alpha6,,Domain Management,,,,,0,,,,,,"If one's standalone-full.xml configuration contains something like:

<deployments>
  <deployment name=""MyWebApp.war"" runtime-name=""MyWebApp.war"" enabled=""true"">
    <fs-exploded path=""../../SomeDir/MyWebApp.war"" relative-to=""jboss.home.dir""/>
  </deployment>
</deployments>

whether manually inserted (while the server is not running) or installed via the CLI via

  /deployment=ServiceCenter.war/:add(runtime-name=ServiceCenter.war,content=[{archive=false,path=""../../Windchill/ServiceCenter.war"",relative-to=""jboss.home.dir""}])

and a deployment scanner like:

  <subsystem xmlns=""urn:jboss:domain:deployment-scanner:2.0""> 
    <deployment-scanner name=""1"" path=""../../../Applications"" relative-to=""jboss.server.base.dir"" scan-interval=""5000"" auto-deploy-exploded=""true""/> 
  </subsystem> 

a failure by a deployment-scanner to deploy an application (exploded in my case, though I'm not sure this makes a difference) will cause the explicitly listed <deployments> to be removed from the configuration!

This occurs irrespective of the value used for auto-deploy-exploded and to <deployment> elements that had already successfully been deployed and started.",WIndows and Linux platforms both exhibit the issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1291710,https://bugzilla.redhat.com/show_bug.cgi?id=1327093,,,,Perform,,,,,,,,,,https://community.jboss.org/message/884087#884087,,,https://github.com/wildfly/wildfly-core/pull/122,,,,,,0.0,27.0,,1|hzss1b:,9223372036854775807,,,,See above.,,,,,Workaround Exists,Deploy all applications explicitly via <deployment> elements in the configuration XML.,"11/Aug/14 12:21 PM;brian.stansberry;When does this failure occur? At boot, or later?","11/Aug/14 12:40 PM;JessHolle;The deployment failure?  It occurs immediately upon attempting to deploy the given ear.

Immediately upon this failure, the deployment scanner undeploys the unrelated war -- and removes it from the standalone-full.xml file.","11/Aug/14 12:50 PM;brian.stansberry;OK, so not during boot. You changed the contents of the scanned dir *after* boot, and you saw this happen.

I ask because it's an important distinction for narrowing down the possible problem.","11/Aug/14 12:55 PM;JessHolle;One possible workaround would be avoid the explicit deployment of the war directory and deploy it via a deployment scanner as well.

Unfortunately, the .web app parent directory contains numerous files and sub-directories which must remain at their current relative locations to the web app directory, so I can't just move the .war directory directly under a deployment scanner.

I originally thought to simply place this war directory's parent directory in a deployment scanner directory, call it MyApp.ear, and treat MyApp.ear as a ear directory.  This web app is coming from Tomcat (where we simply used an app-xxxx.xml file to deploy the web app), so it doesn't actually have a logical enterprise app, but there seemed little harm in this from my reading of the spec.

Unfortunately this failed.  From my reading of the EE specs, it seems like only .war, .rar, .jar, etc, files in the top-level of the ear and the lib directory should be scanned, yet it appears Wildfly scans much, much more than this -- causing a deployment failure due to jars in sub-directories that are not to its liking.  Do I misunderstand the spec here?  Is there a way to tell Wildfly not to scan so much?  If so and I could get Wildfly to auto-deploy this as an ear, then I could avoid the explicit deployment entirely.","11/Aug/14 1:02 PM;JessHolle;I think I'm not being precise enough here.  There are lots of different ways to produce the problem, but one can do things like:
  * Configure deployment scanner and explicit web app deployment in standalone-full.xml prior to ever starting the given Wildfly installation.
  * Start Wildfly
  * Watch the auto-deployed app fail and watch Wildfly undeploy the explicitly deployed application and remove it from standalone-full.xml.

I've tried numerous different orderings of events here.  Any which way I've tried, a failure in the scan-deployed application's deployment removes the explicitly deployed application.","11/Aug/14 1:12 PM;brian.stansberry;The scanner has no idea what the contents on the filesystem represent. If you put a directory named MyApp.ear on the filesystem in a scanned dir, it's going to tell the server there's content there named MyApp.ear. The server then is going to assume that content represents a valid ear.

If you think the deployers are paying attention to parts of that content that they should just ignore, that's a separate issue from this. I recommend you start on the forums to try to validate your thoughts on that.","11/Aug/14 3:19 PM;JessHolle;Actually the filesystem contents were very nearly appropriate as an ear.  Further analysis showed that the only issues was a single .rar file that was present but should not be actually deployed/activated.  We can rename/zip/remove/whatever this.  Doing so allows deployment via deployment scanner of the parent directory as an ear and the child directory as a war.

All that said, explicit deployment of the exploded war directory should also work -- and does up until a deployment scanner fails to deploy an application, at which point the <deployments> element is removed from standalone-full.xml, which is patently incorrect and the subject of this bug.

In short, for my use case I now have another workaround, but this bug is still quite valid.",11/Aug/14 3:31 PM;brian.stansberry;Agreed; the success or failure of a particular workaround doesn't impact whether a bug is valid.,"12/Aug/14 7:47 AM;JessHolle;Until this is fixed, I have 2 options:
1) Move my explicit <deployment> elements to filesystem deployment scanner directories.
2) Move all applications from filesystem deployment scanner directories to <deployment> elements.

Any recommendations as to which is more solid/supported/accepted would be appreciated.","12/Aug/14 10:38 AM;brian.stansberry;I recommend using the CLI or the web admin console and explicitly doing what you want without a scanner in the middle to mediate. For exploded deployments, with the scanner you have to use marker files. I don't see how that's easier than just using the CLI.","12/Aug/14 10:47 AM;JessHolle;Thanks for the recommendation.

I would tend to (programmatically) edit the XML rather than use the CLI -- as the CLI requires the server to be running before one gets it configured.","12/Aug/14 10:58 AM;brian.stansberry;FYI, you can use the the --admin-only switch at server launch to get a server that can be remotely configured but won't start services unrelated to management.","21/Aug/14 5:45 AM;ehugonnet;I was able to reproduce it 'only' during the first scan.
If the server is started and the ear is deployed then all seem to stay correct.","21/Aug/14 11:32 AM;ehugonnet;Ok so this is what I'm seeing :
the first scan occurs and tries to deploy the war and the ear.
the ear fails so we have a undeploy scan run with ""forcedUndeployScan"" that will undeploy all registred deployments.
since the war is a simulated scanner deployment it gets undeployed which removes it from the content repository (as it is supposed to be in the deployments folder)
thus the configuration is removed from the xml","21/Aug/14 11:38 AM;brian.stansberry;""the ear fails so we have a undeploy scan run with ""forcedUndeployScan"" that will undeploy all registred deployments.""

The scanner should never deal with a deployment unrelated to that scanner.

""since the war is a simulated scanner deployment it gets undeployed...""

What is a ""simulated scanner deployment""? The fact it is exploded? That shouldn't imply it's a scanner deployment.","21/Aug/14 11:57 AM;ehugonnet;""simulated scanner deployment"" is the fact that we created a deployment entry in the standalone.xml  with a relative path instead of deploying it throught the cli.The ""exploded"" part has no impact.",21/Aug/14 12:00 PM;ehugonnet;We don't know which deployments are related to a specific scanner (which might be something we want to fix) except by looking at the deployments in the scanned dir.,"21/Aug/14 12:26 PM;brian.stansberry;Yes, this is true, and is a problem if you have multiple scanners. Scanner's have a name, so we could store that name as an attribute in the model, with 'undefined' for the usual case of non-scanner deployments. 

However, the existing 'persistent' flag identifies deployments that are not under a scanner's control at all. The war in the description wouldn't have 'false' as the value for that.

I think we should solve the basic case of discriminating between scanner and non-scanner deployments before worrying about the much more edgy case of multiple scanners. This is complex stuff and we need to be very careful and analyze everything before adding a new attribute to track which scanner controls what. I don't think we should delay fixing the basic case for that.","21/Aug/14 12:29 PM;ehugonnet;I agree, since the war is marked as PERSISTENT it is easy to sort it out.
I can live with ""multiple scanners"" being an edge case :)","21/Aug/14 12:33 PM;brian.stansberry;OK, good. Please file a subissue or separate issue for the multiple scanner case though.

Also, please move this to WFCORE. :)",15/Apr/16 11:50 AM;jira-bugzilla-migration;Bartek Spyrko-Smietanko <bspyrkos@redhat.com> changed the Status of [bug 1327093|https://bugzilla.redhat.com/show_bug.cgi?id=1327093] from NEW to POST,14/Jun/16 10:02 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1327093|https://bugzilla.redhat.com/show_bug.cgi?id=1327093] from POST to MODIFIED,14/Jun/16 10:04 AM;jira-bugzilla-migration;Radovan Netuka <rnetuka@redhat.com> changed the Status of [bug 1291710|https://bugzilla.redhat.com/show_bug.cgi?id=1291710] from POST to MODIFIED,16/Jun/16 3:26 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1327093|https://bugzilla.redhat.com/show_bug.cgi?id=1327093] from MODIFIED to ON_QA,16/Jun/16 3:27 AM;jira-bugzilla-migration;Vladimir Dosoudil <dosoudil@redhat.com> changed the Status of [bug 1291710|https://bugzilla.redhat.com/show_bug.cgi?id=1291710] from MODIFIED to ON_QA,22/Jun/16 6:04 PM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1291710|https://bugzilla.redhat.com/show_bug.cgi?id=1291710] from ON_QA to VERIFIED,22/Jun/16 6:04 PM;jira-bugzilla-migration;Jiří Bílek <jbilek@redhat.com> changed the Status of [bug 1327093|https://bugzilla.redhat.com/show_bug.cgi?id=1327093] from ON_QA to VERIFIED
Support alternate JVM in domain scripts,WFCORE-61,12544961,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,jamezp,jamezp,26/Jun/14 4:39 PM,19/Aug/14 6:19 PM,29/Nov/16 3:55 PM,,,,,,,,,,Scripts,,,,,0,,,,,,"The domain scripts don't support adding a separate JVM for the {{\-jvm}} and {{--default-jvm}} options. The scripts should support these, e.g. check the {{$JAVA_FROM_JVM}} value before assigning it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,0.0,,1|hzs427:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Setting some locales causes missing buttons on console and throws errors.,WFCORE-58,12549483,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ctomc,jaysensharma,jaysensharma,18/Aug/14 1:18 AM,20/Oct/14 9:45 AM,29/Nov/16 3:55 PM,01/Sep/14 2:26 PM,1.0.0.Alpha4,,,,,,1.0.0.Alpha5,,Domain Management,,,,,0,,,,,,"- When WildFly 9 Alpha1 is started with the following system properties in the ""standalone.conf"" then the admin console behaves abnormally and shows some missing buttons in the console. See attached screenshot ""mssing_add_remove_disable_Buttons.png"".

{code}
JAVA_OPTS=""$JAVA_OPTS -Duser.country=TR -Duser.language=tr""
{code}


- Also it throws following Error while accessing the console URL like [1]
[1] http://localhost:9990/console/App.html#datasources

{code}
10:39:39,223 ERROR [org.jboss.as.controller.management-operation] (XNIO-1 task-8) WFLYCTL0013: Operation (""check-resource-access"") failed - address: ([
    (""subsystem"" => ""datasources""),
    (""data-source"" => ""*""),
    (""connection-properties"" => ""*"")
]): java.lang.IllegalArgumentException: No enum constant org.jboss.as.controller.registry.AttributeAccess.Storage.CONFİGURATİON
	at java.lang.Enum.valueOf(Enum.java:236) [rt.jar:1.7.0_51]
	at org.jboss.as.controller.registry.AttributeAccess$Storage.valueOf(AttributeAccess.java:91) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$CheckResourceAccessHandler.execute(ReadResourceDescriptionHandler.java:431) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:603) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:481) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:282) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:277) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1060) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:296) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:165) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:179) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:72) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:68) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_51]
	at javax.security.auth.Subject.doAs(Subject.java:415) [rt.jar:1.7.0_51]
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:68) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:63) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:50) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]
	at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:83) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]
	at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:52) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:197) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:737) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_51]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_51]
	at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_51]
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,18/Aug/14 1:21 AM;jaysensharma;mssing_add_remove_disable_Buttons.png;https://issues.jboss.org/secure/attachment/12384218/mssing_add_remove_disable_Buttons.png,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1130863,https://bugzilla.redhat.com/show_bug.cgi?id=1141668,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/113,,,,,,1.0,13.0,,1|hzsufj:,9223372036854775807,,,,"- Before starting the WildFly 9 Alpha1 or earlier release add the following system property in the *""standalone.conf""*
{code}
JAVA_OPTS=""$JAVA_OPTS -Duser.country=TR -Duser.language=tr""
{code}

- After starting the WildFly, access the following URL:
http://localhost:9990/console/App.html#datasources

- Check the logs.
- Check the console which has missing ""Add"", ""Remove"", ""Disable"" buttons for the DataSource configuration page.",,,,,,,"18/Aug/14 1:10 PM;ctomc;I cannot reproduce this, neither with WildFly master or EAP 6.2.4.
Could be platform related, I am testing in Windows.

what is system configuration? any localization config changes?
","18/Aug/14 1:11 PM;brian.stansberry;The problem is here:

{code}
Storage storage = Storage.valueOf(attrProp.getValue().get(STORAGE).asString().toUpperCase());
{code}

That toUpperCase() call needs to pass in Locale.ENGLISH.
","18/Aug/14 1:14 PM;brian.stansberry;Other uses of toUpperCase() with no locale in WildFly Core:

{code}
controller/src/main/java/org/jboss/as/controller/access/rbac/StandardRoleMapper.java:                    String roleName = current.toUpperCase();
controller/src/main/java/org/jboss/as/controller/operations/global/ReadResourceDescriptionHandler.java:                            Storage storage = Storage.valueOf(attrProp.getValue().get(STORAGE).asString().toUpperCase());
controller/src/main/java/org/jboss/as/controller/operations/global/ReadResourceDescriptionHandler.java:            return value == null ? AccessControl.valueOf(localName.toUpperCase()) : value;
controller/src/main/java/org/jboss/as/controller/transform/SimilarityIndex.java:        ArrayList pairs1 = wordLetterPairs(str1.toUpperCase());
controller/src/main/java/org/jboss/as/controller/transform/SimilarityIndex.java:        ArrayList pairs2 = wordLetterPairs(str2.toUpperCase());
domain-management/src/main/java/org/jboss/as/domain/management/security/password/PasswordCheckUtil.java:            this.acceptable = PasswordStrength.valueOf(props.getProperty(_PROPERTY_STRENGTH).toUpperCase());
host-controller/src/main/java/org/jboss/as/host/controller/DirectoryGrouping.java:        return directoryGrouping == null ? DirectoryGrouping.valueOf(localName.toUpperCase()) : directoryGrouping;
host-controller/src/main/java/org/jboss/as/host/controller/discovery/S3Util.java:            method = method.toUpperCase(); // Method should always be uppercase
remoting/subsystem/src/main/java/org/jboss/as/remoting/Protocol.java:        return value == null ? Protocol.valueOf(localName.toUpperCase()) : value;
testsuite-core/shared/src/main/java/org/jboss/as/test/integration/management/interfaces/JmxInterfaceStringUtils.java:            String upperCaseLetter = matcher.group(1).toUpperCase();
testsuite-core/shared/src/main/java/org/jboss/as/test/integration/management/rbac/PermissionsCoverageTestUtil.java:            return name.toUpperCase();
threads/src/main/java/org/jboss/as/threads/ThreadPoolManagementUtils.java:            params.keepAliveTime = new TimeSpec(Enum.valueOf(TimeUnit.class, unit.toUpperCase()), time);
{code}

Some of the may be fine; the above is simply the result of 'git grep ""toUpperCase()""'
","18/Aug/14 1:50 PM;ctomc;Makes total sense, AFAIR we fixed all toUpperCase() months back.
But probably this could sneak in with new(ish) code.

Just want to reproduce it first before fixing it just to make sure...",18/Aug/14 4:14 PM;ctomc;Sent PR that fixes all usages of toUpperCase() with passing in what locale.,19/Aug/14 5:02 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1130863|https://bugzilla.redhat.com/show_bug.cgi?id=1130863] from NEW to POST,23/Aug/14 5:11 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1130863|https://bugzilla.redhat.com/show_bug.cgi?id=1130863] from POST to MODIFIED,15/Sep/14 4:32 AM;jira-bugzilla-migration;Jay SenSharma <jsenshar@redhat.com> changed the Status of [bug 1141668|https://bugzilla.redhat.com/show_bug.cgi?id=1141668] from NEW to POST,16/Sep/14 3:13 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1130863|https://bugzilla.redhat.com/show_bug.cgi?id=1130863] from MODIFIED to ON_QA,19/Sep/14 3:53 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1130863|https://bugzilla.redhat.com/show_bug.cgi?id=1130863] from ON_QA to VERIFIED,01/Oct/14 1:42 PM;jira-bugzilla-migration;Ivo Studensky <istudens@redhat.com> changed the Status of [bug 1141668|https://bugzilla.redhat.com/show_bug.cgi?id=1141668] from POST to MODIFIED,15/Oct/14 10:27 AM;jira-bugzilla-migration;Vaclav Tunka <vtunka@redhat.com> changed the Status of [bug 1141668|https://bugzilla.redhat.com/show_bug.cgi?id=1141668] from MODIFIED to ON_QA,20/Oct/14 9:45 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1141668|https://bugzilla.redhat.com/show_bug.cgi?id=1141668] from ON_QA to VERIFIED,,,,,,,,,,,,,,
Improve error message for bad/incomplete XML in deployment scanner,WFCORE-51,12489692,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Trivial,Done,ehugonnet,fnguyen,fnguyen,17/Apr/13 6:24 AM,04/Sep/14 2:45 AM,29/Nov/16 3:55 PM,04/Sep/14 2:45 AM,,,,,,,,,,,,,,0,,,,,,"Deploying VDB with invalid XML (closed translator tag). Causes following error:

[org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1)  JBAS015009: Scan found incompletely copied file content for deployment standalone/deployments/loop-vdb.xml. Deployment changes will not be processed until all content is complete.
",,,,,,,,,,,,,,,,,,,,,,,,,,,17/Apr/13 6:25 AM;fnguyen;loop-vdb.xml;https://issues.jboss.org/secure/attachment/12362033/loop-vdb.xml,,,,,,,,,,,,,,,,,,,,,Medium,,,,https://github.com/wildfly/wildfly-core/pull/96,,,,,,1.0,4.0,,1|hzgjhr:,156945,,,,,,,,,,,"17/Apr/13 8:33 AM;shawkins;This should probably be moved over to AS as this is their message.  Do you see any Teiid related logs, such as a parse error with line/column?","17/Apr/13 4:49 PM;brian.stansberry;The scanner tries to guard against deploying partially copied files by doing a trivial parse to confirm well-formed xml [1]. It's unlikely there would be any Teiid related logs, as the deployment scanner doesn't even try to execute a management operation to deploy the file if it doesn't pass this check.

If you enable DEBUG logging of log category org.jboss.as.server.deployment.scanner you may get some more details.

[1] https://github.com/jbossas/jboss-as/blob/master/deployment-scanner/src/main/java/org/jboss/as/server/deployment/scanner/XmlCompletionScanner.java#L44","30/Oct/13 12:01 PM;jason.greene;We could improve the error by saying something like ""blah.xml is not well-formed waiting in case it is an incomplete copy.""","30/Oct/13 12:34 PM;brian.stansberry;An additional INFO message saying that would be good. There's a specific method that detects malformed xml that could log that without any changes elsewhere.

Note the message in the JIRA description is at INFO.",,,,,,,,,,,,,,,,,,,,,,,
CLI tests using non-standard output stream don't reset the terminal when done,WFCORE-50,12549169,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,aloubyansky,aloubyansky,12/Aug/14 10:55 AM,22/Aug/14 1:41 AM,29/Nov/16 3:55 PM,22/Aug/14 1:41 AM,1.0.0.Alpha4,,,,,,1.0.0.Alpha5,,CLI,Test Suite,,,,0,,,,,,"The problem appears only when running single tests. If the tests are run using a wildcard, there is no problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/93,,,,,,0.0,1.0,,1|hzsskn:,9223372036854775807,,,,,,,,,,,22/Aug/14 1:41 AM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
EOFException when address of a mgmt operation is of a bad data type,WFCORE-48,12549013,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,lthon,lthon,09/Aug/14 5:52 AM,03/Feb/15 6:42 PM,29/Nov/16 3:55 PM,03/Feb/15 6:42 PM,,,,,,,1.0.0.Alpha17,,Domain Management,,,,,0,,,,,,"(Hopefully this belongs to WildFly Core. If not, please move to WildFly.)

I'm doing a programmatic invocation of a simple mgmt operation on the root mgmt resource, say e.g. {{:whoami}}. I'm doing this against a freshly built WildFly from master branch (commit {{e2b9ecfb}}) and on the client side, I'm depending on {{org.wildfly.core:wildfly-controller-client:1.0.0.Alpha4}}.

The code looks like this:

{code:java}
ModelControllerClient client = ModelControllerClient.Factory.create(""localhost"", 9990);

try {
    ModelNode op = new ModelNode();
    op.get(ClientConstants.OP).set(""whoami"");
    op.get(ClientConstants.OP_ADDR).set("""");
    ModelNode result = client.execute(op);
    System.out.println(result);
} finally {
    client.close();
}
{code}

This fails with an exception like this:

{code}
Exception in thread ""main"" java.io.IOException: java.util.concurrent.ExecutionException: Operation failed
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:129)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)
	at cz.ladicek.wildfly.ErrorReproducer.main(ErrorReproducer.java:17)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)
Caused by: java.util.concurrent.ExecutionException: Operation failed
	at org.jboss.threads.AsyncFutureTask.operationFailed(AsyncFutureTask.java:74)
	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:268)
	at org.jboss.as.controller.client.impl.AbstractDelegatingAsyncFuture.get(AbstractDelegatingAsyncFuture.java:100)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)
	... 7 more
Caused by: java.io.EOFException
	at java.io.DataInputStream.readByte(DataInputStream.java:267)
	at org.jboss.as.protocol.mgmt.ProtocolUtils.expectHeader(ProtocolUtils.java:83)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient$1.handleRequest(AbstractModelControllerClient.java:167)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:270)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleRequest(AbstractMessageHandler.java:235)
	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:113)
	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver$1.handleMessage(ManagementChannelReceiver.java:56)
	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:84)
	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:452)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
{code}

However, when I remove the line that sets {{address}} ({{op.get(ClientConstants.OP_ADDR).set("""");}}), it works just fine.

Fine, I made a mistake, but getting an {{EOFException}}? That's hardly an appropriate response. I should get a proper failure ({{""outcome"" => ""failed""}} etc.).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/467,,,,,,0.0,9.0,,1|hzsrn3:,9223372036854775807,,,,,,,,,,,"09/Aug/14 10:12 AM;lthon;Changed the issue summary. I thought that the problem is that the address is empty, but in fact, the problem is that the address is of a bad data type (the correct one is list). Using an empty string, non-empty string, an integer, all lead to the same {{EOFException}}.","23/Jan/15 10:28 AM;brian.stansberry;Emmanuel,

My expectation here is the ModelControllerImpl is assuming the incoming operation has a valid address field (undefined is valid) and the request is blowing up before it ever gets to the point where the OperationContext deals with exceptions.

So the ModelControllerImpl should early on validate the types of the ""operation"" and ""address"" fields and return an appropriate OperationResponse if they are invalid.

Before doing that though, it's worthwhile to debug a bit and try and get a sense of why this is resulting in the EOFException. On the server side, I recommend starting with the task inner class doExecute method at AbstractMessageHandler L296. That's where arbitrary uncaught exceptions are supposed to be handled. If that seems to be working ok, then perhaps there's a flaw in the client side.","28/Jan/15 11:33 AM;ehugonnet;The problem comes from 
{code:java}
PathAddress.pathAddress(new ModelNode().set(""""));
{code} that throws an IllegalArgumentException in ModelControllerClientOperationHandler.

The exception is correctly managed until : writeErrorResponse L424 of AbstractMessageHandler with the message not being received and the socket being closed from the client point of view.

The client side expects a node and handleRequest is used but handleFailed is not called.","29/Jan/15 12:46 AM;brian.stansberry;Sounds then like there's a problem in the protocol or in the client, such that the failure isn't being properly handled client side. Emanuel Muckenhuber may be able to provide some tips or feedback on proposed fixes this week. After that we're on our own. ;)

Your initial comment yesterday mentioned ModelControllerClientOperationHandler.sendPreparedResponse failing. Once the problem communicating failures is fixed, that method should be made robust, to catch any exception thrown while it's analyzing the op and just return false. That behavior satisfies the intent of that method, which is to detect valid reload calls.

I assume it will just fail later on though, in ModelControllerImpl (probably L356), and there MCI can probably be improved to validate the op and return an OperationResponse with a nice error message.","29/Jan/15 3:34 AM;ehugonnet;It seems that the problem comes from the fact that IllegalArgumentException.getMessage() returns null thus we are not sending an error ;-)
Setting the errorMessage to the exception class fixes it :)","29/Jan/15 3:57 AM;ehugonnet;For {code} ModelControllerClientOperationHandler.sendPreparedResponse {code} I thought more of moving the code block into the try / catch thus we would have the failure returned with a FAILURE_DESCRIPTION instead of returning false.
","29/Jan/15 11:51 AM;ehugonnet;Wondering in a ModelOperation must have an OP attribute defined.
[~brian.stansberry] may you take a look at https://github.com/ehsavoie/wildfly-core/tree/WFCORE-48 that 'validates' the operation checking the OP_ADDRESS and OP.
","02/Feb/15 4:12 PM;brian.stansberry;Yes, an OP field is required.

Your validation util method looks good, other than maybe an edge case where both OP and OP_ADDR are missing and the 2 error messages need a space or something.

I'd prefer not doing validation in ModelControllerClientOperationHandler and just suppressing a failure in sendPreparedResponse. That's fussy code and doing things like validation in more than one makes it harder to maintain.

Good catch on the getMessage(). I think I've made that mistake in a number of places. :(","02/Feb/15 4:12 PM;brian.stansberry;Oh, and no big whitespace changes please. :)",,,,,,,,,,,,,,,,,,
Fix intermittent failures in DeploymentOverlayCLITestCase,WFCORE-46,12548790,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,swd847,swd847,06/Aug/14 11:54 PM,10/Dec/14 8:01 AM,29/Nov/16 3:55 PM,21/Sep/14 6:22 PM,1.0.0.Alpha4,,,,,,1.0.0.Alpha9,,Server,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1144222,https://bugzilla.redhat.com/show_bug.cgi?id=1055229,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/187,,,,,,0.0,8.0,,1|hzsqbj:,9223372036854775807,,,,,,,,,,,26/Sep/14 5:34 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1144222|https://bugzilla.redhat.com/show_bug.cgi?id=1144222] from NEW to POST,26/Sep/14 7:55 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1144222|https://bugzilla.redhat.com/show_bug.cgi?id=1144222] from POST to MODIFIED,29/Sep/14 6:59 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1144222|https://bugzilla.redhat.com/show_bug.cgi?id=1144222] from MODIFIED to ON_QA,01/Oct/14 4:33 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1144222|https://bugzilla.redhat.com/show_bug.cgi?id=1144222] from ON_QA to VERIFIED,03/Oct/14 3:52 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ASSIGNED to MODIFIED,03/Oct/14 3:57 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ASSIGNED to MODIFIED,05/Dec/14 7:12 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from MODIFIED to ON_QA,10/Dec/14 8:01 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1055229|https://bugzilla.redhat.com/show_bug.cgi?id=1055229] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,
LocalPatchInfoPatchIdUnitTestCase fails if JBOSS_HOME is set,WFCORE-45,12548783,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,aloubyansky,swd847,swd847,06/Aug/14 9:27 PM,07/Aug/14 5:23 PM,29/Nov/16 3:55 PM,07/Aug/14 5:23 PM,,,,,,,,,CLI,Patching ,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/83,,,,,,0.0,1.0,,1|hzsq9z:,9223372036854775807,,,,,,,,,,,07/Aug/14 5:23 PM;aloubyansky;Merged.,,,,,,,,,,,,,,,,,,,,,,,,,,
Deadlock while logging,WFCORE-40,12546357,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,,jamezp,schueffi,schueffi,14/Jul/14 9:06 AM,02/Sep/14 10:52 AM,29/Nov/16 3:55 PM,,,,,,,,,,Logging,,,,,1,,,,,,"We hit really often a deadlock? in org.jboss.stdio.StdioContext$DelegatingPrintStream.println(StdioContext.java:474)

Even if the ""StdioContext"" belongs to Jboss-Logging, the problem occurs in our production wildfly installation twice to 4 times a day - all threads are deadlocking while trying to log.debug, log.error, or (sometimes) System.out.println from our application code, and wildfly does not respond anymore...

The partial stacktrace always is similar to this one:
{code}
 ""default task-64"" prio=10 tid=0x4c539c00 nid=0x5ef9 waiting for monitor entry [0x495e0000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at java.io.PrintStream.println(PrintStream.java:806)
        - waiting to lock <0x5ee0adf8> (a java.io.PrintStream)
        at org.jboss.stdio.StdioContext$DelegatingPrintStream.println(StdioContext.java:474)
        at jsp.communications.statuschange.selectStatus_jsp._jspService(selectStatus_jsp.java:413)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:69)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)
        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:82)
{code}

While investigating the StdioContext - class, i really wondered whether the used ""locking/checking by using a threadlocal"" could have worked in a multi-threaded environment (it should have the very same problems as every ""double checking"" algorithm without proper synchronization).

If all threads are hanging in this particular lock, only a full wildfly-restart recovers in our case.

My preferred solution would be a rework of the used org.jboss.stdio. classes, as the used idioms of ThreadLocals for reentrant-checks are at least highly unusual?","CentOS 6.5 64bit, java7u45 64bit (and 32 bit, the same behavior)",,,,,,,,,,,,,,,,,,,,,,,,,,02/Sep/14 5:25 AM;akaster;stack_140901_2254;https://issues.jboss.org/secure/attachment/12384604/stack_140901_2254,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,9.0,,1|hzsc7z:,9223372036854775807,,,,,,,,,,"Disable most of the log debug / info / warn / System.out in our application code reduces the possibility to hit this deadlock. Unfortunately, for monitoring purposes we can not disable the whole logging at all - and even having only a minimal set of log messages, we hit the bug at least once every few days.","14/Jul/14 8:05 PM;jamezp;The use of the {{ThreadLocal}} isn't for thread safety, it's for ensuring there is not a stack overflow if the delegating stream tries to also does invokes a {{printxx()}}. The {{StdioContext$DelegatingPrintStream}} doesn't do any locking so the locking is happening in the delegate stream. I would imagine it's a {{org.jboss.stdio.LoggingOutputStream}}.

From this I can't really see what the deadlock would be from. It looks like it's coming from the delegating stream","15/Jul/14 3:06 AM;schueffi;Hmm... you are right - the StdioContext should not lead to any locking. Nevertheless, after some time all available threads are ""waiting to lock"" as in the stacktrace above.
In the example given in this bug-report, our jsp-page ""selectStatus.jsp"" is doing a System.out.println, which unfortunately was left in the code... The same behavior also gets triggered using org.slf4j.

A different location where the ""waiting to lock"" appears (and results in all threads waiting either in StdioContext as above, or Logmanager as given here) is as follows:
{code}
""EJB default - 4"" prio=10 tid=0x4a1ce400 nid=0x5f5d waiting for monitor entry [0x53c8f000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.jboss.logmanager.handlers.WriterHandler.doPublish(WriterHandler.java:59)
        - waiting to lock <0x5edf6ca0> (a java.lang.Object)
        at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:79)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:296)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.Logger.logRaw(Logger.java:721)
        at org.jboss.logmanager.Logger.log(Logger.java:672)
        at org.jboss.logging.JBossLogManagerLogger.doLogf(JBossLogManagerLogger.java:50)
        at org.jboss.logging.Logger.logf(Logger.java:2096)
        at org.jboss.as.ejb3.EjbLogger_$logger.retryingTimeout(EjbLogger_$logger.java:298)
        at org.jboss.as.ejb3.timerservice.task.TimerTask.retryTimeout(TimerTask.java:215)
        at org.jboss.as.ejb3.timerservice.task.TimerTask.run(TimerTask.java:176)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:744)
        at org.jboss.threads.JBossThread.run(JBossThread.java:122)
{code}

In this example, 49 threads are waiting for this particular mutex/lock object (0x5edf6ca0), and one thread is holding this lock, but apparently never finishes his work and releases the lock. Therefore again, only a ""kill -9"" and restart recovers.
Stacktrace of the one ""running, but never finishing"" thread:
{code}
""default task-17"" prio=10 tid=0x4cdf6000 nid=0x5eca runnable [0x4a86d000]
   java.lang.Thread.State: RUNNABLE
        at java.lang.Throwable.fillInStackTrace(Native Method)
        at java.lang.Throwable.fillInStackTrace(Throwable.java:783)
        - locked <0xbeabc168> (a java.io.IOException)
        at java.lang.Throwable.<init>(Throwable.java:265)
        at java.lang.Exception.<init>(Exception.java:66)
        at java.io.IOException.<init>(IOException.java:58)
        at java.io.FileOutputStream.writeBytes(Native Method)
        at java.io.FileOutputStream.write(FileOutputStream.java:345)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.write(BufferedOutputStream.java:95)
        - locked <0x5edf6d28> (a java.io.BufferedOutputStream)
        at java.io.PrintStream.write(PrintStream.java:449)
        - locked <0x5edf6d08> (a java.io.PrintStream)
        at org.jboss.logmanager.handlers.UncloseableOutputStream.write(UncloseableOutputStream.java:39)
        at java.io.FilterOutputStream.write(FilterOutputStream.java:77)
        at org.jboss.logmanager.handlers.UninterruptibleOutputStream.write(UninterruptibleOutputStream.java:59)
        at java.io.FilterOutputStream.write(FilterOutputStream.java:125)
        at org.jboss.logmanager.handlers.UninterruptibleOutputStream.write(UninterruptibleOutputStream.java:87)
        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
        at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:282)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)
        - locked <0x5edf6cd0> (a java.io.OutputStreamWriter)
        at java.io.OutputStreamWriter.write(OutputStreamWriter.java:207)
        at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)
        - locked <0x5edf6cd0> (a java.io.OutputStreamWriter)
        at java.io.BufferedWriter.flush(BufferedWriter.java:253)
        - locked <0x5edf6cd0> (a java.io.OutputStreamWriter)
        at org.jboss.logmanager.handlers.WriterHandler.safeFlush(WriterHandler.java:173)
        at org.jboss.logmanager.handlers.WriterHandler.flush(WriterHandler.java:142)
        - locked <0x5edf6ca0> (a java.lang.Object)
        at org.jboss.logmanager.ExtHandler.doPublish(ExtHandler.java:107)
        at org.jboss.logmanager.handlers.WriterHandler.doPublish(WriterHandler.java:70)
        - locked <0x5edf6ca0> (a java.lang.Object)
        at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:79)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:296)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:304)
        at org.jboss.logmanager.Logger.logRaw(Logger.java:721)
        at org.slf4j.impl.Slf4jLogger.log(Slf4jLogger.java:326)
        at org.slf4j.impl.Slf4jLogger.log(Slf4jLogger.java:320)
        at org.slf4j.impl.Slf4jLogger.error(Slf4jLogger.java:311)
{code}

As a side note: those stack traces here and the one in the original bug report are taken from the same run. Searching for the waiting-to-lock-object from the original bug report (Object 0x5ee0adf8) reveals, that the ""running, but never finishing"" thread also holds this lock (it holds two locks: the one in LogManager (where all other LogManager-Threads are waiting for), and the one in StdioContext/Printwriter (where all ""other"" Logger-Threads are waiting for).

So it comes down to the question, why this one thread never finishes, and how to avoid that one ""never ending logger thread"" blows up the whole wildfly process by blocking all other threads...","01/Aug/14 1:52 PM;jamezp;This is a tough question. It seems to be stuck on the {{Throwable.fillInStackTrace()}} in a native method. I'm not sure if the native method has a bug or it just happened to be there when the thread dump happened.

If it happens again I'd to see if the thread is blocked on the {{Throwable.fillInStackTrace()}} native method again. Or if you have a way to reproduce that would be even better and I can test it :)","08/Aug/14 2:53 AM;schueffi;Every time this happens to us, one thread is blocked in {code}Throwable.fillInStackTrace(){code}.

I'll try to get a reproducable deployment / configuration, and i'll try whether this only happens in our jdk 1.7.0_45 or also in never releases of jdk.","02/Sep/14 5:18 AM;schueffi;Unfortunately i'm not able to provide an easy to reproduce kickstart project. None of my test-projects (using jmeter for load, different loggings, System.out, Stacktraces and so on) leads to the same locking/blocking of threads.

Apart from this, in our live production environment the error is always the same: either we reduce logging to an absolute minimum (i.e. no logging at all), or we will run in the locking/waiting for lock situation sooner or later (at least once a day).

I found this issue in jira, which sounds the same in terms of ""problem description/behavior"" : endless loop in fillInStackTrace. (Un)fortunately, this bug is solved (according to the jira ticket), and the fixed version is installed in wildfly - so, we do not have the exact same problem here, but a very similar problem behavior...
https://issues.jboss.org/browse/XNIO-215",02/Sep/14 5:25 AM;akaster;Attached the stack file from the last crash,"02/Sep/14 8:52 AM;dmlloyd;Is there an infinite loop in this situation, i.e. one CPU thread at 100%, or is this method simply frozen?  Can you verify that the thread is not making progress?","02/Sep/14 10:37 AM;akaster;_top_ shows a load near 1, i.e. one CPU hanging at 100% (the system has 8 CPU cores)","02/Sep/14 10:52 AM;dmlloyd;It seems extremely unlikely that the JVM is stuck in this method.  I think it's more likely that the log handler in question is writing to a target (either console or disk) and the write is failing.  Because filling in the stack trace is such a time-intensive operation, it has a very high chance of appearing on the stack trace, giving the appearance of no forward progress when actually there is simply a loop of exception throws.

Anyway, now we've confused the issue a bit.  I guess the underlying problem is that one thread is writing a bunch of stuff in a loop, monopolizing the lock, while other threads sit and wait for the lock.  It's possible that the failure in the one thread is in turn being logged, causing the loop to be infinite, though I would find this surprising as there are safeguards to prevent this behavior.",,,,,,,,,,,,,,,,,,
Batching logging profile creation CLI commands can cause errors,WFCORE-37,12534475,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,jamezp,klape,klape,07/Mar/14 6:04 PM,01/Aug/14 1:10 PM,29/Nov/16 3:55 PM,,,,,,,,,,Logging,,,,,0,,,,,,"Given these set of commands:

{noformat}
/subsystem=logging/logging-profile=myLoggingProfile:add
/subsystem=logging/logging-profile=myLoggingProfile/file-handler=myHandler:add(level=ALL,file={""relative-to"" => ""jboss.server.log.dir"",""path"" => ""myapp.log""})
/subsystem=logging/logging-profile=myLoggingProfile/root-logger=ROOT:add
/subsystem=logging/logging-profile=myLoggingProfile/root-logger=ROOT:add-handler(name=myHandler)
/subsystem=logging/logging-profile=myLoggingProfile/root-logger=ROOT:change-root-log-level(level=INFO)
{noformat}

If I run those in a batch, I get an error:

{noformat}13:32:52,478 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) JBAS014613: Operation (""add-handler"") failed - address: ([
    (""subsystem"" => ""logging""),
    (""logging-profile"" => ""myLoggingProfile""),
    (""root-logger"" => ""ROOT"")
]) - failure description: ""JBAS011536: Handler myHandler is already assigned.""
{noformat}

If I run each one individually, I get no error.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzmq4f:,192810,,,,,,,,,,"Combine command #3 and #4:

{noformat}
/subsystem=logging/logging-profile=myLoggingProfile/root-logger=ROOT:add(handlers=[handler=myHandler])
{noformat}",07/Mar/14 8:22 PM;jamezp;I thought I had fixed that with WFLY-1712. Clearly I didn't :(,"01/Aug/14 1:10 PM;jamezp;The easiest workaround for this is to just add the handler in the {{add}} operation. The issue is how the operations are processed. The model is first updated which because the the {{add-handler}} operation adds the handler to the model. Then the runtime is updated and during the add of the logger, the handler is assigned to the logger because it's in the model. This results in the {{add-handler}} failing as the {{add}} operation for the {{root-logger=ROOT}} resource already added the runtime change for the handler.",,,,,,,,,,,,,,,,,,,,,,,,,
CLI NullPointerException for Ctrl+D when prompted for username.,WFCORE-36,12536931,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Cannot Reproduce Bug,dlofthouse,dlofthouse,dlofthouse,02/Apr/14 9:15 AM,31/Jul/14 9:45 AM,29/Nov/16 3:55 PM,31/Jul/14 9:45 AM,,,,,,,1.0.0.Alpha4,,CLI,,,,,0,,,,,,"{code}
[standalone@localhost:9990 /] [darranl@localhost bin]$ ./jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] connect
Username: java.lang.NullPointerException
	at org.jboss.aesh.console.Console.pushToStdOut(Console.java:227)
	at org.jboss.as.cli.impl.Console$Factory$1.print(Console.java:160)
	at org.jboss.as.cli.impl.CommandContextImpl.printLine(CommandContextImpl.java:704)
	at org.jboss.as.cli.impl.CommandContextImpl.error(CommandContextImpl.java:722)
	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:647)
	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1272)
	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:254)
	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.jboss.modules.Module.run(Module.java:312)
	at org.jboss.modules.Main.main(Main.java:460)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,2.0,,1|hzn4gf:,195139,,,,,,,,,,,"19/May/14 12:50 PM;londonjbug;Further debugging shows that the Ctrl-D is being interpreted as a command, however it should only be aborting the current authentication process: -

{code}
""Remoting ""cli-client"" task-2"" daemon prio=10 tid=0x00007f4784038800 nid=0x6c56 in Object.wait() [0x00007f47daf7e000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x00000007ae9366b0> (a java.lang.Thread)
	at java.lang.Thread.join(Thread.java:1280)
	- locked <0x00000007ae9366b0> (a java.lang.Thread)
	at java.lang.Thread.join(Thread.java:1354)
	at java.lang.ApplicationShutdownHooks.runHooks(ApplicationShutdownHooks.java:106)
	at java.lang.ApplicationShutdownHooks$1.run(ApplicationShutdownHooks.java:46)
	at java.lang.Shutdown.runHooks(Shutdown.java:123)
	at java.lang.Shutdown.sequence(Shutdown.java:167)
	at java.lang.Shutdown.exit(Shutdown.java:212)
	- locked <0x00000007ae06d640> (a java.lang.Class for java.lang.Shutdown)
	at java.lang.Runtime.exit(Runtime.java:109)
	at java.lang.System.exit(System.java:962)
	at org.jboss.aesh.console.Console.parseOperation(Console.java:559)
	at org.jboss.aesh.console.Console.read(Console.java:452)
	at org.jboss.aesh.console.Console.read(Console.java:346)
	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:178)
	at org.jboss.as.cli.impl.CommandContextImpl.readLine(CommandContextImpl.java:738)
	at org.jboss.as.cli.impl.CommandContextImpl.access$300(CommandContextImpl.java:167)
	at org.jboss.as.cli.impl.CommandContextImpl$AuthenticationCallbackHandler.dohandle(CommandContextImpl.java:1455)
	at org.jboss.as.cli.impl.CommandContextImpl$AuthenticationCallbackHandler.access$100(CommandContextImpl.java:1378)
	at org.jboss.as.cli.impl.CommandContextImpl$AuthenticationCallbackHandler$1.run(CommandContextImpl.java:1412)
	at org.jboss.as.protocol.GeneralTimeoutHandler.suspendAndExecute(GeneralTimeoutHandler.java:45)
	at org.jboss.as.cli.impl.CommandContextImpl$AuthenticationCallbackHandler.handle(CommandContextImpl.java:1406)
	at org.jboss.sasl.digest.DigestMD5Client.processChallenge(DigestMD5Client.java:355)
	at org.jboss.sasl.digest.DigestMD5Client.evaluateChallenge(DigestMD5Client.java:238)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Authentication$1.run(ClientConnectionOpenListener.java:682)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
{code}",31/Jul/14 9:45 AM;dlofthouse;Can no longer reproduce.,,,,,,,,,,,,,,,,,,,,,,,,,
"launch-command was only added in version 3.0 of schema, however being parsed in all prior versions.",WFCORE-35,12547879,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,dlofthouse,dlofthouse,dlofthouse,30/Jul/14 7:52 AM,31/Jul/14 7:11 AM,29/Nov/16 3:55 PM,31/Jul/14 7:11 AM,,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/66,,,,,,0.0,0.0,,1|hzslin:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The attribute http-upgrade was only added in version 2.0 of the schema yet we are accepting it in 1.1 for HostXml parsing.,WFCORE-33,12547809,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,dlofthouse,dlofthouse,dlofthouse,29/Jul/14 2:23 PM,31/Jul/14 7:11 AM,29/Nov/16 3:55 PM,31/Jul/14 7:11 AM,,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/65,,,,,,0.0,0.0,,1|hzsl1b:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The JBoss Modules schemas are missing from the build,WFCORE-31,12547682,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,emmartins,dlofthouse,dlofthouse,28/Jul/14 2:42 PM,20/Jan/15 3:16 AM,29/Nov/16 3:55 PM,20/Jan/15 3:16 AM,,,,,,,1.0.0.Alpha16,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,1.0,,1|hzskav:,9223372036854775807,,,,,,,,,,,"20/Jan/15 3:16 AM;emmartins;Fixed by the upgrade to WildFly Build Tools 1.0.0.Alpha8

https://github.com/wildfly/wildfly-core/commit/8d29f35c89eec65ae32be62d73ea1f4297ba4265",,,,,,,,,,,,,,,,,,,,,,,,,,
Change startup script to read new logger code in 9.x,WFCORE-30,12547531,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,ctomc,jorsol,jorsol,26/Jul/14 5:01 PM,01/Sep/14 2:27 PM,29/Nov/16 3:55 PM,01/Sep/14 2:27 PM,,,,,,,1.0.0.Alpha4,,Scripts,,,,,0,,,,,,"The refactor of the wildfly-core includes changes in logger codes that affects the startup script to verify if the server is started.

The code JBAS015874 changed to WFLYSRV0025.",Linux,;26/Jul/14 5:12 PM;jorsol;600,,3600,0,600,16%,3600,0,600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,https://github.com/wildfly/wildfly-core/pull/59,,,,,,0.0,1.0,,1|hzsjef:,9223372036854775807,,,,,,,,,,,01/Sep/14 2:27 PM;ctomc;Thank you Jorge.,,,,,,,,,,,,,,,,,,,,,,,,,,
IllegalStateException when patching MBeans are queried during shutdown,WFCORE-29,12544056,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,jameslivingston,jameslivingston,jameslivingston,17/Jun/14 1:19 AM,13/Oct/14 2:39 PM,29/Nov/16 3:55 PM,30/Sep/14 4:16 PM,,,,,,,1.0.0.Alpha4,,Domain Management,Patching ,,,,1,,,,,,"If the MBeans for the patching subsystem are queried during server shutdown, it can result in an IllegalStateException.  InstallationManagerService has already had stop() called on it, so the value is null.

This can be reproduced by the attached EJB, which does a MBeanServer.queryMBeans(null, null); from the @PreDestroy method. It's in a loop to ensure it runs after the installation manager gets de-initialised.

java.lang.IllegalStateException
	at org.jboss.as.patching.installation.InstallationManagerService.getValue(InstallationManagerService.java:87) [wildfly-patching-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.patching.installation.InstallationManagerService.getValue(InstallationManagerService.java:28) [wildfly-patching-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.msc.service.ServiceControllerImpl.getValue(ServiceControllerImpl.java:1158) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]
	at org.jboss.as.patching.management.PatchResource$ElementProviderResourceProvider.children(PatchResource.java:139) [wildfly-patching-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.patching.management.PatchResource$ElementProviderResourceProvider.hasChildren(PatchResource.java:134) [wildfly-patching-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.controller.registry.AbstractModelResource.hasChildren(AbstractModelResource.java:81) [wildfly-controller-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.controller.registry.AbstractModelResource$DelegateResource.hasChildren(AbstractModelResource.java:279) [wildfly-controller-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:57) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.model.RootResourceIterator.iterate(RootResourceIterator.java:43) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.queryMBeans(ModelControllerMBeanHelper.java:125) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.queryMBeans(ModelControllerMBeanServerPlugin.java:159) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at org.jboss.as.jmx.PluggableMBeanServerImpl.queryMBeans(PluggableMBeanServerImpl.java:816) [wildfly-jmx-8.1.0.Final.jar:8.1.0.Final]
	at example.ShutdownMBeanQuery.destroy(ShutdownMBeanQuery.java:23)",,,,,,,,,,,,,,,,,,,,,,,,,,,17/Jun/14 1:21 AM;jameslivingston;shutdownmbeanquery.jar;https://issues.jboss.org/secure/attachment/12383194/shutdownmbeanquery.jar,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1110117,https://bugzilla.redhat.com/show_bug.cgi?id=1120535,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/51,,,,,,1.0,12.0,,1|hzryl3:,9223372036854775807,,,,,,,,,,,"17/Jun/14 2:08 AM;jameslivingston;org.jboss.as.messaging.HornetQServerResource has a similar dependency on a MSC service, and it tests controller.getState()==ServiceController.State.UP before using it. While subject to race conditins (is that worth a bug for HornetQServerResource's potential race?) it would prevent most failures.","17/Jun/14 3:03 AM;emuckenhuber;This seems to be a general issues when shutting down and not specific to patching. So i'll look if we can handle shutdown better in general for JMX as well, since i am already looking into some mgmt protocol related issues related to shutting down.","22/Jun/14 10:50 PM;jameslivingston;Would doing a similar thing to HornetQServerResource in PatchResource as a temporary work-around until the general issue is fixed be acceptable? If so, I'll submit a PR for https://github.com/doctau/wildfly/tree/WFLY-3505",23/Jun/14 4:54 AM;japearson;I tried out James' patch for a shutdown problem I am experiencing with EAP 6.2.3 and it fixed the problem. ,"23/Jun/14 5:50 AM;emuckenhuber;Yeah, i guess this would be fine as a workaround for now.",17/Jul/14 2:20 AM;jira-bugzilla-migration;James Livingston <jlivings@redhat.com> changed the Status of [bug 1110117|https://bugzilla.redhat.com/show_bug.cgi?id=1110117] from NEW to POST,"28/Jul/14 11:17 AM;brian.stansberry;Emanuel, since the PR is now merged, please make sure any JIRAS needed for further work are in place and then resolve this one.",06/Aug/14 3:52 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1110117|https://bugzilla.redhat.com/show_bug.cgi?id=1110117] from POST to MODIFIED,01/Sep/14 4:12 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1120535|https://bugzilla.redhat.com/show_bug.cgi?id=1120535] from ON_QA to VERIFIED,16/Sep/14 3:14 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1110117|https://bugzilla.redhat.com/show_bug.cgi?id=1110117] from MODIFIED to ON_QA,18/Sep/14 8:50 AM;jira-bugzilla-migration;Martin Simka <msimka@redhat.com> changed the Status of [bug 1110117|https://bugzilla.redhat.com/show_bug.cgi?id=1110117] from ON_QA to VERIFIED,13/Oct/14 2:39 PM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1120535|https://bugzilla.redhat.com/show_bug.cgi?id=1120535] from VERIFIED to CLOSED,,,,,,,,,,,,,,,
Deployment scanner treats zipped content as unmanaged,WFCORE-27,12540029,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,ehugonnet,brian.stansberry,brian.stansberry,06/May/14 6:51 PM,28/Jul/14 11:06 AM,29/Nov/16 3:55 PM,28/Jul/14 11:06 AM,,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"A really old commit[1] had the effect that both exploded and zipped deployments in the deployments/ dir are treated as unmanaged content. The original intent was zipped content should be uploaded to the content repo.

This may be ok as I haven't heard about issues it causes. Emmanuel Hugonnet noted that there's an issue with JSP compilation work files from an deployment with a later timestamp not getting discarded if the scanner file has an older timestamp, but that is more an issue with how the JSP compilation work files are maintained than a problem with the scanner creating unmanaged deployments. Switching to managed deployments would fix that, but only for archives.



[1] https://github.com/wildfly/wildfly/commit/fd2d9bc1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/49,,,,,,0.0,0.0,,1|hznm0f:,198010,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Changes made to ExtensionRegistry by operations are not reverted if the operation rolls back,WFCORE-21,12547518,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,25/Jul/14 6:05 PM,03/Sep/14 12:12 PM,29/Nov/16 3:55 PM,03/Sep/14 12:12 PM,,,,,,,1.0.0.Alpha5,,Domain Management,,,,,0,,,,,,"ExtensionRegistry maintains state that OSHs modify during Stage.MODEL. But ExtensionRegistry doesn't (and can't, readily) support the copy-on-write/publish-on-commit behavior that is ideal in Stage.MODEL, so those state changes need to be reverted by the OSH if the operation rolls back.

Affects ExtensionAddHandler, ExtensionRemoveHandler, ApplyMissingDomainModelResourcesHandler and ApplyExtensionsHandler.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/68,,,,,,0.0,0.0,,1|hzsjbj:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Properly cancel active mgmt operation on channel close,WFCORE-19,12540898,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Critical,Done,emuckenhuber,emuckenhuber,emuckenhuber,15/May/14 9:08 AM,29/Jul/14 7:52 AM,29/Nov/16 3:55 PM,29/Jul/14 7:52 AM,,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,Active mgmt operation don't get properly cancelled if there is no associated pending request and the remoting channel gets closed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly/pull/6285,,,,,,0.0,1.0,,1|hznr9j:,198870,,,,,,,,,,,24/May/14 12:00 PM;brian.stansberry;Fix introduces a client-side race during ops like reload or shutdown that result in closing the channel.,,,,,,,,,,,,,,,,,,,,,,,,,,
End users can call non-published management API operations,WFCORE-13,12508718,Bug,Open,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,,,lthon,lthon,24/Oct/13 11:26 AM,29/Nov/16 3:32 PM,29/Nov/16 3:55 PM,,,,,,,,3.0.0.Alpha14,,Domain Management,,,,,0,EAP,,,,,"It's not possible to call ""non-published"" operations (those that are not visible in the resource tree, e.g. {{describe}}) via JMX, while it's entirely possible to call them via CLI (e.g. {{/subsystem=security:describe}}) and other management interfaces.

The problem lies in the fact that {{ModelControllerMBeanHelper.invoke}} method checks {{if (!accessControl.isExecutableOperation(operationName))}} and the {{isExecutableOperation}} method assumes that the operation will be visible in the resource tree. In fact, there is a comment stating _should not happen_, but now we know that it indeed _can_ happen.

What's more, it gives a misleading error message. The {{isExecutableOperation}} returns {{false}} for unknown operations, which results in {{Not authorized to invoke operation}} message. Which is wrong in two different ways simultaneously: 1. the problem isn't authorization, but the fact that the operation can't be found; 2. the user (e.g. in the {{SuperUser}} role) _is_ authorized.

I'm considering this low priority, because 1. JMX is likely to be very rarely used to access the management interface, 2. hiding information isn't nearly as important as leaking them, 3. non-published operations aren't nearly as important as the published ones. It's worth a JIRA nevertheless.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1023100,,,,,Perform,,,,,,,,,,,,,,,,,,,0.0,5.0,,1|hzjd8n:,173289,,,,,,,,,,,"24/Oct/13 11:30 AM;ctomc;We should not publicize :describe operation, as this is really rally low level operation that is not meant for end-user usage.","24/Oct/13 11:34 AM;jira-bugzilla-migration;Ladislav Thon <lthon@redhat.com> made a comment on [bug 1023100|https://bugzilla.redhat.com/show_bug.cgi?id=1023100]

Description of problem:

It's not possible to call ""non-published"" operations (those that are not visible in the resource tree, e.g. ""describe"") via JMX, while it's entirely possible to call them via CLI (e.g. ""/subsystem=security:describe"") and other management interfaces.

The problem lies in the fact that ""ModelControllerMBeanHelper.invoke"" method checks ""if (!accessControl.isExecutableOperation(operationName))"" and the ""isExecutableOperation"" method assumes that the operation will be visible in the resource tree. In fact, there is a comment stating ""should not happen"", but now we know that it indeed _can_ happen.

What's more, it gives a misleading error message. The ""isExecutableOperation"" returns ""false"" for unknown operations, which results in ""Not authorized to invoke operation"" message. Which is wrong in two different ways simultaneously: 1. the problem isn't authorization, but the fact that the operation can't be found; 2. the user (e.g. in the SuperUser role) is authorized.

I'm considering this low priority, because 1. JMX is likely to be very rarely used to access the management interface, 2. hiding information isn't nearly as important as leaking them, 3. non-published operations aren't nearly as important as the published ones.

Version-Release number of selected component (if applicable):

6.2.0.ER6

How reproducible:

Always

Steps to Reproduce:
1. Start EAP in standalone mode
2. Try to invoke the equivalent of ""/subsystem=security:describe"" via JMX programmatically against the running EAP

Actual results:

JBAS011363: Not authorized to invoke operation: 'describe'

Expected results:

The equivalent of the result in CLI.","24/Oct/13 11:38 AM;lthon;I'm not asking to publicize it. In fact, I would be entirely satisfied if the non-published operations were only accessible via the native protocol and other management interfaces gave a ""not found"" response. We can reformulate this issue to say ""give me a proper error message, please"".","24/Oct/13 12:04 PM;lthon;(To make myself entirely clear: what I'm asking for is consistency. I can't see a reason why it's possible to invoke {{:describe}} via the HTTP interface, but not via JMX. Either both should  succeed, or both should fail with a _not found_ message.)","24/Oct/13 12:16 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> made a comment on [bug 1023100|https://bugzilla.redhat.com/show_bug.cgi?id=1023100]

I changed the title. We won't be exposing these over the other interfaces. This isn't really related to RBAC.",,,,,,,,,,,,,,,,,,,,,,
Unhelpful error message when OSH throws an exception with no detail message,WFCORE-8,12546689,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,16/Jul/14 9:39 PM,17/Jul/14 9:34 AM,29/Nov/16 3:55 PM,17/Jul/14 9:34 AM,1.0.0.Alpha3,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"This shows up a fair amount in issue reports, either in the CLI output or in the server log:

""failure-description"" => ""JBAS014749: Operation handler failed: null""

The null happens because the message is getting passed the result of throwable.getLocalizedMessage() and that may be null. See DMR-11 for what's likely the most common reason it's null.

If it's null, the code should use the class name of the error message.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/37,,,,,,0.0,0.0,,1|hzse93:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MapAttributeDefinition and ListAttributeDefinition incorrectly assume valid types in convertParameterExpressions,WFCORE-7,12546688,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,brian.stansberry,brian.stansberry,16/Jul/14 7:37 PM,19/Sep/14 4:10 AM,29/Nov/16 3:55 PM,17/Jul/14 9:34 AM,1.0.0.Alpha3,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"The AttributeDefinition.convertParameterExpression method is called before the validator has validated the model node. This is because the conversion is part of doing any configured ""cleanup"" of the node before validation. (See AS7-6224.)

MapAttributeDefinition and ListAttributeDefinition break this in their overrides of the method by doing unsafe type conversions. When these fail, users get unfriendly failure messages instead of the ones that the validators would provide.

For example, this bogus CLI command:

{code}
[standalone@localhost:9990 /] /subsystem=datasources/data-source=ExampleDS:write-attribute(name=valid-connection-checker-properties, value=1)
{code}

Produces this in the server log:

{code}
15:46:42,167 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""subsystem"" => ""datasources""),
    (""data-source"" => ""ExampleDS"")
]): java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.asPropertyList(ModelValue.java:100) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final]
	at org.jboss.dmr.ModelNode.asPropertyList(ModelNode.java:384) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final]
	at org.jboss.as.controller.MapAttributeDefinition.convertParameterExpressions(MapAttributeDefinition.java:252) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]
	at org.jboss.as.controller.AttributeDefinition.validateAndSet(AttributeDefinition.java:439) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]
	at org.jboss.as.controller.AbstractWriteAttributeHandler.execute(AbstractWriteAttributeHandler.java:88) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:98) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]
{code}

There should be nothing in the server log at all for that error; the validator should have caught it and generated an appropriate failure response to the client.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1056578,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/37,,,,,,0.0,4.0,,1|hzse8v:,9223372036854775807,,,,,,,,,,,16/Jul/14 9:59 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1056578|https://bugzilla.redhat.com/show_bug.cgi?id=1056578] from NEW to POST,06/Aug/14 3:51 PM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1056578|https://bugzilla.redhat.com/show_bug.cgi?id=1056578] from POST to MODIFIED,16/Sep/14 3:13 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1056578|https://bugzilla.redhat.com/show_bug.cgi?id=1056578] from MODIFIED to ON_QA,19/Sep/14 4:10 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1056578|https://bugzilla.redhat.com/show_bug.cgi?id=1056578] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,,
controller client has a small memory leak as it's not cleaning up the ThreadGroup object,WFCORE-5,12546609,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Minor,Done,brian.stansberry,tfonteyn,tfonteyn,16/Jul/14 6:50 AM,22/Sep/14 10:14 AM,29/Nov/16 3:55 PM,16/Jul/14 6:36 PM,1.0.0.Alpha2,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"org.jboss.as.controller.client.impl.ClientConfigurationImpl

052     static ExecutorService createDefaultExecutor() {
053         final ThreadGroup group = new ThreadGroup(""management-client-thread"");

The ThreadGroup is never cleaned up and creates a memory leak",,,,,,,,,,,,,,,,,,,,,,,,,,,16/Jul/14 6:51 AM;tfonteyn;CLIMemoryLeak.zip;https://issues.jboss.org/secure/attachment/12383830/CLIMemoryLeak.zip,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1120177,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/35,,,,,,1.0,5.0,,1|hzsdrz:,9223372036854775807,,,,"Start an out of the box build. I used a wildfly-9.0.0.Alpha1-SNAPSHOT build of July 9th.

Run the attached standalone program. It will do a loop creating a connection, and destroying it (try-with-resources)

When it display 240.000 take a heap dump. The dump will contain an equal amount of ThreadGroup objects as connections have been made.

The program will show memory calculations. These are not very precise of course, but the heap dump is very clear.
",,,,,,,"16/Jul/14 11:50 AM;brian.stansberry;There are a bunch of similar situations, although this is the only one that looks to be a severe issue. The rest are either associated with static variables or some other construct that won't be repeatedly created over the lifespan of the relevant process, or they are owned by services that would likely not get recreated any more frequently than a reload happens.

In this particular case the only solutions I see are:

1) to hold the ref to the ThreadGroup in a static field
2) Override terminated() on the ThreadPoolExecutor the method creates and have it call group.destroy()
",16/Jul/14 12:13 PM;jira-bugzilla-migration;Brian Stansberry <brian.stansberry@redhat.com> changed the Status of [bug 1120177|https://bugzilla.redhat.com/show_bug.cgi?id=1120177] from NEW to POST,07/Aug/14 5:21 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1120177|https://bugzilla.redhat.com/show_bug.cgi?id=1120177] from POST to MODIFIED,16/Sep/14 3:15 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1120177|https://bugzilla.redhat.com/show_bug.cgi?id=1120177] from MODIFIED to ON_QA,22/Sep/14 10:14 AM;jira-bugzilla-migration;Petr Kremensky <pkremens@redhat.com> changed the Status of [bug 1120177|https://bugzilla.redhat.com/show_bug.cgi?id=1120177] from ON_QA to VERIFIED,,,,,,,,,,,,,,,,,,,,,,
Assertion error starting domain mode with assertions enabled,WFCORE-2,12546416,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,brian.stansberry,swd847,swd847,14/Jul/14 10:14 PM,16/Jul/14 6:35 PM,29/Nov/16 3:55 PM,16/Jul/14 6:35 PM,,,,,,,1.0.0.Alpha4,,Domain Management,,,,,0,,,,,,"{code}
[Host Controller] 12:10:19,566 ERROR [org.jboss.as.controller.management-operation] (server-registration-threads - 1) WFLYCTL0013: Operation (""register-server"") failed - address: ([]): java.lang.AssertionError
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResourceFromRoot(OperationContextImpl.java:562) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.ReadOnlyContext.readResourceFromRoot(ReadOnlyContext.java:196) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler$ServerRegistrationStepHandler.execute(ServerToHostProtocolHandler.java:215)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:603) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:481) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:282) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:277) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.executeReadOnlyOperation(ModelControllerImpl.java:203) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.controller.AbstractControllerService.executeReadOnlyOperation(AbstractControllerService.java:310) [wildfly-controller-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService.access$600(DomainModelControllerService.java:156)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.joinActiveOperation(DomainModelControllerService.java:1077)
[Host Controller] 	at org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler$ServerRegistrationRequestHandler$1.execute(ServerToHostProtocolHandler.java:180)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:297) [wildfly-protocol-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:536) [wildfly-protocol-1.0.0.Alpha4-SNAPSHOT.jar:1.0.0.Alpha4-SNAPSHOT]
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_51]
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_51]
[Host Controller] 	at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_51]
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:122) [jboss-threads-2.1.1.Final.jar:2.1.1.Final]
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/32,,,,,,0.0,0.0,,1|hzsckv:,9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deployment overlay feature does not work if a leading / is present on the overlay path,WFCORE-1,12545291,Bug,Resolved,WFCORE,WildFly Core,software,jason.greene,The core runtime of WildFly,http://wildfly.org,Major,Done,swd847,lylewang,lylewang,02/Jul/14 1:18 AM,13/Oct/14 2:38 PM,29/Nov/16 3:55 PM,03/Jul/14 3:47 PM,1.0.0.Alpha1,,,,,,1.0.0.Alpha2,,Server,,,,,0,,,,,,"According to WFLY-1359[1], we should be able to add a jar for an existing deployment.

Testing against  WildFly 8.1.0 Final, the deployment-overlay feature reports errors on adding a new .jar for a .rar resource adapter deployment.

[1] - https://issues.jboss.org/browse/WFLY-1359",,,,,,,,,,,,,,,,,,,,,,,,,,,02/Jul/14 1:20 AM;lylewang;wmq.jmsra.rar;https://issues.jboss.org/secure/attachment/12383451/wmq.jmsra.rar,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1110635,,,,,Perform,,,,,,,,,,,,,https://github.com/wildfly/wildfly-core/pull/8,,,,,,1.0,10.0,,1|hzs5yn:,9223372036854775807,,,,"1. Deploy attached ""wmq.jmsra.rar"" on a newly installed WildFly 8.1.0 Final

2. In CLI, use deployment-overlay command to add a .jar file for deployment ""wmq.jmsra.rar"" (overlay-2.jar can be any .jar file containing some additional classes which might be used later by the resource adapter)

[standalone@localhost:9999 /] deployment-overlay add --name=myOverlay --content=/overlay-2.jar=/home/lyle.w/Desktop/01113565/overlay-2.jar --deployments=wmq.jmsra.rar --redeploy-affected

",,,,,,,02/Jul/14 8:32 AM;swd847;What is the error that you see?,"02/Jul/14 4:28 PM;swd847;I investigated and it turns out that this is because you are using the path /overlay-2.jar instead of overlay-2.jar. 

This is a bug, I will fix it so both versions work.",13/Aug/14 2:58 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1110635|https://bugzilla.redhat.com/show_bug.cgi?id=1110635] from NEW to POST,13/Aug/14 3:00 PM;jira-bugzilla-migration;Brad Maxwell <bmaxwell@redhat.com> changed the Status of [bug 1129836|https://bugzilla.redhat.com/show_bug.cgi?id=1129836] from NEW to POST,24/Aug/14 7:07 AM;jira-bugzilla-migration;Kabir Khan <kkhan@redhat.com> changed the Status of [bug 1110635|https://bugzilla.redhat.com/show_bug.cgi?id=1110635] from POST to MODIFIED,25/Aug/14 12:52 AM;jira-bugzilla-migration;baranowb <bbaranow@redhat.com> changed the Status of [bug 1129836|https://bugzilla.redhat.com/show_bug.cgi?id=1129836] from POST to MODIFIED,29/Aug/14 8:14 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1129836|https://bugzilla.redhat.com/show_bug.cgi?id=1129836] from ON_QA to VERIFIED,16/Sep/14 3:15 PM;jira-bugzilla-migration;Paul Gier <pgier@redhat.com> changed the Status of [bug 1110635|https://bugzilla.redhat.com/show_bug.cgi?id=1110635] from MODIFIED to ON_QA,18/Sep/14 5:33 AM;jira-bugzilla-migration;Jan Martiska <jmartisk@redhat.com> changed the Status of [bug 1110635|https://bugzilla.redhat.com/show_bug.cgi?id=1110635] from ON_QA to VERIFIED,13/Oct/14 2:38 PM;jira-bugzilla-migration;mark yarborough <myarboro@redhat.com> changed the Status of [bug 1129836|https://bugzilla.redhat.com/show_bug.cgi?id=1129836] from VERIFIED to CLOSED,,,,,,,,,,,,,,,,,
